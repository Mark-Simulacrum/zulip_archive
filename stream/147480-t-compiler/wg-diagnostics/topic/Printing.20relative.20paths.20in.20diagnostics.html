<html>
<head><meta charset="utf-8"><title>Printing relative paths in diagnostics · t-compiler/wg-diagnostics · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/index.html">t-compiler/wg-diagnostics</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html">Printing relative paths in diagnostics</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252502661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252502661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252502661">(Sep 08 2021 at 17:43)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="119031">@Esteban Küber</span> So when you run "cargo build" from a place other than the workspace root, the diagnostics print file paths that are relative to the root, whcih means terminal stuff like "click on the file to open it in your editor" doesn't work. What do folks think about making it so that cargo passes a relative path to rustc, one that can be pathdiff'd before printing diagnostics? I feel like there should be an issue for this already but I can't find one, so I'm asking here first</p>



<a name="252503975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252503975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252503975">(Sep 08 2021 at 17:52)</a>:</h4>
<p>I think it's reasonable to add, but wouldn't personally love it because my terminal/editor deals with it (it does global path search instead of assuming the path is rooted where you are) so it would look longer for no personal benefit</p>



<a name="252504053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252504053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252504053">(Sep 08 2021 at 17:53)</a>:</h4>
<p>But I'll get over it. Cargo should pass in info about the workspace (and the crates and their versions as well)</p>



<a name="252504726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252504726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252504726">(Sep 08 2021 at 17:57)</a>:</h4>
<p>I'm going to file a cargo bug</p>



<a name="252506162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506162">(Sep 08 2021 at 18:06)</a>:</h4>
<p><a href="https://github.com/rust-lang/cargo/issues/9887">https://github.com/rust-lang/cargo/issues/9887</a> and <a href="https://github.com/rust-lang/rust/issues/88754">https://github.com/rust-lang/rust/issues/88754</a></p>



<a name="252506213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506213">(Sep 08 2021 at 18:06)</a>:</h4>
<p><span class="user-mention" data-user-id="119031">@Esteban Küber</span> this would involve adding a stable flag to rustc, does this need an MCP?</p>



<a name="252506252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506252">(Sep 08 2021 at 18:06)</a>:</h4>
<p>Why do we need a new flag?</p>



<a name="252506265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506265">(Sep 08 2021 at 18:06)</a>:</h4>
<p>(woudl you be able to help me push this on the compiler side? i'm happy to implement)</p>



<a name="252506273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506273">(Sep 08 2021 at 18:06)</a>:</h4>
<p>I believe so, but can't it start as a Z?</p>



<a name="252506304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506304">(Sep 08 2021 at 18:07)</a>:</h4>
<p>remap-path-prefix seems like it should work, no? There was also some recent discussion about a diagnostic-specific version, IIRC</p>



<a name="252506352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506352">(Sep 08 2021 at 18:07)</a>:</h4>
<p>i don't think remap-path-prefix does what we want here?</p>



<a name="252506394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506394">(Sep 08 2021 at 18:07)</a>:</h4>
<p>also remap-path-prefix affects the binary</p>



<a name="252506425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506425">(Sep 08 2021 at 18:07)</a>:</h4>
<p>which would mean that <code>cargo build</code> from different folders would result in rebuilds</p>



<a name="252506655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252506655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252506655">(Sep 08 2021 at 18:09)</a>:</h4>
<p>Let me try to find the discussion I was thinking of</p>



<a name="252507092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252507092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252507092">(Sep 08 2021 at 18:11)</a>:</h4>
<p>cc <a href="https://github.com/rust-lang/rust/issues/73740">https://github.com/rust-lang/rust/issues/73740</a>, and I think <a href="https://github.com/rust-lang/rust/issues/87745">https://github.com/rust-lang/rust/issues/87745</a> is the issue I was thinking of</p>



<a name="252507340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252507340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252507340">(Sep 08 2021 at 18:13)</a>:</h4>
<p>I think the discussion suggests you could do something like <code>--remap-path-prefix .=$(pwd)</code> in RUSTFLAGS? Where <code>.</code> would be rustc's cwd, and pwd would be the (nested) location you're invoking from</p>



<a name="252507629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252507629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252507629">(Sep 08 2021 at 18:14)</a>:</h4>
<p>but with regards to paths in diagnostics <em>only</em>, I'm less sure</p>



<a name="252507705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252507705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252507705">(Sep 08 2021 at 18:15)</a>:</h4>
<blockquote>
<p><code>--remap-path-prefix .=$(pwd)</code></p>
</blockquote>
<p>I guess this would rather be <code>.=../../</code></p>



<a name="252508017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508017">(Sep 08 2021 at 18:17)</a>:</h4>
<p>yeah remap-path-prefix is a no-go here</p>



<a name="252508051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508051">(Sep 08 2021 at 18:17)</a>:</h4>
<p>whatever we use here _cannot_ touch the binary</p>



<a name="252508148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508148">(Sep 08 2021 at 18:18)</a>:</h4>
<p>remap-path-prefix exists primarily for reproducible builds, so almost by definition it is about touching the binary</p>



<a name="252508467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508467">(Sep 08 2021 at 18:20)</a>:</h4>
<p>I guess you'd want something like "diagnostic-cwd"</p>



<a name="252508504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508504">(Sep 08 2021 at 18:20)</a>:</h4>
<p>but it feels pretty painful</p>



<a name="252508873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508873">(Sep 08 2021 at 18:22)</a>:</h4>
<p>ew</p>



<a name="252508882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508882">(Sep 08 2021 at 18:22)</a>:</h4>
<p>yeah</p>



<a name="252508926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508926">(Sep 08 2021 at 18:22)</a>:</h4>
<p>also i suspect that would have to be special cased in incremental build stuff</p>



<a name="252508978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252508978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252508978">(Sep 08 2021 at 18:23)</a>:</h4>
<p>--diagnostic-cwd= is a good normal flag name though</p>



<a name="252509065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252509065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252509065">(Sep 08 2021 at 18:23)</a>:</h4>
<p><span class="user-mention" data-user-id="119031">@Esteban Küber</span> it can start with a -Z, but then cargo can't use it right?</p>



<a name="252509582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252509582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252509582">(Sep 08 2021 at 18:26)</a>:</h4>
<p>I do think something like a compiler MCP is necessary -- particularly around interactions with remap-path-prefix, for example</p>



<a name="252509627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252509627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252509627">(Sep 08 2021 at 18:27)</a>:</h4>
<p>(which goes first, etc)</p>



<a name="252509655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252509655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252509655">(Sep 08 2021 at 18:27)</a>:</h4>
<p>Cargo can't use -Z flags on stable, yes</p>



<a name="252513804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252513804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252513804">(Sep 08 2021 at 18:57)</a>:</h4>
<p>Cargo doesn't know how to format the error messages. It directly extracts the field containing the already rendered message from the error message json, so it can't remap on it's own.</p>



<a name="252514065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252514065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252514065">(Sep 08 2021 at 18:59)</a>:</h4>
<p>I think <code>--diagnostic-cwd</code> is also a bad idea as it requires a recompilation of every crate that had an error.</p>



<a name="252514145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252514145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252514145">(Sep 08 2021 at 18:59)</a>:</h4>
<p>Or do you mean that it would be used to map it to a special path that cargo can search-and-replace in the error messages?</p>



<a name="252526949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252526949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252526949">(Sep 08 2021 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> why would it require a recompilation of every crate?</p>



<a name="252527019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252527019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252527019">(Sep 08 2021 at 20:24)</a>:</h4>
<p>the whole _point_ is that it affects diagnostics and only diagnostics</p>



<a name="252527041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252527041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252527041">(Sep 08 2021 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> the suggestion is for rustc to have this flag, and for cargo to set it</p>



<a name="252527054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252527054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252527054">(Sep 08 2021 at 20:24)</a>:</h4>
<p>cargo doesn't need to understand the error format</p>



<a name="252530860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Printing%20relative%20paths%20in%20diagnostics/near/252530860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Printing.20relative.20paths.20in.20diagnostics.html#252530860">(Sep 08 2021 at 20:52)</a>:</h4>
<p>If you change the current directory, the value of this flag would change, right? Thus requiring a recompilation.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Handling invalid suggestions · t-compiler/wg-diagnostics · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/index.html">t-compiler/wg-diagnostics</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Handling.20invalid.20suggestions.html">Handling invalid suggestions</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252335089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Handling%20invalid%20suggestions/near/252335089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> spaarmann <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Handling.20invalid.20suggestions.html#252335089">(Sep 07 2021 at 16:47)</a>:</h4>
<p>Hi! I am taking a look at improving a diagnostic that currently produces a suggestion to import a private/not-accessible item (which doesn't work on its own), issue <a href="https://github.com/rust-lang/rust/issues/50923">#50923</a>.<br>
I'm wondering whether it would generally be considered preferable to keep the invalid suggestion, but add some additional text to the effect that the visibility also needs to change, or stop making the concrete edit suggestion and instead only point out that the private item exists and could be used as a <code>note:</code>?</p>



<a name="252335299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Handling%20invalid%20suggestions/near/252335299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> spaarmann <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Handling.20invalid.20suggestions.html#252335299">(Sep 07 2021 at 16:49)</a>:</h4>
<p>(I also want to have a go at producing a correct/valid suggestion when possible instead, but as this is my first contribution to the compiler and I don't know if I'll actually manage that, I figured it's better to start small and at least make a bit of progress on the issue)</p>



<a name="252504977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Handling%20invalid%20suggestions/near/252504977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Handling.20invalid.20suggestions.html#252504977">(Sep 08 2021 at 17:59)</a>:</h4>
<p>What ideally would happen is that for private but crate local items would get the import suggestion and a suggestion to make them importable, while items from other crates would get a note saying "you want this but you can't import it because it's private"</p>



<a name="252505029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Handling%20invalid%20suggestions/near/252505029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Handling.20invalid.20suggestions.html#252505029">(Sep 08 2021 at 17:59)</a>:</h4>
<p>The first will be enough for most projects, and the second gives context</p>



<a name="252505194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Handling%20invalid%20suggestions/near/252505194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Handling.20invalid.20suggestions.html#252505194">(Sep 08 2021 at 18:00)</a>:</h4>
<p>But as you state, ideally we would look for a public path that can be used instead, but even with that, we have to handle the non-importable case.</p>



<a name="252660456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Handling%20invalid%20suggestions/near/252660456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> spaarmann <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Handling.20invalid.20suggestions.html#252660456">(Sep 09 2021 at 17:06)</a>:</h4>
<p>Thanks, that makes sense. I should definitely be able to add an extra <code>help:</code> or so that points out you'd need to first make the item importable for crate-local things; and I'll probably try producing an actual suggestion for doing so too.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
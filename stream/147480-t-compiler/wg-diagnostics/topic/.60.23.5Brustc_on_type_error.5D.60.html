<html>
<head><meta charset="utf-8"><title>`#[rustc_on_type_error]` · t-compiler/wg-diagnostics · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/index.html">t-compiler/wg-diagnostics</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/.60.23.5Brustc_on_type_error.5D.60.html">`#[rustc_on_type_error]`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277553565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/%60%23%5Brustc_on_type_error%5D%60/near/277553565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/.60.23.5Brustc_on_type_error.5D.60.html#277553565">(Apr 02 2022 at 21:48)</a>:</h4>
<p>I keep forgetting to write this down so I'll take this stroll to do so.</p>



<a name="277553573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/%60%23%5Brustc_on_type_error%5D%60/near/277553573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/.60.23.5Brustc_on_type_error.5D.60.html#277553573">(Apr 02 2022 at 21:48)</a>:</h4>
<p>I think there's an opportunity to introduce a new attribute that acts like on_unimplemented but for type errors instead of traits.</p>



<a name="277553646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/%60%23%5Brustc_on_type_error%5D%60/near/277553646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/.60.23.5Brustc_on_type_error.5D.60.html#277553646">(Apr 02 2022 at 21:50)</a>:</h4>
<p>We have checks in rustc to convert some std types to others, but making an attribute lowers the barrier to entry to add new ones and makes things like "call .chars()" possible without touching the reporting code. What do people think?</p>



<a name="277553725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/%60%23%5Brustc_on_type_error%5D%60/near/277553725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/.60.23.5Brustc_on_type_error.5D.60.html#277553725">(Apr 02 2022 at 21:52)</a>:</h4>
<p>While at it, I was playing around with the idea of Perma unstable attribute for on_unimplemented, where the compilers only assurance is that it'll be present and not cause compile errors regardless of what's passed to it, and if used correctly it will affect the compiler output. Just realized that it could remain a compiler internal and have a blessed crate that provides those assurances.</p>



<a name="277553744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/%60%23%5Brustc_on_type_error%5D%60/near/277553744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/.60.23.5Brustc_on_type_error.5D.60.html#277553744">(Apr 02 2022 at 21:53)</a>:</h4>
<p>Between these two things, then we'd have a positive answer to <a href="https://users.rust-lang.org/t/rustc-output-filter-plugins/73741">https://users.rust-lang.org/t/rustc-output-filter-plugins/73741</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
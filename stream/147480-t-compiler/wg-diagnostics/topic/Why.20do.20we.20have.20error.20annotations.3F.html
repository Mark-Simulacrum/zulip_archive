<html>
<head><meta charset="utf-8"><title>Why do we have error annotations? · t-compiler/wg-diagnostics · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/index.html">t-compiler/wg-diagnostics</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Why.20do.20we.20have.20error.20annotations.3F.html">Why do we have error annotations?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261395459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Why%20do%20we%20have%20error%20annotations%3F/near/261395459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rukai <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Why.20do.20we.20have.20error.20annotations.3F.html#261395459">(Nov 14 2021 at 03:27)</a>:</h4>
<p>I've read the documentation here <a href="https://rustc-dev-guide.rust-lang.org/tests/adding.html#error-annotations">https://rustc-dev-guide.rust-lang.org/tests/adding.html#error-annotations</a> but im not sure what error annotations provide over the already mandatory .stderr files in UI tests?</p>



<a name="261395588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Why%20do%20we%20have%20error%20annotations%3F/near/261395588" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Why.20do.20we.20have.20error.20annotations.3F.html#261395588">(Nov 14 2021 at 03:30)</a>:</h4>
<p>It's really easy to --bless the .stderr files without looking at the changes. Adding the annotations makes it harder to change the output by accident, and also makes it easier to read the errors at a glance since the . stderr files can be quite large</p>



<a name="261395935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Why%20do%20we%20have%20error%20annotations%3F/near/261395935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rukai <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Why.20do.20we.20have.20error.20annotations.3F.html#261395935">(Nov 14 2021 at 03:40)</a>:</h4>
<p>Hmmm I would think checking the .stderr files would be an important part of development.<br>
If the developer fails to check it, at the very least the reviewer should be ensuring that the quality of the diagnostics isnt regressing.</p>
<p>I made my first diagnostics PR earlier and I was just blindly doing the busy work of copying in the error annotations and then thoroughly checked the blessed .stderr files afterwards.<br>
Maybe at larger scales this strategy becomes impossible though?</p>
<p>Anyway, thanks for the answer, I'll probably get a better idea of its value if I keep contributing.</p>



<a name="261412529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Why%20do%20we%20have%20error%20annotations%3F/near/261412529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Why.20do.20we.20have.20error.20annotations.3F.html#261412529">(Nov 14 2021 at 11:28)</a>:</h4>
<p>Sometimes the order of errors changes. In that case it is easy to miss that an error went missing.</p>



<a name="261959737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Why%20do%20we%20have%20error%20annotations%3F/near/261959737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Why.20do.20we.20have.20error.20annotations.3F.html#261959737">(Nov 18 2021 at 17:20)</a>:</h4>
<p>It's also a hedge against regressions on very <em>large</em> refactorings, where several hundred .stderr files get changed at the same time.</p>



<a name="261959806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/147480-t-compiler/wg-diagnostics/topic/Why%20do%20we%20have%20error%20annotations%3F/near/261959806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/147480-t-compiler/wg-diagnostics/topic/Why.20do.20we.20have.20error.20annotations.3F.html#261959806">(Nov 18 2021 at 17:21)</a>:</h4>
<p>And not everyone is... as diligent in looking at the .stderr changes on large PRs all the time <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Integrating Zig&#x27;s `abilists` project for `glibc` symbols · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html">Integrating Zig&#x27;s `abilists` project for `glibc` symbols</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272194000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/272194000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Gubler <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#272194000">(Feb 16 2022 at 23:24)</a>:</h4>
<p>Hey all! <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> First-time contributor here, long-time lurker.</p>
<p><a href="https://twitter.com/erichdongubler/status/1492963837993172994">I recently got nerd-sniped</a> by Andrew Kelley of Zig fame when [he tweeted about <a href="https://twitter.com/andy_kelley/status/1470338795266457600"><code>abilists</code> files generated by <code>ziglang/glibc-abi-util</code></a>. The Zig project uses it to consolidate all of the <code>glibc</code> symbols across many <code>glibc</code> releases into a single index file, which in turn is <a href="https://github.com/ziglang/zig/blob/1e481dfef5a2241bfc5460214dbd0daffe5063bc/src/glibc.zig">used by the Zig compiler</a> to query individually versioned <code>glibc</code> symbols associated with a given <code>glibc</code> library version. This is handy for use cases like cross-compilation. See also recent conversation in <a href="https://www.reddit.com/r/rust/comments/stq51v/comment/hx5hw3w/?context=3">this Reddit post</a>, and Andrew's high-level description of what this component does for Zig <a href="https://andrewkelley.me/post/zig-cc-powerful-drop-in-replacement-gcc-clang.html">here</a> (in the <code>glibc</code> section).</p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/erichdongubler/status/1492963837993172994"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/0c9b0537b7209b8686b43eadaad4fa3924de52da/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313434323636383233323138343431303131332f72435f4d5f4b41415f6e6f726d616c2e6a7067"></a><p><a href="https://twitter.com/timClicks">@timClicks</a> <a href="https://twitter.com/m_ou_se">@m_ou_se</a> <a href="https://twitter.com/andy_kelley">@andy_kelley</a> <a href="https://twitter.com/pnkfelix">@pnkfelix</a> Alright, I've been nerd sniped. I've started a skeleton at <a href="https://t.co/Kh1VdeSCdV">https://github.com/erichdongubler/abiutils</a>, will see how far I can get over next weekend. :)</p><span>- Erich Gubler (@erichdongubler)</span></div></div><div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/andy_kelley/status/1470338795266457600"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/9df5ed49aca30c6d95d1ce7547a09031edf764db/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313436303332383637313638383838343233312f33547851475662375f6e6f726d616c2e6a7067"></a><p>I'm curious if any Rust folks are interested in this - this work is extremely reusable and it's really not that much code to add to the compiler to parse this 165 KB file and then be able to cross compile for any glibc version on any CPU architecture. <a href="https://t.co/1EmB5kDBFH">https://twitter.com/andy_kelley/status/1470332120665001990</a></p><span>- Andrew Kelley (@andy_kelley)</span></div></div><p>I've made a (soon-to-be-formerly-WIP) <a href="https://github.com/ErichDonGubler/abilists">parser crate</a> for the index file generated by <code>glibc-abi-util</code>, and I want to make sure that this work is available for anybody interested. If you're interested in mentoring, I'd be more than happy to drive implementation work for integrating these <code>abilists</code> indices into <code>rustc</code>!</p>



<a name="272194364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/272194364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Gubler <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#272194364">(Feb 16 2022 at 23:28)</a>:</h4>
<p>(Yes, the link in my tweet is incorrect -- the repo name is wrong. <span aria-label="flushed" class="emoji emoji-1f633" role="img" title="flushed">:flushed:</span><span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>)</p>



<a name="272194695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/272194695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#272194695">(Feb 16 2022 at 23:33)</a>:</h4>
<p>I don't think rustc itself should get such deep integration with glibc. Is it possible to do this in the libc crate? I don't know what exactly needs to be done.</p>



<a name="272194776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/272194776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim McNamara <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#272194776">(Feb 16 2022 at 23:34)</a>:</h4>
<p>I don't have much to add here, apart to say that it's extremely impressive/interesting.</p>



<a name="272196314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/272196314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Gubler <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#272196314">(Feb 16 2022 at 23:54)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span>: I actually don't know about design trade-offs between this crate and <code>libc</code>, having never needed to deal with linker ecosystem like this before. I'm hoping somebody can enlighten me.</p>



<a name="272757626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/272757626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#272757626">(Feb 22 2022 at 03:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220097">Erich Gubler</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Integrating.20Zig's.20.60abilists.60.20project.20for.20.60glibc.60.20symbols/near/272196314">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span>: I actually don't know about design trade-offs between this crate and <code>libc</code>, having never needed to deal with linker ecosystem like this before. I'm hoping somebody can enlighten me.</p>
</blockquote>
<p>The libc crate contains our bindings against a target's C runtime, which means all the glibc symbols. rustc itself depends on this crate during build time for specific platforms, instead of having them directly embedded in the compiler. <a href="https://github.com/rust-lang/libc">https://github.com/rust-lang/libc</a></p>



<a name="274209673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/274209673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Gubler <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#274209673">(Mar 05 2022 at 01:07)</a>:</h4>
<p><span class="user-mention" data-user-id="281757">@Jubilee</span>: I'm getting some interest in integrating this at <a href="https://github.com/ErichDonGubler/abilists/issues/5">https://github.com/ErichDonGubler/abilists/issues/5</a>. I'm going to ask them about participating here, but in the meantime, I wanted to ask: do you know where <code>libc</code> contributors hang out? I don't see anything in the <a href="https://github.com/rust-lang/libc"><code>libc</code> repo</a> about open-ended communication with contributors, and their issue templates are pretty closed in scope.</p>



<a name="274209867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/274209867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erich Gubler <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#274209867">(Mar 05 2022 at 01:10)</a>:</h4>
<p>I'm also not positive if this Zulip stream is the best place to ask investigative questions like I am, proposing that this new crate get used. Perhaps there's other places we/I should be asking?</p>



<a name="274211787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Integrating%20Zig%27s%20%60abilists%60%20project%20for%20%60glibc%60%20symbols/near/274211787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Integrating.20Zig&#x27;s.20.60abilists.60.20project.20for.20.60glibc.60.20symbols.html#274211787">(Mar 05 2022 at 01:49)</a>:</h4>
<p>technically libc falls under T-libs but yes the crate doesn't have a lot of chatter over it, in spite of its importance.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>no space left on device (tmpfs) when compiling rustc · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html">no space left on device (tmpfs) when compiling rustc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="173229021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173229021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173229021">(Aug 14 2019 at 18:28)</a>:</h4>
<p>I was getting the following error recently ...</p>



<a name="173229025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173229025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173229025">(Aug 14 2019 at 18:28)</a>:</h4>
<div class="codehilite"><pre><span></span>   Compiling rustc_driver v0.0.0 (/home/santiago/src/oss/rust1/src/librustc_driver)
error: failed to write version script: No space left on device (os error 28)
</pre></div>



<a name="173229085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173229085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173229085">(Aug 14 2019 at 18:29)</a>:</h4>
<p>and was due to tmpfs being automatically configured by ArchLinux to use half of my RAM (on my local machine 8GB right now) so that meant 4GB of tmpfs</p>



<a name="173229098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173229098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173229098">(Aug 14 2019 at 18:29)</a>:</h4>
<p>and was running out of space when compiling</p>



<a name="173229209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173229209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173229209">(Aug 14 2019 at 18:30)</a>:</h4>
<p>I ended wondering ... given that <code>tmpfs</code> is usually resides in memory and/or swap partition, is it the best idea to have the compilation (at least of rustc) using /tmp ?</p>



<a name="173229226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173229226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173229226">(Aug 14 2019 at 18:30)</a>:</h4>
<p>did someone else hitted something like this?</p>



<a name="173229239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173229239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173229239">(Aug 14 2019 at 18:30)</a>:</h4>
<p>am I wrong? (probably <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span>)</p>



<a name="173234279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173234279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173234279">(Aug 14 2019 at 19:30)</a>:</h4>
<p>rustc puts some temporary stuff into tmpfs afaik</p>



<a name="173236494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173236494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173236494">(Aug 14 2019 at 19:58)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> yeah, but it was filling up 4GB of stuff, which could mean 4GB of memory for intermediate compilation artifacts</p>



<a name="173236495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173236495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173236495">(Aug 14 2019 at 19:58)</a>:</h4>
<p>besides from the RAM used by the process to compile</p>



<a name="173301647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301647">(Aug 15 2019 at 15:58)</a>:</h4>
<p>to add more info about this ...</p>



<a name="173301671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301671">(Aug 15 2019 at 15:59)</a>:</h4>
<div class="codehilite"><pre><span></span>[santiago@archlinux rust1 (master)]$ df -h
Filesystem      Size  Used Avail Use% Mounted on
dev             3.8G     0  3.8G   0% /dev
run             3.8G  1.7M  3.8G   1% /run
/dev/nvme0n1p2  234G  149G   73G  68% /
tmpfs           3.8G  179M  3.6G   5% /dev/shm
tmpfs           3.8G     0  3.8G   0% /sys/fs/cgroup
tmpfs           3.8G  3.8G     0 100% /tmp
/dev/nvme0n1p1  511M   68M  444M  14% /boot
tmpfs           771M  8.0M  763M   2% /run/user/1000
</pre></div>



<a name="173301696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301696">(Aug 15 2019 at 15:59)</a>:</h4>
<p>rustc files took up to 4GB on my machine and that's why it gave that error</p>



<a name="173301699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301699">(Aug 15 2019 at 15:59)</a>:</h4>
<p>It does sound to me (based on some links that <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> sent me) that /tmp is not meant to be used for larger files</p>



<a name="173301709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301709">(Aug 15 2019 at 15:59)</a>:</h4>
<p>yep</p>



<a name="173301722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301722">(Aug 15 2019 at 15:59)</a>:</h4>
<p><code>/var/tmp</code> should be used instead</p>



<a name="173301726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301726">(Aug 15 2019 at 15:59)</a>:</h4>
<p>There must be <em>some</em> system API that we can use to get a "suitable path for temporary, large files" right?</p>



<a name="173301774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301774">(Aug 15 2019 at 16:00)</a>:</h4>
<p>like, rather than hardcode /var/tmp</p>



<a name="173301778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301778">(Aug 15 2019 at 16:00)</a>:</h4>
<p>I'm not sure where we're selecting those paths</p>



<a name="173301789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301789">(Aug 15 2019 at 16:00)</a>:</h4>
<p>I suspect I know the file though</p>



<a name="173301818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301818">(Aug 15 2019 at 16:00)</a>:</h4>
<p>can you point more or less to where?</p>



<a name="173301822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301822">(Aug 15 2019 at 16:00)</a>:</h4>
<p>I can investigate further</p>



<a name="173301869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301869">(Aug 15 2019 at 16:01)</a>:</h4>
<p>for more info about this issue</p>



<a name="173301872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301872">(Aug 15 2019 at 16:01)</a>:</h4>
<blockquote>
<p>As mentioned, this is a tmpfs on many Linuxes/Unixes (and most likely will be for most soon), and hence should be used only for small files. It's generally a shared namespace, hence the only APIs for using it should be mkstemp()</p>
</blockquote>



<a name="173301881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301881">(Aug 15 2019 at 16:01)</a>:</h4>
<p><a href="http://0pointer.net/blog/projects/tmp.html" target="_blank" title="http://0pointer.net/blog/projects/tmp.html">http://0pointer.net/blog/projects/tmp.html</a></p>



<a name="173301910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301910">(Aug 15 2019 at 16:01)</a>:</h4>
<blockquote>
<p>My CD burning application writes huge .iso files to /tmp, and this breaks on tmpfs!</p>
<p>The application should be fixed to use /var/tmp.</p>
</blockquote>



<a name="173301913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301913">(Aug 15 2019 at 16:01)</a>:</h4>
<p><a href="https://fedoraproject.org/wiki/Features/tmp-on-tmpfs" target="_blank" title="https://fedoraproject.org/wiki/Features/tmp-on-tmpfs">https://fedoraproject.org/wiki/Features/tmp-on-tmpfs</a></p>



<a name="173301928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301928">(Aug 15 2019 at 16:02)</a>:</h4>
<p>I <em>think</em> <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> it winds up coming from the <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/config/struct.OutputFilenames.html" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/config/struct.OutputFilenames.html">OutputFilenames</a> struct</p>



<a name="173301979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173301979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173301979">(Aug 15 2019 at 16:02)</a>:</h4>
<p>which is configured from some <code>out_directory</code> field</p>



<a name="173302000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173302000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173302000">(Aug 15 2019 at 16:02)</a>:</h4>
<p>although that seems unlikely to be <code>/tmp</code></p>



<a name="173302044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173302044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173302044">(Aug 15 2019 at 16:03)</a>:</h4>
<p>I guess I don't know for sure</p>



<a name="173302049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173302049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173302049">(Aug 15 2019 at 16:03)</a>:</h4>
<p>which is the file that you saw in /tmp?</p>



<a name="173302052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173302052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173302052">(Aug 15 2019 at 16:03)</a>:</h4>
<p>something about metadata?</p>



<a name="173302181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173302181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173302181">(Aug 15 2019 at 16:05)</a>:</h4>
<p>yes but others too</p>



<a name="173302189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173302189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173302189">(Aug 15 2019 at 16:05)</a>:</h4>
<p>let me try to reproduce it</p>



<a name="173302278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173302278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173302278">(Aug 15 2019 at 16:06)</a>:</h4>
<p>it may take a while though :)</p>



<a name="173312227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312227">(Aug 15 2019 at 18:25)</a>:</h4>
<p>ok, did a quick repro ...</p>



<a name="173312328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312328">(Aug 15 2019 at 18:26)</a>:</h4>
<p>first, my <code>/tmp</code> is of type <code>tmpfs</code> and uses up to 4GB</p>



<a name="173312335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312335">(Aug 15 2019 at 18:27)</a>:</h4>
<div class="codehilite"><pre><span></span>[santiago@archlinux rustcaSq42I]$ mount | grep /tmp
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,relatime,size=4194304k)
</pre></div>



<a name="173312347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312347">(Aug 15 2019 at 18:27)</a>:</h4>
<p>when I try to build from scratch, I get ...</p>



<a name="173312371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312371">(Aug 15 2019 at 18:27)</a>:</h4>
<div class="codehilite"><pre><span></span>   Compiling rustc_save_analysis v0.0.0 (/home/santiago/src/oss/rust2/src/librustc_save_analysis)
   Compiling rustc_interface v0.0.0 (/home/santiago/src/oss/rust2/src/librustc_interface)
LLVM ERROR: IO failure on output stream: No space left on device
error: Could not compile `rustc_driver`.

To learn more, run the command again with --verbose.
command did not execute successfully: &quot;/home/santiago/src/oss/rust2/build/x86_64-unknown-linux-gnu/stage0/bin/cargo&quot; &quot;build&quot; &quot;--target&quot; &quot;x86_64-unknown-linux-gnu&quot; &quot;-j&quot; &quot;4&quot; &quot;--release&quot; &quot;--features&quot; &quot;&quot; &quot;--manifest-path&quot; &quot;/home/santiago/src/oss/rust2/src/rustc/Cargo.toml&quot; &quot;--message-format&quot; &quot;json-render-diagnostics&quot;
expected success, got: exit code: 101
failed to run: /home/santiago/src/oss/rust2/build/bootstrap/debug/bootstrap build -i --stage 1 src/libstd
Build completed unsuccessfully in 0:41:50
</pre></div>



<a name="173312374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312374">(Aug 15 2019 at 18:27)</a>:</h4>
<p>then I see ...</p>



<a name="173312440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312440">(Aug 15 2019 at 18:28)</a>:</h4>
<div class="codehilite"><pre><span></span>[santiago@archlinux rust2 (master)]$ df -h
Filesystem      Size  Used Avail Use% Mounted on
...
tmpfs           4.0G  4.0G     0 100% /tmp
</pre></div>



<a name="173312462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312462">(Aug 15 2019 at 18:28)</a>:</h4>
<p>and then on <code>/tmp</code> I see the following ...</p>



<a name="173312485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312485">(Aug 15 2019 at 18:28)</a>:</h4>
<div class="codehilite"><pre><span></span>[santiago@archlinux rustcaSq42I]$ pwd
/tmp/rustcaSq42I
[santiago@archlinux rustcaSq42I]$ ls -lh
total 4.0G
-rw-r--r-- 1 santiago santiago  6.9M Aug 15 14:44 libcc-580cb3ec679a1ef0.rlib
-rw-r--r-- 1 santiago santiago  243K Aug 15 14:44 libcrc32fast-df4710f26ff3874f.rlib
-rw-r--r-- 1 santiago santiago   746 Aug 15 14:44 libeither-be66c1a9963b273c.rlib
-rw-r--r-- 1 santiago santiago  2.1M Aug 15 14:44 libenv_logger-39812d84bbfe2b11.rlib
-rw-r--r-- 1 santiago santiago  595K Aug 15 14:44 libflate2-31c9dbe4de46ec52.rlib
-rw-r--r-- 1 santiago santiago  414K Aug 15 14:44 libhumantime-d1a9d86e783663fa.rlib
-rw-r--r-- 1 santiago santiago   742 Aug 15 14:44 libitoa-cafbf9ae61da85d2.rlib
-rw-r--r-- 1 santiago santiago  202K Aug 15 14:44 liblog_settings-2620b484081ec8f2.rlib
-rw-r--r-- 1 santiago santiago   64K Aug 15 14:44 libminiz_sys-829f35f627be716a.rlib
-rw-r--r-- 1 santiago santiago  584K Aug 15 14:44 libpunycode-bc98388f5faa9996.rlib
-rw-r--r-- 1 santiago santiago   764 Aug 15 14:44 libquick_error-b52ae6e62fe18a00.rlib
-rw-r--r-- 1 santiago santiago   770 Aug 15 14:44 libremove_dir_all-a10b98c02f91914a.rlib
-rw-r--r-- 1 santiago santiago  666M Aug 15 14:44 librustc-300974c3ebad3d8b.rlib
-rw-r--r-- 1 santiago santiago  139M Aug 15 14:44 librustc_ast_borrowck-064564744d0b66e4.rlib
-rw-r--r-- 1 santiago santiago  158M Aug 15 14:44 librustc_codegen_ssa-0b961b0d1ebdaa34.rlib
-rw-r--r-- 1 santiago santiago  141M Aug 15 14:44 librustc_codegen_utils-3c4fec2d7a4aaa58.rlib
-rw-r--r-- 1 santiago santiago  215M Aug 15 14:44 librustc_incremental-413cebfc5fe72a28.rlib
-rw-r--r-- 1 santiago santiago  163M Aug 15 14:44 librustc_interface-4a187b71ebecda3f.rlib
-rw-r--r-- 1 santiago santiago  128M Aug 15 14:44 librustc_lint-f5d7618b6d033ce8.rlib
-rw-r--r-- 1 santiago santiago  315M Aug 15 14:44 librustc_metadata-a179352ab6d85b74.rlib
-rw-r--r-- 1 santiago santiago  822M Aug 15 14:44 librustc_mir-232a965ccb3e9077.rlib
-rw-r--r-- 1 santiago santiago  143M Aug 15 14:44 librustc_passes-c08b598d7f5694c2.rlib
-rw-r--r-- 1 santiago santiago   36M Aug 15 14:44 librustc_plugin-8f9749116c8b6ad6.rlib
-rw-r--r-- 1 santiago santiago  138M Aug 15 14:44 librustc_privacy-1eb27d780fbbcb81.rlib
-rw-r--r-- 1 santiago santiago   76M Aug 15 14:44 librustc_resolve-23cfc118665ed372.rlib
-rw-r--r-- 1 santiago santiago  138M Aug 15 14:44 librustc_save_analysis-970ae44e6e8aee42.rlib
-rw-r--r-- 1 santiago santiago  267M Aug 15 14:44 librustc_traits-1f50191ae0f8c9ba.rlib
-rw-r--r-- 1 santiago santiago  469M Aug 15 14:44 librustc_typeck-0246067c1ba94397.rlib
-rw-r--r-- 1 santiago santiago  298K Aug 15 14:44 libryu-17527a943b47993b.rlib
-rw-r--r-- 1 santiago santiago  3.6M Aug 15 14:44 libserde_json-f180caae537f064f.rlib
-rw-r--r-- 1 santiago santiago   71M Aug 15 14:44 libsyntax_ext-c3562645f3bbdcaa.rlib
-rw-r--r-- 1 santiago santiago 1006K Aug 15 14:44 libtempfile-7dcc5500a694e84f.rlib
-rw-r--r-- 1 santiago santiago  1.1M Aug 15 14:44 list
</pre></div>



<a name="173312608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312608">(Aug 15 2019 at 18:30)</a>:</h4>
<p>and ...</p>



<a name="173312616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312616" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312616">(Aug 15 2019 at 18:30)</a>:</h4>
<div class="codehilite"><pre><span></span>[santiago@archlinux rustcaSq42I]$ du -sh .
4.0G    .
</pre></div>



<a name="173312647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173312647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173312647">(Aug 15 2019 at 18:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> ^^^, in particular <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/no.20space.20left.20on.20device.20%28tmpfs%29.20when.20compiling.20rustc/near/173312227" title="#narrow/stream/182449-t-compiler.2Fhelp/topic/no.20space.20left.20on.20device.20%28tmpfs%29.20when.20compiling.20rustc/near/173312227">start here</a></p>



<a name="173326416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/173326416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#173326416">(Aug 15 2019 at 21:28)</a>:</h4>
<p>/cc <span class="user-mention" data-user-id="116015">@Alex Crichton</span></p>



<a name="174168637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174168637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174168637">(Aug 26 2019 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> unsure if you ended reading this since you commented in the beginning</p>



<a name="174168644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174168644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174168644">(Aug 26 2019 at 19:15)</a>:</h4>
<p>maybe another person that may know about it is <span class="user-mention" data-user-id="116466">@Zoxc</span></p>



<a name="174168669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174168669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174168669">(Aug 26 2019 at 19:15)</a>:</h4>
<p>I guess this <a href="https://github.com/rust-lang/rust/issues/61978" target="_blank" title="https://github.com/rust-lang/rust/issues/61978">https://github.com/rust-lang/rust/issues/61978</a> is unrelated but just in case, bringing it up</p>



<a name="174168770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174168770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174168770">(Aug 26 2019 at 19:16)</a>:</h4>
<p>I meant, that's not related per se, what I meant given that <span class="user-mention" data-user-id="116466">@Zoxc</span> worked on that, they may know about it</p>



<a name="174169882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174169882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174169882">(Aug 26 2019 at 19:31)</a>:</h4>
<p>I don't like that rustc puts anything in a temp dir at all. It tends to leave a lot of stuff there due to crashes, etc.</p>



<a name="174170102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174170102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174170102">(Aug 26 2019 at 19:33)</a>:</h4>
<p>should we at least have an issue to track this?</p>



<a name="174170194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174170194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174170194">(Aug 26 2019 at 19:34)</a>:</h4>
<blockquote>
<p>I don't like that rustc puts anything in a temp dir at all. It tends to leave a lot of stuff there due to crashes, etc.</p>
</blockquote>
<p>what would you do btw?</p>



<a name="174170691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174170691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174170691">(Aug 26 2019 at 19:40)</a>:</h4>
<p>Let cargo tell rustc about the build dir so rustc can use that</p>



<a name="174175464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174175464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174175464">(Aug 26 2019 at 20:46)</a>:</h4>
<p>This is the first time I see full rlibs in there.</p>



<a name="174175477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174175477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174175477">(Aug 26 2019 at 20:46)</a>:</h4>
<p>but if we do put them there then its just a genuine bug in rustc.</p>



<a name="174176076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174176076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174176076">(Aug 26 2019 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> yes, that's what I'm saying :)</p>



<a name="174176117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/no%20space%20left%20on%20device%20%28tmpfs%29%20when%20compiling%20rustc/near/174176117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/no.20space.20left.20on.20device.20(tmpfs).20when.20compiling.20rustc.html#174176117">(Aug 26 2019 at 20:55)</a>:</h4>
<p>I think it's easy to reproduce on Linux, just set your tmpfs to be 4GB or 2GB and try to do a fresh compile</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
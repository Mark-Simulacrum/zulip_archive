<html>
<head><meta charset="utf-8"><title>llvm commands used to generate final executable · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html">llvm commands used to generate final executable</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252974183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252974183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> KavinduZoysa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252974183">(Sep 12 2021 at 09:46)</a>:</h4>
<p>Hi all,</p>
<p>After generating the LLVM IR for rust source, what are the LLVM commands which are running to generate the final executable? Is it opt and the llc or clang?</p>
<p>Thank you,<br>
Kavindu</p>



<a name="252974265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252974265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252974265">(Sep 12 2021 at 09:48)</a>:</h4>
<p>None of them. Generation of machine code happens in process. We only spawn a linker to link separate object files for most targets.</p>



<a name="252975141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252975141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> KavinduZoysa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252975141">(Sep 12 2021 at 10:04)</a>:</h4>
<p>How does llvm optimizations happen for generated LLVM IR?<br>
Actually, I want to know what are optimizations run after adding debug info to LLVM IR. Can you please help me to figure this out?</p>



<a name="252976080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252976080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> KavinduZoysa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252976080">(Sep 12 2021 at 10:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/llvm.20commands.20used.20to.20generate.20final.20executable/near/252974265">said</a>:</p>
<blockquote>
<p>None of them. Generation of machine code happens in process. We only spawn a linker to link separate object files for most targets.</p>
</blockquote>
<p>How does llvm optimizations happen for generated LLVM IR?<br>
Actually, I want to know what are optimizations run after adding debug info to LLVM IR. Can you please help me to figure this out?</p>



<a name="252992778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252992778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252992778">(Sep 12 2021 at 15:08)</a>:</h4>
<p>Try -Cllvm-args=-debug=Arguments perhaps?</p>



<a name="252993501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252993501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252993501">(Sep 12 2021 at 15:22)</a>:</h4>
<p>sorry <code>-Cllvm-args=-debug-pass=Arguments</code></p>



<a name="252993842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252993842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> KavinduZoysa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252993842">(Sep 12 2021 at 15:28)</a>:</h4>
<p>Yes that works.<br>
<code>rustc test.rs -C llvm-args='-debug-pass=Arguments'</code></p>
<p>The output of this command is a list of passes. As I understood these are the opt passes run, Am I correct?</p>



<a name="252993874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252993874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> KavinduZoysa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252993874">(Sep 12 2021 at 15:29)</a>:</h4>
<p>For each flag like -g, -g -O, -O the output is different</p>



<a name="252996608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252996608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252996608">(Sep 12 2021 at 16:19)</a>:</h4>
<p>these are pass arguments compatible with opt and llc, yes.</p>



<a name="252996680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20commands%20used%20to%20generate%20final%20executable/near/252996680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/llvm.20commands.20used.20to.20generate.20final.20executable.html#252996680">(Sep 12 2021 at 16:20)</a>:</h4>
<p>all of these passes together won't necessarily work on either opt or llc, because some of them are LLVM-IR (opt) specific and some other are backend (llc) specific.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
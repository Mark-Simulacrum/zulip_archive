<html>
<head><meta charset="utf-8"><title>Test failing on unchanged master · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html">Test failing on unchanged master</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="256629859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Test%20failing%20on%20unchanged%20master/near/256629859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> asquared31415 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html#256629859">(Oct 07 2021 at 18:50)</a>:</h4>
<p>A test has suddenly started failing (consistently) despite me being on an unchanged master (currently <code>0157cc</code>), what steps could I take to resolve this?  It's the <code>ui/deriving/issue-89188-gat-hrtb.rs</code> tests if that helps.  The error is attached.</p>
<p>I have already tried <code>x.py clean</code>and building without <code>--keep-stage=1</code> (I typically use it when possible)</p>
<p><a href="/user_uploads/4715/JT7NCziGOd8SAntaBjKENX7M/err.txt">err.txt</a></p>



<a name="256630922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Test%20failing%20on%20unchanged%20master/near/256630922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html#256630922">(Oct 07 2021 at 18:56)</a>:</h4>
<p>are you building the compiler with <code>debug-assertions = true</code>?</p>



<a name="256631167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Test%20failing%20on%20unchanged%20master/near/256631167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> asquared31415 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html#256631167">(Oct 07 2021 at 18:58)</a>:</h4>
<p>I have <code>debug = true</code> and <code>incremental = true</code>, besides that using the <code>compiler</code> profile</p>



<a name="256631482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Test%20failing%20on%20unchanged%20master/near/256631482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html#256631482">(Oct 07 2021 at 19:00)</a>:</h4>
<p>Yeah, that probably turns on overflow checks. The compiler isn't tested that way, so that kind of bug goes uncaught. You should file an issue, there have been bugs like that before.</p>



<a name="256631755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Test%20failing%20on%20unchanged%20master/near/256631755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> asquared31415 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html#256631755">(Oct 07 2021 at 19:01)</a>:</h4>
<p>The code would likely fail anyway, as the overflowing subtraction is used as an index immediately, but I will check</p>



<a name="256632743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Test%20failing%20on%20unchanged%20master/near/256632743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> asquared31415 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html#256632743">(Oct 07 2021 at 19:08)</a>:</h4>
<p>Huh I guess not.  Will file an issue.</p>



<a name="256632906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Test%20failing%20on%20unchanged%20master/near/256632906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Test.20failing.20on.20unchanged.20master.html#256632906">(Oct 07 2021 at 19:09)</a>:</h4>
<p>there are two subtractions, the first one might overflow and then the addition might turn overflow it back into the valid range. and the following unwrap_or tries to do some fixup too. so if there's a bug it could be easily masked.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
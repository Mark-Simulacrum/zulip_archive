<html>
<head><meta charset="utf-8"><title>Run tests without enabling nightly features? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/Run.20tests.20without.20enabling.20nightly.20features.3F.html">Run tests without enabling nightly features?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="232658530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20tests%20without%20enabling%20nightly%20features%3F/near/232658530" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/Run.20tests.20without.20enabling.20nightly.20features.3F.html#232658530">(Mar 31 2021 at 20:20)</a>:</h4>
<p>For <a href="https://github.com/rust-lang/rust/issues/83715">https://github.com/rust-lang/rust/issues/83715</a>, I want to test the behavior when nightly features are <em>not</em> allowed. Is there a way to do that? I can set <code>channel = "beta"</code> locally, but I think x.py test unconditionally sets RUSTC_BOOTSTRAP even on beta? I can't imagine any other way <a href="https://github.com/rust-lang/rust/blob/master/src/test/ui/stable-features.rs">https://github.com/rust-lang/rust/blob/master/src/test/ui/stable-features.rs</a> would pass on beta</p>



<a name="232670125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20tests%20without%20enabling%20nightly%20features%3F/near/232670125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/Run.20tests.20without.20enabling.20nightly.20features.3F.html#232670125">(Mar 31 2021 at 21:45)</a>:</h4>
<p>Can you override the env var in the test with comments? There's some way to set env vars for the build of a test separately from the env vars of the run</p>



<a name="232673613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20tests%20without%20enabling%20nightly%20features%3F/near/232673613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/Run.20tests.20without.20enabling.20nightly.20features.3F.html#232673613">(Mar 31 2021 at 22:12)</a>:</h4>
<p>even then it would only be tested on beta, not nightly - RUSTC_BOOTSTRAP can only enable nightly features, it can't disable them</p>



<a name="232711499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20tests%20without%20enabling%20nightly%20features%3F/near/232711499" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/Run.20tests.20without.20enabling.20nightly.20features.3F.html#232711499">(Apr 01 2021 at 06:46)</a>:</h4>
<p>Ooh. That's true. I guess... add a new -Z flag that makes a nightly compiler behave like a beta compiler?</p>



<a name="232742953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20tests%20without%20enabling%20nightly%20features%3F/near/232742953" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/Run.20tests.20without.20enabling.20nightly.20features.3F.html#232742953">(Apr 01 2021 at 11:44)</a>:</h4>
<p>I don't know that we have to test this behavior FWIW</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
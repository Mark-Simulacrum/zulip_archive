<html>
<head><meta charset="utf-8"><title>submodule workflow · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20workflow.html">submodule workflow</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="246013818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20workflow/near/246013818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20workflow.html#246013818">(Jul 14 2021 at 20:13)</a>:</h4>
<p>What's a good workflow for hacking on a submodule? Ideally I would just make some changes to the submodule dir and just try a build without even having to commit anything, but x.py wants to do an implicit submodule update</p>



<a name="246014647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20workflow/near/246014647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20workflow.html#246014647">(Jul 14 2021 at 20:20)</a>:</h4>
<p>You can disable the submodule update in <code>config.toml</code>.  I always have it disabled since I do a lot of submodule work. It just means there is often an extra step after a git update, but I prefer the extra sense of safety that <code>x.py</code> won't irretrievably delete something.</p>



<a name="246014847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20workflow/near/246014847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20workflow.html#246014847">(Jul 14 2021 at 20:22)</a>:</h4>
<p>ah, I didn't realize there was a config option, thanks</p>



<a name="246018962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20workflow/near/246018962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20workflow.html#246018962">(Jul 14 2021 at 20:54)</a>:</h4>
<p>If you don't commit your changes in the submodule then x.py won't update it.</p>



<a name="246019022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20workflow/near/246019022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20workflow.html#246019022">(Jul 14 2021 at 20:55)</a>:</h4>
<p>That's how I usually do it. Either that or create a temporary commit in the outer repo that updates the submodule so x.py sees that it is up-to-date.</p>



<a name="246021005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20workflow/near/246021005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20workflow.html#246021005">(Jul 14 2021 at 21:05)</a>:</h4>
<p>Note there was about a week recently where x.py would ignore that option for llvm <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> so make sure you've rebased over  <a href="https://github.com/rust-lang/rust/pull/87049">https://github.com/rust-lang/rust/pull/87049</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
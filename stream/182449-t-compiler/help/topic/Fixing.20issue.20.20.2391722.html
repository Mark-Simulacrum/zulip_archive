<html>
<head><meta charset="utf-8"><title>Fixing issue  #91722 · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Fixing.20issue.20.20.2391722.html">Fixing issue  #91722</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264438372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Fixing%20issue%20%20%2391722/near/264438372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Fixing.20issue.20.20.2391722.html#264438372">(Dec 10 2021 at 12:16)</a>:</h4>
<p>Hello all,</p>
<p>I'm working on my first bugfix to the Rust standard library. Exciting times! </p>
<p>The error is caused by calling read_from_end() from stdin on Windows with a buffer with less than 4 bytes. I have a bugfix but have a couple questions:</p>
<ol>
<li>
<p>Adding the bug to a test case doesn't seem possible, since there must be interaction with the console. Is there a test suite that would allow that kind of interaction.</p>
</li>
<li>
<p>The bugfix is slightly inefficient for small amounts of bytes being read. I fear that this might affect benchmarks in a noticeable way, and was wondering if this should be compiled only for Windows. </p>
</li>
</ol>
<p>Should I start by doing a pull request with the fix, or should I find a way to make a test fail with the old toolchain before I do that?</p>



<a name="264450276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Fixing%20issue%20%20%2391722/near/264450276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Fixing.20issue.20.20.2391722.html#264450276">(Dec 10 2021 at 13:57)</a>:</h4>
<p>I would open the PR to start :) the reviewer might have suggestions for how to create a test</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
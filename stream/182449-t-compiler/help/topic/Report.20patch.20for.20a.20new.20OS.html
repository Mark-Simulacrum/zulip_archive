<html>
<head><meta charset="utf-8"><title>Report patch for a new OS · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Report.20patch.20for.20a.20new.20OS.html">Report patch for a new OS</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="240300478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Report%20patch%20for%20a%20new%20OS/near/240300478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Etienne Guesnet <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Report.20patch.20for.20a.20new.20OS.html#240300478">(May 26 2021 at 09:52)</a>:</h4>
<p>Hi,<br>
I port Rust to AIX. I am able to cross-compile the standard library on Linux with AIX target (not tested yet). However, it is really hard to reproduce, because it needs an AIX server (for assembler and linker), some workaround on Rust and a patched version of LLVM...<br>
Does the community prefer a big patch with all OK, or lot of patches to add a specific functionality (one for triplet, another for AIX archive support, a third for libc...)?<br>
My goal is to report all patches needed to build community Rust with community LLVM.</p>



<a name="240348695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Report%20patch%20for%20a%20new%20OS/near/240348695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Report.20patch.20for.20a.20new.20OS.html#240348695">(May 26 2021 at 16:05)</a>:</h4>
<p>Does LLVM (with your patches) understand how to handle the architecture, including assembling and linking?</p>



<a name="240348867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Report%20patch%20for%20a%20new%20OS/near/240348867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Report.20patch.20for.20a.20new.20OS.html#240348867">(May 26 2021 at 16:06)</a>:</h4>
<p>A port that requires the AIX-native assembler wouldn't be upstreamable.</p>



<a name="240426748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Report%20patch%20for%20a%20new%20OS/near/240426748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Etienne Guesnet <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Report.20patch.20for.20a.20new.20OS.html#240426748">(May 27 2021 at 06:59)</a>:</h4>
<p>No, it does not. At least for now: no integrated assembly on AIX, and AIX linker (in an AIX server) must be used.<br>
The point is: is it possible to upstream now what is upstreamable, even if port is partial?</p>



<a name="240427682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Report%20patch%20for%20a%20new%20OS/near/240427682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Report.20patch.20for.20a.20new.20OS.html#240427682">(May 27 2021 at 07:11)</a>:</h4>
<p>I think your best bet at this point would be to try to improve LLVM's support for your platform.</p>



<a name="240427753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Report%20patch%20for%20a%20new%20OS/near/240427753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Report.20patch.20for.20a.20new.20OS.html#240427753">(May 27 2021 at 07:11)</a>:</h4>
<p>You might also look at the target tier policy, and the requirements to add a new tier 3 target (which is where all new targets start).</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>✔ basic polonius usage · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html">✔ basic polonius usage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="245435340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/245435340" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Haochen Zhang <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#245435340">(Jul 09 2021 at 12:21)</a>:</h4>
<p>I'm new to the Polonius repo and had some difficulties using the tool. I tried to run an example as specified in the README for generating nll facts on <a href="http://issue-47680.rs">issue-47680.rs</a>: $ rustc -Znll-facts inputs/issue-47680/issue-47680.rs. I switched to nighly by changing the rust-toolchain file and it gave me an error saying "<code>*temp</code> was mutably borrowed here in the previous iteration of the loop" I also tried to generate nll facts on a simple test program and it seem to be lacking all the loan fact files comparing to the fact files contained in the polonius example. Am I missing something here? Also is this the write place to ask these kind of questions? Plz let me know. Thank you!</p>



<a name="245435466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/245435466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Haochen Zhang <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#245435466">(Jul 09 2021 at 12:22)</a>:</h4>
<p><a href="/user_uploads/4715/e3_dF9igEPdZHgIbBNj7Rf5J/Screen-Shot-2021-07-09-at-8.21.55-PM.png">Screen-Shot-2021-07-09-at-8.21.55-PM.png</a> here are the fact files I generated from my test program</p>
<div class="message_inline_image"><a href="/user_uploads/4715/e3_dF9igEPdZHgIbBNj7Rf5J/Screen-Shot-2021-07-09-at-8.21.55-PM.png" title="Screen-Shot-2021-07-09-at-8.21.55-PM.png"><img src="/user_uploads/4715/e3_dF9igEPdZHgIbBNj7Rf5J/Screen-Shot-2021-07-09-at-8.21.55-PM.png"></a></div>



<a name="245466352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/245466352" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#245466352">(Jul 09 2021 at 16:39)</a>:</h4>
<p>You might get better feedback in <a class="stream" data-stream-id="186049" href="/#narrow/stream/186049-t-compiler.2Fwg-polonius">#t-compiler/wg-polonius</a></p>



<a name="245467451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/245467451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#245467451">(Jul 09 2021 at 16:48)</a>:</h4>
<p>so, the polonius-engine version used in rustc is from <a href="http://crates.io">crates.io</a>, and the data format in the repo is not necessarily the same</p>



<a name="245467691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/245467691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#245467691">(Jul 09 2021 at 16:50)</a>:</h4>
<p>(we have been renaming relations, changing the ordering, etc)</p>



<a name="245467913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/245467913" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#245467913">(Jul 09 2021 at 16:52)</a>:</h4>
<p>if you need the format to match, even though I believe the repo contains up-to-date facts and <code>issue-47680</code> should work if you run polonius on it (but as you mention will not have the same facts as rustc would currently produce), you'd need to use the same version as used in rustc</p>



<a name="245467984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/245467984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#245467984">(Jul 09 2021 at 16:53)</a>:</h4>
<p>that is, until we make some more progress on ongoing work, release a new version, and update rustc to use that new version</p>



<a name="246190559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/246190559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Haochen Zhang <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#246190559">(Jul 16 2021 at 06:59)</a>:</h4>
<p>I see. <span class="user-mention" data-user-id="116113">@lqd</span> Do you happen to know how the fact dumps given in the polonius example (ex. issue-47680) are produced? Or it's in some way manually generated?</p>



<a name="246193050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/246193050" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#246193050">(Jul 16 2021 at 07:31)</a>:</h4>
<p>they are usually generated by rustc, but if there were some simple renaming of relations since then that could be done manually. </p>
<p>the facts are updated whenever the version used in rustc is updated: since the two repos must be updated in lockstep, usually it can happen that the facts are updated by a local rustc, using the most recent revision of polonius-engine. That way the tests of both repos can be run before a polonius release is done, and before the PR using it lands on nightly. </p>
<p>(But as long as both repos are updated around the same time, it usually doesn’t matter whether the facts are actually updated by a local rustc or a nightly with the version bump. The facts will be the same. If one needs to generate the facts to be able to update the repos then it’s like I describe above)</p>



<a name="246203367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/246203367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Haochen Zhang <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#246203367">(Jul 16 2021 at 09:44)</a>:</h4>
<p>Thanks a lot for the info!</p>



<a name="246203375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20basic%20polonius%20usage/near/246203375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.E2.9C.94.20basic.20polonius.20usage.html#246203375">(Jul 16 2021 at 09:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="421546">Haochen Zhang</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>UI test failures without changes · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html">UI test failures without changes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="219115913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219115913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> J. Ryan Stinnett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219115913">(Dec 07 2020 at 18:10)</a>:</h4>
<p>I attempted to run all the UI tests locally without making any changes to ensure things are generally working, but I was a bit surprised to see around ~40 failures, most in the <code>ui/abi</code> suite. I am on <code>x86_64-apple-darwin</code>, which I imagine is not tested as often as e.g. Linux in CI, so would that be the reason I don't see the same failures on CI when submitting PRs? The failures appear to system linker errors. Perhaps the tests should be ignored on macOS / Apple platforms?</p>



<a name="219116186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219116186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219116186">(Dec 07 2020 at 18:12)</a>:</h4>
<p><span class="user-mention" data-user-id="220326">@J. Ryan Stinnett</span> what sort of failures?</p>



<a name="219116194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219116194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219116194">(Dec 07 2020 at 18:12)</a>:</h4>
<p>macOS tests are run before each merge.</p>



<a name="219116606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219116606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> J. Ryan Stinnett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219116606">(Dec 07 2020 at 18:16)</a>:</h4>
<p>Here's a snapshot: <a href="https://gist.github.com/jryans/99fd48e2d4710cd88c09cb0e2c19dd55">https://gist.github.com/jryans/99fd48e2d4710cd88c09cb0e2c19dd55</a></p>



<a name="219116672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219116672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> J. Ryan Stinnett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219116672">(Dec 07 2020 at 18:16)</a>:</h4>
<p>Maybe I need to use a particular version of Xcode or system compiler...?</p>



<a name="219117332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219117332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219117332">(Dec 07 2020 at 18:21)</a>:</h4>
<p>Honestly, if you're not changing that part of the compiler I would just ignore the errors</p>



<a name="219117358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219117358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219117358">(Dec 07 2020 at 18:21)</a>:</h4>
<p>x.py test is almost always way more than you want</p>



<a name="219118305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219118305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> J. Ryan Stinnett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219118305">(Dec 07 2020 at 18:28)</a>:</h4>
<p>Ah okay. I was curious mostly because I later missed some real errors related to my changes because they got lost in the sea of things to ignore... <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="219118330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219118330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> J. Ryan Stinnett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219118330">(Dec 07 2020 at 18:29)</a>:</h4>
<p>Maybe I just need to read more carefully <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="219125525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219125525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219125525">(Dec 07 2020 at 19:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/UI.20test.20failures.20without.20changes/near/219117358">said</a>:</p>
<blockquote>
<p>x.py test is almost always way more than you want</p>
</blockquote>
<p>Hmm, but isn't that what was being run?</p>



<a name="219125640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/UI%20test%20failures%20without%20changes/near/219125640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/UI.20test.20failures.20without.20changes.html#219125640">(Dec 07 2020 at 19:22)</a>:</h4>
<p>Also, a tip: if you get weird ICEs and other stuff when working on Rust, <code>./x.py clean</code> is your friend.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
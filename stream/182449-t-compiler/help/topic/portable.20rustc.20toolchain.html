<html>
<head><meta charset="utf-8"><title>portable rustc toolchain · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/portable.20rustc.20toolchain.html">portable rustc toolchain</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="276425912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/portable%20rustc%20toolchain/near/276425912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> yoru <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/portable.20rustc.20toolchain.html#276425912">(Mar 24 2022 at 02:12)</a>:</h4>
<p>I want to have a rustc toolchain that is spinned to a version, with core+alloc crate compiled for a custom target to use in different project. How can i do it? Currently <code>cargo sysroot</code> require newest nightly toolchain and the sysroot it build can't be reused elsewhere.</p>



<a name="276437877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/portable%20rustc%20toolchain/near/276437877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/portable.20rustc.20toolchain.html#276437877">(Mar 24 2022 at 06:50)</a>:</h4>
<p>I don't think you can. I believe rustc internally hashes the full path of the target spec for non-builtin target specs. Moving it would result in an error that the target could not be found.</p>



<a name="276439353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/portable%20rustc%20toolchain/near/276439353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> yoru <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/portable.20rustc.20toolchain.html#276439353">(Mar 24 2022 at 07:18)</a>:</h4>
<p>I managed to make it work with xbuild, but i want to know how to do it properly.</p>



<a name="276439432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/portable%20rustc%20toolchain/near/276439432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> yoru <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/portable.20rustc.20toolchain.html#276439432">(Mar 24 2022 at 07:19)</a>:</h4>
<p>rustc does hash the full path of non build in target, but if I omit the .json part, then rustc doesn't hash it anymore.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
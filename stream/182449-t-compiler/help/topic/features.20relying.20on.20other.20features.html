<html>
<head><meta charset="utf-8"><title>features relying on other features · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html">features relying on other features</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273376003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273376003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitrii Demenev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273376003">(Feb 27 2022 at 02:10)</a>:</h4>
<p>Hello, I would like to implement <code>Copy</code> for zero-length arrays (Tracking issue: <a href="https://github.com/rust-lang/rust/issues/94410">https://github.com/rust-lang/rust/issues/94410</a>).</p>
<p><a href="https://rustc-dev-guide.rust-lang.org/feature-gates.html#adding-a-feature-gate">Guide to Rustc Development</a> explains how to add a feature gate but does not explain what to do if the designed feature depends on existing feature. In case of <code>Copy</code> trait implementation for zero-length arrays, the feature-dependency is <em>presumably</em> min-specialization.</p>



<a name="273376119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273376119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273376119">(Feb 27 2022 at 02:14)</a>:</h4>
<p>Trait impls cannot be feature gated meaningfully if they are on a stable type.</p>



<a name="273376827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273376827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitrii Demenev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273376827">(Feb 27 2022 at 02:31)</a>:</h4>
<p>Are we then forever stuck with zero-length arrays being non-<code>Copy</code>?</p>



<a name="273376868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273376868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273376868">(Feb 27 2022 at 02:32)</a>:</h4>
<p>That impl can't be added today because it would overlap with the existing const generic <code>Copy</code> impl, no?</p>



<a name="273376949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273376949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitrii Demenev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273376949">(Feb 27 2022 at 02:35)</a>:</h4>
<p>So does it mean that the feature must rely not just on min-specialization but on another kind of specialization? I've not delved into the specialization RFC.</p>



<a name="273378182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273378182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273378182">(Feb 27 2022 at 03:08)</a>:</h4>
<p>It needs lattice specialization for the <code>Clone</code> part, which doesn't even have an RFC yet afaik</p>



<a name="273378501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273378501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273378501">(Feb 27 2022 at 03:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310518">Jake</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/features.20relying.20on.20other.20features/near/273376868">said</a>:</p>
<blockquote>
<p>That impl can't be added today because it would overlap with the existing const generic <code>Copy</code> impl, no?</p>
</blockquote>
<p>I suppose another possible way to get it would be to have <code>Copy</code> be a <code>#[marker]</code> trait.  Then there could be the existing const generic impl as well as an overlapping one for <code>[_; 0]</code>.</p>



<a name="273378747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273378747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273378747">(Feb 27 2022 at 03:23)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/94313#issuecomment-1049988605">https://github.com/rust-lang/rust/issues/94313#issuecomment-1049988605</a> re: marker traits + copy</p>



<a name="273379310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273379310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273379310">(Feb 27 2022 at 03:35)</a>:</h4>
<p>Yeah, you essentially picked on an issue that is basically doomed to be there for years.<br>
Probably even if you start working on it now and put in a lot of work.</p>



<a name="273455079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273455079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273455079">(Feb 28 2022 at 07:52)</a>:</h4>
<p>Jup, to work towards this we first need lattice specialization to be stable or at least working well enough for us to be confident that we will stabilize it. You could ask <span class="user-group-mention silent" data-user-group-id="692">WG-traits</span> on whether there is currently anyone working on specialization, but I assume that we will first have to make some design decisions on how to avoid the current unsoundness wrt lifetimes</p>



<a name="273529613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/features%20relying%20on%20other%20features/near/273529613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/features.20relying.20on.20other.20features.html#273529613">(Feb 28 2022 at 18:02)</a>:</h4>
<p>I don't think anyone is currently working on specialization</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Warnings in macros across crate · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Warnings.20in.20macros.20across.20crate.html">Warnings in macros across crate</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270841143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Warnings%20in%20macros%20across%20crate/near/270841143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Warnings.20in.20macros.20across.20crate.html#270841143">(Feb 05 2022 at 18:14)</a>:</h4>
<p>Hey, I’m working on improving the <code>unused_unsafe</code> lint, and I noticed it doesn't seem to warn about unused <code>unsafe</code> blocks inside of a macro invocation, while other warnings such as <code>unused_must_use</code><em>do</em> work with macros, giving a warning with <code>note: this warning originates in the macro …</code>. Is there a general mechanism to control this / is the behavior of <code>unused_unsafe</code> in this regard intentional?</p>



<a name="270842925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Warnings%20in%20macros%20across%20crate/near/270842925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Warnings.20in.20macros.20across.20crate.html#270842925">(Feb 05 2022 at 18:52)</a>:</h4>
<p><span class="user-mention" data-user-id="280891">@Frank Steffahn</span> Have you checked the <code>report_in_external_macro</code> setting?  I'm not sure if that's the circumstance you are referring to.</p>



<a name="270843028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Warnings%20in%20macros%20across%20crate/near/270843028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Warnings.20in.20macros.20across.20crate.html#270843028">(Feb 05 2022 at 18:55)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> Ah, of course there’s a setting for this, makes sense, thanks. I had just tried to search for something in rustc-dev-guide so far. Now I just need to learn about the general guidelines/ideas behind why a lint would have this enabled or disabled.</p>



<a name="270843089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Warnings%20in%20macros%20across%20crate/near/270843089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Warnings.20in.20macros.20across.20crate.html#270843089">(Feb 05 2022 at 18:56)</a>:</h4>
<p>Yea, I think that setting needs documentation.  Particularly for when and why it should be set.  Once you figure that out, it might be good to document it somewhere <span aria-label="smiling face" class="emoji emoji-263a" role="img" title="smiling face">:smiling_face:</span></p>



<a name="270843095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Warnings%20in%20macros%20across%20crate/near/270843095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Warnings.20in.20macros.20across.20crate.html#270843095">(Feb 05 2022 at 18:56)</a>:</h4>
<p>Well, in any case, for <code>unused_unsafe</code>changing it now would be problematic because there’s probably a lot of macros containing <code>unsafe {}</code> blocks without an <code>#[allow(unused_unsafe)]</code> around them.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
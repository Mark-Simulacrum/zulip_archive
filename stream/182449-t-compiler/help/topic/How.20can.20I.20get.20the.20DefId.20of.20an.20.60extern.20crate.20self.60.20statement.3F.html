<html>
<head><meta charset="utf-8"><title>How can I get the DefId of an `extern crate self` statement? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/How.20can.20I.20get.20the.20DefId.20of.20an.20.60extern.20crate.20self.60.20statement.3F.html">How can I get the DefId of an `extern crate self` statement?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="263227901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/How%20can%20I%20get%20the%20DefId%20of%20an%20%60extern%20crate%20self%60%20statement%3F/near/263227901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/How.20can.20I.20get.20the.20DefId.20of.20an.20.60extern.20crate.20self.60.20statement.3F.html#263227901">(Dec 01 2021 at 00:11)</a>:</h4>
<p>For <code>extern crate x</code> I can use <code>tcx.extern_crate</code>, which works quite well: <a href="https://github.com/rust-lang/rust/blob/9b440b7ee81806125325d92c1e7f77edfc894540/src/librustdoc/clean/types.rs#L412-L418">https://github.com/rust-lang/rust/blob/9b440b7ee81806125325d92c1e7f77edfc894540/src/librustdoc/clean/types.rs#L412-L418</a><br>
but for <code>extern crate self</code>, I get <code>error: internal compiler error: compiler/rustc_middle/src/ty/query.rs:316:1: </code>tcx.extern_crate(DefId(0:0 ~ outer[bd55]))<code> unsupported by its crate; perhaps the </code>extern_crate<code> query was never assigned a provider function</code>. Is there a way to get this info?</p>



<a name="263228150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/How%20can%20I%20get%20the%20DefId%20of%20an%20%60extern%20crate%20self%60%20statement%3F/near/263228150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/How.20can.20I.20get.20the.20DefId.20of.20an.20.60extern.20crate.20self.60.20statement.3F.html#263228150">(Dec 01 2021 at 00:13)</a>:</h4>
<p>oh wait what it looks like <code>extern crate</code> statements don't have to be unique per crate??</p>



<a name="263228223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/How%20can%20I%20get%20the%20DefId%20of%20an%20%60extern%20crate%20self%60%20statement%3F/near/263228223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/How.20can.20I.20get.20the.20DefId.20of.20an.20.60extern.20crate.20self.60.20statement.3F.html#263228223">(Dec 01 2021 at 00:14)</a>:</h4>
<p>how does <code>extern_crate</code> give them a single <code>ExternCrateSource</code> then?</p>



<a name="263238326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/How%20can%20I%20get%20the%20DefId%20of%20an%20%60extern%20crate%20self%60%20statement%3F/near/263238326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/How.20can.20I.20get.20the.20DefId.20of.20an.20.60extern.20crate.20self.60.20statement.3F.html#263238326">(Dec 01 2021 at 02:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/How.20can.20I.20get.20the.20DefId.20of.20an.20.60extern.20crate.20self.60.20statement.3F/near/263228223">said</a>:</p>
<blockquote>
<p>how does <code>extern_crate</code> give them a single <code>ExternCrateSource</code> then?</p>
</blockquote>
<p>Result of the <code>extern_crate</code> query is only used for diagnostics, so it works on a best effort basis.</p>



<a name="263238410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/How%20can%20I%20get%20the%20DefId%20of%20an%20%60extern%20crate%20self%60%20statement%3F/near/263238410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/How.20can.20I.20get.20the.20DefId.20of.20an.20.60extern.20crate.20self.60.20statement.3F.html#263238410">(Dec 01 2021 at 02:51)</a>:</h4>
<p>I see. I'll add some comments to it tomorrow.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
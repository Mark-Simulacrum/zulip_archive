<html>
<head><meta charset="utf-8"><title>perf requests · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html">perf requests</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="198956428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/198956428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#198956428">(May 27 2020 at 21:33)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/72675">https://github.com/rust-lang/rust/pull/72675</a> will fail CI as I did not update the tests,<br>
but I would like to get a perf run done over night.</p>
<p>Does <code>@bors try @rust-timer queue</code> care about failing tests?<br>
If not, can someone please start a perf run for this PR? <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="198956761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/198956761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#198956761">(May 27 2020 at 21:37)</a>:</h4>
<p>No, it only needs to fully bootstrap</p>



<a name="198956775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/198956775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#198956775">(May 27 2020 at 21:37)</a>:</h4>
<p>as in <code>./x.py dist</code> I believe</p>



<a name="198959087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/198959087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#198959087">(May 27 2020 at 22:01)</a>:</h4>
<p>essentially, yeah</p>



<a name="199009277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199009277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199009277">(May 28 2020 at 11:23)</a>:</h4>
<p>can someone run perf for <a href="https://github.com/rust-lang/rust/pull/72689">https://github.com/rust-lang/rust/pull/72689</a> <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="199016231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199016231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199016231">(May 28 2020 at 12:40)</a>:</h4>
<p>done</p>



<a name="199251536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199251536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199251536">(May 30 2020 at 11:11)</a>:</h4>
<p>Can someone run perf for <a href="https://github.com/rust-lang/rust/pull/72776">https://github.com/rust-lang/rust/pull/72776</a> :/</p>
<p>I want to finally be able to do this myself <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> (done, thanks <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> )</p>



<a name="199274447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199274447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199274447">(May 30 2020 at 20:22)</a>:</h4>
<p>Can someone run perf for <a href="https://github.com/rust-lang/rust/pull/72776">https://github.com/rust-lang/rust/pull/72776</a> again? (done, thanks <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span>)</p>



<a name="199309963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199309963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199309963">(May 31 2020 at 15:27)</a>:</h4>
<p>Can someone run perf for <a href="https://github.com/rust-lang/rust/pull/72822">https://github.com/rust-lang/rust/pull/72822</a>? (done, thanks <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> )</p>



<a name="199683143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199683143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199683143">(Jun 03 2020 at 22:06)</a>:</h4>
<p>Can someone run perf for <a href="https://github.com/rust-lang/rust/pull/72962">https://github.com/rust-lang/rust/pull/72962</a>? Have to sleep now. (done, thanks <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> )</p>



<a name="199684754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199684754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199684754">(Jun 03 2020 at 22:24)</a>:</h4>
<p>Seems like I made a mistake with using <code>Lrc</code>... should now be fixed and can be restarted x.x</p>



<a name="199815776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199815776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199815776">(Jun 04 2020 at 22:19)</a>:</h4>
<p>Can someone rerun perf for <a href="https://github.com/rust-lang/rust/pull/72962">https://github.com/rust-lang/rust/pull/72962</a>?<br>
I now cache <code>ObligationCause::dummy</code>. I previously had a few million copies of it on the heap... I have to admit I don't<br>
know if this number of allocations is actually relevant <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="199815874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199815874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199815874">(Jun 04 2020 at 22:20)</a>:</h4>
<p>neat!</p>



<a name="199831484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199831484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199831484">(Jun 05 2020 at 02:50)</a>:</h4>
<p>Where is the :heap: emoji?</p>



<a name="199833568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199833568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199833568">(Jun 05 2020 at 03:49)</a>:</h4>
<p><span aria-label="trash can" class="emoji emoji-1f5d1" role="img" title="trash can">:trash_can:</span> (that's the closest I could think of, though it's not very descriptive or interesting - "heap" of garbage)</p>



<a name="199842326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199842326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199842326">(Jun 05 2020 at 07:15)</a>:</h4>
<blockquote>
<p>Finished benchmarking try commit (<a href="https://github.com/rust-lang/rust/commit/ba0ecc9e775e63cb1e782322e6ead5f8b018a463">ba0ecc9</a>): <a href="https://perf.rust-lang.org/compare.html?start=3d5d0f898c2f3998e50c2180c6202f193c3acdbc&amp;end=ba0ecc9e775e63cb1e782322e6ead5f8b018a463">comparison url</a>.</p>
</blockquote>
<p>I can't access that commit <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span> apparently My PR is still in the perf queue?</p>
<blockquote>
<p>Queue (10 total):<br>
Times are local.<br>
Commit Date SHA Reason<br>
try commit  8ff82fab989f4   TryCommit<br>
6/4/2020, 4:16:13 PM    3d5d0f898c2f3   TryParent<br>
try commit  ba0ecc9e775e6   TryCommit // &lt;- my PR</p>
</blockquote>



<a name="199906595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199906595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199906595">(Jun 05 2020 at 17:06)</a>:</h4>
<p>Ok... I removed another few hundred thousand small allocations. Not sure if we want to perf it again or just merge it with <code>rollup=never</code></p>
<p>Feel free to either review or start another perf run <span aria-label="sparkles" class="emoji emoji-2728" role="img" title="sparkles">:sparkles:</span></p>



<a name="199940180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/199940180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#199940180">(Jun 05 2020 at 22:18)</a>:</h4>
<p>Can someone perf <a href="https://github.com/rust-lang/rust/pull/71154">https://github.com/rust-lang/rust/pull/71154</a>? Let's see how far my current approach can get... (done)</p>



<a name="200021747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/200021747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#200021747">(Jun 07 2020 at 12:16)</a>:</h4>
<p>^ it seems like that PR didn't actually get added to the perf queue <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="200221327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/200221327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#200221327">(Jun 09 2020 at 12:44)</a>:</h4>
<p>Can someone perf <a href="https://github.com/rust-lang/rust/pull/71154">https://github.com/rust-lang/rust/pull/71154</a> again, I think this new approach might be better... <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span> (done)</p>



<a name="200295203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/200295203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#200295203">(Jun 09 2020 at 21:47)</a>:</h4>
<p>Did this try build get cancelled due to a merge conflict? Or is this message sent once the PR is added to the queue? <a href="https://github.com/rust-lang/rust/pull/71154#issuecomment-641267489">https://github.com/rust-lang/rust/pull/71154#issuecomment-641267489</a></p>



<a name="200295945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/200295945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#200295945">(Jun 09 2020 at 21:54)</a>:</h4>
<p>Given that it’s not in <a href="https://buildbot2.rust-lang.org/homu/queue/rust">the homu queue</a> anymore, I’d guess it got cancelled</p>



<a name="200461179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/perf%20requests/near/200461179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/perf.20requests.html#200461179">(Jun 10 2020 at 19:01)</a>:</h4>
<p>Well, let's try <a href="https://github.com/rust-lang/rust/pull/71154">https://github.com/rust-lang/rust/pull/71154</a> again, please perf <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> (done)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
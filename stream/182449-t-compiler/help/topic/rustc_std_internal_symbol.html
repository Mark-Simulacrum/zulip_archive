<html>
<head><meta charset="utf-8"><title>rustc_std_internal_symbol · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html">rustc_std_internal_symbol</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="184265155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184265155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184265155">(Dec 26 2019 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> Is there a reason why libpanic_abort uses <code>#[rustc_std_internal_symbol]</code> while libpanic_unwind uses <code>#[no_mangle]</code> instead?</p>



<a name="184265862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184265862" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184265862">(Dec 26 2019 at 14:56)</a>:</h4>
<p>I think it's just a mistake</p>



<a name="184265876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184265876" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184265876">(Dec 26 2019 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> fwiw, I'm planning on updating my PR shortly which should make our implementation as good as C++ examples I can test</p>



<a name="184265964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184265964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184265964">(Dec 26 2019 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> Oh dear, I'm almost done with my PR which also does exactly that :D</p>



<a name="184265976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184265976" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184265976">(Dec 26 2019 at 14:59)</a>:</h4>
<p>well maybe good to compare</p>



<a name="184266383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184266383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184266383">(Dec 26 2019 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <a href="https://github.com/rust-lang/rust/compare/master...Amanieu:catch_unwind" target="_blank" title="https://github.com/rust-lang/rust/compare/master...Amanieu:catch_unwind">https://github.com/rust-lang/rust/compare/master...Amanieu:catch_unwind</a></p>



<a name="184266394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184266394" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184266394">(Dec 26 2019 at 15:09)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/67502" target="_blank" title="https://github.com/rust-lang/rust/pull/67502">https://github.com/rust-lang/rust/pull/67502</a> -- I ended up updating my previous branch</p>



<a name="184266478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184266478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184266478">(Dec 26 2019 at 15:11)</a>:</h4>
<p>Looks almost exactly like mine modulo additional fixes to emcc</p>



<a name="184266555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184266555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184266555">(Dec 26 2019 at 15:13)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> do you want to make the PR then? I can close mine out</p>



<a name="184266970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184266970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184266970">(Dec 26 2019 at 15:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> We can use yours as a base. I will add some feedback in a bit (somewhat busy atm).</p>



<a name="184266984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184266984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184266984">(Dec 26 2019 at 15:23)</a>:</h4>
<p>Okay, sounds good -- feel free to push to my branch as well (you should have rights I think).</p>



<a name="184268011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184268011" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184268011">(Dec 26 2019 at 15:47)</a>:</h4>
<p>Cherry picked a few of your commits</p>



<a name="184913605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol/near/184913605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/rustc_std_internal_symbol.html#184913605">(Jan 06 2020 at 15:07)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> back from break now and can follow up! <span class="user-mention" data-user-id="116122">@simulacrum</span> is right here in that it's probably just a mistake, the main difference is symbol visibility in final cdylib/dylib artifacts, where we want these internal symbols hidden whereas normal no_mangle symbols are exported</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
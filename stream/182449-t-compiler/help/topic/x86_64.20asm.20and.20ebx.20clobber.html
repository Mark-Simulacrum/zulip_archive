<html>
<head><meta charset="utf-8"><title>x86_64 asm and ebx clobber · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x86_64.20asm.20and.20ebx.20clobber.html">x86_64 asm and ebx clobber</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271559536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x86_64%20asm%20and%20ebx%20clobber/near/271559536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Simmons <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x86_64.20asm.20and.20ebx.20clobber.html#271559536">(Feb 11 2022 at 10:55)</a>:</h4>
<p>Since the change to disallow clobbering "internal" llvm registers, the example in the unsafe book fails to compile as it tries to clobber ebx.</p>
<p>How should this actually be expressed in an asm block? Should I be manually swapping around registers to save / restore ebx inside the block?</p>
<p><a href="https://rust.godbolt.org/z/h4hzGnq98">https://rust.godbolt.org/z/h4hzGnq98</a></p>
<p>edit: i guess this should go in project-inline-asm but i don't think i can move it myself D:</p>



<a name="271570527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x86_64%20asm%20and%20ebx%20clobber/near/271570527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x86_64.20asm.20and.20ebx.20clobber.html#271570527">(Feb 11 2022 at 12:47)</a>:</h4>
<p>There is an updated version of this example in Rust by Example: <a href="https://doc.rust-lang.org/nightly/rust-by-example/unsafe/asm.html#clobbered-registers">https://doc.rust-lang.org/nightly/rust-by-example/unsafe/asm.html#clobbered-registers</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>bless all tests? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html">bless all tests?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="241337415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/241337415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#241337415">(Jun 03 2021 at 00:46)</a>:</h4>
<p>Is there a way to bless <em>all</em> tests? Just running <code>x t --bless --stage 2</code> doesn't do it. I've already run it on the clippy part, but now have more tests where line numbers mismatch. Just looking for a simple command/series of commands that will handle it for me.<br>
<a href="https://github.com/rust-lang/rust/issues/85769">#85769</a> if it matters.</p>



<a name="241337446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/241337446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#241337446">(Jun 03 2021 at 00:47)</a>:</h4>
<p>This is where being able to just do <code>@rustbot bless</code> would be wonderful</p>



<a name="241340616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/241340616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#241340616">(Jun 03 2021 at 01:49)</a>:</h4>
<p>I don't think that would be possible to cover 100% of tests, since some are platform-specific or otherwise not always run.  What kinds of tests is the default set not covering for you?</p>



<a name="241340735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/241340735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#241340735">(Jun 03 2021 at 01:51)</a>:</h4>
<p>Currently <code>ref_to_int_match</code>, though as mentioned clippy wasn't included in the original <code>x test</code>. Certainly nothing platform-specific.</p>



<a name="241341370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/241341370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#241341370">(Jun 03 2021 at 02:04)</a>:</h4>
<p><code>ref_to_int_match</code> appears to be platform-specific.  It has separate behavior for 32 vs 64 bit.  If you are on linux, I think you can do something like <code>./x.py test src/test/ui --bless  --target x86_64-unknown-linux-gnu --target i686-unknown-linux-gnu</code>.</p>



<a name="241341557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/241341557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#241341557">(Jun 03 2021 at 02:08)</a>:</h4>
<p>Not sure how I missed that one. I'll give it a shot, thanks.</p>



<a name="241341683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/241341683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#241341683">(Jun 03 2021 at 02:11)</a>:</h4>
<p>Welp, can't link. Guess I'm doing it by hand.</p>



<a name="242256661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bless%20all%20tests%3F/near/242256661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bless.20all.20tests.3F.html#242256661">(Jun 10 2021 at 19:18)</a>:</h4>
<p>It could be that you need to do <code>./x.py test src/test/ui --bless --compare-mode=nll</code> as well, but I haven't done that in ages. I <em>think</em> <code>--compare-mode=all</code> works. <a href="https://rustc-dev-guide.rust-lang.org/tests/running.html#running-tests-with-different-compare-modes">https://rustc-dev-guide.rust-lang.org/tests/running.html#running-tests-with-different-compare-modes</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
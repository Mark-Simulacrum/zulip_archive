<html>
<head><meta charset="utf-8"><title>LLVM filecheck · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html">LLVM filecheck</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="214369749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369749">(Oct 23 2020 at 21:47)</a>:</h4>
<p>I have built llvm from source, but I cannot find the path at which Filecheck is located. Is this supposed to be in the same folder in which llvm-config is?</p>



<a name="214369874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369874">(Oct 23 2020 at 21:48)</a>:</h4>
<p><span class="user-mention" data-user-id="328097">@BN</span> on my machine it's in <code>/usr/lib/llvm-10/bin/FileCheck</code>, next to llvm-config-10</p>



<a name="214369882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369882">(Oct 23 2020 at 21:48)</a>:</h4>
<p>try <code>realpath $(which llvm-config)</code></p>



<a name="214369889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369889" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369889">(Oct 23 2020 at 21:49)</a>:</h4>
<p>(or maybe readlink on mac?)</p>



<a name="214369930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369930">(Oct 23 2020 at 21:49)</a>:</h4>
<p>when you say built llvm from source, do you mean a custom fork? or like <code>src/llvm-project</code>?</p>



<a name="214369938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369938" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369938">(Oct 23 2020 at 21:49)</a>:</h4>
<p>I have found the path to llvm-config, but there isn't a FileCheck file</p>



<a name="214369940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369940">(Oct 23 2020 at 21:49)</a>:</h4>
<p>for the in-tree repo you don't need to set filecheck at all</p>



<a name="214369959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214369959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214369959">(Oct 23 2020 at 21:49)</a>:</h4>
<p>yes src/llvm-project</p>



<a name="214371702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214371702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214371702">(Oct 23 2020 at 22:14)</a>:</h4>
<p>I'm getting the following error message when only supplying llvm-config:</p>
<div class="codehilite"><pre><span></span><code>    Finished dev [unoptimized + debuginfo] target(s) in 2m 07s
warning: x.py has made several changes recently you may want to look at
help: consider looking at the changes in `src/bootstrap/CHANGELOG.md`
note: to silence this warning, add `changelog-seen = 2` at the top of `config.toml`
thread &#39;main&#39; panicked at &#39;FileCheck executable &quot;/usr/local/bin/FileCheck&quot; does not exist&#39;, src/bootstrap/sanity.rs:153:9
stack backtrace:
   0: rust_begin_unwind
             at /rustc/4708ac76ee6ec7e278a00f49a40b5bfbcdfd6168/library/std/src/panicking.rs:483
   1: std::panicking::begin_panic_fmt
             at /rustc/4708ac76ee6ec7e278a00f49a40b5bfbcdfd6168/library/std/src/panicking.rs:437
   2: bootstrap::sanity::check
             at ./src/bootstrap/sanity.rs:153
   3: bootstrap::Build::new
             at ./src/bootstrap/lib.rs:438
   4: bootstrap::main
             at ./src/bootstrap/bin/main.rs:30
   5: core::ops::function::FnOnce::call_once
             at /rustc/4708ac76ee6ec7e278a00f49a40b5bfbcdfd6168/library/core/src/ops/function.rs:227
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
failed to run: /Users/bn/Documents/RustCompilerNightly/rust/build/bootstrap/debug/bootstrap build -i library/std
Build completed unsuccessfully in 0:02:56
</code></pre></div>


<p>I haven't found any information on this, but is Filecheck included by default in llvm-11?</p>



<a name="214371727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214371727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214371727">(Oct 23 2020 at 22:15)</a>:</h4>
<p>what's in your config.toml?</p>



<a name="214385664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385664">(Oct 23 2020 at 22:17)</a>:</h4>
<div class="codehilite"><pre><span></span><code># Sample TOML configuration file for building Rust.
#
# To configure rustbuild, copy this file to the directory from which you will be
# running the build, and name it config.toml.
#
# All options are commented out by default in this file, and they&#39;re commented
# out with their default values. The build system by default looks for
# `config.toml` in the current directory of a build for build configuration, but
# a custom configuration file can also be specified with `--config` to the build
# system.

# =============================================================================
# Tweaking how LLVM is compiled
# =============================================================================
[llvm]
#download-ci-llvm = true

# Indicates whether LLVM rebuild should be skipped when running bootstrap. If
# this is `false` then the compiler&#39;s LLVM will be rebuilt whenever the built
# version doesn&#39;t have the correct hash. If it is `true` then LLVM will never
# be rebuilt. The default value is `false`.
#skip-rebuild = false

# Indicates whether the LLVM build is a Release or Debug build
#optimize = true

# Indicates whether LLVM should be built with ThinLTO. Note that this will
# only succeed if you use clang, lld, llvm-ar, and llvm-ranlib in your C/C++
# toolchain (see the `cc`, `cxx`, `linker`, `ar`, and `ranlib` options below).
# More info at: https://clang.llvm.org/docs/ThinLTO.html#clang-bootstrap
#thin-lto = false

# Indicates whether an LLVM Release build should include debug info
#release-debuginfo = false

# Indicates whether the LLVM assertions are enabled or not
assertions = true

# Indicates whether ccache is used when building LLVM
#ccache = false
# or alternatively ...
#ccache = &quot;/path/to/ccache&quot;

# If an external LLVM root is specified, we automatically check the version by
# default to make sure it&#39;s within the range that we&#39;re expecting, but setting
# this flag will indicate that this version check should not be done.
#version-check = true

# Link libstdc++ statically into the librustc_llvm instead of relying on a
# dynamic version to be available.
#static-libstdcpp = false

# Tell the LLVM build system to use Ninja instead of the platform default for
# the generated build system. This can sometimes be faster than make, for
# example.
ninja = false

# LLVM targets to build support for.
# Note: this is NOT related to Rust compilation targets. However, as Rust is
# dependent on LLVM for code generation, turning targets off here WILL lead to
# the resulting rustc being unable to compile for the disabled architectures.
# Also worth pointing out is that, in case support for new targets are added to
# LLVM, enabling them here doesn&#39;t mean Rust is automatically gaining said
# support. You&#39;ll need to write a target specification at least, and most
# likely, teach rustc about the C ABI of the target. Get in touch with the
# Rust team and file an issue if you need assistance in porting!
#targets = &quot;AArch64;ARM;Hexagon;MSP430;Mips;NVPTX;PowerPC;RISCV;Sparc;SystemZ;WebAssembly;X86&quot;

# LLVM experimental targets to build support for. These targets are specified in
# the same format as above, but since these targets are experimental, they are
# not built by default and the experimental Rust compilation targets that depend
# on them will not work unless the user opts in to building them.
#experimental-targets = &quot;AVR&quot;

# Cap the number of parallel linker invocations when compiling LLVM.
# This can be useful when building LLVM with debug info, which significantly
# increases the size of binaries and consequently the memory required by
# each linker process.
# If absent or 0, linker invocations are treated like any other job and
# controlled by rustbuild&#39;s -j parameter.
#link-jobs = 0

# When invoking `llvm-config` this configures whether the `--shared` argument is
# passed to prefer linking to shared libraries.
#link-shared = false

# When building llvm, this configures what is being appended to the version.
# The default is &quot;-rust-$version-$channel&quot;, except for dev channel where rustc
# version number is omitted. To use LLVM version as is, provide an empty string.
#version-suffix = &quot;-rust-dev&quot;

# On MSVC you can compile LLVM with clang-cl, but the test suite doesn&#39;t pass
# with clang-cl, so this is special in that it only compiles LLVM with clang-cl
#clang-cl = &#39;/path/to/clang-cl.exe&#39;

# Pass extra compiler and linker flags to the LLVM CMake build.
#cflags = &quot;-fextra-flag&quot;
#cxxflags = &quot;-fextra-flag&quot;
#ldflags = &quot;-Wl,extra-flag&quot;

# Use libc++ when building LLVM instead of libstdc++. This is the default on
# platforms already use libc++ as the default C++ library, but this option
# allows you to use libc++ even on platforms when it&#39;s not. You need to ensure
# that your host compiler ships with libc++.
#use-libcxx = true

# The value specified here will be passed as `-DLLVM_USE_LINKER` to CMake.
#use-linker = &quot;lld&quot;

# Whether or not to specify `-DLLVM_TEMPORARILY_ALLOW_OLD_TOOLCHAIN=YES`
#allow-old-toolchain = false

# =============================================================================
# General build configuration options
# =============================================================================
[build]

# Build triple for the original snapshot compiler. This must be a compiler that
# nightlies are already produced for. The current platform must be able to run
# binaries of this build triple and the nightly will be used to bootstrap the
# first compiler.
#
# Defaults to host platform
#build = &quot;x86_64-unknown-linux-gnu&quot;

# In addition to the build triple, other triples to produce full compiler
# toolchains for. Each of these triples will be bootstrapped from the build
# triple and then will continue to bootstrap themselves. This platform must
# currently be able to run all of the triples provided here.
#
# Defaults to just the build triple
#host = [&quot;x86_64-unknown-linux-gnu&quot;]

# In addition to all host triples, other triples to produce the standard library
# for. Each host triple will be used to produce a copy of the standard library
# for each target triple.
#
# Defaults to just the build triple
#target = [&quot;x86_64-unknown-linux-gnu&quot;]

# Use this directory to store build artifacts.
# You can use &quot;$ROOT&quot; to indicate the root of the git repository.
#build-dir = &quot;build&quot;

# Instead of downloading the src/stage0.txt version of Cargo specified, use
# this Cargo binary instead to build all Rust code
#cargo = &quot;/path/to/bin/cargo&quot;

# Instead of downloading the src/stage0.txt version of the compiler
# specified, use this rustc binary instead as the stage0 snapshot compiler.
#rustc = &quot;/path/to/bin/rustc&quot;

# Instead of download the src/stage0.txt version of rustfmt specified,
# use this rustfmt binary instead as the stage0 snapshot rustfmt.
#rustfmt = &quot;/path/to/bin/rustfmt&quot;

# Flag to specify whether any documentation is built. If false, rustdoc and
# friends will still be compiled but they will not be used to generate any
# documentation.
#docs = true

# Indicate whether the compiler should be documented in addition to the standard
# library and facade crates.
#compiler-docs = false

# Indicate whether git submodules are managed and updated automatically.
#submodules = true

# Update git submodules only when the checked out commit in the submodules differs
# from what is committed in the main rustc repo.
#fast-submodules = true

# The path to (or name of) the GDB executable to use. This is only used for
# executing the debuginfo test suite.
#gdb = &quot;gdb&quot;

# The node.js executable to use. Note that this is only used for the emscripten
# target when running tests, otherwise this can be omitted.
#nodejs = &quot;node&quot;

# Python interpreter to use for various tasks throughout the build, notably
# rustdoc tests, the lldb python interpreter, and some dist bits and pieces.
#
# Defaults to the Python interpreter used to execute x.py
#python = &quot;python&quot;

# Force Cargo to check that Cargo.lock describes the precise dependency
# set that all the Cargo.toml files create, instead of updating it.
#locked-deps = false

# Indicate whether the vendored sources are used for Rust dependencies or not
#vendor = false

# Typically the build system will build the Rust compiler twice. The second
# compiler, however, will simply use its own libraries to link against. If you
# would rather to perform a full bootstrap, compiling the compiler three times,
# then you can set this option to true. You shouldn&#39;t ever need to set this
# option to true.
#full-bootstrap = false

# Enable a build of the extended Rust tool set which is not only the compiler
# but also tools such as Cargo. This will also produce &quot;combined installers&quot;
# which are used to install Rust and Cargo together. This is disabled by
# default. The `tools` option (immediately below) specifies which tools should
# be built if `extended = true`.
#extended = false

# Installs chosen set of extended tools if `extended = true`. By default builds all.
# If chosen tool failed to build the installation fails. If `extended = false`, this
# option is ignored.
#tools = [&quot;cargo&quot;, &quot;rls&quot;, &quot;clippy&quot;, &quot;rustfmt&quot;, &quot;analysis&quot;, &quot;src&quot;]

# Verbosity level: 0 == not verbose, 1 == verbose, 2 == very verbose
#verbose = 0

# Build the sanitizer runtimes
#sanitizers = false

# Build the profiler runtime (required when compiling with options that depend
# on this runtime, such as `-C profile-generate` or `-Z instrument-coverage`).
#profiler = false

# Indicates whether the native libraries linked into Cargo will be statically
# linked or not.
#cargo-native-static = false

# Run the build with low priority, by setting the process group&#39;s &quot;nice&quot; value
# to +10 on Unix platforms, and by using a &quot;low priority&quot; job object on Windows.
#low-priority = false

# Arguments passed to the `./configure` script, used during distcheck. You
# probably won&#39;t fill this in but rather it&#39;s filled in by the `./configure`
# script.
#configure-args = []

# Indicates that a local rebuild is occurring instead of a full bootstrap,
</code></pre></div>



<a name="214385687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385687">(Oct 23 2020 at 22:17)</a>:</h4>
<div class="codehilite"><pre><span></span><code># essentially skipping stage0 as the local compiler is recompiling itself again.
#local-rebuild = false

# Print out how long each rustbuild step took (mostly intended for CI and
# tracking over time)
#print-step-timings = false

# =============================================================================
# General install configuration options
# =============================================================================
[install]

# Instead of installing to /usr/local, install to this path instead.
#prefix = &quot;/usr/local&quot;

# Where to install system configuration files
# If this is a relative path, it will get installed in `prefix` above
#sysconfdir = &quot;/etc&quot;

# Where to install documentation in `prefix` above
#docdir = &quot;share/doc/rust&quot;

# Where to install binaries in `prefix` above
#bindir = &quot;bin&quot;

# Where to install libraries in `prefix` above
#libdir = &quot;lib&quot;

# Where to install man pages in `prefix` above
#mandir = &quot;share/man&quot;

# Where to install data in `prefix` above (currently unused)
#datadir = &quot;share&quot;

# Where to install additional info in `prefix` above (currently unused)
#infodir = &quot;share/info&quot;

# Where to install local state (currently unused)
# If this is a relative path, it will get installed in `prefix` above
#localstatedir = &quot;/var/lib&quot;

# =============================================================================
# Options for compiling Rust code itself
# =============================================================================
[rust]

# Whether or not to optimize the compiler and standard library.
# WARNING: Building with optimize = false is NOT SUPPORTED. Due to bootstrapping,
# building without optimizations takes much longer than optimizing. Further, some platforms
# fail to build without this optimization (c.f. #65352).
#optimize = true

# Indicates that the build should be configured for debugging Rust. A
# `debug`-enabled compiler and standard library will be somewhat
# slower (due to e.g. checking of debug assertions) but should remain
# usable.
#
# Note: If this value is set to `true`, it will affect a number of
#       configuration options below as well, if they have been left
#       unconfigured in this file.
#
# Note: changes to the `debug` setting do *not* affect `optimize`
#       above. In theory, a &quot;maximally debuggable&quot; environment would
#       set `optimize` to `false` above to assist the introspection
#       facilities of debuggers like lldb and gdb. To recreate such an
#       environment, explicitly set `optimize` to `false` and `debug`
#       to `true`. In practice, everyone leaves `optimize` set to
#       `true`, because an unoptimized rustc with debugging
#       enabled becomes *unusably slow* (e.g. rust-lang/rust#24840
#       reported a 25x slowdown) and bootstrapping the supposed
#       &quot;maximally debuggable&quot; environment (notably libstd) takes
#       hours to build.
#
debug = true

# Number of codegen units to use for each compiler invocation. A value of 0
# means &quot;the number of cores on this machine&quot;, and 1+ is passed through to the
# compiler.
codegen-units = 0

# Sets the number of codegen units to build the standard library with,
# regardless of what the codegen-unit setting for the rest of the compiler is.
#codegen-units-std = 1

# Whether or not debug assertions are enabled for the compiler and standard
# library. Debug assertions control the maximum log level used by rustc. When
# enabled calls to `trace!` and `debug!` macros are preserved in the compiled
# binary, otherwise they are omitted.
#
# Defaults to rust.debug value
#debug-assertions = false

# Whether or not debug assertions are enabled for the standard library.
# Overrides the `debug-assertions` option, if defined.
#
# Defaults to rust.debug-assertions value
#debug-assertions-std = false

# Debuginfo level for most of Rust code, corresponds to the `-C debuginfo=N` option of `rustc`.
# `0` - no debug info
# `1` - line tables only - sufficient to generate backtraces that include line
#       information and inlined functions, set breakpoints at source code
#       locations, and step through execution in a debugger.
# `2` - full debug info with variable and type information
# Can be overridden for specific subsets of Rust code (rustc, std or tools).
# Debuginfo for tests run with compiletest is not controlled by this option
# and needs to be enabled separately with `debuginfo-level-tests`.
#
# Note that debuginfo-level = 2 generates several gigabytes of debuginfo
# and will slow down the linking process significantly.
#
# Defaults to 1 if debug is true
#debuginfo-level = 0

# Debuginfo level for the compiler.
#
# Defaults to rust.debuginfo-level value
#debuginfo-level-rustc = 0

# Debuginfo level for the standard library.
#
# Defaults to rust.debuginfo-level value
#debuginfo-level-std = 0

# Debuginfo level for the tools.
#
# Defaults to rust.debuginfo-level value
#debuginfo-level-tools = 0

# Debuginfo level for the test suites run with compiletest.
# FIXME(#61117): Some tests fail when this option is enabled.
#debuginfo-level-tests = 0

# Whether or not `panic!`s generate backtraces (RUST_BACKTRACE)
#backtrace = true

# Whether to always use incremental compilation when building rustc
incremental = true

# Build a multi-threaded rustc
#parallel-compiler = false

# The default linker that will be hard-coded into the generated compiler for
# targets that don&#39;t specify linker explicitly in their target specifications.
# Note that this is not the linker used to link said compiler.
#default-linker = &quot;cc&quot;

# The &quot;channel&quot; for the Rust build to produce. The stable/beta channels only
# allow using stable features, whereas the nightly and dev channels allow using
# nightly features
#channel = &quot;dev&quot;

# The root location of the musl installation directory.
#musl-root = &quot;...&quot;

# By default the `rustc` executable is built with `-Wl,-rpath` flags on Unix
# platforms to ensure that the compiler is usable by default from the build
# directory (as it links to a number of dynamic libraries). This may not be
# desired in distributions, for example.
#rpath = true

# Emits extra output from tests so test failures are debuggable just from logfiles.
verbose-tests = true

# Flag indicating whether tests are compiled with optimizations (the -O flag).
#optimize-tests = true

# Flag indicating whether codegen tests will be run or not. If you get an error
# saying that the FileCheck executable is missing, you may want to disable this.
# Also see the target&#39;s llvm-filecheck option.
#codegen-tests = true

# Flag indicating whether git info will be retrieved from .git automatically.
# Having the git information can cause a lot of rebuilds during development.
# Note: If this attribute is not explicitly set (e.g. if left commented out) it
# will default to true if channel = &quot;dev&quot;, but will default to false otherwise.
#ignore-git = true

# When creating source tarballs whether or not to create a source tarball.
#dist-src = false

# After building or testing extended tools (e.g. clippy and rustfmt), append the
# result (broken, compiling, testing) into this JSON file.
#save-toolstates = &quot;/path/to/toolstates.json&quot;

# This is an array of the codegen backends that will be compiled for the rustc
# that&#39;s being compiled. The default is to only build the LLVM codegen backend,
# and currently the only standard option supported is `&quot;llvm&quot;`
#codegen-backends = [&quot;llvm&quot;]

# Indicates whether LLD will be compiled and made available in the sysroot for
# rustc to execute.
#lld = false

# Indicates whether LLD will be used to link Rust crates during bootstrap on
# supported platforms. The LLD from the bootstrap distribution will be used
# and not the LLD compiled during the bootstrap.
#
# LLD will not be used if we&#39;re cross linking or running tests.
#
# Explicitly setting the linker for a target will override this option when targeting MSVC.
#use-lld = false

# Indicates whether some LLVM tools, like llvm-objdump, will be made available in the
# sysroot.
#llvm-tools = false

# Whether to deny warnings in crates
#deny-warnings = true

# Print backtrace on internal compiler errors during bootstrap
#backtrace-on-ice = false

# Whether to verify generated LLVM IR
#verify-llvm-ir = false

# Compile the compiler with a non-default ThinLTO import limit. This import
# limit controls the maximum size of functions imported by ThinLTO. Decreasing
# will make code compile faster at the expense of lower runtime performance.
# If `incremental` is set to true above, the import limit will default to 10
# instead of LLVM&#39;s default of 100.
#thin-lto-import-instr-limit = 100

# Map debuginfo paths to `/rust/$sha/...`, generally only set for releases
#remap-debuginfo = false

# Link the compiler against `jemalloc`, where on Linux and OSX it should
# override the default allocator for rustc and LLVM.
#jemalloc = false

# Run tests in various test suites with the &quot;nll compare mode&quot; in addition to
# running the tests in normal mode. Largely only used on CI and during local
# development of NLL
#test-compare-mode = false

# Use LLVM libunwind as the implementation for Rust&#39;s unwinder.
#llvm-libunwind = false

# Enable Windows Control Flow Guard checks in the standard library.
# This only applies from stage 1 onwards, and only for Windows targets.
#control-flow-guard = false

# Enable symbol-mangling-version v0. This can be helpful when profiling rustc,
# as generics will be preserved in symbols (rather than erased into opaque T).
#new-symbol-mangling = false

# =============================================================================
# Options for specific targets
#
# Each of the following options is scoped to the specific target triple in
# question and is used for determining how to compile each target.
# =============================================================================
#[target.x86_64-unknown-linux-gnu]
[target.x86_64-apple-darwin]

# C compiler to be used to compiler C code. Note that the
</code></pre></div>



<a name="214385738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385738">(Oct 23 2020 at 22:18)</a>:</h4>
<p>sorry - can you just print whether you have <code>llvm-config</code> set?</p>



<a name="214385740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385740">(Oct 23 2020 at 22:18)</a>:</h4>
<div class="codehilite"><pre><span></span><code># default value is platform specific, and if not specified it may also depend on
# what platform is crossing to what platform.
#cc = &quot;cc&quot;

# C++ compiler to be used to compiler C++ code (e.g. LLVM and our LLVM shims).
# This is only used for host targets.
#cxx = &quot;c++&quot;

# Archiver to be used to assemble static libraries compiled from C/C++ code.
# Note: an absolute path should be used, otherwise LLVM build will break.
#ar = &quot;ar&quot;

# Ranlib to be used to assemble static libraries compiled from C/C++ code.
# Note: an absolute path should be used, otherwise LLVM build will break.
#ranlib = &quot;ranlib&quot;

# Linker to be used to link Rust code. Note that the
# default value is platform specific, and if not specified it may also depend on
# what platform is crossing to what platform.
# Setting this will override the `use-lld` option for Rust code when targeting MSVC.
#linker = &quot;cc&quot;

# Path to the `llvm-config` binary of the installation of a custom LLVM to link
# against. Note that if this is specified we don&#39;t compile LLVM at all for this
# target.
llvm-config = &quot;/usr/local/bin/llvm-config&quot;

# Normally the build system can find LLVM&#39;s FileCheck utility, but if
# not, you can specify an explicit file name for it.
#llvm-filecheck = &quot;/usr/local/include/llvm/FileCheck&quot;

# If this target is for Android, this option will be required to specify where
# the NDK for the target lives. This is used to find the C compiler to link and
# build native code.
#android-ndk = &quot;/path/to/ndk&quot;

# Force static or dynamic linkage of the standard library for this target. If
# this target is a host for rustc, this will also affect the linkage of the
# compiler itself. This is useful for building rustc on targets that normally
# only use static libraries. If unset, the target&#39;s default linkage is used.
#crt-static = false

# The root location of the musl installation directory. The library directory
# will also need to contain libunwind.a for an unwinding implementation. Note
# that this option only makes sense for musl targets that produce statically
# linked binaries
#musl-root = &quot;...&quot;

# The full path to the musl libdir.
#musl-libdir = musl-root/lib

# The root location of the `wasm32-wasi` sysroot.
#wasi-root = &quot;...&quot;

# Used in testing for configuring where the QEMU images are located, you
# probably don&#39;t want to use this.
#qemu-rootfs = &quot;...&quot;

# =============================================================================
# Distribution options
#
# These options are related to distribution, mostly for the Rust project itself.
# You probably won&#39;t need to concern yourself with any of these options
# =============================================================================
[dist]

# This is the folder of artifacts that the build system will sign. All files in
# this directory will be signed with the default gpg key using the system `gpg`
# binary. The `asc` and `sha256` files will all be output into the standard dist
# output folder (currently `build/dist`)
#
# This folder should be populated ahead of time before the build system is
# invoked.
#sign-folder = &quot;path/to/folder/to/sign&quot;

# This is a file which contains the password of the default gpg key. This will
# be passed to `gpg` down the road when signing all files in `sign-folder`
# above. This should be stored in plaintext.
#gpg-password-file = &quot;path/to/gpg/password&quot;

# The remote address that all artifacts will eventually be uploaded to. The
# build system generates manifests which will point to these urls, and for the
# manifests to be correct they&#39;ll have to have the right URLs encoded.
#
# Note that this address should not contain a trailing slash as file names will
# be appended to it.
#upload-addr = &quot;https://example.com/folder&quot;

# Whether to build a plain source tarball to upload
# We disable that on Windows not to override the one already uploaded on S3
# as the one built on Windows will contain backslashes in paths causing problems
# on linux
#src-tarball = true
#

# Whether to allow failures when building tools
#missing-tools = false
</code></pre></div>



<a name="214385748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385748" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385748">(Oct 23 2020 at 22:18)</a>:</h4>
<p>if so, you should be able to just unset it and have things work</p>



<a name="214385762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385762">(Oct 23 2020 at 22:18)</a>:</h4>
<p>yeah your issue is it points to /usr/local/bin, not the actual path</p>



<a name="214385769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385769">(Oct 23 2020 at 22:18)</a>:</h4>
<p>x.py doesn't follow the symlink unfortunately</p>



<a name="214385774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214385774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214385774">(Oct 23 2020 at 22:18)</a>:</h4>
<p>(maybe it should?)</p>



<a name="214386137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214386137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214386137">(Oct 23 2020 at 22:23)</a>:</h4>
<p>I dont understand what you mean. The  /usr/local/bin/llvm-config file is not a symbol link</p>



<a name="214386155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214386155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214386155">(Oct 23 2020 at 22:23)</a>:</h4>
<p>how did you install llvm?</p>



<a name="214386215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214386215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214386215">(Oct 23 2020 at 22:24)</a>:</h4>
<p>(but also the short-term fix is to comment out the <code>llvm-config</code> line)</p>



<a name="214386238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214386238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214386238">(Oct 23 2020 at 22:24)</a>:</h4>
<p>I followed the instructions in the readme of the github repo</p>



<a name="214386257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214386257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214386257">(Oct 23 2020 at 22:25)</a>:</h4>
<p><a href="https://github.com/llvm/llvm-project">https://github.com/llvm/llvm-project</a></p>



<a name="214393273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214393273" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214393273">(Oct 23 2020 at 22:26)</a>:</h4>
<p>Yes, it does work with the default llvm installation of the compiler, but whenever I create a new worktree I have to install llvm again, which is a little annoying</p>



<a name="214393298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214393298" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214393298">(Oct 23 2020 at 22:27)</a>:</h4>
<p>you need to find the directory that llvm installed itself to, then</p>



<a name="214393311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214393311" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214393311">(Oct 23 2020 at 22:27)</a>:</h4>
<p>I'd look in <code>/usr/local/lib/llvm-*/bin</code></p>



<a name="214393763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214393763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214393763">(Oct 23 2020 at 22:34)</a>:</h4>
<p><span class="user-mention" data-user-id="328097">@BN</span> also, on linux you can use <code>download-ci-llvm = true</code> and it will make things nice without having to mess with this</p>



<a name="214393892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214393892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214393892">(Oct 23 2020 at 22:36)</a>:</h4>
<p>I've tried that, but I'm on Mac OS unfortunately and it didn't work</p>



<a name="214393921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214393921" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214393921">(Oct 23 2020 at 22:37)</a>:</h4>
<p>ah yeah on mac it's broken :/</p>



<a name="214394252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394252">(Oct 23 2020 at 22:42)</a>:</h4>
<p>What files is the directory that llvm installed itself to supposed to contain?</p>



<a name="214394261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394261" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394261">(Oct 23 2020 at 22:42)</a>:</h4>
<p><code>FileCheck</code></p>



<a name="214394376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394376">(Oct 23 2020 at 22:44)</a>:</h4>
<p>I only have Filecheck in an include directory</p>



<a name="214394385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394385" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394385">(Oct 23 2020 at 22:44)</a>:</h4>
<p>hmm, that's weird ... maybe it's not  in the default build when you install with CMake?</p>



<a name="214394396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394396">(Oct 23 2020 at 22:45)</a>:</h4>
<p>can you install llvm with brew? that might be easier than compiling from source</p>



<a name="214394415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394415">(Oct 23 2020 at 22:45)</a>:</h4>
<p>I've also tried that, unfortunately the homebrew version doesn't come with the utils which include Filecheck</p>



<a name="214394476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394476">(Oct 23 2020 at 22:46)</a>:</h4>
<p>I will try to tackle this tommorrow. Thanks for your help Joshua</p>



<a name="214394488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214394488" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214394488">(Oct 23 2020 at 22:46)</a>:</h4>
<p>sorry this is such a pain :/</p>



<a name="214448256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214448256" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214448256">(Oct 24 2020 at 20:38)</a>:</h4>
<p>Filecheck is "internal" development tool, so I'd be surprised if any distributed version of LLVM actually included it.</p>



<a name="214461866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/LLVM%20filecheck/near/214461866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/LLVM.20filecheck.html#214461866">(Oct 25 2020 at 01:57)</a>:</h4>
<p>Fedora does include it in the normal <code>llvm</code> package.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Bootstrap failing on OS X · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Bootstrap.20failing.20on.20OS.20X.html">Bootstrap failing on OS X</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="256087851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Bootstrap%20failing%20on%20OS%20X/near/256087851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Timothy Maloney <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Bootstrap.20failing.20on.20OS.20X.html#256087851">(Oct 04 2021 at 16:27)</a>:</h4>
<p>I'm not sure what changed, but for some reason my compiler build is failing. This is the output message:</p>
<div class="codehilite"><pre><span></span><code>dyld: Library not loaded: @rpath/librustc_driver-7b5a4e6eb3120fa2.dylib
  Referenced from: /Users/t1mb0sl1c3/Developer/rust-lang/rust/build/x86_64-apple-darwin/stage0/bin/rustc
  Reason: image not found
error: could not compile `bootstrap`

Caused by:
  process didn&#39;t exit successfully: `/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/x86_64-apple-darwin/stage0/bin/rustc --crate-name bootstrap --edition=2021 src/bootstrap/lib.rs --error-format=json --json=diagnostic-rendered-ansi --crate-type lib --emit=dep-info,metadata,link -C embed-bitcode=no -C split-debuginfo=unpacked -C debuginfo=2 -C metadata=ae1ca494022c5407 -C extra-filename=-ae1ca494022c5407 --out-dir /Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps -C incremental=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/incremental -L dependency=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps --extern build_helper=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libbuild_helper-7e174e3f395462cd.rmeta --extern cc=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libcc-e5480d80842ec1e3.rmeta --extern cmake=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libcmake-67771d77aae13fcd.rmeta --extern filetime=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libfiletime-2aff53341dbf25c6.rmeta --extern getopts=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libgetopts-2e1a0067225788a6.rmeta --extern ignore=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libignore-32e65223d0c582f3.rmeta --extern lazy_static=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/liblazy_static-2cc332f374acf6a6.rmeta --extern libc=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/liblibc-149811bad1076254.rmeta --extern merge=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libmerge-7835eb308c09c9d7.rmeta --extern num_cpus=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libnum_cpus-bfe77b560162d385.rmeta --extern once_cell=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libonce_cell-eed0d12505f9f6e4.rmeta --extern opener=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libopener-337632f3456d7748.rmeta --extern serde=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libserde-46f4d761cca17105.rmeta --extern serde_json=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libserde_json-08a17b8db73550ef.rmeta --extern time=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libtime-cb94db55f1a10e3a.rmeta --extern toml=/Users/t1mb0sl1c3/Developer/rust-lang/rust/build/bootstrap/debug/deps/libtoml-fcde64bc8f682ad9.rmeta -Cdebuginfo=2 -Wrust_2018_idioms -Wunused_lifetimes -Wsemicolon_in_expressions_from_macros -Dwarnings` (signal: 6, SIGABRT: process abort signal)
failed to run: /Users/t1mb0sl1c3/Developer/rust-lang/rust/build/x86_64-apple-darwin/stage0/bin/cargo build --manifest-path /Users/t1mb0sl1c3/Developer/rust-lang/rust/src/bootstrap/Cargo.toml
Build completed unsuccessfully in 0:00:00
</code></pre></div>
<p>I've managed to find <a href="https://github.com/rust-lang/rust/issues/53813">this issue</a> that goes into some detail about what possibly is wrong, but the solution Alex describes doesn't work for me. And since I am actually working on the compiler instead of just using nightly to compile, I don't think rolling back makes much sense. Can anyone help me?</p>



<a name="256089230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Bootstrap%20failing%20on%20OS%20X/near/256089230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Bootstrap.20failing.20on.20OS.20X.html#256089230">(Oct 04 2021 at 16:34)</a>:</h4>
<p>can you give the full log, perhaps after a rm -rf build?</p>



<a name="256089282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Bootstrap%20failing%20on%20OS%20X/near/256089282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Bootstrap.20failing.20on.20OS.20X.html#256089282">(Oct 04 2021 at 16:34)</a>:</h4>
<p>does librustc_driver....dylib exist in stage0/lib/?</p>



<a name="256090471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Bootstrap%20failing%20on%20OS%20X/near/256090471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Timothy Maloney <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Bootstrap.20failing.20on.20OS.20X.html#256090471">(Oct 04 2021 at 16:41)</a>:</h4>
<p>Not sure what happened, but the library was not there until I ran <code>rm -rf build; ./x.py build;</code> I opened a new term-window after running that command and checked to see if it was there, and it was. I'm assuming that takes care of the issue. I'll post again if I run into more trouble. Thank you!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>[resolve] `module_exports` should be renamed to `reexports`? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.5Bresolve.5D.20.60module_exports.60.20should.20be.20renamed.20to.20.60reexports.60.3F.html">[resolve] `module_exports` should be renamed to `reexports`?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="253689130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%5Bresolve%5D%20%60module_exports%60%20should%20be%20renamed%20to%20%60reexports%60%3F/near/253689130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ali MJ Al-Nasrawy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.5Bresolve.5D.20.60module_exports.60.20should.20be.20renamed.20to.20.60reexports.60.3F.html#253689130">(Sep 17 2021 at 04:45)</a>:</h4>
<p>By looking at <a href="https://github.com/rust-lang/rust/blob/78a46efff06558674b51c10d8d81758285746ab5/compiler/rustc_resolve/src/imports.rs#L1383">the code of it</a>, I see it doesn't include identifiers defined inside the module; it inlcude only re-exports!</p>
<p>Also, can you please explain the meaning of <code>!ident.span.from_expansion()</code> here? I though it excludes identifiers defined in macros (and was surprised by that),but tests shows that it doesn't! I think I understand macro hygiene but I don't really see how this is related.</p>



<a name="253713158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%5Bresolve%5D%20%60module_exports%60%20should%20be%20renamed%20to%20%60reexports%60%3F/near/253713158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.5Bresolve.5D.20.60module_exports.60.20should.20be.20renamed.20to.20.60reexports.60.3F.html#253713158">(Sep 17 2021 at 09:16)</a>:</h4>
<p><code>module_exports</code> includes only reexports for the local crate, but for foreign crates it includes all items (<code>cstore.item_children_untracked()</code>), it's kind of mess.</p>



<a name="253713713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%5Bresolve%5D%20%60module_exports%60%20should%20be%20renamed%20to%20%60reexports%60%3F/near/253713713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.5Bresolve.5D.20.60module_exports.60.20should.20be.20renamed.20to.20.60reexports.60.3F.html#253713713">(Sep 17 2021 at 09:22)</a>:</h4>
<p><code>!ident.span.from_expansion()</code> is supposed to mean that the import comes from a macro 2.0 (the <code>ident</code> in question was processed by <code>normalize_to_macros_2_0()</code> previously), but it's not really a correct thing to do, I guess it was a hack to avoid item conflicts before hygiene data serialization was implemented.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
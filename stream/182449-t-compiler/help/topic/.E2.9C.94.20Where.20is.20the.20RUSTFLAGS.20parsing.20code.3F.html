<html>
<head><meta charset="utf-8"><title>✔ Where is the RUSTFLAGS parsing code? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Where.20is.20the.20RUSTFLAGS.20parsing.20code.3F.html">✔ Where is the RUSTFLAGS parsing code?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="275421013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Where%20is%20the%20RUSTFLAGS%20parsing%20code%3F/near/275421013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Where.20is.20the.20RUSTFLAGS.20parsing.20code.3F.html#275421013">(Mar 15 2022 at 19:04)</a>:</h4>
<p>I know the MIRIFLAGS parsing code quite well, I've modified it. What I'm looking for is the mechanism that rustc uses to parse RUSTFLAGS. I've tried searching the codebase and maybe I'm just bad at this but I can't find anything recognizable.</p>



<a name="275421321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Where%20is%20the%20RUSTFLAGS%20parsing%20code%3F/near/275421321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Where.20is.20the.20RUSTFLAGS.20parsing.20code.3F.html#275421321">(Mar 15 2022 at 19:07)</a>:</h4>
<p>Cargo uses the same logic to split RUSTFLAGS into arguments. These arguments are then passed to rustc as normal. Parsing of commandline arguments happens at <a href="https://github.com/rust-lang/rust/blob/be52b4af5ec7e49572cb16519b7e144d6bcb051d/compiler/rustc_driver/src/lib.rs#L973">https://github.com/rust-lang/rust/blob/be52b4af5ec7e49572cb16519b7e144d6bcb051d/compiler/rustc_driver/src/lib.rs#L973</a></p>



<a name="275421364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Where%20is%20the%20RUSTFLAGS%20parsing%20code%3F/near/275421364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Where.20is.20the.20RUSTFLAGS.20parsing.20code.3F.html#275421364">(Mar 15 2022 at 19:07)</a>:</h4>
<p>Which uses getopts as I already mentioned: <a href="https://github.com/rust-lang/rust/blob/be52b4af5ec7e49572cb16519b7e144d6bcb051d/compiler/rustc_driver/src/lib.rs#L988">https://github.com/rust-lang/rust/blob/be52b4af5ec7e49572cb16519b7e144d6bcb051d/compiler/rustc_driver/src/lib.rs#L988</a></p>



<a name="275421609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Where%20is%20the%20RUSTFLAGS%20parsing%20code%3F/near/275421609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Where.20is.20the.20RUSTFLAGS.20parsing.20code.3F.html#275421609">(Mar 15 2022 at 19:09)</a>:</h4>
<p>Ah, perfect. That's what I was looking for.</p>



<a name="275421613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Where%20is%20the%20RUSTFLAGS%20parsing%20code%3F/near/275421613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Where.20is.20the.20RUSTFLAGS.20parsing.20code.3F.html#275421613">(Mar 15 2022 at 19:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120827">Ben Kimock (Saethlin)</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
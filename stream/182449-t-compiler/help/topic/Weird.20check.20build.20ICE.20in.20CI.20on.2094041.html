<html>
<head><meta charset="utf-8"><title>Weird check build ICE in CI on 94041 · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Weird.20check.20build.20ICE.20in.20CI.20on.2094041.html">Weird check build ICE in CI on 94041</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272080939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Weird%20check%20build%20ICE%20in%20CI%20on%2094041/near/272080939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Weird.20check.20build.20ICE.20in.20CI.20on.2094041.html#272080939">(Feb 16 2022 at 07:20)</a>:</h4>
<p>Hi folks!  This PR I'm the reviewer on hit a very strange CI failure, so I'm posting here in hopes someone knows where it should go.</p>
<p><a href="https://github.com/rust-lang/rust/runs/5211800302?check_suite_focus=true">https://github.com/rust-lang/rust/runs/5211800302?check_suite_focus=true</a></p>
<div class="codehilite"><pre><span></span><code>    Finished release [optimized] target(s) in 10.10s
    Checking std v0.0.0 (/checkout/library/std)
 Documenting proc_macro v0.0.0 (/checkout/library/proc_macro)
error[E0773]: attempted to define built-in macro more than once
    --&gt; /checkout/library/core/src/macros/mod.rs:1306:5
     |
1306 | /     macro_rules! cfg {
1307 | |         ($($cfg:tt)*) =&gt; {
1308 | |             /* compiler built-in */
1309 | |         };
1310 | |     }
     | |_____^
     |
note: previously defined here
    --&gt; /checkout/library/core/src/macros/mod.rs:1306:5
     |
1306 | /     macro_rules! cfg {
1307 | |         ($($cfg:tt)*) =&gt; {
1308 | |             /* compiler built-in */
1309 | |         };
1310 | |     }
     | |_____^

thread &#39;rustc&#39; panicked at &#39;index out of bounds: the len is 20 but the index is 20&#39;, compiler/rustc_metadata/src/creader.rs:139:21
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

error: internal compiler error: unexpected panic

error: Unrecognized option: &#39;markdown-css&#39;

For more information about this error, try `rustc --explain E0773`.
error: could not document `proc_macro`

Caused by:
  process didn&#39;t exit successfully: `/checkout/obj/build/bootstrap/debug/rustdoc --edition=2021 --crate-type lib --crate-name proc_macro library/proc_macro/src/lib.rs --target x86_64-unknown-linux-gnu -o /checkout/obj/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/doc --error-format=json --json=diagnostic-rendered-ansi,future-incompat --markdown-css rust.css --markdown-no-toc -Z unstable-options --resource-suffix 1.60.0 --index-page /checkout/src/doc/index.md -C metadata=030f61473e41e060 -L dependency=/checkout/obj/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/checkout/obj/build/x86_64-unknown-linux-gnu/stage0-std/release/deps --extern std=/checkout/obj/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps/libstd-8ecdf0b3fdf1770d.rmeta --cfg=bootstrap -Csymbol-mangling-version=legacy -Zunstable-options -Dwarnings &#39;-Wrustdoc::invalid_codeblock_attributes&#39; --crate-version &#39;1.60.0-nightly
  (29f6d4c13
  2022-02-16)&#39; &#39;-Zcrate-attr=doc(html_root_url=&quot;https://doc.rust-lang.org/nightly/&quot;)&#39;` (exit status: 1)
Build completed unsuccessfully in 0:00:39
</code></pre></div>
<p>The duplicate definition error points to the same place; it looks like it's an ICE reading metadata; it seems to be something about stage0 rustdoc?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
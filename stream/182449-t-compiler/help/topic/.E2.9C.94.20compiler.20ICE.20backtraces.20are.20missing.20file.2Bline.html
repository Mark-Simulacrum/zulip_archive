<html>
<head><meta charset="utf-8"><title>✔ compiler ICE backtraces are missing file+line · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html">✔ compiler ICE backtraces are missing file+line</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271525634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271525634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271525634">(Feb 11 2022 at 03:09)</a>:</h4>
<p>So I used to (like literally up to just a few days ago) would get the full file path and line number information interleaved with the regular stack trace on a rustc ICE. But now I get the stack trace referencing __just__ the method names, just like if you were to see an ICE on nightly, for example.</p>



<a name="271525715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271525715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271525715">(Feb 11 2022 at 03:10)</a>:</h4>
<p>I've rebased a few times and rebuilt rustc quite a few times too, and every time I force the compiler to stack trace, I still just see a stack trace with no lines.</p>



<a name="271525729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271525729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271525729">(Feb 11 2022 at 03:11)</a>:</h4>
<p>It's still very possible that I did something in my environment to make this happen -- not too familiar how rustc gets the file info in its stack traces.</p>



<a name="271526075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271526075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271526075">(Feb 11 2022 at 03:17)</a>:</h4>
<p><span class="user-mention" data-user-id="426609">@Michael Goulet (compiler-errors)</span> Which target are you building for?</p>



<a name="271526124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271526124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271526124">(Feb 11 2022 at 03:18)</a>:</h4>
<p>regular linux target, x86_64-unknown-linux-gnu or whatever it is</p>



<a name="271526252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271526252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271526252">(Feb 11 2022 at 03:20)</a>:</h4>
<p>okay, this must've been some fluke, because I just rebased, cleaned and built master and it works.</p>
<div class="codehilite"><pre><span></span><code>thread &#39;rustc&#39; panicked at &#39;aborting due to `-Z treat-err-as-bug=1`&#39;, compiler/rustc_errors/src/lib.rs:1200:27
stack backtrace:
   0:     0x7fe90b52b6a3 - std::backtrace_rs::backtrace::libunwind::trace::h51898efcc48575db
                               at /home/michael/rust/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5
   1:     0x7fe90b52b6a3 - std::backtrace_rs::backtrace::trace_unsynchronized::hfbd74c0e86dd44d7
                               at /home/michael/rust/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5
   2:     0x7fe90b52b6a3 - std::sys_common::backtrace::_print_fmt::hb32e3b0d50ace6e5
                               at /home/michael/rust/library/std/src/sys_common/backtrace.rs:66:5
   3:     0x7fe90b52b6a3 - &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt::he025b323892a45ed
...
</code></pre></div>



<a name="271526268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271526268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271526268">(Feb 11 2022 at 03:20)</a>:</h4>
<p>Well, anyways, thanks all. I'll see if it comes back :|</p>



<a name="271526274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271526274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271526274">(Feb 11 2022 at 03:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="426609">Michael Goulet (compiler-errors)</span> has marked this topic as resolved.</p>



<a name="271526433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271526433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271526433">(Feb 11 2022 at 03:23)</a>:</h4>
<p>(for the record, might've been due to a missing <code>rust.debug = true</code> in my <code>config.toml</code>, though I don't remember removing it.)</p>



<a name="271576761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20compiler%20ICE%20backtraces%20are%20missing%20file%2Bline/near/271576761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20compiler.20ICE.20backtraces.20are.20missing.20file.2Bline.html#271576761">(Feb 11 2022 at 13:35)</a>:</h4>
<p>Any chance it might have been the beta compiler ICE-ing? We don't ship debug symbols for that so you wouldn't get file paths &amp; line numbers if the ICE happened there.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
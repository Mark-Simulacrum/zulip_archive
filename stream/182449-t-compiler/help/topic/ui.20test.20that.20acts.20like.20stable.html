<html>
<head><meta charset="utf-8"><title>ui test that acts like stable · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html">ui test that acts like stable</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278574899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278574899" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278574899">(Apr 11 2022 at 15:52)</a>:</h4>
<p>is it possible to write a ui test that acts as if it's running on stable? so <code>sess.is_nightly_build()</code> would be false</p>
<p>i couldn't find a compiletest/rustc flag that would let me do that</p>



<a name="278575368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278575368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278575368">(Apr 11 2022 at 15:56)</a>:</h4>
<p>You still need to opt into unstable features via <code>#[feature()]</code>. So if you don't use any of those, in which ways do UI tests differ from stable for your purposes?</p>



<a name="278575662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278575662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278575662">(Apr 11 2022 at 15:58)</a>:</h4>
<p><span class="user-mention" data-user-id="127967">@skippy</span> not that I know of - if you find one let me know! I usually just test manually by setting <code>channel = stable</code> in config.toml.</p>
<p><span class="user-mention" data-user-id="330154">@The 8472</span>  One example is for testing "nightly features are not allowed on stable" and similar errors.</p>



<a name="278575789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278575789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278575789">(Apr 11 2022 at 15:59)</a>:</h4>
<p>i'm thinking of having <code>#[deprecated_safe]</code> emit a lint for nightly users, even while the the attribute is unstably applied (e.g. <code>since</code> version in the future)</p>



<a name="278575880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278575880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278575880">(Apr 11 2022 at 16:00)</a>:</h4>
<p>(it's not decided yet that we'll actually keep the ability to apply it unstably)</p>



<a name="278576015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576015">(Apr 11 2022 at 16:00)</a>:</h4>
<p>so on nightly we could have the deprecation light up immediately as a sort of test run</p>



<a name="278576064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576064">(Apr 11 2022 at 16:01)</a>:</h4>
<p>so it's not really a feature you'd opt in to, since the affected users aren't applying the attribute at all</p>



<a name="278576073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576073">(Apr 11 2022 at 16:01)</a>:</h4>
<p>FWIW rustdoc does this a lot (show lints only on nightly) and I wish it didn't, it ends up with it sticking around in limbo forever because no one bothers to stabilize it. I'd rather have the lint be allow by default.</p>



<a name="278576080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576080">(Apr 11 2022 at 16:01)</a>:</h4>
<p>just hitting somewhere we've applied the attribute unstably</p>



<a name="278576148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576148">(Apr 11 2022 at 16:01)</a>:</h4>
<p>once the <code>#[deprecated_safe]</code> becomes stable, it'd be a warn-by-default</p>



<a name="278576227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576227">(Apr 11 2022 at 16:02)</a>:</h4>
<p>this is only when it's going to be deprecated "in the future" that i'm talking about</p>



<a name="278576318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576318">(Apr 11 2022 at 16:03)</a>:</h4>
<p>Right - I'm saying it should be consistent between stable and nightly.</p>



<a name="278576518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576518">(Apr 11 2022 at 16:04)</a>:</h4>
<p>One thing I wish we did more is "brownouts" where the lint is enabled for one nightly a week or something - that pushes people to fix their code while still making it clear it's an experimental feature and not stable</p>



<a name="278576550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576550">(Apr 11 2022 at 16:04)</a>:</h4>
<p>we couldn't show it on stable before the <code>since</code> version kicks in, so to be consistent that'd mean we never show it on nightly before it's stable</p>



<a name="278576613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576613">(Apr 11 2022 at 16:05)</a>:</h4>
<p>yeah, that's the sort of need i think i'm driving at</p>



<a name="278576627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576627">(Apr 11 2022 at 16:05)</a>:</h4>
<p>some way to do a trial run</p>



<a name="278576723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576723">(Apr 11 2022 at 16:06)</a>:</h4>
<p>If your goal is just to see how many people affects, you can make it deny by default and do a crater run</p>



<a name="278576848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576848">(Apr 11 2022 at 16:06)</a>:</h4>
<p>in this case i'm worried more about making sure we have the tools in place that people don't just slap <code>#[allow(deprecated_safe)]</code> everywhere because they have no alternative</p>



<a name="278576917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576917">(Apr 11 2022 at 16:07)</a>:</h4>
<p>like if we rolled this out today, what would people do with <code>set_var</code> in unit tests? there's no way to make individual tests run single threaded</p>



<a name="278576926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576926">(Apr 11 2022 at 16:07)</a>:</h4>
<p>(just as an example)</p>



<a name="278576948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278576948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278576948">(Apr 11 2022 at 16:07)</a>:</h4>
<p>Isn't "force warn" a thing now?</p>



<a name="278577007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278577007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278577007">(Apr 11 2022 at 16:07)</a>:</h4>
<p>so it's feedback like "we need a way to run unit tests like this", " we need a way to count threads", etc. that i'm thinking about eliciting</p>



<a name="278577098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278577098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278577098">(Apr 11 2022 at 16:08)</a>:</h4>
<p>is force warn a thing that ever gets applied on lints directly? or just used at the command line? i was also wondering about that at one point</p>



<a name="278577161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278577161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278577161">(Apr 11 2022 at 16:08)</a>:</h4>
<p>Not sure. I just recall seeing it not too long ago.</p>



<a name="278577205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278577205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278577205">(Apr 11 2022 at 16:09)</a>:</h4>
<p>wrt counting threads, that's what I created the <code>num_threads</code> crate for.</p>



<a name="278577577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278577577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278577577">(Apr 11 2022 at 16:12)</a>:</h4>
<p>yeah, i wonder if seeing that we need that within libstd just to make a unit test sound means we'd want to add something like that to libstd itself</p>



<a name="278579048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278579048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278579048">(Apr 11 2022 at 16:23)</a>:</h4>
<p>another point against my idea, with regards to consistency, you'd almost need two entirely different versions of the docs on stable vs nightly... one for the unsafe version with safety section, etc. and the pre-existing one with the unsound version</p>



<a name="278579067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278579067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278579067">(Apr 11 2022 at 16:23)</a>:</h4>
<p>that seems awkward <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="278579375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278579375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278579375">(Apr 11 2022 at 16:26)</a>:</h4>
<p>i'm trying to get a feel for how the attribute feels in practice <a href="https://github.com/rust-lang/rust/pull/95942">here</a> (i shamelessly stole some of <a href="https://github.com/rust-lang/rust/pull/94619">#94619</a> there, <span class="user-mention" data-user-id="245610">@Jacob Pratt</span> <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span>)</p>



<a name="278579530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278579530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278579530">(Apr 11 2022 at 16:27)</a>:</h4>
<p>No problem! Ultimately it should just be a <code>#[deprecated_safe]</code> on the existing methods, but that PR also includes the necessary <code>unsafe</code> changes to OS-level things iirc</p>



<a name="278579736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278579736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278579736">(Apr 11 2022 at 16:28)</a>:</h4>
<p>yeah, plus some nice doc changes <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span></p>



<a name="278581925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278581925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278581925">(Apr 11 2022 at 16:43)</a>:</h4>
<p>i just realized, even if the attribute is insta-stable we still get the period where that's on nightly only so there's still a chance for feedback there</p>



<a name="278581953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278581953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278581953">(Apr 11 2022 at 16:43)</a>:</h4>
<p>forgive me while i state what i'm sure is obvious to all of you <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="278634192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278634192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278634192">(Apr 12 2022 at 00:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127967">skippy</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/ui.20test.20that.20acts.20like.20stable/near/278574899">said</a>:</p>
<blockquote>
<p>is it possible to write a ui test that acts as if it's running on stable? so <code>sess.is_nightly_build()</code> would be false</p>
<p>i couldn't find a compiletest/rustc flag that would let me do that</p>
</blockquote>
<p>Generally I'd say that things shouldn't be doing that, and should be checking a feature flag instead.  Then those tests you mention are like those in <a href="https://github.com/rust-lang/rust/tree/master/src/test/ui/feature-gates">https://github.com/rust-lang/rust/tree/master/src/test/ui/feature-gates</a></p>



<a name="278634604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/ui%20test%20that%20acts%20like%20stable/near/278634604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> skippy <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/ui.20test.20that.20acts.20like.20stable.html#278634604">(Apr 12 2022 at 00:34)</a>:</h4>
<p>this one is weird because the feature gate only controls the attribute  <code>#[deprecated_safe]</code> itself, the feature gate wouldn't have any say in the stability or not of a particular deprecation</p>
<p>it feels like <code>since</code> based stability of a deprecation is probably more trouble than it's worth though, given all the weirdness</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
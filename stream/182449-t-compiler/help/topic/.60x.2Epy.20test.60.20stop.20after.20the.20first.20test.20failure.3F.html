<html>
<head><meta charset="utf-8"><title>`x.py test` stop after the first test failure? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html">`x.py test` stop after the first test failure?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="205214709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205214709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edd Barrett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205214709">(Jul 28 2020 at 09:32)</a>:</h4>
<p>Is there a way to have <code>x.py test</code> stop after the first test failure?</p>
<p>Thanks</p>



<a name="205217200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205217200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205217200">(Jul 28 2020 at 09:57)</a>:</h4>
<p>I don't think either <code>libtest</code> or <code>compiletest_rs</code> (which is built around <code>libtest</code>) has an option for this.</p>



<a name="205217465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205217465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edd Barrett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205217465">(Jul 28 2020 at 10:00)</a>:</h4>
<p>It'd make development turnaround much quicker in some cases. May raise an issue.</p>



<a name="205218333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205218333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edd Barrett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205218333">(Jul 28 2020 at 10:10)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/74867">https://github.com/rust-lang/rust/issues/74867</a></p>



<a name="205218541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205218541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205218541">(Jul 28 2020 at 10:13)</a>:</h4>
<p>x.py already stops after a test executable reports an error. This is something that needs to be added to libtest and compiletest first, then x.py can expose a flag for this.</p>



<a name="205221290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205221290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edd Barrett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205221290">(Jul 28 2020 at 10:47)</a>:</h4>
<blockquote>
<p>x.py already stops after a test executable reports an error. </p>
</blockquote>
<p>Yes, it's just that one executable can contain thousands of tests.</p>



<a name="205222246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205222246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edd Barrett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205222246">(Jul 28 2020 at 11:01)</a>:</h4>
<p>Is there a way to run a single test case, rather than the whole executable?</p>



<a name="205222482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205222482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205222482">(Jul 28 2020 at 11:05)</a>:</h4>
<p>Yes, I don't know the exact command, but it is something like <code>./x.py test src/test/ui -- ui/abc.rs</code>.</p>



<a name="205223582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205223582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edd Barrett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205223582">(Jul 28 2020 at 11:22)</a>:</h4>
<p>I'd have thought:</p>
<div class="codehilite"><pre><span></span><code>./x.py test --stage 1 src/test/ui -- ui/abi/stack-probes-lto.rs
</code></pre></div>


<p>no joy.</p>



<a name="205224070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205224070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205224070">(Jul 28 2020 at 11:30)</a>:</h4>
<p>it's <code>./x.py test --stage=1 src/test/ui/abi/stack-probes-lto.rs</code></p>



<a name="205224150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205224150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205224150">(Jul 28 2020 at 11:30)</a>:</h4>
<p>For doctests and unit tests I think you can pass a second argument after <code>--</code> to filter out the one you want</p>



<a name="205224557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205224557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edd Barrett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205224557">(Jul 28 2020 at 11:36)</a>:</h4>
<p>Thanks!</p>



<a name="205229354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60x.py%20test%60%20stop%20after%20the%20first%20test%20failure%3F/near/205229354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60x.2Epy.20test.60.20stop.20after.20the.20first.20test.20failure.3F.html#205229354">(Jul 28 2020 at 12:36)</a>:</h4>
<p>you can also pass <code>--test-args</code> which can filter multiple tests at a time</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
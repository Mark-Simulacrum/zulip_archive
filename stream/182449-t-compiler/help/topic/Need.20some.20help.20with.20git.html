<html>
<head><meta charset="utf-8"><title>Need some help with git · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html">Need some help with git</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274371789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Need%20some%20help%20with%20git/near/274371789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html#274371789">(Mar 07 2022 at 10:18)</a>:</h4>
<p>I'm trying to get changes from a remote repo, rebase and then create a PR for the pulled in changes from the remote repo. I'm doing the following:</p>
<div class="codehilite"><pre><span></span><code>git checkout origin/static-initializers-mir-val
git switch -c static-refs-mir
</code></pre></div>
<p>this yields:</p>
<div class="codehilite"><pre><span></span><code>db019f21604 (HEAD -&gt; static-refs-mir, origin/static-refs-initializers-val) try to bless 32bit mir tests manually
fff06e5edcb use AllocId and Ty in ExprKind::StaticRef and delay ConstValue construction
54ff25e4467 bless mir-opt tests
22d6204db8c use mir::Visitor when collecting alloc_ids in pretty printing
8092b90cb2f bless tests
c612ef8f48a treat mir::ConstantKind::Val correctly in check_static_ptr
5e0fab6da5e use ConstantKind::Val in StaticRef
6bf3008f075 Auto merge of #94024 - matthiaskrgr:rollup-0hwxm0w, r=matthiaskrgr
</code></pre></div>
<p>If I then try to rebase, those changes are overridden however:</p>
<p><code>git rebase master</code> yields:</p>
<div class="codehilite"><pre><span></span><code>1b14fd3b106 (HEAD -&gt; static-refs-mir, upstream/master, origin/master, origin/HEAD, origin/master, master) Auto merge of #94612 - matthiaskrgr:rollup-2jm5wkr, r=matthiaskrgr
b4baef56750 Rollup merge of #94600 - est31:master, r=notriddle
f9b4976d60b Rollup merge of #94593 - estebank:issue-94510, r=davidtwco
4014e159c90 Rollup merge of #94568 - bjorn3:rustbuild_remove_dead_code, r=Mark-Simulacrum
ee3a2c7a8c1 Rollup merge of #94549 - m-ou-se:thread-is-finished, r=yaahc
</code></pre></div>
<p>Alternatively if I add a new commit after the switch command, that new command remains after the rebase?!</p>
<div class="codehilite"><pre><span></span><code>3a793c220cc (HEAD -&gt; static-refs-mir) foo
db019f21604 (origin/static-initializers-mir-val) try to bless 32bit mir tests manually
fff06e5edcb use AllocId and Ty in ExprKind::StaticRef and delay ConstValue construction
54ff25e4467 bless mir-opt tests
22d6204db8c use mir::Visitor when collecting alloc_ids in pretty printing
8092b90cb2f bless tests
c612ef8f48a treat mir::ConstantKind::Val correctly in check_static_ptr
5e0fab6da5e use ConstantKind::Val in StaticRef
6bf3008f075 Auto merge of #94024 - matthiaskrgr:rollup-0hwxm0w, r=matthiaskrgr
cc836ee2921 Rollup merge of #94014 - flip1995:clippy_transmute_lint_regroup, r=dtolnay
a87be980d82 Rollup merge of #94001 - durin42:llvm-15-uwtable, r=nikic
c6b27db8767 Rollup merge of #93999 - barzamin:suggest-raw-strings, r=jackh726
</code></pre></div>
<p><code>git rebase master</code>:</p>
<div class="codehilite"><pre><span></span><code>01339e8f91b (HEAD -&gt; static-refs-mir) foo
1b14fd3b106 (upstream/master, origin/master, origin/HEAD, origin/master, master) Auto merge of #94612 - matthiaskrgr:rollup-2jm5wkr, r=matthiaskrgr
b4baef56750 Rollup merge of #94600 - est31:master, r=notriddle
f9b4976d60b Rollup merge of #94593 - estebank:issue-94510, r=davidtwco
4014e159c90 Rollup merge of #94568 - bjorn3:rustbuild_remove_dead_code, r=Mark-Simulacrum
ee3a2c7a8c1 Rollup merge of #94549 - m-ou-se:thread-is-finished, r=yaahc
5115bdc2e28 Rollup merge of #94524 - bjorn3:remove_num_cpus, r=Mark-Simulacrum
</code></pre></div>
<p>How can I keep the commits from the remote repo after rebasing?</p>



<a name="274378137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Need%20some%20help%20with%20git/near/274378137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html#274378137">(Mar 07 2022 at 11:25)</a>:</h4>
<p>Try <code>git fetch upstream</code> and then <code>git rebase upstream/master</code>.</p>



<a name="274378283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Need%20some%20help%20with%20git/near/274378283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html#274378283">(Mar 07 2022 at 11:26)</a>:</h4>
<p>Never mind. Looks like master and upstream/master are equal.</p>



<a name="274379064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Need%20some%20help%20with%20git/near/274379064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html#274379064">(Mar 07 2022 at 11:34)</a>:</h4>
<p>Those commits were originally merged into upstream/master, but the PR was later reverted. Could that have something to do with this?</p>



<a name="274379147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Need%20some%20help%20with%20git/near/274379147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html#274379147">(Mar 07 2022 at 11:35)</a>:</h4>
<p>Yeah, that makes sense. Git rebase removes commits that have aready been applied without regard for revertions.</p>



<a name="274379167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Need%20some%20help%20with%20git/near/274379167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html#274379167">(Mar 07 2022 at 11:36)</a>:</h4>
<p>You can try reverting the revert and maybe amend the commit messages afterwards.</p>



<a name="274379337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Need%20some%20help%20with%20git/near/274379337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BN <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Need.20some.20help.20with.20git.html#274379337">(Mar 07 2022 at 11:37)</a>:</h4>
<p>ok thanks</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
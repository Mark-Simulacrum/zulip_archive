<html>
<head><meta charset="utf-8"><title>normalizing backtraces · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/normalizing.20backtraces.html">normalizing backtraces</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270884410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/normalizing%20backtraces/near/270884410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/normalizing.20backtraces.html#270884410">(Feb 06 2022 at 11:13)</a>:</h4>
<p>I'm wondering if there is some way to normalize backtraces/error messages when rustc crashes?<br>
So that stuff like<br>
<code>compiler/rustc_symbol_mangling/src/legacy.rs:41:21: finding type for DefId(0:9 ~ foreign_types[4a43]::{impl#0}), encountered def-id DefId(0:0 ~ foreign_types[4a43]) with no parent</code><br>
just looks like <br>
<code>compiler/rustc_symbol_mangling/src/legacy.rs:41:21: finding type for DefId(0:9 ~ foreign_types[____]::{impl#0}), encountered def-id DefId(0:0 ~ foreign_types[____]) with no parent</code><br>
? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="270884750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/normalizing%20backtraces/near/270884750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/normalizing.20backtraces.html#270884750">(Feb 06 2022 at 11:21)</a>:</h4>
<p>You can use something like <code>//normalize-stderr-test: "foreign_types\[.*?\]" -&gt; "foreign_types[____]"</code></p>



<a name="270886351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/normalizing%20backtraces/near/270886351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/normalizing.20backtraces.html#270886351">(Feb 06 2022 at 12:00)</a>:</h4>
<p>mmh but rust itself can't do that on its own, right?</p>



<a name="270886416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/normalizing%20backtraces/near/270886416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/normalizing.20backtraces.html#270886416">(Feb 06 2022 at 12:01)</a>:</h4>
<p>basically i an running diff on crash messages and want to eliminate the noise <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="270886677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/normalizing%20backtraces/near/270886677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/normalizing.20backtraces.html#270886677">(Feb 06 2022 at 12:07)</a>:</h4>
<p>You could build rustc with <code>RUSTC_FORCE_RUSTC_VERSION</code> set to some fixed value. But that doesn't help with prebuilt ones.</p>



<a name="270888935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/normalizing%20backtraces/near/270888935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/normalizing.20backtraces.html#270888935">(Feb 06 2022 at 13:02)</a>:</h4>
<p>You could do something like <code>diff &lt;(cat crash_a.txt | sed "s/\[\w*\]/\[____\]/") &lt;(cat crash_b.txt | sed "s/\[\w*\]/\[____\]/")</code>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
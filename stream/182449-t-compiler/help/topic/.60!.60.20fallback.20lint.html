<html>
<head><meta charset="utf-8"><title>`!` fallback lint · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html">`!` fallback lint</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="180085458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085458" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085458">(Nov 06 2019 at 23:01)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="248599">@llogiq</span> (cc <span class="user-mention" data-user-id="126931">@centril</span>) -- so about the lint</p>



<a name="180085482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085482">(Nov 06 2019 at 23:02)</a>:</h4>
<p>actually i'm not sure if this is the best stream but .. why not</p>



<a name="180085518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085518">(Nov 06 2019 at 23:02)</a>:</h4>
<p>I don't have a ton of time just now but if we create an issue I could also leave notes there, is there one?</p>



<a name="180085527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085527">(Nov 06 2019 at 23:02)</a>:</h4>
<p>Heh; just woke up -- Haven't had a chance to review the developments in the thread</p>



<a name="180085541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085541" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085541">(Nov 06 2019 at 23:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I made a tracking issue when changing the PR: <a href="https://github.com/rust-lang/rust/issues/65992" target="_blank" title="https://github.com/rust-lang/rust/issues/65992">https://github.com/rust-lang/rust/issues/65992</a></p>



<a name="180085544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085544">(Nov 06 2019 at 23:02)</a>:</h4>
<p>Ah, great</p>



<a name="180085546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085546">(Nov 06 2019 at 23:02)</a>:</h4>
<p>thanks</p>



<a name="180085555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085555">(Nov 06 2019 at 23:03)</a>:</h4>
<p>(it is also used in the code in the PR to activate the fallback)</p>



<a name="180085957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180085957" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180085957">(Nov 06 2019 at 23:08)</a>:</h4>
<p>Ok, so I understand you want the lint to reach into inference to see if <code>!</code> gets inferred because of fallback and then see if there would be a different outcome without the fallback.</p>



<a name="180086076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086076">(Nov 06 2019 at 23:10)</a>:</h4>
<p>I created <a href="https://github.com/rust-lang/rust/issues/66173" target="_blank" title="https://github.com/rust-lang/rust/issues/66173">https://github.com/rust-lang/rust/issues/66173</a> to track the lint specifically</p>



<a name="180086186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086186">(Nov 06 2019 at 23:12)</a>:</h4>
<blockquote>
<p>Ok, so I understand you want the lint to reach into inference to see if <code>!</code> gets inferred because of fallback and then see if there would be a different outcome without the fallback.</p>
</blockquote>
<p>well</p>



<a name="180086189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086189" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086189">(Nov 06 2019 at 23:12)</a>:</h4>
<p>so what I had in mind was</p>



<a name="180086195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086195">(Nov 06 2019 at 23:12)</a>:</h4>
<p>the simplest version would be</p>



<a name="180086204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086204" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086204">(Nov 06 2019 at 23:12)</a>:</h4>
<p>at the point where we decide to apply fallback to some type variable <code>?T</code></p>



<a name="180086216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086216">(Nov 06 2019 at 23:12)</a>:</h4>
<p>we can inspect the pending obligations and things to get a list of all the type variables that are related to <code>?T</code></p>



<a name="180086223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086223" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086223">(Nov 06 2019 at 23:13)</a>:</h4>
<p>that is effectively the set that are <em>now</em> falling back to <code>()</code> and which <em>will</em> fallback to <code>!</code></p>



<a name="180086249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086249" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086249">(Nov 06 2019 at 23:13)</a>:</h4>
<p>we can then see where those type variables appear -- e.g., do they appear in the types of variables and things?</p>



<a name="180086265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086265">(Nov 06 2019 at 23:13)</a>:</h4>
<p>we could also see if there are pending obligations like <code>?T: Debug</code> or something that are true for <code>()</code> but not for <code>!</code>, or where it might change behavior</p>



<a name="180086269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086269">(Nov 06 2019 at 23:13)</a>:</h4>
<p>I'm not sure exactly when we want to lint, that is an interesting question</p>



<a name="180086308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086308" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086308">(Nov 06 2019 at 23:14)</a>:</h4>
<p>but I guess the first step would be to get this "tainted" set</p>



<a name="180086332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086332">(Nov 06 2019 at 23:14)</a>:</h4>
<p>honestly I sort of suspect that <em>anytime</em> this fallback affects live code, something...fishy may be going on worth linting about, even if we <em>don't</em> change the fallback...</p>



<a name="180086454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086454">(Nov 06 2019 at 23:16)</a>:</h4>
<p>I wonder how big the fallout would be if we removed the fallback altogether in a crater run</p>



<a name="180086559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086559">(Nov 06 2019 at 23:18)</a>:</h4>
<p>worth an experiment</p>



<a name="180086571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086571">(Nov 06 2019 at 23:18)</a>:</h4>
<p>except that I feel like I tried it once and it was a problem..?</p>



<a name="180086572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086572">(Nov 06 2019 at 23:18)</a>:</h4>
<p>can't remember</p>



<a name="180086582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086582">(Nov 06 2019 at 23:18)</a>:</h4>
<p>I know we tried removing <code>i32</code> fallback and it was glorious...except for testing code :) we had to put it back eventually</p>



<a name="180086585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086585">(Nov 06 2019 at 23:18)</a>:</h4>
<p>too long ago <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> crater queue is reasonably sized for it to be worth it I recon</p>



<a name="180086601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086601" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086601">(Nov 06 2019 at 23:19)</a>:</h4>
<p>yeah this was all like back in 2012 or something :)</p>



<a name="180086977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/180086977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#180086977">(Nov 06 2019 at 23:24)</a>:</h4>
<p>Ok will be looking into obligations.</p>



<a name="182387934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/182387934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#182387934">(Dec 02 2019 at 20:48)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="248599">@llogiq</span> -- did you ever get time to investigate? Also, I was curious if you'd want to look into experimenting with a fix for <a href="https://github.com/rust-lang/rust/issues/66757" target="_blank" title="https://github.com/rust-lang/rust/issues/66757">https://github.com/rust-lang/rust/issues/66757</a> ?</p>



<a name="182801432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/182801432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#182801432">(Dec 06 2019 at 20:39)</a>:</h4>
<p>As I wrote on github, I was pretty swamped with work. So, can you or <span class="user-mention" data-user-id="126931">@centril</span>  help me out a bit so I can hit the ground running?</p>



<a name="182801523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/182801523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#182801523">(Dec 06 2019 at 20:39)</a>:</h4>
<p>I'm not familiar enough with inference to provide help</p>



<a name="182803137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/182803137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#182803137">(Dec 06 2019 at 20:50)</a>:</h4>
<p>In that case, I'd be happy if <span class="user-mention" data-user-id="116009">@nikomatsakis</span> could help me find that a type fell back to <code>()</code> and how to get its outstanding trait obligations to check if our bad case applies?</p>



<a name="183092275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/183092275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#183092275">(Dec 10 2019 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> do you have a minute to give a broad overview where to find the code to adapt?</p>



<a name="183203890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/183203890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#183203890">(Dec 11 2019 at 21:30)</a>:</h4>
<p><span class="user-mention" data-user-id="248599">@llogiq</span> will try to do so soon...</p>



<a name="184857953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/184857953" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#184857953">(Jan 05 2020 at 17:53)</a>:</h4>
<p>Happy new year, <span class="user-mention" data-user-id="116009">@nikomatsakis</span>! Can you set aside a few minutes to give me a few code spans to look into for the type fallback and how to check the obligations?</p>



<a name="184862489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/184862489" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#184862489">(Jan 05 2020 at 20:03)</a>:</h4>
<p>You can probably start by looking at <code>fallback_if_possible</code> (librustc_typeck/check/mod.rs:3305), <code>next_diverging_ty_var</code> (librustc/infer/mod.rs), and the usages of <code>self.diverges</code> and <code>tcx.types.never</code> in <code>librustc_typeck/check/*</code>.</p>



<a name="185156914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/185156914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#185156914">(Jan 08 2020 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="248599">@llogiq</span> yes! maybe we can schedule a time for this to do a little pair programming and get started?</p>



<a name="185747596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/185747596" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#185747596">(Jan 15 2020 at 21:43)</a>:</h4>
<p><span class="user-mention" data-user-id="248599">@llogiq</span> ok! Here is a <a href="https://mozilla.zoom.us/j/3849672730" target="_blank" title="https://mozilla.zoom.us/j/3849672730">zoom url</a> we can use</p>



<a name="185747608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/185747608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#185747608">(Jan 15 2020 at 21:43)</a>:</h4>
<p>(others are welcome to join if they want...)</p>



<a name="185753995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/185753995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#185753995">(Jan 15 2020 at 23:03)</a>:</h4>
<p>LOL, well, we definitely get warnings...</p>



<a name="185754007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60%21%60%20fallback%20lint/near/185754007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/.60!.60.20fallback.20lint.html#185754007">(Jan 15 2020 at 23:03)</a>:</h4>
<div class="codehilite"><pre><span></span>psyche. rustc +rust-1-stage2 ~/tmp/issue_66173.rs
warning: resulted from diverging fallback: !
  --&gt; /home/nmatsakis/tmp/issue_66173.rs:15:13
   |
15 |       let _ = if true {
   |  _____________^
16 | |         unconstrained_return()
17 | |     } else {
18 | |         panic!()
19 | |     };
   | |_____^

warning: resulted from diverging fallback: !
  --&gt; /home/nmatsakis/tmp/issue_66173.rs:15:21
   |
15 |       let _ = if true {
   |  _____________________^
16 | |         unconstrained_return()
17 | |     } else {
   | |_____^

warning: resulted from diverging fallback: !
  --&gt; /home/nmatsakis/tmp/issue_66173.rs:16:9
   |
16 |         unconstrained_return()
   |         ^^^^^^^^^^^^^^^^^^^^^^

warning: resulted from diverging fallback: fn() -&gt; ! {unconstrained_return::&lt;!&gt;}
  --&gt; /home/nmatsakis/tmp/issue_66173.rs:16:9
   |
16 |         unconstrained_return()
   |         ^^^^^^^^^^^^^^^^^^^^
... // continues for some time
</pre></div>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
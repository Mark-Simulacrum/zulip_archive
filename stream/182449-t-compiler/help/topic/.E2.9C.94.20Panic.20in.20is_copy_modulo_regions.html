<html>
<head><meta charset="utf-8"><title>✔ Panic in is_copy_modulo_regions · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Panic.20in.20is_copy_modulo_regions.html">✔ Panic in is_copy_modulo_regions</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="262308844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Panic%20in%20is_copy_modulo_regions/near/262308844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Panic.20in.20is_copy_modulo_regions.html#262308844">(Nov 22 2021 at 11:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116427">Federico Poli</span> has marked this topic as resolved.</p>



<a name="262625396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Panic%20in%20is_copy_modulo_regions/near/262625396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Panic.20in.20is_copy_modulo_regions.html#262625396">(Nov 24 2021 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116427">@Federico Poli</span> The panic is caused by the fact that you're re-using a type from one <code>InferCtxt</code> inside another <code>InferCtxt</code></p>



<a name="262625512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Panic%20in%20is_copy_modulo_regions/near/262625512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Panic.20in.20is_copy_modulo_regions.html#262625512">(Nov 24 2021 at 18:32)</a>:</h4>
<p>If <code>ty</code> has any inference variables (in your example, a region variable), then using it with the freshly-created <code>InferCtxt</code> (i.e.<code>tcx.infer_ctxt().enter(|infcx|</code>) will cause a panic, since those inference variables don't exist in the new <code>InferCtxt</code></p>



<a name="262625644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Panic%20in%20is_copy_modulo_regions/near/262625644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Panic.20in.20is_copy_modulo_regions.html#262625644">(Nov 24 2021 at 18:33)</a>:</h4>
<p>The <code>is_copy_modulo_regions</code> method should really be checking for that - I'll open an issue</p>



<a name="262680408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%E2%9C%94%20Panic%20in%20is_copy_modulo_regions/near/262680408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.E2.9C.94.20Panic.20in.20is_copy_modulo_regions.html#262680408">(Nov 25 2021 at 08:57)</a>:</h4>
<p>I see, thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
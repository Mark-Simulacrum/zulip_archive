<html>
<head><meta charset="utf-8"><title>Linking crt*.o files using cross targeting musl · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html">Linking crt*.o files using cross targeting musl</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270413197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270413197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270413197">(Feb 02 2022 at 16:28)</a>:</h4>
<p>So, I'm trying to compile a hello world for riscv64-unknown-linux-musl. I'm using <code>cross</code> at the moment, and I have generated a docker image that (I think) has the correct toolchain. Compilation appears to work, but linking is failing saying that <code>cc</code> cannot find five files, all crt*.o. I have gone into the docker image and those files are present, but whatever is invoking <code>cc</code>isn't giving a path for them:</p>
<div class="codehilite"><pre><span></span><code>error: linking with `cc` failed: exit status: 1
  |
  = note: &quot;cc&quot; &quot;crt1.o&quot; &quot;crti.o&quot; &quot;crtbegin.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-fcb1c365989aaa71.risctest.d0c3b2d2-cgu.0.rcgu.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-fcb1c365989aaa71.risctest.d0c3b2d2-cgu.1.rcgu.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-fcb1c365989aaa71.risctest.d0c3b2d2-cgu.2.rcgu.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-fcb1c365989aaa71.7cbnssvq8d3o7ek.rcgu.o&quot; &quot;-Wl,--as-needed&quot; &quot;-L&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps&quot; &quot;-L&quot; &quot;/target/release/deps&quot; &quot;-L&quot; &quot;/xargo/lib/rustlib/riscv64gc-unknown-linux-musl/lib&quot; &quot;-Wl,--start-group&quot; &quot;-Wl,-Bstatic&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libstd-d1a0e8af1724d784.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libpanic_abort-6c53961b25c07e29.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/librustc_demangle-39259970d5c3d274.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libstd_detect-50e1cc1479dd2785.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libhashbrown-d4e1d9ad296d1bea.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/librustc_std_workspace_alloc-ffec08c7fc5869ae.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libunwind-4f18c2af9b252d6c.rlib&quot; &quot;-lunwind&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/liblibc-407d4e74c1f54639.rlib&quot; &quot;-lc&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libcfg_if-c4d5877a62e47ad4.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/liblibc-a6a90479efc625dc.rlib&quot; &quot;-lc&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/liballoc-28682a01ba4365d3.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/librustc_std_workspace_core-c8ea9cd31d925569.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libcore-cdc82cd127739f8e.rlib&quot; &quot;-Wl,--end-group&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libcompiler_builtins-81bec59cc1845e53.rlib&quot; &quot;-Wl,-Bdynamic&quot; &quot;-Wl,--eh-frame-hdr&quot; &quot;-Wl,-znoexecstack&quot; &quot;-nostartfiles&quot; &quot;-L&quot; &quot;/xargo/lib/rustlib/riscv64gc-unknown-linux-musl/lib&quot; &quot;-L&quot; &quot;/xargo/lib/rustlib/riscv64gc-unknown-linux-musl/lib/self-contained&quot; &quot;-o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-fcb1c365989aaa71&quot; &quot;-Wl,--gc-sections&quot; &quot;-static&quot; &quot;-no-pie&quot; &quot;-Wl,-zrelro,-znow&quot; &quot;-Wl,--strip-all&quot; &quot;-nodefaultlibs&quot; &quot;crtend.o&quot; &quot;crtn.o&quot;
  = note: cc: error: crt1.o: No such file or directory
          cc: error: crti.o: No such file or directory
          cc: error: crtbegin.o: No such file or directory
          cc: error: crtend.o: No such file or directory
          cc: error: crtn.o: No such file or directory
</code></pre></div>
<p>Is there a way to get <code>cross</code> to pass a search path to <code>cc</code>?</p>



<a name="270421398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270421398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270421398">(Feb 02 2022 at 17:12)</a>:</h4>
<p>Does <code>/xargo/lib/rustlib/riscv64gc-unknown-linux-musl/lib/self-contained</code> contain these files? If not, that is a xargo bug. This directory should contain all the parts of musl necessary for linking. This includes all crt objects as well as libc.a.</p>



<a name="270421477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270421477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270421477">(Feb 02 2022 at 17:13)</a>:</h4>
<p><span class="user-mention" data-user-id="475891">@Ross Schulman</span></p>



<a name="270424927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270424927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270424927">(Feb 02 2022 at 17:30)</a>:</h4>
<p>Do you mean within the docker container or on the host, <span class="user-mention" data-user-id="133247">@bjorn3</span> ?</p>



<a name="270424969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270424969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270424969">(Feb 02 2022 at 17:31)</a>:</h4>
<p>In the container.</p>



<a name="270425738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270425738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270425738">(Feb 02 2022 at 17:35)</a>:</h4>
<p>I'm looking, but <code>find</code> says that the only thing named <code>xargo</code> in the container is the binary itself in /usr/local/bin.</p>



<a name="270428241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270428241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270428241">(Feb 02 2022 at 17:49)</a>:</h4>
<p>Also after running the container? It is created as part of the compilation process.</p>



<a name="270428876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270428876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270428876">(Feb 02 2022 at 17:52)</a>:</h4>
<p>Oh, hm, let me try to get into one of the already run containers.</p>



<a name="270439506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270439506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270439506">(Feb 02 2022 at 19:02)</a>:</h4>
<p>:( I'm still working on it. The container stops after the compilation fails, so looking into it is harder.</p>



<a name="270440224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270440224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270440224">(Feb 02 2022 at 19:06)</a>:</h4>
<p>you could start the container with an alternate command (a shell) if the image contains one and then just work inside it</p>



<a name="270443309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270443309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270443309">(Feb 02 2022 at 19:26)</a>:</h4>
<p>Yeah, I'm working on that, but I have to figure out exactly how <code>cross</code> invokes docker to create the exact same environment, and I haven't gotten that to work yet.</p>



<a name="270446440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270446440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270446440">(Feb 02 2022 at 19:47)</a>:</h4>
<p>Ok. <span class="user-mention" data-user-id="133247">@bjorn3</span> after running the compilation manually in the docker container, there is no <code>self-contained</code> directory within <code>/xargo/lib/rustlib/riscv64gc-unknown-linux-musl/lib/</code>.</p>



<a name="270446619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270446619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270446619">(Feb 02 2022 at 19:48)</a>:</h4>
<p>If the container itself contains a musl toolchain for the target you could try passing <code>-Clink-self-contained=no</code> to rustc.</p>



<a name="270446803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270446803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270446803">(Feb 02 2022 at 19:49)</a>:</h4>
<p>Otherwise if you don't have any C dependencies and have a riscv64 linker on your system (or you have lld and use <code>-Clink-arg=-fuse-ld=lld</code>), you can try this instead of <code>cross</code>:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ rustup target add riscv64gc-unknown-linux-musl
$ cargo build --target riscv64gc-unknown-linux-musl
</code></pre></div>



<a name="270449075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270449075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270449075">(Feb 02 2022 at 20:05)</a>:</h4>
<p>Interestingly, the crt files ARE in <code>/usr/local/riscv64-linux-musl/lib</code> in the container...</p>



<a name="270450180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270450180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270450180">(Feb 02 2022 at 20:12)</a>:</h4>
<p>By default rustc uses a so called "self-contained" link on musl. This means that it ships with libc, crt and everything else necessary for linking against the target (except the linker, though it does ship with lld, just not enabled by default). This is contained in the <code>self-contained</code> directory of the respective target in the sysroot. <code>-Clink-self-contained=no</code> will make it use the system installed version instead.</p>



<a name="270454072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270454072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270454072">(Feb 02 2022 at 20:42)</a>:</h4>
<p>I've actually got it using the other crt files by just passing in the other directory to -L. The problem now is that rustc is using the system <code>cc</code> to link, which is understandably complaining that all of the files are risc-v ELFs :)</p>



<a name="270454794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270454794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270454794">(Feb 02 2022 at 20:47)</a>:</h4>
<p>Try <code>-Clink-arg=-fuse-ld=lld</code> if lld is installed.</p>



<a name="270455633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270455633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270455633">(Feb 02 2022 at 20:53)</a>:</h4>
<p>Sorry, but how do I send that to rustc? Does that go in <a href="http://build.rs">build.rs</a>?</p>



<a name="270456637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270456637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270456637">(Feb 02 2022 at 21:00)</a>:</h4>
<p>I think you want to set that in <code>.cargo/config.toml</code>.</p>



<a name="270457454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270457454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270457454">(Feb 02 2022 at 21:06)</a>:</h4>
<p>Yeah, I thought so too, but that doesn't seem to be having an effect.</p>



<a name="270460804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270460804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270460804">(Feb 02 2022 at 21:29)</a>:</h4>
<p>Ok, definitely making progress. Its now using the cross-compiler cc to link. Problem now is that its not finding <code>lunwind</code>, so I'm figuring that out.</p>



<a name="270465376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270465376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270465376">(Feb 02 2022 at 22:02)</a>:</h4>
<p>Why is it even trying to link lunwind? I have <code>panic = abort</code>in my <code>Cargo.toml</code></p>



<a name="270470532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270470532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270470532">(Feb 02 2022 at 22:41)</a>:</h4>
<p>Libunwind is used for generating backtraces by libstd.</p>



<a name="270471081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270471081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270471081">(Feb 02 2022 at 22:46)</a>:</h4>
<p>Oh, ok, interesting.</p>



<a name="270471105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Linking%20crt%2A.o%20files%20using%20cross%20targeting%20musl/near/270471105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ross Schulman <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Linking.20crt*.2Eo.20files.20using.20cross.20targeting.20musl.html#270471105">(Feb 02 2022 at 22:46)</a>:</h4>
<p>This is where I'm at, at the moment...</p>
<div class="codehilite"><pre><span></span><code>error: linking with `riscv64-linux-musl-cc` failed: exit status: 1
  |
  = note: &quot;riscv64-linux-musl-cc&quot; &quot;/usr/local/riscv64-linux-musl/lib/crt1.o&quot; &quot;/usr/local/riscv64-linux-musl/lib/crti.o&quot; &quot;/usr/local/lib/gcc/riscv64-linux-musl/9.2.0/crtbegin.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-3e7b7219504cb3d3.risctest.fadce640-cgu.0.rcgu.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-3e7b7219504cb3d3.risctest.fadce640-cgu.1.rcgu.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-3e7b7219504cb3d3.risctest.fadce640-cgu.2.rcgu.o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-3e7b7219504cb3d3.2kw4jzz8q1vaeyro.rcgu.o&quot; &quot;-Wl,--as-needed&quot; &quot;-L&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps&quot; &quot;-L&quot; &quot;/target/release/deps&quot; &quot;-L&quot; &quot;/usr/local/riscv64-linux-musl/lib&quot; &quot;-L&quot; &quot;/usr/local/lib/gcc/riscv64-linux-musl/9.2.0&quot; &quot;-L&quot; &quot;/rust/lib/rustlib/riscv64gc-unknown-linux-musl/lib&quot; &quot;-Wl,--start-group&quot; &quot;-Wl,-Bstatic&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libstd-b4b03dadfbcad0f7.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libpanic_abort-a014a1ef7d574a31.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/librustc_demangle-75d17671123f2cb3.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libstd_detect-a289129024f700ca.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libhashbrown-c90a5ae2c17f9509.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/librustc_std_workspace_alloc-bdfd4e39d1226369.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libunwind-dc42d8137b0be4a7.rlib&quot; &quot;-lunwind&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/liblibc-06229b7216571cd0.rlib&quot; &quot;-lc&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libcfg_if-a5258beea873b908.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/liblibc-ea78ae6f8d9aa609.rlib&quot; &quot;-lc&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/liballoc-76628974dfffdc26.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/librustc_std_workspace_core-7f261685d52c9541.rlib&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libcore-297564365220ec67.rlib&quot; &quot;-Wl,--end-group&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/libcompiler_builtins-aa5d63d4d450b798.rlib&quot; &quot;-Wl,-Bdynamic&quot; &quot;-Wl,--eh-frame-hdr&quot; &quot;-Wl,-znoexecstack&quot; &quot;-nostartfiles&quot; &quot;-L&quot; &quot;/rust/lib/rustlib/riscv64gc-unknown-linux-musl/lib&quot; &quot;-L&quot; &quot;/rust/lib/rustlib/riscv64gc-unknown-linux-musl/lib/self-contained&quot; &quot;-o&quot; &quot;/target/riscv64gc-unknown-linux-musl/release/deps/risctest-3e7b7219504cb3d3&quot; &quot;-Wl,--gc-sections&quot; &quot;-static&quot; &quot;-no-pie&quot; &quot;-Wl,-zrelro,-znow&quot; &quot;-nodefaultlibs&quot; &quot;/usr/local/lib/gcc/riscv64-linux-musl/9.2.0/crtend.o&quot; &quot;/usr/local/riscv64-linux-musl/lib/crtn.o&quot;
  = note: /usr/local/bin/../lib/gcc/riscv64-linux-musl/9.2.0/../../../../riscv64-linux-musl/bin/ld: cannot find -lunwind
          collect2: error: ld returned 1 exit status
</code></pre></div>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
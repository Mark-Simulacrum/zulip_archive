<html>
<head><meta charset="utf-8"><title>components for custom rustc · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html">components for custom rustc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="194561714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194561714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194561714">(Apr 18 2020 at 20:14)</a>:</h4>
<div class="codehilite"><pre><span></span>❯ cargo fmt
error: &#39;cargo-fmt&#39; is not installed for the toolchain &#39;dev&#39;
To install, run `rustup component add rustfmt --toolchain dev`
</pre></div>


<p>But when I try that command...</p>
<div class="codehilite"><pre><span></span>❯ rustup component add rustfmt --toolchain dev
error: toolchain &#39;dev&#39; does not support components
error: caused by: invalid toolchain name: &#39;dev&#39;
</pre></div>



<a name="194562880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194562880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194562880">(Apr 18 2020 at 20:48)</a>:</h4>
<p>you have to build it</p>



<a name="194562889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194562889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194562889">(Apr 18 2020 at 20:48)</a>:</h4>
<p>or, wait hmm</p>



<a name="194562902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194562902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194562902">(Apr 18 2020 at 20:49)</a>:</h4>
<p><span class="user-mention" data-user-id="119529">@Tshepang Lekhonkhobe</span> you may need to make the default nightly and then use <code>cargo +dev fmt</code></p>



<a name="194562914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194562914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194562914">(Apr 18 2020 at 20:49)</a>:</h4>
<p>that way, if it doesn't exist for the local toolchain, it will use the default. that's what it does for Cargo, anyway</p>



<a name="194562922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194562922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194562922">(Apr 18 2020 at 20:49)</a>:</h4>
<p>I might be confusing this though</p>



<a name="194568748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194568748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194568748">(Apr 18 2020 at 23:22)</a>:</h4>
<p>using <code>cargo +stable fmt</code> works, but I wanted to use the rustfmt I built</p>



<a name="194578472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194578472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194578472">(Apr 19 2020 at 04:29)</a>:</h4>
<p><span class="user-mention" data-user-id="119529">@Tshepang Lekhonkhobe</span> how did you build <code>rustfmt</code>?</p>



<a name="194578521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194578521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194578521">(Apr 19 2020 at 04:30)</a>:</h4>
<p>you shouldn't be getting that error if you did build it</p>



<a name="194578532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194578532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194578532">(Apr 19 2020 at 04:30)</a>:</h4>
<p>oh also how did you  create the <code>dev</code> toolchain? what <code>rustup link</code> command did you use?</p>



<a name="194578701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194578701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194578701">(Apr 19 2020 at 04:36)</a>:</h4>
<p>I used this in config.toml</p>
<div class="codehilite"><pre><span></span><span class="k">[build]</span>
<span class="n">extended</span> <span class="o">=</span> <span class="kc">true</span>
</pre></div>


<p>I created toolchain with</p>
<div class="codehilite"><pre><span></span>./x.py build --incremental --stage 1 [--keep-stage 1]
</pre></div>


<p>I also used this</p>
<div class="codehilite"><pre><span></span>rustup toolchain link dev ~/rust/rustc/build/x86_64-unknown-linux-gnu/stage1
</pre></div>



<a name="194579159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579159">(Apr 19 2020 at 04:52)</a>:</h4>
<p><span class="user-mention" data-user-id="119529">@Tshepang Lekhonkhobe</span> okay, what does <code>ls ~/rust/rustc/build/x86_64-unknown-linux-gnu/stage1/bin</code> show?</p>



<a name="194579165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579165">(Apr 19 2020 at 04:53)</a>:</h4>
<p>also, you can put <code>incremental = true</code> into <code>config.toml</code> and then you never have to add it manually to commands</p>



<a name="194579206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579206">(Apr 19 2020 at 04:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/components.20for.20custom.20rustc/near/194579159" title="#narrow/stream/182449-t-compiler.2Fhelp/topic/components.20for.20custom.20rustc/near/194579159">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="119529">Tshepang Lekhonkhobe</span> okay, what does <code>ls ~/rust/rustc/build/x86_64-unknown-linux-gnu/stage1/bin</code> show?</p>
</blockquote>
<p>it's just <code>rustc</code> and <code>rustdoc</code> in there</p>



<a name="194579210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579210">(Apr 19 2020 at 04:55)</a>:</h4>
<p>I suspected as much</p>



<a name="194579211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579211">(Apr 19 2020 at 04:55)</a>:</h4>
<p>I think you have to do <code>./x.py build</code></p>



<a name="194579213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579213">(Apr 19 2020 at 04:55)</a>:</h4>
<p>no <code>--stage</code> and no <code>--keep-stage</code></p>



<a name="194579217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579217">(Apr 19 2020 at 04:55)</a>:</h4>
<p>maybe <code>--keep-stage 1</code> but I don't recommend it, it will likely break your build</p>



<a name="194579219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579219">(Apr 19 2020 at 04:55)</a>:</h4>
<p>and then link stage2 not stage1</p>



<a name="194579259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579259">(Apr 19 2020 at 04:56)</a>:</h4>
<p>that is, I don't think we build any tools at stage2, only stage1</p>



<a name="194579276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579276">(Apr 19 2020 at 04:56)</a>:</h4>
<p><span class="user-mention" data-user-id="119529">@Tshepang Lekhonkhobe</span> oh wait there might be a way to force it</p>



<a name="194579283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579283">(Apr 19 2020 at 04:56)</a>:</h4>
<p>try <code>./x.py build --stage 1 src/tools/rustfmt</code></p>



<a name="194579290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579290">(Apr 19 2020 at 04:57)</a>:</h4>
<p>wait, no, <code>./x.py build --stage 0 src/tools/rustfmt</code></p>



<a name="194579294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579294">(Apr 19 2020 at 04:57)</a>:</h4>
<p>god I hate the stage numbering, maybe one day we can just remove it</p>



<a name="194579452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579452">(Apr 19 2020 at 05:02)</a>:</h4>
<p>/me I need a more strong machine</p>



<a name="194579456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579456">(Apr 19 2020 at 05:03)</a>:</h4>
<p>try my last command</p>



<a name="194579457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579457">(Apr 19 2020 at 05:03)</a>:</h4>
<p>it shouldn't be as bad as a full build</p>



<a name="194579459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579459">(Apr 19 2020 at 05:03)</a>:</h4>
<p>sorry for not realizing this earlier</p>



<a name="194579505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579505">(Apr 19 2020 at 05:04)</a>:</h4>
<p>command is done... what should I see</p>



<a name="194579514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579514">(Apr 19 2020 at 05:05)</a>:</h4>
<p>check that directory again</p>



<a name="194579518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579518">(Apr 19 2020 at 05:05)</a>:</h4>
<p>does it have <code>rustfmt</code> and <code>cargo-fmt</code> now?</p>



<a name="194579524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579524">(Apr 19 2020 at 05:05)</a>:</h4>
<p>(assuming it did something)</p>



<a name="194579526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579526">(Apr 19 2020 at 05:05)</a>:</h4>
<p>it doesn't... just <code>rustc</code> and <code>rustdoc</code></p>



<a name="194579530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579530">(Apr 19 2020 at 05:05)</a>:</h4>
<p>okay what did the <code>build --stage 0 src/tools/rustfmt</code> print?</p>



<a name="194579595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579595">(Apr 19 2020 at 05:07)</a>:</h4>
<div class="codehilite"><pre><span></span>❯ ./x.py build --incremental --stage 0 src/tools/rustfmt
Updating only changed submodules
Submodules updated in 0.02 seconds
    Finished dev [unoptimized] target(s) in 0.11s
Building stage0 std artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)
    Finished release [optimized] target(s) in 0.14s
Copying stage0 std from stage0 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)
Building stage0 compiler artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)
    Finished release [optimized] target(s) in 0.17s
Copying stage0 rustc from stage0 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)
Building stage0 tool rustfmt (x86_64-unknown-linux-gnu)
   Compiling syn v0.15.35
   Compiling proc-macro2 v1.0.3
...
</pre></div>



<a name="194579635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579635">(Apr 19 2020 at 05:08)</a>:</h4>
<p>okay how did it end?</p>



<a name="194579638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579638">(Apr 19 2020 at 05:08)</a>:</h4>
<p>the last 5 lines or so</p>



<a name="194579643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579643">(Apr 19 2020 at 05:08)</a>:</h4>
<div class="codehilite"><pre><span></span>...
   Compiling rustc-ap-rustc_errors v654.0.0
   Compiling rustc-ap-rustc_ast_pretty v654.0.0
   Compiling rustc-ap-rustc_session v654.0.0
   Compiling rustc-ap-rustc_parse v654.0.0
   Compiling rustc-ap-rustc_attr v654.0.0
   Compiling rustc-ap-rustc_ast_passes v654.0.0
   Compiling rustc-ap-rustc_expand v654.0.0
    Finished release [optimized] target(s) in 4m 43s
Build completed successfully in 0:04:44
</pre></div>



<a name="194579646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579646">(Apr 19 2020 at 05:09)</a>:</h4>
<p>hmmmmm</p>



<a name="194579650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579650">(Apr 19 2020 at 05:09)</a>:</h4>
<p>doing <code>--stage 1</code> now, in case</p>



<a name="194579659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579659">(Apr 19 2020 at 05:10)</a>:</h4>
<p>does <code>stage0-tools</code> or <code>stage0-tools-bin</code> exist? in <code>build/ x86_64-unknown-linux-gnu</code>?</p>



<a name="194579697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579697">(Apr 19 2020 at 05:10)</a>:</h4>
<p>it might just not be copying it to <code>stage1/bin</code></p>



<a name="194579699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579699">(Apr 19 2020 at 05:10)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="194579700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579700">(Apr 19 2020 at 05:10)</a>:</h4>
<p>what does specifying a stage mean in this case?</p>



<a name="194579707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579707">(Apr 19 2020 at 05:10)</a>:</h4>
<p>I assume the same thing it does for <code>build src/rustc</code></p>



<a name="194579715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579715">(Apr 19 2020 at 05:11)</a>:</h4>
<p><code>build --stage 0 src/rustc</code> is what <code>build --stage 1 src/libstd</code> does before copying the <code>rustc</code> binary it creates to <code>stage1/bin/rustc</code> and using it to build std</p>



<a name="194579717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579717">(Apr 19 2020 at 05:11)</a>:</h4>
<p>hm, I see rustfmt in <code>~/rust/rustc/build/x86_64-unknown-linux-gnu/stage1-tools-bin/</code></p>



<a name="194579723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579723">(Apr 19 2020 at 05:12)</a>:</h4>
<p>but that's from earlier today</p>



<a name="194579756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579756">(Apr 19 2020 at 05:12)</a>:</h4>
<p>no, stage0</p>



<a name="194579762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579762">(Apr 19 2020 at 05:12)</a>:</h4>
<p>ah, there is actually</p>



<a name="194579763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579763">(Apr 19 2020 at 05:12)</a>:</h4>
<p><code>stage0-rustc/.../rustc</code> gets copied (or hardlinked, rather) into <code>stage1/bin/rustc</code></p>



<a name="194579770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579770">(Apr 19 2020 at 05:13)</a>:</h4>
<p>you can do the same for the <code>rustfmt</code> and <code>cargo-fmt</code> I guess</p>



<a name="194579782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579782">(Apr 19 2020 at 05:13)</a>:</h4>
<p>what I just build (with <code>--stage 0</code> command you gave) ended up in <code>~/rust/rustc/build/x86_64-unknown-linux-gnu/stage0-tools-bin/</code></p>



<a name="194579822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579822">(Apr 19 2020 at 05:14)</a>:</h4>
<p>makes sense</p>



<a name="194579832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579832">(Apr 19 2020 at 05:14)</a>:</h4>
<p><code>ln build/x86_64-unknown-linux-gnu/stage0-tools-bin/* build/x86_64-unknown-linux-gnu/stage1/bin/</code></p>



<a name="194579834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194579834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194579834">(Apr 19 2020 at 05:14)</a>:</h4>
<p>this might just work</p>



<a name="194581179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194581179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194581179">(Apr 19 2020 at 05:56)</a>:</h4>
<p>it did not work...</p>
<blockquote>
<p>error: 'cargo-fmt' is not installed for the toolchain 'dev'</p>
</blockquote>



<a name="194581688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194581688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194581688">(Apr 19 2020 at 06:12)</a>:</h4>
<p>is there no <code>cargo-fmt</code> in there?</p>



<a name="194581689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194581689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194581689">(Apr 19 2020 at 06:12)</a>:</h4>
<p>I'm out of ideas</p>



<a name="194581690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194581690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194581690">(Apr 19 2020 at 06:12)</a>:</h4>
<p>you probably need <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="194581764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/components%20for%20custom%20rustc/near/194581764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/components.20for.20custom.20rustc.html#194581764">(Apr 19 2020 at 06:15)</a>:</h4>
<p>yeah, there is... maybe extra steps are needed</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
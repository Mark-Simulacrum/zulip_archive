<html>
<head><meta charset="utf-8"><title>Running perf locally gives very different results · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html">Running perf locally gives very different results</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="256777781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256777781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256777781">(Oct 08 2021 at 17:45)</a>:</h4>
<p>Whenever I run perf locally I get quite different results from what rust-timer outputs. Usually the difference doesn't matter much and I can still fix regressions, but today I got <a href="https://perf.rust-lang.org/compare.html?start=25ec8273855fde2d72ae877b397e054de5300e10&amp;end=d333b4430fb1577f7c0f0e650ac2f49a6fd04048">this</a> from rust-perf but completely neutral results locally. I tried with <code>incremental=false</code> but same thing. Are there any other differences in the compilation options used by rust-perf?</p>



<a name="256778028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256778028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256778028">(Oct 08 2021 at 17:46)</a>:</h4>
<p>By different I mean I sometimes see an improvement in one and a regression in the other, or a 24% regression turns into a 3% regression, etc</p>



<a name="256778189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256778189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256778189">(Oct 08 2021 at 17:48)</a>:</h4>
<p>perf compiles with 1 CGU and also executes PGO</p>



<a name="256778578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256778578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256778578">(Oct 08 2021 at 17:51)</a>:</h4>
<p>another option is to download the CI artifacts and use them for testing</p>



<a name="256780170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256780170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256780170">(Oct 08 2021 at 18:01)</a>:</h4>
<p>oh, that would explain it. What's PGO?</p>



<a name="256780659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256780659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256780659">(Oct 08 2021 at 18:04)</a>:</h4>
<p>ah, Profile Guided Optimization. That sounds harder to set up, I'll see if cgu=1 is enough</p>



<a name="256780977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256780977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256780977">(Oct 08 2021 at 18:06)</a>:</h4>
<p>The standard library is build with 1 CGU, the rustc compiler is built with the default 16 CGUs per crate. Building rustc with single CGU will give you very different perf results <a href="https://github.com/rust-lang/rust/pull/87650">https://github.com/rust-lang/rust/pull/87650</a>.</p>



<a name="256781020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781020">(Oct 08 2021 at 18:06)</a>:</h4>
<p>If you would like to understand CI perf results, I would recommend using CI artifacts.</p>



<a name="256781308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781308">(Oct 08 2021 at 18:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Running.20perf.20locally.20gives.20very.20different.20results/near/256781020">said</a>:</p>
<blockquote>
<p>If you would like to understand CI perf results, I would recommend using CI artifacts.</p>
</blockquote>
<p>that wouldn't work for me, my use-case is when I'm working on a PR that shows perf regressions, I want to find the commit that regressed</p>



<a name="256781359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781359">(Oct 08 2021 at 18:09)</a>:</h4>
<p>fwiw you can build pretty much identical artifacts to CI locally, but it is a pretty slow endeavor. Locally on 3950X (16 physical cores, 32 vCPU) that takes me 1h15 min per build</p>



<a name="256781367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781367">(Oct 08 2021 at 18:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Running.20perf.20locally.20gives.20very.20different.20results/near/256780977">said</a>:</p>
<blockquote>
<p>The standard library is build with 1 CGU, the rustc compiler is built with the default 16 CGUs per crate. Building rustc with single CGU will give you very different perf results <a href="https://github.com/rust-lang/rust/pull/87650">https://github.com/rust-lang/rust/pull/87650</a>.</p>
</blockquote>
<p>oh wait, I thought you said that rustc is compiled with 1 cgu when running perf</p>



<a name="256781409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781409">(Oct 08 2021 at 18:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Running.20perf.20locally.20gives.20very.20different.20results/near/256781359">said</a>:</p>
<blockquote>
<p>fwiw you can build pretty much identical artifacts to CI locally, but it is a pretty slow endeavor. Locally on 3950X (16 physical cores, 32 vCPU) that takes me 1h15 min per build</p>
</blockquote>
<p>how would I get that?</p>



<a name="256781576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781576">(Oct 08 2021 at 18:10)</a>:</h4>
<p><code>rm -rf obj/build &amp;&amp; DEPLOY=1 ./src/ci/docker/run.sh dist-x86_64-linux</code> will get you a dist directory with the right tarballs in ./obj/build/.../dist</p>



<a name="256781682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781682">(Oct 08 2021 at 18:11)</a>:</h4>
<p>which I "install" with:</p>
<div class="codehilite"><pre><span></span><code>tar xf obj/build/dist/rust-std-nightly-x86_64-unknown-linux-gnu.tar.xz
./rust-std-nightly-x86_64-unknown-linux-gnu/install.sh --prefix=/home/mark/.rustup/toolchains/$1 --disable-ldconfig
rm -r rust-std-nightly-x86_64-unknown-linux-gnu
tar xf obj/build/dist/rustc-nightly-x86_64-unknown-linux-gnu.tar.xz
./rustc-nightly-x86_64-unknown-linux-gnu/install.sh --prefix=/home/mark/.rustup/toolchains/$1 --disable-ldconfig
rm -r rustc-nightly-x86_64-unknown-linux-gnu
tar xf obj/build/dist/cargo-nightly-x86_64-unknown-linux-gnu.tar.xz
./cargo-nightly-x86_64-unknown-linux-gnu/install.sh --prefix=/home/mark/.rustup/toolchains/$1 --disable-ldconfig
rm -r cargo-nightly-x86_64-unknown-linux-gnu
</code></pre></div>



<a name="256781693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781693" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781693">(Oct 08 2021 at 18:11)</a>:</h4>
<p>ah I was hoping for an appropriate <code>config.toml</code> setup. That sounds like it would indeed need hours for every commit</p>



<a name="256781761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781761">(Oct 08 2021 at 18:12)</a>:</h4>
<p>yeah, this is not incremental currently</p>



<a name="256781777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781777">(Oct 08 2021 at 18:12)</a>:</h4>
<p>you can <em>maybe</em> try running src/ci/pgo.sh locally</p>



<a name="256781811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781811">(Oct 08 2021 at 18:12)</a>:</h4>
<p>does pgo make a huge difference? could I maybe ignore it?</p>



<a name="256781815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781815">(Oct 08 2021 at 18:12)</a>:</h4>
<p>and emulating CI environment by taking options from src/ci/run.sh and such</p>



<a name="256781897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781897">(Oct 08 2021 at 18:13)</a>:</h4>
<p>are you comparing local commit vs. local commit in your current attempts?</p>



<a name="256781909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781909">(Oct 08 2021 at 18:13)</a>:</h4>
<p>yes</p>



<a name="256781948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781948">(Oct 08 2021 at 18:13)</a>:</h4>
<p>PGO can make a big difference</p>



<a name="256781982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256781982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256781982">(Oct 08 2021 at 18:13)</a>:</h4>
<p>and sometimes does pretty weird things</p>



<a name="256782062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256782062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256782062">(Oct 08 2021 at 18:14)</a>:</h4>
<p>ah :/</p>



<a name="256782178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256782178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256782178">(Oct 08 2021 at 18:15)</a>:</h4>
<p>you <em>could</em> download the CI pgo collected profdata files and pass them to your local build</p>



<a name="256782199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256782199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256782199">(Oct 08 2021 at 18:15)</a>:</h4>
<p>but there's no guarantee that they are "close enough"</p>



<a name="256782223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256782223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256782223">(Oct 08 2021 at 18:15)</a>:</h4>
<p>but it might give you some closer approximation, at least</p>



<a name="256782366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256782366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256782366">(Oct 08 2021 at 18:16)</a>:</h4>
<p><code>curl https://ci-artifacts.rust-lang.org/rustc-builds/9d861e7379a238b570cab700aa938a014f881e94/reproducible-artifacts-nightly-x86_64-unknown-linux-gnu.tar.xz | tar xJf -</code>, for example, and then you can find rustc-pgo.profdata and llvm-pgo.profdata in there.</p>



<a name="256782382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256782382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256782382">(Oct 08 2021 at 18:16)</a>:</h4>
<p>I've not tried doing that yet though.</p>



<a name="256782503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256782503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256782503">(Oct 08 2021 at 18:17)</a>:</h4>
<p>huh ok I'll have a look, thanks</p>



<a name="256783289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256783289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256783289">(Oct 08 2021 at 18:22)</a>:</h4>
<p>In cranelift-codegen-check one clear regression is related to <code>TyCtxt::eval_stability</code> (there is also increase in related queries).</p>



<a name="256787292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20perf%20locally%20gives%20very%20different%20results/near/256787292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20perf.20locally.20gives.20very.20different.20results.html#256787292">(Oct 08 2021 at 18:49)</a>:</h4>
<p>well, I tried to build as usual with <code>--rust-profile-use</code> and <code>llvm-profile-use</code> but the results look the same as before. Could be that <code>x.py build</code> ignores those I dunno</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>llvm branch coverage · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/llvm.20branch.20coverage.html">llvm branch coverage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="221957585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20branch%20coverage/near/221957585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arpad Borsos <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/llvm.20branch.20coverage.html#221957585">(Jan 07 2021 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="296355">@Rich Kadel</span> I recently stumbled upon the <code>llvm-cov</code> tool getting proper branch coverage reporting: <a href="https://github.com/llvm/llvm-project/commit/9f2967bcfe2f7d1fc02281f0098306c90c2c10a5">https://github.com/llvm/llvm-project/commit/9f2967bcfe2f7d1fc02281f0098306c90c2c10a5</a></p>



<a name="221957744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20branch%20coverage/near/221957744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arpad Borsos <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/llvm.20branch.20coverage.html#221957744">(Jan 07 2021 at 15:46)</a>:</h4>
<p>will that automatically work with the coverage mappings that rust generates?</p>



<a name="221958009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20branch%20coverage/near/221958009" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arpad Borsos <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/llvm.20branch.20coverage.html#221958009">(Jan 07 2021 at 15:48)</a>:</h4>
<p>I’m trying to better understand the terminology of llvm, also figuring out how to read the json output format</p>



<a name="221959737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20branch%20coverage/near/221959737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arpad Borsos <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/llvm.20branch.20coverage.html#221959737">(Jan 07 2021 at 16:00)</a>:</h4>
<p>skimming through that patch, looks like it indeed introduces a new covmap version, so I guess a patch to rust will be needed to support that.</p>



<a name="222011742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20branch%20coverage/near/222011742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/llvm.20branch.20coverage.html#222011742">(Jan 07 2021 at 22:36)</a>:</h4>
<p>Yep, there's an issue already: <a href="https://github.com/rust-lang/rust/issues/79649">https://github.com/rust-lang/rust/issues/79649</a></p>
<p>But from what I can tell, this isn't implemented in a stable build of LLVM yet, and when it is, I assume it will be LLVM 13 or later. Rust is still on LLVM 11. So it will be a while before this can be entertained.</p>



<a name="222059612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/llvm%20branch%20coverage/near/222059612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arpad Borsos <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/llvm.20branch.20coverage.html#222059612">(Jan 08 2021 at 11:01)</a>:</h4>
<p>awesome!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>using a newer bootstrap · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html">using a newer bootstrap</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274542011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274542011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274542011">(Mar 08 2022 at 13:44)</a>:</h4>
<p>Hi, I'm attempting a change in the std lib and I've run into a problem with the bootstrap compiler ICE-ing. I extracted the relevant parts into a separate crate and found out that it was indeed a bug in a prior version (at least up to 2022-02-26) but seems to be fixed on latest nightly.</p>
<p>Locally, rust is currently using 2022-02-22 beta build to bootstrap. How do I update that?</p>



<a name="274543496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274543496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274543496">(Mar 08 2022 at 13:55)</a>:</h4>
<p>Oh, I've found the bump-stage0 command, Trying that now</p>



<a name="274543875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274543875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274543875">(Mar 08 2022 at 13:58)</a>:</h4>
<p>The bootstrap compiler must not be nightly. For the nightly channel it is the latest beta. For the beta channel the latest stable and for the stable channel the previous stable. It is important that stable bootstraps from the previous stable and not some other version.</p>



<a name="274543895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274543895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274543895">(Mar 08 2022 at 13:59)</a>:</h4>
<p><span class="user-mention" data-user-id="396593">@Conrad Ludgate</span></p>



<a name="274544048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274544048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274544048">(Mar 08 2022 at 14:00)</a>:</h4>
<p>If the latest beta compiler still ices the fix on nightly may need to be backported to beta.</p>



<a name="274544234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274544234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274544234">(Mar 08 2022 at 14:01)</a>:</h4>
<p>Could you try to find which PR fixed it? You may be able to use <a href="https://github.com/rust-lang/cargo-bisect-rustc">https://github.com/rust-lang/cargo-bisect-rustc</a> for that.</p>



<a name="274544386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274544386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274544386">(Mar 08 2022 at 14:02)</a>:</h4>
<p>I'll look. It does seem to ICE on beta</p>



<a name="274545706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274545706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274545706">(Mar 08 2022 at 14:12)</a>:</h4>
<p>It was fixed inbetween the 2022-02-28 and 2022-03-01 builds it seems. (bisect only seems to find regressions, and not specific fixes). that said, the date range should be enough to filter through merged PRs</p>



<a name="274546701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274546701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274546701">(Mar 08 2022 at 14:20)</a>:</h4>
<p>Stab in the dark, might be <a href="https://github.com/rust-lang/rust/pull/94414">https://github.com/rust-lang/rust/pull/94414</a> that fixed it</p>



<a name="274548933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274548933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274548933">(Mar 08 2022 at 14:36)</a>:</h4>
<p>Thanks for pointing me to that PR! I will probably need to apply the same change to the alternative codegen backend for rustc I wrote. As for your specific case I think you will have to wait until the next beta branch. If that PR is indeed responsible for fixing it, the ICE can only happen when using unstable features. If you can't work around it using eg a different version of your case gated behind <code>#[cfg(bootstrap)]</code> you may ask for it to be backported anyway. No guarantee that it will be accepted though.</p>



<a name="274549613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274549613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274549613">(Mar 08 2022 at 14:41)</a>:</h4>
<p>I'm ok waiting. At least I know it's not my fault <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> I guess it's 4-5 weeks until the next beta is cut?</p>



<a name="274551501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/using%20a%20newer%20bootstrap/near/274551501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/using.20a.20newer.20bootstrap.html#274551501">(Mar 08 2022 at 14:55)</a>:</h4>
<p>april 5th I believe: <a href="https://forge.rust-lang.org/#no-tools-breakage-week">https://forge.rust-lang.org/#no-tools-breakage-week</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
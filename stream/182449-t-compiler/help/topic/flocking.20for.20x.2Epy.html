<html>
<head><meta charset="utf-8"><title>flocking for x.py · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html">flocking for x.py</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260719962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260719962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260719962">(Nov 08 2021 at 21:15)</a>:</h4>
<p>when using RA, I regularly have to recompile with it running x.py check on save conflicts with my manual x.py test runs. I heard that there may be a global flock for x.py build/check/test invocations? I cant find the pr, does anyone know the status of that?</p>



<a name="260720108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720108">(Nov 08 2021 at 21:16)</a>:</h4>
<p><span class="user-mention" data-user-id="257428">@Gus Wynn</span> <a href="https://github.com/rust-lang/rust/pull/88310">https://github.com/rust-lang/rust/pull/88310</a></p>



<a name="260720125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720125">(Nov 08 2021 at 21:16)</a>:</h4>
<p>I haven't heard from the author in a few weeks, you could probably take over the PR if you're interested</p>



<a name="260720129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720129">(Nov 08 2021 at 21:16)</a>:</h4>
<p>I tried so many search terms and couldnt find it!</p>



<a name="260720176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720176">(Nov 08 2021 at 21:17)</a>:</h4>
<p>I went to rust-lang/rust/pulls -&gt; filter by A-rustbuild -&gt; Ctrl+F lock</p>



<a name="260720180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720180">(Nov 08 2021 at 21:17)</a>:</h4>
<p>did we resolve the "too many flock impls" problem?</p>



<a name="260720190"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720190" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720190">(Nov 08 2021 at 21:17)</a>:</h4>
<p>Lol nope</p>



<a name="260720223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720223">(Nov 08 2021 at 21:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> suggested just using sqlite3 for locking lol</p>



<a name="260720313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720313">(Nov 08 2021 at 21:18)</a>:</h4>
<p>How much do I want to just factor out cargo's FileLock impl.....seems annoying to setup a supported crate</p>



<a name="260720378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720378">(Nov 08 2021 at 21:19)</a>:</h4>
<p>maybe we are at "something is better than nothing" stage and improving/consolidating later could help....we could even put this behind a config.toml flag to opt in</p>



<a name="260720382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720382">(Nov 08 2021 at 21:19)</a>:</h4>
<p>I would talk to the cargo team about that, they've mentioned not wanting to maintain public crates in the past</p>



<a name="260720408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720408">(Nov 08 2021 at 21:19)</a>:</h4>
<p><span class="user-mention" data-user-id="257428">@Gus Wynn</span> I would seriously consider the sqlite thing, it's in the python standard library and everything</p>



<a name="260720436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720436">(Nov 08 2021 at 21:19)</a>:</h4>
<p>I don't want this to be behind an option though or no one will know about it</p>



<a name="260720549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720549">(Nov 08 2021 at 21:20)</a>:</h4>
<p>oh to do it in the python before we build and shell out to the rust bootstrap code?</p>



<a name="260720605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720605">(Nov 08 2021 at 21:21)</a>:</h4>
<p>Yeah, it needs it anyway to prevent downloads overwriting each other</p>



<a name="260720778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260720778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260720778">(Nov 08 2021 at 21:22)</a>:</h4>
<p>interesting, ill see if I can find time</p>



<a name="260754578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260754578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260754578">(Nov 09 2021 at 05:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257428">Gus Wynn</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/flocking.20for.20x.2Epy/near/260719962">said</a>:</p>
<blockquote>
<p>when using RA, I regularly have to recompile with it running x.py check on save conflicts with my manual x.py test runs. I heard that there may be a global flock for x.py build/check/test invocations? I cant find the pr, does anyone know the status of that?</p>
</blockquote>
<p>This has been bothering me too, but I didn't realize there was a solution!</p>



<a name="260823573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260823573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260823573">(Nov 09 2021 at 16:35)</a>:</h4>
<p>TIL “flocking” is an abbreviation for file locking</p>



<a name="260826909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260826909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260826909">(Nov 09 2021 at 17:04)</a>:</h4>
<p>flock(2)ing</p>



<a name="260854833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/flocking%20for%20x.py/near/260854833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/flocking.20for.20x.2Epy.html#260854833">(Nov 09 2021 at 20:19)</a>:</h4>
<p>No birds involved ;)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
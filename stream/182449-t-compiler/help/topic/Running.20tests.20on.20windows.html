<html>
<head><meta charset="utf-8"><title>Running tests on windows · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html">Running tests on windows</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250045430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250045430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250045430">(Aug 19 2021 at 20:34)</a>:</h4>
<p>What is the intended way to get run-make-fulldeps to work on msvc windows?</p>



<a name="250045568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250045568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250045568">(Aug 19 2021 at 20:36)</a>:</h4>
<p>I'm trying to run it from the tools command prompt, which fails due to lots of missing unix commands. They'd be available in git bash, but that would give me a mingw build.</p>



<a name="250045909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250045909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250045909">(Aug 19 2021 at 20:39)</a>:</h4>
<p>I think the way CI does it is by installing a bunch of mingw tools so they're available in cmd.exe? I'd have to look at the CI scripts</p>



<a name="250046193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250046193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250046193">(Aug 19 2021 at 20:41)</a>:</h4>
<p>Yea, I normally just put the mingw stuff in my PATH.  You can also run <code>x.py</code> from an msys environment, and set the build target to msvc.</p>



<a name="250051849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250051849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250051849">(Aug 19 2021 at 21:29)</a>:</h4>
<p>Running from msys environment makes it fail in new and exciting ways. <code>/usr/bin/sh: -c: line 0: unexpected EOF while looking for matching "</code></p>



<a name="250106879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250106879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250106879">(Aug 20 2021 at 11:38)</a>:</h4>
<p>Interesting. I usually work on windows-gnu targets from under MSYS2, and occasionally run MSVC testing, and usually it "just works" and amounts to switching to an MSVC target for x.py.</p>



<a name="250150647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250150647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250150647">(Aug 20 2021 at 17:50)</a>:</h4>
<p>Yay, I got it to work under msys2. Not sure what went wrong before, but with a clean msys2 setup and using the packages from <a href="https://github.com/rust-lang/rust/blob/master/README.md#mingw">https://github.com/rust-lang/rust/blob/master/README.md#mingw</a> it worked.</p>



<a name="250151224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Running%20tests%20on%20windows/near/250151224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Running.20tests.20on.20windows.html#250151224">(Aug 20 2021 at 17:56)</a>:</h4>
<blockquote>
<p>MSYS2 can be used to easily build Rust on Windows:</p>
</blockquote>
<p><em>press X to doubt</em></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
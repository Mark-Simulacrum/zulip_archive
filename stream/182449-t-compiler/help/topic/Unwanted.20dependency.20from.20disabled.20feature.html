<html>
<head><meta charset="utf-8"><title>Unwanted dependency from disabled feature · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html">Unwanted dependency from disabled feature</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265814906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265814906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265814906">(Dec 22 2021 at 15:08)</a>:</h4>
<p>In a PR updating the <code>chalk</code> version, I'm getting an unwanted dependency pulled in. If someone could take a look at the convo here, it'd be hugely appreciated! <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span>   <a href="https://github.com/rust-lang/rust/pull/92167#discussion_r773432638">https://github.com/rust-lang/rust/pull/92167#discussion_r773432638</a> (cc <span class="user-mention" data-user-id="232957">@Jack Huey</span>)</p>



<a name="265816385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265816385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265816385">(Dec 22 2021 at 15:23)</a>:</h4>
<p>Hm... interesting <a href="https://doc.rust-lang.org/cargo/reference/features.html#dependency-features">note in the Cargo book</a>: </p>
<blockquote>
<p>Note: This may not ensure the default features are disabled. If another dependency includes flate2 without specifying default-features = false, then the default features will be enabled. See feature unification below for more details.</p>
</blockquote>



<a name="265817596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265817596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265817596">(Dec 22 2021 at 15:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code>❯     cargo tree -f &quot;{p} {f}&quot; | grep chalk
│   │   │   ├── chalk-ir v0.75.0
│   │   │   │   ├── chalk-derive v0.75.0 (proc-macro)
    │   │   │   ├── chalk-engine v0.75.0
    │   │   │   │   ├── chalk-derive v0.75.0 (proc-macro)  (*)
    │   │   │   │   ├── chalk-ir v0.75.0  (*)
    │   │   │   │   ├── chalk-solve v0.75.0 default,tracing-full,tracing-subscriber,tracing-tree
    │   │   │   │   │   ├── chalk-derive v0.75.0 (proc-macro)  (*)
    │   │   │   │   │   ├── chalk-ir v0.75.0  (*)
    │   │   │   ├── chalk-ir v0.75.0  (*)
    │   │   │   ├── chalk-solve v0.75.0 default,tracing-full,tracing-subscriber,tracing-tree (*)
</code></pre></div>
<p>Grrr, I thought I'd disabled <code>tracing-full</code> <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="265817623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265817623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265817623">(Dec 22 2021 at 15:34)</a>:</h4>
<p>Wait cargo tree can show features ?!?</p>



<a name="265817642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265817642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265817642">(Dec 22 2021 at 15:34)</a>:</h4>
<p>Ahhh I've been looking for this for ages</p>



<a name="265817652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265817652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265817652">(Dec 22 2021 at 15:34)</a>:</h4>
<p>haha nice</p>



<a name="265817685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265817685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265817685">(Dec 22 2021 at 15:35)</a>:</h4>
<p>never used cargo tree b4. glad I could help <span aria-label="innocent" class="emoji emoji-1f607" role="img" title="innocent">:innocent:</span></p>



<a name="265818212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265818212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265818212">(Dec 22 2021 at 15:40)</a>:</h4>
<p>I've got default features disabled everywhere, and the offending version is still pulled in...</p>
<div class="codehilite"><pre><span></span><code>❯  rg --glob=*.toml chalk
compiler/rustc_middle/Cargo.toml:32:1:chalk-ir = { version = &quot;0.75.0&quot;, default-features = false }
compiler/rustc_traits/Cargo.toml:15:1:chalk-ir = { version = &quot;0.75.0&quot;, default-features = false }
compiler/rustc_traits/Cargo.toml:16:1:chalk-engine = { version = &quot;0.75.0&quot;, default-features = false }
compiler/rustc_traits/Cargo.toml:17:1:chalk-solve = { version = &quot;0.75.0&quot;, default-features = false }
</code></pre></div>



<a name="265818268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265818268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265818268">(Dec 22 2021 at 15:40)</a>:</h4>
<p><code>librustdoc</code> uses version 0.1.9...</p>



<a name="265818911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265818911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265818911">(Dec 22 2021 at 15:45)</a>:</h4>
<p>why is rustdoc using chalk at all?</p>



<a name="265818982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265818982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265818982">(Dec 22 2021 at 15:46)</a>:</h4>
<p>it's not</p>



<a name="265818988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265818988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265818988">(Dec 22 2021 at 15:46)</a>:</h4>
<p>it's using <code>tracing-tree</code></p>



<a name="265818998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265818998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265818998">(Dec 22 2021 at 15:46)</a>:</h4>
<p>ahh, yeah that would do it</p>



<a name="265819009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819009">(Dec 22 2021 at 15:46)</a>:</h4>
<p><code>tracing tree</code> v0.2.0 is the dependency we'd like to avoid bringing in</p>



<a name="265819016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819016">(Dec 22 2021 at 15:46)</a>:</h4>
<p>feel free to bump the version in <code>src/librustdoc/Cargo.toml</code></p>



<a name="265819122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819122">(Dec 22 2021 at 15:47)</a>:</h4>
<p>ah okay thanks. that's probably acceptable</p>



<a name="265819482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819482">(Dec 22 2021 at 15:50)</a>:</h4>
<p>Grr. Both 0.1.9 and 0.2.0 are still in the lock file...</p>



<a name="265819511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819511">(Dec 22 2021 at 15:51)</a>:</h4>
<p><span class="user-mention" data-user-id="316352">@pierwill</span> fwiw, I think the issue is that <code>chalk-engine</code>'s default features enable chalk-solve's default features:</p>
<div class="codehilite"><pre><span></span><code>│       ├── chalk-solve feature &quot;default&quot;
│       │   └── chalk-engine v0.75.0
│       │       └── chalk-engine feature &quot;default&quot;
│       │           └── rustc_traits v0.0.0 (/home/jnelson/src/rust/compiler/rustc_traits) (*)
</code></pre></div>



<a name="265819529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819529">(Dec 22 2021 at 15:51)</a>:</h4>
<p><span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="265819680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819680">(Dec 22 2021 at 15:52)</a>:</h4>
<p>Yes, but doing <code>chalk-engine = { version = "0.75.0", default-features = false }</code> doesn't help!</p>



<a name="265819760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265819760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265819760">(Dec 22 2021 at 15:53)</a>:</h4>
<p>Very frustrating</p>



<a name="265820127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820127">(Dec 22 2021 at 15:56)</a>:</h4>
<p><code>chalk-engine</code> unconditionally enables the default features in <code>chalk-solve</code>: <a href="https://docs.rs/crate/chalk-engine/latest/source/Cargo.toml.orig">https://docs.rs/crate/chalk-engine/latest/source/Cargo.toml.orig</a></p>



<a name="265820153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820153">(Dec 22 2021 at 15:56)</a>:</h4>
<p>so <span class="user-mention" data-user-id="232957">@Jack Huey</span> probably needs to publish a new version that makes the features conditional</p>



<a name="265820183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820183">(Dec 22 2021 at 15:57)</a>:</h4>
<p>or we could figure out a way to get rid of tracing-tree 0.1</p>



<a name="265820254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820254">(Dec 22 2021 at 15:57)</a>:</h4>
<p>Okay, thanks <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> ! I'll discuss it with <span class="user-mention" data-user-id="232957">@Jack Huey</span></p>



<a name="265820310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820310">(Dec 22 2021 at 15:58)</a>:</h4>
<p>tracing-tree 0.1 only has a couple dependencies so should be much easier to bump:</p>
<div class="codehilite"><pre><span></span><code>$ cargo tree -i tracing-tree:0.1.9
tracing-tree v0.1.9
├── rustc_driver v0.0.0 (/home/jnelson/src/rust/compiler/rustc_driver)
│   └── rustc-main v0.0.0 (/home/jnelson/src/rust/compiler/rustc)
└── rustdoc v0.0.0 (/home/jnelson/src/rust/src/librustdoc)
    ├── error_index_generator v0.0.0 (/home/jnelson/src/rust/src/tools/error_index_generator)
    └── rustdoc-tool v0.0.0 (/home/jnelson/src/rust/src/tools/rustdoc)
</code></pre></div>



<a name="265820364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820364">(Dec 22 2021 at 15:58)</a>:</h4>
<p>/me needs to get around to removing <code>error_index_generator</code>'s dependency on rustdoc</p>



<a name="265820391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820391">(Dec 22 2021 at 15:58)</a>:</h4>
<p>Hm.. not sure how I'd go about doing that...</p>



<a name="265820433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820433">(Dec 22 2021 at 15:59)</a>:</h4>
<p>just update the versions in cargo.toml</p>



<a name="265820471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820471">(Dec 22 2021 at 15:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code>$ fd Cargo.toml | xargs rg tracing-tree
src/librustdoc/Cargo.toml
22:tracing-tree = &quot;0.1.9&quot;

compiler/rustc_driver/Cargo.toml
14:tracing-tree = &quot;0.1.9&quot;
</code></pre></div>



<a name="265820690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820690">(Dec 22 2021 at 16:00)</a>:</h4>
<p>Ah!</p>



<a name="265820710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820710">(Dec 22 2021 at 16:00)</a>:</h4>
<p>wait...</p>



<a name="265820793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265820793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265820793">(Dec 22 2021 at 16:01)</a>:</h4>
<p>that worked! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="265822054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265822054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265822054">(Dec 22 2021 at 16:11)</a>:</h4>
<p>But nothing is ever easy lol </p>
<div class="codehilite"><pre><span></span><code>error[E0277]: the trait bound `HierarchicalLayer&lt;fn() -&gt; std::io::Stderr {stderr}&gt;: __tracing_subscriber_Layer&lt;Layered&lt;EnvFilter, tracing_subscriber::Registry&gt;&gt;` is not satisfied
    --&gt; compiler/rustc_driver/src/lib.rs:1303:80
     |
1303 |     let subscriber = tracing_subscriber::Registry::default().with(filter).with(layer);
     |                                                                           ---- ^^^^^ the trait `__tracing_subscriber_Layer&lt;Layered&lt;EnvFilter, tracing_subscriber::Registry&gt;&gt;` is not implemented for `HierarchicalLayer&lt;fn() -&gt; std::io::Stderr {stderr}&gt;`
     |                                                                           |
     |                                                                           required by a bound introduced by this call
     |
note: required by a bound in `tracing_subscriber::layer::SubscriberExt::with`
    --&gt; /Users/wpierce/.cargo/registry/src/github.com-1ecc6299db9ec823/tracing-subscriber-0.2.16/src/layer.rs:524:12
     |
524  |         L: Layer&lt;Self&gt;,
     |            ^^^^^^^^^^^ required by this bound in `tracing_subscriber::layer::SubscriberExt::with`
</code></pre></div>



<a name="265822115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265822115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265822115">(Dec 22 2021 at 16:12)</a>:</h4>
<p>Probably need to update tracing-subscriber too</p>



<a name="265822394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265822394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265822394">(Dec 22 2021 at 16:14)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="265824900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Unwanted%20dependency%20from%20disabled%20feature/near/265824900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Unwanted.20dependency.20from.20disabled.20feature.html#265824900">(Dec 22 2021 at 16:38)</a>:</h4>
<p>I think a version bump for these is probably fine. But we should update chalk-engine to make those optional.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Rustc/Cargo 1.45.2 in OpenWrt · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html">Rustc/Cargo 1.45.2 in OpenWrt</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="207743635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207743635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207743635">(Aug 22 2020 at 21:53)</a>:</h4>
<p>Full log below.  Failed Invalid Memory Segment</p>
<p><a href="https://pastebin.com/b8kLdpNR">https://pastebin.com/b8kLdpNR</a></p>



<a name="207745312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207745312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207745312">(Aug 22 2020 at 22:45)</a>:</h4>
<blockquote>
<p>error: could not compile <code>rustc_middle</code>. </p>
</blockquote>
<p>Try again with -j2 instead of -j8</p>



<a name="207745319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207745319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207745319">(Aug 22 2020 at 22:45)</a>:</h4>
<p>Rustc_middle uses outrageous amounts of memory</p>



<a name="207745328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207745328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207745328">(Aug 22 2020 at 22:45)</a>:</h4>
<p><span class="user-mention" data-user-id="332271">@Grommish</span> ^</p>



<a name="207752382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207752382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207752382">(Aug 23 2020 at 02:42)</a>:</h4>
<p>I am building rustc/cargo inside of OpenWrt.  I invoked _that_ run with a make -j1 V=sc, so is there a CLI way to set it via ./configure?  Is it because I have --enable-parallel-compiler set?  Buildbox is a i7-3rd gen, 28GB RAM and a 2GB SWAP...  Thank you so much for all the help you've provided <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> !</p>



<a name="207752399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207752399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207752399">(Aug 23 2020 at 02:43)</a>:</h4>
<p>I don't know how to set it with configure, but in config.toml it would be <code>codegen-units = 2</code> I think</p>



<a name="207752445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207752445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207752445">(Aug 23 2020 at 02:44)</a>:</h4>
<p>I can pass a --set to the toml to do that..  I think the musl issue was MY fault, or rather, OpenWrt's fault.. I've got that settle out, thank goodness</p>



<a name="207756256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207756256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207756256">(Aug 23 2020 at 04:46)</a>:</h4>
<p>So, I removed the --enable-parallel-compiler, and it finished that stage, but errored later one.  What is the accepted way to ask about it.. new topic or continue this one? Sorry, new here :)</p>



<a name="207756770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207756770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207756770">(Aug 23 2020 at 05:06)</a>:</h4>
<p>staying in this thread is fine</p>



<a name="207756772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207756772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207756772">(Aug 23 2020 at 05:06)</a>:</h4>
<p>oh yeah I missed that you were using the parallel compiler, it isn't tested at all haha</p>



<a name="207756781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207756781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207756781">(Aug 23 2020 at 05:07)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/75760">https://github.com/rust-lang/rust/issues/75760</a></p>



<a name="207757901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207757901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207757901">(Aug 23 2020 at 05:49)</a>:</h4>
<p>Here is the build log as it relates to rust.  It gets thru the stage0, but then fails later on</p>
<p>thread 'main' panicked at 'could not canonicalize /home/grommish/openwrt/build_dir/hostpkg/.cargo', src/bootstrap/install.rs:73:48</p>
<p><a href="/user_uploads/4715/DJvorRv-xAGljAaUI5qEKOS9/rustfail.log">rustfail.log</a> </p>
<p>I appreciate all the help!</p>
<p>Edit: if it wasn't apparent, I actually don't know RUST at all.. I am working to add support for a package that requires it.  So I apologize ahead of time for my ignorance is what I ask (or fail to mention!)</p>



<a name="207758609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207758609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207758609">(Aug 23 2020 at 06:13)</a>:</h4>
<p>Ok, hold on, I think it's just not finding the stuff.. grrr</p>



<a name="207775272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207775272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207775272">(Aug 23 2020 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> I appreciate all the help.. i did finally get it <em>mostly</em> building.  It seems to compile for the HOST and TARGET toolchains, and pleases the following: rustc  rustdoc  rust-gdb  rust-gdbgui  rust-lldb where I need them to go.</p>
<p>But, cargo isn't generated.  Am I missing something?  I see that it does pull down a stage0 cargo that is -V'ed at 1.44, which I'm assuming should be used to build the 1.45.2, but is it an option somewhere that I'm not selecting?</p>
<p>I call ./configure with the following args:     --prefix=$(HOST_CARGO_DIR)  --target=$(RUSTC_TARGET_ARCH) --enable-debug --disable-docs --disable-compiler-docs --enable-ccache --python=$(PYTHON) --musl-root-$(ARCH)=$(TOOLCHAIN_DIR), then I just call a straight x.py build and x.py install.</p>
<p>Any suggestions?</p>



<a name="207775787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207775787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207775787">(Aug 23 2020 at 14:22)</a>:</h4>
<p>try <code>--set extended=true</code></p>



<a name="207775791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207775791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207775791">(Aug 23 2020 at 14:23)</a>:</h4>
<p>this is all documented in <code>config.toml</code> btw</p>



<a name="207775800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207775800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207775800">(Aug 23 2020 at 14:23)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/master/config.toml.example#L200">https://github.com/rust-lang/rust/blob/master/config.toml.example#L200</a></p>



<a name="207775885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207775885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207775885">(Aug 23 2020 at 14:25)</a>:</h4>
<p>I am sorry for the questions.  Thank you for assisting me thru this and for the references</p>



<a name="207775949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207775949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207775949">(Aug 23 2020 at 14:27)</a>:</h4>
<p>no problem :) although I do wonder why you're building from source if you're not making any changes</p>



<a name="207776061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776061">(Aug 23 2020 at 14:30)</a>:</h4>
<p>Because In order to incorporate it into OpenWrt, they really dislike the rustup precompiled.. and although the mrustc is available, it isn't very good and a huge footprint<br>
In particular, <a href="https://github.com/rust-lang/rust/issues/48707">https://github.com/rust-lang/rust/issues/48707</a></p>



<a name="207776076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776076">(Aug 23 2020 at 14:30)</a>:</h4>
<p>I had rustup working fine, but then they brought that up :) and the best I can do is build from source (with the acknowledgemnt it uses a precompiled to make the new one.. i know, i know)</p>



<a name="207776096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776096">(Aug 23 2020 at 14:31)</a>:</h4>
<p>Which is why I'm also having to use all cli args instead of editing config.toml.. its overwritten each run from the checkout</p>



<a name="207776149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776149">(Aug 23 2020 at 14:32)</a>:</h4>
<p>But! if --enable-extended works as its supposed to, then I'll have integrated Rustc/Cargo into OpenWrt :)</p>



<a name="207776155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776155">(Aug 23 2020 at 14:33)</a>:</h4>
<p>oh boy <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="207776163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776163">(Aug 23 2020 at 14:33)</a>:</h4>
<p>I've already built Suricata5.x with it under Rustup hehe</p>



<a name="207776207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776207">(Aug 23 2020 at 14:34)</a>:</h4>
<p>I can honestly say this has been MOSTLY straight forward, considering how twisty the OpenWrt buildroot can be sometimes.. My grateful thanks to the devs who made it so</p>



<a name="207776211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207776211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207776211">(Aug 23 2020 at 14:34)</a>:</h4>
<p>and you <span class="user-mention" data-user-id="232545">@Joshua Nelson</span></p>



<a name="207781197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207781197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207781197">(Aug 23 2020 at 16:43)</a>:</h4>
<p>Oo.. So, question :) Is this a reportable bug?  <a href="https://github.com/rust-lang/rust/blob/master/src/bootstrap/dist.rs#L1219">https://github.com/rust-lang/rust/blob/master/src/bootstrap/dist.rs#L1219</a>  I'm getting errors because <a href="http://dist.rs">dist.rs</a> seems to completely ignore --prefix.. it is hard-setting /etc/bash_completion.d/cargo which is invalid for me.  And since it looks hard-coded, I'm guessing it cannot be set in either config.toml or via -- flags</p>



<a name="207781242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207781242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207781242">(Aug 23 2020 at 16:44)</a>:</h4>
<p>Also, you weren't kidding about memory hoarding.. I had to drop all the other tools but cargo to keep it from blipping out</p>



<a name="207781718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207781718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207781718">(Aug 23 2020 at 16:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="332271">Grommish</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt/near/207781197">said</a>:</p>
<blockquote>
<p>Oo.. So, question :) Is this a reportable bug?  <a href="https://github.com/rust-lang/rust/blob/master/src/bootstrap/dist.rs#L1219">https://github.com/rust-lang/rust/blob/master/src/bootstrap/dist.rs#L1219</a>  I'm getting errors because <a href="http://dist.rs">dist.rs</a> seems to completely ignore --prefix.. it is hard-setting /etc/bash_completion.d/cargo which is invalid for me.  And since it looks hard-coded, I'm guessing it cannot be set in either config.toml or via -- flags</p>
</blockquote>
<p>I would just make a PR tbh</p>



<a name="207781724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207781724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207781724">(Aug 23 2020 at 16:56)</a>:</h4>
<p>a lot of the bootstrap peculiarities are 'no one asked for different behavior before'</p>



<a name="207781733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207781733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207781733">(Aug 23 2020 at 16:57)</a>:</h4>
<p>but yeah if you're not comfortable fixing it an issue is fine, it might be closed though</p>



<a name="207781749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207781749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207781749">(Aug 23 2020 at 16:57)</a>:</h4>
<p>Understood.. I know nothing of rust programming or most programming :) I'll send in a bug report and if they fix it, great.. I just want to make sure I wasn't missing something</p>



<a name="207782393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Rustc/Cargo%201.45.2%20in%20OpenWrt/near/207782393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Rustc.2FCargo.201.2E45.2E2.20in.20OpenWrt.html#207782393">(Aug 23 2020 at 17:13)</a>:</h4>
<p>Thank you again! <a href="https://github.com/rust-lang/rust/issues/75841">https://github.com/rust-lang/rust/issues/75841</a>  We will see what happens..</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Run x.py without touching ~/.cargo · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html">Run x.py without touching ~/.cargo</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269479384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269479384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269479384">(Jan 26 2022 at 20:45)</a>:</h4>
<p>I want to do a fully self-contained build of rust. I notice that even with <code>vendor = true</code> in config.toml, a <code>$HOME/.cargo</code> is created and written to</p>



<a name="269479427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269479427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269479427">(Jan 26 2022 at 20:45)</a>:</h4>
<p>I'm probably misunderstanding what <code>vendor</code> does</p>



<a name="269479495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269479495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269479495">(Jan 26 2022 at 20:46)</a>:</h4>
<p>is there an option to keep everything in the rust source dir?</p>



<a name="269480369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269480369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269480369">(Jan 26 2022 at 20:52)</a>:</h4>
<p>You can set the <code>CARGO_HOME_DIR</code> env var I believe to use another dir than <code>~/.cargo</code>. By the way what does cargo exactly write to it when using <code>vendor</code>? I can imagine it sets up the directory structure like it would when actually using <a href="http://crates.io">crates.io</a> or git repos but not write any actual data. As for what <code>vendor</code> exactly does, it avoids downloading things from the internet.</p>



<a name="269533893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269533893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269533893">(Jan 27 2022 at 07:19)</a>:</h4>
<p><code>$CARGO_HOME </code> iirc</p>



<a name="269604918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269604918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269604918">(Jan 27 2022 at 17:13)</a>:</h4>
<p>is setting $CARGO_HOME to the source root supported?</p>



<a name="269604990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269604990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269604990">(Jan 27 2022 at 17:13)</a>:</h4>
<p>because there is also a .cargo directory when building, which I'd figure would conflict in some way</p>



<a name="269606793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Run%20x.py%20without%20touching%20~/.cargo/near/269606793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Run.20x.2Epy.20without.20touching.20~.2F.2Ecargo.html#269606793">(Jan 27 2022 at 17:25)</a>:</h4>
<p>You can create an empty directory in the source root and point <code>CARGO_HOME</code> to it.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>bootstrapping question · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html">bootstrapping question</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="211794893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211794893" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211794893">(Sep 30 2020 at 17:35)</a>:</h4>
<p>I have a bootstrapping question: When I change something in e.g. <code>rustc_middle</code>, I get two builds of rustc, stage0 artifacts and stage1 artifacts. Why is that? Since I'm just developing, couldn't I just get one build (built with the beta compiler)? Thanks!</p>



<a name="211794917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211794917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211794917">(Sep 30 2020 at 17:35)</a>:</h4>
<p>what command are you using?</p>



<a name="211795315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211795315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211795315">(Sep 30 2020 at 17:38)</a>:</h4>
<p><code>./x.py build</code></p>



<a name="211795645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211795645" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211795645">(Sep 30 2020 at 17:41)</a>:</h4>
<p>hmm, that's weird, it should only build once</p>



<a name="211795659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211795659" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211795659">(Sep 30 2020 at 17:41)</a>:</h4>
<p>are you sure it's not just building libstd?</p>



<a name="211795862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211795862" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211795862">(Sep 30 2020 at 17:42)</a>:</h4>
<p>Well, I'm doing a build right now from running <code>./x.py test</code> so I'll let you know!</p>



<a name="211795912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211795912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211795912">(Sep 30 2020 at 17:43)</a>:</h4>
<p>So far I've had:</p>
<ul>
<li>Building stage0 std artifacts (x86_64-apple-darwin -&gt; x86_64-apple-darwin)</li>
<li>Building stage0 compiler artifacts (x86_64-apple-darwin -&gt; x86_64-apple-darwin)</li>
</ul>



<a name="211798943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211798943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211798943">(Sep 30 2020 at 18:07)</a>:</h4>
<p>In this case it didn't <strong>re</strong>build rustc, but I could've sworn it rebuilt in when I modified <code>rustc_middle</code> (this time was a switch to <code>master</code>, so I'm not sure what changed)</p>



<a name="211799040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211799040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211799040">(Sep 30 2020 at 18:08)</a>:</h4>
<p>well, rebuilding libstd counts as 'stage 1 artifacts' but it shouldn't build the compiler twice unless you tell it to</p>



<a name="211799054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211799054" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211799054">(Sep 30 2020 at 18:08)</a>:</h4>
<p>the linkchecker unfortunately does require building twice, that might be it</p>



<a name="211799092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211799092" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211799092">(Sep 30 2020 at 18:09)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/76371">https://github.com/rust-lang/rust/issues/76371</a></p>



<a name="211799109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211799109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211799109">(Sep 30 2020 at 18:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/bootstrapping.20question/near/211799054">said</a>:</p>
<blockquote>
<p>the linkchecker unfortunately does require building twice, that might be it</p>
</blockquote>
<p>Hmm, why is that?</p>



<a name="211799131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211799131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211799131">(Sep 30 2020 at 18:09)</a>:</h4>
<p>(it's in the issue)</p>



<a name="211799957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211799957" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211799957">(Sep 30 2020 at 18:17)</a>:</h4>
<p>Weird, I didn't see you post the issue link... maybe Zulip glitched</p>



<a name="211802848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211802848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211802848">(Sep 30 2020 at 18:41)</a>:</h4>
<p>I just changed middle, and indeed it only built rustc once. Maybe I'm thinking of working on Rustdoc or something? <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="211802988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211802988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211802988">(Sep 30 2020 at 18:42)</a>:</h4>
<p>changing rustdoc shouldn't rebuild the compiler at all, just rustdoc</p>



<a name="211803004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211803004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211803004">(Sep 30 2020 at 18:42)</a>:</h4>
<p>changing libstd will rebuild twice though</p>



<a name="211803033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211803033" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211803033">(Sep 30 2020 at 18:43)</a>:</h4>
<p><a href="#narrow/stream/131828-t-compiler/topic/Building.20rustc.20with.20beta.20libstd">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/Building.20rustc.20with.20beta.20libstd</a></p>



<a name="211808741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211808741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211808741">(Sep 30 2020 at 19:31)</a>:</h4>
<p>Ah, maybe that's what I'm thinking of</p>



<a name="211808868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211808868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211808868">(Sep 30 2020 at 19:32)</a>:</h4>
<p>But it will only build std twice, right? So it must be something else, or my imagination <span aria-label="cloud" class="emoji emoji-2601" role="img" title="cloud">:cloud:</span></p>



<a name="211808885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211808885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211808885">(Sep 30 2020 at 19:32)</a>:</h4>
<p>right, yeah building rustc twice is very strange</p>



<a name="211808927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/bootstrapping%20question/near/211808927" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/182449-t-compiler/help/topic/bootstrapping.20question.html#211808927">(Sep 30 2020 at 19:33)</a>:</h4>
<p>that's for sure!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Compile rustc using a RUSTC_WRAPPER · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Compile.20rustc.20using.20a.20RUSTC_WRAPPER.html">Compile rustc using a RUSTC_WRAPPER</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="166980004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Compile%20rustc%20using%20a%20RUSTC_WRAPPER/near/166980004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Compile.20rustc.20using.20a.20RUSTC_WRAPPER.html#166980004">(May 31 2019 at 08:58)</a>:</h4>
<p>I'm trying to compile rustc using a RUSTC_WRAPPER, to log compiler calls and other stuff.<br>
However, while building rustc (rustc_lint, to be precise) I get errors like "used diagnostic code E0516 not registered".<br>
Can it be that I'm somehow using the wrong rustc version to compile rustc?</p>



<a name="166997000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Compile%20rustc%20using%20a%20RUSTC_WRAPPER/near/166997000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Compile.20rustc.20using.20a.20RUSTC_WRAPPER.html#166997000">(May 31 2019 at 13:32)</a>:</h4>
<p>Maybe rustc also uses <code>RUSTC_WRAPPER</code>, thus causing the rustc specific wrapper not get executed</p>



<a name="166998789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Compile%20rustc%20using%20a%20RUSTC_WRAPPER/near/166998789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Compile.20rustc.20using.20a.20RUSTC_WRAPPER.html#166998789">(May 31 2019 at 13:55)</a>:</h4>
<p>Mmm maybe, but then it should just execute what rustc put in <code>RUSTC_WRAPPER</code>, without a compiler error... I'll check</p>



<a name="167003215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Compile%20rustc%20using%20a%20RUSTC_WRAPPER/near/167003215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Compile.20rustc.20using.20a.20RUSTC_WRAPPER.html#167003215">(May 31 2019 at 14:48)</a>:</h4>
<p>I found it:  rustfmt changed the order of modules, thus <code>mod error_codes</code> was no longer the first one</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Sketching out a plan for implementing RFC 2627 · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Sketching.20out.20a.20plan.20for.20implementing.20RFC.202627.html">Sketching out a plan for implementing RFC 2627</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="174519585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Sketching%20out%20a%20plan%20for%20implementing%20RFC%202627/near/174519585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Sketching.20out.20a.20plan.20for.20implementing.20RFC.202627.html#174519585">(Aug 30 2019 at 06:40)</a>:</h4>
<p>I'm trying to investigate at least some part of the "raw-dylib" rfc. Could any one help sketch out a plan for implementing it? Currently i have some brief idea for what's needed. But i'm not really sure which logic belongs to which part of the compiler.</p>



<a name="174519600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Sketching%20out%20a%20plan%20for%20implementing%20RFC%202627/near/174519600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Sketching.20out.20a.20plan.20for.20implementing.20RFC.202627.html#174519600">(Aug 30 2019 at 06:40)</a>:</h4>
<p>Also <span class="user-mention" data-user-id="123586">@nagisa</span>  for reviewing the initial feature gate PR. <a href="https://github.com/rust-lang/rust/pull/63948" target="_blank" title="https://github.com/rust-lang/rust/pull/63948">https://github.com/rust-lang/rust/pull/63948</a></p>



<a name="174519778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Sketching%20out%20a%20plan%20for%20implementing%20RFC%202627/near/174519778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Sketching.20out.20a.20plan.20for.20implementing.20RFC.202627.html#174519778">(Aug 30 2019 at 06:43)</a>:</h4>
<p>Currently the next part should be picking up the codegen attributes. I've almost implemented it locally, by adding the necessary logic into <code>librustc_typeck/collect.rs</code>. Haven't uploaded it yet.</p>



<a name="174519880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Sketching%20out%20a%20plan%20for%20implementing%20RFC%202627/near/174519880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Sketching.20out.20a.20plan.20for.20implementing.20RFC.202627.html#174519880">(Aug 30 2019 at 06:45)</a>:</h4>
<p>But i had a hard time trying to find out where in the compiler should i try to enforce the rules within the RFC, like "link ordinal has to be used in a RawDylib foreign module, or raise an error". The <code>collect.rs</code> file mentioned above doesn't seems like a good fit.</p>



<a name="174519970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Sketching%20out%20a%20plan%20for%20implementing%20RFC%202627/near/174519970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Sketching.20out.20a.20plan.20for.20implementing.20RFC.202627.html#174519970">(Aug 30 2019 at 06:47)</a>:</h4>
<p>And i think a design and some interface change might be needed to ask the codegen to do the right thing for the raw-dylib rfc? I'm not sure how would that work. Not familiar with the codegen part at all :(</p>



<a name="174562321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Sketching%20out%20a%20plan%20for%20implementing%20RFC%202627/near/174562321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Sketching.20out.20a.20plan.20for.20implementing.20RFC.202627.html#174562321">(Aug 30 2019 at 16:53)</a>:</h4>
<p>not really in a position to help with this atm.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Issue 22565 · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Issue.2022565.html">Issue 22565</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="215870647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Issue%2022565/near/215870647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> CraftSpider <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Issue.2022565.html#215870647">(Nov 06 2020 at 16:35)</a>:</h4>
<p>Originally asked on discord, moved here by suggestion:<br>
I was looking into <a href="https://github.com/rust-lang/rust/issues/22565">https://github.com/rust-lang/rust/issues/22565</a><br>
Confirmed it still occurs on latest nightly, made a UI test that should succeed later. Looked at traceback. The 'naive' solution of converting the bugs into errors 'works' in that it causes a compile error, but it doesn't solve the UI test. Playing around with it a bit, it seems to be because build or check don't ICE, because the ICE is in codegen, not any of the earlier steps. So the UI compiles successfully without error, but build-pass fails because it can't codegen.<br>
So, I'm not sure where to go from here. I feel that this should be checked earlier than codegen, to allow it to be checked, and fail early, etc. But I'm not familiar enough with the compiler to know where that would go, or how to add that.  Does anyone have advice / help?<br>
Further clarification:<br>
With nothing / just an ERROR annotation, the compilation succeeds (test failure)<br>
With build-pass codegen fails (test failure)<br>
With check-pass it succeeds (test success), but only because it doesn't trigger the issue, not doing codegen.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
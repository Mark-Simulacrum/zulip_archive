<html>
<head><meta charset="utf-8"><title>rustc asan · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/rustc.20asan.html">rustc asan</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="213497459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc%20asan/near/213497459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/rustc.20asan.html#213497459">(Oct 15 2020 at 22:48)</a>:</h4>
<p>Has anyone tried running <code>-Zsanitizer=address</code> on rustc itself?  The resulting executable always fails with <code>unable to unmap</code> which isn't very helpful.</p>



<a name="213559445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc%20asan/near/213559445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/rustc.20asan.html#213559445">(Oct 16 2020 at 13:27)</a>:</h4>
<p>env ASAN_OPTIONS=use_sigaltstack=0 might help</p>



<a name="213710688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc%20asan/near/213710688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/rustc.20asan.html#213710688">(Oct 18 2020 at 15:13)</a>:</h4>
<p>Thanks @tm, that helped!  Unfortunately I can't repro the crash with asan running, though. <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="237863229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc%20asan/near/237863229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lander Brandt <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/rustc.20asan.html#237863229">(May 07 2021 at 17:45)</a>:</h4>
<p>Hi folks, I'm trying to get ASAN working for Windows and realized that <code>librustc-dev_rt.asan.a</code> was not built. Should this have been built as part of <code>python x.py build</code>?</p>



<a name="237867547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/rustc%20asan/near/237867547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/rustc.20asan.html#237867547">(May 07 2021 at 18:15)</a>:</h4>
<p>Bootstrap is not building ASAN runtime on Windows currently. Take a look at <code>supported_sanitizers</code> in <code>src/bootstrap/native.rs</code> if you would like to change that.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
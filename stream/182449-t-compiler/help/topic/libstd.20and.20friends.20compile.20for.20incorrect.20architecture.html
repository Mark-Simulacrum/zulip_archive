<html>
<head><meta charset="utf-8"><title>libstd and friends compile for incorrect architecture · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/libstd.20and.20friends.20compile.20for.20incorrect.20architecture.html">libstd and friends compile for incorrect architecture</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="201220578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/libstd%20and%20friends%20compile%20for%20incorrect%20architecture/near/201220578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> aspen <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/libstd.20and.20friends.20compile.20for.20incorrect.20architecture.html#201220578">(Jun 18 2020 at 01:43)</a>:</h4>
<p>i thought llvm_target would decide that, but nope, <code>compiled for unknown-arm64 but trying to link with ios-arm64e</code><br>
<a href="https://github.com/Crabapple-iOS/rust/blob/crabapple/src/librustc_target/spec/arm64e_apple_ios.rs">https://github.com/Crabapple-iOS/rust/blob/crabapple/src/librustc_target/spec/arm64e_apple_ios.rs</a></p>



<a name="201220709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/libstd%20and%20friends%20compile%20for%20incorrect%20architecture/near/201220709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> aspen <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/libstd.20and.20friends.20compile.20for.20incorrect.20architecture.html#201220709">(Jun 18 2020 at 01:46)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error: linking with `/Users/wlm/Builds/llvm-apple/bin/clang` failed: exit code: 1
  |
  = note: &quot;/Users/wlm/Builds/llvm-apple/bin/clang&quot; &quot;-arch&quot; &quot;arm64e&quot; &quot;-isysroot&quot; &quot;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.5.sdk&quot; &quot;-Wl,-syslibroot&quot; &quot;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS13.5.sdk&quot; &quot;-L&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2/lib/rustlib/arm64-apple-ios-armv83/lib&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.0.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.1.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.10.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.11.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.12.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.13.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.14.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.15.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.2.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.3.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.4.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.5.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.6.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.7.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.8.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.9.rcgu.o&quot; &quot;-o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/libstd-0f013c4469e37115.dylib&quot; &quot;-Wl,-exported_symbols_list,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/list&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.25636yboi1jshd4i.rcgu.o&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.n3e17uxrkfvgews.rcgu.o&quot; &quot;-Wl,-dead_strip&quot; &quot;-dynamiclib&quot; &quot;-Wl,-dylib&quot; &quot;-Wl,-install_name&quot; &quot;-Wl,@rpath/libstd-0f013c4469e37115.dylib&quot; &quot;-nodefaultlibs&quot; &quot;-L&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps&quot; &quot;-L&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/release/deps&quot; &quot;-L&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/build/compiler_builtins-837a193a3f848474/out&quot; &quot;-L&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/build/backtrace-sys-271d59547ce8be3d/out&quot; &quot;-L&quot; &quot;/Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2/lib/rustlib/arm64-apple-ios-armv83/lib&quot; &quot;-lSystem&quot; &quot;-lobjc&quot; &quot;-framework&quot; &quot;Security&quot; &quot;-framework&quot; &quot;Foundation&quot; &quot;-lresolv&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libpanic_unwind-f0d495f0f3f8c656.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libhashbrown-c6f55a6b7853fe15.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/librustc_std_workspace_alloc-a8baf5de741b3891.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libbacktrace-6cb76458ec873119.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libbacktrace_sys-361f80a36ce52eca.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/librustc_demangle-edf2b74550373e1c.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libunwind-4037863fe650bcd2.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libcfg_if-936c749435b510f5.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/liblibc-90ea993fb158ae77.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/liballoc-3ea647848da850be.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/librustc_std_workspace_core-c8a44757347062b8.rlib&quot; &quot;-Wl,-force_load&quot; &quot;-Wl,/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libcore-1c11f7240ed117a4.rlib&quot; &quot;/var/folders/tp/nyvf4xbj3yq_rfth2dvm0bhr0000gn/T/rustcgCQ8Ef/libcompiler_builtins-58939d709e21dd6a.rlib&quot; &quot;-lc&quot; &quot;-lm&quot; &quot;-Wl,-rpath,@loader_path/../lib&quot;
  = note: ld: warning: ignoring file /Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.0.rcgu.o, building for iOS-arm64e but attempting to link with file built for unknown-arm64
          ld: warning: ignoring file /Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.1.rcgu.o, building for iOS-arm64e but attempting to link with file built for unknown-arm64
          ld: warning: ignoring file /Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.10.rcgu.o, building for iOS-arm64e but attempting to link with file built for unknown-arm64
          ld: warning: ignoring file /Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.11.rcgu.o, building for iOS-arm64e but attempting to link with file built for unknown-arm64
          ld: warning: ignoring file /Users/wlm/Code/rust/build/x86_64-apple-darwin/stage2-std/arm64-apple-ios-armv83/release/deps/std-0f013c4469e37115.std.3x8dl8c3-cgu.12.rcgu.o, building for iOS-arm64e but attempting to link with file built for unknown-arm64
...
</code></pre></div>



<a name="201220814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/libstd%20and%20friends%20compile%20for%20incorrect%20architecture/near/201220814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> aspen <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/libstd.20and.20friends.20compile.20for.20incorrect.20architecture.html#201220814">(Jun 18 2020 at 01:49)</a>:</h4>
<p>the object files aren't being compiled to arm64e for some reason</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
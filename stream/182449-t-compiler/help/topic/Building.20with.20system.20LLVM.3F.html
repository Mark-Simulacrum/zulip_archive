<html>
<head><meta charset="utf-8"><title>Building with system LLVM? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html">Building with system LLVM?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="193672164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193672164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193672164">(Apr 11 2020 at 18:07)</a>:</h4>
<p>IIRC there used to be a line in <code>config.toml</code> for using system LLVM instead of building from source, but I can't find it now (it's been a while since last time I built rustc). Am I misremembering, or is this feature gone now? I was using this for faster builds when building from scratch.</p>



<a name="193672322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193672322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193672322">(Apr 11 2020 at 18:10)</a>:</h4>
<p>It's <code>llvm-config</code></p>



<a name="193673866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193673866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193673866">(Apr 11 2020 at 18:48)</a>:</h4>
<p>Thanks!</p>



<a name="193673882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193673882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193673882">(Apr 11 2020 at 18:49)</a>:</h4>
<p>Hmm, it's still building LLVM for some reason. Do I need to set any other fields?</p>



<a name="193673961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193673961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193673961">(Apr 11 2020 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="119169">@osa1</span> what does your <code>config.toml</code> look like?</p>



<a name="193674342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674342">(Apr 11 2020 at 18:58)</a>:</h4>
<p>Ah, sorry, I modified <code>config.toml.example</code>, not <code>config.toml</code>. It's working now, thanks.</p>



<a name="193674441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674441">(Apr 11 2020 at 19:00)</a>:</h4>
<p>heh</p>



<a name="193674836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674836">(Apr 11 2020 at 19:11)</a>:</h4>
<p>OK so not really rustc related, but if anyone know where can I find a pre-built FileCheck executable that'd be helpful. I'm looking at 7.0 and 10.0 tarballs, none of them includes this.</p>



<a name="193674887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674887">(Apr 11 2020 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="119169">@osa1</span> what distro? I was looking at Ubuntu the other day and it has everything, just split into a dozen packages</p>



<a name="193674899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674899" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674899">(Apr 11 2020 at 19:12)</a>:</h4>
<p>Ubuntu 18.04. I'm currently using the 7.0 tarball from the LLVM web site.</p>



<a name="193674903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674903">(Apr 11 2020 at 19:13)</a>:</h4>
<p>Ubuntu has packages tho</p>



<a name="193674912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674912">(Apr 11 2020 at 19:13)</a>:</h4>
<p>we use them on CI</p>



<a name="193674927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674927">(Apr 11 2020 at 19:13)</a>:</h4>
<p>/me knows because he fought them yesterday</p>



<a name="193674930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674930">(Apr 11 2020 at 19:13)</a>:</h4>
<p><span class="user-mention" data-user-id="119169">@osa1</span> just <code>apt-get install llvm-7-tools</code></p>



<a name="193674987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674987">(Apr 11 2020 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="119169">@osa1</span> but also I'd suggest using LLVM 9 nowadays anyway</p>



<a name="193674991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193674991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193674991">(Apr 11 2020 at 19:15)</a>:</h4>
<p>which would mean <code>llvm-9-dev</code></p>



<a name="193675017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193675017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193675017">(Apr 11 2020 at 19:15)</a>:</h4>
<p>(for some reason they flipped the dependency edge <a href="https://github.com/rust-lang/rust/pull/70989#issuecomment-612218508" title="https://github.com/rust-lang/rust/pull/70989#issuecomment-612218508">https://github.com/rust-lang/rust/pull/70989#issuecomment-612218508</a>)</p>



<a name="193675070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193675070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193675070">(Apr 11 2020 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="119169">@osa1</span> <a href="https://packages.ubuntu.com/search?mode=filename&amp;suite=bionic-updates&amp;section=all&amp;arch=any&amp;keywords=FileCheck&amp;searchon=contents" title="https://packages.ubuntu.com/search?mode=filename&amp;suite=bionic-updates&amp;section=all&amp;arch=any&amp;keywords=FileCheck&amp;searchon=contents">https://packages.ubuntu.com/search?mode=filename&amp;suite=bionic-updates&amp;section=all&amp;arch=any&amp;keywords=FileCheck&amp;searchon=contents</a></p>



<a name="193675075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193675075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193675075">(Apr 11 2020 at 19:17)</a>:</h4>
<p>I guess I'm assuming you have bionic-updates</p>



<a name="193675082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193675082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193675082">(Apr 11 2020 at 19:17)</a>:</h4>
<p>OK after installing llvm-9-dev and pointing to correct llvm-config in config.toml it's building now.</p>



<a name="193675084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193675084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193675084">(Apr 11 2020 at 19:17)</a>:</h4>
<p>because base bionic stops at LLVM 6: <a href="https://packages.ubuntu.com/search?suite=bionic&amp;arch=any&amp;mode=filename&amp;searchon=contents&amp;keywords=FileCheck" title="https://packages.ubuntu.com/search?suite=bionic&amp;arch=any&amp;mode=filename&amp;searchon=contents&amp;keywords=FileCheck">https://packages.ubuntu.com/search?suite=bionic&amp;arch=any&amp;mode=filename&amp;searchon=contents&amp;keywords=FileCheck</a></p>



<a name="193675086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193675086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193675086">(Apr 11 2020 at 19:17)</a>:</h4>
<p><span class="user-mention" data-user-id="119169">@osa1</span> wheeee</p>



<a name="193675089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Building%20with%20system%20LLVM%3F/near/193675089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> osa1 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Building.20with.20system.20LLVM.3F.html#193675089">(Apr 11 2020 at 19:17)</a>:</h4>
<p>Thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
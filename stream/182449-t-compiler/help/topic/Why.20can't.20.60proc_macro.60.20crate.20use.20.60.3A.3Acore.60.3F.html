<html>
<head><meta charset="utf-8"><title>Why can&#x27;t `proc_macro` crate use `::core`? · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Why.20can&#x27;t.20.60proc_macro.60.20crate.20use.20.60.3A.3Acore.60.3F.html">Why can&#x27;t `proc_macro` crate use `::core`?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252150323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Why%20can%27t%20%60proc_macro%60%20crate%20use%20%60%3A%3Acore%60%3F/near/252150323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Wagner-Hall <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Why.20can&#x27;t.20.60proc_macro.60.20crate.20use.20.60.3A.3Acore.60.3F.html#252150323">(Sep 06 2021 at 09:32)</a>:</h4>
<p>Per <a href="https://github.com/rust-lang/rust/blob/master/library/proc_macro/Cargo.toml">https://github.com/rust-lang/rust/blob/master/library/proc_macro/Cargo.toml</a>, the <code>proc_macro</code> crate has a manual dependency on <code>std</code>, but otherwise doesn't look "special" in any way.</p>
<p>It's an edition 2018 crate.</p>
<p>However, trying to use <code>::core::...</code> in it doesn't work., like it would in any normal crate (nor does <code>core::...</code>). <code>::std::...</code> does (I guess because there's an <code>--extern</code> flag for it), but not <code>::core::...</code></p>
<p>Is there some magic somewhere which means that manually specifying a path to <code>std</code> leads to not getting <code>::core</code>? Or some config somewhere which makes it not available by name?</p>



<a name="252150474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Why%20can%27t%20%60proc_macro%60%20crate%20use%20%60%3A%3Acore%60%3F/near/252150474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Why.20can&#x27;t.20.60proc_macro.60.20crate.20use.20.60.3A.3Acore.60.3F.html#252150474">(Sep 06 2021 at 09:33)</a>:</h4>
<p>You need to add <code>core = { path = "../core" }</code> if you want to use <code>::core</code>.</p>



<a name="252150642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Why%20can%27t%20%60proc_macro%60%20crate%20use%20%60%3A%3Acore%60%3F/near/252150642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Why.20can&#x27;t.20.60proc_macro.60.20crate.20use.20.60.3A.3Acore.60.3F.html#252150642">(Sep 06 2021 at 09:35)</a>:</h4>
<p>proc_macro is compiled part of the standard library and as such is compiled with an empty sysroot. This means you have to explicitly specify the dependencies in <code>Cargo.toml</code> even if they normally come from the sysroot.</p>



<a name="252150732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Why%20can%27t%20%60proc_macro%60%20crate%20use%20%60%3A%3Acore%60%3F/near/252150732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Wagner-Hall <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Why.20can&#x27;t.20.60proc_macro.60.20crate.20use.20.60.3A.3Acore.60.3F.html#252150732">(Sep 06 2021 at 09:36)</a>:</h4>
<p>Makes sense :) Thanks! Yeah, that was my workaround, but I didn't have the context for why it was necessary</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
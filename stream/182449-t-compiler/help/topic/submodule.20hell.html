<html>
<head><meta charset="utf-8"><title>submodule hell · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html">submodule hell</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="205504316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20hell/near/205504316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html#205504316">(Jul 30 2020 at 16:59)</a>:</h4>
<p>I was running <code>x.py build src/libstd</code> and was feeling sleepy and had to stop it midway. It had fetched the repository for src/llvm and was resolving objects when I interrupted it. <br>
Now if i try to build again i get</p>
<div class="codehilite"><pre><span></span><code>Failed to clone &#39;src/llvm-project&#39;. Retry scheduled
BUG: submodule considered for cloning, doesn&#39;t need cloning any more?
fatal: could not get a repository handle for submodule &#39;src/llvm-project&#39;
</code></pre></div>


<p>and even if i try the suggested submodule update, it still can't fetch the repository handle. </p>
<p>Any pointers?</p>



<a name="205504591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20hell/near/205504591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html#205504591">(Jul 30 2020 at 17:02)</a>:</h4>
<p>if you run <code>git submodule init &amp;&amp; git submodule update</code> what happens?</p>



<a name="205504615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20hell/near/205504615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html#205504615">(Jul 30 2020 at 17:02)</a>:</h4>
<p>I know nothing about submodules so if that doesn't work I'm out of ideas <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="205530898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20hell/near/205530898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html#205530898">(Jul 30 2020 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> sadly that doesn't work</p>



<a name="205551794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20hell/near/205551794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> yodal <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html#205551794">(Jul 31 2020 at 02:15)</a>:</h4>
<p>Maybe try <code>git submodule deinit --force</code> before trying <code>git submodule update --init --recursive</code></p>



<a name="205551849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20hell/near/205551849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> yodal <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html#205551849">(Jul 31 2020 at 02:16)</a>:</h4>
<p>Push comes to shove, just <code>rm -r src/llvm-project/</code> and reinit</p>



<a name="205604920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/submodule%20hell/near/205604920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/submodule.20hell.html#205604920">(Jul 31 2020 at 15:29)</a>:</h4>
<p>thanks will give that a try</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>x.py · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html">x.py</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268194277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268194277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hamza <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268194277">(Jan 16 2022 at 16:37)</a>:</h4>
<p>I'm wondering what build --target option does. <a href="https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html">https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html</a> says</p>
<blockquote>
<p>target targets to build</p>
</blockquote>
<p>Is it is the output format of the build or which targets the built compiler will be able to build</p>



<a name="268194389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268194389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268194389">(Jan 16 2022 at 16:40)</a>:</h4>
<p><code>--build</code> — The system you are building on.<br>
<code>--host</code> — The system you want the resulting <code>rustc</code> to run on.<br>
<code>--target</code> — The system you want <code>std</code> built for (so that the resulting <code>rustc</code> can cross-compile to other targets).</p>



<a name="268194897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268194897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hamza <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268194897">(Jan 16 2022 at 16:51)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> thanks, another question <br>
<code>config.toml</code> example says</p>
<blockquote>
<p>Unless you're developing for a target where Rust CI doesn't build a compiler toolchain or changing LLVM locally, you probably want to set this to true.</p>
</blockquote>
<p>for <code>download-ci-llvm</code><br>
what are the targets CI builds for? Is <code>wasm32-unknown-unknown</code> one of them?</p>



<a name="268194954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268194954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268194954">(Jan 16 2022 at 16:52)</a>:</h4>
<p>download-ci-llvm = "if-available" should be a reasonable default if you're not sure</p>



<a name="268194975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268194975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268194975">(Jan 16 2022 at 16:52)</a>:</h4>
<p>wasm32-unknown-unknown will not have a prebuilt LLVM; we don't ship rustc for that target, only std.</p>



<a name="268195060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268195060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hamza <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268195060">(Jan 16 2022 at 16:54)</a>:</h4>
<p>Do you know if LLVM could be built for that target?</p>



<a name="268196516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268196516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268196516">(Jan 16 2022 at 17:23)</a>:</h4>
<p>Probably not without changes - llvm has filesystem and other os dependencies that would need to be adjusted on that target, since they don't have a native representation</p>



<a name="268197036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268197036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hamza <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268197036">(Jan 16 2022 at 17:32)</a>:</h4>
<p>Can you link to me to some guide on developing for LLVM and where I can go to ask questions</p>



<a name="268201497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268201497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268201497">(Jan 16 2022 at 19:09)</a>:</h4>
<p>I've seen clang built for wasm emscripten, like this:<br>
<a href="https://github.com/tbfleming/cib">https://github.com/tbfleming/cib</a></p>



<a name="268201559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268201559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268201559">(Jan 16 2022 at 19:10)</a>:</h4>
<p>Maybe WASI would be possible too</p>



<a name="268201578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268201578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268201578">(Jan 16 2022 at 19:11)</a>:</h4>
<p>Either way, then you could have <code>wasm32-unknown-unknown</code> as an available target from those wasm "hosts"</p>



<a name="268201710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268201710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268201710">(Jan 16 2022 at 19:14)</a>:</h4>
<p>Ah, now I see the other thread where you're working on that, cool.</p>



<a name="268202217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/x.py/near/268202217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hamza <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/x.2Epy.html#268202217">(Jan 16 2022 at 19:28)</a>:</h4>
<p>... and failing at it<br>
in any case, if you have advice to fix my clang issue, that is very welcome</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>`ProjectionElem::Field` remove ty · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html">`ProjectionElem::Field` remove ty</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="276016487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276016487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276016487">(Mar 21 2022 at 08:07)</a>:</h4>
<p>currently <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.ProjectionElem.html#variant.Field"><code>ProjectionElem::Field</code></a> remembers the type of the field from hir typeck instead of recomputing it in the mir</p>



<a name="276017462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276017462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276017462">(Mar 21 2022 at 08:20)</a>:</h4>
<p>this is currently incorrect for field projections on the lhs of a let binding:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="o">&lt;'</span><span class="na">b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="p">(</span><span class="k">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="p">()),))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">,)</span>: <span class="p">(</span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">b</span><span class="w"> </span><span class="p">()),)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>results in</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>error[E0308]: mismatched types
 --&gt; src/lib.rs:3:10
  |
3 |     let (_y,): (fn(&amp;'b ()),) = x;
  |          ^^ one type is more general than the other
  |
  = note: expected fn pointer `for&lt;'a&gt; fn(&amp;'a ())`
             found fn pointer `fn(&amp;())`

error[E0308]: mismatched types
 --&gt; src/lib.rs:3:16
  |
3 |     let (_y,): (fn(&amp;'b ()),) = x;
  |                ^^^^^^^^^^^^^ one type is more general than the other
  |
  = note: expected tuple `(fn(&amp;'b ()),)`
             found tuple `(for&lt;'a&gt; fn(&amp;'a ()),)`

For more information about this error, try `rustc --explain E0308`.
</code></pre></div>



<a name="276017526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276017526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276017526">(Mar 21 2022 at 08:21)</a>:</h4>
<p>looking at the mir it is clear why that's the case:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">|</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">Annotations</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">Canonical</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">max_universe</span>: <span class="nc">U0</span><span class="p">,</span><span class="w"> </span><span class="n">variables</span>: <span class="p">[],</span><span class="w"> </span><span class="n">value</span>: <span class="nc">Ty</span><span class="p">((</span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">b</span><span class="w"> </span><span class="p">()),))</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">3</span>:<span class="mi">16</span>: <span class="mi">3</span>:<span class="mi">29</span><span class="w"></span>
<span class="o">|</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">Canonical</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">max_universe</span>: <span class="nc">U0</span><span class="p">,</span><span class="w"> </span><span class="n">variables</span>: <span class="p">[],</span><span class="w"> </span><span class="n">value</span>: <span class="nc">Ty</span><span class="p">((</span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">b</span><span class="w"> </span><span class="p">()),))</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">3</span>:<span class="mi">16</span>: <span class="mi">3</span>:<span class="mi">29</span><span class="w"></span>
<span class="o">|</span><span class="w"></span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">_1</span>: <span class="p">(</span><span class="k">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="p">()),))</span><span class="w"> </span>-&gt; <span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">debug</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_1</span><span class="p">;</span><span class="w">                       </span><span class="c1">// in scope 0 at src/lib.rs:2:12: 2:13</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">_0</span>: <span class="p">();</span><span class="w">                      </span><span class="c1">// return place in scope 0 at src/lib.rs:2:38: 2:38</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">_2</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">&amp;</span><span class="p">())</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">UserTypeProjection</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">base</span>: <span class="nc">UserType</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">projs</span>: <span class="p">[</span><span class="n">Field</span><span class="p">(</span><span class="n">field</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="p">())]</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// in scope 0 at src/lib.rs:3:10: 3:12</span>
<span class="w">    </span><span class="n">scope</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">debug</span><span class="w"> </span><span class="n">_y</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_2</span><span class="p">;</span><span class="w">                  </span><span class="c1">// in scope 1 at src/lib.rs:3:10: 3:12</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">bb0</span>: <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">AscribeUserType</span><span class="p">(</span><span class="n">_1</span><span class="p">,</span><span class="w"> </span><span class="o">+</span><span class="p">,</span><span class="w"> </span><span class="n">UserTypeProjection</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">base</span>: <span class="nc">UserType</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">projs</span>: <span class="p">[]</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// scope 0 at src/lib.rs:3:16: 3:29</span>
<span class="w">        </span><span class="n">StorageLive</span><span class="p">(</span><span class="n">_2</span><span class="p">);</span><span class="w">                 </span><span class="c1">// scope 0 at src/lib.rs:3:10: 3:12</span>
<span class="w">        </span><span class="n">_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">_1</span><span class="p">.</span><span class="mi">0</span>: <span class="nc">fn</span><span class="p">(</span><span class="o">&amp;</span><span class="p">()));</span><span class="w">            </span><span class="c1">// scope 0 at src/lib.rs:3:10: 3:12</span>
<span class="w">        </span><span class="n">_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">();</span><span class="w">                   </span><span class="c1">// scope 0 at src/lib.rs:2:38: 4:2</span>
<span class="w">        </span><span class="n">StorageDead</span><span class="p">(</span><span class="n">_2</span><span class="p">);</span><span class="w">                 </span><span class="c1">// scope 0 at src/lib.rs:4:1: 4:2</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w">                          </span><span class="c1">// scope 0 at src/lib.rs:4:2: 4:2</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="276017612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276017612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276017612">(Mar 21 2022 at 08:22)</a>:</h4>
<p>the field <code>_1.0</code> has type <code>for&lt;'a&gt; fn(&amp;'a ())</code>, meaning that <code>(_1.0: fn(&amp;()));</code> is incorrect</p>



<a name="276017791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276017791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276017791">(Mar 21 2022 at 08:25)</a>:</h4>
<p>my ideal solution to this would be to just remove the type from this variant and always recompute it using</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">            </span><span class="n">ty</span>::<span class="n">Adt</span><span class="p">(</span><span class="n">adt_def</span><span class="p">,</span><span class="w"> </span><span class="n">substs</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">variant_def</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">variant_index</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">adt_def</span><span class="p">.</span><span class="n">non_enum_variant</span><span class="p">(),</span><span class="w"></span>
<span class="w">                    </span><span class="nb">Some</span><span class="p">(</span><span class="n">variant_index</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="fm">assert!</span><span class="p">(</span><span class="n">adt_def</span><span class="p">.</span><span class="n">is_enum</span><span class="p">());</span><span class="w"></span>
<span class="w">                        </span><span class="o">&amp;</span><span class="n">adt_def</span><span class="p">.</span><span class="n">variants</span><span class="p">[</span><span class="n">variant_index</span><span class="p">]</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">};</span><span class="w"></span>
<span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">field_def</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">variant_def</span><span class="p">.</span><span class="n">fields</span><span class="p">[</span><span class="n">f</span><span class="p">.</span><span class="n">index</span><span class="p">()];</span><span class="w"></span>
<span class="w">                </span><span class="n">field_def</span><span class="p">.</span><span class="n">ty</span><span class="p">(</span><span class="n">tcx</span><span class="p">,</span><span class="w"> </span><span class="n">substs</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="276017914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276017914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276017914">(Mar 21 2022 at 08:26)</a>:</h4>
<p>this causes an ICE however as we end up with a <code>'static</code> region during mir borrowck for <code>struct Foo { field: &amp;'static u32 }</code></p>



<a name="276018136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276018136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276018136">(Mar 21 2022 at 08:28)</a>:</h4>
<p>We start mir borrowck by eagerly converting all regions in the mir <code>ReVar</code>. I would assume that we need these <code>'static</code> to <code>'?x</code> conversions somewhere else during mir typeck as well but wasn't able to find anything</p>



<a name="276018519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276018519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276018519">(Mar 21 2022 at 08:32)</a>:</h4>
<p>i.e. what happens when proving some predicate ends up equating some region to <code>'static</code></p>



<a name="276025591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276025591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276025591">(Mar 21 2022 at 09:42)</a>:</h4>
<p>You probably need to convert to tyvar right when you compute the type on the fly. I believe we do something similar in mir borrowck when invoking type_of in other situations</p>



<a name="276047887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276047887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276047887">(Mar 21 2022 at 13:11)</a>:</h4>
<p>I'm trying to remember why we keep the normalized type from a field</p>



<a name="276047903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276047903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276047903">(Mar 21 2022 at 13:11)</a>:</h4>
<p>I can't think of a <em>good</em> reason, apart from efficiency</p>



<a name="276047923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276047923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276047923">(Mar 21 2022 at 13:11)</a>:</h4>
<p><span class="user-mention" data-user-id="228094">@Ariel Ben-Yehuda</span> may remember</p>



<a name="276047959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276047959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276047959">(Mar 21 2022 at 13:11)</a>:</h4>
<p>It seems like it shouldn't be <em>necessary</em> at least</p>



<a name="276048019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276048019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276048019">(Mar 21 2022 at 13:12)</a>:</h4>
<p>regarding the <code>'static</code>, it is possible to map the result from normalization</p>



<a name="276048028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276048028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276048028">(Mar 21 2022 at 13:12)</a>:</h4>
<p>that said, I don't quite understand your example</p>



<a name="276048136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276048136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276048136">(Mar 21 2022 at 13:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="216206">lcnr</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty/near/276017612">said</a>:</p>
<blockquote>
<p>the field <code>_1.0</code> has type <code>for&lt;'a&gt; fn(&amp;'a ())</code>, meaning that <code>(_1.0: fn(&amp;()));</code> is incorrect</p>
</blockquote>
<p>that is, this doesn't look right to me</p>



<a name="276048157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276048157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276048157">(Mar 21 2022 at 13:13)</a>:</h4>
<p>seems like you need <code>-Zverbose</code> to say for sure what's going on here</p>



<a name="276048169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276048169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276048169">(Mar 21 2022 at 13:13)</a>:</h4>
<p><span class="user-mention" data-user-id="216206">@lcnr</span> <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<a name="276049495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276049495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276049495">(Mar 21 2022 at 13:23)</a>:</h4>
<p><code>(_1.0: fn(&amp;()));</code> is <code>fn(&amp;'erased ())</code> here</p>



<a name="276049698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276049698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276049698">(Mar 21 2022 at 13:25)</a>:</h4>
<p>so the type in <code>ProjectionElem::Field</code> is <code>fn(&amp;'b ())</code> - the type of <code>y</code>- while the it should be <code>for&lt;'a&gt; fn(&amp;'a ())</code> - the type of <code>x</code>.</p>



<a name="276050363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60ProjectionElem%3A%3AField%60%20remove%20ty/near/276050363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty.html#276050363">(Mar 21 2022 at 13:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/.60ProjectionElem.3A.3AField.60.20remove.20ty/near/276048019">said</a>:</p>
<blockquote>
<p>regarding the <code>'static</code>, it is possible to map the result from normalization</p>
</blockquote>
<p>what exactly do you mean with this?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
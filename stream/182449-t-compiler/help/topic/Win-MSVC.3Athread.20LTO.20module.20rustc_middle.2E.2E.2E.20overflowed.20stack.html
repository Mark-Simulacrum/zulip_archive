<html>
<head><meta charset="utf-8"><title>Win-MSVC:thread LTO module rustc_middle... overflowed stack · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html">Win-MSVC:thread LTO module rustc_middle... overflowed stack</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="232692357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692357">(Apr 01 2021 at 01:53)</a>:</h4>
<p>Is there a workaround for stack overflow errors when compiling on Windows MSVC?</p>
<p>I have a pretty beefy Windows machine configuration, so if there's a way to use more resources to address this, I should be able to physically do that.</p>
<p>I'm trying to debug an error in <code>python x.py dist</code> in Windows MSVC, for a PR that adds a new tool.</p>
<p>CI is breaking on the Windows MSVC build, and when I run <code>x.py dist</code> my <code>rustc</code> build consistently fails with:</p>
<p>I'm trying to reproduce the CI error that failed to find <code>rust-demangler</code> when running <code>x.py dist</code> on Windows, but I keep running into a stack overflow before it completes the build (at least to the point of failure in CI).</p>
<p>Is there something I can do to overcome this stack overflow error?:</p>
<div class="codehilite"><pre><span></span><code>   Compiling rustc_interface v0.0.0 (C:\rust\compiler\rustc_interface)
thread &#39;LTO module rustc_middle.btguyyk8-cgu.4&#39; has overflowed its stack
[RUSTC-TIMING] rustc_middle test:false 1615.740
error: could not compile `rustc_middle`
</code></pre></div>
<p>See the following link for more details of the error and the complete <code>rustc</code> command that's being run.</p>
<p><a href="https://github.com/rust-lang/rust/pull/83529#issuecomment-811569214">https://github.com/rust-lang/rust/pull/83529#issuecomment-811569214</a></p>



<a name="232692483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692483">(Apr 01 2021 at 01:55)</a>:</h4>
<p>you could try increasing the available stack size maybe?</p>



<a name="232692499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692499">(Apr 01 2021 at 01:55)</a>:</h4>
<p>that won't help if there's infinite recursion or something though</p>



<a name="232692597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692597">(Apr 01 2021 at 01:56)</a>:</h4>
<p>The compiler code is unchanged from rust-lang/rust tip of tree, so I assume it's not infinite.</p>



<a name="232692612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692612">(Apr 01 2021 at 01:56)</a>:</h4>
<p>How do I increase available stack size? Is there a config.toml setting or something?</p>



<a name="232692614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692614">(Apr 01 2021 at 01:56)</a>:</h4>
<p>it could be a pre-existing bug <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="232692645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692645">(Apr 01 2021 at 01:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="296355">Rich Kadel</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack/near/232692612">said</a>:</p>
<blockquote>
<p>How do I increase available stack size? Is there a config.toml setting or something?</p>
</blockquote>
<p>it depends on your shell. In bash it's <code>ulimit -s</code></p>



<a name="232692704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692704" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692704">(Apr 01 2021 at 01:58)</a>:</h4>
<p>I guess theoretically x.py should be able to set it for child processes</p>



<a name="232692747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692747">(Apr 01 2021 at 01:58)</a>:</h4>
<p>OK, I'm running this from the Windows CMD shell (the special config for Visual Studio), but I'm probably far enough in the build process to try from msys2 shell, if that makes a difference</p>



<a name="232692759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692759">(Apr 01 2021 at 01:59)</a>:</h4>
<p>I don't know anything about resource limits on windows, sorry</p>



<a name="232692784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692784">(Apr 01 2021 at 01:59)</a>:</h4>
<p>Yeah, thanks. I probably need someone more familiar with building Rustc on Windows for MSVC. Any recommendations?</p>



<a name="232692877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692877">(Apr 01 2021 at 02:00)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> uses windows</p>



<a name="232692936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232692936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232692936">(Apr 01 2021 at 02:01)</a>:</h4>
<p>Wesley would be perfect (since it's also related to coverage.</p>



<a name="232710349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232710349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232710349">(Apr 01 2021 at 06:30)</a>:</h4>
<p>In Windows the stack size is set by the program. IIRC, unfortunately Rust uses the fallback value from the linker which is quite low (1mb). You'd need to rebuild using the <a href="https://docs.microsoft.com/en-us/cpp/build/reference/stack-stack-allocations?view=msvc-160"><code>/STACK</code> linker options</a>. (or hack the binary with a PE editor...)</p>



<a name="232734321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232734321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232734321">(Apr 01 2021 at 10:23)</a>:</h4>
<p>You can use the <code>RUST_MIN_STACK</code> env var. Rustc itself already sets it to 8MB by default.</p>



<a name="232756237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232756237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232756237">(Apr 01 2021 at 13:30)</a>:</h4>
<p>Thank you!</p>



<a name="232765755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232765755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232765755">(Apr 01 2021 at 14:29)</a>:</h4>
<p>Just FYI, I pulled your PR and ran <code>python x.py dist</code> on my Windows machine and it seemed to complete that part of the compilation without issue but failed later with </p>
<div class="codehilite"><pre><span></span><code>    Finished release [optimized + debuginfo] target(s) in 52.31s
Dist rustc-1.53.0-dev-x86_64-pc-windows-msvc
        finished in 44.008 seconds
Dist rust-std-1.53.0-dev-x86_64-pc-windows-msvc
        finished in 20.210 seconds
Dist rustc-dev-1.53.0-dev-x86_64-pc-windows-msvc
        finished in 148.499 seconds
Dist rust-src-1.53.0-dev
        finished in 21.507 seconds
Dist rustc-1.53.0-dev-src
Error: failed to generate tarballs

Caused by:
    0: failed to tar file &#39;D:\code\rust\build\tmp\tarball\rustc\src\rustc-1.53.0-dev-src\src\test\run-make-fulldeps\coverage-spanview\expected_mir_dump.used_inline_crate\used_inline_crate.used_with_same_type_from_bin_crate_and_lib_crate_generic_function.-------.InstrumentCoverage.0.html&#39;
    1: The system cannot find the path specified. (os error 3)


command did not execute successfully: &quot;D:\\code\\rust\\build\\x86_64-pc-windows-msvc\\stage0-tools-bin\\fabricate.exe&quot; &quot;tarball&quot; &quot;--input&quot; &quot;D:\\code\\rust\\build\\tmp\\tarball\\rustc\\src\\rustc-1.53.0-dev-src&quot; &quot;--output&quot; &quot;D:\\code\\rust\\build\\dist\\rustc-1.53.0-dev-src&quot; &quot;--work-dir&quot; &quot;D:\\code\\rust\\build\\tmp\\tarball\\rustc\\src&quot;
expected success, got: exit code: 1


failed to run: D:\code\rust\build\bootstrap\debug\bootstrap dist
Build completed unsuccessfully in 0:30:46
</code></pre></div>



<a name="232766774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232766774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232766774">(Apr 01 2021 at 14:35)</a>:</h4>
<p>The path to that file is exactly 260 characters. Including a null character, that is 261 characters. <code>MAX_PATH</code> is only 260 characters, so the path is just too long. Try moving the <code>rust</code> dir to the root of the <code>D:</code> drive.</p>



<a name="232766933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232766933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232766933">(Apr 01 2021 at 14:36)</a>:</h4>
<p><a href="https://docs.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation">https://docs.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation</a></p>



<a name="232771112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232771112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232771112">(Apr 01 2021 at 15:00)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> ... So are you suggesting the CI failure may have been spurious? Or my attempt to replicate the failure is not getting to the point where it failed?</p>



<a name="232771412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232771412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232771412">(Apr 01 2021 at 15:01)</a>:</h4>
<p>Also, I'm retrying the command again with the stack size change, but now I'm hitting an issue I've hit several times before on windows and never understood why. Maybe you can suggest a fix I can use for this? I'm not running any other concurrent builds, but I get:</p>
<div class="codehilite"><pre><span></span><code>thread &#39;main&#39; panicked at &#39;failed to copy
`C:\rust\build\x86_64-pc-windows-msvc\stage0-bootstrap-tools\x86_64-pc-windows-msvc\release\unstable-book-gen.exe`
 to `C:\rust\build\x86_64-pc-windows-msvc\stage0-tools-bin\unstable-book-gen.exe`:
The process cannot access the file because it is being used by another process. (os error 32)&#39;,
 src\bootstrap\lib.rs:1206:17
</code></pre></div>



<a name="232771708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232771708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232771708">(Apr 01 2021 at 15:03)</a>:</h4>
<p>Regarding the CI failure, see <a href="https://github.com/rust-lang-ci/rust/runs/2233328748">https://github.com/rust-lang-ci/rust/runs/2233328748</a></p>



<a name="232775533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232775533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232775533">(Apr 01 2021 at 15:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="296355">Rich Kadel</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack/near/232771112">said</a>:</p>
<blockquote>
<p>Thanks <span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> ... So are you suggesting the CI failure may have been spurious? Or my attempt to replicate the failure is not getting to the point where it failed?</p>
</blockquote>
<p>I'm pretty sure this is what's happening.</p>



<a name="232779083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232779083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232779083">(Apr 01 2021 at 15:44)</a>:</h4>
<p>fyi <span class="user-mention" data-user-id="116883">@tmandry</span> - No closer to figuring out why <code>rust-demangler</code> is failing and I can't replicate the Windows failures locally.</p>



<a name="232779093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232779093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232779093">(Apr 01 2021 at 15:44)</a>:</h4>
<p>Are you maybe compiling with an LLVM that's configured differently than what CI uses? Perhaps with <code>llvm.assertions = true</code>?</p>



<a name="232779360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232779360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232779360">(Apr 01 2021 at 15:46)</a>:</h4>
<p>I don't think so. The only llvm config I set was <code>static-libstdcpp = true</code> because that shows up in the CI logs.</p>



<a name="232779486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232779486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232779486">(Apr 01 2021 at 15:46)</a>:</h4>
<p>But the "used by another process" error is something I sometimes see even when just doing a non-install build</p>



<a name="232779571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232779571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232779571">(Apr 01 2021 at 15:47)</a>:</h4>
<p>I thought it happened so often that there must be a common fix for this. No?</p>



<a name="232780135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232780135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232780135">(Apr 01 2021 at 15:50)</a>:</h4>
<p>I don't think I've ever seen that error on my machine.</p>



<a name="232780181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232780181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232780181">(Apr 01 2021 at 15:50)</a>:</h4>
<p>Do you have AV other than Windows Defender?</p>



<a name="232780426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232780426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232780426">(Apr 01 2021 at 15:52)</a>:</h4>
<p>It's a company-specific locked-down version, so if you think this is related to AV, maybe it is. I'm not sure what they have configured. Good idea though.</p>



<a name="232780474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232780474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232780474">(Apr 01 2021 at 15:52)</a>:</h4>
<p>I'll just reboot...</p>



<a name="232781389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232781389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232781389">(Apr 01 2021 at 15:58)</a>:</h4>
<p>regarding the long filename, I don't think this is related to my failing CI issue, but this is the second issue this week related to spanview files, and I just don't use them anymore (for ./x.py test) so I'm going to submit a PR to remove spanview from the coverage tests.</p>



<a name="232814839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232814839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232814839">(Apr 01 2021 at 19:51)</a>:</h4>
<p>FYI, I finally got a successful build of your PR locally after moving my rust folder:</p>
<div class="codehilite"><pre><span></span><code>Building stage0 tool fabricate (x86_64-pc-windows-msvc)
    Finished release [optimized + debuginfo] target(s) in 2.14s
Dist rustc-1.53.0-dev-x86_64-pc-windows-msvc
        finished in 44.915 seconds
Dist rust-std-1.53.0-dev-x86_64-pc-windows-msvc
        finished in 19.126 seconds
Dist rustc-dev-1.53.0-dev-x86_64-pc-windows-msvc
        finished in 156.312 seconds
Dist rust-src-1.53.0-dev
        finished in 21.881 seconds
Dist rustc-1.53.0-dev-src
        finished in 814.046 seconds
Dist rust-dev-1.53.0-dev-x86_64-pc-windows-msvc
        finished in 94.508 seconds
Build completed successfully in 1:21:33
</code></pre></div>



<a name="232854665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232854665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232854665">(Apr 02 2021 at 03:10)</a>:</h4>
<p>Interesting. Well I don't get it. Thanks to the <code>RUST_MIN_STACK</code> fix, I was finally able to continue with:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ <span class="nv">RUST_MIN_STACK</span><span class="o">=</span><span class="m">8388608</span> ./x.py dist
</code></pre></div>
<p>and it reproduced the error that CI got.</p>
<div class="codehilite"><pre><span></span><code>Dist rust-nightly-x86_64-pc-windows-msvc
        finished in 504.748 seconds
thread &#39;main&#39; panicked at &#39;could not read dir &quot;C:\\rust\\build\\tmp\\tarball\\rust\\x86_64-pc-windows-msvc\\rust-demangler-nightly-x86_64-pc-windows-msvc\\rust-demangler&quot;: Os { code: 3, kind: NotFound, message: &quot;The system cannot find the path specified.&quot; }&#39;, src\bootstrap\lib.rs:1343:25
stack backtrace:
   0: std::panicking::begin_panic_handler
             at /rustc/14b27555a03f4abf9b8d80ea34f59144e2ded5e4\/library\std\src\panicking.rs:493
   1: std::panicking::begin_panic_fmt
             at /rustc/14b27555a03f4abf9b8d80ea34f59144e2ded5e4\/library\std\src\panicking.rs:435
   2: bootstrap::Build::read_dir
             at .\src\bootstrap\lib.rs:1343
   3: bootstrap::Build::cp_r
             at .\src\bootstrap\lib.rs:1238
   4: bootstrap::dist::{{impl}}::run::{{closure}}
             at .\src\bootstrap\dist.rs:1528
   5: bootstrap::dist::{{impl}}::run
             at .\src\bootstrap\dist.rs:1538
   6: bootstrap::builder::Builder::ensure&lt;bootstrap::dist::Extended&gt;
             at .\src\bootstrap\builder.rs:1530
   7: bootstrap::dist::{{impl}}::make_run
             at .\src\bootstrap\dist.rs:1311
   8: bootstrap::builder::StepDescription::maybe_run
             at .\src\bootstrap\builder.rs:179
   9: bootstrap::builder::StepDescription::run
             at .\src\bootstrap\builder.rs:200
  10: bootstrap::builder::Builder::run_step_descriptions
             at .\src\bootstrap\builder.rs:574
  11: bootstrap::builder::Builder::execute_cli
             at .\src\bootstrap\builder.rs:566
  12: bootstrap::Build::build
             at .\src\bootstrap\lib.rs:510
  13: bootstrap::main
             at .\src\bootstrap\bin\main.rs:33
  14: core::ops::function::FnOnce::call_once&lt;fn(),tuple&lt;&gt;&gt;
             at /rustc/14b27555a03f4abf9b8d80ea34f59144e2ded5e4\library\core\src\ops\function.rs:227
</code></pre></div>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> do you have anything at that path?<br>
<code> "C:\\rust\\build\\tmp\\tarball\\rust\\x86_64-pc-windows-msvc\\rust-demangler-nightly-x86_64-pc-windows-msvc\\rust-demangler"</code></p>
<p>I have the parent directory and these contents (just not <code>rust-demangler</code>):</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ ls  <span class="s2">"C:\\rust\\build\\tmp\\tarball\\rust\\x86_64-pc-windows-msvc\\rust-demangler-nightly-x86_64-pc-windows-msvc"</span>
LICENSE-APACHE  README.md   git-commit-hash  rust-demangler-preview/  version
LICENSE-MIT     components  install.sh*      rust-installer-version
</code></pre></div>
<p>But notably, <code>clippy</code> (which is similar) has a similar directory and layout, and no <code>clippy</code> file in that directory either:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ ls  <span class="s2">"C:\\rust\\build\\tmp\\tarball\\rust\\x86_64-pc-windows-msvc\\clippy-nightly-x86_64-pc-windows-msvc"</span>
LICENSE-APACHE  README.md        components       install.sh*             veshell
LICENSE-MIT     clippy-preview/  git-commit-hash  rust-installer-version
</code></pre></div>
<p>And if so, any idea why yours worked, but CI and me can't find that file or directory?</p>



<a name="232905145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232905145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232905145">(Apr 02 2021 at 14:30)</a>:</h4>
<p>Because I forgot to set <code>profiler = true</code> in <code>config.toml</code> <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="232905154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232905154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232905154">(Apr 02 2021 at 14:30)</a>:</h4>
<p>Building again ...</p>



<a name="232914127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232914127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232914127">(Apr 02 2021 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> here's what I have in my config.toml (matching the CI builder as much as I can):</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ sed -e <span class="s1">'/^$/d;/^#/d'</span> config.toml
</code></pre></div>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="n">changelog-seen</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">[llvm]</span>
<span class="n">static-libstdcpp</span> <span class="o">=</span> <span class="kc">true</span>
<span class="k">[build]</span>
<span class="n">build</span> <span class="o">=</span> <span class="s">"x86_64-pc-windows-msvc"</span>
<span class="n">host</span> <span class="o">=</span> <span class="k">["x86_64-pc-windows-msvc"]</span>
<span class="n">target</span> <span class="o">=</span> <span class="k">["x86_64-pc-windows-msvc"]</span>
<span class="n">submodules</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">locked-deps</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">extended</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">profiler</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">cargo-native-static</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">configure-args</span> <span class="o">=</span> <span class="k">[ "--build=x86_64-pc-windows-msvc", "--host=x86_64-pc-windows-msvc", "--target=x86_64-pc-windows-msvc", "--enable-full-tools", "--enable-profiler" ]</span>
<span class="n">print-step-timings</span> <span class="o">=</span> <span class="kc">true</span>
<span class="k">[install]</span>
<span class="n">prefix</span> <span class="o">=</span> <span class="s">"/c/rust/install/default"</span>
<span class="n">sysconfdir</span> <span class="o">=</span> <span class="s">"etc"</span>
<span class="k">[rust]</span>
<span class="n">debuginfo-level-std</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">channel</span> <span class="o">=</span> <span class="s">"nightly"</span>
<span class="n">verbose-tests</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">lld</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">llvm-tools</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">remap-debuginfo</span> <span class="o">=</span> <span class="kc">true</span>
<span class="k">[target.x86_64-unknown-linux-gnu]</span>
<span class="k">[dist]</span>
<span class="n">missing-tools</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">compression-formats</span> <span class="o">=</span> <span class="k">["xz"]</span>
</code></pre></div>



<a name="232932802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232932802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232932802">(Apr 02 2021 at 18:10)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="296355">@Rich Kadel</span>, that was helpful. I'm getting the same error now. Looking at that folder, maybe the path needs to include the <code>-preview</code> suffix? </p>
<p><a href="/user_uploads/4715/dNc-WBMi33U4pBQsdictvOym/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/dNc-WBMi33U4pBQsdictvOym/image.png" title="image.png"><img src="/user_uploads/4715/dNc-WBMi33U4pBQsdictvOym/image.png"></a></div>



<a name="232932873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232932873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232932873">(Apr 02 2021 at 18:11)</a>:</h4>
<p>Looks like there's a binary in the right place inside that folder</p>
<p><a href="/user_uploads/4715/fue8ulSyDzvwkbw3Y57B--Wx/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/fue8ulSyDzvwkbw3Y57B--Wx/image.png" title="image.png"><img src="/user_uploads/4715/fue8ulSyDzvwkbw3Y57B--Wx/image.png"></a></div>



<a name="232933270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232933270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232933270">(Apr 02 2021 at 18:14)</a>:</h4>
<p>OK, good clue. What does "preview" mean? That was a property I set somewhere (copied from a similar other tool) but I don't know what it really means.</p>



<a name="232940462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232940462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232940462">(Apr 02 2021 at 19:20)</a>:</h4>
<p>I think it means the tool isn't considered "stable" and so it is allowed to change/remove things like command line arguments from release to release without warning. It also has the effect of appending the <code>-preview</code></p>



<a name="232940492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/232940492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#232940492">(Apr 02 2021 at 19:20)</a>:</h4>
<p>Oh, maybe you need to adjust this? <a href="https://github.com/rust-lang/rust/blob/36bcf4069717b9dff90270d13b53a3b130329960/src/bootstrap/dist.rs#L1455-L1469">https://github.com/rust-lang/rust/blob/36bcf4069717b9dff90270d13b53a3b130329960/src/bootstrap/dist.rs#L1455-L1469</a></p>



<a name="233033665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/233033665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#233033665">(Apr 03 2021 at 21:15)</a>:</h4>
<p>I'm sure that's at least part of the problem. Hopefully that will do it. Thanks!</p>



<a name="233059360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/Win-MSVC%3Athread%20LTO%20module%20rustc_middle...%20overflowed%20stack/near/233059360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Kadel <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/Win-MSVC.3Athread.20LTO.20module.20rustc_middle.2E.2E.2E.20overflowed.20stack.html#233059360">(Apr 04 2021 at 06:00)</a>:</h4>
<p>Thanks for your help <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> ! The PR just merged.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
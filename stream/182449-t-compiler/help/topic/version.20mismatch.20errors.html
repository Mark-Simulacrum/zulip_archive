<html>
<head><meta charset="utf-8"><title>version mismatch errors · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/version.20mismatch.20errors.html">version mismatch errors</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259090700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/version%20mismatch%20errors/near/259090700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johann Hemmann [he, him, his] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/version.20mismatch.20errors.html#259090700">(Oct 26 2021 at 12:50)</a>:</h4>
<p>Why are version mismatch conflicts in rust sometimes so confusing?</p>
<p>I just had the case where a friend used the most recent versions of both <code>actix-web</code> and <code>sqlx</code>. They have a common dependency on <code>actix-rt</code> (an async runtime) and the program compiled, but panicked on the first <code>.await</code>, with "no active reactor is running". The Problem was that <code>sqlx</code> depends on a more recent version of <code>actix-rt</code>, so we either need to downgrade <code>sqlx</code> or upgrade <code>actix-web</code> to the beta version., in order to get it working.<br>
Figuring this out took us quite some time staring at the screen and reading non-helpful error messages.</p>
<p>Is there a way to catch version mismatch errors more easily? Especially in the case that you don't know that it is a version mismatch which is causing the problem. Is it possible to teach the compiler to report better on that?</p>



<a name="259109372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/version%20mismatch%20errors/near/259109372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/version.20mismatch.20errors.html#259109372">(Oct 26 2021 at 14:58)</a>:</h4>
<p>Most of the time it is completely valid to have multiple versions of the same crate inside a program. When a crate has global state, like actix-rt does,  it may become a problem, but the compiler can't know if it will actually become a problem or not.</p>



<a name="259109694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/version%20mismatch%20errors/near/259109694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/version.20mismatch.20errors.html#259109694">(Oct 26 2021 at 15:00)</a>:</h4>
<p>You can use <code>cargo tree --duplicates</code> to list all crates that exist in multiple versions.</p>



<a name="259891921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/version%20mismatch%20errors/near/259891921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johann Hemmann [he, him, his] <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/version.20mismatch.20errors.html#259891921">(Nov 01 2021 at 17:11)</a>:</h4>
<p>Thank you for your input :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
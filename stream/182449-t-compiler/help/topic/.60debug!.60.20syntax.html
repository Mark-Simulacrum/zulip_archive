<html>
<head><meta charset="utf-8"><title>`debug!` syntax · t-compiler/help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/index.html">t-compiler/help</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html">`debug!` syntax</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261077991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261077991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261077991">(Nov 11 2021 at 00:45)</a>:</h4>
<p>How do I read the <code>?</code> symbols in this?</p>
<div class="codehilite"><pre><span></span><code>        debug!(
            ?predicate, ?obligation.cause.code,
        );
</code></pre></div>



<a name="261078055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078055">(Nov 11 2021 at 00:46)</a>:</h4>
<p>it's the equivalent of <code>debug!("{:?} {:?}", predicate, obligation.cause.code)</code></p>



<a name="261078093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078093">(Nov 11 2021 at 00:46)</a>:</h4>
<p>see <a href="https://docs.rs/tracing/0.1.29/tracing/index.html#recording-fields">https://docs.rs/tracing/0.1.29/tracing/index.html#recording-fields</a> for details</p>



<a name="261078245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078245">(Nov 11 2021 at 00:49)</a>:</h4>
<p>I need to change it to this, but it doesn't work:</p>
<div class="codehilite"><pre><span></span><code>        debug!(
            ?predicate, ?obligation.cause.code(),
        );
</code></pre></div>



<a name="261078272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078272">(Nov 11 2021 at 00:49)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error: expected expression, found `?`
    --&gt; compiler/rustc_trait_selection/src/traits/error_reporting/mod.rs:1569:25
     |
1569 |             ?predicate, ?obligation.cause.code(),
     |                         ^ expected expression
</code></pre></div>



<a name="261078299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078299">(Nov 11 2021 at 00:49)</a>:</h4>
<p>I can just longform it, like <span class="user-mention" data-user-id="232545">@Joshua Nelson</span>'s example</p>



<a name="261078346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078346">(Nov 11 2021 at 00:50)</a>:</h4>
<blockquote>
<p>event!(Level::TRACE, greeting = tracing::field::debug(&amp;my_struct));</p>
</blockquote>



<a name="261078371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078371">(Nov 11 2021 at 00:50)</a>:</h4>
<p>I'm not sure if field names can have <code>.</code> in tracing</p>



<a name="261078383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078383">(Nov 11 2021 at 00:50)</a>:</h4>
<p>seems like probably yes</p>



<a name="261078412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078412">(Nov 11 2021 at 00:51)</a>:</h4>
<p>so I think the "better" expansion is probably <code>obligation.cause.code = tracing::field::debug(&amp;obligation.cause.code()</code></p>



<a name="261078456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078456">(Nov 11 2021 at 00:51)</a>:</h4>
<p><code>debug!(?predicate, obligation.cause.code = obligation.cause.code())</code>??</p>



<a name="261078464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078464">(Nov 11 2021 at 00:51)</a>:</h4>
<p>yeah</p>



<a name="261078480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078480">(Nov 11 2021 at 00:52)</a>:</h4>
<p>well, no</p>



<a name="261078511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078511">(Nov 11 2021 at 00:52)</a>:</h4>
<p>that will use the Display impl I'd guess?</p>



<a name="261078524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078524">(Nov 11 2021 at 00:52)</a>:</h4>
<p>so you need the tracing::field::debug to get it to compile (since iirc code isn't Display-able)</p>



<a name="261078536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078536">(Nov 11 2021 at 00:52)</a>:</h4>
<p>Ok</p>



<a name="261078547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078547">(Nov 11 2021 at 00:52)</a>:</h4>
<p>but I'm not sure</p>



<a name="261078548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078548">(Nov 11 2021 at 00:53)</a>:</h4>
<p>This feels like a macro that is great for the simple cases but falls down on anything slightly complex</p>



<a name="261078550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078550">(Nov 11 2021 at 00:53)</a>:</h4>
<p><code>debug!(?predicate, "{:?}", obligation.cause.code())</code> is probably the shortest version</p>



<a name="261078571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078571">(Nov 11 2021 at 00:53)</a>:</h4>
<p>But that doesn't pritn "obligation.cause.code" in the output, right?</p>



<a name="261078577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078577">(Nov 11 2021 at 00:53)</a>:</h4>
<p>just the actual value</p>



<a name="261078686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078686">(Nov 11 2021 at 00:55)</a>:</h4>
<p>This seems to respect the existing form the best, and compiles:</p>
<div class="codehilite"><pre><span></span><code>        debug!(
            ?predicate,
            obligation.cause.code = tracing::field::debug(&amp;obligation.cause.code())
        );
</code></pre></div>



<a name="261078699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078699">(Nov 11 2021 at 00:55)</a>:</h4>
<p>Also feels really weird</p>



<a name="261078935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261078935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261078935">(Nov 11 2021 at 00:58)</a>:</h4>
<p>it might be that <code>?(obligation.cause.code())</code> would work? I don't really know what the macro does</p>



<a name="261081528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261081528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261081528">(Nov 11 2021 at 01:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/.60debug!.60.20syntax/near/261078686">said</a>:</p>
<blockquote>
<p>This seems to respect the existing form the best, and compiles:</p>
<p><div class="codehilite"><pre><span></span><code>        debug!(
            ?predicate,
            obligation.cause.code = tracing::field::debug(&amp;obligation.cause.code())
        );
</code></pre></div><br>
</p>
</blockquote>
<p>I believe that's the correct syntax.</p>



<a name="261081583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261081583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261081583">(Nov 11 2021 at 01:31)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@nnethercote</span> Also, if you'd like the field name to <em>actually</em> be <code>obligation.cause.code()</code>, you can do that with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">        </span><span class="n">debug</span><span class="o">!</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="n">predicate</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s">"obligation.cause.code()"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tracing</span>::<span class="n">field</span>::<span class="n">debug</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obligation</span><span class="p">.</span><span class="n">cause</span><span class="p">.</span><span class="n">code</span><span class="p">())</span><span class="w"></span>
<span class="w">        </span><span class="p">);</span><span class="w"></span>
</code></pre></div>



<a name="261086051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/182449-t-compiler/help/topic/%60debug%21%60%20syntax/near/261086051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/182449-t-compiler/help/topic/.60debug!.60.20syntax.html#261086051">(Nov 11 2021 at 02:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/.60debug!.60.20syntax/near/261078245">said</a>:</p>
<blockquote>
<p>I need to change it to this, but it doesn't work:</p>
<p><div class="codehilite"><pre><span></span><code>        debug!(
            ?predicate, ?obligation.cause.code(),
        );
</code></pre></div><br>
</p>
</blockquote>
<p>I've run into this limitation before too. Mostly I just use <code>#{instrument(level = "debug")]</code> (can't remember the exact syntax) since it's more automated</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
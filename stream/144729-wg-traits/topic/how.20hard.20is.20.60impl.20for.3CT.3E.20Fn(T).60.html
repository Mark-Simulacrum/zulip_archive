<html>
<head><meta charset="utf-8"><title>how hard is `impl for&lt;T&gt; Fn(T)` · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html">how hard is `impl for&lt;T&gt; Fn(T)`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277978323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277978323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277978323">(Apr 06 2022 at 05:55)</a>:</h4>
<p>bit of an open ended question- I was wondering how much work it would be to make <code>fn foo(_: impl for&lt;T&gt; Fn(T))</code> work? I would assume that it be rather easy other than the fact that we'd likely also want <code>impl for&lt;T: Trait&gt; Fn(T)</code> which im guessing is not so easy considering the ~3 or so open soundness holes that would be fixes by where clauses on binders have been open for ages</p>



<a name="277978401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277978401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277978401">(Apr 06 2022 at 05:56)</a>:</h4>
<p>somewhat relatedly are GAT bounds like <code>T: Trait&lt;for&lt;U&gt; Assoc&lt;U&gt; = U&gt;</code> and <code>for&lt;U&gt; &lt;T as Trait&gt;::Assoc&lt;U&gt;: OtherTrait</code> the same<span aria-label="tm" class="emoji emoji-2122" role="img" title="tm">:tm:</span> thing impl wise as this and mean we would likely eventually get both at the same time?</p>



<a name="277985795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277985795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277985795">(Apr 06 2022 at 07:41)</a>:</h4>
<p>Yea. If we fix the soundness bug for lifetimes, expanding the scope to types should be much easier, but I think there still are a few gotchas</p>



<a name="277985915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277985915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277985915">(Apr 06 2022 at 07:42)</a>:</h4>
<p>The debrujn (or what their name is) indices (offsets to declare which binder a lifetime belongs to) would have to be revamped or also implemented for types</p>



<a name="277985989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277985989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277985989">(Apr 06 2022 at 07:43)</a>:</h4>
<p><code>Tykind::Bound</code> already exists</p>



<a name="277986067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277986067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277986067">(Apr 06 2022 at 07:44)</a>:</h4>
<p>(the docs on it even mention solving a <code>for&lt;T&gt;</code> trait bound) <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/sty/enum.TyKind.html#variant.Bound">https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/sty/enum.TyKind.html#variant.Bound</a></p>



<a name="277986171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277986171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277986171">(Apr 06 2022 at 07:45)</a>:</h4>
<p>Hmm... gotta check how we use those</p>



<a name="277986252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277986252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277986252">(Apr 06 2022 at 07:46)</a>:</h4>
<p>it sounds like we can already solve <code>for&lt;T&gt;</code> obligatons they just only arrise from canonicalizing inference vars which is why i was thinking that it wouldnt be very hard to make <code>U: for&lt;T&gt; Trait&lt;T&gt;</code> work</p>



<a name="277994199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277994199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277994199">(Apr 06 2022 at 08:58)</a>:</h4>
<p>I think the GATs RFC mentions them in passing?  It does seem like a type-GAT is very similar to a <code>for&lt;T&gt;</code>.</p>
<p>And FWIW, <a href="https://doc.rust-lang.org/nightly/std/ops/trait.Residual.html">https://doc.rust-lang.org/nightly/std/ops/trait.Residual.html</a> is intentionally <em>not</em> a GAT, to work with more-restricted types, but I bet code would love to be able to write <code>for&lt;T&gt; Residual&lt;T&gt;</code> sometimes, instead of listing the <code>Continue</code> types it might ever need.</p>



<a name="277995435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277995435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277995435">(Apr 06 2022 at 09:09)</a>:</h4>
<p>yeah gats mentions <code>For&lt;T&gt;</code> but only in "we arent adding this in the gats feature"</p>



<a name="277996634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277996634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277996634">(Apr 06 2022 at 09:21)</a>:</h4>
<p>for&lt;'a&gt; is not all that ergonomic as you only get a single chance at applying it I believe. typechecking of higher ranked types is undecidable.</p>



<a name="277996691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277996691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277996691">(Apr 06 2022 at 09:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn.28T.29.60/near/277994199">said</a>:</p>
<blockquote>
<p>I think the GATs RFC mentions them in passing?  It does seem like a type-GAT is very similar to a <code>for&lt;T&gt;</code>.</p>
<p>And FWIW, <a href="https://doc.rust-lang.org/nightly/std/ops/trait.Residual.html">https://doc.rust-lang.org/nightly/std/ops/trait.Residual.html</a> is intentionally <em>not</em> a GAT, to work with more-restricted types, but I bet code would love to be able to write <code>for&lt;T&gt; Residual&lt;T&gt;</code> sometimes, instead of listing the <code>Continue</code> types it might ever need.</p>
</blockquote>
<p>oh thats actually a pretty interesting case, I guess <code>trait Foo&lt;T&gt;</code> is more powerful than <code>trait Foo { type Assoc&lt;T&gt;</code> in some ways because you can decide whether to implement it for _all_ <code>T</code> or just some <code>T</code>... and in a world where <code>U: for&lt;T&gt; Foo&lt;T&gt;</code> worked that would actually be perfectly fine since you could accept only the types that are implemented for all of them...</p>



<a name="277996806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277996806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277996806">(Apr 06 2022 at 09:22)</a>:</h4>
<p>You could emulate <code>for&lt;T&gt; fn(T)</code> using <code>trait GatFn { type Fn&lt;T&gt;: Fn(T); }</code> I think. Or does it not support the bound depending on the generic?</p>



<a name="277996866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277996866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277996866">(Apr 06 2022 at 09:23)</a>:</h4>
<p>not sure what you would write for the trait impl</p>



<a name="277996963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277996963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277996963">(Apr 06 2022 at 09:24)</a>:</h4>
<p><code>trait GatFn { const FN&lt;T&gt;: fn(T) }</code> i can imagine making work <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="277997344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277997344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277997344">(Apr 06 2022 at 09:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn.28T.29.60/near/277996691">said</a>:</p>
<blockquote>
<p>oh thats actually a pretty interesting case, I guess <code>trait Foo&lt;T&gt;</code> is more powerful than <code>trait Foo { type Assoc&lt;T&gt;</code> in some ways because you can decide whether to implement it for _all_ <code>T</code> or just some <code>T</code></p>
</blockquote>
<p>Yeah, I'm definitely picturing that we might hit some things like "I can't implement that trait because I can only do <code>type Foo&lt;T: Copy&gt;</code>, not <em>any</em> <code>T</code>" or something.  Or how <code>type Foo&lt;T&gt; = Cow&lt;T&gt;;</code> can't work, for example, since it needs a bound.</p>



<a name="277997451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/277997451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#277997451">(Apr 06 2022 at 09:28)</a>:</h4>
<p>more reasons to avoid bounds on type definitions <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="278027361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278027361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278027361">(Apr 06 2022 at 13:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn.28T.29.60/near/277996634">said</a>:</p>
<blockquote>
<p>for&lt;'a&gt; is not all that ergonomic as you only get a single chance at applying it I believe</p>
</blockquote>
<p>Would something like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Iter</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Iter</span>: <span class="nb">Iterator</span> <span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="na">a</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Be possible?</p>



<a name="278027759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278027759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278027759">(Apr 06 2022 at 14:02)</a>:</h4>
<p>Not right now. I don't know whether ir not it is feasible in the future.</p>



<a name="278032307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278032307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278032307">(Apr 06 2022 at 14:33)</a>:</h4>
<p>its just a syntax problem isnt it</p>



<a name="278032362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278032362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278032362">(Apr 06 2022 at 14:33)</a>:</h4>
<p>like if you could write <code>for&lt;'a&gt; &lt;F as Fn&lt;(&amp;'a str),&gt;&gt;::Output: Iterator + 'a</code></p>



<a name="278053592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278053592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278053592">(Apr 06 2022 at 16:53)</a>:</h4>
<p>It's not always a syntax problem -- Ibraheem's example shows when you want the input's lifetime to be related to the output, for example</p>



<a name="278053730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278053730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278053730">(Apr 06 2022 at 16:54)</a>:</h4>
<p>right but does <code>for&lt;'a&gt; &lt;F as Fn&lt;(&amp;'a str,)&gt;&gt;::Output: Iterator + 'a</code> not accomplish this in a world where <code>Fn*</code> traits arent special and let you actually access the assoc ty</p>



<a name="278053787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278053787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278053787">(Apr 06 2022 at 16:54)</a>:</h4>
<p>or is there some compiler type system limitation thing as to why we dont allow access to the assoc type directly and its not just a "we arent sure what the trait definition should be for stabilisation"</p>



<a name="278054142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278054142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278054142">(Apr 06 2022 at 16:57)</a>:</h4>
<p>oh there isn't any special magic about accssing the associated type as far as i can tell, it acts just like any other</p>



<a name="278054189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278054189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278054189">(Apr 06 2022 at 16:57)</a>:</h4>
<p>i'm more thinking about cases where splitting up the <code>for&lt;'a&gt;</code> causes one of them to become impossible</p>



<a name="278054497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278054497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278054497">(Apr 06 2022 at 16:59)</a>:</h4>
<p>do you have examples of that? <del>though im a bit concerned my original question in this thread is gonna get burried lol</del></p>



<a name="278054634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278054634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278054634">(Apr 06 2022 at 17:00)</a>:</h4>
<p>nah, but yeah i don't want to digress</p>



<a name="278054816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278054816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278054816">(Apr 06 2022 at 17:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn.28T.29.60/near/277978401">said</a>:</p>
<blockquote>
<p>somewhat relatedly are GAT bounds like <code>T: Trait&lt;for&lt;U&gt; Assoc&lt;U&gt; = U&gt;</code> and <code>for&lt;U&gt; &lt;T as Trait&gt;::Assoc&lt;U&gt;: OtherTrait</code> the same<span aria-label="tm" class="emoji emoji-2122" role="img" title="tm">:tm:</span> thing impl wise as this and mean we would likely eventually get both at the same time?</p>
</blockquote>
<p>GAT bounds like the former don't exist as syntax yet, but they are functionally equivalent to <code>for&lt;U&gt; Trait&lt;Assoc&lt;U&gt; = U&gt;</code> -- the <code>for&lt;..&gt;</code> inside the doesn't do anything special to the GAT</p>



<a name="278054934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278054934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278054934">(Apr 06 2022 at 17:02)</a>:</h4>
<p>yeah I just wrote the for there cos i prefer it syntactically</p>



<a name="278054954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278054954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278054954">(Apr 06 2022 at 17:02)</a>:</h4>
<p>i should not have done so in order to minimize comments xD</p>



<a name="278055375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278055375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278055375">(Apr 06 2022 at 17:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn.28T.29.60/near/277978323">said</a>:</p>
<blockquote>
<p>bit of an open ended question- I was wondering how much work it would be to make <code>fn foo(_: impl for&lt;T&gt; Fn(T))</code> work? I would assume that it be rather easy other than the fact that we'd likely also want <code>impl for&lt;T: Trait&gt; Fn(T)</code> which im guessing is not so easy considering the ~3 or so open soundness holes that would be fixes by where clauses on binders have been open for ages</p>
</blockquote>
<p>The first example "should" work -- not sure if the logic exists to instantiate higher-kinded type bounds exists, but it doesn't seem ridiculously out of reach.</p>



<a name="278055383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278055383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278055383">(Apr 06 2022 at 17:05)</a>:</h4>
<p>But where clauses on binders seems like a whole nother level of bookkeeping, cause they're basically <code>A =&gt; B</code> implications...?</p>



<a name="278056127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278056127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278056127">(Apr 06 2022 at 17:11)</a>:</h4>
<p>Yeah I feel like I vaguelly recall someone mentioning that where clauses on binders was a polonius thing <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="278056257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278056257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278056257">(Apr 06 2022 at 17:12)</a>:</h4>
<p>perhaps a chalk thing? where clauses on binders (other than region-outlives-region) doesnt seem like sth polonius would care about <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="278056294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278056294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278056294">(Apr 06 2022 at 17:12)</a>:</h4>
<p>yeah its the region outlives stuff that i think made it relevent to polonius idk xD</p>



<a name="278056328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278056328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278056328">(Apr 06 2022 at 17:13)</a>:</h4>
<p>_extremeely not familiar with how polonius and chalk and rustc all fit together conceptually rn or planned in the future_</p>



<a name="278056410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278056410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278056410">(Apr 06 2022 at 17:13)</a>:</h4>
<p>yeah, those seem relevant to polonius then, and also particularly easier to handle, since they don't participate in trait selection afaik</p>



<a name="278108331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278108331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278108331">(Apr 07 2022 at 01:41)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> <a href="#narrow/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn.28T.29.60/near/277996634">said</a>:</p>
<blockquote>
<p>for&lt;'a&gt; is not all that ergonomic as you only get a single chance at applying it I believe. typechecking of higher ranked types is undecidable.</p>
</blockquote>
<p>Do you have a source? I'm curious whether that actually applies to rust (with or without various type system extensions like GATs, const eval, trait bounds, lifetimes, etc)</p>



<a name="278119298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278119298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278119298">(Apr 07 2022 at 05:32)</a>:</h4>
<p>eg <a href="https://cstheory.stackexchange.com/questions/37523/higher-rank-polymorphism-over-unboxed-types">https://cstheory.stackexchange.com/questions/37523/higher-rank-polymorphism-over-unboxed-types</a></p>
<blockquote>
<p>In general rank-2 polymorphism has decidable type-inference but for rank k&gt;2 type-inference is undecidable.</p>
</blockquote>



<a name="278119739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278119739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278119739">(Apr 07 2022 at 05:42)</a>:</h4>
<p>As I understand it, the problem is with ML style expressions with nested lambdas over higher order variables, and I don't think any of that is expressible in rust. (Or maybe it is with this addition? Hard to say.) I was hoping for a more concrete example to see if it was possible to rewrite the example in rust, because this fact about higher order unification and type inference is something I have heard before but I couldn't give an explicit example of it if needed.</p>



<a name="278119841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278119841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278119841">(Apr 07 2022 at 05:44)</a>:</h4>
<p>Even if it is undecidable, it might still be possible to implement as in haskell, where this just means that types have to be provided sometimes when using <code>RankNTypes</code></p>



<a name="278120892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278120892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278120892">(Apr 07 2022 at 06:05)</a>:</h4>
<p>That providing of types is what can be painful as eg providing types for closures can require an identity function through which the closure is passed to force the correct lifetimes.</p>



<a name="278122259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278122259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278122259">(Apr 07 2022 at 06:30)</a>:</h4>
<p>isn't that an indication that correct and complete type inference is <em>already</em> not possible in rust? The workarounds are already well known</p>



<a name="278122404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278122404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278122404">(Apr 07 2022 at 06:33)</a>:</h4>
<p>I think the analogue of this for <code>for&lt;T&gt;</code> bounds is that we can't infer that <code>let foo = |f| f(0u32)</code> is supposed to be <code>foo: fn(impl for&lt;T&gt; Fn(T))</code> vs <code>foo: fn(impl Fn(u32))</code>, which doesn't seem like a huge loss</p>



<a name="278122558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278122558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278122558">(Apr 07 2022 at 06:36)</a>:</h4>
<p>That is, I don't see any indication that <code>for&lt;T&gt;</code> bounds would be any worse than the status quo with regard to type inference</p>



<a name="278122692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278122692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278122692">(Apr 07 2022 at 06:38)</a>:</h4>
<p>I found this paper which is relevant: <a href="https://www.microsoft.com/en-us/research/publication/practical-type-inference-for-arbitrary-rank-types/">https://www.microsoft.com/en-us/research/publication/practical-type-inference-for-arbitrary-rank-types/</a> . The thrust of it seems to be that although it is difficult to infer the types in absence of annotations, it suffices to propagate type information from the functions to applications, which is essentially what we already do when it comes to higher order closure type inference</p>



<a name="278122833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278122833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278122833">(Apr 07 2022 at 06:41)</a>:</h4>
<p>We also have issues like <a href="https://github.com/rust-lang/rust/issues/90950">https://github.com/rust-lang/rust/issues/90950</a> A list: <a href="https://github.com/rust-lang/rust/issues?q=is%3Aissue+is%3Aopen+HRTB">https://github.com/rust-lang/rust/issues?q=is%3Aissue+is%3Aopen+HRTB</a></p>



<a name="278131734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278131734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giacomo Stevanato <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278131734">(Apr 07 2022 at 08:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn.28T.29.60/near/278053730">said</a>:</p>
<blockquote>
<p>right but does <code>for&lt;'a&gt; &lt;F as Fn&lt;(&amp;'a str,)&gt;&gt;::Output: Iterator + 'a</code> not accomplish this in a world where <code>Fn*</code> traits arent special and let you actually access the assoc ty</p>
</blockquote>
<p>AFAIK you can already emulate this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Helper</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Output</span>: <span class="o">'</span><span class="na">a</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="n">F</span><span class="p">,</span><span class="w"> </span><span class="n">I</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Helper</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">F</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">I</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">I</span>: <span class="nb">Iterator</span> <span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="na">a</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Then you can use <code>F: for&lt;'a&gt; Helper&lt;'a&gt;</code>. The downside is that you'll murder type inference because now the bound is not directly on <code>Fn</code> anymore, and rustc will likely infer a non-HRTB closure at call site. See <a href="https://github.com/rust-lang/rust/issues/70263">rust-lang/rust#70263</a></p>



<a name="278158312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/how%20hard%20is%20%60impl%20for%3CT%3E%20Fn%28T%29%60/near/278158312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/how.20hard.20is.20.60impl.20for.3CT.3E.20Fn(T).60.html#278158312">(Apr 07 2022 at 12:46)</a>:</h4>
<p>HRTB type hints solves that though.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
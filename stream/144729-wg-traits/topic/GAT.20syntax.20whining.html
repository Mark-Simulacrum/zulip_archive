<html>
<head><meta charset="utf-8"><title>GAT syntax whining · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html">GAT syntax whining</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="248271339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248271339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248271339">(Aug 03 2021 at 19:53)</a>:</h4>
<p>The location of this <code>where</code> clause feels all sorts of wrong:</p>
<div class="codehilite"><pre><span></span><code>type Item&lt;&#39;a&gt; where Self: &#39;a = &amp;&#39;a mut [T];
</code></pre></div>
<p>I'm sure there's a good reason for it. Why can't it be</p>
<div class="codehilite"><pre><span></span><code>type Item&lt;&#39;a&gt; = &amp;&#39;a mut [T]
where
    Self: &#39;a;
</code></pre></div>



<a name="248273645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248273645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248273645">(Aug 03 2021 at 20:09)</a>:</h4>
<p>I will admit that it seems to make more sense for the <code>where</code> clause to be after the type</p>



<a name="248278378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248278378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248278378">(Aug 03 2021 at 20:48)</a>:</h4>
<p>My brain does a bit of a segfault when I see <code>'a = &amp;'a</code>. Then I backtrack and try to make <code>'a = &amp;'a mut [T]</code> into a trait.</p>



<a name="248278681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248278681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248278681">(Aug 03 2021 at 20:50)</a>:</h4>
<p>The current order has parallels with other kinds of items where the <code>where</code> is between the name and body.</p>



<a name="248281261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248281261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248281261">(Aug 03 2021 at 21:08)</a>:</h4>
<p>I think the the RHS is conceptually more of a 'header' than a 'body' here</p>



<a name="248281281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248281281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248281281">(Aug 03 2021 at 21:08)</a>:</h4>
<p>similar to how we have <code>fn foo() where Type: Trait {}</code></p>



<a name="248281361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248281361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248281361">(Aug 03 2021 at 21:09)</a>:</h4>
<p>and I also had trouble reading <code>type Item&lt;'a&gt; where Self: 'a = &amp;'a mut [T];</code> - it looked like we were assigning to the <code>Self: 'a</code>,</p>



<a name="248281994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248281994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248281994">(Aug 03 2021 at 21:13)</a>:</h4>
<p>normal type aliases can already have bounds in that place right now in stable Rust, even if not enforced</p>



<a name="248320020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248320020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248320020">(Aug 04 2021 at 07:51)</a>:</h4>
<p>Even if we don't change it in the grammar, the parser will need to be able to do so, because I fully expect people to try to write them both ways...</p>



<a name="248323928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248323928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giacomo Stevanato <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248323928">(Aug 04 2021 at 08:40)</a>:</h4>
<p>Note however that this is kinda inconsistent with trait aliases since they're written as <code>trait Alias = Supertrait where SomeType: SomeBound;</code><br>
However changing this makes it inconsistent with how supertraits are defined since you have to put them before the where clauses.</p>



<a name="248341423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/248341423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#248341423">(Aug 04 2021 at 12:13)</a>:</h4>
<p>If we will be inconsistent with some other part of Rust anyway, I'd propose changing it away from the current form <span aria-label="innocent" class="emoji emoji-1f607" role="img" title="innocent">:innocent:</span> .</p>
<p>Has anyone talked with a rustfmt developer about how the current form would be formatted?</p>



<a name="249525053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249525053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> CraftSpider <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249525053">(Aug 15 2021 at 18:30)</a>:</h4>
<p>I'd just like to add my support to moving the where clause after the <code>= ...</code>, the current syntax I both have to spend more time to read and to type. Anecdotal evidence and all, but figured I'd mention that I also am having issues with it.</p>



<a name="249567912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249567912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249567912">(Aug 16 2021 at 09:49)</a>:</h4>
<p>I think we'd like input from <span class="user-group-mention" data-user-group-id="1977">@T-lang</span> for the questions raised here :)</p>



<a name="249605375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249605375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249605375">(Aug 16 2021 at 15:39)</a>:</h4>
<p>I agree that the syntax hurts my head every time</p>



<a name="249680714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249680714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249680714">(Aug 17 2021 at 05:42)</a>:</h4>
<p>I also agree that the current proposed syntax seems easily misread.</p>



<a name="249723032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249723032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249723032">(Aug 17 2021 at 14:02)</a>:</h4>
<p>maybe we could just put delimiters around the <code>where</code>-clause in this case?  Something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">Item</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="bp">Self</span>: <span class="o">'</span><span class="na">a</span> <span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">];</span><span class="w"></span>
</code></pre></div>



<a name="249723556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249723556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249723556">(Aug 17 2021 at 14:06)</a>:</h4>
<p>but honestly I’d be fine with putting the <code>where</code>-clause after the RHS too. I think. (The only reason I can think of not to do so would be if there was some worry that it would be an interpreted as some sort of conditional on whether the RHS is used, as opposed to a constraint on the generic parameter of the GAT itself.)</p>



<a name="249724974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249724974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249724974">(Aug 17 2021 at 14:15)</a>:</h4>
<p>So, seems like there's strong support for moving where clauses on GATs to <em>after</em> the type. I'll probably make a PR for this sometime soon (this week is busy for me)</p>



<a name="249725238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249725238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249725238">(Aug 17 2021 at 14:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/144729-wg-traits/topic/GAT.20syntax.20whining/near/249723556">said</a>:</p>
<blockquote>
<p>The only reason I can think of not to do so would be if there was some worry that it would be an interpreted as some sort of conditional on whether the RHS is used, as opposed to a constraint on the generic parameter of the GAT itself.</p>
</blockquote>
<p>I'm not really worried about this</p>



<a name="249725678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249725678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249725678">(Aug 17 2021 at 14:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/144729-wg-traits/topic/GAT.20syntax.20whining/near/248281994">said</a>:</p>
<blockquote>
<p>normal type aliases can already have bounds in that place right now in stable Rust, even if not enforced</p>
</blockquote>
<p>I wonder what people's thoughts are on <em>also</em> changing it for type aliases (for if/when they <em>are</em> enforced). At worst, we can just allow where clauses in both places for type aliases (and warn in current position). At best, we can deprecate and maybe eventually just disallow given that it's already a warning.</p>



<a name="249725822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249725822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249725822">(Aug 17 2021 at 14:21)</a>:</h4>
<p>that's why I'm not a fan of it. you're just repeating the where clauses of the definition here, right? so you have</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">Item</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="bp">Self</span>: <span class="o">'</span><span class="na">a</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>in the trait and then</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">Item</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="bp">Self</span>: <span class="o">'</span><span class="na">a</span> <span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">];</span><span class="w"></span>
</code></pre></div>
<p>in the impl, so for me <code>type Item&lt;'a&gt; where Self: 'a</code> is the 'header' and <code>= &amp;'a mut [T]</code> is the body. I agree that it's annoying to read though, but formatting could help:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">Item</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="bp">Self</span>: <span class="o">'</span><span class="na">a</span>
    <span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">];</span><span class="w"></span>
</code></pre></div>



<a name="249726042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249726042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249726042">(Aug 17 2021 at 14:23)</a>:</h4>
<p>actually rustfmt will right now already put where clauses for functions on another line anyway, so why not do the same for types</p>



<a name="249740097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249740097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> CraftSpider <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249740097">(Aug 17 2021 at 16:02)</a>:</h4>
<p>I prefer the follow syntax because it looks cleaner to me, and more like a function sig.</p>
<div class="codehilite"><pre><span></span><code>type Item&lt;&#39;a&gt;
where
    Self: &#39;a;
</code></pre></div>
<p>and</p>
<div class="codehilite"><pre><span></span><code>type Item&lt;&#39;a&gt; = &amp;&#39;a [i32]
where
    Self: &#39;a
</code></pre></div>
<p>feels like it more match how a functions whole signature comes before the where.</p>



<a name="249741547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249741547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249741547">(Aug 17 2021 at 16:12)</a>:</h4>
<p>for me the <code>= &lt;type&gt;</code> is the 'body', not part of the 'signature'</p>



<a name="249751928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249751928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249751928">(Aug 17 2021 at 17:33)</a>:</h4>
<p><code>struct Foo&lt;T&gt;(T) where T: Copy;</code> feels more like <code>type Item&lt;'a&gt; = &amp;'a u32 where Self: 'a;</code> to me.  It's not <code>struct Foo&lt;T&gt; where T: Copy (T);</code>.</p>



<a name="249755995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249755995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249755995">(Aug 17 2021 at 18:05)</a>:</h4>
<p>(Well, it is <code>struct Foo&lt;T: Copy&gt;(T)</code> tho)<br>
although honestly I agree, putting the <code>where</code> after feels more consistent.</p>



<a name="249756634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249756634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249756634">(Aug 17 2021 at 18:11)</a>:</h4>
<p>(Yes, it'd be <code>type Item&lt;'a: 'b&gt; = ...;</code> for things that can go there.)</p>



<a name="249834689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249834689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249834689">(Aug 18 2021 at 11:17)</a>:</h4>
<p>Why is it necessary to repeat the <code>where</code> clauses in the first place? Is that something that could potentially be changed?</p>



<a name="249860877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249860877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249860877">(Aug 18 2021 at 14:49)</a>:</h4>
<p>It's a bit tricky. In general, the impl can require fewer things than the trait. Right now we don't take advantage of that but there have been proposals to do so -- e.g., to permit the impl to not use <code>unsafe</code> on a method and then to have callers who <em>know the type</em> not need to write <code>unsafe</code></p>



<a name="249860893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249860893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249860893">(Aug 18 2021 at 14:49)</a>:</h4>
<p>All that said, I'd like to default this <code>where Self: 'a</code> bound</p>



<a name="249860910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249860910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249860910">(Aug 18 2021 at 14:49)</a>:</h4>
<p>but the syntax for where clauses is still worth discussing</p>



<a name="249861022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249861022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249861022">(Aug 18 2021 at 14:50)</a>:</h4>
<p>despite the incongruity, I do feel that</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bar</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>somehow "looks right" to me, even though <code>= Foo</code> is the body</p>



<a name="249975473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249975473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249975473">(Aug 19 2021 at 11:58)</a>:</h4>
<p>Re. requiring fewer things, to me it really seems like just shadowing via an inherent item of the same name would be less confusing. And it's not currently allowed anywhere in traits to have the impl be more general than the trait definition, right? (e.g. leave out bounds on generic trait methods)</p>



<a name="249975552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/249975552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#249975552">(Aug 19 2021 at 11:59)</a>:</h4>
<p>Re. defaulting to <code>where Self: 'a</code>, I haven't actually seen a proposal for what opt-out would look like, am I missing sth.?</p>



<a name="250023157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250023157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250023157">(Aug 19 2021 at 18:01)</a>:</h4>
<p>It is allowed for the impl to be more general in numerous places</p>



<a name="250023230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250023230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250023230">(Aug 19 2021 at 18:02)</a>:</h4>
<p>I believe for example you can leave out generic bounds</p>



<a name="250023338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250023338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250023338">(Aug 19 2021 at 18:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="198047">jplatte</span> <a href="#narrow/stream/144729-wg-traits/topic/GAT.20syntax.20whining/near/249975552">said</a>:</p>
<blockquote>
<p>Re. defaulting to <code>where Self: 'a</code>, I haven't actually seen a proposal for what opt-out would look like, am I missing sth.?</p>
</blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/87479">https://github.com/rust-lang/rust/issues/87479</a></p>



<a name="250023371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250023371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250023371">(Aug 19 2021 at 18:02)</a>:</h4>
<p>not had much time to follow up here</p>



<a name="250106196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250106196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250106196">(Aug 20 2021 at 11:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/144729-wg-traits/topic/GAT.20syntax.20whining/near/250023157">said</a>:</p>
<blockquote>
<p>It is allowed for the impl to be more general in numerous places</p>
</blockquote>
<p>Huh, interesting. Didn't know about that.</p>



<a name="250106393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250106393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250106393">(Aug 20 2021 at 11:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/144729-wg-traits/topic/GAT.20syntax.20whining/near/250023338">said</a>:</p>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/87479">https://github.com/rust-lang/rust/issues/87479</a></p>
</blockquote>
<p>Right, I've read and am subscribed to that. No syntax suggested there for opting out AFAICT.</p>



<a name="250174688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250174688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250174688">(Aug 20 2021 at 21:26)</a>:</h4>
<p>I have to catch up on the latest comments there</p>



<a name="250174703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GAT%20syntax%20whining/near/250174703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GAT.20syntax.20whining.html#250174703">(Aug 20 2021 at 21:26)</a>:</h4>
<p>I would hope we can come up with a defaulting scheme that is sufficiently precise that one does not <em>need</em> a syntax for opting out</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
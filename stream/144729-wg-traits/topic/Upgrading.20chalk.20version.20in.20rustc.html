<html>
<head><meta charset="utf-8"><title>Upgrading chalk version in rustc · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html">Upgrading chalk version in rustc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="211125651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211125651" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211125651">(Sep 24 2020 at 12:47)</a>:</h4>
<p>I would like to try to upgrade rustc's chalk version. Would that be a useful contribution? First small step <a href="https://github.com/rust-lang/rust/pull/77141">here</a>.</p>



<a name="211142977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211142977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211142977">(Sep 24 2020 at 14:55)</a>:</h4>
<p>Definitely useful :) I'm interested in how many tests pass in compare-mode=chalk with the auto traits for builtin types changes</p>



<a name="211149663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211149663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211149663">(Sep 24 2020 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> could you give me a pointer <a href="https://github.com/rust-lang/rust/pull/77152/files#diff-fb3a6b5e33761d7621334a6bb5a6c4daR341">here</a>?</p>



<a name="211150095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211150095" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211150095">(Sep 24 2020 at 15:44)</a>:</h4>
<p>So, I would probably match on <code>(self_ty.kind(), app_ty.name)</code></p>



<a name="211150159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211150159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211150159">(Sep 24 2020 at 15:45)</a>:</h4>
<p>And your branches would be like <code>(Adt, Adt)</code></p>



<a name="211150161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211150161" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211150161">(Sep 24 2020 at 15:45)</a>:</h4>
<p>And such</p>



<a name="211151469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211151469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211151469">(Sep 24 2020 at 15:54)</a>:</h4>
<p>I gave that a try, you can now review.</p>



<a name="211153955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211153955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211153955">(Sep 24 2020 at 16:11)</a>:</h4>
<p><span class="user-mention" data-user-id="323979">@Bram van den Heuvel</span> you'll also want to match the other <code>TypeName</code>s too</p>



<a name="211165325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211165325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211165325">(Sep 24 2020 at 17:40)</a>:</h4>
<p>Which command would you use to see how many tests pass? <code>x.py test --compare-mode chalk</code> or some more flags?</p>



<a name="211169628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211169628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211169628">(Sep 24 2020 at 18:12)</a>:</h4>
<p>I do <code>./x.py test --stage 1 --compare-mode chalk</code></p>



<a name="211173313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211173313" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211173313">(Sep 24 2020 at 18:44)</a>:</h4>
<p><code>./x.py test -i --stage 0 --compare-mode chalk</code>: FAILED. 9527 passed; 1215 failed; 72 ignored; 0 measured; 0 filtered out,<br>
<code>./x.py test -i --stage 1 --compare-mode chalk</code> did not terminate.</p>



<a name="211175814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211175814" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211175814">(Sep 24 2020 at 19:05)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> please let me know whether I captured your concern correctly with the title of <a href="https://github.com/rust-lang/wg-traits/issues/26">the issue I filed</a>.</p>



<a name="211176044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211176044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211176044">(Sep 24 2020 at 19:07)</a>:</h4>
<p>I don't expect stage 1 to terminate, right now. (Known already). It's part of the reason why everything now is just a glance and estimate</p>



<a name="211176141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211176141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211176141">(Sep 24 2020 at 19:08)</a>:</h4>
<p><span class="user-mention" data-user-id="323979">@Bram van den Heuvel</span> you probably want to close your update to 0.24 PR</p>



<a name="211176270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211176270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211176270">(Sep 24 2020 at 19:09)</a>:</h4>
<p>Thanks, I was just considering that.</p>



<a name="211176876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211176876" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211176876">(Sep 24 2020 at 19:12)</a>:</h4>
<p>Thanks for the PR <span class="user-mention" data-user-id="323979">@Bram van den Heuvel</span>  <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="211422396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211422396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211422396">(Sep 27 2020 at 15:58)</a>:</h4>
<p>With chalk <code>0.29.0</code> about 20% of tests pass with <code>x.py test --stage 1 --compare-mode chalk</code>.</p>



<a name="211422986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211422986" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211422986">(Sep 27 2020 at 16:13)</a>:</h4>
<p>Wooh, that's progress :)</p>



<a name="211422997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211422997" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211422997">(Sep 27 2020 at 16:13)</a>:</h4>
<p>If you have time and want to, it would definitely be helpful to "triage" the failing tests</p>



<a name="211423047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211423047" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211423047">(Sep 27 2020 at 16:14)</a>:</h4>
<p>i.e. start going through them and trying to split them into categories</p>



<a name="211423759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211423759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211423759">(Sep 27 2020 at 16:33)</a>:</h4>
<p>Nice!</p>



<a name="211423836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Upgrading%20chalk%20version%20in%20rustc/near/211423836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Upgrading.20chalk.20version.20in.20rustc.html#211423836">(Sep 27 2020 at 16:35)</a>:</h4>
<p>Some tests might be failing for multiple reasons, but it'll help to see what the big problems are atm. I expect auto traits might be a big one, but there might be others that are more surprising, and possibly easier to fix</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
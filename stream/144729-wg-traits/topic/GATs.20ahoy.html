<html>
<head><meta charset="utf-8"><title>GATs ahoy · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html">GATs ahoy</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="247191770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247191770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247191770">(Jul 26 2021 at 11:48)</a>:</h4>
<p>Btw, <span class="user-mention" data-user-id="232957">@Jack Huey</span>, I'm around today, but would prefer to sync over Zulip</p>



<a name="247191784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247191784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247191784">(Jul 26 2021 at 11:49)</a>:</h4>
<p>(when the time comes)</p>



<a name="247196349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247196349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247196349">(Jul 26 2021 at 12:43)</a>:</h4>
<p>That worke for me</p>



<a name="247198152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247198152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247198152">(Jul 26 2021 at 12:59)</a>:</h4>
<p>Gonna be a couple minutes late. In the meantime, can you look at the blog post?</p>



<a name="247198421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247198421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247198421">(Jul 26 2021 at 13:01)</a>:</h4>
<p>Yep</p>



<a name="247198801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247198801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247198801">(Jul 26 2021 at 13:04)</a>:</h4>
<p>Ok here</p>



<a name="247198836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247198836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247198836">(Jul 26 2021 at 13:04)</a>:</h4>
<p>I am still reading blog post :)</p>



<a name="247199018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199018" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199018">(Jul 26 2021 at 13:06)</a>:</h4>
<p>No worries</p>



<a name="247199066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199066">(Jul 26 2021 at 13:06)</a>:</h4>
<p>I figure if you read through, there's no reason not to be able to publish today, I don't think.</p>



<a name="247199165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199165">(Jul 26 2021 at 13:07)</a>:</h4>
<p>I think it's good</p>



<a name="247199198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199198">(Jul 26 2021 at 13:07)</a>:</h4>
<p>I'm debating if we could do more to give the "TL;DR' or why you should care about this</p>



<a name="247199253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199253">(Jul 26 2021 at 13:08)</a>:</h4>
<p>but I think we don't have to</p>



<a name="247199298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199298">(Jul 26 2021 at 13:08)</a>:</h4>
<p>given that it's still unstable etc etc I think we can hold off on devoting a lot of script to explaining how great it is</p>



<a name="247199308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199308">(Jul 26 2021 at 13:08)</a>:</h4>
<p>and the examples are really good</p>



<a name="247199339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199339">(Jul 26 2021 at 13:08)</a>:</h4>
<p>I'm thinking mostly of folks who dont know rust especially well, they may not be able to follow, but then they probably aren't the ones who are going to try it at this phase</p>



<a name="247199382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199382">(Jul 26 2021 at 13:09)</a>:</h4>
<p>Right</p>



<a name="247199515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199515">(Jul 26 2021 at 13:10)</a>:</h4>
<p>Okay, so I'll address the 3 review comments and change the date to today</p>



<a name="247199518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199518">(Jul 26 2021 at 13:10)</a>:</h4>
<p>Then you think it's good?</p>



<a name="247199701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199701">(Jul 26 2021 at 13:12)</a>:</h4>
<p>I'm thinking</p>



<a name="247199719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199719">(Jul 26 2021 at 13:12)</a>:</h4>
<p>I was thinking about the "lending iterator" example</p>



<a name="247199726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199726">(Jul 26 2021 at 13:12)</a>:</h4>
<p>I wonder if we could just add a short paragraph up front like this:</p>



<a name="247199771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199771">(Jul 26 2021 at 13:12)</a>:</h4>
<p>Maybe it will never be short</p>



<a name="247199822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199822">(Jul 26 2021 at 13:13)</a>:</h4>
<p>--- yes, it's good :)</p>



<a name="247199842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199842">(Jul 26 2021 at 13:13)</a>:</h4>
<p>I'm looking up some old blog posts of mine</p>



<a name="247199856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199856">(Jul 26 2021 at 13:13)</a>:</h4>
<p>e.g. <a href="https://smallcultfollowing.com/babysteps/blog/2016/11/02/associated-type-constructors-part-1-basic-concepts-and-introduction/">https://smallcultfollowing.com/babysteps/blog/2016/11/02/associated-type-constructors-part-1-basic-concepts-and-introduction/</a></p>



<a name="247199939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199939">(Jul 26 2021 at 13:14)</a>:</h4>
<p>we could maybe link to those posts, though we'd have to explain the shift in terminology</p>



<a name="247199952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199952">(Jul 26 2021 at 13:14)</a>:</h4>
<p>honestly i'm not sure how accessible they are anyway</p>



<a name="247199981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247199981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247199981">(Jul 26 2021 at 13:14)</a>:</h4>
<p>Hmm</p>



<a name="247200002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200002">(Jul 26 2021 at 13:14)</a>:</h4>
<p>there are several follow-up posts:</p>
<ul>
<li><a href="https://smallcultfollowing.com/babysteps/blog/2016/11/03/associated-type-constructors-part-2-family-traits/">https://smallcultfollowing.com/babysteps/blog/2016/11/03/associated-type-constructors-part-2-family-traits/</a></li>
<li><a href="https://smallcultfollowing.com/babysteps/blog/2016/11/04/associated-type-constructors-part-3-what-higher-kinded-types-might-look-like/">https://smallcultfollowing.com/babysteps/blog/2016/11/04/associated-type-constructors-part-3-what-higher-kinded-types-might-look-like/</a></li>
<li><a href="https://smallcultfollowing.com/babysteps/blog/2016/11/09/associated-type-constructors-part-4-unifying-atc-and-hkt/">https://smallcultfollowing.com/babysteps/blog/2016/11/09/associated-type-constructors-part-4-unifying-atc-and-hkt/</a></li>
</ul>



<a name="247200003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200003">(Jul 26 2021 at 13:14)</a>:</h4>
<p>I would say it's probably not worth it</p>



<a name="247200009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200009">(Jul 26 2021 at 13:14)</a>:</h4>
<p>I agree</p>



<a name="247200021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200021">(Jul 26 2021 at 13:15)</a>:</h4>
<p>better to just write some new posts</p>



<a name="247200030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200030">(Jul 26 2021 at 13:15)</a>:</h4>
<p>ok, ship it :)</p>



<a name="247200053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200053">(Jul 26 2021 at 13:15)</a>:</h4>
<p>Okay, I'll make the changes and cc core</p>



<a name="247200089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200089">(Jul 26 2021 at 13:15)</a>:</h4>
<p>Okay, so</p>



<a name="247200099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200099">(Jul 26 2021 at 13:15)</a>:</h4>
<p>For other things to discuss</p>



<a name="247200119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200119">(Jul 26 2021 at 13:15)</a>:</h4>
<p>I've been working through GATs issues</p>



<a name="247200193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200193">(Jul 26 2021 at 13:16)</a>:</h4>
<p>Already got one diagnostics PR merged (implicit static in trait objects in GATs)</p>



<a name="247200211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200211">(Jul 26 2021 at 13:16)</a>:</h4>
<p>Nice</p>



<a name="247200218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200218">(Jul 26 2021 at 13:16)</a>:</h4>
<p>There's <a href="https://github.com/rust-lang/rust/issues/84931">#84931</a></p>



<a name="247200258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200258">(Jul 26 2021 at 13:16)</a>:</h4>
<p>Which basically just needs to just adding a <code>where</code> clause on GATs instead of a lifetime bound on the type param</p>



<a name="247200267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200267">(Jul 26 2021 at 13:17)</a>:</h4>
<p>that was pretty easy</p>



<a name="247200278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200278">(Jul 26 2021 at 13:17)</a>:</h4>
<p>just have to PR it and get feedback</p>



<a name="247200295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200295">(Jul 26 2021 at 13:17)</a>:</h4>
<p>(but the code is written)</p>



<a name="247200303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200303">(Jul 26 2021 at 13:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/247200218">said</a>:</p>
<blockquote>
<p>There's <a href="https://github.com/rust-lang/rust/issues/84931">#84931</a></p>
</blockquote>
<p>what happens, I wonder, if you're missing the <code>where Self: 'a</code> on the trait?</p>



<a name="247200312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200312">(Jul 26 2021 at 13:17)</a>:</h4>
<p>this is definitely going to be a common point of GAT confusion</p>



<a name="247200328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200328">(Jul 26 2021 at 13:17)</a>:</h4>
<p>(<em>so annoying</em> that it is necessary)</p>



<a name="247200360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200360">(Jul 26 2021 at 13:18)</a>:</h4>
<p>Good question, I'll make sure that test case is included</p>



<a name="247200415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200415">(Jul 26 2021 at 13:18)</a>:</h4>
<p>the diagnostic I wrote <em>should</em> cover that</p>



<a name="247200434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200434">(Jul 26 2021 at 13:18)</a>:</h4>
<p>and yes, this is going to be a bit confusing</p>



<a name="247200438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200438">(Jul 26 2021 at 13:18)</a>:</h4>
<p>there's no PR attached to that issue</p>



<a name="247200454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200454">(Jul 26 2021 at 13:18)</a>:</h4>
<p>Let me just make the PR quickly then</p>



<a name="247200561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200561">(Jul 26 2021 at 13:19)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/87478">#87478</a></p>



<a name="247200630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200630">(Jul 26 2021 at 13:20)</a>:</h4>
<p>There might be a better way to do this</p>



<a name="247200668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200668">(Jul 26 2021 at 13:20)</a>:</h4>
<p>OK</p>



<a name="247200686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200686">(Jul 26 2021 at 13:20)</a>:</h4>
<p>Apart from diagnostics, any other blocking issues you know of?</p>



<a name="247200690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200690">(Jul 26 2021 at 13:20)</a>:</h4>
<p>yes</p>



<a name="247200697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200697">(Jul 26 2021 at 13:20)</a>:</h4>
<p>Have you done a full sweep of triaged issues etc?</p>



<a name="247200705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200705">(Jul 26 2021 at 13:20)</a>:</h4>
<p>How up to date is the project board?</p>



<a name="247200707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200707">(Jul 26 2021 at 13:20)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/86787">#86787</a></p>



<a name="247200727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200727">(Jul 26 2021 at 13:21)</a>:</h4>
<p>I thought this was diagnostics (that's what it's labeled as)</p>



<a name="247200731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200731">(Jul 26 2021 at 13:21)</a>:</h4>
<p>but it's not</p>



<a name="247200761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200761">(Jul 26 2021 at 13:21)</a>:</h4>
<p>(project board: let me double check)</p>



<a name="247200796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200796">(Jul 26 2021 at 13:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/247200731">said</a>:</p>
<blockquote>
<p>but it's not</p>
</blockquote>
<p>what is it?</p>



<a name="247200803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200803">(Jul 26 2021 at 13:21)</a>:</h4>
<p>the problem is we give the help: "consider adding an explicit lifetime bound <code>&lt;Left as HasChildrenOf&gt;::T: 'a</code>"</p>



<a name="247200815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200815">(Jul 26 2021 at 13:21)</a>:</h4>
<p>I do expect an error there, right?</p>



<a name="247200841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200841">(Jul 26 2021 at 13:21)</a>:</h4>
<p>but we have</p>



<a name="247200848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200848">(Jul 26 2021 at 13:21)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">TRef</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">Left</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">HasChildrenOf</span><span class="o">&gt;</span>::<span class="n">T</span>: <span class="o">'</span><span class="na">a</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">Right</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">HasChildrenOf</span><span class="o">&gt;</span>::<span class="n">T</span>: <span class="o">'</span><span class="na">a</span>
    <span class="o">=</span><span class="w"> </span><span class="n">Either</span><span class="o">&lt;&amp;'</span><span class="na">a</span><span class="w"> </span><span class="n">Left</span>::<span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="n">Right</span>::<span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>



<a name="247200856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200856">(Jul 26 2021 at 13:22)</a>:</h4>
<p>I feel like we should <em>ideally</em> be saying "this impl cannot add where clauses that the trait doesn't have"</p>



<a name="247200904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200904">(Jul 26 2021 at 13:22)</a>:</h4>
<p>ohh</p>



<a name="247200934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200934">(Jul 26 2021 at 13:22)</a>:</h4>
<p>maybe it is just diagnostics then</p>



<a name="247200964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247200964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247200964">(Jul 26 2021 at 13:22)</a>:</h4>
<p>What do we do for functions here?</p>



<a name="247201016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201016">(Jul 26 2021 at 13:22)</a>:</h4>
<p>That's a good question</p>



<a name="247201039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201039">(Jul 26 2021 at 13:23)</a>:</h4>
<p>I only started looking at this last night</p>



<a name="247201047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201047">(Jul 26 2021 at 13:23)</a>:</h4>
<p>didn't get very far</p>



<a name="247201114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201114" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201114">(Jul 26 2021 at 13:23)</a>:</h4>
<p>But also, how <em>could</em> we do this, if the impl can't have additional where clauses?</p>



<a name="247201143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201143">(Jul 26 2021 at 13:23)</a>:</h4>
<p>Because there is no <code>Left</code> or <code>Right</code> on the trait</p>



<a name="247201192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201192">(Jul 26 2021 at 13:24)</a>:</h4>
<p>and <code>'a</code> is a lifetime on the associated type</p>



<a name="247201390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201390">(Jul 26 2021 at 13:25)</a>:</h4>
<p>/me looks</p>



<a name="247201459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201459">(Jul 26 2021 at 13:26)</a>:</h4>
<p>I think that <code>where Self:  'a</code> suffices</p>



<a name="247201509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201509">(Jul 26 2021 at 13:26)</a>:</h4>
<p>Self: 'a =&gt; Left: 'a</p>



<a name="247201522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201522">(Jul 26 2021 at 13:26)</a>:</h4>
<p>Left: 'a =&gt; &lt;Left as HasChildrenOf&gt;::T: 'a</p>



<a name="247201550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201550">(Jul 26 2021 at 13:26)</a>:</h4>
<p>not sure if this is exactly what you meant, but <a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=2c3779dbd947a046c56ae8b40e2608fe">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=2c3779dbd947a046c56ae8b40e2608fe</a> is what we output for fns with extra where clauses</p>



<a name="247201608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201608">(Jul 26 2021 at 13:26)</a>:</h4>
<p>try for regions</p>



<a name="247201662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201662">(Jul 26 2021 at 13:27)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error[E0195]: lifetime parameters or bounds on method `foo` do not match the trait declaration
 --&gt; src/lib.rs:8:11
  |
4 |     fn foo&lt;&#39;a, T&gt;();
  |           ------- lifetimes in impl do not match this method in trait
...
8 |     fn foo&lt;&#39;a, T&gt;() where T: &#39;a {}
  |           ^^^^^^^ lifetimes do not match method in trait
</code></pre></div>



<a name="247201687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201687">(Jul 26 2021 at 13:27)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=834f0a235d928e5dda6488d6ded970f3">playground</a></p>



<a name="247201694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201694">(Jul 26 2021 at 13:27)</a>:</h4>
<p><code>where Self: 'a</code> works</p>



<a name="247201724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201724">(Jul 26 2021 at 13:27)</a>:</h4>
<p>Ideally, want to give that as a diagnostic</p>



<a name="247201734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201734">(Jul 26 2021 at 13:27)</a>:</h4>
<p>this sort of example is why those rules were setup that way</p>



<a name="247201747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201747">(Jul 26 2021 at 13:27)</a>:</h4>
<p>but oh boy not sure how</p>



<a name="247201753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201753">(Jul 26 2021 at 13:27)</a>:</h4>
<p>(I'd still like to tweak them a bit...)</p>



<a name="247201841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201841">(Jul 26 2021 at 13:28)</a>:</h4>
<p>glad to see those tweaks paying off in practice :)</p>



<a name="247201869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201869">(Jul 26 2021 at 13:28)</a>:</h4>
<p>which rules?</p>



<a name="247201880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201880">(Jul 26 2021 at 13:28)</a>:</h4>
<p>The <code>Self: 'a</code> and such</p>



<a name="247201884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201884">(Jul 26 2021 at 13:28)</a>:</h4>
<p>?</p>



<a name="247201919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201919">(Jul 26 2021 at 13:28)</a>:</h4>
<p>the rules that make those implications true</p>



<a name="247201932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201932">(Jul 26 2021 at 13:28)</a>:</h4>
<p>gotcha</p>



<a name="247201993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247201993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247201993">(Jul 26 2021 at 13:29)</a>:</h4>
<p>Ok, so I definitely have to think about how to output a good diagnostic here</p>



<a name="247202037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202037">(Jul 26 2021 at 13:29)</a>:</h4>
<p>The correct code is a few steps removed and non-obvious</p>



<a name="247202059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202059">(Jul 26 2021 at 13:29)</a>:</h4>
<p>yeah</p>



<a name="247202141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202141">(Jul 26 2021 at 13:30)</a>:</h4>
<p>I do wonder how many GATs will <em>ever</em> exist that don't have a <code>where Self: 'a</code>-style clause :/</p>



<a name="247202174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202174">(Jul 26 2021 at 13:30)</a>:</h4>
<p>well, we'll worry about that for later</p>



<a name="247202230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202230">(Jul 26 2021 at 13:30)</a>:</h4>
<p>Also curious :)</p>



<a name="247202278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202278">(Jul 26 2021 at 13:31)</a>:</h4>
<p>Would be interesting to think if we could somehow make that the default</p>



<a name="247202290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202290">(Jul 26 2021 at 13:31)</a>:</h4>
<p>and allowing <em>opting out</em></p>



<a name="247202295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202295">(Jul 26 2021 at 13:31)</a>:</h4>
<p>yeah, I know</p>



<a name="247202301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202301">(Jul 26 2021 at 13:31)</a>:</h4>
<p>Something like <code>T: ?Sized</code></p>



<a name="247202303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202303">(Jul 26 2021 at 13:31)</a>:</h4>
<p>it's a nasty pattern though</p>



<a name="247202325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202325">(Jul 26 2021 at 13:31)</a>:</h4>
<p>I might rather infer it from impls in the crate</p>



<a name="247202336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202336">(Jul 26 2021 at 13:31)</a>:</h4>
<p>but that's also nasty</p>



<a name="247202353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202353">(Jul 26 2021 at 13:31)</a>:</h4>
<p>I don't prefer that at all</p>



<a name="247202361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202361">(Jul 26 2021 at 13:31)</a>:</h4>
<p>we have time to tweak those rules, in any case</p>



<a name="247202419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202419">(Jul 26 2021 at 13:32)</a>:</h4>
<p>even post stabilization, if we care to use an edition</p>



<a name="247202468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202468">(Jul 26 2021 at 13:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/247202353">said</a>:</p>
<blockquote>
<p>I don't prefer that at all</p>
</blockquote>
<p>yeah, I think I take it back</p>



<a name="247202481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202481">(Jul 26 2021 at 13:32)</a>:</h4>
<p>so, I wonder if this is something we should note in the blog post?</p>



<a name="247202502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202502">(Jul 26 2021 at 13:32)</a>:</h4>
<p>inferring from impls is both complex and has that problem that when you move the impl out of the crate, behavior changes in subtle ways. bad.</p>



<a name="247202521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202521">(Jul 26 2021 at 13:32)</a>:</h4>
<p>I am pondering-- <span class="user-mention" data-user-id="224872">@rylev</span> asked about the where Self: 'a</p>



<a name="247202536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202536">(Jul 26 2021 at 13:33)</a>:</h4>
<p>I definitely think it's worth calling out</p>



<a name="247202565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202565">(Jul 26 2021 at 13:33)</a>:</h4>
<p>worth calling out</p>



<a name="247202580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202580">(Jul 26 2021 at 13:33)</a>:</h4>
<p>and probably asking for examples where that isn't needed?</p>



<a name="247202589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202589">(Jul 26 2021 at 13:33)</a>:</h4>
<p>on that note, having people catalog how they are using it</p>



<a name="247202592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202592">(Jul 26 2021 at 13:33)</a>:</h4>
<p>would be really useful</p>



<a name="247202609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202609">(Jul 26 2021 at 13:33)</a>:</h4>
<p>(or, specifically when you need that <em>not</em> there)</p>



<a name="247202639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202639">(Jul 26 2021 at 13:33)</a>:</h4>
<p>we could default it from the trait declaration</p>



<a name="247202650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202650">(Jul 26 2021 at 13:34)</a>:</h4>
<p>the rule I had considered before was this:</p>



<a name="247202709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202709">(Jul 26 2021 at 13:34)</a>:</h4>
<ul>
<li>look at all the method signatures in the trait</li>
</ul>



<a name="247202738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202738">(Jul 26 2021 at 13:34)</a>:</h4>
<ul>
<li>each place where <code>Self::Foo&lt;'a&gt;</code> is used, look at what type parameters <code>'a</code> is known to outlive from the method signatures</li>
</ul>



<a name="247202752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202752">(Jul 26 2021 at 13:34)</a>:</h4>
<ul>
<li>take the intersection and add them as default where clauses</li>
</ul>



<a name="247202762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202762">(Jul 26 2021 at 13:34)</a>:</h4>
<p>so e.g. if you had</p>



<a name="247202834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202834">(Jul 26 2021 at 13:35)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Item</span><span class="o">&lt;'</span><span class="na">me</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">some_method</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">inputs</span>: <span class="kp">&amp;</span><span class="o">'</span><span class="na">a</span> <span class="nc">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Item</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="247202853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202853">(Jul 26 2021 at 13:35)</a>:</h4>
<p>we could infer both <code>Self: 'me</code> and <code>T: 'me</code></p>



<a name="247202871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202871">(Jul 26 2021 at 13:35)</a>:</h4>
<p>we should definitely think about this before we stabilize</p>



<a name="247202878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202878">(Jul 26 2021 at 13:35)</a>:</h4>
<p>hmm</p>



<a name="247202891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202891">(Jul 26 2021 at 13:36)</a>:</h4>
<p>let's open an issue on it so we can do a proper write-up and direct people there</p>



<a name="247202970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247202970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247202970">(Jul 26 2021 at 13:36)</a>:</h4>
<p>Okay. You or me?</p>



<a name="247203032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203032">(Jul 26 2021 at 13:37)</a>:</h4>
<p>I suppose there are a few options</p>
<ul>
<li>Simple, limited default: if exactly one lifetime parameter <code>'x</code>, add <code>where Self: 'x</code></li>
<li>Simple default: for every lifetime parameter <code>'x</code>, add <code>where Self: 'x</code></li>
<li>Complex default: what Niko proposed</li>
</ul>



<a name="247203103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203103">(Jul 26 2021 at 13:37)</a>:</h4>
<p>I think what we want is probably feedback from people: what kinds of annoying where clauses do they have to add in practice?</p>



<a name="247203113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203113">(Jul 26 2021 at 13:37)</a>:</h4>
<p>The reason I proposed my rule is this:</p>



<a name="247203197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203197">(Jul 26 2021 at 13:38)</a>:</h4>
<p>basically, in order to use the trait, those were rules you'd have to meet in any case</p>



<a name="247203257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203257">(Jul 26 2021 at 13:38)</a>:</h4>
<p>I'm trying to imagine a scenario where the outlives rule <em>doesn't</em> hold</p>



<a name="247203269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203269">(Jul 26 2021 at 13:38)</a>:</h4>
<p>Sorry to jump in there but I am planning to try out GAT on a partially closed source project but I anticipate I would <em>not</em> want <code>where Self: 'x</code> bounds in my case</p>



<a name="247203273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203273">(Jul 26 2021 at 13:38)</a>:</h4>
<p>that is, where adding <code>where Self: 'a</code> is harmful</p>



<a name="247203292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203292">(Jul 26 2021 at 13:39)</a>:</h4>
<p><span class="user-mention" data-user-id="281572">@marmeladema</span> great! what are you doing with it :)</p>



<a name="247203308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203308">(Jul 26 2021 at 13:39)</a>:</h4>
<p>most of the examples I can come up with involve kind of "Dummy self types" where it wouldn't hurt</p>



<a name="247203325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203325">(Jul 26 2021 at 13:39)</a>:</h4>
<p>e.g. because the self type has no references, so it <em>does</em> outlive <code>'a</code></p>



<a name="247203370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203370">(Jul 26 2021 at 13:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/247202970">said</a>:</p>
<blockquote>
<p>Okay. You or me?</p>
</blockquote>
<p>Either is fine with me :) but I think we will want to write up some text explaining the role of the default</p>



<a name="247203448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203448">(Jul 26 2021 at 13:40)</a>:</h4>
<p>I think the blog post would link to this issue and be like "if you'd like to learn more about that clause -- such as why it is necessary, and how we might tweak the rules to make it not necessray -- see <a href="https://github.com/rust-lang/rust/issues/12345">#12345</a>"</p>



<a name="247203466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203466">(Jul 26 2021 at 13:40)</a>:</h4>
<p>Can you open an issue now?</p>



<a name="247203490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203490">(Jul 26 2021 at 13:40)</a>:</h4>
<p>If not, I will</p>



<a name="247203510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203510">(Jul 26 2021 at 13:40)</a>:</h4>
<p>But I think you would probably do a better job explaining</p>



<a name="247203622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203622" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203622">(Jul 26 2021 at 13:42)</a>:</h4>
<p>I work in an interpreter that from an AST / ParseTree "compiles" those nodes into boxed closure and those boxed closures are taking a "context" as argument which has a lifetime. The "compilation" step is done through a <code>Compiler</code> trait that has default implementation for every AST nodes. And I wondered if I could make the "context" a GAT of that trait</p>



<a name="247203683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203683">(Jul 26 2021 at 13:42)</a>:</h4>
<p>I can</p>



<a name="247203727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203727">(Jul 26 2021 at 13:42)</a>:</h4>
<p><span class="user-mention" data-user-id="281572">@marmeladema</span> after I open the issue, it'd be helpful if you could make a kind of "representative version" of your use case</p>



<a name="247203830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203830">(Jul 26 2021 at 13:43)</a>:</h4>
<p>but the type that will implements the <code>Compiler</code> trait must not be tied to the actual lifetime of the context itself</p>



<a name="247203979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247203979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247203979">(Jul 26 2021 at 13:44)</a>:</h4>
<p>I'm drafting up the issue, <span class="user-mention" data-user-id="232957">@Jack Huey</span>, anything else to cover this morning?</p>



<a name="247204005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247204005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247204005">(Jul 26 2021 at 13:45)</a>:</h4>
<p><span class="user-mention" data-user-id="281572">@marmeladema</span> that does sound like the sort of use case I was thinking of</p>



<a name="247204044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247204044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247204044">(Jul 26 2021 at 13:45)</a>:</h4>
<p>I think that's everything for GATs</p>



<a name="247204083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247204083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247204083">(Jul 26 2021 at 13:45)</a>:</h4>
<p>One non-GATs thing to mention: <span class="user-mention" data-user-id="125294">@Aaron Hill</span> commented on <a href="https://github.com/rust-lang/rust/issues/84944">#84944</a> re incremental</p>



<a name="247204236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247204236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247204236">(Jul 26 2021 at 13:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/247203727">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="281572">marmeladema</span> after I open the issue, it'd be helpful if you could make a kind of "representative version" of your use case</p>
</blockquote>
<p>I'll definitely write up something sharable with this work-group <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="247205876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247205876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247205876">(Jul 26 2021 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> still working on that issue?</p>



<a name="247205887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247205887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247205887">(Jul 26 2021 at 14:00)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/87479">https://github.com/rust-lang/rust/issues/87479</a></p>



<a name="247205888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247205888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247205888">(Jul 26 2021 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<a name="247205905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247205905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247205905">(Jul 26 2021 at 14:00)</a>:</h4>
<p>I'm going to edit the OP to add a few notes though</p>



<a name="247208148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247208148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247208148">(Jul 26 2021 at 14:18)</a>:</h4>
<p>Okay blog post PR has been updated</p>



<a name="247210685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/247210685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#247210685">(Jul 26 2021 at 14:36)</a>:</h4>
<p>Great. I tweaked the issue a bit (e.g., adding the "I have an opinion! What should I do?"</p>



<a name="249593258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/249593258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#249593258">(Aug 16 2021 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> okay, so it's not just <code>default</code>, it's also for types on the trait itself</p>



<a name="249593343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/249593343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#249593343">(Aug 16 2021 at 14:09)</a>:</h4>
<p>So we no longer error with this test: <a href="https://github.com/rust-lang/rust/blob/master/src/test/ui/generic-associated-types/issue-74816.rs">https://github.com/rust-lang/rust/blob/master/src/test/ui/generic-associated-types/issue-74816.rs</a></p>



<a name="249593909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/249593909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#249593909">(Aug 16 2021 at 14:14)</a>:</h4>
<p>But I guess this is only relevant for <code>associated_type_defaults</code></p>



<a name="249605181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/249605181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#249605181">(Aug 16 2021 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> ah, interesting</p>



<a name="249605208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/249605208" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#249605208">(Aug 16 2021 at 15:37)</a>:</h4>
<p>that makes sense, that kind of "desugars" to a <code>default</code></p>



<a name="249605228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/249605228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#249605228">(Aug 16 2021 at 15:37)</a>:</h4>
<p>those are currently unstable too... hmmm.....</p>



<a name="249605394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/249605394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#249605394">(Aug 16 2021 at 15:39)</a>:</h4>
<p>This is less straightforward than I expected</p>



<a name="250016401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/250016401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#250016401">(Aug 19 2021 at 17:13)</a>:</h4>
<p>Okay <span class="user-mention" data-user-id="116009">@nikomatsakis</span> <br>
Regarding <a href="https://github.com/rust-lang/rust/issues/87900">#87900</a>, I contend that generating a predicate in the param_env like <code>for&lt;'a&gt; &lt;I32 as Family&gt;::Member&lt;'a&gt; -&gt; i32</code> will always be right here. We specifically are asking "does the user specified type meet the bounds defined on the trait?" Importantly, it doesn't really matter if the parameters we choose meet <em>their</em> obligations (and, in fact, these aren't checked currently here). Now, it might make sense to actually allow us to <em>assume</em> that the obligations on the parameters hold (and that might actually be a hole in the implementation in the PR, if some of the obligations are necessary to prove an impl)</p>



<a name="250618115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/250618115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#250618115">(Aug 25 2021 at 13:18)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="232957">@Jack Huey</span> I created this repository <a href="https://github.com/nikomatsakis/generic-associated-types-initiative/">https://github.com/nikomatsakis/generic-associated-types-initiative/</a> and invited you. I'm going to transfer it to rust-lang soon I expect.</p>



<a name="250618159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/250618159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#250618159">(Aug 25 2021 at 13:18)</a>:</h4>
<p>Awesome</p>



<a name="251225728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251225728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251225728">(Aug 30 2021 at 13:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="251225844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251225844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251225844">(Aug 30 2021 at 13:05)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="251225859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251225859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251225859">(Aug 30 2021 at 13:05)</a>:</h4>
<p>let me open the hackmd</p>



<a name="251225954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251225954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251225954">(Aug 30 2021 at 13:06)</a>:</h4>
<p>I'm filling out a couple things</p>



<a name="251226057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226057">(Aug 30 2021 at 13:07)</a>:</h4>
<p>looking</p>



<a name="251226101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226101">(Aug 30 2021 at 13:07)</a>:</h4>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/88446">https://github.com/rust-lang/rust/issues/88446</a></p>
</blockquote>



<a name="251226197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226197">(Aug 30 2021 at 13:08)</a>:</h4>
<p>I see it has an MCVE, that's nice</p>



<a name="251226217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226217">(Aug 30 2021 at 13:08)</a>:</h4>
<p>Right, so</p>



<a name="251226222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226222">(Aug 30 2021 at 13:08)</a>:</h4>
<p>I hit this error</p>



<a name="251226238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226238">(Aug 30 2021 at 13:08)</a>:</h4>
<p>(though I think it was slightly different, but same origin)</p>



<a name="251226262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226262">(Aug 30 2021 at 13:08)</a>:</h4>
<p>When I was rebasing <a href="https://github.com/rust-lang/rust/issues/85499">#85499</a></p>



<a name="251226279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226279">(Aug 30 2021 at 13:09)</a>:</h4>
<p>But when I <em>fully</em> rebased it went away</p>



<a name="251226313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226313">(Aug 30 2021 at 13:09)</a>:</h4>
<p>This assertion was added in the NLL diagnostics PR</p>



<a name="251226318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226318">(Aug 30 2021 at 13:09)</a>:</h4>
<p>(getting link)</p>



<a name="251226401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226401">(Aug 30 2021 at 13:10)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/86700">#86700</a></p>



<a name="251226513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226513">(Aug 30 2021 at 13:11)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="k">fn</span> <span class="nf">create_next_universe</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ty</span>::<span class="n">UniverseIndex</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">info_universe</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">            </span><span class="bp">self</span><span class="p">.</span><span class="n">borrowck_context</span><span class="p">.</span><span class="n">constraints</span><span class="p">.</span><span class="n">universe_causes</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">universe_info</span><span class="p">.</span><span class="n">clone</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">universe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">infcx</span><span class="p">.</span><span class="n">create_next_universe</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">info_universe</span><span class="p">,</span><span class="w"> </span><span class="n">universe</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">universe</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251226520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226520">(Aug 30 2021 at 13:11)</a>:</h4>
<p>is that the assertion which is failing?</p>



<a name="251226525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226525">(Aug 30 2021 at 13:11)</a>:</h4>
<p>YES</p>



<a name="251226567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226567">(Aug 30 2021 at 13:11)</a>:</h4>
<p>heh, I thought you were very enthusiastic</p>



<a name="251226585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226585">(Aug 30 2021 at 13:11)</a>:</h4>
<p>oh, hold on</p>



<a name="251226649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226649">(Aug 30 2021 at 13:12)</a>:</h4>
<p>there</p>



<a name="251226699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226699">(Aug 30 2021 at 13:12)</a>:</h4>
<p>I can imagine how this assertion might fail with your code :)</p>



<a name="251226737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226737">(Aug 30 2021 at 13:12)</a>:</h4>
<p>I honestly, only briefly looked at this before. And only saw this issue this morning</p>



<a name="251226765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226765">(Aug 30 2021 at 13:13)</a>:</h4>
<p>let me pull up <a href="https://github.com/rust-lang/rust/issues/85499">#85499</a></p>



<a name="251226925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226925">(Aug 30 2021 at 13:14)</a>:</h4>
<p>well, so you are going to be creating universes during normalization</p>



<a name="251226941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226941">(Aug 30 2021 at 13:14)</a>:</h4>
<p>we didn't do that before I guess</p>



<a name="251226990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251226990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251226990">(Aug 30 2021 at 13:14)</a>:</h4>
<p>hmm</p>



<a name="251227001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227001">(Aug 30 2021 at 13:15)</a>:</h4>
<p>I am trying to remember</p>



<a name="251227007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227007">(Aug 30 2021 at 13:15)</a>:</h4>
<p>right...</p>



<a name="251227038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227038">(Aug 30 2021 at 13:15)</a>:</h4>
<p>whether the NLL checker <em>ever</em> does normalization etc outside of queries</p>



<a name="251227102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227102">(Aug 30 2021 at 13:15)</a>:</h4>
<p>this assertion sort of suggests no, but then ...</p>



<a name="251227120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227120">(Aug 30 2021 at 13:15)</a>:</h4>
<p>... then the assertion prob wouldn't fail</p>



<a name="251227126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227126">(Aug 30 2021 at 13:15)</a>:</h4>
<p>I suppose if GATs were more used, we might have seen a regression before</p>



<a name="251227274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227274">(Aug 30 2021 at 13:16)</a>:</h4>
<p>I suppose so</p>



<a name="251227348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227348">(Aug 30 2021 at 13:17)</a>:</h4>
<p>Probably need to be doing something extra in <code>universe_for</code> in <code>BoundVarReplacer</code></p>



<a name="251227394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227394">(Aug 30 2021 at 13:17)</a>:</h4>
<p>yes, maybe? I would try to narrow down when the universe is being created</p>



<a name="251227410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227410">(Aug 30 2021 at 13:17)</a>:</h4>
<p>and trace that back up to the NLL borrow checker</p>



<a name="251227490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227490">(Aug 30 2021 at 13:18)</a>:</h4>
<p>I am pondering the idea of having a less fragile setup</p>



<a name="251227591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227591">(Aug 30 2021 at 13:19)</a>:</h4>
<p>e.g., maybe we should make <code>create_universe</code> have you supply some info</p>



<a name="251227633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227633">(Aug 30 2021 at 13:19)</a>:</h4>
<p>but that might not work out because the borrow check tries to layer its own stuff on there</p>



<a name="251227665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227665">(Aug 30 2021 at 13:19)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/d5cd3205fd6c0817fd46c036d0f3194b7deaca93/compiler/rustc_mir/src/borrow_check/diagnostics/bound_region_errors.rs#L20-L32">https://github.com/rust-lang/rust/blob/d5cd3205fd6c0817fd46c036d0f3194b7deaca93/compiler/rustc_mir/src/borrow_check/diagnostics/bound_region_errors.rs#L20-L32</a></p>



<a name="251227666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227666">(Aug 30 2021 at 13:19)</a>:</h4>
<p>yeah, I'm seeing that</p>



<a name="251227694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227694">(Aug 30 2021 at 13:19)</a>:</h4>
<p>the other option</p>



<a name="251227746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227746">(Aug 30 2021 at 13:20)</a>:</h4>
<p>would be to change from a vector that must always be matched</p>



<a name="251227755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227755">(Aug 30 2021 at 13:20)</a>:</h4>
<p>to a hashmap</p>



<a name="251227766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227766">(Aug 30 2021 at 13:20)</a>:</h4>
<p>where "not present" == "other"</p>



<a name="251227802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227802">(Aug 30 2021 at 13:20)</a>:</h4>
<p>yeah, was also thinking that</p>



<a name="251227821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227821">(Aug 30 2021 at 13:20)</a>:</h4>
<p>that will fix the ICE and is prob the best <em>short-term</em> fix</p>



<a name="251227844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227844">(Aug 30 2021 at 13:20)</a>:</h4>
<p>but it'd be nice to know how the universe is being created in relation to the type checker</p>



<a name="251227863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227863">(Aug 30 2021 at 13:21)</a>:</h4>
<p>Right</p>



<a name="251227879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227879">(Aug 30 2021 at 13:21)</a>:</h4>
<p>Unsure if there' s "better" fix</p>



<a name="251227896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227896">(Aug 30 2021 at 13:21)</a>:</h4>
<p>well, we might be missing an "interception" point</p>



<a name="251227917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227917">(Aug 30 2021 at 13:21)</a>:</h4>
<p>I do think that a hashmap is a less fragile data structure for this</p>



<a name="251227941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251227941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251227941">(Aug 30 2021 at 13:21)</a>:</h4>
<p>or a vector where we will in the gaps</p>



<a name="251228045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228045">(Aug 30 2021 at 13:22)</a>:</h4>
<p>ok. seems like we can't do much more on this without investigation. should we discuss another issue?</p>



<a name="251228056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228056">(Aug 30 2021 at 13:22)</a>:</h4>
<p>Hmm, I mean, I assume that mir borrowck uses the <code>query/normalize</code> form?</p>



<a name="251228065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228065">(Aug 30 2021 at 13:22)</a>:</h4>
<p>(do you have time to investigate?)</p>



<a name="251228085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228085">(Aug 30 2021 at 13:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/251228056">said</a>:</p>
<blockquote>
<p>Hmm, I mean, I assume that mir borrowck uses the <code>query/normalize</code> form?</p>
</blockquote>
<p>I would've thought so, that's why I would want to investigate</p>



<a name="251228091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228091">(Aug 30 2021 at 13:22)</a>:</h4>
<p>I will investigate this week</p>



<a name="251228155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228155">(Aug 30 2021 at 13:22)</a>:</h4>
<p>Let's discuss <a href="https://github.com/rust-lang/rust/issues/88441">#88441</a></p>



<a name="251228224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228224">(Aug 30 2021 at 13:23)</a>:</h4>
<p>So, there are two related problems this solves</p>



<a name="251228346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228346">(Aug 30 2021 at 13:24)</a>:</h4>
<p>Let's look at <code>src/test/ui/higher-rank-trait-bounds/normalize-under-binder/normalization-under-binders-1.rs</code> in that PR as an example</p>



<a name="251228415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228415">(Aug 30 2021 at 13:24)</a>:</h4>
<p>ok</p>



<a name="251228465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228465">(Aug 30 2021 at 13:25)</a>:</h4>
<p>Let me bring back into cache</p>



<a name="251228535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228535">(Aug 30 2021 at 13:26)</a>:</h4>
<p>So, first. During confirmation, we try to confirm a closure candidate</p>



<a name="251228581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228581">(Aug 30 2021 at 13:26)</a>:</h4>
<p>side note that using <code>'a</code> for every variable in this example makes it a bit harder to talk about :)</p>



<a name="251228618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228618">(Aug 30 2021 at 13:26)</a>:</h4>
<p>confirmation of the <code>FnOnce</code> where clause on <code>s</code>?</p>



<a name="251228659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228659">(Aug 30 2021 at 13:26)</a>:</h4>
<p>And we generate something like <code>[closure]: FnOnce(&lt;TT as A&lt;'a&gt;&gt;::B)</code></p>



<a name="251228673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228673">(Aug 30 2021 at 13:26)</a>:</h4>
<p>And we have to normalize that</p>



<a name="251228714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228714">(Aug 30 2021 at 13:27)</a>:</h4>
<p>why isn't it normalized before that point</p>



<a name="251228734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228734">(Aug 30 2021 at 13:27)</a>:</h4>
<p>not exactly sure</p>



<a name="251228743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228743">(Aug 30 2021 at 13:27)</a>:</h4>
<p>also, presumably it's <code>T</code></p>



<a name="251228763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228763">(Aug 30 2021 at 13:27)</a>:</h4>
<p>or perhaps <code>?TT</code> I guess</p>



<a name="251228771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228771">(Aug 30 2021 at 13:27)</a>:</h4>
<p>should be unified by then though</p>



<a name="251228823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228823">(Aug 30 2021 at 13:28)</a>:</h4>
<p>I think so</p>



<a name="251228835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228835">(Aug 30 2021 at 13:28)</a>:</h4>
<p>ok so</p>



<a name="251228842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228842">(Aug 30 2021 at 13:28)</a>:</h4>
<p>that's probably why it's not normalized yet</p>



<a name="251228865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228865">(Aug 30 2021 at 13:28)</a>:</h4>
<p>when we first do the substitution, it is <code>?TT as A</code></p>



<a name="251228893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228893">(Aug 30 2021 at 13:28)</a>:</h4>
<p>and so we can't normalize it succesfully</p>



<a name="251228904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228904">(Aug 30 2021 at 13:28)</a>:</h4>
<p>then we start doing unifications</p>



<a name="251228920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228920">(Aug 30 2021 at 13:28)</a>:</h4>
<p>and <em>now</em> it is <code>&lt;T as A&lt;'a&gt;&gt;::B</code></p>



<a name="251228926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228926">(Aug 30 2021 at 13:28)</a>:</h4>
<p>which we <em>could</em> normalize</p>



<a name="251228961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228961">(Aug 30 2021 at 13:29)</a>:</h4>
<p>interesting problem</p>



<a name="251228963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228963">(Aug 30 2021 at 13:29)</a>:</h4>
<p>That makes sense</p>



<a name="251228997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228997">(Aug 30 2021 at 13:29)</a>:</h4>
<p>there's gonna be a slow trickle of things like this until we fix this code in some better way</p>



<a name="251228999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251228999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251228999">(Aug 30 2021 at 13:29)</a>:</h4>
<p>the other issue is that the fn sig in closure substs isn't normalized</p>



<a name="251229115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229115">(Aug 30 2021 at 13:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/251228997">said</a>:</p>
<blockquote>
<p>there's gonna be a slow trickle of things like this until we fix this code in some better way</p>
</blockquote>
<p>Yeah...I think a better solution <em>might</em> be to try to normalize in <code>relate</code></p>



<a name="251229163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229163">(Aug 30 2021 at 13:30)</a>:</h4>
<p>I mean that is basically lazy norm, no?</p>



<a name="251229167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229167">(Aug 30 2021 at 13:30)</a>:</h4>
<p>better "longer-term"</p>



<a name="251229184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229184">(Aug 30 2021 at 13:30)</a>:</h4>
<p>which isn't to say it's the wrong thing to do</p>



<a name="251229188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229188">(Aug 30 2021 at 13:30)</a>:</h4>
<p>Well, maybe :)</p>



<a name="251229234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229234">(Aug 30 2021 at 13:31)</a>:</h4>
<p>I guess I would imagine lazy norm as delaying normalization even past relating</p>



<a name="251229290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229290">(Aug 30 2021 at 13:31)</a>:</h4>
<p>I think of it is as delaying normalization <em>until</em> relating</p>



<a name="251229305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229305">(Aug 30 2021 at 13:31)</a>:</h4>
<p>but I agree this is perhaps a new twist</p>



<a name="251229329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229329">(Aug 30 2021 at 13:31)</a>:</h4>
<p>or at least it's different from how chalk approaches it</p>



<a name="251229344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229344">(Aug 30 2021 at 13:32)</a>:</h4>
<p>though I'm not convinced chalk's approach is "right"</p>



<a name="251229429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229429" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229429">(Aug 30 2021 at 13:32)</a>:</h4>
<p>I still really want to spend some mental time and energy thinking about the chalk approach to normalization</p>



<a name="251229436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229436">(Aug 30 2021 at 13:32)</a>:</h4>
<p>I've attempted a few times</p>



<a name="251229483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229483">(Aug 30 2021 at 13:33)</a>:</h4>
<p><em>really</em> want to solve <a href="https://github.com/rust-lang/chalk/issues/234">chalk#234</a></p>



<a name="251229533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229533">(Aug 30 2021 at 13:33)</a>:</h4>
<p>I feel like the logic that stems from that will ultimately play a big role in what the "correct" approach that rustc ends up with</p>



<a name="251229570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229570">(Aug 30 2021 at 13:33)</a>:</h4>
<p>but I digress</p>



<a name="251229668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229668">(Aug 30 2021 at 13:34)</a>:</h4>
<p>I want to specifically talk about <code>src/test/ui/higher-rank-trait-bounds/normalize-under-binder/normalization-under-binders-2.rs</code></p>



<a name="251229726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229726">(Aug 30 2021 at 13:35)</a>:</h4>
<p>ok</p>



<a name="251229738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229738">(Aug 30 2021 at 13:35)</a>:</h4>
<p>This test fails in migrate mode, but passes in NLL</p>



<a name="251229778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229778">(Aug 30 2021 at 13:35)</a>:</h4>
<p>First, I'm not sure how to annotate that in a test</p>



<a name="251229791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229791">(Aug 30 2021 at 13:35)</a>:</h4>
<p>Second, is that weird</p>



<a name="251229813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229813">(Aug 30 2021 at 13:35)</a>:</h4>
<p>it is curious</p>



<a name="251229842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251229842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251229842">(Aug 30 2021 at 13:35)</a>:</h4>
<p>Third, I hate that this error is duplicated 4 times, but I didn't look into it</p>



<a name="251230001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230001">(Aug 30 2021 at 13:36)</a>:</h4>
<p>Ultimately, the error stems from this:</p>



<a name="251230042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230042">(Aug 30 2021 at 13:36)</a>:</h4>
<p>it's a curious one because <code>&lt;F1 as Parser&gt;::Output</code> doesn't have any bound regions in it</p>



<a name="251230104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230104">(Aug 30 2021 at 13:37)</a>:</h4>
<p><em>oh</em></p>



<a name="251230111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230111">(Aug 30 2021 at 13:37)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">F1</span>: <span class="nc">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Parser</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">F2</span>: <span class="nb">FnOnce</span><span class="p">(</span><span class="o">&amp;&lt;</span><span class="n">F1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Parser</span><span class="o">&gt;</span>::<span class="n">Output</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">bool</span>

<span class="nc">impl</span><span class="o">&lt;'</span><span class="na">s</span><span class="p">,</span><span class="w"> </span><span class="n">F</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Parser</span><span class="o">&lt;'</span><span class="na">s</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">F</span><span class="w"></span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">s</span><span class="w"> </span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="p">(</span><span class="o">&amp;'</span><span class="na">s</span><span class="w"> </span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">)</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">bar</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s</span>: <span class="kp">&amp;</span><span class="o">'</span><span class="na">a</span> <span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="kt">str</span><span class="p">)</span><span class="w"></span>
</code></pre></div>



<a name="251230118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230118">(Aug 30 2021 at 13:37)</a>:</h4>
<p>it's <code>Parser&lt;'_&gt;</code></p>



<a name="251230187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230187">(Aug 30 2021 at 13:37)</a>:</h4>
<p>oh</p>



<a name="251230195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230195">(Aug 30 2021 at 13:37)</a>:</h4>
<p>that makes sense</p>



<a name="251230343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230343">(Aug 30 2021 at 13:39)</a>:</h4>
<p>so in NLL mode this compiles?</p>



<a name="251230353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230353">(Aug 30 2021 at 13:39)</a>:</h4>
<p>yes</p>



<a name="251230454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230454">(Aug 30 2021 at 13:39)</a>:</h4>
<p>(went to go check changing <code>Parser</code> to <code>Parser&lt;'a&gt;</code> in the playground, but forgot about this original bug)</p>



<a name="251230455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230455">(Aug 30 2021 at 13:39)</a>:</h4>
<p>ok so -- in the <em>body</em> of the closure, I guess we liberate the bound regions</p>



<a name="251230509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230509">(Aug 30 2021 at 13:40)</a>:</h4>
<p>and renormalize</p>



<a name="251230535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230535">(Aug 30 2021 at 13:40)</a>:</h4>
<p>and hence the call to <code>s.len()</code> is able to type-check</p>



<a name="251230837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230837">(Aug 30 2021 at 13:42)</a>:</h4>
<p>I'm not sure where the errors come from or why it's different in NLL though</p>



<a name="251230846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251230846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251230846">(Aug 30 2021 at 13:42)</a>:</h4>
<p>I'm thinking about it</p>



<a name="251231245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231245">(Aug 30 2021 at 13:45)</a>:</h4>
<p>have you looked into it at all?</p>



<a name="251231456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231456">(Aug 30 2021 at 13:46)</a>:</h4>
<p>not really</p>



<a name="251231472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231472">(Aug 30 2021 at 13:46)</a>:</h4>
<p>ok</p>



<a name="251231477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231477">(Aug 30 2021 at 13:46)</a>:</h4>
<p>I feel like I would want to</p>



<a name="251231499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231499">(Aug 30 2021 at 13:47)</a>:</h4>
<p>the actual diff <em>does</em> seem ok to me</p>



<a name="251231527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231527">(Aug 30 2021 at 13:47)</a>:</h4>
<p>Right, I don't think this weirdness stems from the diff</p>



<a name="251231545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231545">(Aug 30 2021 at 13:47)</a>:</h4>
<p>it's just fixing some missed normalizations</p>



<a name="251231700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231700">(Aug 30 2021 at 13:48)</a>:</h4>
<p>If you think this is <em>weird</em>, is it worth me filing an issue for followup?</p>



<a name="251231805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231805">(Aug 30 2021 at 13:49)</a>:</h4>
<p>yes---</p>



<a name="251231811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231811">(Aug 30 2021 at 13:49)</a>:</h4>
<p>it may be a missed normalization</p>



<a name="251231834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231834">(Aug 30 2021 at 13:49)</a>:</h4>
<p>it may also be some kind of difference between the lexical solver and the NLL one</p>



<a name="251231838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231838">(Aug 30 2021 at 13:49)</a>:</h4>
<p>that's why I'm a bit wary</p>



<a name="251231848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231848">(Aug 30 2021 at 13:49)</a>:</h4>
<p>one or the other could have a bug :)</p>



<a name="251231886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231886">(Aug 30 2021 at 13:49)</a>:</h4>
<p>Oh I see</p>



<a name="251231930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231930">(Aug 30 2021 at 13:50)</a>:</h4>
<p>I wouldn't be surprised though if it comes from the NLL checker having more types up front</p>



<a name="251231986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251231986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251231986">(Aug 30 2021 at 13:50)</a>:</h4>
<p>and that lets it go down some better path</p>



<a name="251232110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232110">(Aug 30 2021 at 13:51)</a>:</h4>
<p>Okay, do you think that this is PR is okay to merge with a followup issue for investigating the NLL difference?</p>



<a name="251232152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232152">(Aug 30 2021 at 13:51)</a>:</h4>
<p>I'm debating about it :)</p>



<a name="251232162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232162">(Aug 30 2021 at 13:51)</a>:</h4>
<p>I <em>think</em> so</p>



<a name="251232175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232175">(Aug 30 2021 at 13:51)</a>:</h4>
<p>It's hard to see how the PR gets us in deeper water than we are in already</p>



<a name="251232192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232192">(Aug 30 2021 at 13:51)</a>:</h4>
<p>especially because we get more errors in the early phase</p>



<a name="251232273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232273">(Aug 30 2021 at 13:52)</a>:</h4>
<p>so it's probably not a question of accepting code we ought not to accept, at least on stable</p>



<a name="251232307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232307">(Aug 30 2021 at 13:52)</a>:</h4>
<p>"early phase"?</p>



<a name="251232434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232434">(Aug 30 2021 at 13:53)</a>:</h4>
<p>I mean in the lexical check</p>



<a name="251232464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232464">(Aug 30 2021 at 13:53)</a>:</h4>
<p>i.e., the stable behavior is to get ane rror</p>



<a name="251232479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232479">(Aug 30 2021 at 13:53)</a>:</h4>
<p>so if it turns out the bug is that the NLL checker is missing some case</p>



<a name="251232499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232499">(Aug 30 2021 at 13:53)</a>:</h4>
<p>that's not <em>more exposed</em> as a result of this PR</p>



<a name="251232530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232530">(Aug 30 2021 at 13:54)</a>:</h4>
<p>at least...not in this example :)</p>



<a name="251232588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232588" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232588">(Aug 30 2021 at 13:54)</a>:</h4>
<p>hmm okay</p>



<a name="251232992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251232992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251232992">(Aug 30 2021 at 13:56)</a>:</h4>
<p>Also, before we run out of time. Figured a general update on where GATs issues are at. We currently have 21 open issues. I've gone through "triaged" a lot of them, at least by looking at them and figuring out if they need action and "block" GATs.</p>
<p>There's probably less than 10 that are true bugs that need to be fixed.</p>



<a name="251233193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233193">(Aug 30 2021 at 13:58)</a>:</h4>
<p>Others are a feature request, a couple related to <code>Sized</code> coinductiveness, a couple where a region is different between early/late whether you use the associated type or not, a couple are combined with TAITs</p>



<a name="251233397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233397" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233397">(Aug 30 2021 at 13:59)</a>:</h4>
<p>Of the ones that need to be fixed: a couple are diagnostics, 1 is decision (<code>Self: 'a</code>), (also need to file an issue for <code>where </code> location), a couple are overflow or cycle errors, a couple others</p>



<a name="251233433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233433">(Aug 30 2021 at 13:59)</a>:</h4>
<p>I wonder if it's worth adding something like a GATs-blocking label</p>



<a name="251233547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233547">(Aug 30 2021 at 14:00)</a>:</h4>
<p>sounds useful</p>



<a name="251233556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233556">(Aug 30 2021 at 14:00)</a>:</h4>
<p>you saw also the repo I created I guess</p>



<a name="251233587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233587">(Aug 30 2021 at 14:00)</a>:</h4>
<p>Yes</p>



<a name="251233592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233592">(Aug 30 2021 at 14:00)</a>:</h4>
<p>I have to spend a bit of time on those blocking design questions</p>



<a name="251233621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233621">(Aug 30 2021 at 14:00)</a>:</h4>
<p>do you have a write-up of those categorizations?</p>



<a name="251233639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233639">(Aug 30 2021 at 14:00)</a>:</h4>
<p>I do not</p>



<a name="251233701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233701">(Aug 30 2021 at 14:01)</a>:</h4>
<p>I've mostly been just picking an issue, running the repro locally, and working on a fix</p>



<a name="251233735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233735">(Aug 30 2021 at 14:01)</a>:</h4>
<p>ok, did you record the results of that triage anywhere?</p>



<a name="251233836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233836">(Aug 30 2021 at 14:02)</a>:</h4>
<p>Not really</p>



<a name="251233845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233845">(Aug 30 2021 at 14:02)</a>:</h4>
<p>Other than as comments on the issues themselves</p>



<a name="251233876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233876">(Aug 30 2021 at 14:02)</a>:</h4>
<p>I didn't aggregate them yet</p>



<a name="251233922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233922">(Aug 30 2021 at 14:02)</a>:</h4>
<p>ah, ok</p>



<a name="251233932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233932">(Aug 30 2021 at 14:02)</a>:</h4>
<p>that's useful though :)</p>



<a name="251233941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233941">(Aug 30 2021 at 14:02)</a>:</h4>
<p>I have been less organized on this than I would like</p>



<a name="251233953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233953">(Aug 30 2021 at 14:02)</a>:</h4>
<p>I would say we can either create labels</p>



<a name="251233966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233966" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233966">(Aug 30 2021 at 14:03)</a>:</h4>
<p>or else a project board</p>



<a name="251233981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233981">(Aug 30 2021 at 14:03)</a>:</h4>
<p>maybe a good idea at minimum is a GAT-triaged label</p>



<a name="251233986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251233986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251233986">(Aug 30 2021 at 14:03)</a>:</h4>
<p>so we can track new incoming issues easily</p>



<a name="251234012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251234012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251234012">(Aug 30 2021 at 14:03)</a>:</h4>
<p>Do we have a project board for just GATs</p>



<a name="251234020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251234020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251234020">(Aug 30 2021 at 14:03)</a>:</h4>
<p>if not, let's create that</p>



<a name="251234049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251234049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251234049">(Aug 30 2021 at 14:03)</a>:</h4>
<p>and I'll make a GAT-triaged label</p>



<a name="251234063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251234063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251234063">(Aug 30 2021 at 14:03)</a>:</h4>
<p>And categorize</p>



<a name="251235348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251235348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251235348">(Aug 30 2021 at 14:12)</a>:</h4>
<p><a href="https://github.com/rust-lang/wg-traits/projects/6">https://github.com/rust-lang/wg-traits/projects/6</a></p>



<a name="251235808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251235808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251235808">(Aug 30 2021 at 14:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/251234012">said</a>:</p>
<blockquote>
<p>Do we have a project board for just GATs</p>
</blockquote>
<p>I think we should make it on <a href="https://github.com/rust-lang/generic-associated-types-initiative">https://github.com/rust-lang/generic-associated-types-initiative</a></p>



<a name="251236563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251236563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251236563">(Aug 30 2021 at 14:19)</a>:</h4>
<p><span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span>‍♀️</p>



<a name="251236646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251236646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251236646">(Aug 30 2021 at 14:20)</a>:</h4>
<p>Can this be transferred or do I just have to remake</p>



<a name="251240108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240108">(Aug 30 2021 at 14:44)</a>:</h4>
<p>don't know :)</p>



<a name="251240140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240140">(Aug 30 2021 at 14:44)</a>:</h4>
<p>it doesn't matter</p>



<a name="251240145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240145">(Aug 30 2021 at 14:44)</a>:</h4>
<p>leave it wherever, we'll link to it</p>



<a name="251240171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240171">(Aug 30 2021 at 14:44)</a>:</h4>
<p>Mmm ok</p>



<a name="251240181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240181">(Aug 30 2021 at 14:44)</a>:</h4>
<p>that said</p>



<a name="251240191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240191">(Aug 30 2021 at 14:44)</a>:</h4>
<p>it apears to be empty now :)</p>



<a name="251240196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240196">(Aug 30 2021 at 14:44)</a>:</h4>
<p>so maybe make a new one?</p>



<a name="251240251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240251">(Aug 30 2021 at 14:45)</a>:</h4>
<p>I don't care too much</p>



<a name="251240317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/251240317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#251240317">(Aug 30 2021 at 14:45)</a>:</h4>
<p>I'll make a new one later</p>



<a name="255044044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255044044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255044044">(Sep 27 2021 at 13:05)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="232957">@Jack Huey</span> --- not sure if you're around today--- I was going to schedule more time this week to catch up on GAT things, I didn't get to it last week for various reasons</p>



<a name="255044199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255044199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255044199">(Sep 27 2021 at 13:06)</a>:</h4>
<p>I'm around <em>right now</em>, but today is really busy for me and I can't actually meet</p>



<a name="255044251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255044251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255044251">(Sep 27 2021 at 13:06)</a>:</h4>
<p>Take a look at <a href="https://github.com/rust-lang/rust/issues/89285">#89285</a> though</p>



<a name="255044283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255044283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255044283">(Sep 27 2021 at 13:06)</a>:</h4>
<p>Not really GATs</p>



<a name="255044401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255044401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255044401">(Sep 27 2021 at 13:07)</a>:</h4>
<p>(In fact, I've essentially been working on regressions from <a href="https://github.com/rust-lang/rust/issues/85499">#85499</a> for the last week - at least with the time I've had)</p>



<a name="255044579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255044579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255044579">(Sep 27 2021 at 13:08)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/88441">#88441</a> and <a href="https://github.com/rust-lang/rust/issues/88382">#88382</a> are important to look at</p>



<a name="255044868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255044868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255044868">(Sep 27 2021 at 13:10)</a>:</h4>
<p>OK</p>



<a name="255048833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255048833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255048833">(Sep 27 2021 at 13:36)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> I am wondering whether I ought to work on implementing the lint for <code>where</code> clauses I proposed. I think I'm of the mind now that I would be ok with making it a hard error to elide the <code>where Self: 'a</code> in those cases where it would've been inferred, and we can think about whether to make it the default later.</p>



<a name="255048850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255048850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255048850">(Sep 27 2021 at 13:36)</a>:</h4>
<p>Even though I still think we will eventually</p>



<a name="255049169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049169">(Sep 27 2021 at 13:38)</a>:</h4>
<p>If you could work on the implementation for that, that would be tremendously helpful.</p>



<a name="255049270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049270">(Sep 27 2021 at 13:39)</a>:</h4>
<p>Wait...so, I'm confused what you want now</p>



<a name="255049296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049296">(Sep 27 2021 at 13:39)</a>:</h4>
<p>My wording was confusing</p>



<a name="255049319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049319">(Sep 27 2021 at 13:39)</a>:</h4>
<p>An error if it's elided, but would have been inferred?</p>



<a name="255049417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049417">(Sep 27 2021 at 13:40)</a>:</h4>
<p>In the immediate term, I would like to implement the logic that I described for determining when <code>where Self: 'a</code> would be a good default</p>



<a name="255049446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049446">(Sep 27 2021 at 13:40)</a>:</h4>
<p>But use it just to report an error</p>



<a name="255049458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049458">(Sep 27 2021 at 13:40)</a>:</h4>
<p>If where Self: 'a is not present</p>



<a name="255049495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049495">(Sep 27 2021 at 13:40)</a>:</h4>
<p>ah okay</p>



<a name="255049501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049501">(Sep 27 2021 at 13:40)</a>:</h4>
<p>This will give us an idea whether it does indeed trigger for realistic code patterns, and how often</p>



<a name="255049549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049549">(Sep 27 2021 at 13:41)</a>:</h4>
<p>We can then choose whether to make it a default or whether to take some other approach</p>



<a name="255049574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049574">(Sep 27 2021 at 13:41)</a>:</h4>
<p>So basically "this where clause will be implied in the future, but for now you must add it"</p>



<a name="255049590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049590">(Sep 27 2021 at 13:41)</a>:</h4>
<p>s/will be implied/may be implied/ but yes</p>



<a name="255049613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049613">(Sep 27 2021 at 13:41)</a>:</h4>
<p>I was thinking about the <a href="https://rustacean-principles.netlify.app/how_to_rustacean/start_somewhere.html">Start Somewhere</a> principle :)</p>



<a name="255049626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049626">(Sep 27 2021 at 13:41)</a>:</h4>
<p>I think that's reasonable</p>



<a name="255049628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255049628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255049628">(Sep 27 2021 at 13:41)</a>:</h4>
<p>this seems like the prudent way forward</p>



<a name="255072514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255072514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255072514">(Sep 27 2021 at 15:56)</a>:</h4>
<p>It's kind of counter to what we eventually want - requiring to write versus implying, but serves the same purpose: we dont end up with traits where you can't really use them because there isn't a where clause</p>



<a name="255072592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255072592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255072592">(Sep 27 2021 at 15:56)</a>:</h4>
<p>The only thing I'm on the fence about is an error vs a deny by default warning</p>



<a name="255072662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255072662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255072662">(Sep 27 2021 at 15:57)</a>:</h4>
<p>In the latter case, if we miss something, people can recover at least</p>



<a name="255072787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255072787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255072787">(Sep 27 2021 at 15:58)</a>:</h4>
<p>At the risk of it's harder for us to find out about the cases we're wrong about, potentially</p>



<a name="255400071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255400071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255400071">(Sep 29 2021 at 13:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/GATs.20ahoy/near/255072662">said</a>:</p>
<blockquote>
<p>In the latter case, if we miss something, people can recover at least</p>
</blockquote>
<p>there is a workaround:</p>



<a name="255400079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255400079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255400079">(Sep 29 2021 at 13:37)</a>:</h4>
<p>separate into a separate trait</p>



<a name="255400154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255400154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255400154">(Sep 29 2021 at 13:38)</a>:</h4>
<p>I feel strongly it has to be an error, or else we haven't really reserved the ability for us to add the default later</p>



<a name="255400241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255400241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255400241">(Sep 29 2021 at 13:38)</a>:</h4>
<p>The way I am looking at is that this release of GATs is in many ways a kind of <em>trial</em> release: it exposes the capabilities, but we know the ergonomics and other things are still a "WIP"</p>



<a name="255400393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/255400393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#255400393">(Sep 29 2021 at 13:39)</a>:</h4>
<p>That's fair. I don't particularly like that workaround, but I guess you're right that its fully forwards compatible.</p>



<a name="273476234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273476234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273476234">(Feb 28 2022 at 11:31)</a>:</h4>
<p>Ok so it's probably super late, but I did write what I had in mind: <a href="https://gist.github.com/rust-play/0ff224dc91f62207678b52756d26ec03">https://gist.github.com/rust-play/0ff224dc91f62207678b52756d26ec03</a></p>



<a name="273476563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273476563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273476563">(Feb 28 2022 at 11:35)</a>:</h4>
<p>I'll try to write the non-gat equivalent of this, but last time I tried, it was super painful, maybe not impossible but definitely not pleasant</p>



<a name="273480455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273480455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273480455">(Feb 28 2022 at 12:16)</a>:</h4>
<p><span class="user-mention" data-user-id="281572">@marmeladema</span> Here’s a GAT-free (mostly) equivalent version <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=a050229041bd8924c1891ab4756827d7">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=a050229041bd8924c1891ab4756827d7</a></p>



<a name="273480866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273480866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273480866">(Feb 28 2022 at 12:21)</a>:</h4>
<p>Scrolling back up, this example came up for the discussion of <code>where Self: 'a</code> bounds; as far as I can tell, your code doesn’t even trigger the current heuristic, so maybe it’s not quite relevant here? However I could be wrong, I don’t have the time to read through the discussion to fully figure out what the question was and what this example was supposed to demonstrate.</p>



<a name="273481085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273481085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273481085">(Feb 28 2022 at 12:23)</a>:</h4>
<p>Yeah my example was because at some point in the discussion there was a desire to make the <code>where Self: 'a</code> clause mandatory for all GAT</p>



<a name="273481279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273481279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273481279">(Feb 28 2022 at 12:25)</a>:</h4>
<p>I just wanted to share an example that doesn't require the Self: 'a bound</p>



<a name="273481383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273481383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273481383">(Feb 28 2022 at 12:26)</a>:</h4>
<p>Thank you for your equivalent version <span class="user-mention" data-user-id="280891">@Frank Steffahn</span> ! I must say that even if it works it feels a bit over complicated. Not every one could come up with this layout, whereas the GAT version feels more "natural" to me</p>



<a name="273481531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273481531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273481531">(Feb 28 2022 at 12:28)</a>:</h4>
<p>Also about the <code>// the 'e: 'e works around a compiler bug</code>, is there an issue for it? I actually ended up facing the bug but I wasn't aware of your trick to make it work.</p>



<a name="273481570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273481570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273481570">(Feb 28 2022 at 12:28)</a>:</h4>
<p>I think there is a bug report, I’ll have to look it up.</p>



<a name="273481965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273481965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273481965">(Feb 28 2022 at 12:31)</a>:</h4>
<p>Right, e.g. <a href="https://github.com/rust-lang/rust/issues/47511">#47511</a>, and related <a href="https://github.com/rust-lang/rust/issues/85533">#85533</a></p>



<a name="273482104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/GATs%20ahoy/near/273482104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/GATs.20ahoy.html#273482104">(Feb 28 2022 at 12:33)</a>:</h4>
<p>Thanks! I'll share a link to the gist of your version as another example</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>closure goal keeps expanding lifetimes chalk#688 · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html">closure goal keeps expanding lifetimes chalk#688</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="239088502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239088502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239088502">(May 17 2021 at 13:29)</a>:</h4>
<p>ok hi <span class="user-mention" data-user-id="125131">@detrumi</span> and <span class="user-mention" data-user-id="232957">@Jack Huey</span></p>



<a name="239088543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239088543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239088543">(May 17 2021 at 13:29)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="239088834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239088834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239088834">(May 17 2021 at 13:30)</a>:</h4>
<p>So, the first thing to know here is that reproducing the issue in the Chalk tests isn't really possible because of the way closures are handled</p>



<a name="239088863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239088863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239088863">(May 17 2021 at 13:31)</a>:</h4>
<p>yeah, that's a problem</p>



<a name="239088892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239088892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239088892">(May 17 2021 at 13:31)</a>:</h4>
<p>Particularly, Chalk doesn't allow us to test "partially known closures"</p>



<a name="239088952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239088952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239088952">(May 17 2021 at 13:31)</a>:</h4>
<p>what is a partially known closure</p>



<a name="239088990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239088990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239088990">(May 17 2021 at 13:31)</a>:</h4>
<p>Like, where we don't quite know the signature yet</p>



<a name="239089111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089111">(May 17 2021 at 13:32)</a>:</h4>
<p>I was working on refactoring the way we handle closures in chalk-integration to be able to support that</p>



<a name="239089259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089259">(May 17 2021 at 13:33)</a>:</h4>
<p>yeah</p>



<a name="239089264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089264">(May 17 2021 at 13:33)</a>:</h4>
<p>I think we would want to do that</p>



<a name="239089276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089276">(May 17 2021 at 13:33)</a>:</h4>
<p>the whole goal is to be able to always reduce things down, after all</p>



<a name="239089300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089300">(May 17 2021 at 13:33)</a>:</h4>
<p>I don't really udnerstand this notation :)</p>



<a name="239089302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089302">(May 17 2021 at 13:33)</a>:</h4>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>



<a name="239089319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089319">(May 17 2021 at 13:33)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Implemented</span><span class="p">({</span><span class="n">closure</span>:<span class="nc">ClosureId</span><span class="p">(</span><span class="mi">3</span><span class="p">)}</span><span class="o">&lt;</span><span class="p">[</span><span class="o">?</span><span class="mi">0</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="k">for</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="mi">0</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="mi">2</span><span class="o">&lt;</span><span class="p">[</span><span class="o">?</span><span class="mi">0</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="mi">1</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="o">^</span><span class="mf">1.1</span><span class="p">)]</span><span class="o">&gt;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="mi">1</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="mi">2</span><span class="o">&lt;</span><span class="p">[</span><span class="o">?</span><span class="mi">0</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="mf">1.2</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="mi">1</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="mf">1.1</span><span class="p">]</span><span class="o">&gt;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="mi">2</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">Ordering</span><span class="o">&lt;</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">]</span><span class="w"></span>
<span class="p">]</span><span class="o">&gt;</span><span class="w"> </span>: <span class="nb">FnMut</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&lt;</span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="mi">0</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="mi">2</span><span class="o">&lt;</span><span class="p">[</span><span class="o">?</span><span class="mi">0</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="mi">1</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="mf">0.4</span><span class="p">]</span><span class="o">&gt;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="mi">1</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="mi">2</span><span class="o">&lt;</span><span class="p">[</span><span class="o">?</span><span class="mi">0</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="mi">1</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="mf">0.4</span><span class="p">]</span><span class="o">&gt;</span><span class="p">)</span><span class="w"></span>
<span class="p">]</span><span class="o">&gt;&gt;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>



<a name="239089349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089349">(May 17 2021 at 13:34)</a>:</h4>
<p>Let me explain</p>



<a name="239089442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089442" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089442">(May 17 2021 at 13:34)</a>:</h4>
<p>(also, I just pushed my WIP branch if you're interested: <a href="https://github.com/jackh726/chalk/tree/688">https://github.com/jackh726/chalk/tree/688</a>)</p>



<a name="239089468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089468">(May 17 2021 at 13:34)</a>:</h4>
<p>Okay, so that notation</p>



<a name="239089508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089508">(May 17 2021 at 13:34)</a>:</h4>
<p>Is just the closure substitution</p>



<a name="239089600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089600">(May 17 2021 at 13:35)</a>:</h4>
<p>I'm not sure I like the <code>?0 :=</code>, <code>?1 :=</code></p>



<a name="239089605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089605">(May 17 2021 at 13:35)</a>:</h4>
<p>but it's just the indices</p>



<a name="239089721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089721">(May 17 2021 at 13:36)</a>:</h4>
<p><code>for&lt;0&gt;</code> means the <code>Function</code>/<code>FnPtr</code> has 0 "late-bound" vars</p>



<a name="239089768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089768">(May 17 2021 at 13:36)</a>:</h4>
<p>I see</p>



<a name="239089769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089769">(May 17 2021 at 13:36)</a>:</h4>
<p>ok</p>



<a name="239089780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239089780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239089780">(May 17 2021 at 13:36)</a>:</h4>
<p>the <code>?0 := </code> is what I couldn't remember</p>



<a name="239090161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239090161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239090161">(May 17 2021 at 13:38)</a>:</h4>
<p>Still trying to bring into cache the exact issue</p>



<a name="239090180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239090180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239090180">(May 17 2021 at 13:38)</a>:</h4>
<p>I thought I had figured it out</p>



<a name="239090519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239090519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239090519">(May 17 2021 at 13:40)</a>:</h4>
<p>At least, the issue; not the solution</p>



<a name="239091391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239091391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239091391">(May 17 2021 at 13:46)</a>:</h4>
<p>hmm</p>



<a name="239091569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239091569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239091569">(May 17 2021 at 13:47)</a>:</h4>
<p>I thought I had written down somewhere more</p>



<a name="239092028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092028">(May 17 2021 at 13:50)</a>:</h4>
<p>I guess I will re-read the previous topic</p>



<a name="239092037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092037">(May 17 2021 at 13:50)</a>:</h4>
<p>I've been staring at the example a bit</p>



<a name="239092119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092119">(May 17 2021 at 13:50)</a>:</h4>
<p>I don't know how helpful the previous topic will be</p>



<a name="239092154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092154">(May 17 2021 at 13:50)</a>:</h4>
<p>I was skimming through it just now</p>



<a name="239092184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092184">(May 17 2021 at 13:51)</a>:</h4>
<p>A lot of it is me trying to figure out exactly what the problem is</p>



<a name="239092188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092188">(May 17 2021 at 13:51)</a>:</h4>
<p>I mean I can kind of vaguely imagine what is happening</p>



<a name="239092252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092252">(May 17 2021 at 13:51)</a>:</h4>
<p>I see you wrote</p>



<a name="239092256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092256">(May 17 2021 at 13:51)</a>:</h4>
<blockquote>
<p>Yeah, actually, I bet this is happening because we call generalize_substitution on the whole closure substitution</p>
</blockquote>



<a name="239092274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092274">(May 17 2021 at 13:51)</a>:</h4>
<p>do you still think that's true :)</p>



<a name="239092283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092283">(May 17 2021 at 13:51)</a>:</h4>
<p>that sounds quite plausible</p>



<a name="239092329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092329">(May 17 2021 at 13:52)</a>:</h4>
<p>I..maybe</p>



<a name="239092416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092416">(May 17 2021 at 13:52)</a>:</h4>
<p>I would expect there is some unification happening</p>



<a name="239092417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092417">(May 17 2021 at 13:52)</a>:</h4>
<p>I think maybe <code>'static</code> was getting generalized to a lifetime inference variable</p>



<a name="239092423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092423">(May 17 2021 at 13:52)</a>:</h4>
<p>how come we don't get more logs?</p>



<a name="239092522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092522">(May 17 2021 at 13:53)</a>:</h4>
<p>So, somewhere there should be logs with chalk-solve too</p>



<a name="239092544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092544">(May 17 2021 at 13:53)</a>:</h4>
<p>I know at first <span class="user-mention" data-user-id="125131">@detrumi</span> was only sharing chalk-recursive</p>



<a name="239092696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092696">(May 17 2021 at 13:54)</a>:</h4>
<p><a href="https://github.com/jackh726/chalk/tree/688">https://github.com/jackh726/chalk/tree/688</a></p>



<a name="239092703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092703">(May 17 2021 at 13:54)</a>:</h4>
<p>whoops</p>



<a name="239092755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092755">(May 17 2021 at 13:54)</a>:</h4>
<p>Part 2: <a href="https://gist.github.com/detrumi/f279f38e4116e7779e0a3e9e0ba6ffdd">https://gist.github.com/detrumi/f279f38e4116e7779e0a3e9e0ba6ffdd</a></p>



<a name="239092797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092797">(May 17 2021 at 13:54)</a>:</h4>
<p>Part 1: <a href="https://gist.github.com/detrumi/5d91e8fc419f9107bfa86ec9514d1e8f">https://gist.github.com/detrumi/5d91e8fc419f9107bfa86ec9514d1e8f</a></p>



<a name="239092915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092915">(May 17 2021 at 13:55)</a>:</h4>
<p>I see some mention of the occurs check</p>



<a name="239092940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239092940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239092940">(May 17 2021 at 13:55)</a>:</h4>
<p>That sounds relevant</p>



<a name="239093034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239093034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239093034">(May 17 2021 at 13:55)</a>:</h4>
<p>Trying to remember...maybe generalizing and that's bypassing the occurs check?</p>



<a name="239093297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239093297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239093297">(May 17 2021 at 13:57)</a>:</h4>
<p><a href="#narrow/stream/144729-wg-traits/topic/Functions.20in.20Chalk/near/231880657">https://rust-lang.zulipchat.com/#narrow/stream/144729-wg-traits/topic/Functions.20in.20Chalk/near/231880657</a> is important I think</p>



<a name="239093392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239093392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239093392">(May 17 2021 at 13:58)</a>:</h4>
<p>err maybe</p>



<a name="239093756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239093756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239093756">(May 17 2021 at 14:00)</a>:</h4>
<p>Sorry I haven't been very helpful here</p>



<a name="239093789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239093789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239093789">(May 17 2021 at 14:00)</a>:</h4>
<p>that's ok</p>



<a name="239093799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239093799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239093799">(May 17 2021 at 14:01)</a>:</h4>
<p>I'm still reading a bit into the logs</p>



<a name="239095179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095179">(May 17 2021 at 14:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688/near/239092797">said</a>:</p>
<blockquote>
<p><a href="https://gist.github.com/detrumi/5d91e8fc419f9107bfa86ec9514d1e8f">https://gist.github.com/detrumi/5d91e8fc419f9107bfa86ec9514d1e8f</a></p>
</blockquote>
<p>so this one doesn't seem to be showing the problem</p>



<a name="239095312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095312">(May 17 2021 at 14:09)</a>:</h4>
<p>or maybe I'm confused</p>



<a name="239095358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095358">(May 17 2021 at 14:09)</a>:</h4>
<p>but when I filter down, I see <code>Implemented({closure:ClosureId(0)}&lt;[?0 := () for&lt;0&gt; [?0 := (&amp;'static 0&lt;[]&gt;), ?1 := Option&lt;[?0 := 2&lt;[?0 := (&amp;'static 0&lt;[]&gt;), ?1 := ^1.0]&gt;]&gt;]]&gt;</code></p>



<a name="239095368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095368">(May 17 2021 at 14:09)</a>:</h4>
<p>and it never seems to get any "longer"</p>



<a name="239095443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095443">(May 17 2021 at 14:10)</a>:</h4>
<p>You are correct</p>



<a name="239095474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095474">(May 17 2021 at 14:10)</a>:</h4>
<p>(I updated those messages to be more clear)</p>



<a name="239095545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095545">(May 17 2021 at 14:10)</a>:</h4>
<p>oh</p>



<a name="239095553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095553">(May 17 2021 at 14:10)</a>:</h4>
<p>darn :)</p>



<a name="239095554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095554">(May 17 2021 at 14:10)</a>:</h4>
<p><span class="user-mention" data-user-id="125131">@detrumi</span> had truncated at one point too early</p>



<a name="239095603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095603">(May 17 2021 at 14:11)</a>:</h4>
<p>ok, well, but this may still be the way the ball "gets rolling" I guess?</p>



<a name="239095646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095646">(May 17 2021 at 14:11)</a>:</h4>
<p>No I don't think so</p>



<a name="239095797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095797">(May 17 2021 at 14:12)</a>:</h4>
<div class="codehilite"><pre><span></span><code>[INFO hir_ty::traits] trait_solve_query(Implements(|&amp;(?0.0, &amp;?0.1), &amp;(?0.2, ?0.1)| -&gt; Ordering: FnMut&lt;(&amp;(?0.3, ?0.4), &amp;(?0.3, ?0.4))&gt;))
[INFO hir_ty::traits] trait_solve_query(Normalize(&lt;|&amp;(?0.0, &amp;?0.1), &amp;(?0.2, ?0.1)| -&gt; Ordering as FnOnce&lt;(&amp;(?0.3, ?0.4), &amp;(?0.3, ?0.4))&gt;&gt;::Output =&gt; Ordering))
</code></pre></div>



<a name="239095839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239095839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239095839">(May 17 2021 at 14:12)</a>:</h4>
<p>That second query is the important one</p>



<a name="239096030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239096030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239096030">(May 17 2021 at 14:13)</a>:</h4>
<p>(IIRC)</p>



<a name="239100142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239100142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239100142">(May 17 2021 at 14:36)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="239100846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239100846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239100846">(May 17 2021 at 14:39)</a>:</h4>
<p>Trying to get the right log output now...</p>



<a name="239101537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239101537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239101537">(May 17 2021 at 14:43)</a>:</h4>
<p>This query, right? <a href="https://gist.github.com/detrumi/de59afb6e2e1e863ddb93d8431798b40">https://gist.github.com/detrumi/de59afb6e2e1e863ddb93d8431798b40</a></p>



<a name="239102056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239102056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239102056">(May 17 2021 at 14:45)</a>:</h4>
<p>Not sure, but there are no chalk-solve logs there</p>



<a name="239103078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239103078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239103078">(May 17 2021 at 14:51)</a>:</h4>
<p>Ah, that needed <code>CHALK_DEBUG=4</code>. <a href="https://gist.github.com/detrumi/179079d7065bb4f5720797b1cdbed646">https://gist.github.com/detrumi/179079d7065bb4f5720797b1cdbed646</a></p>



<a name="239114218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/239114218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#239114218">(May 17 2021 at 15:53)</a>:</h4>
<p>I see the output now, so that's good!</p>



<a name="240050604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240050604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240050604">(May 24 2021 at 13:26)</a>:</h4>
<p>I remember we were also digging into this bug, <span class="user-mention" data-user-id="232957">@Jack Huey</span></p>



<a name="240050614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240050614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240050614">(May 24 2021 at 13:26)</a>:</h4>
<p>which feels similar-ish</p>



<a name="240050668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240050668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240050668">(May 24 2021 at 13:27)</a>:</h4>
<p>Yes, we were</p>



<a name="240050719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240050719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240050719">(May 24 2021 at 13:27)</a>:</h4>
<p>But I've had like no time to dig more into this and write up things</p>



<a name="240050745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240050745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240050745">(May 24 2021 at 13:27)</a>:</h4>
<p>Or try to push my changes through locally on actually reproing the issue</p>



<a name="240051111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240051111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240051111">(May 24 2021 at 13:30)</a>:</h4>
<p>I'm trying to remember what I was filtering for to better isolate the issue</p>



<a name="240051594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240051594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240051594">(May 24 2021 at 13:34)</a>:</h4>
<p>I don't remember :/</p>



<a name="240051797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240051797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240051797">(May 24 2021 at 13:35)</a>:</h4>
<p><code>Implemented.*closure:ClosureId</code> seems to work :)</p>



<a name="240052723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052723">(May 24 2021 at 13:42)</a>:</h4>
<p>how hard do you think it would be to make a vscode mode for browsing the logs produced by tracing?</p>



<a name="240052750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052750">(May 24 2021 at 13:42)</a>:</h4>
<p>I am always frustrated when I'm at some line</p>



<a name="240052758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052758">(May 24 2021 at 13:42)</a>:</h4>
<p>and I want to see the "enclosing stack"</p>



<a name="240052761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052761">(May 24 2021 at 13:42)</a>:</h4>
<p>or "hide subtrees"</p>



<a name="240052764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052764">(May 24 2021 at 13:43)</a>:</h4>
<p>things like that</p>



<a name="240052817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052817">(May 24 2021 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> who from rust-analyzer land can I nerdswipe to do this :P</p>



<a name="240052953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052953">(May 24 2021 at 13:44)</a>:</h4>
<p>Ooh that would be super neat</p>



<a name="240052999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240052999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240052999">(May 24 2021 at 13:44)</a>:</h4>
<p>it seems not <em>that</em> hard</p>



<a name="240053259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240053259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240053259">(May 24 2021 at 13:47)</a>:</h4>
<p><a href="https://tracing.rs/tracing_flame/index.html">tracing_flame</a> is something I also want to play with</p>



<a name="240054022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240054022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240054022">(May 24 2021 at 13:53)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> who from rust-analyzer land can I nerdswipe to do this :P</p>
</blockquote>
<p>If I did it, it'd be in Emacs ;)</p>



<a name="240054561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/closure%20goal%20keeps%20expanding%20lifetimes%20chalk%23688/near/240054561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/closure.20goal.20keeps.20expanding.20lifetimes.20chalk.23688.html#240054561">(May 24 2021 at 13:57)</a>:</h4>
<p>at least you didn't say vim</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
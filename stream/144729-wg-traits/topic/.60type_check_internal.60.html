<html>
<head><meta charset="utf-8"><title>`type_check_internal` · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html">`type_check_internal`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278135011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278135011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278135011">(Apr 07 2022 at 09:00)</a>:</h4>
<p>in mir typeck, we have an <code>extra: impl FnOnce(TypeChecker&lt;'a, 'tcx&gt;) -&gt; R</code> argument for <code>type_check_internal</code>. As that function is only used once that seems unnecessary to me.</p>



<a name="278135061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278135061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278135061">(Apr 07 2022 at 09:00)</a>:</h4>
<p>was there a reason why we added that closure</p>



<a name="278135111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278135111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278135111">(Apr 07 2022 at 09:00)</a>:</h4>
<p>or well, actually i would just merge <code>type_check_internal</code> into <code>type_check</code></p>



<a name="278136783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278136783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278136783">(Apr 07 2022 at 09:19)</a>:</h4>
<p>Huh? <code>type_check_internal</code> was used twice in a branch I looked at yesterday. Did something change around type checking const generics?</p>



<a name="278136832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278136832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278136832">(Apr 07 2022 at 09:19)</a>:</h4>
<p>Wait no, that was <code>typeck_with_fallback</code></p>



<a name="278136891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278136891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278136891">(Apr 07 2022 at 09:20)</a>:</h4>
<p>You're talking about mir typeck. Right.</p>



<a name="278136986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278136986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278136986">(Apr 07 2022 at 09:21)</a>:</h4>
<p>Uh, that closure has confused me, too. I just didn't want to touch it yet due to the lazy type-alias-impl-trait stuff, but that's done now</p>



<a name="278136995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60type_check_internal%60/near/278136995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60type_check_internal.60.html#278136995">(Apr 07 2022 at 09:21)</a>:</h4>
<p>So yea, just inline the closure manually</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
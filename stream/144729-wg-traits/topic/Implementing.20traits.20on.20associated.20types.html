<html>
<head><meta charset="utf-8"><title>Implementing traits on associated types · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html">Implementing traits on associated types</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="275878065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitrii Demenev <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878065">(Mar 19 2022 at 00:25)</a>:</h4>
<p>Recently I asked a question on Stack Overflow <a href="https://stackoverflow.com/questions/71522871/rust-implement-trait-for-the-associated-type">"Rust: implement trait for the associated type"</a>. Is the behavior I wanted entirely impossible or is it something that might eventually be available? If there's a possibility for it, what should I check out?</p>



<a name="275878225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878225">(Mar 19 2022 at 00:28)</a>:</h4>
<p>iirc the reason why marker trait impls have to obey orphan rules is something to do with specialisation</p>



<a name="275878240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878240">(Mar 19 2022 at 00:29)</a>:</h4>
<p>oh I guess that is not orphan rules</p>



<a name="275878272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitrii Demenev <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878272">(Mar 19 2022 at 00:30)</a>:</h4>
<p><span class="user-mention" data-user-id="326176">@Boxy [she/her]</span> Well, that's true. However, marker_trait_attr allows that because it's safe to do <a href="https://doc.rust-lang.org/beta/unstable-book/language-features/marker-trait-attr.html">https://doc.rust-lang.org/beta/unstable-book/language-features/marker-trait-attr.html</a> That was one of the reasons why I guessed that it could be theoretically possible.</p>



<a name="275878427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878427">(Mar 19 2022 at 00:32)</a>:</h4>
<p>I think i misremembered, orphan rules have to be obeyed  for soundness reasons <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> not sure what it was relating to marker traits + specialisation i was remembering</p>



<a name="275878435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878435">(Mar 19 2022 at 00:32)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/29864">https://github.com/rust-lang/rust/issues/29864</a> tracking issue has some discussion relating to orphan rules</p>



<a name="275878478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878478">(Mar 19 2022 at 00:33)</a>:</h4>
<p>&lt;<a href="https://github.com/rust-lang/rust/issues/29864#issuecomment-977146324">https://github.com/rust-lang/rust/issues/29864#issuecomment-977146324</a>&gt; specifically this comment</p>



<a name="275878568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878568">(Mar 19 2022 at 00:35)</a>:</h4>
<p>not sure this is at all related to your problem tho</p>



<a name="275878674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275878674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitrii Demenev <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275878674">(Mar 19 2022 at 00:36)</a>:</h4>
<p><span class="user-mention" data-user-id="326176">@Boxy [she/her]</span> At least you drew my attention towards the unsoundness issue and now I can understand the problem better! Thank you so much!</p>



<a name="275880035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Implementing%20traits%20on%20associated%20types/near/275880035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/Implementing.20traits.20on.20associated.20types.html#275880035">(Mar 19 2022 at 01:01)</a>:</h4>
<p>Also, a crate can <em>negatively</em> impl a marker trait for its own type.  And that would be a breaking change if some other crate had <em>positively</em> implemented it.</p>
<p>So marker traits remove the rules about <em>overlapping</em> impls (with the same polarity), but not about <em>who</em> is allowed to write the impls.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
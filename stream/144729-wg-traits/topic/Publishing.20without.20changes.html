<html>
<head><meta charset="utf-8"><title>Publishing without changes · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html">Publishing without changes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="240760691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/240760691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#240760691">(May 30 2021 at 15:31)</a>:</h4>
<p>I noticed that v0.68 was published without any changes from v0.67:<br>
<a href="https://github.com/rust-lang/chalk/compare/v0.67.0...v0.68.0">https://github.com/rust-lang/chalk/compare/v0.67.0...v0.68.0</a></p>
<p>Maybe we should modify the publishing mechanism to skip publishing when there have been no changes since the last release?</p>



<a name="241563255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241563255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241563255">(Jun 04 2021 at 16:50)</a>:</h4>
<p><span class="user-mention" data-user-id="218805">@Mark Drobnak</span> If someone (you???) makes a PR for that, then I would approve it</p>



<a name="241716633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241716633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241716633">(Jun 06 2021 at 23:49)</a>:</h4>
<p>I opened a PR: <a href="https://github.com/rust-lang/chalk/pull/711">https://github.com/rust-lang/chalk/pull/711</a></p>



<a name="241855252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241855252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241855252">(Jun 07 2021 at 23:42)</a>:</h4>
<p><span class="user-mention" data-user-id="218805">@Mark Drobnak</span> Thanks!</p>



<a name="241855258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241855258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241855258">(Jun 07 2021 at 23:42)</a>:</h4>
<p>Why ignore cargo.toml though?</p>



<a name="241856999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241856999" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241856999">(Jun 08 2021 at 00:09)</a>:</h4>
<p>When the dev version is committed (ex. v0.1.0-dev.0) it affects the Cargo.toml files and would trigger a new publish cycle. I'll note that in the PR.</p>



<a name="241857379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241857379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241857379">(Jun 08 2021 at 00:15)</a>:</h4>
<p>Oh I see...that's less than ideal I guess. (I guess I could imagine a world where some config.toml change occurs but nothing else)</p>



<a name="241857454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241857454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241857454">(Jun 08 2021 at 00:17)</a>:</h4>
<p>Is it possible to make a manual publish bypass this check? I can't see us ever manually publishing if there aren't actual changes. But also changing the config.toml is probably rare enough that just having the one bypass is enough.</p>



<a name="241857470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241857470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241857470">(Jun 08 2021 at 00:17)</a>:</h4>
<p>(If it's too difficult, I'll probably still approve this. I don't really think we'll run into this issue)</p>



<a name="241866409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241866409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241866409">(Jun 08 2021 at 03:17)</a>:</h4>
<p>I'll check soon if there's a environment variable or something that can signal the job was manually triggered so we can bypass this check.</p>



<a name="241870614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241870614" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241870614">(Jun 08 2021 at 04:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/Publishing.20without.20changes/near/241857454">said</a>:</p>
<blockquote>
<p>Is it possible to make a manual publish bypass this check?</p>
</blockquote>
<p>Starting a changelog? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="241922780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241922780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241922780">(Jun 08 2021 at 13:54)</a>:</h4>
<p>I actually also opened a PR about the changelog <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <a href="https://github.com/rust-lang/chalk/pull/710">https://github.com/rust-lang/chalk/pull/710</a></p>



<a name="241924956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241924956" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241924956">(Jun 08 2021 at 14:08)</a>:</h4>
<p>I saw. Still have to get to that :/ been so swamped the past couple weeks</p>



<a name="241925076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/241925076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#241925076">(Jun 08 2021 at 14:09)</a>:</h4>
<p>Oh thanks <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="242014779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/242014779" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#242014779">(Jun 09 2021 at 03:41)</a>:</h4>
<p>I've updated the PR to skip the empty release check when the job was manually triggered.</p>



<a name="247062725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/247062725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#247062725">(Jul 24 2021 at 08:07)</a>:</h4>
<p>Is it me, or did <code>chalk</code> stop being published? There were some changes merged 10-12 days ago, but the crates haven't been updated in two months</p>



<a name="247062775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/247062775" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#247062775">(Jul 24 2021 at 08:08)</a>:</h4>
<p><a href="https://github.com/rust-lang/chalk/runs/3095083784?check_suite_focus=true">https://github.com/rust-lang/chalk/runs/3095083784?check_suite_focus=true</a> failed because it couldn't find <code>auto-changelog</code></p>



<a name="247279180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/Publishing%20without%20changes/near/247279180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/Publishing.20without.20changes.html#247279180">(Jul 27 2021 at 00:08)</a>:</h4>
<p>I opened a PR to fix this: <a href="https://github.com/rust-lang/chalk/pull/720">https://github.com/rust-lang/chalk/pull/720</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
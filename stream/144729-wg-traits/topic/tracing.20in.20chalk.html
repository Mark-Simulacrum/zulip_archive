<html>
<head><meta charset="utf-8"><title>tracing in chalk · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html">tracing in chalk</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="184515615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184515615" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184515615">(Dec 31 2019 at 00:14)</a>:</h4>
<p><code>tracing</code>, as I've been pitching to <span class="user-mention" data-user-id="116009">@nikomatsakis</span>:</p>
<ul>
<li>it's a drop-in replacement to <code>log</code>, but it can also function as a <code>log</code> message receiver.</li>
<li>there aren't _that_ many crates an application needs to think about: maybe two at most. a library only needs to worry about the core <code>tracing</code> crate. I started on docs: <a href="https://github.com/tokio-rs/tracing/pull/496" target="_blank" title="https://github.com/tokio-rs/tracing/pull/496">https://github.com/tokio-rs/tracing/pull/496</a></li>
<li>it's meant to be _really_ modular and performant, which leads to most of the "wow this is complex" factors that some people might get. better docs could help. that being said, several public AWS services _are_ using tracing in their data planes (every customer request, all the time).</li>
<li>tracing's <code>span</code>s track causality and temporality, which let you build up an execution graph of libraries and applications _without_ runtime support. with that information, you can replicate ra's hierarchical profiling feature, amongst others.</li>
<li>a <code>span</code> should typically correspond to whatever you consider to be a semantically meaningful unit of work. in Chalk's case, you might want to attach a span to a strand, which would allow you to track that end-to-end. in ra's case, you might have a top-level span for each lsp query, with more fine grained spans as appropriate.</li>
<li>chalk reminds me a bit of <code>tracing</code>: at a high level, both <code>tracing</code> and <code>chalk</code> run some sort of queries over large graphs.</li>
</ul>



<a name="184515690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184515690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184515690">(Dec 31 2019 at 00:15)</a>:</h4>
<p>here are some neat libraries atop of tracing, for what it's worth:</p>
<ul>
<li><a href="https://github.com/jonhoo/tracing-timing" target="_blank" title="https://github.com/jonhoo/tracing-timing">https://github.com/jonhoo/tracing-timing</a></li>
<li><a href="https://github.com/GregBowyer/tracing-coz" target="_blank" title="https://github.com/GregBowyer/tracing-coz">https://github.com/GregBowyer/tracing-coz</a></li>
<li><a href="https://github.com/jtescher/tracing-opentelemetry" target="_blank" title="https://github.com/jtescher/tracing-opentelemetry">https://github.com/jtescher/tracing-opentelemetry</a></li>
<li><a href="https://github.com/pkinsky/honeycomb-tracing" target="_blank" title="https://github.com/pkinsky/honeycomb-tracing">https://github.com/pkinsky/honeycomb-tracing</a></li>
</ul>



<a name="184515884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184515884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184515884">(Dec 31 2019 at 00:20)</a>:</h4>
<p>now that i've pitched the benefits, feel free to explain your needs and i can tell you what's ready and what need a bit of work :)</p>



<a name="184515970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184515970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184515970">(Dec 31 2019 at 00:23)</a>:</h4>
<p><span class="user-mention" data-user-id="198819">@David Barsky</span> would you recommend switching rust-analyzer's hierarchical profiling from a hand-written thing to <code>tracing</code>?  The metrics I am interested most is the amount of code I need to maintain and compile times.</p>



<a name="184520242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184520242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184520242">(Dec 31 2019 at 02:28)</a>:</h4>
<p>So right now, chalk doesn't make use of <code>log</code> I don't think. Instead it uses the <code>debug</code>, <code>debug_heading</code>, <code>info</code>, and <code>info_heading</code> macros in <code>chalk-macros</code> (I think)</p>



<a name="184520259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184520259" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184520259">(Dec 31 2019 at 02:29)</a>:</h4>
<p><span class="user-mention" data-user-id="198819">@David Barsky</span> It would be super awesome if you sent a PR introducing <code>tracing</code>. From what I can tell, that would be immediately helpful when looking at performance with <code>tracing-timing</code>, right?</p>



<a name="184520775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184520775" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184520775">(Dec 31 2019 at 02:45)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> if it’s _just_ the hierarchal profiling, _maybe_ not. if you’d like to start to replace other instrumentation systems, like logging or whatever, then i’m inclined to say yes. I’ve found tracing-like systems as a great way to onboard new engineers and debug complex systems at work, and that could be handy for rust-analyzer.</p>



<a name="184520849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184520849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184520849">(Dec 31 2019 at 02:47)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> gotcha, those macros look decently similar to log’s, i think. i think tracing could be used to replace those, but in terms of global performance overviews, you’ll need to instrument with the spans to note units of work. the <code>#[instrument]</code> macro helps.</p>



<a name="184520853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184520853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184520853">(Dec 31 2019 at 02:47)</a>:</h4>
<p>i’m also on vacation so i’ll be a bit slow to respond, i’m sorry.</p>



<a name="184523233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184523233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184523233">(Dec 31 2019 at 03:59)</a>:</h4>
<p>Really, the existing macros essentially just output with <code>eprintln</code> and also manage indentation too</p>



<a name="184523268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184523268" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184523268">(Dec 31 2019 at 04:00)</a>:</h4>
<p>Haven't really looked at <code>tracing</code> much, only briefly. So really don't know how perf overviews could be checked</p>



<a name="184523283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184523283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184523283">(Dec 31 2019 at 04:00)</a>:</h4>
<p>Also on vacation, so I understand :)</p>



<a name="184523991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184523991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184523991">(Dec 31 2019 at 04:23)</a>:</h4>
<p>perf-related views would really be a thing once tracing has a sufficiently comprehensive view of a program’s execution graph, which is comes much more quickly than you’d expect.</p>



<a name="184524114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184524114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184524114">(Dec 31 2019 at 04:27)</a>:</h4>
<p>you can think of spans as nodes in graph, but it’s up to you to you demarcate the different nodes. we’re trying to reduce the amount of effort needed to mark different sections. it’s less than say, metrics libraries, but more than what some folks might be used to.</p>



<a name="184524308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184524308" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184524308">(Dec 31 2019 at 04:33)</a>:</h4>
<p>for what it’s worth <span class="user-mention" data-user-id="133169">@matklad</span>, i wanted something like the profiling tools you have in ra_prof to live in tracing (would be super handy for debugging/profiling services) but never got around it to writing that integration. too little time.</p>
<p>the main win of having something like ra_prof in tracing is that existing annotations can be reused for the the style of profiling you have. i’m not sure compile times would really decrease, but i also think they won’t really increase in major ways. won’t increase, and you might end up owning less code.</p>



<a name="184525688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184525688" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184525688">(Dec 31 2019 at 05:16)</a>:</h4>
<p>anyways, i’ll dump the last few thoughts: if you need an incremental, graph-based instrumentation system, tracing’s a great fit. it’s great for debugging and understanding complex systems. if your current approach to instrumentation and debugging works well enough, tracing will still be there when you do start to need it. that being said, the benefits of tracing-like systems are surprisingly large, even early on &amp; when it might feel like overkill. i think it might be a formalization of what’s currently in chalk and ra_prof, but i can’t say if the formalization is right for you now.</p>
<p>i’ll post a screenshot of the sort of data it can collect after i sleep (8-9 hours from now).</p>



<a name="184552954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184552954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184552954">(Dec 31 2019 at 16:43)</a>:</h4>
<p>phew, last one for now: here's _one_ tracing output for the example in: <a href="https://github.com/tokio-rs/tracing/pull/496/" target="_blank" title="https://github.com/tokio-rs/tracing/pull/496/">https://github.com/tokio-rs/tracing/pull/496/</a> <a href="/user_uploads/4715/EH0e0peYilxDGlOJVirNNHCF/Screen-Shot-2019-12-31-at-11.40.20-AM.png" target="_blank" title="Screen-Shot-2019-12-31-at-11.40.20-AM.png">Screen-Shot-2019-12-31-at-11.40.20-AM.png</a>.</p>
<div class="message_inline_image"><a href="/user_uploads/4715/EH0e0peYilxDGlOJVirNNHCF/Screen-Shot-2019-12-31-at-11.40.20-AM.png" target="_blank" title="Screen-Shot-2019-12-31-at-11.40.20-AM.png"><img src="/user_uploads/4715/EH0e0peYilxDGlOJVirNNHCF/Screen-Shot-2019-12-31-at-11.40.20-AM.png"></a></div>



<a name="184974792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/184974792" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#184974792">(Jan 07 2020 at 01:32)</a>:</h4>
<p><a href="/user_uploads/4715/5-bWMxsEDN3BECuLiTTWWHTP/Screen-Shot-2020-01-06-at-8.29.42-PM.png" target="_blank" title="Screen-Shot-2020-01-06-at-8.29.42-PM.png">Screen-Shot-2020-01-06-at-8.29.42-PM.png</a> a formatter that attempts to mimic ra-prof, but is also inspired by what <code>tracing</code> already has + slog</p>
<div class="message_inline_image"><a href="/user_uploads/4715/5-bWMxsEDN3BECuLiTTWWHTP/Screen-Shot-2020-01-06-at-8.29.42-PM.png" target="_blank" title="Screen-Shot-2020-01-06-at-8.29.42-PM.png"><img src="/user_uploads/4715/5-bWMxsEDN3BECuLiTTWWHTP/Screen-Shot-2020-01-06-at-8.29.42-PM.png"></a></div>



<a name="185144417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185144417" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185144417">(Jan 08 2020 at 18:54)</a>:</h4>
<p>Are these times the diff between current event and last? Or current event and last event or span?</p>



<a name="185155726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185155726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185155726">(Jan 08 2020 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> these times are the difference between the current event and the last event/span, whichever was the last one.</p>



<a name="185155998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185155998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185155998">(Jan 08 2020 at 20:58)</a>:</h4>
<p>so the top-level span ("server") doesn't have an attached elapsed timer, because it lives for the lifetime of the program</p>



<a name="185156711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185156711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185156711">(Jan 08 2020 at 21:06)</a>:</h4>
<p>so the 8.8.8.8 messaged received elapsed is to the beginning of the conn span, not to the previous disconnect?</p>



<a name="185158272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185158272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185158272">(Jan 08 2020 at 21:21)</a>:</h4>
<p>yes, the beginning of the <code>conn</code> span</p>



<a name="185158283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185158283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185158283">(Jan 08 2020 at 21:21)</a>:</h4>
<p>that <em>can</em> change easily</p>



<a name="185158949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185158949" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185158949">(Jan 08 2020 at 21:28)</a>:</h4>
<p>to be entirely honest, I'm not entirely sure how the "elapsed" time should be counted</p>



<a name="185159144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185159144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185159144">(Jan 08 2020 at 21:31)</a>:</h4>
<p>I would say beginning of the span</p>



<a name="185161791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185161791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185161791">(Jan 08 2020 at 22:02)</a>:</h4>
<p>so the current behavior?</p>



<a name="185167384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/185167384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#185167384">(Jan 08 2020 at 23:04)</a>:</h4>
<p>Yea, current behavior seems most correct</p>



<a name="187221866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187221866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187221866">(Feb 02 2020 at 21:59)</a>:</h4>
<p><a href="/user_uploads/4715/rnl7w-ImqWq_U1Jg6U00wLHw/Screen-Shot-2020-02-02-at-4.57.19-PM.png" target="_blank" title="Screen-Shot-2020-02-02-at-4.57.19-PM.png">Screen-Shot-2020-02-02-at-4.57.19-PM.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/rnl7w-ImqWq_U1Jg6U00wLHw/Screen-Shot-2020-02-02-at-4.57.19-PM.png" target="_blank" title="Screen-Shot-2020-02-02-at-4.57.19-PM.png"><img src="/user_uploads/4715/rnl7w-ImqWq_U1Jg6U00wLHw/Screen-Shot-2020-02-02-at-4.57.19-PM.png"></a></div><p>alright, so I said this would be done at some point, and now it is: <a href="https://github.com/davidbarsky/tracing-tree/" target="_blank" title="https://github.com/davidbarsky/tracing-tree/">https://github.com/davidbarsky/tracing-tree/</a></p>



<a name="187247721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187247721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187247721">(Feb 03 2020 at 10:03)</a>:</h4>
<p>This is not a feature request, but have you thought about the Chromium profiler as a target format? E.g. <a href="https://github.com/rust-lang/measureme/blob/master/crox/Readme.md" target="_blank" title="https://github.com/rust-lang/measureme/blob/master/crox/Readme.md">https://github.com/rust-lang/measureme/blob/master/crox/Readme.md</a></p>



<a name="187266415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187266415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187266415">(Feb 03 2020 at 14:27)</a>:</h4>
<p>I have! I mostly haven’t had the time—it’s a matter of prioritization. looking at <a href="https://github.com/rust-lang/measureme/blob/master/crox/src/main.rs" target="_blank" title="https://github.com/rust-lang/measureme/blob/master/crox/src/main.rs">https://github.com/rust-lang/measureme/blob/master/crox/src/main.rs</a>; it does seem to be too bad?</p>



<a name="187279729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187279729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187279729">(Feb 03 2020 at 16:44)</a>:</h4>
<p>This is a somewhat uniformed question, but does Chrome's profiler or Firefox's profile support streaming in trace data, or can it only view a static file?</p>



<a name="187280110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187280110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187280110">(Feb 03 2020 at 16:47)</a>:</h4>
<p>Excuse me: Chrome profiler support <em>doesn't</em> seem to be too difficult to add/support atop of `tracing.</p>



<a name="187300183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187300183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187300183">(Feb 03 2020 at 20:28)</a>:</h4>
<blockquote>
<p>This is a somewhat uniformed question, but does Chrome's profiler or Firefox's profile support streaming in trace data, or can it only view a static file?</p>
</blockquote>
<p>Only files AFAIK</p>



<a name="187307662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187307662" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187307662">(Feb 03 2020 at 21:41)</a>:</h4>
<p>gotcha, thanks</p>



<a name="187686897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187686897" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187686897">(Feb 07 2020 at 22:38)</a>:</h4>
<p>looked a bit at strands in chalk-engine (cc: <span class="user-mention" data-user-id="232957">@Jack Huey</span>). I think if I were place tracing _anywhere_ in chalk, it'd be in here, alongside the timestamp: <a href="https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/strand.rs#L13" target="_blank" title="https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/strand.rs#L13">https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/strand.rs#L13</a>. it'd be a bit similar to how <code>tracing-futures</code> work, minus the feature flags and annotations: <a href="https://github.com/tokio-rs/tracing/blob/master/tracing-futures/src/lib.rs#L223-L230" target="_blank" title="https://github.com/tokio-rs/tracing/blob/master/tracing-futures/src/lib.rs#L223-L230">https://github.com/tokio-rs/tracing/blob/master/tracing-futures/src/lib.rs#L223-L230</a></p>



<a name="187686966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187686966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187686966">(Feb 07 2020 at 22:39)</a>:</h4>
<p>I the "entry" of the span (for tracking work) could occur at strand activation here: <a href="https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/table.rs#L83" target="_blank" title="https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/table.rs#L83">https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/table.rs#L83</a></p>



<a name="187687021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187687021" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187687021">(Feb 07 2020 at 22:40)</a>:</h4>
<p>at least some closure would happen here: <a href="https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/table.rs#L120" target="_blank" title="https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/table.rs#L120">https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/table.rs#L120</a></p>



<a name="187687302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187687302" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187687302">(Feb 07 2020 at 22:44)</a>:</h4>
<p>Chalk engine is also more approachable than I thought! Kudos to whoever wrote the docs.</p>



<a name="187688516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187688516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187688516">(Feb 07 2020 at 23:03)</a>:</h4>
<p>I think that mostly sounds good to me</p>



<a name="187688580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187688580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187688580">(Feb 07 2020 at 23:04)</a>:</h4>
<p>I think I would be the entry for a span here: <a href="https://github.com/rust-lang/chalk/blob/af48f302a1f571b3ca418f7c5aa639a144a34f75/chalk-engine/src/logic.rs#L173" target="_blank" title="https://github.com/rust-lang/chalk/blob/af48f302a1f571b3ca418f7c5aa639a144a34f75/chalk-engine/src/logic.rs#L173">https://github.com/rust-lang/chalk/blob/af48f302a1f571b3ca418f7c5aa639a144a34f75/chalk-engine/src/logic.rs#L173</a></p>



<a name="187688606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187688606" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187688606">(Feb 07 2020 at 23:04)</a>:</h4>
<p>But also curious what your thoughts are on have a <code>Table</code> having a span</p>



<a name="187688632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187688632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187688632">(Feb 07 2020 at 23:05)</a>:</h4>
<p>(in addition to <code>Strand</code>)</p>



<a name="187688837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187688837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187688837">(Feb 07 2020 at 23:08)</a>:</h4>
<blockquote>
<p>Chalk engine is also more approachable than I thought! Kudos to whoever wrote the docs.</p>
</blockquote>
<p>The docs indeed have been quite solid, even since I first started with chalk. When I refactored to make it iterative, I made it a point to even more thoroughly document it. So I'm glad you found them helpful</p>



<a name="187688969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187688969" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187688969">(Feb 07 2020 at 23:10)</a>:</h4>
<p>I think table can have a span, there's a pattern where we have a "server" span in asynchronous servers</p>



<a name="187689023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187689023" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187689023">(Feb 07 2020 at 23:11)</a>:</h4>
<p>yeah, I think that's a good spot to put span entry.</p>



<a name="187689088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187689088" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187689088">(Feb 07 2020 at 23:12)</a>:</h4>
<p>now, if I wanted to _run_ chalk engine and emit this data, what would the best way to do that be?</p>



<a name="187689203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187689203" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187689203">(Feb 07 2020 at 23:14)</a>:</h4>
<p>lemme look, actually. i <strong>think</strong> some sort of tests would be a good start.</p>



<a name="187689515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187689515" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187689515">(Feb 07 2020 at 23:20)</a>:</h4>
<p>yeah, i think i can do something in the <code>test!</code> macro</p>



<a name="187692355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187692355" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187692355">(Feb 08 2020 at 00:11)</a>:</h4>
<blockquote>
<p>yeah, i think i can do something in the <code>test!</code> macro</p>
</blockquote>
<p>Yeah, either the <code>test!</code> macro or the <code>chalk</code> REPL would be good places to start looking at how to run</p>



<a name="187692360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/187692360" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#187692360">(Feb 08 2020 at 00:11)</a>:</h4>
<p>(probably test)</p>



<a name="189184241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189184241" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189184241">(Feb 27 2020 at 03:30)</a>:</h4>
<p><span class="user-mention" data-user-id="198819">@David Barsky</span> are you still planning/working on this? If so, would you consider it "part of the current sprint"? If not, that's cool too; just wondering because I created an issue</p>



<a name="189184248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189184248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189184248">(Feb 27 2020 at 03:31)</a>:</h4>
<p><a href="https://github.com/rust-lang/chalk/issues/337" target="_blank" title="https://github.com/rust-lang/chalk/issues/337">https://github.com/rust-lang/chalk/issues/337</a></p>



<a name="189221684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189221684" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189221684">(Feb 27 2020 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> I'd be happy to work on it, but if someone gets there first, they should do so.</p>



<a name="189221698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189221698" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189221698">(Feb 27 2020 at 15:09)</a>:</h4>
<p>let's say that it is part of the current sprint—i'll let you know soon (next week) if it won't be.</p>



<a name="189221837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189221837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189221837">(Feb 27 2020 at 15:10)</a>:</h4>
<p>Ok, I'll mark it</p>



<a name="189908613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908613">(Mar 06 2020 at 16:19)</a>:</h4>
<p>is someone actively working on this?</p>



<a name="189908618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908618">(Mar 06 2020 at 16:19)</a>:</h4>
<p>I'm adding it to the roadmap</p>



<a name="189908626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908626" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908626">(Mar 06 2020 at 16:19)</a>:</h4>
<p>under a heading like "improve debugability of chalk"</p>



<a name="189908711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908711">(Mar 06 2020 at 16:20)</a>:</h4>
<p>I can go ping David</p>



<a name="189908746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908746">(Mar 06 2020 at 16:20)</a>:</h4>
<p>Also if he doesn't get around to it I can do it ( also contributor to tracing)</p>



<a name="189908759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908759">(Mar 06 2020 at 16:20)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="198819">@David Barsky</span> monitors Zulip too</p>



<a name="189908768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908768" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908768">(Mar 06 2020 at 16:21)</a>:</h4>
<p>Ack</p>



<a name="189908887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908887">(Mar 06 2020 at 16:22)</a>:</h4>
<p>David said he is working on it for the sprint</p>



<a name="189908926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908926" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908926">(Mar 06 2020 at 16:22)</a>:</h4>
<p>can we assign him to the issue?</p>



<a name="189908944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908944">(Mar 06 2020 at 16:23)</a>:</h4>
<p>I wonder if rustbot is monitoring wg-traits, maybe <span class="user-mention" data-user-id="121055">@Pietro Albini</span> or <span class="user-mention" data-user-id="116122">@simulacrum</span> knows</p>



<a name="189908987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189908987" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189908987">(Mar 06 2020 at 16:23)</a>:</h4>
<p>rustbot monitors all of rust-lang org, but may need to be enabled</p>



<a name="189909062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189909062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189909062">(Mar 06 2020 at 16:24)</a>:</h4>
<p>i.e. add the triagebot.toml to the repository and enable specific features</p>



<a name="189909103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189909103" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189909103">(Mar 06 2020 at 16:24)</a>:</h4>
<p>That would be useful</p>



<a name="189909140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189909140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189909140">(Mar 06 2020 at 16:25)</a>:</h4>
<p>See the wiki on the triagebot repo</p>



<a name="189909730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/189909730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#189909730">(Mar 06 2020 at 16:30)</a>:</h4>
<p>yeah, i’m working on it. add it to the sprint; been handling a bit of paperwork this week.</p>



<a name="190618258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/190618258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#190618258">(Mar 14 2020 at 22:52)</a>:</h4>
<p><a href="/user_uploads/4715/0zz6i6yEYXR5WBsur0ReEb2t/Screen-Shot-2020-03-14-at-6.51.45-PM.png" target="_blank" title="Screen-Shot-2020-03-14-at-6.51.45-PM.png">Screen-Shot-2020-03-14-at-6.51.45-PM.png</a> started noodling around by introducing tracing into chalk. no clue if this information is all useless!</p>
<div class="message_inline_image"><a href="/user_uploads/4715/0zz6i6yEYXR5WBsur0ReEb2t/Screen-Shot-2020-03-14-at-6.51.45-PM.png" target="_blank" title="Screen-Shot-2020-03-14-at-6.51.45-PM.png"><img src="/user_uploads/4715/0zz6i6yEYXR5WBsur0ReEb2t/Screen-Shot-2020-03-14-at-6.51.45-PM.png"></a></div>



<a name="190618264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/190618264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#190618264">(Mar 14 2020 at 22:53)</a>:</h4>
<p>leaning towards saying yes :)</p>



<a name="190747928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/190747928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#190747928">(Mar 16 2020 at 16:38)</a>:</h4>
<p>I don't think that's useless :)</p>



<a name="191672232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672232">(Mar 24 2020 at 21:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="w">    </span><span class="n">debug_heading</span><span class="o">!</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="s">&quot;program_clauses_for_goal(goal={:?}, environment={:?})&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">goal</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">environment</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
</pre></div>



<a name="191672251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672251">(Mar 24 2020 at 21:05)</a>:</h4>
<p>wondering if these should be replaced with something like</p>



<a name="191672266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672266" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672266">(Mar 24 2020 at 21:05)</a>:</h4>
<p><code>#[instrument(skip(db))]</code></p>



<a name="191672316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672316">(Mar 24 2020 at 21:06)</a>:</h4>
<p>this looks like a locally scoped tracing span</p>



<a name="191672362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672362">(Mar 24 2020 at 21:06)</a>:</h4>
<p>Yeah, I think anywhere there is a <code>debug</code>, <code>debug_heading</code>, <code>info</code>, or <code>info_heading</code>, those should be replaced with tracing, <em>to start</em></p>



<a name="191672381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672381" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672381">(Mar 24 2020 at 21:06)</a>:</h4>
<p>and we can get that infra landed</p>



<a name="191672408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672408">(Mar 24 2020 at 21:07)</a>:</h4>
<p>then, we can work on fine tuning what more/less needs to be added/removed</p>



<a name="191672423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672423" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672423">(Mar 24 2020 at 21:07)</a>:</h4>
<p>_nod_</p>



<a name="191672446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672446">(Mar 24 2020 at 21:07)</a>:</h4>
<p>the main difference with spans is that it will apply to all events logged within that span's scope</p>



<a name="191672464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672464">(Mar 24 2020 at 21:07)</a>:</h4>
<p>so this debug_heading only applys to the log in the function</p>



<a name="191672516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672516">(Mar 24 2020 at 21:08)</a>:</h4>
<p>well, sort of</p>



<a name="191672525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672525">(Mar 24 2020 at 21:08)</a>:</h4>
<p>but if we turned it into a span it would be prepended on every event in every function that that function calls and so on</p>



<a name="191672558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672558" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672558">(Mar 24 2020 at 21:08)</a>:</h4>
<p>debug_heading "indents" the logging within a function</p>



<a name="191672560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672560">(Mar 24 2020 at 21:08)</a>:</h4>
<p>but you can have levels on spans so it would only show up if that log level is enabled</p>



<a name="191672572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672572">(Mar 24 2020 at 21:08)</a>:</h4>
<p>so, function calls are also indented</p>



<a name="191672583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672583" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672583">(Mar 24 2020 at 21:08)</a>:</h4>
<p>oh interesting</p>



<a name="191672633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672633">(Mar 24 2020 at 21:09)</a>:</h4>
<p>ooh it does apply to subfunction calls</p>



<a name="191672639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672639">(Mar 24 2020 at 21:09)</a>:</h4>
<p>okay so cool its the same thing</p>



<a name="191672655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672655" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672655">(Mar 24 2020 at 21:09)</a>:</h4>
<p>i tihnk theres a logger for tracing that indents events inside of spans</p>



<a name="191672670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672670">(Mar 24 2020 at 21:09)</a>:</h4>
<p>so we should be able to preserve that functionality as well</p>



<a name="191672691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672691">(Mar 24 2020 at 21:09)</a>:</h4>
<p>yea this seems like it will translate nicely</p>



<a name="191672697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672697">(Mar 24 2020 at 21:09)</a>:</h4>
<p>coool</p>



<a name="191672793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672793">(Mar 24 2020 at 21:10)</a>:</h4>
<p>yeah, it translates well as is</p>



<a name="191672813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672813">(Mar 24 2020 at 21:10)</a>:</h4>
<p>but what we don't have currently is a way to only "cover" parts of the function</p>



<a name="191672839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191672839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191672839">(Mar 24 2020 at 21:11)</a>:</h4>
<p>(so like, a Strand being active)</p>



<a name="191673022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673022">(Mar 24 2020 at 21:12)</a>:</h4>
<p>we can always extract sub-functions potentially</p>



<a name="191673044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673044">(Mar 24 2020 at 21:12)</a>:</h4>
<p>it woudl be so great, <span class="user-mention" data-user-id="220273">@Jane Lusby</span>, to have some procedural macro support so that it automatically "dumps" the arguments</p>



<a name="191673048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673048">(Mar 24 2020 at 21:12)</a>:</h4>
<p>i dont think thats necessary</p>



<a name="191673079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673079">(Mar 24 2020 at 21:13)</a>:</h4>
<p>yea tracing::instrument does that</p>



<a name="191673133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673133">(Mar 24 2020 at 21:13)</a>:</h4>
<p>it creates a span for the given function and uses every arg as a field in the span it generates</p>



<a name="191673148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673148">(Mar 24 2020 at 21:13)</a>:</h4>
<p>chalk doesnt use async right?</p>



<a name="191673232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673232">(Mar 24 2020 at 21:14)</a>:</h4>
<p>no</p>



<a name="191673252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673252">(Mar 24 2020 at 21:14)</a>:</h4>
<p>k cool cool</p>



<a name="191673550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673550">(Mar 24 2020 at 21:16)</a>:</h4>
<p>re tracing in chalk + chalk perf I'm currently working on a tracing layer for generating flamegraphs from spans and I'd love to play with it + chalk</p>



<a name="191673579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/191673579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#191673579">(Mar 24 2020 at 21:16)</a>:</h4>
<p>that would be fantastic</p>



<a name="192065236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192065236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192065236">(Mar 27 2020 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="198819">@David Barsky</span> thinking about adding your tracing screenshot into the sprint blog post. Would you be opposed? Still not sure yet, but a little visual flair might not be terrible</p>



<a name="192067214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192067214" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192067214">(Mar 27 2020 at 19:17)</a>:</h4>
<p>not opposed!</p>



<a name="192067299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192067299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192067299">(Mar 27 2020 at 19:17)</a>:</h4>
<p>go for it, <span class="user-mention" data-user-id="232957">@Jack Huey</span>. I can also push my very WIP branch</p>



<a name="192067480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192067480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192067480">(Mar 27 2020 at 19:18)</a>:</h4>
<p>Please do :) Would love to work towards getting an initial PR in</p>



<a name="192067989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192067989" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192067989">(Mar 27 2020 at 19:22)</a>:</h4>
<p>so here's a question</p>



<a name="192068001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192068001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192068001">(Mar 27 2020 at 19:22)</a>:</h4>
<p>yup</p>



<a name="192068031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192068031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192068031">(Mar 27 2020 at 19:22)</a>:</h4>
<p>if tracing becomes normalized in chalk and chalk is getting integrated with rustc</p>



<a name="192068039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192068039" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192068039">(Mar 27 2020 at 19:22)</a>:</h4>
<p>does that mean tracing is on the table for rustc?</p>



<a name="192068072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192068072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192068072">(Mar 27 2020 at 19:23)</a>:</h4>
<p>it might be, yes</p>



<a name="192069333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192069333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192069333">(Mar 27 2020 at 19:33)</a>:</h4>
<p>I would personally like to see tracing used in rustc -- but it'd be good to tinker with it first in chalk</p>



<a name="192069390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192069390" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192069390">(Mar 27 2020 at 19:34)</a>:</h4>
<p>where is the branch again? there's an open PR?</p>



<a name="192069725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192069725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192069725">(Mar 27 2020 at 19:38)</a>:</h4>
<p>No open PR yet, <span class="user-mention" data-user-id="198819">@David Barsky</span> said he's going to</p>



<a name="192069805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192069805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192069805">(Mar 27 2020 at 19:38)</a>:</h4>
<p>just gotta finish a doc, but I can push something _very_ wip rn</p>



<a name="192069810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192069810" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192069810">(Mar 27 2020 at 19:38)</a>:</h4>
<p>hold on</p>



<a name="192071610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192071610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192071610">(Mar 27 2020 at 19:55)</a>:</h4>
<p><a href="https://github.com/rust-lang/chalk/pull/362" title="https://github.com/rust-lang/chalk/pull/362">https://github.com/rust-lang/chalk/pull/362</a></p>



<a name="192071794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192071794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192071794">(Mar 27 2020 at 19:56)</a>:</h4>
<p>awesome</p>



<a name="192346912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192346912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192346912">(Mar 31 2020 at 05:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/144729-wg-traits/topic/tracing.20in.20chalk/near/192069333" title="#narrow/stream/144729-wg-traits/topic/tracing.20in.20chalk/near/192069333">said</a>:</p>
<blockquote>
<p>I would personally like to see tracing used in rustc -- but it'd be good to tinker with it first in chalk</p>
</blockquote>
<p>it's a drop-in replacement for <code>log</code> so we should just do it IMO</p>



<a name="192346977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192346977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192346977">(Mar 31 2020 at 05:34)</a>:</h4>
<p>but also last I checked <code>tracing</code> lacked something I consider crucial for it to be useful, on the presentation side: a proper nested view</p>



<a name="192346986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192346986" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192346986">(Mar 31 2020 at 05:34)</a>:</h4>
<p>it would make it so much easier to see log messages nested by calls, and that's what I'd call "tracing"</p>



<a name="192346994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192346994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192346994">(Mar 31 2020 at 05:34)</a>:</h4>
<p>the context stuff is neat but harder to make use of</p>



<a name="192347002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192347002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192347002">(Mar 31 2020 at 05:35)</a>:</h4>
<p>especially in recursive parts of the codebase</p>



<a name="192347299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192347299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192347299">(Mar 31 2020 at 05:42)</a>:</h4>
<p>I had a thing in C++ back in the day, but I'm not sure where it is, maybe it's on my external HDD, let me check</p>



<a name="192352255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192352255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192352255">(Mar 31 2020 at 07:18)</a>:</h4>
<p>oh heh it was in a gist, I'd just forgotten how to search for it <a href="https://gist.github.com/eddyb/e727bcb2af8ffc2a32e6" title="https://gist.github.com/eddyb/e727bcb2af8ffc2a32e6">https://gist.github.com/eddyb/e727bcb2af8ffc2a32e6</a></p>



<a name="192352292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192352292" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192352292">(Mar 31 2020 at 07:19)</a>:</h4>
<blockquote>
<p><code>std::cout &lt;&lt; u8"╞&gt;" &lt;&lt; sFunc &lt;&lt; '(';</code></p>
</blockquote>



<a name="192352432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192352432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192352432">(Mar 31 2020 at 07:21)</a>:</h4>
<p>I even have an example output in a gist, lol <a href="https://gist.githubusercontent.com/eddyb/bd193e8ababd144fb8b9/raw/d27d0a76657c1c7e75e0d9105a4f5f28ce856734/trace.cc" title="https://gist.githubusercontent.com/eddyb/bd193e8ababd144fb8b9/raw/d27d0a76657c1c7e75e0d9105a4f5f28ce856734/trace.cc">https://gist.githubusercontent.com/eddyb/bd193e8ababd144fb8b9/raw/d27d0a76657c1c7e75e0d9105a4f5f28ce856734/trace.cc</a></p>



<a name="192352669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192352669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192352669">(Mar 31 2020 at 07:24)</a>:</h4>
<p>so when I hear "tracing", this is what I expect :P</p>



<a name="192386766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192386766" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192386766">(Mar 31 2020 at 13:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> ^^ if you didn't see this</p>



<a name="192389287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192389287" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192389287">(Mar 31 2020 at 13:31)</a>:</h4>
<p>I believe tracing has support for nested views, and that is indeed a major selling point that I was expecting. Perhaps <span class="user-mention" data-user-id="198819">@David Barsky</span> or <span class="user-mention" data-user-id="220273">@Jane Lusby</span> can confirm though. Maybe I misunderstood. </p>
<p>Chalk's logging has a notion of nesting, not sure if you've seen it, <span class="user-mention" data-user-id="119009">@eddyb</span>. It has a <code>debug_heading</code> vs <code>debug</code> (and <code>trace_heading</code> vs <code>trace</code>, for really detailed stuff), which right now just dumps to stderr with some spaces in front per heading. I'm assuming that translating this to tracing would imply some support for nesting but..</p>



<a name="192389455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192389455" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192389455">(Mar 31 2020 at 13:32)</a>:</h4>
<p>s/nothing/nesting?</p>



<a name="192389634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192389634" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192389634">(Mar 31 2020 at 13:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> back when I talked to @mycoliza, in October last year, she said this:</p>
<blockquote>
<p>[9:45 PM] mycoliza: the tracing_fmt implementation is not really intended for printing every single stack frame to stdout</p>
</blockquote>



<a name="192389702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192389702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192389702">(Mar 31 2020 at 13:33)</a>:</h4>
<p>oh but she also linked <a href="https://github.com/tokio-rs/console/" title="https://github.com/tokio-rs/console/">https://github.com/tokio-rs/console/</a></p>



<a name="192389833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192389833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192389833">(Mar 31 2020 at 13:34)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I'm afraid the focus on (shallow) "context" is at the detriment of <em>actual</em> call tracing, which is the thing I want</p>



<a name="192389974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192389974" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192389974">(Mar 31 2020 at 13:35)</a>:</h4>
<p>I have no idea where the "tracing = logging with context" association comes from, but also my C++ tracing code from almost a decade ago wasn't based on a pre-existing "tracing" notion, and I haven't seen anything mentioning "tracing" between that and the <code>tracing</code> crate :P</p>



<a name="192390282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192390282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192390282">(Mar 31 2020 at 13:38)</a>:</h4>
<p>That said, I think another useful thing would be able to assemble not just call tracing but things like "show me all the stuff for DefId X, collected"</p>



<a name="192390362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192390362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192390362">(Mar 31 2020 at 13:38)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I think that's actually already possible using <code>tracing</code></p>



<a name="192390374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192390374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192390374">(Mar 31 2020 at 13:38)</a>:</h4>
<p>more so than call tracing :P</p>



<a name="192417961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192417961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192417961">(Mar 31 2020 at 16:56)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span> I wrote this nested/with context view a bit ago and I feel comfortable publishing an alpha: <a href="https://github.com/davidbarsky/tracing-tree/" title="https://github.com/davidbarsky/tracing-tree/">https://github.com/davidbarsky/tracing-tree/</a>. Docs can absolutely be improved, though!</p>



<a name="192418040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192418040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192418040">(Mar 31 2020 at 16:57)</a>:</h4>
<p>YESSS</p>



<a name="192418076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192418076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192418076">(Mar 31 2020 at 16:57)</a>:</h4>
<p>that looks pretty good</p>



<a name="192418123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192418123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192418123">(Mar 31 2020 at 16:57)</a>:</h4>
<p>thanks! :)</p>



<a name="192418185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192418185" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192418185">(Mar 31 2020 at 16:58)</a>:</h4>
<p>doesn't have the unicode noisefest my C++ thing did, idk if that's a plus or a minus, but at least it does what rustc would need</p>



<a name="192418215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192418215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192418215">(Mar 31 2020 at 16:58)</a>:</h4>
<p>i'd like to get the unicode box drawing in as an option _at some point_, though</p>



<a name="192418265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192418265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192418265">(Mar 31 2020 at 16:58)</a>:</h4>
<p>(see: <a href="https://github.com/davidbarsky/tracing-tree/issues/4" title="https://github.com/davidbarsky/tracing-tree/issues/4">https://github.com/davidbarsky/tracing-tree/issues/4</a>)</p>



<a name="192419904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192419904" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192419904">(Mar 31 2020 at 17:11)</a>:</h4>
<blockquote>
<p>show me all the stuff for DefId X, collected</p>
</blockquote>



<a name="192419968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192419968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192419968">(Mar 31 2020 at 17:11)</a>:</h4>
<p>are you envisioning queries against structured log data?</p>



<a name="192420127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420127">(Mar 31 2020 at 17:12)</a>:</h4>
<p>i think all of this is possible but a lot of it isn't implemented, though right now I dont think theres any notion of filtering the logs that are actually output based on queries against the fields</p>



<a name="192420134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420134">(Mar 31 2020 at 17:12)</a>:</h4>
<p>My understanding is that this would be closer  to filtering on fields</p>



<a name="192420151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420151">(Mar 31 2020 at 17:12)</a>:</h4>
<p>but it shouldn't be too hard to dump structured logs like json or something</p>



<a name="192420210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420210" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420210">(Mar 31 2020 at 17:13)</a>:</h4>
<p>and then write a tool that reads them in and implements the filtering then re renders them as human readable formatted logs</p>



<a name="192420221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420221" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420221">(Mar 31 2020 at 17:13)</a>:</h4>
<p>its something I've wanted to do for a while tbh</p>



<a name="192420242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420242">(Mar 31 2020 at 17:13)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span>  I wrote these docs: <a href="https://docs.rs/tracing-subscriber/0.2.3/tracing_subscriber/struct.EnvFilter.html" title="https://docs.rs/tracing-subscriber/0.2.3/tracing_subscriber/struct.EnvFilter.html">https://docs.rs/tracing-subscriber/0.2.3/tracing_subscriber/struct.EnvFilter.html</a> :)</p>



<a name="192420294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420294" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420294">(Mar 31 2020 at 17:13)</a>:</h4>
<p>oh shit</p>



<a name="192420315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420315">(Mar 31 2020 at 17:13)</a>:</h4>
<p>we already have field filtering???</p>



<a name="192420376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420376">(Mar 31 2020 at 17:14)</a>:</h4>
<p>yup</p>



<a name="192420385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420385" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420385">(Mar 31 2020 at 17:14)</a>:</h4>
<p>thats extremely dope</p>



<a name="192420388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420388">(Mar 31 2020 at 17:14)</a>:</h4>
<p>holy crap</p>



<a name="192420419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420419">(Mar 31 2020 at 17:14)</a>:</h4>
<p>I still think I want the two pass log viewing tho</p>



<a name="192420439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420439">(Mar 31 2020 at 17:14)</a>:</h4>
<p>oh true, same</p>



<a name="192420449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420449">(Mar 31 2020 at 17:14)</a>:</h4>
<p>because for example</p>



<a name="192420472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420472">(Mar 31 2020 at 17:14)</a>:</h4>
<p>with my cli tools I often dont know what thing I'm going ot need</p>



<a name="192420519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420519">(Mar 31 2020 at 17:15)</a>:</h4>
<p>and they have tons of side effects so its not always possible to run the same cmd over and over</p>



<a name="192420547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420547" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420547">(Mar 31 2020 at 17:15)</a>:</h4>
<p>so I've wanted to set it up to dump a verbose structured log into some dir where it rotates logs or something</p>



<a name="192420568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420568" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420568">(Mar 31 2020 at 17:15)</a>:</h4>
<p>and then a tool to go back and dig into the logs later</p>



<a name="192420607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420607" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420607">(Mar 31 2020 at 17:15)</a>:</h4>
<p>I want this for work more than anything tbh</p>



<a name="192420616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420616">(Mar 31 2020 at 17:15)</a>:</h4>
<p>our logs are so painful <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span></p>



<a name="192420639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420639">(Mar 31 2020 at 17:15)</a>:</h4>
<p>but that aint gonna happen</p>



<a name="192420707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420707">(Mar 31 2020 at 17:16)</a>:</h4>
<p>thats an old C++ home made logging framework</p>



<a name="192420924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192420924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192420924">(Mar 31 2020 at 17:17)</a>:</h4>
<p>we gotta get the per-layer filtering in, then</p>



<a name="192421020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421020">(Mar 31 2020 at 17:18)</a>:</h4>
<p>make it so numba one</p>



<a name="192421048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421048">(Mar 31 2020 at 17:18)</a>:</h4>
<p>i'm honored</p>



<a name="192421066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421066" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421066">(Mar 31 2020 at 17:18)</a>:</h4>
<p>lol</p>



<a name="192421842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421842" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421842">(Mar 31 2020 at 17:25)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> did you see my ancient C++ code :P?</p>



<a name="192421857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421857" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421857">(Mar 31 2020 at 17:25)</a>:</h4>
<p>no</p>



<a name="192421867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421867">(Mar 31 2020 at 17:25)</a>:</h4>
<p>are you going to make me sad</p>



<a name="192421931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421931" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421931">(Mar 31 2020 at 17:26)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> yes <a href="https://gist.github.com/eddyb/e727bcb2af8ffc2a32e6" title="https://gist.github.com/eddyb/e727bcb2af8ffc2a32e6">https://gist.github.com/eddyb/e727bcb2af8ffc2a32e6</a></p>



<a name="192421995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192421995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192421995">(Mar 31 2020 at 17:26)</a>:</h4>
<p>it's from an uhhh something like a SAT solver</p>



<a name="192422026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192422026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192422026">(Mar 31 2020 at 17:26)</a>:</h4>
<p>before it was drilled into me that NP-complete is real and insurmountable</p>



<a name="192422118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192422118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192422118">(Mar 31 2020 at 17:27)</a>:</h4>
<p>lol</p>



<a name="192422902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192422902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192422902">(Mar 31 2020 at 17:33)</a>:</h4>
<p><span class="user-mention" data-user-id="198819">@David Barsky</span> <span class="user-mention" data-user-id="220273">@Jane Lusby</span> okay posted examples of my unicode antics <a href="https://github.com/davidbarsky/tracing-tree/issues/4#issuecomment-606768738" title="https://github.com/davidbarsky/tracing-tree/issues/4#issuecomment-606768738">https://github.com/davidbarsky/tracing-tree/issues/4#issuecomment-606768738</a></p>



<a name="192423080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423080">(Mar 31 2020 at 17:34)</a>:</h4>
<p>ooo, thats nice</p>



<a name="192423124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423124">(Mar 31 2020 at 17:34)</a>:</h4>
<p>thanks for the deets! are you okay with this output being <em>completely</em> non-concurrent?</p>



<a name="192423187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423187" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423187">(Mar 31 2020 at 17:35)</a>:</h4>
<p>what does that mean :P?</p>



<a name="192423227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423227" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423227">(Mar 31 2020 at 17:35)</a>:</h4>
<p>hmm</p>



<a name="192423343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423343" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423343">(Mar 31 2020 at 17:36)</a>:</h4>
<p>at the moment, you can't have two separate "trees" be printed for units of work that are occurring concurrently (e..g, on different threads or tasks)</p>



<a name="192423435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423435">(Mar 31 2020 at 17:37)</a>:</h4>
<p>shouldn't be a concern for <code>rustc</code>, or we could, idk, print a tread ID on every line, and then have a tool to untangle them</p>



<a name="192423534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423534">(Mar 31 2020 at 17:38)</a>:</h4>
<p>(once we start doing parallelism more commonly. for now we can just turn it off when we want debug logs)</p>



<a name="192423595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423595">(Mar 31 2020 at 17:38)</a>:</h4>
<p>I think the approach that's needed is:</p>
<ol>
<li>use the default tracing-subscriber <code>fmt</code> output that prints a "trace" on a per-line basis to narrow yourself down to a unit of work (a strand in chalk, for instance) that you're interested in</li>
<li>reload the <code>tracing</code> config (at runtime!) to use the tracing-tree output</li>
</ol>



<a name="192423612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423612">(Mar 31 2020 at 17:38)</a>:</h4>
<p>and that should work well with parallel rustc?</p>



<a name="192423613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423613">(Mar 31 2020 at 17:38)</a>:</h4>
<p>i still think it would be extremely cool to output json and then consume it to generate the untangled indented pretty shit we want</p>



<a name="192423632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423632">(Mar 31 2020 at 17:38)</a>:</h4>
<p>that way you can deal with concurrency after the fact</p>



<a name="192423637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423637" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423637">(Mar 31 2020 at 17:38)</a>:</h4>
<p>totally agreed</p>



<a name="192423664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423664">(Mar 31 2020 at 17:39)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> literally what Cargo does because it runs multiple rustc's :P</p>



<a name="192423686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423686" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423686">(Mar 31 2020 at 17:39)</a>:</h4>
<p>I think there used to be a time where errors from multiple <code>rustc</code>s could get interleaved</p>



<a name="192423695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423695">(Mar 31 2020 at 17:39)</a>:</h4>
<p>there's a neat python library that does whose name i'm forgetting atm</p>



<a name="192423702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423702">(Mar 31 2020 at 17:39)</a>:</h4>
<p>even if each line was intact</p>



<a name="192423790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423790" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423790">(Mar 31 2020 at 17:40)</a>:</h4>
<p>[nods]</p>



<a name="192423794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423794">(Mar 31 2020 at 17:40)</a>:</h4>
<p>I'm pretty sure what it does now is print the "rendered" field in the JSON output</p>



<a name="192423808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423808">(Mar 31 2020 at 17:40)</a>:</h4>
<p>and it can act as an arbiter</p>



<a name="192423851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423851">(Mar 31 2020 at 17:40)</a>:</h4>
<p>here it is! <a href="https://github.com/jonathanj/eliottree" title="https://github.com/jonathanj/eliottree">https://github.com/jonathanj/eliottree</a></p>



<a name="192423888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423888" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423888">(Mar 31 2020 at 17:40)</a>:</h4>
<p>but for tracing you'd have all the rendering done externally, so it's more like an IDE in that regard</p>



<a name="192423943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423943">(Mar 31 2020 at 17:41)</a>:</h4>
<p>btw this is that example with proper two-space indents <a href="https://gist.githubusercontent.com/eddyb/05a9490eb50396754cee14967c485567/raw/6c75bf462bf66cc271bc6c4ab6b4ae6313c5a973/tracing-box-drawing-3" title="https://gist.githubusercontent.com/eddyb/05a9490eb50396754cee14967c485567/raw/6c75bf462bf66cc271bc6c4ab6b4ae6313c5a973/tracing-box-drawing-3">https://gist.githubusercontent.com/eddyb/05a9490eb50396754cee14967c485567/raw/6c75bf462bf66cc271bc6c4ab6b4ae6313c5a973/tracing-box-drawing-3</a></p>



<a name="192423949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192423949" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192423949">(Mar 31 2020 at 17:41)</a>:</h4>
<p>that tracks</p>



<a name="192424025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192424025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192424025">(Mar 31 2020 at 17:41)</a>:</h4>
<p>it's good to know cargo ran into this issue first so that we don't need to re-invent this stuff</p>



<a name="192424036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192424036" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192424036">(Mar 31 2020 at 17:41)</a>:</h4>
<p>bonus: we could give users just enough filters so there's not GBs of JSON, then inspect the parts we want, ourselves</p>



<a name="192424039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192424039" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192424039">(Mar 31 2020 at 17:41)</a>:</h4>
<p>can borrow some of those ideas</p>



<a name="192424095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192424095" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192424095">(Mar 31 2020 at 17:42)</a>:</h4>
<p>sadly we don't have <code>debug_assertions</code> enabled in nightly Q_Q</p>



<a name="192424148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192424148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192424148">(Mar 31 2020 at 17:42)</a>:</h4>
<p>so the only logging you get is a couple <code>info!</code>s that are important enough</p>



<a name="192424178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/192424178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#192424178">(Mar 31 2020 at 17:42)</a>:</h4>
<p>(like the current <code>fn</code> being codegen'd)</p>



<a name="205696174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696174" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696174">(Aug 01 2020 at 20:05)</a>:</h4>
<p>Okay, so this is a little bit unrelated, but I had a question for <span class="user-mention" data-user-id="198819">@David Barsky</span> or maybe <span class="user-mention" data-user-id="230601">@Nathan Whitaker</span> (or anyone else): So, if I add <code>dbg!()</code> statements when also doing <code>CHALK_DEBUG=debug</code>, then the <code>dbg</code> statements are printed at the <em>end</em> of the logging. (Same for <code>println</code>). Any way to have these show up inline?</p>



<a name="205696358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696358">(Aug 01 2020 at 20:10)</a>:</h4>
<p>this is just a guess, but you might need to make tracing output to stderr?</p>



<a name="205696366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696366">(Aug 01 2020 at 20:10)</a>:</h4>
<p>ah if it's also happening for <code>println</code> that's probably not it</p>



<a name="205696371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696371">(Aug 01 2020 at 20:11)</a>:</h4>
<p>yeah :/</p>



<a name="205696799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696799">(Aug 01 2020 at 20:23)</a>:</h4>
<p>Hmm that's weird, I can't reproduce it locally. They show up inline for me <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="205696861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696861">(Aug 01 2020 at 20:24)</a>:</h4>
<p>Are you just reading from console? Because I output to a file</p>



<a name="205696868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696868">(Aug 01 2020 at 20:25)</a>:</h4>
<p><code> &gt; target/log.txt 2&gt;&amp;1</code></p>



<a name="205696918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205696918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205696918">(Aug 01 2020 at 20:26)</a>:</h4>
<p>huh no, even if I remove that it still prints at the end</p>



<a name="205697060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205697060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205697060">(Aug 01 2020 at 20:31)</a>:</h4>
<p>Yeah they appear inline either way for me</p>



<a name="205697119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205697119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205697119">(Aug 01 2020 at 20:32)</a>:</h4>
<p>bleh</p>



<a name="205697122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205697122" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205697122">(Aug 01 2020 at 20:32)</a>:</h4>
<p>Maybe it depends on the OS or shell?</p>



<a name="205697129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205697129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205697129">(Aug 01 2020 at 20:32)</a>:</h4>
<p>bash</p>



<a name="205697140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205697140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205697140">(Aug 01 2020 at 20:33)</a>:</h4>
<p>Ubuntu 16.04</p>



<a name="205697194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205697194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205697194">(Aug 01 2020 at 20:34)</a>:</h4>
<p>ah found it</p>



<a name="205697195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205697195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205697195">(Aug 01 2020 at 20:34)</a>:</h4>
<p><code>-- --nocapture</code> fixes it</p>



<a name="205748769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/tracing%20in%20chalk/near/205748769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/144729-wg-traits/topic/tracing.20in.20chalk.html#205748769">(Aug 02 2020 at 23:33)</a>:</h4>
<p>ah, glad you figured it out. I was gonna suggest something related to stdout being locked, but i guess that wasn't it?</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
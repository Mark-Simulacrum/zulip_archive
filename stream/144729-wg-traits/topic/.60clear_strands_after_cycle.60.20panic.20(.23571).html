<html>
<head><meta charset="utf-8"><title>`clear_strands_after_cycle` panic (#571) · wg-traits · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/index.html">wg-traits</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html">`clear_strands_after_cycle` panic (#571)</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="205377418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205377418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205377418">(Jul 29 2020 at 16:08)</a>:</h4>
<p>Hey all, just wondering if anyone has any leads on <a href="https://github.com/rust-lang-nursery/chalk/issues/571">chalk#571</a>? I'm working a bit on the semantic-syntactic equality lowering and I've got all tests passing except for one, which produces that panic (which makes debugging the actual issue sort of.. impossible). I've been looking into the panic a bit, but am feeling sort of lost at finding the cause</p>



<a name="205378493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205378493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205378493">(Jul 29 2020 at 16:16)</a>:</h4>
<p>I did try to look at it a little bit, but didn't figure anything out</p>



<a name="205378713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205378713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205378713">(Jul 29 2020 at 16:18)</a>:</h4>
<p>If the test passes for the recursive solver, I'm okay with omitting running it for SLG as long as there is a <code>FIXME</code> citing <a href="https://github.com/rust-lang-nursery/chalk/issues/571">chalk#571</a> and a comment on the issue itself</p>



<a name="205510514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205510514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205510514">(Jul 30 2020 at 17:56)</a>:</h4>
<p>Hmm so the issue is that it panics during WF checking, and right now it looks like WF checks in tests are always done with the SLG solver. So that test panics (and fails fast) even if you only want to run the recursive solver.</p>



<a name="205510578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205510578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205510578">(Jul 30 2020 at 17:57)</a>:</h4>
<p>Oh...that's probably not what we want</p>



<a name="205510627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205510627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205510627">(Jul 30 2020 at 17:57)</a>:</h4>
<p>I think we probably want wf checks done in the same solver that we're testing</p>



<a name="205510708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205510708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205510708">(Jul 30 2020 at 17:58)</a>:</h4>
<p>Another test case for that issue would be nice though</p>



<a name="205510740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205510740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205510740">(Jul 30 2020 at 17:58)</a>:</h4>
<p>if you can pick out the test program and wf goal :)</p>



<a name="205511250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511250">(Jul 30 2020 at 18:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205510627">said</a>:</p>
<blockquote>
<p>I think we probably want wf checks done in the same solver that we're testing</p>
</blockquote>
<p>I thought so too, but when I tried that I realized that the recursive solver fails (or runs infinitely) for a good number of WF checks (even on the master branch) so that's a lil unfortunate</p>



<a name="205511295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511295">(Jul 30 2020 at 18:02)</a>:</h4>
<p>Okay that is actually really bad</p>



<a name="205511339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511339">(Jul 30 2020 at 18:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205510740">said</a>:</p>
<blockquote>
<p>if you can pick out the test program and wf goal :)</p>
</blockquote>
<p>Sure thing! I'll add it to the issue once I pick it out</p>



<a name="205511431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511431" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511431">(Jul 30 2020 at 18:03)</a>:</h4>
<p>Okay, so seems like there's a few issues here!</p>



<a name="205511507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511507">(Jul 30 2020 at 18:03)</a>:</h4>
<p><a href="https://github.com/rust-lang-nursery/chalk/issues/571">chalk#571</a> obviously needs to get resolved. I looked a little bit into it, but it's tough and I didn't find the exact cause yet</p>



<a name="205511605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511605">(Jul 30 2020 at 18:04)</a>:</h4>
<p>The recursive solver failing for wf checks is really bad and needs to get addressed. (Please file an issue?)</p>



<a name="205511715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511715">(Jul 30 2020 at 18:05)</a>:</h4>
<p>And then, we should also have a way to "opt out" of WF checks. We want(ed) this for a separate test already.</p>



<a name="205511756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511756">(Jul 30 2020 at 18:05)</a>:</h4>
<p>In <a href="https://github.com/rust-lang-nursery/chalk/issues/569">chalk#569</a></p>



<a name="205511890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205511890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205511890">(Jul 30 2020 at 18:06)</a>:</h4>
<p>Maybe with a second repro for <a href="https://github.com/rust-lang-nursery/chalk/issues/571">chalk#571</a>, I'll be able to find the problem</p>



<a name="205512198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205512198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205512198">(Jul 30 2020 at 18:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205511605">said</a>:</p>
<blockquote>
<p>The recursive solver failing for wf checks is really bad and needs to get addressed. (Please file an issue?)</p>
</blockquote>
<p>I'll file one ASAP</p>



<a name="205512456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205512456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205512456">(Jul 30 2020 at 18:10)</a>:</h4>
<p>Gonna make sure that <span class="user-mention" data-user-id="129457">@Florian Diebold</span> and <span class="user-mention" data-user-id="116009">@nikomatsakis</span> get tagged and hopefully see this</p>



<a name="205514212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205514212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205514212">(Jul 30 2020 at 18:23)</a>:</h4>
<p>Filed <a href="https://github.com/rust-lang-nursery/chalk/issues/587">chalk#587</a>. (There are only 6 test cases with issues, so maybe it's not <em>too</em> bad?)</p>



<a name="205528593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205528593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205528593">(Jul 30 2020 at 20:29)</a>:</h4>
<p><span class="user-mention" data-user-id="230601">@Nathan Whitaker</span> oof that repro for <a href="https://github.com/rust-lang-nursery/chalk/issues/571">chalk#571</a> is <em>worse</em> oof</p>



<a name="205528619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205528619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205528619">(Jul 30 2020 at 20:29)</a>:</h4>
<p>I was hoping it would be something simple</p>



<a name="205529116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205529116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205529116">(Jul 30 2020 at 20:33)</a>:</h4>
<p>Yeah it's pretty rough :(</p>



<a name="205608455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205608455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205608455">(Jul 31 2020 at 16:01)</a>:</h4>
<p>So I minimized the original test case a tiny bit more (commented it on the issue). Hope it's at least of <em>some</em> help</p>



<a name="205608647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205608647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205608647">(Jul 31 2020 at 16:03)</a>:</h4>
<p>Also, I didn't notice before but it's interesting that the panic looks like it occurs during coherence checking</p>



<a name="205613353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205613353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205613353">(Jul 31 2020 at 16:45)</a>:</h4>
<p>I think the original panic occurs when solving the actual goal though?</p>



<a name="205617067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205617067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205617067">(Jul 31 2020 at 17:20)</a>:</h4>
<p>Ah yep you're right whoops</p>



<a name="205617447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205617447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205617447">(Jul 31 2020 at 17:24)</a>:</h4>
<p>Ok <em>actually</em> interesting this time: the panic (at least in the test case I posted) didn't used to happen. It started panicking with <a href="https://github.com/rust-lang/chalk/commit/b0fc89a22ec16a33bf7ac1c89a6133264868e7af">this commit</a></p>



<a name="205618385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205618385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205618385">(Jul 31 2020 at 17:32)</a>:</h4>
<p>And the same is true for the original test case in the issue, it regressed after that commit</p>



<a name="205618715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205618715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205618715">(Jul 31 2020 at 17:35)</a>:</h4>
<p>(Well, regressed in the sense that it went from giving the wrong answer to panicking, it was never correct)</p>



<a name="205629527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205629527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205629527">(Jul 31 2020 at 19:08)</a>:</h4>
<p>Well, that's good to know</p>



<a name="205629535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205629535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205629535">(Jul 31 2020 at 19:08)</a>:</h4>
<p>For better or for worse</p>



<a name="205629598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205629598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205629598">(Jul 31 2020 at 19:09)</a>:</h4>
<p>The fact that it went from giving a wrong answer to panicking makes me feel like the Ambiguous/Complete separation isn't <em>wrong</em>, there's maybe just some other logic that is and the separation highlights that</p>



<a name="205629646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205629646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205629646">(Jul 31 2020 at 19:09)</a>:</h4>
<p>Though, that might be helpful for figuring out the problem</p>



<a name="205630028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205630028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205630028">(Jul 31 2020 at 19:13)</a>:</h4>
<p>But that <em>does</em> hint to me why we might be getting that error</p>



<a name="205630242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205630242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205630242">(Jul 31 2020 at 19:15)</a>:</h4>
<p>In particular, if the table is in <code>AnswerMode::Complete</code> but all remaining strands are ambiguous, then I could see the case that we might <em>expect</em> there to be strands but there aren't</p>



<a name="205630277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205630277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205630277">(Jul 31 2020 at 19:15)</a>:</h4>
<p>or I guess, maybe the bug here is in the logic related to cycles and ambiguity</p>



<a name="205630459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205630459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205630459">(Jul 31 2020 at 19:17)</a>:</h4>
<p>(Also remember that included in that PR was a fix for tests added in <a href="https://github.com/rust-lang-nursery/chalk/issues/331">chalk#331</a>)</p>



<a name="205631765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205631765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205631765">(Jul 31 2020 at 19:29)</a>:</h4>
<p>Might have found the problem</p>



<a name="205632221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205632221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205632221">(Jul 31 2020 at 19:33)</a>:</h4>
<p>Right, so, I solved the <code>clear_strands_after_cycle</code> problem</p>



<a name="205632227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205632227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205632227">(Jul 31 2020 at 19:33)</a>:</h4>
<p>But</p>



<a name="205632271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205632271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205632271">(Jul 31 2020 at 19:34)</a>:</h4>
<p>Rather than getting ambiguous, I get <code>Unique; for&lt;?U0&gt; { substitution [?0 := {slice}&lt;^0.0&gt;, ?1 := Vec&lt;^0.0&gt;], lifetime constraints [] }</code></p>



<a name="205632758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205632758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205632758">(Jul 31 2020 at 19:37)</a>:</h4>
<p>I changed <a href="http://this">https://github.com/rust-lang/chalk/blob/master/chalk-engine/src/logic.rs#L1265</a> to only drain strands that are "participating"</p>



<a name="205632777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205632777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205632777">(Jul 31 2020 at 19:38)</a>:</h4>
<p>But I don't think that's the <em>right</em> solution</p>



<a name="205632901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205632901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205632901">(Jul 31 2020 at 19:38)</a>:</h4>
<p>I think we aren't handling cycles correctly here</p>



<a name="205633113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205633113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205633113">(Jul 31 2020 at 19:40)</a>:</h4>
<p>Or some of the assumptions we/I made aren't correct</p>



<a name="205639523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205639523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205639523">(Jul 31 2020 at 20:43)</a>:</h4>
<p>OK, sorry I've been so AWOL</p>



<a name="205639532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205639532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205639532">(Jul 31 2020 at 20:43)</a>:</h4>
<p>not sure if that will change for another week or so though</p>



<a name="205641754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205641754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205641754">(Jul 31 2020 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> no worries :)</p>



<a name="205697547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697547">(Aug 01 2020 at 20:45)</a>:</h4>
<p>Okay, so digging into this a little bit more</p>



<a name="205697557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697557">(Aug 01 2020 at 20:45)</a>:</h4>
<p>This is such a rabbit hole</p>



<a name="205697623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697623">(Aug 01 2020 at 20:47)</a>:</h4>
<p>I think the <code>where T: Sized</code> in <code>impl&lt;T&gt; ToOwned for [T] where T: Sized</code> is fundamentally important here</p>



<a name="205697631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697631">(Aug 01 2020 at 20:47)</a>:</h4>
<p>So, we generate a goal like <code>Implemented(Rc&lt;^0.0&gt;: From&lt;&lt;^0.0 as ToOwned&gt;::Owned&gt;)</code></p>



<a name="205697679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697679">(Aug 01 2020 at 20:48)</a>:</h4>
<p>And we get something like <code>resolvent_clause{goal=Implemented(Rc&lt;?0&gt;: From&lt;&lt;?0 as ToOwned&gt;::Owned&gt;), clause=for&lt;type&gt; Implemented(Rc&lt;{slice}&lt;^0.0&gt;&gt;: From&lt;Vec&lt;^0.0&gt;&gt;)}</code></p>



<a name="205697694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697694">(Aug 01 2020 at 20:49)</a>:</h4>
<p>Which, creates a strand with a single subgoal:</p>
<div class="codehilite"><pre><span></span><code>          subst: [?0 := {slice}&lt;?0&gt;],
          ambiguous: false,
          constraints: [],
          subgoals: [
              Positive(
                  InEnvironment {
                      environment: Env([]),
                      goal: AliasEq(&lt;{slice}&lt;?0&gt; as ToOwned&gt;::Owned = Vec&lt;?0&gt;),
                  },
              ),
          ]
</code></pre></div>



<a name="205697748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697748">(Aug 01 2020 at 20:50)</a>:</h4>
<p>Now, I want to point out here that this is only valid if <code>?0: Sized</code></p>



<a name="205697767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697767">(Aug 01 2020 at 20:51)</a>:</h4>
<p>Later on we end up with a table with a goal of <code>AliasEq(&lt;{slice}&lt;^0.0&gt; as ToOwned&gt;::Owned = Vec&lt;^0.0&gt;)</code></p>



<a name="205697791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697791">(Aug 01 2020 at 20:52)</a>:</h4>
<p>With a single strand <code>Normalize(&lt;{slice}&lt;?0&gt; as ToOwned&gt;::Owned -&gt; Vec&lt;?0&gt;)</code></p>



<a name="205697817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697817">(Aug 01 2020 at 20:52)</a>:</h4>
<p>(I'm also mostly just rambling here because it helps me think)</p>



<a name="205697827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697827">(Aug 01 2020 at 20:53)</a>:</h4>
<p>So, then we end up with a clause: <code>for&lt;type&gt; Normalize(&lt;{slice}&lt;^0.0&gt; as ToOwned&gt;::Owned -&gt; Vec&lt;^0.0&gt;) :- ForAll&lt;&gt; { Implemented(^1.0: Sized) }</code></p>



<a name="205697876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697876">(Aug 01 2020 at 20:54)</a>:</h4>
<p>And of course, this has to end up as ambiguous, since <code>Sized</code> is non_enumerable</p>



<a name="205697889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697889">(Aug 01 2020 at 20:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205697817">said</a>:</p>
<blockquote>
<p>(I'm also mostly just rambling here because it helps me think)</p>
</blockquote>
<p>(For what it's worth, I also appreciate seeing the explanation/thought process, it's a good opportunity to learn :) )</p>



<a name="205697890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697890">(Aug 01 2020 at 20:55)</a>:</h4>
<p>(but if we make sized <em>not</em> non_enumerable, this actually ends up being not provable since there are no impls for <code>Sized</code>) (let me double check that)</p>



<a name="205697938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697938">(Aug 01 2020 at 20:56)</a>:</h4>
<p>I definitely would appreciate any thoughts</p>



<a name="205697952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697952">(Aug 01 2020 at 20:57)</a>:</h4>
<p>Regarding the non_enumerable part, I also did find a reproducer with an enumerable trait</p>



<a name="205697953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697953">(Aug 01 2020 at 20:57)</a>:</h4>
<p>Like I said, this is definitely a rabbit hole</p>



<a name="205697997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697997">(Aug 01 2020 at 20:58)</a>:</h4>
<p>Is that the last test case you posted?</p>



<a name="205697998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205697998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205697998">(Aug 01 2020 at 20:58)</a>:</h4>
<p>Mmhm</p>



<a name="205698000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698000">(Aug 01 2020 at 20:58)</a>:</h4>
<p>Does it actually fail on <code>Only: A</code> or during the WF checks?</p>



<a name="205698002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698002">(Aug 01 2020 at 20:58)</a>:</h4>
<p>WF checks</p>



<a name="205698008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698008" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698008">(Aug 01 2020 at 20:59)</a>:</h4>
<p>Can you post the actual goal that fails?</p>



<a name="205698100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698100">(Aug 01 2020 at 21:02)</a>:</h4>
<p>It actually fails in coherence checking, it doesn't even make it to WF</p>



<a name="205698148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698148">(Aug 01 2020 at 21:02)</a>:</h4>
<p>The goal is</p>
<div class="codehilite"><pre><span></span><code>environment: Env([]),
goal: 
    not { 
        ForAll&lt;type&gt; { 
            if ([for&lt;&gt; Compatible, for&lt;&gt; DownstreamType(^1.0)]) { 
                Exists&lt;type&gt; { 
                    Exists&lt;type&gt; { 
                        all(
                            (Rc&lt;ArgTaker&lt;^0.0&gt;&gt; = Rc&lt;^1.0&gt;),
                            (Other = Other), 
                            ForAll&lt;&gt; { Implemented(^2.0: AssocTyTrait) },
                            ForAll&lt;&gt; { Implemented(Rc&lt;^2.0&gt;: TyParamTrait&lt;&lt;^2.0 as AssocTyTrait&gt;::Ty&gt;) }
                        ) 
                    } 
                } 
            } 
        }
</code></pre></div>


<p>,</p>



<a name="205698153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698153">(Aug 01 2020 at 21:03)</a>:</h4>
<p>Ew</p>



<a name="205698215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698215">(Aug 01 2020 at 21:05)</a>:</h4>
<p>Okay, well I think maybe my <code>T: Sized</code> tangent isn't correct</p>



<a name="205698271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698271">(Aug 01 2020 at 21:06)</a>:</h4>
<p>But, I'm only on line 1700 of the log out of ~8000</p>



<a name="205698278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698278">(Aug 01 2020 at 21:07)</a>:</h4>
<p>Yeah the amount of log output is kinda rough</p>



<a name="205698285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698285">(Aug 01 2020 at 21:07)</a>:</h4>
<p>Yeah</p>



<a name="205698287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698287">(Aug 01 2020 at 21:07)</a>:</h4>
<p>There's a lot of noise around canonicalization/instantiation</p>



<a name="205698351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698351">(Aug 01 2020 at 21:09)</a>:</h4>
<p><em>But</em> all that <code>Compatible</code> noise is gone :)</p>



<a name="205698478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698478">(Aug 01 2020 at 21:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205698287">said</a>:</p>
<blockquote>
<p>There's a lot of noise around canonicalization/instantiation</p>
</blockquote>
<p>Hmm yeah some of that could probably stand to be moved up a debug level, I'll open a PR soonish</p>



<a name="205698536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698536">(Aug 01 2020 at 21:14)</a>:</h4>
<p>It is debug?</p>



<a name="205698548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698548">(Aug 01 2020 at 21:15)</a>:</h4>
<p>Yeah it is iirc</p>



<a name="205698550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698550">(Aug 01 2020 at 21:15)</a>:</h4>
<p>Oh, do you mean like trace instead</p>



<a name="205698554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698554">(Aug 01 2020 at 21:15)</a>:</h4>
<p>Mmhm exactly</p>



<a name="205698558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698558">(Aug 01 2020 at 21:15)</a>:</h4>
<p>Not a bad idea</p>



<a name="205698608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698608">(Aug 01 2020 at 21:16)</a>:</h4>
<p>I think a <em>better</em> (or I guess, orthogonal) solution would be to just canonicalize/instantiate <code>Strand</code>s <em>less</em></p>



<a name="205698620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698620">(Aug 01 2020 at 21:16)</a>:</h4>
<p>Which is more easily doable now that chalk-engine knows about <code>Canonical</code></p>



<a name="205698626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698626">(Aug 01 2020 at 21:16)</a>:</h4>
<p>we just have to be careful that we don't use a canonicalized value when we don't want to</p>



<a name="205698637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698637">(Aug 01 2020 at 21:17)</a>:</h4>
<p>But we can deduplicate <code>selected_subgoal</code> and <code>last_pursued_time</code></p>



<a name="205698696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698696">(Aug 01 2020 at 21:18)</a>:</h4>
<p>And then any time we access <code>ambiguous</code> or <code>answer_time</code> from <code>ExClause</code>, we don't even need to instantiate</p>



<a name="205698706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698706">(Aug 01 2020 at 21:19)</a>:</h4>
<p>I actually looked at one point briefly and there's only a few places that we actually need to instantiate the strand</p>



<a name="205698877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698877">(Aug 01 2020 at 21:24)</a>:</h4>
<p>Another thing that I would like to look at cleaning up is trying to remove unnecessary "intermediate" tables of the form <code>ForAll&lt;&gt; { &lt;goal&gt; }</code></p>



<a name="205698887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698887">(Aug 01 2020 at 21:25)</a>:</h4>
<p>Oh wow we do instantiate strands a lot, now that I'm looking for it</p>



<a name="205698934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698934">(Aug 01 2020 at 21:26)</a>:</h4>
<p>Well, we only really instantiate them in <code>ensure_root_answer</code></p>



<a name="205698936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698936">(Aug 01 2020 at 21:26)</a>:</h4>
<p>The problem is that we have to canonicalize them in many places</p>



<a name="205698943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698943">(Aug 01 2020 at 21:26)</a>:</h4>
<p>Ah yeah whoops I meant canonicalize, didn't even look at instantiation <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="205698949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698949">(Aug 01 2020 at 21:27)</a>:</h4>
<p>haha no problem</p>



<a name="205698956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698956">(Aug 01 2020 at 21:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205698877">said</a>:</p>
<blockquote>
<p>Another thing that I would like to look at cleaning up is trying to remove unnecessary "intermediate" tables of the form <code>ForAll&lt;&gt; { &lt;goal&gt; }</code></p>
</blockquote>
<p>I feel like in general there are a good number of these sort of "trivial" optimizations to be had</p>



<a name="205698958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205698958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205698958">(Aug 01 2020 at 21:27)</a>:</h4>
<p>yes</p>



<a name="205699001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699001">(Aug 01 2020 at 21:28)</a>:</h4>
<p>Also, when we no longer pass around <code>Strand</code>, but instead only instantiate when needed, I think that means we wouldn't need the <code>active_strand</code></p>



<a name="205699003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699003">(Aug 01 2020 at 21:28)</a>:</h4>
<p>(on <code>Table</code>)</p>



<a name="205699308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699308">(Aug 01 2020 at 21:39)</a>:</h4>
<p>Okay, so the cycle that ends up failing is:</p>
<div class="codehilite"><pre><span></span><code>ForAll&lt;&gt; { Implemented(Rc&lt;^1.0&gt;: From&lt;&lt;^1.0 as ToOwned&gt;::Owned&gt;) }
Implemented(Rc&lt;^0.0&gt;: From&lt;&lt;^0.0 as ToOwned&gt;::Owned&gt;), which has a strand that is ambiguous and a single floundered subgoal
</code></pre></div>


<p>But the other cycle involving that table:</p>
<div class="codehilite"><pre><span></span><code>ForAll&lt;&gt; { Implemented(Rc&lt;^1.0&gt;: From&lt;&lt;^1.0 as ToOwned&gt;::Owned&gt;) }
Implemented(Rc&lt;^0.0&gt;: From&lt;&lt;^0.0 as ToOwned&gt;::Owned&gt;)
ForAll&lt;&gt; { Implemented(Rc&lt;^1.0&gt;: From&lt;&lt;^1.0 as ToOwned&gt;::Owned&gt;) }
</code></pre></div>



<a name="205699429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699429" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699429">(Aug 01 2020 at 21:43)</a>:</h4>
<p>Basically, we get that second cycle because of <code>for&lt;type&gt; Implemented(Rc&lt;^0.0&gt;: From&lt;Cow&lt;^0.0&gt;&gt;) :- ForAll&lt;&gt; { Implemented(^1.0: ToOwned) }, ForAll&lt;&gt; { Implemented(Rc&lt;^1.0&gt;: From&lt;&lt;^1.0 as ToOwned&gt;::Owned&gt;) }</code></p>



<a name="205699495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699495">(Aug 01 2020 at 21:44)</a>:</h4>
<p>Which is</p>
<div class="codehilite"><pre><span></span><code>            impl&lt;B&gt; From&lt;Cow&lt;B&gt;&gt; for Rc&lt;B&gt;
            where
                B: ToOwned,
                Rc&lt;B&gt;: From&lt;&lt;B as ToOwned&gt;::Owned&gt;
            {
            }
</code></pre></div>



<a name="205699582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699582">(Aug 01 2020 at 21:47)</a>:</h4>
<p>More specifically, that strand ends up with the following subgoals: </p>
<div class="codehilite"><pre><span></span><code>[
                                Positive(
                                    InEnvironment {
                                        environment: Env([]),
                                        goal: AliasEq(&lt;^0.0 as ToOwned&gt;::Owned = Cow&lt;^0.0&gt;),
                                    },
                                ),
                                Positive(
                                    InEnvironment {
                                        environment: Env([]),
                                        goal: ForAll&lt;&gt; { Implemented(^1.0: ToOwned) },
                                    },
                                ),
                                Positive(
                                    InEnvironment {
                                        environment: Env([]),
                                        goal: ForAll&lt;&gt; { Implemented(Rc&lt;^1.0&gt;: From&lt;&lt;^1.0 as ToOwned&gt;::Owned&gt;) },
                                    },
                                ),
                            ]
</code></pre></div>



<a name="205699638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699638">(Aug 01 2020 at 21:48)</a>:</h4>
<p>Really, this is kind of a weird intersection</p>



<a name="205699645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699645">(Aug 01 2020 at 21:49)</a>:</h4>
<p>We <em>really</em> want that last goal to be <code>ForAll&lt;&gt; { Implemented(Rc&lt;^1.0&gt;: From&lt;Cow&lt;^1.0&gt;&gt;) }</code></p>



<a name="205699649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699649">(Aug 01 2020 at 21:49)</a>:</h4>
<p>But because of the cycle, we "throw away" that</p>



<a name="205699749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699749">(Aug 01 2020 at 21:52)</a>:</h4>
<p>Hmm, so what's the solution here...</p>



<a name="205699752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699752">(Aug 01 2020 at 21:52)</a>:</h4>
<p>Should cycles cause a subgoal to flounder?</p>



<a name="205699755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699755">(Aug 01 2020 at 21:52)</a>:</h4>
<p>Maybe</p>



<a name="205699759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699759">(Aug 01 2020 at 21:52)</a>:</h4>
<p>This is almost certainly the root issue though</p>



<a name="205699778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699778">(Aug 01 2020 at 21:54)</a>:</h4>
<p>Yeah that definitely makes sense</p>



<a name="205699820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699820">(Aug 01 2020 at 21:54)</a>:</h4>
<p>(Not sure about a solution though <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> )</p>



<a name="205699821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699821">(Aug 01 2020 at 21:54)</a>:</h4>
<p>And the reason that I think this regressed (sort of) with the Complete/Ambiguous split, is that the other strand</p>
<div class="codehilite"><pre><span></span><code>ExClause {
                            subst: [?0 := {slice}&lt;^0.0&gt;],
                            ambiguous: true,
                            constraints: [],
                            subgoals: [],
                            delayed_subgoals: [],
                            answer_time: TimeStamp {
                                clock: 0,
                            },
                            floundered_subgoals: [
                                FlounderedSubgoal {
                                    floundered_literal: Positive(
                                        InEnvironment {
                                            environment: Env([]),
                                            goal: AliasEq(&lt;{slice}&lt;^0.0&gt; as ToOwned&gt;::Owned = Vec&lt;^0.0&gt;),
                                        },
                                    ),
                                    floundered_time: TimeStamp {
                                        clock: 0,
                                    },
                                },
                            ],
                        }
</code></pre></div>


<p>would have returned an ambiguous answer?</p>



<a name="205699823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699823">(Aug 01 2020 at 21:54)</a>:</h4>
<p>Maybe</p>



<a name="205699828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699828">(Aug 01 2020 at 21:55)</a>:</h4>
<p>I have to think of a solution for this</p>



<a name="205699869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205699869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205699869">(Aug 01 2020 at 21:56)</a>:</h4>
<p>I really wish that <code>ForAll&lt;&gt; {}</code> wasn't there though. It throws me off lol</p>



<a name="205701156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701156">(Aug 01 2020 at 22:40)</a>:</h4>
<p>Ah, so <span class="user-mention" data-user-id="230601">@Nathan Whitaker</span>, you weren't clear before. But I'm assuming that before, instead of panicking, it was giving <code>Unique; for&lt;?U0&gt; { substitution [?0 := {slice}&lt;^0.0&gt;, ?1 := Vec&lt;^0.0&gt;], lifetime constraints [] }</code></p>



<a name="205701168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701168">(Aug 01 2020 at 22:41)</a>:</h4>
<p>Which means that the <code>impl&lt;B&gt; From&lt;Cow&lt;B&gt;&gt; for Rc&lt;B&gt;</code> strand wasn't ever checked</p>



<a name="205701170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701170">(Aug 01 2020 at 22:41)</a>:</h4>
<p>Well, wasn't registered as a possible solution</p>



<a name="205701231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701231">(Aug 01 2020 at 22:43)</a>:</h4>
<p>One thing to note is that we theoretically should be able to get a solution of <code>^0.0 = [T]</code> if <code>T: Sized</code></p>



<a name="205701268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701268">(Aug 01 2020 at 22:44)</a>:</h4>
<p>But I guess we can't <em>actually</em> get that</p>



<a name="205701280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701280">(Aug 01 2020 at 22:44)</a>:</h4>
<p>I bet if we add an <code>if (S: Sized)</code></p>



<a name="205701287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701287">(Aug 01 2020 at 22:45)</a>:</h4>
<p>to the goal</p>



<a name="205701290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701290">(Aug 01 2020 at 22:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205701156">said</a>:</p>
<blockquote>
<p>Ah, so <span class="user-mention silent" data-user-id="230601">Nathan Whitaker</span>, you weren't clear before. But I'm assuming that before, instead of panicking, it was giving <code>Unique; for&lt;?U0&gt; { substitution [?0 := {slice}&lt;^0.0&gt;, ?1 := Vec&lt;^0.0&gt;], lifetime constraints [] }</code></p>
</blockquote>
<p>Ah yup that is what I meant, should've been more specific</p>



<a name="205701291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701291">(Aug 01 2020 at 22:45)</a>:</h4>
<p>then we could actually get a definite solution of <code>?0 = [T]</code></p>



<a name="205701390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701390">(Aug 01 2020 at 22:48)</a>:</h4>
<p>Right now, we can't actually say anything about <code>ForAll&lt;&gt; { Implemented(^1.0: ToOwned) }</code>, since we don't know if <code>^1.0: Sized</code></p>



<a name="205701403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701403">(Aug 01 2020 at 22:49)</a>:</h4>
<p>Cycles in SLG have definitely been something that <span class="user-mention" data-user-id="116009">@nikomatsakis</span> and I have discussed. And how to potentially handle them better</p>



<a name="205701411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701411">(Aug 01 2020 at 22:49)</a>:</h4>
<p>Because like, right now, we really have to wait until <em>all</em> strands have been checked before we do anything about cycles</p>



<a name="205701458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701458">(Aug 01 2020 at 22:50)</a>:</h4>
<p>And I think the logical problem here is that currently we assume that if we hit a cycle, we <em>never</em> can get an answer</p>



<a name="205701460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701460">(Aug 01 2020 at 22:50)</a>:</h4>
<p>but in reality, we <em>could</em> get an answer if we knew more</p>



<a name="205701515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701515">(Aug 01 2020 at 22:52)</a>:</h4>
<p>So now, let's think</p>



<a name="205701516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701516">(Aug 01 2020 at 22:52)</a>:</h4>
<p>If instead of discarding the cycle, we flounder the current subgoal, what would happen</p>



<a name="205701521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701521">(Aug 01 2020 at 22:52)</a>:</h4>
<p>And let's specifically talk about a different case</p>



<a name="205701525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701525">(Aug 01 2020 at 22:53)</a>:</h4>
<p>Let's imagine there's only one subgoal, and it is a cycle</p>



<a name="205701570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701570">(Aug 01 2020 at 22:54)</a>:</h4>
<p>So, we would see this and call <code>on_positive_cycle</code></p>



<a name="205701591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701591">(Aug 01 2020 at 22:55)</a>:</h4>
<p>Right now, we essentially record that we got a cycle at this depth</p>



<a name="205701593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701593">(Aug 01 2020 at 22:55)</a>:</h4>
<p>then re-enqueue the strand</p>



<a name="205701632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701632">(Aug 01 2020 at 22:56)</a>:</h4>
<p>Let's also assume this is the only strand</p>



<a name="205701643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701643">(Aug 01 2020 at 22:57)</a>:</h4>
<p>Then back in <code>ensure_root_answer</code>, we would see that we've already tried to pursue that strand this call</p>



<a name="205701649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701649">(Aug 01 2020 at 22:57)</a>:</h4>
<p>so we call <code>on_no_strands_left</code></p>



<a name="205701702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701702" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701702">(Aug 01 2020 at 22:59)</a>:</h4>
<p>So, then we see that the current table is part of a cycle</p>



<a name="205701768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701768">(Aug 01 2020 at 23:01)</a>:</h4>
<p>ugh this part is confusing too, the cyclic minimums</p>



<a name="205701890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701890">(Aug 01 2020 at 23:05)</a>:</h4>
<p>The best way I can describe cyclic minimums is we want to "unwind" back to the top of the stack of cycles</p>



<a name="205701954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701954">(Aug 01 2020 at 23:06)</a>:</h4>
<p>So anyways, the table is part of a cycle, so we do this unwinding and eventually find that we can't get any new information</p>



<a name="205701971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205701971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205701971">(Aug 01 2020 at 23:07)</a>:</h4>
<p>Ah right, so the assumption isn't correct because we can only <em>know</em> this if we've also considered ambiguous answers</p>



<a name="205702302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702302">(Aug 01 2020 at 23:18)</a>:</h4>
<p>Okay I fixed it</p>



<a name="205702304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702304">(Aug 01 2020 at 23:18)</a>:</h4>
<p>Turns out, we can't even consider cycles unless we're accepting ambiguous answers</p>



<a name="205702312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702312">(Aug 01 2020 at 23:19)</a>:</h4>
<p>I feel like there's something else subtle here</p>



<a name="205702316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702316">(Aug 01 2020 at 23:19)</a>:</h4>
<p>but...I don't want to think about that right now</p>



<a name="205702365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702365">(Aug 01 2020 at 23:21)</a>:</h4>
<p>But, I guess the problem here is that there was a strand hanging around had only floundered subgoals</p>



<a name="205702371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702371">(Aug 01 2020 at 23:21)</a>:</h4>
<p>and the other strand on that table was part of a cycle</p>



<a name="205702417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702417">(Aug 01 2020 at 23:22)</a>:</h4>
<p>The problem though is because it was part of a cycle, that ambiguous answer could get back to us</p>



<a name="205702536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702536">(Aug 01 2020 at 23:26)</a>:</h4>
<p>Let's make sure the other tests pass</p>



<a name="205702541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702541">(Aug 01 2020 at 23:27)</a>:</h4>
<p><span class="user-mention" data-user-id="230601">@Nathan Whitaker</span> your test fails coherence: "overlapping impls of trait <code>TyParamTrait</code>"</p>



<a name="205702581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702581">(Aug 01 2020 at 23:28)</a>:</h4>
<p><em>is digesting</em></p>



<a name="205702596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702596">(Aug 01 2020 at 23:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571)/near/205702541">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="230601">Nathan Whitaker</span> your test fails coherence: "overlapping impls of trait <code>TyParamTrait</code>"</p>
</blockquote>
<p>Ah yeah, it was a nonsense case so that's not surprising</p>



<a name="205702647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702647">(Aug 01 2020 at 23:31)</a>:</h4>
<p>hehe</p>



<a name="205702658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702658">(Aug 01 2020 at 23:31)</a>:</h4>
<p>that took way too long to debug</p>



<a name="205702823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702823">(Aug 01 2020 at 23:36)</a>:</h4>
<p><span class="user-mention" data-user-id="230601">@Nathan Whitaker</span> Wanna review this one?</p>



<a name="205702826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702826">(Aug 01 2020 at 23:37)</a>:</h4>
<p>I'm cleaning it up then gonna PR it</p>



<a name="205702877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702877">(Aug 01 2020 at 23:38)</a>:</h4>
<p>Sure thing, I can take a look</p>



<a name="205702888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205702888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205702888">(Aug 01 2020 at 23:39)</a>:</h4>
<p><a href="https://github.com/rust-lang-nursery/chalk/issues/588">chalk#588</a></p>



<a name="205703081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205703081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205703081">(Aug 01 2020 at 23:45)</a>:</h4>
<p>Also, I apologize to everyone who doesn't care for all my ramblings</p>



<a name="205703175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205703175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Whitaker <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205703175">(Aug 01 2020 at 23:48)</a>:</h4>
<p>LGTM, should we try to get <span class="user-mention silent" data-user-id="116009">nikomatsakis</span>' eyes on it?</p>



<a name="205703381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/144729-wg-traits/topic/%60clear_strands_after_cycle%60%20panic%20%28%23571%29/near/205703381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/144729-wg-traits/topic/.60clear_strands_after_cycle.60.20panic.20(.23571).html#205703381">(Aug 01 2020 at 23:57)</a>:</h4>
<p>Eh, I think it's a fairly small change. And he's not going to be around much the next week</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
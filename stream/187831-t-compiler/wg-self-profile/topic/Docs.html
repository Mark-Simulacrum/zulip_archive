<html>
<head><meta charset="utf-8"><title>Docs · t-compiler/wg-self-profile · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/index.html">t-compiler/wg-self-profile</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html">Docs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="164178818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164178818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164178818">(Apr 25 2019 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> here?</p>



<a name="164178882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164178882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164178882">(Apr 25 2019 at 15:10)</a>:</h4>
<p>Yep!</p>



<a name="164178923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164178923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164178923">(Apr 25 2019 at 15:10)</a>:</h4>
<p>I don't know if you saw <span class="user-mention" data-user-id="126931">@centril</span>'s latest post in the weekly meeting thread, but I think that's probably the first order of business</p>



<a name="164178937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164178937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164178937">(Apr 25 2019 at 15:10)</a>:</h4>
<blockquote>
<p>1. Start with git clone for the measure me repo itself and progress to cargo install;<br>
2. Tell the user how to setup a rustc toolchain and run summarize for that.<br>
3. And also how to deal with diffs and such</p>
</blockquote>



<a name="164178968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164178968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164178968">(Apr 25 2019 at 15:11)</a>:</h4>
<p>We currently have some of this scattered around the repo but having a consolidated "tutorial" would be great</p>



<a name="164179064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164179064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164179064">(Apr 25 2019 at 15:12)</a>:</h4>
<p>I'll take a look at it in an hour or so</p>



<a name="164179077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164179077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164179077">(Apr 25 2019 at 15:12)</a>:</h4>
<p>For example, there's a half baked tutorial <a href="https://github.com/rust-lang/measureme/blob/master/summarize/Readme.md" target="_blank" title="https://github.com/rust-lang/measureme/blob/master/summarize/Readme.md">here</a></p>



<a name="164179085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164179085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164179085">(Apr 25 2019 at 15:12)</a>:</h4>
<p>Sounds good!</p>



<a name="164179104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164179104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164179104">(Apr 25 2019 at 15:12)</a>:</h4>
<p>If you need more guidance or have any questions, feel free to ping me here</p>



<a name="164197191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197191">(Apr 25 2019 at 18:31)</a>:</h4>
<p>So I've been reading parts of the source code to figure out how things fit together, and I think I have some overall idea. I then tried to follow the half baked tutorial you listed, but the rustc call only produced a <code>regex.profile_events.json</code> file, while <code>summarize</code> seems to expect three files with extensions <code>events</code>, <code>string_data</code> and <code>string_index</code>. <span class="user-mention" data-user-id="125250">@Wesley Wiser</span></p>



<a name="164197220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197220">(Apr 25 2019 at 18:31)</a>:</h4>
<p>Hmmm</p>



<a name="164197272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197272">(Apr 25 2019 at 18:32)</a>:</h4>
<p>Are you using a nightly, beta, or stable compiler?</p>



<a name="164197293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197293">(Apr 25 2019 at 18:32)</a>:</h4>
<p>Well I compiled with <code>cargo +nightly build</code></p>



<a name="164197297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197297">(Apr 25 2019 at 18:32)</a>:</h4>
<p>Ok</p>



<a name="164197300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197300">(Apr 25 2019 at 18:32)</a>:</h4>
<p>So that should be nightly</p>



<a name="164197305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197305">(Apr 25 2019 at 18:32)</a>:</h4>
<p>(it doesn't compile on stable)</p>



<a name="164197308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197308">(Apr 25 2019 at 18:32)</a>:</h4>
<p>Is it an old nightly?</p>



<a name="164197328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197328">(Apr 25 2019 at 18:32)</a>:</h4>
<p>Yeah, <code>-Z</code> options shouldn't be allowed on stable/beta</p>



<a name="164197357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197357">(Apr 25 2019 at 18:33)</a>:</h4>
<p>uhh, probably, considering I haven't done rustup today</p>



<a name="164197370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197370">(Apr 25 2019 at 18:33)</a>:</h4>
<p>Will update</p>



<a name="164197374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197374">(Apr 25 2019 at 18:33)</a>:</h4>
<p><code>cargo +nightly rustc -- --version</code> I think will give you a date</p>



<a name="164197501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197501">(Apr 25 2019 at 18:34)</a>:</h4>
<p>The PR which changes that behavior got merged ~12 days ago so any semi-recent nightly should work</p>



<a name="164197518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197518">(Apr 25 2019 at 18:34)</a>:</h4>
<p>Okay that helped!</p>



<a name="164197558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197558">(Apr 25 2019 at 18:35)</a>:</h4>
<p>Whoops, it panics if piped into <code>head</code>.</p>



<a name="164197650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197650">(Apr 25 2019 at 18:36)</a>:</h4>
<p>Anyways it works now</p>



<a name="164197662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197662">(Apr 25 2019 at 18:36)</a>:</h4>
<p>Yay</p>



<a name="164197715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197715">(Apr 25 2019 at 18:36)</a>:</h4>
<p>So now you should have the <code>.events</code>, <code>.string_data</code>, and <code>.string_index</code> files</p>



<a name="164197748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197748">(Apr 25 2019 at 18:37)</a>:</h4>
<p>If you <code>git clone https://github.com/rust-lang/measureme.git</code> and then <code>cargo build</code>, you should have two tools available</p>



<a name="164197805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197805">(Apr 25 2019 at 18:38)</a>:</h4>
<p><code>cargo run --bin summarize</code> which produces a table on <code>stdout</code> with interesting metrics about the profile</p>



<a name="164197840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197840">(Apr 25 2019 at 18:38)</a>:</h4>
<p>and <br>
<code>cargo run --bin stack-collapse</code> which produces a collapsed stacks files from the profile data</p>



<a name="164197846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197846">(Apr 25 2019 at 18:38)</a>:</h4>
<p><a href="https://github.com/rust-lang/measureme/issues/31" target="_blank" title="https://github.com/rust-lang/measureme/issues/31">https://github.com/rust-lang/measureme/issues/31</a></p>



<a name="164197888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197888">(Apr 25 2019 at 18:39)</a>:</h4>
<p>(Thanks)</p>



<a name="164197942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197942">(Apr 25 2019 at 18:39)</a>:</h4>
<p>although maybe that issue should go on prettytable<br>
oh well</p>



<a name="164197949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164197949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164197949">(Apr 25 2019 at 18:39)</a>:</h4>
<p>I guess we should probably have some labels set up for the different tools</p>



<a name="164198080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198080">(Apr 25 2019 at 18:40)</a>:</h4>
<p>That's fair. Having an issue in our repo to point them to is probably also useful</p>



<a name="164198258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198258">(Apr 25 2019 at 18:42)</a>:</h4>
<p>It seems like it would be a good idea to have an option to only print stuff with runtime &gt; some_value, considering the table seems like it should be read by humans</p>



<a name="164198355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198355">(Apr 25 2019 at 18:43)</a>:</h4>
<p>That's a good idea. We should also default it to something reasonable. Perhaps show nothing &lt; 1% of the total time by default?</p>



<a name="164198419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198419">(Apr 25 2019 at 18:44)</a>:</h4>
<p>yeah</p>



<a name="164198476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198476">(Apr 25 2019 at 18:45)</a>:</h4>
<p>Although I can't quite tell how far down the list is a reasonable default</p>



<a name="164198513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198513">(Apr 25 2019 at 18:45)</a>:</h4>
<p>with 1% it currently prints these</p>
<div class="codehilite"><pre><span></span>LLVM_emit_obj
LLVM_module_passes
LLVM_make_bitcode
typeck_tables_of
mir_borrowck
optimized_mir
mir_built
LLVM_compress_bitcode
evaluate_obligation
codegen
</pre></div>



<a name="164198571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198571">(Apr 25 2019 at 18:46)</a>:</h4>
<p>I guess the question is "what's the long tail?"</p>



<a name="164198584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198584">(Apr 25 2019 at 18:46)</a>:</h4>
<p>If that's ~90% of the total compilation time, that's almost certainly good enough for a default output</p>



<a name="164198595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198595">(Apr 25 2019 at 18:46)</a>:</h4>
<p>But if it's only ~50%, then that might not be sufficient</p>



<a name="164198741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198741">(Apr 25 2019 at 18:48)</a>:</h4>
<p>For the regex crate on my machine it is 76% of the total compilation time.</p>



<a name="164198782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198782">(Apr 25 2019 at 18:49)</a>:</h4>
<p>Hmm. Not quite the clear cut result I was hoping for lol</p>



<a name="164198801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198801">(Apr 25 2019 at 18:49)</a>:</h4>
<p>We should gather more data from other crates before picking a default anyway</p>



<a name="164198815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198815">(Apr 25 2019 at 18:50)</a>:</h4>
<p>I'd say just file an issue and we'll get to it at some point</p>



<a name="164198870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198870">(Apr 25 2019 at 18:50)</a>:</h4>
<p>you could also just print the top 80% of the running time :p</p>



<a name="164198878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198878">(Apr 25 2019 at 18:50)</a>:</h4>
<p>That's true</p>



<a name="164198892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198892">(Apr 25 2019 at 18:50)</a>:</h4>
<p>I think the first step is probably just allowing the user to pick an option on the cli</p>



<a name="164198906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164198906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164198906">(Apr 25 2019 at 18:50)</a>:</h4>
<p>From there, we can experiment easier before deciding on a default</p>



<a name="164199706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164199706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164199706">(Apr 25 2019 at 19:01)</a>:</h4>
<p><a href="https://github.com/rust-lang/measureme/issues/32" target="_blank" title="https://github.com/rust-lang/measureme/issues/32">#32</a></p>



<a name="164208346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164208346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164208346">(Apr 25 2019 at 20:49)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> What are <code>Blocked time</code> and <code>Incremental load time</code>?</p>



<a name="164208368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164208368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164208368">(Apr 25 2019 at 20:49)</a>:</h4>
<p>And <code>Item count</code>?</p>



<a name="164208387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164208387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164208387">(Apr 25 2019 at 20:49)</a>:</h4>
<p>Incremental load time is time spent loading a result from the incremental result cache instead of recomputing it from scratch</p>



<a name="164208469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164208469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164208469">(Apr 25 2019 at 20:50)</a>:</h4>
<p>Blocked time is time spent waiting for the query to finish executing in a different thread. This only happens when you have a compiler built with parallel queries turned on. (I think)</p>



<a name="164208483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164208483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164208483">(Apr 25 2019 at 20:50)</a>:</h4>
<p>Item count is how many times the query/activity appeared in the profile</p>



<a name="164208536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164208536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164208536">(Apr 25 2019 at 20:51)</a>:</h4>
<p>Also, which nightly was the first with the feature? You said it was 12 days-ish ago I think?</p>



<a name="164208703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164208703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164208703">(Apr 25 2019 at 20:53)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/59515" target="_blank" title="https://github.com/rust-lang/rust/pull/59515">This</a> was the PR so I assume April 13th's nightly would have had that change</p>



<a name="164209723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164209723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164209723">(Apr 25 2019 at 21:05)</a>:</h4>
<p>So I tried to write <a href="https://github.com/Darksonn/measureme/tree/master/summarize" target="_blank" title="https://github.com/Darksonn/measureme/tree/master/summarize">some documentation</a>. What do you think of this so far?</p>



<a name="164209944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164209944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164209944">(Apr 25 2019 at 21:08)</a>:</h4>
<p>I need a better way of previewing the result than committing to github :/</p>



<a name="164210019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210019">(Apr 25 2019 at 21:09)</a>:</h4>
<p>Are you using a local editor or the GitHub editor?</p>



<a name="164210029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210029">(Apr 25 2019 at 21:09)</a>:</h4>
<p>VSCode has a nice markdown preview mode</p>



<a name="164210099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210099">(Apr 25 2019 at 21:10)</a>:</h4>
<p>I just edit the file in vim.</p>



<a name="164210104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210104">(Apr 25 2019 at 21:10)</a>:</h4>
<p>Ah ok</p>



<a name="164210114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210114" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210114">(Apr 25 2019 at 21:10)</a>:</h4>
<p>I usually use VSCode &amp; the vim extension</p>



<a name="164210158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210158">(Apr 25 2019 at 21:11)</a>:</h4>
<p>It works really nicely <a href="https://code.visualstudio.com/docs/languages/markdown" target="_blank" title="https://code.visualstudio.com/docs/languages/markdown">https://code.visualstudio.com/docs/languages/markdown</a></p>



<a name="164210212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210212">(Apr 25 2019 at 21:12)</a>:</h4>
<p>The docs look awesome!!</p>



<a name="164210273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210273">(Apr 25 2019 at 21:12)</a>:</h4>
<p>I'm a little unsure about recommending that people install the tool because we are purposely not making the binary format stable at this time.</p>



<a name="164210296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210296">(Apr 25 2019 at 21:13)</a>:</h4>
<p>Using a different version of the tool than rustc is using will cause all kinds of weird things to happen</p>



<a name="164210309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210309">(Apr 25 2019 at 21:13)</a>:</h4>
<p>Well I did that because of the quote 'Start with git clone for the measure me repo itself and progress to cargo install' from earlier</p>



<a name="164210317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210317">(Apr 25 2019 at 21:13)</a>:</h4>
<p>but I can recommend using the binary directly instead</p>



<a name="164210403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210403">(Apr 25 2019 at 21:14)</a>:</h4>
<p>Oh, sorry. That's my fault</p>



<a name="164210417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210417">(Apr 25 2019 at 21:14)</a>:</h4>
<p>I should have edited those instructions more carefully</p>



<a name="164210562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210562">(Apr 25 2019 at 21:16)</a>:</h4>
<p>So I should also tell people to recompile <code>summarize</code> if they update/change the compiler?</p>



<a name="164210590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210590">(Apr 25 2019 at 21:16)</a>:</h4>
<p>So rereading over it, I think this is what we need to start with:</p>
<p>1. Start with git clone for the measure me repo itself and progress to running a simple profile;<br>
2. Tell the user how to setup a rustc toolchain and run summarize for that.</p>



<a name="164210644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210644">(Apr 25 2019 at 21:17)</a>:</h4>
<p>Yes? I guess? It's a little complicated in that the version they use needs to match the version used by rustc which is not necessarily going to be the latest version.</p>



<a name="164210667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210667">(Apr 25 2019 at 21:17)</a>:</h4>
<p>Maybe it's best not to get into that too much at this point since we haven't made any breaking changes yet.</p>



<a name="164210731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210731">(Apr 25 2019 at 21:18)</a>:</h4>
<p>I thought I'd start with showing it for the nightly compiler, since that's easier getting started with, then adding a section where one sets up a rustc toolchain by compiling the compiler yourself and doing it on that?</p>



<a name="164210741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210741">(Apr 25 2019 at 21:18)</a>:</h4>
<p>Yeah, that sounds great</p>



<a name="164210757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210757">(Apr 25 2019 at 21:18)</a>:</h4>
<p>There's some existing documentation on rustc workflows over in the rustc-guide</p>



<a name="164210779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210779">(Apr 25 2019 at 21:19)</a>:</h4>
<p>Oh, could you send a link to the part you're thinking of?</p>



<a name="164210783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210783">(Apr 25 2019 at 21:19)</a>:</h4>
<p>We should just point to that as the authoritative source on building rustc</p>



<a name="164210786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210786">(Apr 25 2019 at 21:19)</a>:</h4>
<p>one sec</p>



<a name="164210873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210873">(Apr 25 2019 at 21:20)</a>:</h4>
<p>This is the "definitive" source: <a href="https://rust-lang.github.io/rustc-guide/how-to-build-and-run.html" target="_blank" title="https://rust-lang.github.io/rustc-guide/how-to-build-and-run.html">https://rust-lang.github.io/rustc-guide/how-to-build-and-run.html</a></p>



<a name="164210902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210902">(Apr 25 2019 at 21:20)</a>:</h4>
<p>But we should make a general recommendation like, "If you've never build rustc before, we suggest starting with <code>./x.py build</code>"</p>



<a name="164210930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210930">(Apr 25 2019 at 21:21)</a>:</h4>
<p>sure</p>



<a name="164210949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164210949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164210949">(Apr 25 2019 at 21:21)</a>:</h4>
<p>Given how many crates rely on proc macros, you'll probably need a stage 2 compiler anway</p>



<a name="164211043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211043">(Apr 25 2019 at 21:22)</a>:</h4>
<p>Anyway, the docs you've written look great and exactly the kind of step-by-step guide I think we need</p>



<a name="164211071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211071">(Apr 25 2019 at 21:23)</a>:</h4>
<p>cool</p>



<a name="164211109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211109">(Apr 25 2019 at 21:23)</a>:</h4>
<p>I'm glad I found somewhere to start out contributing. It's been sorta difficult to find one on my own.</p>



<a name="164211111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211111">(Apr 25 2019 at 21:23)</a>:</h4>
<p>Once you're ready to submit a PR, I'd love to get somebody else who hasn't used this tool before to try them out and see if they can get it to work. </p>
<p><span class="user-mention" data-user-id="218647">@Amanjeev Sethi</span> perhaps? <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164211330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211330">(Apr 25 2019 at 21:26)</a>:</h4>
<p>Yeah, I remember when I started contributing. It took months of watching the repo before I found something I thought I could tackle.</p>



<a name="164211526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211526">(Apr 25 2019 at 21:29)</a>:</h4>
<p>Okay so, what is the equivalent of <code>cargo +nightly rustc -- -Z self-profile</code> for a compiler I've built myself?</p>



<a name="164211545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211545">(Apr 25 2019 at 21:29)</a>:</h4>
<p>The easiest thing I've found is to set up a custom toolchain in rustup</p>



<a name="164211836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211836">(Apr 25 2019 at 21:33)</a>:</h4>
<p><a href="https://wesleywiser.github.io/post/custom-rust-toolchain/" target="_blank" title="https://wesleywiser.github.io/post/custom-rust-toolchain/">https://wesleywiser.github.io/post/custom-rust-toolchain/</a></p>



<a name="164211866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164211866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164211866">(Apr 25 2019 at 21:33)</a>:</h4>
<p>Once you've done that, you can do the same <code>+toolchain</code> cargo command</p>



<a name="164212095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212095">(Apr 25 2019 at 21:36)</a>:</h4>
<p>Okay this is what I'll get done for tonight. <a href="https://github.com/Darksonn/measureme/tree/master/summarize" target="_blank" title="https://github.com/Darksonn/measureme/tree/master/summarize">same link as before</a></p>



<a name="164212265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212265">(Apr 25 2019 at 21:38)</a>:</h4>
<p>Yeah, that looks good!</p>



<a name="164212281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212281">(Apr 25 2019 at 21:38)</a>:</h4>
<p>My only feedback would be to include instructions for creating the custom toolchain inline</p>



<a name="164212333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212333">(Apr 25 2019 at 21:39)</a>:</h4>
<p><code>rustup toolchain link foo bar ...</code></p>



<a name="164212341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212341">(Apr 25 2019 at 21:39)</a>:</h4>
<p>Sure, but I'll try doing it myself before writing those instructions. <span aria-label="smile" class="emoji emoji-263a" role="img" title="smile">:smile:</span></p>



<a name="164212354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212354">(Apr 25 2019 at 21:39)</a>:</h4>
<p>Absolutely <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="164212382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212382">(Apr 25 2019 at 21:39)</a>:</h4>
<p>Okay I'm going to bed.<br>
Which timezone are you in? (I'm in copenhagen)</p>



<a name="164212468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212468">(Apr 25 2019 at 21:40)</a>:</h4>
<p>EDT (UTC - 4)</p>



<a name="164212476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212476">(Apr 25 2019 at 21:40)</a>:</h4>
<p>(East Coast, United States)</p>



<a name="164212488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212488">(Apr 25 2019 at 21:41)</a>:</h4>
<p>Have a good evening! <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="164212505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164212505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164212505">(Apr 25 2019 at 21:41)</a>:</h4>
<p>Thanks, good night <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="164217192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164217192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164217192">(Apr 25 2019 at 22:53)</a>:</h4>
<blockquote>
<p>Once you're ready to submit a PR, I'd love to get somebody else who hasn't used this tool before to try them out and see if they can get it to work. </p>
<p><span class="user-mention silent" data-user-id="218647">Amanjeev Sethi</span> perhaps? <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>
</blockquote>
<p>absolutely! I would love to try it out. I have been trying to follow your discussion but have not been able to repeat anything. Lots of missing pieces for me. but I would love to be the person to try out</p>



<a name="164218688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164218688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164218688">(Apr 25 2019 at 23:17)</a>:</h4>
<p>I am on east coast in the US as well (at least for now).</p>



<a name="164224130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164224130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164224130">(Apr 26 2019 at 01:08)</a>:</h4>
<blockquote>
<blockquote>
<p>Once you're ready to submit a PR, I'd love to get somebody else who hasn't used this tool before to try them out and see if they can get it to work. </p>
<p><span class="user-mention silent" data-user-id="218647">Amanjeev Sethi</span> perhaps? <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>
</blockquote>
<p>absolutely! I would love to try it out. I have been trying to follow your discussion but have not been able to repeat anything. Lots of missing pieces for me. but I would love to be the person to try out</p>
</blockquote>
<p>Great! <span class="user-mention" data-user-id="218683">@Alice Ryhl</span> is making short work of the guide so I imagine it will be ready to test within a few days or so.</p>



<a name="164227603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164227603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164227603">(Apr 26 2019 at 02:30)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> It would be really nice if <code>./x.py</code> could make a new custom toolchain for you and have it do the <code>cp -R ...</code> as well; <code>./x.py toolchain --stage 1 $name $path_to_copy_toolchain_to</code></p>



<a name="164227620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164227620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164227620">(Apr 26 2019 at 02:30)</a>:</h4>
<p>another thing that would be nice to show is how this works when just invoking <code>rustc</code> on a specific file, e.g. <code>a.rs</code></p>



<a name="164227770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164227770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164227770">(Apr 26 2019 at 02:34)</a>:</h4>
<p>(filed in <a href="https://github.com/rust-lang/measureme/issues/33" target="_blank" title="https://github.com/rust-lang/measureme/issues/33">https://github.com/rust-lang/measureme/issues/33</a>) non-docs related, it would be great to enable <code>summarize pid-$baseline pid-$change</code> to see a diff</p>



<a name="164238191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164238191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164238191">(Apr 26 2019 at 07:04)</a>:</h4>
<p>Nice, thanks for all your work, <span class="user-mention" data-user-id="218683">@Alice Ryhl</span>!</p>



<a name="164238286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164238286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164238286">(Apr 26 2019 at 07:06)</a>:</h4>
<p>I think we don't have a final vision of how these tools should be used in the future, so there's an opportunity here not only to document but also to come up with and shape the workflows around self-profiling.</p>



<a name="164238571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164238571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164238571">(Apr 26 2019 at 07:12)</a>:</h4>
<p>Making a document explaining how we hope it should work in the future sounds like a good idea. I can look at writing something about that after I finish this guide</p>



<a name="164239224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164239224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164239224">(Apr 26 2019 at 07:28)</a>:</h4>
<p>sure, no rush :)</p>



<a name="164243373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243373">(Apr 26 2019 at 08:43)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> It would be really nice if <code>./x.py</code> could make a new custom toolchain for you and have it do the <code>cp -R ...</code> as well; <code>./x.py toolchain --stage 1 $name $path_to_copy_toolchain_to</code></p>
</blockquote>
<p><span class="user-mention" data-user-id="126931">@centril</span>  I'm not sure what you mean by this bit <code>cp -R ...</code>. When I set up my dev environment, I just did this:</p>
<div class="codehilite"><pre><span></span>git clone https://github.com/rust-lang/rust.git
<span class="nb">cd</span> rust
./x.py build
rustup toolchain link stage0 ./build/x86_64-unknown-linux-gnu/stage0
rustup toolchain link stage1 ./build/x86_64-unknown-linux-gnu/stage1
rustup toolchain link stage0 ./build/x86_64-unknown-linux-gnu/stage0
</pre></div>


<p>at which point, I can now do </p>
<div class="codehilite"><pre><span></span><span class="o">[</span>cargo <span class="p">|</span> rustc<span class="o">]</span> +<span class="o">[</span>stage0 <span class="p">|</span> stage1 <span class="p">|</span> stage2<span class="o">]</span> <span class="o">{</span>args<span class="o">}</span>...
</pre></div>


<p>for any other project or file etc.</p>



<a name="164243410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243410">(Apr 26 2019 at 08:43)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span>  but what happens if you switch branches and then want to build again?</p>



<a name="164243457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243457">(Apr 26 2019 at 08:44)</a>:</h4>
<p>does <code>rustup toolchain link</code> copy the files in the directory?</p>



<a name="164243461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243461">(Apr 26 2019 at 08:44)</a>:</h4>
<p>ah well I use git workspaces for that</p>



<a name="164243486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243486">(Apr 26 2019 at 08:44)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> what sorta voodoo is that? :D</p>



<a name="164243507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243507">(Apr 26 2019 at 08:45)</a>:</h4>
<p>So ~/code/rust/rust is my "canonical" repo</p>



<a name="164243532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243532">(Apr 26 2019 at 08:45)</a>:</h4>
<p>ie git lives in ~/code/rust/rust/.git</p>



<a name="164243538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243538">(Apr 26 2019 at 08:45)</a>:</h4>
<p>but from that folder I ran <code>git workspace add ../rust2</code></p>



<a name="164243554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243554">(Apr 26 2019 at 08:46)</a>:</h4>
<p>which creates a checkout at ~/code/rust/rust2 with all of my current HEAD's files</p>



<a name="164243602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243602">(Apr 26 2019 at 08:46)</a>:</h4>
<p>and that folder shares its git data with ~/code/rust/rust</p>



<a name="164243629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243629">(Apr 26 2019 at 08:46)</a>:</h4>
<p>So now, I can go into either folder, checkout any commit I want, do a build and make changes in the other folder without destroying the build</p>



<a name="164243653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243653">(Apr 26 2019 at 08:47)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> ah, that's nice</p>



<a name="164243667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243667">(Apr 26 2019 at 08:47)</a>:</h4>
<p>and then I did </p>
<div class="codehilite"><pre><span></span>rustup toolchain link stage0-2 ~/code/rust/rust2/build/x86_64-unknown-linux-gnu/stage0
rustup toolchain link stage1-2 ~/code/rust/rust2/build/x86_64-unknown-linux-gnu/stage1
rustup toolchain link stage0-2 ~/code/rust/rust2/build/x86_64-unknown-linux-gnu/stage0
</pre></div>



<a name="164243671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243671">(Apr 26 2019 at 08:47)</a>:</h4>
<p>so now rustup knows about them</p>



<a name="164243724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243724">(Apr 26 2019 at 08:48)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> I think this is the sort of tribal knowledge that needs to be documented, especially for <code>summarize</code></p>



<a name="164243728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243728">(Apr 26 2019 at 08:48)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> It's super easy to setup and it's really nice because I don't have to push commits anywhere to share them across folders</p>



<a name="164243774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243774">(Apr 26 2019 at 08:49)</a>:</h4>
<p>That probably belongs more in the rustc-guide. I don't think it's that useful for summarize.</p>



<a name="164243782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243782">(Apr 26 2019 at 08:49)</a>:</h4>
<p>Huh, I've never heard of that before. And I agree the rustc-guide is the place for that</p>



<a name="164243792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243792">(Apr 26 2019 at 08:49)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> the only place I've needed this is for <code>summarize</code> tho <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164243796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243796">(Apr 26 2019 at 08:49)</a>:</h4>
<p>Why do you need it?</p>



<a name="164243832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243832">(Apr 26 2019 at 08:50)</a>:</h4>
<p>but... document in rustc guide and link to it from <code>summarize</code></p>



<a name="164243851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243851">(Apr 26 2019 at 08:50)</a>:</h4>
<p>(I've not needed so I'm confused)</p>



<a name="164243859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243859">(Apr 26 2019 at 08:50)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> to profile differences between <code>master</code> and <code>my-branch</code></p>



<a name="164243875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243875">(Apr 26 2019 at 08:50)</a>:</h4>
<p>Oh I see</p>



<a name="164243894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243894">(Apr 26 2019 at 08:51)</a>:</h4>
<p>Ah so you've needed it in the <code>rust</code> repo, but only when <em>using</em> summarize.</p>



<a name="164243901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243901">(Apr 26 2019 at 08:51)</a>:</h4>
<p>right</p>



<a name="164243977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164243977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164243977">(Apr 26 2019 at 08:52)</a>:</h4>
<p>(also, for the same PR I really wanted to have <code>summarize</code>give me a diff between two different self-profile outputs)</p>



<a name="164244038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244038">(Apr 26 2019 at 08:53)</a>:</h4>
<p>Having thought about it for 0.2 seconds, here's how I'd expect that to work:</p>
<p>1. You make a build of <code>master</code> and run <code>summarize --json</code> and copy the resulting file somewhere safe<br>
2. You rebase your branch on <code>master</code>, build, and then run <code>summarize --json</code> again and copy that file somewhere safe<br>
3. You run (a currently hypothetical) <code>summarize diff file1 file2</code> which then displays the diff</p>



<a name="164244047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244047">(Apr 26 2019 at 08:53)</a>:</h4>
<p>Why would <code>--json</code> be needed?</p>



<a name="164244058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244058">(Apr 26 2019 at 08:54)</a>:</h4>
<p>I don't think we want the tool to parse the cli output</p>



<a name="164244107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244107">(Apr 26 2019 at 08:54)</a>:</h4>
<p>That's intended for humans and not machines</p>



<a name="164244125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244125">(Apr 26 2019 at 08:54)</a>:</h4>
<p>oh so you have three invocations of summarize here?</p>



<a name="164244127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244127">(Apr 26 2019 at 08:54)</a>:</h4>
<p><code>--json</code> is what perf.rlo will use once this is integrated with it</p>



<a name="164244170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244170">(Apr 26 2019 at 08:55)</a>:</h4>
<p>Yeah</p>



<a name="164244172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244172">(Apr 26 2019 at 08:55)</a>:</h4>
<p>I imagined you'd diff the <code>pid-{pid}</code> stuff directly</p>



<a name="164244180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244180">(Apr 26 2019 at 08:55)</a>:</h4>
<p>That's certainly possible</p>



<a name="164244182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244182">(Apr 26 2019 at 08:55)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> I just expect to be able to use <code>rustc +master -Z self-profile  file.rs</code> + <code>rustc +change -Z self-profile  file.rs</code> and then <code>summarize pid-$master pid-$change</code></p>



<a name="164244187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244187">(Apr 26 2019 at 08:55)</a>:</h4>
<p>The <code>.json</code> files are much more compact</p>



<a name="164244249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244249">(Apr 26 2019 at 08:56)</a>:</h4>
<p>So perf.rlo will probably need the json diff because we don't want to be storing hundreds of megs of performance related outputs per build</p>



<a name="164244270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244270">(Apr 26 2019 at 08:56)</a>:</h4>
<p>Then perhaps the compiler should convert them immediately after profiling then, re. conversation in binary format versioning</p>



<a name="164244303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244303">(Apr 26 2019 at 08:57)</a>:</h4>
<p>perf.rlo can always use a different UX than you use manually</p>



<a name="164244315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244315">(Apr 26 2019 at 08:57)</a>:</h4>
<p>That would be pretty cool locally</p>



<a name="164244334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244334">(Apr 26 2019 at 08:57)</a>:</h4>
<p>We're also building a number of other tools and the common format is the <code>.events</code>, <code>.string_data</code> and <code>.string_index</code> files</p>



<a name="164244383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244383">(Apr 26 2019 at 08:58)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span>  stretch goal: <code>summarize foo.rs +master +change</code></p>



<a name="164244394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244394">(Apr 26 2019 at 08:58)</a>:</h4>
<p>So sometimes you might be interested in <code>summarize</code> or other times you might be interested in <code>stack-collapse</code> etc</p>



<a name="164244433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244433">(Apr 26 2019 at 08:59)</a>:</h4>
<p>I really think we should consider bundling the three files in one as a post-processing step</p>



<a name="164244453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244453">(Apr 26 2019 at 08:59)</a>:</h4>
<p>They also gzip well so perhaps just zipping them up would be sufficient</p>



<a name="164244521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244521">(Apr 26 2019 at 09:00)</a>:</h4>
<p>Having one file would be convenient in terms of moving things around so I don't have to make separate folders</p>



<a name="164244527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244527">(Apr 26 2019 at 09:00)</a>:</h4>
<p>Part of the design constraint here is that we're trying to keep the additional work <code>rustc</code> does to an absolute minimum because it will massively skew the <code>instructions</code> count that perf.rlo relies on.</p>



<a name="164244551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244551">(Apr 26 2019 at 09:01)</a>:</h4>
<p>I mean the idea is to post-process after you finish profiling, so the post-processing isn't included in that instruction count</p>



<a name="164244567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244567">(Apr 26 2019 at 09:01)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> can't you use a separate flag for the manual stuff?</p>



<a name="164244576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244576">(Apr 26 2019 at 09:01)</a>:</h4>
<p><code>-Z self-profile-bundle</code></p>



<a name="164244588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244588" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244588">(Apr 26 2019 at 09:01)</a>:</h4>
<p>I suppose that's a possibility</p>



<a name="164244645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244645">(Apr 26 2019 at 09:02)</a>:</h4>
<p><span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164244666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244666">(Apr 26 2019 at 09:02)</a>:</h4>
<p>(or make it <code>-Z self-profile-perf-lo</code> for the perf-lo version to improve ergonomics ;)</p>



<a name="164244717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244717">(Apr 26 2019 at 09:03)</a>:</h4>
<p>I mean I'd also want a single file when using it locally</p>



<a name="164244792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244792">(Apr 26 2019 at 09:04)</a>:</h4>
<p><span class="user-mention" data-user-id="218683">@Alice Ryhl</span> that's what I thought also</p>



<a name="164244808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244808">(Apr 26 2019 at 09:04)</a>:</h4>
<p>if perf.rl.o wants multiple files then it can do that in a different flag</p>



<a name="164244822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244822">(Apr 26 2019 at 09:04)</a>:</h4>
<p>I thought perf.rl.o specifically didn't want the three files because they were large</p>



<a name="164244850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244850">(Apr 26 2019 at 09:05)</a>:</h4>
<p>no idea... :D my main point is that a single file for manual is <em>nice</em></p>



<a name="164244872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244872">(Apr 26 2019 at 09:05)</a>:</h4>
<p>I guess my feeling right now is that <code>rustc</code> should just have the bare minimum support for this. We can provide a nice wrapper script that optimizes the workflow outside of <code>rustc</code> until we figure out and test that workflow before potentially pushing those changes back into <code>rustc</code>.</p>



<a name="164244954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244954">(Apr 26 2019 at 09:06)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> that sgtm; the end result in terms of UX seems to be the same so I can't say I care about impl details ^^</p>



<a name="164244967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244967">(Apr 26 2019 at 09:06)</a>:</h4>
<p>Ok cool <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164244984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244984">(Apr 26 2019 at 09:07)</a>:</h4>
<p>I mean I agree rustc should do as little as possible too. To get one file you might even just concat the files with some length bytes so you can split it again. I just think it seems a bit silly for rustc not to output in the format you'd use manually with the tools</p>



<a name="164244995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164244995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164244995">(Apr 26 2019 at 09:07)</a>:</h4>
<p>Although I guess a wrapper is fine too</p>



<a name="164262557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164262557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164262557">(Apr 26 2019 at 13:44)</a>:</h4>
<p><em>&lt;realizes that i need to read about these stages of compiler&gt;</em></p>



<a name="164268150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164268150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lokalmatador <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164268150">(Apr 26 2019 at 14:47)</a>:</h4>
<p>sorry for the late reply, jsut came home from work: as of planing to work on profiling polonius, I guess I'll also draw back on measureme - <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> recently suggested me to use that. could also provide feedback if wanted</p>



<a name="164272229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164272229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164272229">(Apr 26 2019 at 15:31)</a>:</h4>
<p>I'm trying to explain the columns. Can you check if this is correct and help with my TODOs?</p>
<ul>
<li>The <code>Item</code> column contains the name of the event.</li>
<li>The <code>Self time</code> column contains the total time used by events of this type.</li>
<li>
<p>The <code>% of total time</code> column contains how large a percentage <code>Self time</code> is of the<br>
   total runtime of the compiler.</p>
</li>
<li>
<p>The <code>Item count</code> column describes the number of times that event has occurred.</p>
</li>
<li>The <code>Cache hits</code> column displays TODO</li>
<li>
<p>The <code>Blocked time</code> is the amount of time this event spent while waiting on a different<br>
   thread. (Only happens with parallel queries enabled) (TODO is this true?) (TODO why is<br>
   it zero always?)</p>
</li>
<li>
<p>The <code>Incremental load time</code> is the time spent loading the result from the incremental<br>
   result cache instead of recomputing it from scratch. (TODO what is in that cache/maybe a link?) (TODO<br>
   why is it zero always?)</p>
</li>
</ul>



<a name="164272931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164272931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164272931">(Apr 26 2019 at 15:40)</a>:</h4>
<blockquote>
<p>Cache hits</p>
</blockquote>
<p>Once a query is executed, it's value is stored in memory in a cache so that if the same query is issued again, the result is simply copied from memory instead of recomputed. This is the number of times that happened. </p>
<blockquote>
<p>Blocked time</p>
</blockquote>
<p>Yes, this only happens when parallel queries are enabled in the compiler. They are currently disabled by default at build time but this might be changing in the near future. Since you probably have a compiler that has them disabled, these numbers are always 0.</p>
<blockquote>
<p>Incremental load time</p>
</blockquote>
<p>Not every query's results are persisted to disk. There is a whitelist of queries in the compiler for "important" queries where the cost of loading them from disk (the incremental artifacts in <code>/target/incremental</code>) is less than the cost of recomputing them from scratch. This number is 0 if we don't load anything from the incremental cache for that query. That can happen because the query isn't in the whitelist, the query's arguments have changed and the result in the cache is no longer valid, or because incremental isn't turned on.</p>



<a name="164272950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164272950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164272950">(Apr 26 2019 at 15:40)</a>:</h4>
<p>Your descriptions look correct <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164272989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164272989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164272989">(Apr 26 2019 at 15:41)</a>:</h4>
<p>Ahhhh, so Incremental load time is for incremental builds!</p>



<a name="164273000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273000">(Apr 26 2019 at 15:41)</a>:</h4>
<p>That makes sense</p>



<a name="164273039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273039">(Apr 26 2019 at 15:41)</a>:</h4>
<blockquote>
<p>here is a whitelist of queries in the compiler</p>
</blockquote>
<p>That code is here FYI <a href="https://github.com/rust-lang/rust/blob/597f432489f12a3f33419daa039ccef11a12c4fd/src/librustc/ty/query/plumbing.rs#L1278-L1293" target="_blank" title="https://github.com/rust-lang/rust/blob/597f432489f12a3f33419daa039ccef11a12c4fd/src/librustc/ty/query/plumbing.rs#L1278-L1293">https://github.com/rust-lang/rust/blob/597f432489f12a3f33419daa039ccef11a12c4fd/src/librustc/ty/query/plumbing.rs#L1278-L1293</a></p>



<a name="164273268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273268">(Apr 26 2019 at 15:44)</a>:</h4>
<p>When you say 'query', is this some specific terminology specific to rust, such as type inference or something like that?</p>



<a name="164273315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273315">(Apr 26 2019 at 15:45)</a>:</h4>
<p>Oh sorry</p>



<a name="164273319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273319">(Apr 26 2019 at 15:45)</a>:</h4>
<p>Yeah, there's a lot of rustc lingo</p>



<a name="164273351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273351">(Apr 26 2019 at 15:45)</a>:</h4>
<p>So it's a type inference query?</p>



<a name="164273405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273405">(Apr 26 2019 at 15:46)</a>:</h4>
<p>It's a bit more general than that</p>



<a name="164273437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273437">(Apr 26 2019 at 15:46)</a>:</h4>
<p>The compiler used to be pass based like many classically architected compilers. There was a parse phase and then the results of that would be type checked and then the results of that would feed into codegen.</p>



<a name="164273472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273472">(Apr 26 2019 at 15:47)</a>:</h4>
<p>Now, it's "on-demand" driven. So when a part of the compiler needs some piece of data, it creates a query for that. If the result of the query is already known, then that result is reused. Otherwise, that query is executed. Executing that query might trigger other queries and so on.</p>



<a name="164273481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273481">(Apr 26 2019 at 15:47)</a>:</h4>
<p>There's a lot more info in the rustc-guide about this <a href="https://rust-lang.github.io/rustc-guide/query.html" target="_blank" title="https://rust-lang.github.io/rustc-guide/query.html">https://rust-lang.github.io/rustc-guide/query.html</a></p>



<a name="164273557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273557">(Apr 26 2019 at 15:48)</a>:</h4>
<p>Well okay, take a look at what we have so far: <a href="https://github.com/Darksonn/measureme/tree/master/summarize" target="_blank" title="https://github.com/Darksonn/measureme/tree/master/summarize">https://github.com/Darksonn/measureme/tree/master/summarize</a></p>



<a name="164273567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273567">(Apr 26 2019 at 15:48)</a>:</h4>
<p>The query system is what makes incremental compilation work.</p>



<a name="164273595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273595">(Apr 26 2019 at 15:49)</a>:</h4>
<p>So I assume 'Incremental load time' can be thought of as 'Cache hits' but from disk</p>



<a name="164273619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273619">(Apr 26 2019 at 15:49)</a>:</h4>
<p>Yes, exactly!</p>



<a name="164273794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273794">(Apr 26 2019 at 15:52)</a>:</h4>
<p>Well okay, since the filtering flag isn't provided yet, I'll delete that section for now</p>



<a name="164273821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273821">(Apr 26 2019 at 15:52)</a>:</h4>
<p>Any other sections we would want?</p>



<a name="164273955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273955">(Apr 26 2019 at 15:54)</a>:</h4>
<p>The filtering flag merged last week I believe so it should be available. I don't think we need to mention in this guide though.</p>



<a name="164273980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164273980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164273980">(Apr 26 2019 at 15:55)</a>:</h4>
<p>(still reading)</p>



<a name="164274109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274109">(Apr 26 2019 at 15:56)</a>:</h4>
<p>Oh sorry, you mean the percent filtering</p>



<a name="164274111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274111">(Apr 26 2019 at 15:56)</a>:</h4>
<p>nvm</p>



<a name="164274231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274231">(Apr 26 2019 at 15:58)</a>:</h4>
<p>I left a few review comments but this looks awesome!</p>



<a name="164274283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274283">(Apr 26 2019 at 15:58)</a>:</h4>
<p>Yeah I'll incorporate them shortly</p>



<a name="164274337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274337">(Apr 26 2019 at 15:59)</a>:</h4>
<p>This looks ready for a PR to me</p>



<a name="164274349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274349">(Apr 26 2019 at 15:59)</a>:</h4>
<p>Sure</p>



<a name="164274409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274409">(Apr 26 2019 at 16:00)</a>:</h4>
<p>I'll delete the Using summarize section and PR it?</p>



<a name="164274443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274443">(Apr 26 2019 at 16:00)</a>:</h4>
<p>I mean there's the <code>--json</code> flag, but maybe just wait with that for other flags to be added</p>



<a name="164274646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164274646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164274646">(Apr 26 2019 at 16:03)</a>:</h4>
<p>Should i PR it in a single commit, or add an extra commit so your comments stay in the history?</p>



<a name="164275557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164275557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164275557">(Apr 26 2019 at 16:16)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span></p>



<a name="164275958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164275958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164275958">(Apr 26 2019 at 16:22)</a>:</h4>
<p>I'm going to badminton. I'll just make a PR with a single commit.</p>



<a name="164276048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164276048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164276048">(Apr 26 2019 at 16:23)</a>:</h4>
<p><a href="https://github.com/rust-lang/measureme/pull/35" target="_blank" title="https://github.com/rust-lang/measureme/pull/35">https://github.com/rust-lang/measureme/pull/35</a></p>



<a name="164279123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164279123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164279123">(Apr 26 2019 at 17:05)</a>:</h4>
<p>Sorry, was afk</p>



<a name="164279143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164279143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164279143">(Apr 26 2019 at 17:05)</a>:</h4>
<p>Single commit is fine. Whatever is easier for you</p>



<a name="164279154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164279154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164279154">(Apr 26 2019 at 17:05)</a>:</h4>
<p>Yeah, I'd just remove the Using section for now</p>



<a name="164280184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164280184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164280184">(Apr 26 2019 at 17:20)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="218647">@Amanjeev Sethi</span> <span class="user-mention" data-user-id="218683">@Alice Ryhl</span>'s PR is ready to try out.</p>
<p><a href="https://github.com/rust-lang/measureme/pull/35" target="_blank" title="https://github.com/rust-lang/measureme/pull/35">https://github.com/rust-lang/measureme/pull/35</a></p>



<a name="164280380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164280380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164280380">(Apr 26 2019 at 17:23)</a>:</h4>
<p>Great will try to get to it asap.</p>



<a name="164280534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164280534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164280534">(Apr 26 2019 at 17:25)</a>:</h4>
<p>Thanks! <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164281719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164281719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164281719">(Apr 26 2019 at 17:38)</a>:</h4>
<p>Sorry I should have asked here, is it ok to comment on the PR? Or would you rather have me ask things here? <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> <span class="user-mention" data-user-id="218683">@Alice Ryhl</span></p>



<a name="164281811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164281811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164281811">(Apr 26 2019 at 17:39)</a>:</h4>
<p>It will probably be easier to process feedback if you put it on the PR</p>



<a name="164281816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164281816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164281816">(Apr 26 2019 at 17:39)</a>:</h4>
<p>But no strong preference</p>



<a name="164282379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164282379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164282379">(Apr 26 2019 at 17:45)</a>:</h4>
<p>Thanks! I am currently building <code>rustc</code>. I went through the doc for this exercise and it was easy read so thank you <span class="user-mention" data-user-id="218683">@Alice Ryhl</span>  <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> </p>
<p>Just for my clarity -- this is about profiling the compiler itself by compiling a crate (any crate). Right?</p>



<a name="164282533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164282533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164282533">(Apr 26 2019 at 17:47)</a>:</h4>
<p>Correct!</p>



<a name="164282651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164282651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164282651">(Apr 26 2019 at 17:49)</a>:</h4>
<p>lol this stream is called "self-profile". Sorry I think I am having Zulip overload. It is hard to navigate this for me for some reason.</p>



<a name="164284974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164284974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164284974">(Apr 26 2019 at 18:13)</a>:</h4>
<p>Still compiling. <span aria-label="speechless" class="emoji emoji-1f636" role="img" title="speechless">:speechless:</span></p>



<a name="164285052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164285052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164285052">(Apr 26 2019 at 18:14)</a>:</h4>
<p>Yeah, it takes a long time especially the first time when you have to build llvm</p>



<a name="164288845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164288845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164288845">(Apr 26 2019 at 19:00)</a>:</h4>
<p><del>Is <code>stage0</code> toolchain ok? </del> apparently <code>stage0</code> failed with error <code>error: the option </code>Z<code> is only accepted on the nightly compiler</code>. <code>stage1</code> works.</p>



<a name="164289318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164289318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164289318">(Apr 26 2019 at 19:07)</a>:</h4>
<p>ok I was able to do this easily. I have a couple of questions I have added to <a href="https://github.com/rust-lang/measureme/pull/35#pullrequestreview-231277668" target="_blank" title="https://github.com/rust-lang/measureme/pull/35#pullrequestreview-231277668">https://github.com/rust-lang/measureme/pull/35#pullrequestreview-231277668</a>. cc/ <span class="user-mention" data-user-id="218683">@Alice Ryhl</span></p>



<a name="164289411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164289411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164289411">(Apr 26 2019 at 19:08)</a>:</h4>
<p>I approved it. <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164289443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164289443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164289443">(Apr 26 2019 at 19:09)</a>:</h4>
<p>FYI, the <code>stage0</code> compiler is the current stable Rust compiler</p>



<a name="164289450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164289450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164289450">(Apr 26 2019 at 19:09)</a>:</h4>
<p>So it doesn't accept <code>-Z</code> options</p>



<a name="164289514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164289514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164289514">(Apr 26 2019 at 19:10)</a>:</h4>
<p><code>stage1</code> is the first compiler that gets built which has any local changes you've made</p>



<a name="164291785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164291785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164291785">(Apr 26 2019 at 19:40)</a>:</h4>
<p>Hey I'm back</p>



<a name="164292047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292047">(Apr 26 2019 at 19:44)</a>:</h4>
<p><span aria-label="hi" class="emoji emoji-1f44b" role="img" title="hi">:hi:</span></p>



<a name="164292098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292098">(Apr 26 2019 at 19:45)</a>:</h4>
<p>Let's merge the PR! ? :D</p>



<a name="164292121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292121">(Apr 26 2019 at 19:45)</a>:</h4>
<p>We're still waiting for michaelwoerister to review it too</p>



<a name="164292151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292151">(Apr 26 2019 at 19:46)</a>:</h4>
<p>Oh sorry</p>



<a name="164292198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292198">(Apr 26 2019 at 19:46)</a>:</h4>
<p>There's also the other tool <code>stack_collapse</code></p>



<a name="164292252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292252">(Apr 26 2019 at 19:47)</a>:</h4>
<p>Does it also need docs? Or perhaps you want to wait for a bit more progress to be made on flame graphs</p>



<a name="164292343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292343">(Apr 26 2019 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> doesn't usually review on the weekends so I think they'll probably get to it on Monday.</p>



<a name="164292358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292358">(Apr 26 2019 at 19:48)</a>:</h4>
<p>Sure</p>



<a name="164292367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292367">(Apr 26 2019 at 19:48)</a>:</h4>
<p>Perhaps the top-level readme could use some love too</p>



<a name="164292368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292368">(Apr 26 2019 at 19:48)</a>:</h4>
<p>If you want to write docs for it, go for it!</p>



<a name="164292381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292381">(Apr 26 2019 at 19:49)</a>:</h4>
<p>That's an idea too</p>



<a name="164292394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292394">(Apr 26 2019 at 19:49)</a>:</h4>
<p>I'd love to have a section with "here's what this crate does" and "here's the tools we have you can use"</p>



<a name="164292403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292403">(Apr 26 2019 at 19:49)</a>:</h4>
<p>With links to the tool's readme's</p>



<a name="164292412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292412">(Apr 26 2019 at 19:49)</a>:</h4>
<p>Sure</p>



<a name="164292413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292413">(Apr 26 2019 at 19:49)</a>:</h4>
<p>And maybe some pretty pictures or a gif</p>



<a name="164292421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292421">(Apr 26 2019 at 19:50)</a>:</h4>
<p>Well pretty pictures sounds like the job of flame graphs!</p>



<a name="164292488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292488">(Apr 26 2019 at 19:50)</a>:</h4>
<p>There's this too <a href="https://github.com/rust-lang/measureme/pull/34" target="_blank" title="https://github.com/rust-lang/measureme/pull/34">https://github.com/rust-lang/measureme/pull/34</a> :p</p>



<a name="164292504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292504">(Apr 26 2019 at 19:50)</a>:</h4>
<p>Yeah that's why I commented we might want to wait a bit</p>



<a name="164292536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292536">(Apr 26 2019 at 19:51)</a>:</h4>
<p>or maybe it wont change much, I dunno</p>



<a name="164292587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292587">(Apr 26 2019 at 19:51)</a>:</h4>
<p>Probably what we want to do is evolve the docs you've written to be a bit more general: here's how to do a profile of rustc, now here's all the tools you can play with</p>



<a name="164292681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292681">(Apr 26 2019 at 19:52)</a>:</h4>
<p>Yeah</p>



<a name="164292706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292706">(Apr 26 2019 at 19:52)</a>:</h4>
<p>I also remember someone mentioning profiling compilation of single files</p>



<a name="164292721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292721">(Apr 26 2019 at 19:52)</a>:</h4>
<p>Oh, yes</p>



<a name="164292763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292763">(Apr 26 2019 at 19:53)</a>:</h4>
<p>That's very simple. Instead of doing <code>cargo +toolchain rustc -- -Z self-profile</code>, you just do <code>rustc +toolchain -Z self-profile file.rs</code></p>



<a name="164292818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292818">(Apr 26 2019 at 19:53)</a>:</h4>
<p>what about <code>cargo +toolchain rustc -- -Z self-profile file.rs</code></p>



<a name="164292828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292828">(Apr 26 2019 at 19:53)</a>:</h4>
<p>If you want something to work on other than docs, there's also issues <a href="https://github.com/rust-lang/rust/issues/31" target="_blank" title="https://github.com/rust-lang/rust/issues/31">#31</a>, <a href="https://github.com/rust-lang/rust/issues/32" target="_blank" title="https://github.com/rust-lang/rust/issues/32">#32</a>, and <a href="https://github.com/rust-lang/rust/issues/33" target="_blank" title="https://github.com/rust-lang/rust/issues/33">#33</a> that could be worked on.</p>



<a name="164292832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292832">(Apr 26 2019 at 19:54)</a>:</h4>
<p>I'm not super familiar with the <code>cargo rustc</code> invocation</p>



<a name="164292880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292880">(Apr 26 2019 at 19:54)</a>:</h4>
<p>Cargo assumes you have a project basically</p>



<a name="164292890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292890">(Apr 26 2019 at 19:54)</a>:</h4>
<p><code>cargo build</code> and <code>cargo rustc</code> do the same thing</p>



<a name="164292896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292896">(Apr 26 2019 at 19:54)</a>:</h4>
<p>fair</p>



<a name="164292904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292904">(Apr 26 2019 at 19:54)</a>:</h4>
<p>but <code>cargo rustc</code> lets you also pass additional flags to the compiler</p>



<a name="164292919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292919">(Apr 26 2019 at 19:54)</a>:</h4>
<p>I think your links went to the wrong repo</p>



<a name="164292962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292962">(Apr 26 2019 at 19:55)</a>:</h4>
<p>You can't do <code>cargo rustc -- file.rs</code> because the compiler will get an invocation that says to build your project and also that file. Which doesn't make any sense</p>



<a name="164292980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292980">(Apr 26 2019 at 19:55)</a>:</h4>
<p>Oh, hmm. Looks like they all go to rust-lang/rust by default. I wonder if that can be changed</p>



<a name="164292994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164292994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164292994">(Apr 26 2019 at 19:55)</a>:</h4>
<p>Well you can manually fix it with a markdown link</p>



<a name="164293001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293001">(Apr 26 2019 at 19:55)</a>:</h4>
<ul>
<li>
<p><a href="https://github.com/rust-lang/measureme/issues/31" target="_blank" title="https://github.com/rust-lang/measureme/issues/31">https://github.com/rust-lang/measureme/issues/31</a></p>
</li>
<li>
<p><a href="https://github.com/rust-lang/measureme/issues/32" target="_blank" title="https://github.com/rust-lang/measureme/issues/32">https://github.com/rust-lang/measureme/issues/32</a></p>
</li>
<li>
<p><a href="https://github.com/rust-lang/measureme/issues/33" target="_blank" title="https://github.com/rust-lang/measureme/issues/33">https://github.com/rust-lang/measureme/issues/33</a></p>
</li>
</ul>



<a name="164293113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293113">(Apr 26 2019 at 19:57)</a>:</h4>
<p>I guess 31 is not really our issue but it does affect us.</p>



<a name="164293178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293178">(Apr 26 2019 at 19:58)</a>:</h4>
<p>I have a number of other tasks in my head that could potentially also be worked on as well. If there's interest, I'll take some time this weekend and write them out.</p>



<a name="164293232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293232">(Apr 26 2019 at 19:59)</a>:</h4>
<p>I'm happy to do some coding too :)</p>



<a name="164293263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293263">(Apr 26 2019 at 19:59)</a>:</h4>
<p>It's totally up to you. It's your time after all <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="164293401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293401">(Apr 26 2019 at 20:01)</a>:</h4>
<p>heh, well I've been wanting to do something on rust for a long time, so it's nice to find a nice isolated-ish piece of code that's easy to start with</p>



<a name="164293427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293427">(Apr 26 2019 at 20:01)</a>:</h4>
<p>Ok cool!</p>



<a name="164293449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293449">(Apr 26 2019 at 20:01)</a>:</h4>
<p>Do any of those tasks interest you? Or do you have something else in mind?</p>



<a name="164293501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293501">(Apr 26 2019 at 20:02)</a>:</h4>
<p>Well I think I could do the diff one</p>



<a name="164293555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293555">(Apr 26 2019 at 20:03)</a>:</h4>
<p>Ok. Let me know if you have any questions or need help.</p>



<a name="164293578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293578">(Apr 26 2019 at 20:03)</a>:</h4>
<p>You can ping me here or leave github comments on the issue</p>



<a name="164293637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293637">(Apr 26 2019 at 20:04)</a>:</h4>
<p>I'd also recommend commenting on that issue to say that you're working on it.</p>



<a name="164293641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293641">(Apr 26 2019 at 20:04)</a>:</h4>
<p>Sure, but it seems relatively straight forward</p>



<a name="164293644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293644">(Apr 26 2019 at 20:04)</a>:</h4>
<p>I'll do that</p>



<a name="164293666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293666">(Apr 26 2019 at 20:04)</a>:</h4>
<p>Great!</p>



<a name="164293670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164293670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164293670">(Apr 26 2019 at 20:04)</a>:</h4>
<p>Have fun</p>



<a name="164294374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164294374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164294374">(Apr 26 2019 at 20:14)</a>:</h4>
<p>I also posted the panic when piped issue to the prettytable repo</p>



<a name="164294464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164294464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164294464">(Apr 26 2019 at 20:15)</a>:</h4>
<p>Thanks</p>



<a name="164309386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164309386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164309386">(Apr 27 2019 at 00:49)</a>:</h4>
<blockquote>
<ul>
<li><a href="https://github.com/rust-lang/measureme/issues/32" target="_blank" title="https://github.com/rust-lang/measureme/issues/32">https://github.com/rust-lang/measureme/issues/32</a></li>
</ul>
</blockquote>
<p>Can I try <a href="https://github.com/rust-lang/rust/issues/32" target="_blank" title="https://github.com/rust-lang/rust/issues/32">#32</a>? It seems to me that it is about adding an optional cli argument to the <code>summarize</code> so it prunes the table. <span class="user-mention" data-user-id="218683">@Alice Ryhl</span>  you can say no given it was opened by you so I am not sure if you are going to work on it yourself). <span aria-label="smile" class="emoji emoji-263a" role="img" title="smile">:smile:</span></p>



<a name="164321905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164321905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Ryhl <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164321905">(Apr 27 2019 at 06:56)</a>:</h4>
<p><span class="user-mention" data-user-id="218647">@Amanjeev Sethi</span> go ahead!</p>



<a name="164354686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164354686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amanjeev <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164354686">(Apr 27 2019 at 21:36)</a>:</h4>
<p>So I tried <a href="https://github.com/rust-lang/measureme/pull/36" target="_blank" title="https://github.com/rust-lang/measureme/pull/36">https://github.com/rust-lang/measureme/pull/36</a>. Please review.</p>



<a name="164392742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/Docs/near/164392742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/Docs.html#164392742">(Apr 28 2019 at 15:25)</a>:</h4>
<p>Reviewed. Thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>postprocessing costs and file sizes · t-compiler/wg-self-profile · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/index.html">t-compiler/wg-self-profile</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html">postprocessing costs and file sizes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="166269962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166269962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166269962">(May 22 2019 at 14:01)</a>:</h4>
<p>I did some testing with the latest versions of compiler and <code>summarize</code></p>



<a name="166270050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270050">(May 22 2019 at 14:02)</a>:</h4>
<p>for style-servo, the <code>events</code> file is ~140 megabytes</p>



<a name="166270081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270081">(May 22 2019 at 14:02)</a>:</h4>
<p>running summarize on it takes 0.65 seconds on my machine</p>



<a name="166270532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270532">(May 22 2019 at 14:07)</a>:</h4>
<p>Cool!</p>



<a name="166270552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270552">(May 22 2019 at 14:07)</a>:</h4>
<p>I wonder if there's any value in compressing the events file?</p>



<a name="166270554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270554">(May 22 2019 at 14:07)</a>:</h4>
<p>yeah, seems pretty reasonable</p>



<a name="166270595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270595">(May 22 2019 at 14:08)</a>:</h4>
<p>depends on whether you want to store it somewhere, I'd say</p>



<a name="166270643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270643">(May 22 2019 at 14:08)</a>:</h4>
<p>at the moment, the plan is not to store it, right?</p>



<a name="166270674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270674">(May 22 2019 at 14:08)</a>:</h4>
<p>For perf.rlo?</p>



<a name="166270678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270678">(May 22 2019 at 14:08)</a>:</h4>
<p>yes</p>



<a name="166270684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270684">(May 22 2019 at 14:08)</a>:</h4>
<p>No, I don't believe we're going to store it beyond the time required to process it</p>



<a name="166270716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270716">(May 22 2019 at 14:09)</a>:</h4>
<p>another question would be when to compress it</p>



<a name="166270747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270747">(May 22 2019 at 14:09)</a>:</h4>
<p>i.e. we don't want to do that in the rustc process</p>



<a name="166270777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270777">(May 22 2019 at 14:09)</a>:</h4>
<p>because we are going to great lengths to keep the overhead low already</p>



<a name="166270883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270883">(May 22 2019 at 14:10)</a>:</h4>
<p>Yeah, that's true</p>



<a name="166270976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166270976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166270976">(May 22 2019 at 14:11)</a>:</h4>
<p>I seem to recall reading somewhere about a Linux filesystem that always compresses data using a really simple algorithm (zlib maybe?). The reason being that the CPU cost to compress the data was less than the cost of reading/writing more data off disk</p>



<a name="166271013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271013">(May 22 2019 at 14:11)</a>:</h4>
<p>But since we're writing the data async with mmap, it probably doesn't pay off for us</p>



<a name="166271193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271193">(May 22 2019 at 14:13)</a>:</h4>
<p>I think ZFS has the option of lz4 compressing data natively</p>



<a name="166271445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271445">(May 22 2019 at 14:15)</a>:</h4>
<p>Ah, yes that's probably what I'm thinking of <a href="https://blogs.oracle.com/solaris/zfs-compression-a-win-win-v2" target="_blank" title="https://blogs.oracle.com/solaris/zfs-compression-a-win-win-v2">https://blogs.oracle.com/solaris/zfs-compression-a-win-win-v2</a></p>



<a name="166271517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271517">(May 22 2019 at 14:16)</a>:</h4>
<p>But since we don't wait for the writes to happen or read the data back in process, it probably won't pay off for us</p>



<a name="166271581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271581">(May 22 2019 at 14:16)</a>:</h4>
<p>yeah</p>



<a name="166271634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271634">(May 22 2019 at 14:17)</a>:</h4>
<p>we would need to experiment but I'd like to keep it simple if possible</p>



<a name="166271717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271717">(May 22 2019 at 14:18)</a>:</h4>
<p>so <code>stackcollapse</code> is even faster than <code>summarize</code>: 0.48 secs</p>



<a name="166271724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271724">(May 22 2019 at 14:18)</a>:</h4>
<p>If we did want to keep the files around, we could definitely compress them after the perf run. I've seen pretty significant space reductions just from the native compression tool in macOS</p>



<a name="166271748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271748">(May 22 2019 at 14:18)</a>:</h4>
<p><code>crox</code> is slower but still acceptable: 3.14 secs</p>



<a name="166271769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271769">(May 22 2019 at 14:18)</a>:</h4>
<p>yes, compressing the file gives me:</p>



<a name="166271802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271802">(May 22 2019 at 14:19)</a>:</h4>
<p>lz4: 41 MB</p>



<a name="166271821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271821">(May 22 2019 at 14:19)</a>:</h4>
<p>gzip: 22.4 MB</p>



<a name="166271823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271823">(May 22 2019 at 14:19)</a>:</h4>
<p>I think this will likely improve <code>crox</code> speed <a href="https://github.com/rust-lang/measureme/issues/47" target="_blank" title="https://github.com/rust-lang/measureme/issues/47">https://github.com/rust-lang/measureme/issues/47</a></p>



<a name="166271834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271834">(May 22 2019 at 14:19)</a>:</h4>
<p>xz: 15.4 MB</p>



<a name="166271839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271839">(May 22 2019 at 14:19)</a>:</h4>
<p>And cut the output file size by half</p>



<a name="166271925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271925">(May 22 2019 at 14:20)</a>:</h4>
<p>yes, I also suspect that most of the time is spent generating the string data</p>



<a name="166271937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166271937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166271937">(May 22 2019 at 14:20)</a>:</h4>
<p>since summarize also looks at all the data, but is much faster</p>



<a name="166272103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272103">(May 22 2019 at 14:22)</a>:</h4>
<p>one thing I noticed here: having only the PID, but not the crate name in the file name is annoying</p>



<a name="166272134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272134" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272134">(May 22 2019 at 14:22)</a>:</h4>
<p>I've been generating events for all crates in the crate graph</p>



<a name="166272136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272136">(May 22 2019 at 14:22)</a>:</h4>
<p>Yeah, there's likely some low hanging fruit in optimizing most of the processing tools</p>



<a name="166272143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272143">(May 22 2019 at 14:22)</a>:</h4>
<p>I haven't done any profiling of any of them</p>



<a name="166272203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272203">(May 22 2019 at 14:23)</a>:</h4>
<p>wow, the crox output is 550 MB <code>:)</code></p>



<a name="166272214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272214">(May 22 2019 at 14:23)</a>:</h4>
<p>That's probably going to break Chrome lol</p>



<a name="166272238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272238">(May 22 2019 at 14:23)</a>:</h4>
<p>At a certain point, the Chrome dev tool just gives up and doesn't display anything.</p>



<a name="166272308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272308">(May 22 2019 at 14:24)</a>:</h4>
<p>There's an internal Chrome tool which handles large files better but the UI is a bit clunky</p>



<a name="166272628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272628">(May 22 2019 at 14:27)</a>:</h4>
<p>yeah...</p>



<a name="166272675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272675">(May 22 2019 at 14:27)</a>:</h4>
<p>I'd say it is unlikely that we generate the Chrome profiling data eagerly for each perf run</p>



<a name="166272740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272740">(May 22 2019 at 14:28)</a>:</h4>
<p>given how big the files are</p>



<a name="166272817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272817">(May 22 2019 at 14:29)</a>:</h4>
<p>Yeah even relatively small crates like regex generate large files</p>



<a name="166272939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166272939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166272939">(May 22 2019 at 14:30)</a>:</h4>
<p>(I believe chrome://tracing is the internal tool I'm thinking of but I don't have a profiler file handy to test)</p>



<a name="166273027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273027">(May 22 2019 at 14:31)</a>:</h4>
<p>The Firefox format looks like it scales much better to me but I haven't had a chance to play around with it</p>



<a name="166273050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273050">(May 22 2019 at 14:32)</a>:</h4>
<p>yeah</p>



<a name="166273127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273127">(May 22 2019 at 14:32)</a>:</h4>
<p>well, not a priority for the MVP anyway, I'd say</p>



<a name="166273178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273178">(May 22 2019 at 14:32)</a>:</h4>
<p>are you working on something?</p>



<a name="166273186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273186">(May 22 2019 at 14:33)</a>:</h4>
<p>It's been a busy week for me but I think I'll have time over the next few days to work on getting perf.rlo to run <code>-Z self-profile</code> as we discussed</p>



<a name="166273240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273240">(May 22 2019 at 14:33)</a>:</h4>
<p>cool, I'll look into adding a path argument to -Zself-profile</p>



<a name="166273257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273257">(May 22 2019 at 14:33)</a>:</h4>
<p>if that doesn't clash with what you're doing</p>



<a name="166273273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273273">(May 22 2019 at 14:33)</a>:</h4>
<p>Nope!</p>



<a name="166273346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273346">(May 22 2019 at 14:34)</a>:</h4>
<p>alright</p>



<a name="166273357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166273357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166273357">(May 22 2019 at 14:34)</a>:</h4>
<p>That should be easy to tweak later</p>



<a name="166504455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166504455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166504455">(May 25 2019 at 02:00)</a>:</h4>
<p>Ok, so I've modified rustc-perf to run with <code>-Z self-profile</code> and dump all of the files in a folder. Executing a full perf run results in ~1400 files totaling 4.4 gb. Note: these are the raw profile files, not processed results file. </p>
<p>cc <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="166601134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601134" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601134">(May 27 2019 at 01:27)</a>:</h4>
<p>seems.. reasonable?</p>



<a name="166601191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601191">(May 27 2019 at 01:29)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> We'll probably want to process the data -- if you get the bit of code which correctly finds/loads the selected crate's into measureme that'd be a good start</p>



<a name="166601193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601193">(May 27 2019 at 01:29)</a>:</h4>
<p>I'm not sure how that should be done though</p>



<a name="166601250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601250">(May 27 2019 at 01:30)</a>:</h4>
<p>Did we decide which results we should keep? Should I just keep the first iteration's results for now?</p>



<a name="166601253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601253">(May 27 2019 at 01:30)</a>:</h4>
<p>yeah</p>



<a name="166601264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601264">(May 27 2019 at 01:31)</a>:</h4>
<p>we wanted some form of "aggregation" but that's not really the MVP</p>



<a name="166601275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601275">(May 27 2019 at 01:31)</a>:</h4>
<p>Yeah</p>



<a name="166601325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601325">(May 27 2019 at 01:32)</a>:</h4>
<p>I'll just take the first one for now unless there's any objections</p>



<a name="166601334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601334">(May 27 2019 at 01:33)</a>:</h4>
<p>sure seems fine -- I imagine it's just a call to <code>first</code> or something like that at a relatively top-level place</p>



<a name="166601345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601345">(May 27 2019 at 01:33)</a>:</h4>
<p>I would try to avoid making that decision in a lowlevel place if possible to make it easier to aggregate later (i.e., keep all the data around for now, right up until the end)</p>



<a name="166601346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601346">(May 27 2019 at 01:33)</a>:</h4>
<p>but it's not critical that happens so don't worry about it if its hard</p>



<a name="166601402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601402">(May 27 2019 at 01:34)</a>:</h4>
<p>Got it</p>



<a name="166601403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166601403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166601403">(May 27 2019 at 01:34)</a>:</h4>
<p>Thanks!</p>



<a name="166989661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166989661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166989661">(May 31 2019 at 11:45)</a>:</h4>
<p>Can I assume that the measureme tools are going to be installed in a specific folder? Or available on the path?</p>



<a name="166989664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/166989664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#166989664">(May 31 2019 at 11:45)</a>:</h4>
<p>Basically, how do I know where to look to call the processing tools?</p>



<a name="167329159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329159">(Jun 04 2019 at 19:38)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> Do you have any suggestions about how to call the tools?</p>



<a name="167329228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329228">(Jun 04 2019 at 19:39)</a>:</h4>
<p>hm, so there was some discussion about inclusion into the sysroot, but that seems far off</p>



<a name="167329292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329292">(Jun 04 2019 at 19:40)</a>:</h4>
<p>do we expect to need multiple versions or will latest version pretty much work?</p>



<a name="167329312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329312">(Jun 04 2019 at 19:40)</a>:</h4>
<p>I think at this point, we should just expect the latest version to work</p>



<a name="167329341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329341">(Jun 04 2019 at 19:40)</a>:</h4>
<p>Of course, how we get the latest version is another question</p>



<a name="167329357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329357">(Jun 04 2019 at 19:41)</a>:</h4>
<p>But a recent-ish version should be fine</p>



<a name="167329377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329377">(Jun 04 2019 at 19:41)</a>:</h4>
<p>let's just assume it's installed somewhere in PATH</p>



<a name="167329385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329385">(Jun 04 2019 at 19:41)</a>:</h4>
<p>Ok</p>



<a name="167329388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329388">(Jun 04 2019 at 19:41)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="167329391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329391">(Jun 04 2019 at 19:41)</a>:</h4>
<p>(Same as we do for perf, valgrind, other tools)</p>



<a name="167329417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329417">(Jun 04 2019 at 19:41)</a>:</h4>
<p>I guess there's a server somewhere you ssh into and install stuff as needed?</p>



<a name="167329437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329437">(Jun 04 2019 at 19:41)</a>:</h4>
<p>and then add to the benchmarking readme (IIRC, collector/README, or collector/benchmarks/README) some text about installing measureme</p>



<a name="167329493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329493">(Jun 04 2019 at 19:42)</a>:</h4>
<p>Yeah, we have two -- collection and site -- I presume the tools are needed on collection?</p>



<a name="167329523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329523">(Jun 04 2019 at 19:42)</a>:</h4>
<p>Yeah</p>



<a name="167329584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329584">(Jun 04 2019 at 19:43)</a>:</h4>
<p>yeah, I'll be able to install them (can even stick a cargo install -f measureme in the script so that it reinstalls latest version every runthrough)</p>



<a name="167329680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329680">(Jun 04 2019 at 19:44)</a>:</h4>
<p>Perfect</p>



<a name="167329685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/postprocessing%20costs%20and%20file%20sizes/near/167329685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/postprocessing.20costs.20and.20file.20sizes.html#167329685">(Jun 04 2019 at 19:44)</a>:</h4>
<p>Thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
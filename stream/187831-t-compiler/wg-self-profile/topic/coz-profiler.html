<html>
<head><meta charset="utf-8"><title>coz-profiler · t-compiler/wg-self-profile · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/index.html">t-compiler/wg-self-profile</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html">coz-profiler</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="175829199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/175829199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#175829199">(Sep 16 2019 at 16:35)</a>:</h4>
<p>Hi all! This might've been covered beforehand/be redundant, but a talk at last week's Strangeloop (<a href="https://www.youtube.com/watch?v=r-TLSBdHe1A" target="_blank" title="https://www.youtube.com/watch?v=r-TLSBdHe1A">https://www.youtube.com/watch?v=r-TLSBdHe1A</a>) covered <a href="https://github.com/plasma-umass/coz" target="_blank" title="https://github.com/plasma-umass/coz">coz-profiler</a> (<a href="https://www.youtube.com/watch?v=r-TLSBdHe1A" target="_blank" title="https://www.youtube.com/watch?v=r-TLSBdHe1A">https://www.youtube.com/watch?v=r-TLSBdHe1A</a> that's kinda magical—it finds and predicts what sort of optimizations would be useful, and how much of a throughput/latency increase it would provide. it could provide some useful measurements on rustc (but I suspect y'all might already have that data!)</p>
<div class="youtube-video message_inline_image"><a data-id="r-TLSBdHe1A" href="https://www.youtube.com/watch?v=r-TLSBdHe1A" target="_blank" title="https://www.youtube.com/watch?v=r-TLSBdHe1A"><img src="https://i.ytimg.com/vi/r-TLSBdHe1A/default.jpg"></a></div>



<a name="175829254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/175829254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#175829254">(Sep 16 2019 at 16:36)</a>:</h4>
<p>it will likely need to be bindgen'd to work with Rust, but the author/presenter said that it should work with Rust with suprisingly little effort</p>



<a name="175829489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/175829489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#175829489">(Sep 16 2019 at 16:38)</a>:</h4>
<p>Wow, that's interesting! It seems very related to this open issue we have: <a href="https://github.com/rust-lang/measureme/issues/39" target="_blank" title="https://github.com/rust-lang/measureme/issues/39">https://github.com/rust-lang/measureme/issues/39</a></p>



<a name="175830825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/175830825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#175830825">(Sep 16 2019 at 16:56)</a>:</h4>
<p>I think coz fits the bill for this, then!</p>



<a name="175831235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/175831235" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#175831235">(Sep 16 2019 at 17:01)</a>:</h4>
<p>Commented on the issue: <a href="https://github.com/rust-lang/measureme/issues/39#issuecomment-531865442" target="_blank" title="https://github.com/rust-lang/measureme/issues/39#issuecomment-531865442">https://github.com/rust-lang/measureme/issues/39#issuecomment-531865442</a></p>



<a name="214441106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/214441106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emerent <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#214441106">(Oct 24 2020 at 18:08)</a>:</h4>
<p>Has anyone successfully used coz for a Rust project? If so, how?<br>
This blog post by llogiq is the only thing I've found and he couldn't get it to run either: <a href="https://llogiq.github.io/2019/09/25/coz.html">https://llogiq.github.io/2019/09/25/coz.html</a></p>
<p>Personally, I haven't been able to get it to run even for the project's own C benchmarks.</p>



<a name="214443925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/214443925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#214443925">(Oct 24 2020 at 19:07)</a>:</h4>
<p>What is the problem? You may need a newer version of libelfin (I think it was called that)</p>



<a name="214446761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler/near/214446761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emerent <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/coz-profiler.html#214446761">(Oct 24 2020 at 20:06)</a>:</h4>
<p>Yeah, apparently I still had the incompatible apt installed libraries lying around after uninstalling libelfin-dev which were then picked up instead of the up to date ones I compiled from source.<br>
I managed to get some profiles for my toy example in Rust, after switching on debug symbols and removing <code>crunchy::unroll!{}</code>. The latter caused coz to think all samples were collected in one line for some reason.<br>
Still have to get it to run under WSL2.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
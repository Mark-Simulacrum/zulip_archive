<html>
<head><meta charset="utf-8"><title>`codegen_crate_metadata` event does not show up on perf.rlo · t-compiler/wg-self-profile · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/index.html">t-compiler/wg-self-profile</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html">`codegen_crate_metadata` event does not show up on perf.rlo</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="178964393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/178964393" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#178964393">(Oct 24 2019 at 15:35)</a>:</h4>
<p>E.g. here: <a href="https://perf.rust-lang.org/detailed-query.html?commit=4a8c5b20c7772bc5342b83d4b0696ea216ef75a7&amp;benchmark=regex-debug&amp;run_name=clean" target="_blank" title="https://perf.rust-lang.org/detailed-query.html?commit=4a8c5b20c7772bc5342b83d4b0696ea216ef75a7&amp;benchmark=regex-debug&amp;run_name=clean">https://perf.rust-lang.org/detailed-query.html?commit=4a8c5b20c7772bc5342b83d4b0696ea216ef75a7&amp;benchmark=regex-debug&amp;run_name=clean</a></p>



<a name="178964419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/178964419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#178964419">(Oct 24 2019 at 15:35)</a>:</h4>
<p>need to investigate if other events are missing too and why...</p>



<a name="178970993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/178970993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#178970993">(Oct 24 2019 at 16:38)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> are you sure that the events were added prior to that commit?</p>



<a name="178971014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/178971014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#178971014">(Oct 24 2019 at 16:38)</a>:</h4>
<p>we don't do anything special I think so if they're not in summarize output that would mean we don't see them</p>



<a name="179033120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/179033120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#179033120">(Oct 25 2019 at 09:01)</a>:</h4>
<p>I haven't investigated at all yet. I am pretty sure that the event is already part of that commit (because it was the newest on available). But maybe the event is in the wrong code path or something.</p>



<a name="179217092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/179217092" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#179217092">(Oct 28 2019 at 10:06)</a>:</h4>
<p>Turns out the event was just placed in a weird code path.</p>



<a name="179217107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/179217107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#179217107">(Oct 28 2019 at 10:06)</a>:</h4>
<p>I opened to <a href="https://github.com/rust-lang/rust/pull/65891" target="_blank" title="https://github.com/rust-lang/rust/pull/65891">https://github.com/rust-lang/rust/pull/65891</a> to fix this.</p>



<a name="179217199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/%60codegen_crate_metadata%60%20event%20does%20not%20show%20up%20on%20perf.rlo/near/179217199" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/187831-t-compiler/wg-self-profile/topic/.60codegen_crate_metadata.60.20event.20does.20not.20show.20up.20on.20perf.2Erlo.html#179217199">(Oct 28 2019 at 10:08)</a>:</h4>
<p>The naming and comments around <a href="https://github.com/rust-lang/rust/blob/61c451c51e1210a7d907f9919da8b0a08ff6915e/src/librustc_codegen_ssa/base.rs#L575-L593" target="_blank" title="https://github.com/rust-lang/rust/blob/61c451c51e1210a7d907f9919da8b0a08ff6915e/src/librustc_codegen_ssa/base.rs#L575-L593">https://github.com/rust-lang/rust/blob/61c451c51e1210a7d907f9919da8b0a08ff6915e/src/librustc_codegen_ssa/base.rs#L575-L593</a> could need some improvement though.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
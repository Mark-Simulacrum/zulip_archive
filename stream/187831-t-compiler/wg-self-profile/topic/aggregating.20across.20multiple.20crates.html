<html>
<head><meta charset="utf-8"><title>aggregating across multiple crates · t-compiler/wg-self-profile · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/index.html">t-compiler/wg-self-profile</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html">aggregating across multiple crates</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="182399146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399146">(Dec 02 2019 at 23:05)</a>:</h4>
<p>So <span class="user-mention" data-user-id="125250">@Wesley Wiser</span>, wycats was asking me about aggregating self-profile data across multiple crates.</p>



<a name="182399153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399153">(Dec 02 2019 at 23:05)</a>:</h4>
<p>They're creating a Zulip account now.</p>



<a name="182399207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399207">(Dec 02 2019 at 23:06)</a>:</h4>
<p>I know that if you do <code>RUSTFLAGS=-Zself-profile</code> you'll get a separate data file for each crate you build</p>



<a name="182399215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399215">(Dec 02 2019 at 23:06)</a>:</h4>
<p>( cc <span class="user-mention" data-user-id="252446">@Yehuda Katz</span> )</p>



<a name="182399227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399227">(Dec 02 2019 at 23:06)</a>:</h4>
<p>hello!</p>



<a name="182399230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399230">(Dec 02 2019 at 23:06)</a>:</h4>
<p>but is there a tool that combines the output from multiple crates to give you an overall view? At least I think that is what <span class="user-mention" data-user-id="252446">@Yehuda Katz</span> is asking for</p>



<a name="182399240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399240">(Dec 02 2019 at 23:06)</a>:</h4>
<p>what I'm trying to do is figure out what parts of <code>nu</code> are contributing to build slowness</p>



<a name="182399276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399276">(Dec 02 2019 at 23:07)</a>:</h4>
<p>You can take a look at <code>-Ztimings</code> in Cargo which gives a super high level view (timings per crate, split into 'metadata' and 'codegen')</p>



<a name="182399279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399279">(Dec 02 2019 at 23:07)</a>:</h4>
<p>There is also this tool that <span class="user-mention" data-user-id="120518">@Eric Huss</span> wrote, I think?</p>



<a name="182399284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399284">(Dec 02 2019 at 23:07)</a>:</h4>
<p>Ah, maybe that's it</p>



<a name="182399346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399346">(Dec 02 2019 at 23:08)</a>:</h4>
<p>but that won't help at all if you're interested in "which functions in this crate are causing slowness"</p>



<a name="182399350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399350">(Dec 02 2019 at 23:08)</a>:</h4>
<p>I will just reiterate that <em>man</em> do we need some docs to point people at on this</p>



<a name="182399351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399351">(Dec 02 2019 at 23:08)</a>:</h4>
<p>that we can't answer ~at all today</p>



<a name="182399358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399358">(Dec 02 2019 at 23:08)</a>:</h4>
<p>I'm first interested in which deps</p>



<a name="182399359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399359">(Dec 02 2019 at 23:08)</a>:</h4>
<p>that's good enough for now</p>



<a name="182399362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399362">(Dec 02 2019 at 23:08)</a>:</h4>
<p>okay, then -Ztimings is your best bet for deps I think today</p>



<a name="182399373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399373">(Dec 02 2019 at 23:08)</a>:</h4>
<p>will try it out</p>



<a name="182399375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399375">(Dec 02 2019 at 23:08)</a>:</h4>
<p>should be a matter of <code>cargo build -Ztimings</code> (or any other cargo command that builds things, in theory)</p>



<a name="182399395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399395">(Dec 02 2019 at 23:09)</a>:</h4>
<p>that'll print out a message at the end pointing at an HTML file which gives you a couple graphs and is generally helpful for this question</p>



<a name="182399401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399401">(Dec 02 2019 at 23:09)</a>:</h4>
<p>sadly there's currently a nightly regression that's making my build not work but I can wait for that to be reverted</p>



<a name="182399462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399462">(Dec 02 2019 at 23:10)</a>:</h4>
<p>you could also pop back to an earlier nightly, <span class="user-mention" data-user-id="252446">@Yehuda Katz</span></p>



<a name="182399470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399470">(Dec 02 2019 at 23:10)</a>:</h4>
<p>(or use an earlier nightly -- this functionality has been in and pretty stable for a month or two)</p>



<a name="182399473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399473">(Dec 02 2019 at 23:10)</a>:</h4>
<p>I'm not totally sure which one works</p>



<a name="182399484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399484">(Dec 02 2019 at 23:10)</a>:</h4>
<p><code>cargo-bisect-rustc</code> can help there, in theory :)</p>



<a name="182399488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399488">(Dec 02 2019 at 23:10)</a>:</h4>
<p>yeah fair</p>



<a name="182399494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399494">(Dec 02 2019 at 23:11)</a>:</h4>
<p>/me installs</p>



<a name="182399511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399511">(Dec 02 2019 at 23:11)</a>:</h4>
<blockquote>
<p><code>cargo-bisect-rustc</code> can help there, in theory :)</p>
</blockquote>
<p>heh interesting application</p>



<a name="182399514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399514">(Dec 02 2019 at 23:11)</a>:</h4>
<p><a href="https://github.com/rust-lang/cargo-bisect-rustc" target="_blank" title="https://github.com/rust-lang/cargo-bisect-rustc">https://github.com/rust-lang/cargo-bisect-rustc</a></p>



<a name="182399526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399526">(Dec 02 2019 at 23:11)</a>:</h4>
<p>yah</p>



<a name="182399532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399532">(Dec 02 2019 at 23:11)</a>:</h4>
<p>installing!</p>



<a name="182399588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399588" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399588">(Dec 02 2019 at 23:12)</a>:</h4>
<p>I never quite have any idea what I'm doing :P</p>



<a name="182399642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399642">(Dec 02 2019 at 23:13)</a>:</h4>
<p>Very soon, you'll be able to do something similar with the measureme data. <span class="user-mention" data-user-id="124287">@mw</span> just released measureme 0.5 this morning and we need to update it in rustc.</p>



<a name="182399657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yehuda Katz <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399657">(Dec 02 2019 at 23:14)</a>:</h4>
<p>how does measureme work?</p>



<a name="182399711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399711">(Dec 02 2019 at 23:14)</a>:</h4>
<p>At that point, the <code>crox</code> tool can generate the same kind of visualization as cargo timings but more detailed.</p>



<a name="182399762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399762">(Dec 02 2019 at 23:15)</a>:</h4>
<p>We have hooks in the compiler (mostly around the query system but also a few other areas) which record "interesting" events. The data is dumped in a binary format to some files in your working directory. Then after the compilation session, we have set of tools you can use to inspect the files.</p>



<a name="182399957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182399957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182399957">(Dec 02 2019 at 23:17)</a>:</h4>
<p>Once <a href="mailto:measureme@0.5" title="mailto:measureme@0.5">measureme@0.5</a> lands in rustc, you'll be able to generate performance traces like this <a href="https://github.com/rust-lang/measureme/pull/84#issuecomment-552688721" target="_blank" title="https://github.com/rust-lang/measureme/pull/84#issuecomment-552688721">https://github.com/rust-lang/measureme/pull/84#issuecomment-552688721</a></p>



<a name="182400020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187831-t-compiler/wg-self-profile/topic/aggregating%20across%20multiple%20crates/near/182400020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/187831-t-compiler/wg-self-profile/topic/aggregating.20across.20multiple.20crates.html#182400020">(Dec 02 2019 at 23:18)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="124287">@mw</span> is opening a PR tomorrow so we should be able to do that in nightlies starting later this week.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
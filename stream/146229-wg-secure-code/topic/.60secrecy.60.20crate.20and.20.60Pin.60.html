<html>
<head><meta charset="utf-8"><title>`secrecy` crate and `Pin` · wg-secure-code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/index.html">wg-secure-code</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html">`secrecy` crate and `Pin`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260583411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260583411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260583411">(Nov 07 2021 at 16:37)</a>:</h4>
<p>I understand that the <code>secrecy</code> crate does not prevent e.g. accidental stack moves: <a href="https://github.com/iqlusioninc/crates/issues/534">https://github.com/iqlusioninc/crates/issues/534</a><br>
<code>Pin</code> currently doesn't solve that either, because <code>Secret&lt;T&gt;</code> implements <code>Unpin</code>. So:</p>
<ol>
<li>Is there anything that we need to do other than adding <code>PhantomPinned</code> to <code>Secret</code> in order to support explicit pinning? Is there any reason why that's not actually done? Would recruiting community contributors to work on that help?</li>
<li>Is there an easy way to incorporate pinning into <code>Secret</code> itself so that the users would not have to pin the value explicitly? Also, ditto for contributors.</li>
</ol>



<a name="260601558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260601558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260601558">(Nov 07 2021 at 23:18)</a>:</h4>
<p>For 2. That would require heap allocating.</p>



<a name="260602136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260602136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260602136">(Nov 07 2021 at 23:31)</a>:</h4>
<p>I should probably rephrase the question: is there a way to incorporate <code>Pin</code> into <code>Secret</code> in such a way that would make it difficult or impossible to forget to pin the stack value when creating the <code>Secret</code>? So that I could write <code>Secret&lt;T&gt;</code> instead of <code>Secret&lt;Pin&lt;T&gt;&gt;</code></p>



<a name="260663331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260663331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260663331">(Nov 08 2021 at 14:27)</a>:</h4>
<p>yes, it's something I've wanted to do for years and never had the time to work on</p>



<a name="260672733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260672733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260672733">(Nov 08 2021 at 15:32)</a>:</h4>
<p>I think its not possible for secrecy, unless you force secrets to live on the heap (and obviously secrets on the heap aren't a concern as much, since they don't have sensitive data copied on every move). Even future doesn't enforce this at construction time, only after you poll. Future polling is pretty close to when you create the future usually, since they represent computation you want to start on right away, but secrets are data. After construction, you might have to do stuff.</p>
<p>There's stuff like <code>moveit</code>, which does a trick to store the constructor function and parameters in an object, but this means you'll end up copying stuff around still as part of the closure environment. And that stuff won't be zeroed on drop, since the secret isn't created yet.</p>



<a name="260672863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260672863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260672863">(Nov 08 2021 at 15:33)</a>:</h4>
<p>It's unfortunate. Maybe you could help encourage the right thing get by requiring Pin&lt;&amp;Self&gt; to access the value inside the secret, but it would be quite painful and it's not clear it would work that well either.</p>



<a name="260673464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260673464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260673464">(Nov 08 2021 at 15:37)</a>:</h4>
<p>forcing secrets to live on the heap is fine</p>



<a name="260673519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260673519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260673519">(Nov 08 2021 at 15:38)</a>:</h4>
<p>it has heapless support now but obviously keeping secrets on the heap solves a lot of problems</p>



<a name="260673593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260673593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260673593">(Nov 08 2021 at 15:38)</a>:</h4>
<p>I basically wanted to rewrite it with a <code>Box</code>-like primitive as the core primitive</p>



<a name="260710064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260710064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260710064">(Nov 08 2021 at 19:57)</a>:</h4>
<p>The following API would support both heap and stack pinning:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span>::<span class="n">core</span>::<span class="n">marker</span>::<span class="n">PhantomPinned</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">PhantomPinSensitive</span><span class="p">;</span><span class="w"></span>

<span class="k">struct</span> <span class="nc">Secret</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">PhantomPinSensitive</span><span class="p">);</span><span class="w"></span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Secret</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Note that `forget(Secret::new(…))`</span>
<span class="w">    </span><span class="cp">#[cfg(feature = </span><span class="s">"alloc"</span><span class="cp">)]</span><span class="w"></span>
<span class="w">    </span><span class="cp">#[inline(always)]</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">secret</span>: <span class="nc">S</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Pin</span><span class="o">&lt;</span><span class="nb">Box</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Box</span>::<span class="n">pin</span><span class="p">(</span><span class="n">Secret</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span><span class="w"> </span><span class="err">…</span><span class="p">))</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Allocation-less API. Bonus: value cannot be leaked.</span>
<span class="w">    </span><span class="cp">#[inline(always)]</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">with_new</span><span class="o">&lt;</span><span class="n">R</span><span class="o">&gt;</span><span class="p">(</span><span class="n">secret</span>: <span class="nc">S</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span>: <span class="nc">impl</span><span class="w"> </span><span class="nb">FnOnce</span><span class="p">(</span><span class="n">Pin</span><span class="o">&lt;&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">R</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">R</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Secret</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span><span class="w"> </span><span class="err">…</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">pin_mut</span><span class="o">!</span><span class="p">(</span><span class="n">secret</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">scope</span><span class="p">(</span><span class="n">secret</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>(That being said, I'm not 100% convinced that a pure library abstraction can really defend against accidental copies of the secret in the stack or the heap; for instance, the constructor(s) take(s) an unwrapped secret (let's hope the <code>inline(always)</code> helps a bit with that). Moreover, any user-ergonomic API (<em>e.g.</em>, <code>new()</code>) will have the issue of not guaranteeing that the secret is eventually zeroed (imagine it being caught in a ref-count cycle). I thus personally find that, rather than the whole ordeal about zeroing on drop and so on, that the main use of <code>Secret</code> is its restricted API against accidental reads (<code>[Redacted …]</code> <code>Debug</code> impls are just <span aria-label="ok" class="emoji emoji-1f44c" role="img" title="ok">:ok:</span>); so I'd just not bother that much with <code>Pin</code>)</li>
</ul>



<a name="260727714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260727714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260727714">(Nov 08 2021 at 22:23)</a>:</h4>
<blockquote>
<p>The following API would support both heap and stack pinning</p>
</blockquote>
<p>Huh? It's using <code>Box</code>?</p>



<a name="260727740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260727740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260727740">(Nov 08 2021 at 22:23)</a>:</h4>
<p>that doesn't look bad per se but when I said "heapless" I meant no-alloc</p>



<a name="260727797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260727797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260727797">(Nov 08 2021 at 22:24)</a>:</h4>
<p>oh wait sorry</p>



<a name="260727811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260727811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260727811">(Nov 08 2021 at 22:24)</a>:</h4>
<p>it scrolled down after responding</p>



<a name="260727823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/260727823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#260727823">(Nov 08 2021 at 22:24)</a>:</h4>
<p>bad Zulip UX</p>



<a name="261521931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/261521931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#261521931">(Nov 15 2021 at 16:28)</a>:</h4>
<p><span class="user-mention" data-user-id="232018">@Daniel Henry-Mantilla</span> The lack of zeroing on an Rc cycle can be mitigated by an explicit zeroing call... but if you've put the data in RC you don't know when to zero it, I suppose.<br>
But what makes you think accidental copying cannot be prevented?</p>



<a name="261522075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/261522075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#261522075">(Nov 15 2021 at 16:29)</a>:</h4>
<p>Ah, the constructor accepts the secret as an argument... so without placement-new or some such there will be a copy of it on the stack regardless. Argh.</p>



<a name="261540491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/261540491" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#261540491">(Nov 15 2021 at 18:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127617">Shnatsel</span> <a href="#narrow/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60/near/261522075">said</a>:</p>
<blockquote>
<p>Ah, the constructor accepts the secret as an argument... so without placement-new or some such there will be a copy of it on the stack regardless. Argh.</p>
</blockquote>
<p>Yeah, hence the suggestion for an<code>#[inline(always)]</code> and <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>
<hr>
<p>It is technically possible to use generative lifetimes to brand an out parameter and prove that it has been initialized. The constructor would then be:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Secret</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">new_with</span><span class="o">&lt;'</span><span class="na">scope</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">initializer</span>: <span class="nc">impl</span><span class="w"> </span><span class="k">for</span><span class="o">&lt;'</span><span class="na">id</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">FnOnce</span><span class="p">(</span><span class="n">Out</span><span class="o">&lt;'</span><span class="na">id</span><span class="p">,</span><span class="w">  </span><span class="o">'</span><span class="na">scope</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ProofOfInit</span><span class="o">&lt;'</span><span class="na">id</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span>-&gt; <span class="nc">SmthSmthPinned</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<ul>
<li>(The <code>'scope</code> could be removed for the sake of simplicity, but that could lead to a <a href="https://users.rust-lang.org/t/argument-requires-that-is-borrowed-for-static/66503/2?u=yandros">non-upper-bounded hrtb lifetime</a>, which in practice could make the closure have to be <code>'static</code>, which would be inconvenient).</li>
</ul>
<p>And, for <code>struct</code>s, have a <code>derive</code> macro allowing for field-by-field init:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">out_point</span><span class="p">.</span><span class="n">init_with</span><span class="p">(</span><span class="o">|</span><span class="p">(</span><span class="n">out_x</span><span class="p">,</span><span class="w"> </span><span class="n">out_y</span><span class="p">)</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">out_x</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="err">…</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">out_y</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="err">…</span><span class="p">),</span><span class="w"></span>
<span class="p">))</span><span class="w"></span>
</code></pre></div>
<p>But that signature (and the derive!) would just scare the hell out of any reasonable user <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
<p>I find it more reasonable to just mention that local copies in only-through-UB reachable data are not guaranteed to be prevented by <code>secrecy</code>, despite a genuine best effort to reduce them nonetheless <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="261540612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/261540612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#261540612">(Nov 15 2021 at 18:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132721">Tony Arcieri</span> <a href="#narrow/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60/near/260727823">said</a>:</p>
<blockquote>
<p>bad Zulip UX</p>
</blockquote>
<p>Bad indeed, I somehow missed the notification for your comments <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="261540820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%60secrecy%60%20crate%20and%20%60Pin%60/near/261540820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60.html#261540820">(Nov 15 2021 at 18:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132721">Tony Arcieri</span> <a href="#narrow/stream/146229-wg-secure-code/topic/.60secrecy.60.20crate.20and.20.60Pin.60/near/260727740">said</a>:</p>
<blockquote>
<p>that doesn't look bad per se</p>
</blockquote>
<p>Yeah, both are sensible additions, but for the by-value <code>secret</code> argument which is still around and so not fully preventing local <code>memcpy</code>-es</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
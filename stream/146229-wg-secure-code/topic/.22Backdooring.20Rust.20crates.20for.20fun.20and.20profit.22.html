<html>
<head><meta charset="utf-8"><title>&quot;Backdooring Rust crates for fun and profit&quot; · wg-secure-code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/index.html">wg-secure-code</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html">&quot;Backdooring Rust crates for fun and profit&quot;</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="262107976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262107976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262107976">(Nov 19 2021 at 18:26)</a>:</h4>
<p>Fun exploration of Rust supply chain attacks: <a href="https://kerkour.com/rust-crate-backdoor/">https://kerkour.com/rust-crate-backdoor/</a></p>



<a name="262110865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262110865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262110865">(Nov 19 2021 at 18:46)</a>:</h4>
<p>I've spent some time coming up with various techniques to harden security and then defeat that hardening. And the situation seemed rather hopeless because I could defeat anything without too much trouble.</p>



<a name="262110887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262110887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262110887">(Nov 19 2021 at 18:47)</a>:</h4>
<p>But then I found out that the notorious ESLint compromise was likely because the person reused the same password on many different websites:<br>
<a href="https://eslint.org/blog/2018/07/postmortem-for-malicious-package-publishes">https://eslint.org/blog/2018/07/postmortem-for-malicious-package-publishes</a></p>



<a name="262111030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262111030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262111030">(Nov 19 2021 at 18:47)</a>:</h4>
<p>And <em>this</em> is the kind of attack we need to harden against, first and foremost. Stolen tokens can wait.</p>



<a name="262119450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262119450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262119450">(Nov 19 2021 at 19:44)</a>:</h4>
<p>We defer to github for user authentication. Can OAuth apps require 2FA from users?</p>



<a name="262121025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262121025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262121025">(Nov 19 2021 at 19:55)</a>:</h4>
<blockquote>
<p>Can OAuth apps require 2FA from users?</p>
</blockquote>
<p>Yeah, that's exactly what I've been thinking. Right now logging in to <a href="http://crates.io">crates.io</a> doesn't require 2FA, or even the password. The Github cookie alone is sufficient.<br>
One thing we could do is check if the user has 2FA enabled at all. There is an API endpoint for that: <a href="https://docs.github.com/en/rest/reference/users">https://docs.github.com/en/rest/reference/users</a></p>



<a name="262121082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262121082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262121082">(Nov 19 2021 at 19:55)</a>:</h4>
<p>Publishing only requires a <a href="http://crates.io">crates.io</a> token.</p>



<a name="262121202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262121202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262121202">(Nov 19 2021 at 19:56)</a>:</h4>
<p>Yes, that is correct. But getting that token requires logging in to <a href="http://crates.io">crates.io</a> - that's the point I'm trying to harden right now.</p>



<a name="262121250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262121250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262121250">(Nov 19 2021 at 19:56)</a>:</h4>
<p>Mostly because protecting against compromise of the machine from which the upload happens is intractable.</p>



<a name="262121506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262121506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262121506">(Nov 19 2021 at 19:58)</a>:</h4>
<p>I think requiring 2FA (from Github) to generate a token, would definitely be a major step forward!</p>



<a name="262121587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262121587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262121587">(Nov 19 2021 at 19:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127617">Shnatsel</span> <a href="#narrow/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22/near/262121250">said</a>:</p>
<blockquote>
<p>Mostly because protecting against compromise of the machine from which the upload happens is intractable.</p>
</blockquote>
<p>The problem is intractable because even if the token is totally secure and 2FA is required on every upload, that still doesn't protect from a malicious <code>cargo publish</code> that injects a backdoor into the uploaded code.</p>



<a name="262121934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262121934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262121934">(Nov 19 2021 at 20:01)</a>:</h4>
<p>So 2FA on every upload would just get in the way without providing any additional security.</p>



<a name="262122060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262122060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262122060">(Nov 19 2021 at 20:02)</a>:</h4>
<p>Storing the token in the OS's secret storage would be sufficient and also would not get in the way.</p>



<a name="262122365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262122365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262122365">(Nov 19 2021 at 20:04)</a>:</h4>
<p>We could quibble about how much protection different mitigations make.<br>
But the only way to make progress is to harden a bunch of things one by one. And the one you're working on now sounds very important.</p>



<a name="262122938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262122938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262122938">(Nov 19 2021 at 20:09)</a>:</h4>
<p>It doesn't look like there is a way to require 2FA with Github. Nothing comes up in Google search, other than asking whether Google supports this (and the answer is "No"). Github knowledge base likewise doesn't seem to list anything like that.</p>



<a name="262123706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262123706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262123706">(Nov 19 2021 at 20:14)</a>:</h4>
<p>Our best bet is to poll the API endpoint and check if the user has 2FA enabled: <a href="https://docs.github.com/en/rest/reference/users">https://docs.github.com/en/rest/reference/users</a><br>
We can make that API call and deny login if 2FA is disabled on the account. This still protects against password reuse, but does not protect against cookie or token theft.</p>



<a name="262123855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262123855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262123855">(Nov 19 2021 at 20:15)</a>:</h4>
<p>We can start requiring 2FA to be enabled to log in for owners of crates above a certain number of recent downloads.</p>



<a name="262124065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262124065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262124065">(Nov 19 2021 at 20:17)</a>:</h4>
<p>I wonder how will this work with teams... I believe you would have to go through the individual authentication flow regardless, so no special changes are needed to accommodate team-based access?</p>



<a name="262124173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262124173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262124173">(Nov 19 2021 at 20:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127617">Shnatsel</span> <a href="#narrow/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22/near/262121934">said</a>:</p>
<blockquote>
<p>So 2FA on every upload would just get in the way without providing any additional security.</p>
</blockquote>
<p>it's still better than nothing, as with no 2FA it can immediately publish crates with the <a href="http://crates.io">crates.io</a> token after RCE is achieved. trivially wormable</p>



<a name="262124257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262124257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262124257">(Nov 19 2021 at 20:18)</a>:</h4>
<p>it would be nice to get something more out of some user interaction involving an airgapped key</p>



<a name="262124493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262124493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262124493">(Nov 19 2021 at 20:21)</a>:</h4>
<p>pie-in-the-sky: opt-in TUF-style k-of-n threshold signature policy, and in order to publish a crate, k people need to be able to reproduce the same crate and sign the same build hash</p>



<a name="262125168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125168">(Nov 19 2021 at 20:26)</a>:</h4>
<p>Well, if you have read-only filesystem access, simply storing the token in the OS keyring is sufficient. And if the compromise also extends to write access, then even 2FA on every upload wouldn't help. Which is why I consider 2FA on every upload not a worthwhile tradeoff.</p>



<a name="262125232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125232">(Nov 19 2021 at 20:27)</a>:</h4>
<p>And yes, I like your pie-in-the-sky idea, I converged on more or less the same idea myself. Problem is, it's way too heavyweight for most people to adopt.</p>



<a name="262125236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125236">(Nov 19 2021 at 20:27)</a>:</h4>
<p>yeah, the credential helper is probably the biggest thing that could help here</p>



<a name="262125280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125280">(Nov 19 2021 at 20:27)</a>:</h4>
<p>I think it got merged but isn't stable or something yet?</p>



<a name="262125381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125381">(Nov 19 2021 at 20:28)</a>:</h4>
<p>I haven't been following it.</p>



<a name="262125618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125618">(Nov 19 2021 at 20:30)</a>:</h4>
<p><a href="https://github.com/rust-lang/cargo/issues/8933">https://github.com/rust-lang/cargo/issues/8933</a></p>



<a name="262125655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125655">(Nov 19 2021 at 20:30)</a>:</h4>
<p>seems like there's effectively a prototype implementation that got merged</p>



<a name="262125707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125707">(Nov 19 2021 at 20:31)</a>:</h4>
<p><a href="https://crates.io/crates/cargo-credential">https://crates.io/crates/cargo-credential</a></p>



<a name="262125718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125718">(Nov 19 2021 at 20:31)</a>:</h4>
<p>neat. I should try playing around with that</p>



<a name="262125762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125762">(Nov 19 2021 at 20:32)</a>:</h4>
<p>unfortunately this design doesn't play well with macOS Keychain Services</p>



<a name="262125839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125839">(Nov 19 2021 at 20:32)</a>:</h4>
<p>could still use a Yubikey though</p>



<a name="262125926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262125926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262125926">(Nov 19 2021 at 20:33)</a>:</h4>
<p>Oh, they even allow hardware storage? Neat. I was thinking of using the system keyring or something, this is a step further than I expected.</p>



<a name="262126077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126077">(Nov 19 2021 at 20:34)</a>:</h4>
<p>I got myself a security key only recently. The damn things are pricey.</p>



<a name="262126136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126136">(Nov 19 2021 at 20:35)</a>:</h4>
<p>haha yeah the FIDO "Security Keys" are a lot cheaper</p>



<a name="262126153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126153">(Nov 19 2021 at 20:35)</a>:</h4>
<p>I actually use PIV though</p>



<a name="262126211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126211">(Nov 19 2021 at 20:35)</a>:</h4>
<p>which as it were is the only way I can think of to implement "push button, decrypt credential" with a Yubikey</p>



<a name="262126285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126285">(Nov 19 2021 at 20:36)</a>:</h4>
<p>which is kind of silly because they have a whole AES engine for Yubikey-AES</p>



<a name="262126294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126294">(Nov 19 2021 at 20:36)</a>:</h4>
<p>yep looping in my yubikey is why I wrote the credentials tool RFC</p>



<a name="262126371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126371">(Nov 19 2021 at 20:36)</a>:</h4>
<p>maybe there's a way to access it? but if so I've implemented a large part of the Yubikey PC/SC API and it would be using a SmartCard applet I'm not familiar with</p>



<a name="262126555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126555">(Nov 19 2021 at 20:38)</a>:</h4>
<p>but uhh, failing that, you could use PIV with e.g. NIST P-256, and a hybrid cryptosystem built out of that (e.g. combining AES-GCM or ChaCha20Poly1305)</p>



<a name="262126854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126854">(Nov 19 2021 at 20:41)</a>:</h4>
<p>when I was actively developing the <code>keychain-services</code> crate I tried to see if I could get TouchID to work with a subprocess but it seems deliberately designed to disallow that thing, probably with good reasons</p>



<a name="262126896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126896">(Nov 19 2021 at 20:41)</a>:</h4>
<p>that said I'm not sure what allows TouchID interactions from e.g. a process spawned by iTerm</p>



<a name="262126979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262126979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262126979">(Nov 19 2021 at 20:42)</a>:</h4>
<p>Another really dumb thing that would help is "someone logged in to <a href="http://crates.io">crates.io</a> as you" emails.<br>
And/or "someone has generated a token" emails, but then we'd have to add those for every administrative action, e.g. adding/removing users.<br>
<a href="http://crates.io">crates.io</a> currently doesn't do that. By contrast, Google does.</p>



<a name="262127020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127020">(Nov 19 2021 at 20:42)</a>:</h4>
<p>yeah, RubyGems for example spams all maintainers of a gem every time someone publishes with a sort of report</p>



<a name="262127044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127044">(Nov 19 2021 at 20:43)</a>:</h4>
<p>I think the "Subscribe" functionality in <a href="http://crates.io">crates.io</a> might accomplish something similar? I only recently discovered it</p>



<a name="262127053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127053">(Nov 19 2021 at 20:43)</a>:</h4>
<blockquote>
<p>that said I'm not sure what allows TouchID interactions from e.g. a process spawned by iTerm</p>
</blockquote>
<p>Can the credential helper do something like <code>open -a CargoTouchIDCredentialHelper.app</code>?</p>



<a name="262127088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127088">(Nov 19 2021 at 20:43)</a>:</h4>
<p>umm, maybe?</p>



<a name="262127189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127189">(Nov 19 2021 at 20:44)</a>:</h4>
<p>Alright, I'll go file those <a href="http://crates.io">crates.io</a> feature requests then, so that this would be more than mere banter in an obscure chat room</p>



<a name="262127213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127213">(Nov 19 2021 at 20:44)</a>:</h4>
<p>Keychain Services seems to have a fairly restrictive AuthZ which prevents it from being accessed by background processes and requiring it be some sort of interactive process opened directly by the user</p>



<a name="262127317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127317">(Nov 19 2021 at 20:45)</a>:</h4>
<p>The <code>CargoTouchIDCredentialHeloer.app</code> could show a ui listing all credential helpers (+process parent tree) trying to get the credentials and have a button to accept.</p>



<a name="262127334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127334">(Nov 19 2021 at 20:45)</a>:</h4>
<p><a href="/user_uploads/4715/ktOLYvYx32I58qaOH1OCyje6/Screen-Shot-2021-11-19-at-1.45.37-PM.png">Screen-Shot-2021-11-19-at-1.45.37-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/ktOLYvYx32I58qaOH1OCyje6/Screen-Shot-2021-11-19-at-1.45.37-PM.png" title="Screen-Shot-2021-11-19-at-1.45.37-PM.png"><img src="/user_uploads/4715/ktOLYvYx32I58qaOH1OCyje6/Screen-Shot-2021-11-19-at-1.45.37-PM.png"></a></div>



<a name="262127401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127401">(Nov 19 2021 at 20:46)</a>:</h4>
<p>^^^ if anyone's curious, that's what a RubyGems publish notification looks like</p>



<a name="262127510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127510">(Nov 19 2021 at 20:47)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> yeah it could work if there's some sort of interactive TouchID agent already running, started by the user</p>



<a name="262127619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127619">(Nov 19 2021 at 20:48)</a>:</h4>
<p>Does it really need to be directly opened by the user in advance or is simply having an open window in which you click a button enough?</p>



<a name="262127661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127661">(Nov 19 2021 at 20:49)</a>:</h4>
<p><code>open -a</code> does pretty much the same as opening an application in finder, right?</p>



<a name="262127711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262127711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262127711">(Nov 19 2021 at 20:49)</a>:</h4>
<p><code>open</code> doesn't directly launch executables, but asks launchd(?) to do it.</p>



<a name="262128224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128224">(Nov 19 2021 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> what's the tl;dr: on the status of <code>credential-process</code> or whatever? If I'm an eager early adopter, can I use it today, and try to write my own helper with the <code>cargo-credential</code> crate?</p>



<a name="262128250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128250">(Nov 19 2021 at 20:53)</a>:</h4>
<p>Yes.</p>



<a name="262128269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128269">(Nov 19 2021 at 20:53)</a>:</h4>
<p>the tracking issue makes it look really incomplete but when I investigate the various sub-tasks it looks like a lot more has been done than the tracking issue would lead one to believe</p>



<a name="262128295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128295">(Nov 19 2021 at 20:53)</a>:</h4>
<p>I'm... not sure of the status of that, it's a cargo feature</p>



<a name="262128308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128308">(Nov 19 2021 at 20:54)</a>:</h4>
<p>aah ok</p>



<a name="262128427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128427">(Nov 19 2021 at 20:54)</a>:</h4>
<p>If the tracking issue is out of date, please ping.</p>



<a name="262128650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128650">(Nov 19 2021 at 20:56)</a>:</h4>
<p>Take it back, I'll do the ping.</p>



<a name="262128690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128690">(Nov 19 2021 at 20:56)</a>:</h4>
<p>so what I'd really like to know...</p>



<a name="262128708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128708">(Nov 19 2021 at 20:56)</a>:</h4>
<p>how do I configure Cargo to make it work?</p>



<a name="262128738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128738">(Nov 19 2021 at 20:57)</a>:</h4>
<p>assuming I want to invent my own <code>credential-process</code></p>



<a name="262128880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128880">(Nov 19 2021 at 20:58)</a>:</h4>
<p><a href="https://doc.rust-lang.org/nightly/cargo/reference/unstable.html#credential-process">https://doc.rust-lang.org/nightly/cargo/reference/unstable.html#credential-process</a></p>



<a name="262128919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128919">(Nov 19 2021 at 20:58)</a>:</h4>
<p>aha!</p>



<a name="262128921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262128921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262128921">(Nov 19 2021 at 20:58)</a>:</h4>
<p>ty</p>



<a name="262129286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262129286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262129286">(Nov 19 2021 at 21:01)</a>:</h4>
<blockquote>
<p>There's still a lot of unanswered questions in this tracking issue. But to make it clear basic functionality from the RFC is implemented and available for testing. The questions are all about comparatively small details.</p>
</blockquote>



<a name="262129523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262129523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262129523">(Nov 19 2021 at 21:02)</a>:</h4>
<p>will try playing around with it</p>



<a name="262129542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262129542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262129542">(Nov 19 2021 at 21:02)</a>:</h4>
<p>Oooh, there is already a wrapper working with Linux keyrings as well - both on GNOME and KDE!</p>



<a name="262129553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262129553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262129553">(Nov 19 2021 at 21:03)</a>:</h4>
<p>FWIW I coauthored this: <a href="https://docs.rs/yubikey/">https://docs.rs/yubikey/</a></p>



<a name="262129716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262129716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262129716">(Nov 19 2021 at 21:04)</a>:</h4>
<p>PIV pubkey support is a sufficient but wacky way to do what's effectively keywrapping for a credential, but it could work</p>



<a name="262129738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262129738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262129738">(Nov 19 2021 at 21:04)</a>:</h4>
<p>I'm not sure what better options there are</p>



<a name="262129943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262129943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262129943">(Nov 19 2021 at 21:06)</a>:</h4>
<p>also wrote this a long time ago and wanted to upstream it to <code>security-framework</code> but never found the time: <a href="https://keychain-services.rs/">https://keychain-services.rs/</a></p>



<a name="262130048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262130048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262130048">(Nov 19 2021 at 21:07)</a>:</h4>
<p>also got kind of burned out on the development workflow for it since you need to sign every executable you build and then the tests require interactivity</p>



<a name="262209465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262209465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262209465">(Nov 20 2021 at 22:59)</a>:</h4>
<p>I have been wondering if we could do a transparency log based on signatures off of SSH keys</p>



<a name="262243609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262243609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262243609">(Nov 21 2021 at 14:40)</a>:</h4>
<p>the sigstore people are interested in doing something with Rust, as it were</p>



<a name="262249423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262249423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262249423">(Nov 21 2021 at 16:47)</a>:</h4>
<p>All right, <a href="http://crates.io">crates.io</a> issues filed:<br>
<a href="https://github.com/rust-lang/crates.io/issues/4195">https://github.com/rust-lang/crates.io/issues/4195</a><br>
<a href="https://github.com/rust-lang/crates.io/issues/4196">https://github.com/rust-lang/crates.io/issues/4196</a><br>
<a href="https://github.com/rust-lang/crates.io/issues/4197">https://github.com/rust-lang/crates.io/issues/4197</a></p>



<a name="262249476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262249476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262249476">(Nov 21 2021 at 16:48)</a>:</h4>
<p>cool, subscribed</p>



<a name="262249499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262249499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262249499">(Nov 21 2021 at 16:49)</a>:</h4>
<p>I would be happy to help with getting community contributors to work on these. Hmm, let me try reaching out to <a href="http://crates.io">crates.io</a> team with that message...</p>



<a name="262249500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262249500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Gaynor <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262249500">(Nov 21 2021 at 16:49)</a>:</h4>
<p>A few years ago we integrated HIBP into PyPI and it was horrifying to start seeing the accounts that owned packages that were using 100% compromised passwords.</p>



<a name="262251986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262251986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262251986">(Nov 21 2021 at 17:49)</a>:</h4>
<p><span class="user-mention" data-user-id="127617">@Shnatsel</span> you may also be interested in <a href="https://github.com/rust-lang/crates.io/issues/2630">https://github.com/rust-lang/crates.io/issues/2630</a>. If your GitHub account is compromised, there is currently no mechanism for you to revoke any <a href="http://crates.io">crates.io</a> session cookies that were created during the compromise.</p>
<p>Also, the session cookies  are now set with a 90-day lifetime (great!) but the expiration is not part of the signed data in the cookie, so an attacker with a cookie for a compromise account could simply hold onto it and it's indefinitely good: <a href="https://github.com/conduit-rust/conduit-cookie/issues/15">https://github.com/conduit-rust/conduit-cookie/issues/15</a></p>



<a name="262253216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262253216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262253216">(Nov 21 2021 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-id="315412">@jsha</span> I was aware of the first one but not of the second one. I understand this applies to <a href="http://crates.io">crates.io</a> because it relies on Conduit for cookie handling, is that right?</p>



<a name="262253913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262253913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262253913">(Nov 21 2021 at 18:34)</a>:</h4>
<p>yes, at least as of the time I filed the issue</p>



<a name="262254034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262254034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262254034">(Nov 21 2021 at 18:38)</a>:</h4>
<p>Wow. I thought I have learned to be pessimistic enough by now - but no. The reality still manages to surprise me by being far lower security than I imagined. Time to drop an email to security@</p>



<a name="262254215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262254215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262254215">(Nov 21 2021 at 18:43)</a>:</h4>
<p>FWIW I think the right thing long-term is not to log people out every 90 days but to make sure their credentials are automatically refreshed so long as they access the site at least once every N days and so long as their GitHub token is still good.</p>



<a name="262255351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262255351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262255351">(Nov 21 2021 at 19:09)</a>:</h4>
<p>Given that getting a new cookie when holding a valid Github cookie is so easy (you just click "Log in with Github" and off you go), I don't think holding the cookie around for long is a good idea at all. You do need the Github cookie on hand at all times to e.g. comment on issues and pull requests, but the <a href="http://crates.io">crates.io</a> cookie is used <strong>only</strong> for highly sensitive operations like generating new upload tokens or adding new publishers. There is absolutely no reason to keep it around.<br>
I've filed another issue about that: <a href="https://github.com/rust-lang/crates.io/issues/4198">https://github.com/rust-lang/crates.io/issues/4198</a></p>



<a name="262256494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/262256494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shnatsel <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#262256494">(Nov 21 2021 at 19:36)</a>:</h4>
<p>Alright, emailed security@ about <a href="https://github.com/rust-lang/rust/issues/2630">#2630</a>, but also mentioned the rest of the batch.</p>



<a name="264574888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/264574888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hickey <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#264574888">(Dec 11 2021 at 17:46)</a>:</h4>
<p>Will Crichton suggested I find my way here and it looks like he was right. This morning I wrote a <a href="http://build.rs">build.rs</a> that rewrites Cargo.toml. As discussed up thread, the obvious attack vector is to worm it through <a href="http://crates.io">crates.io</a> via credential reuse</p>



<a name="266888313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266888313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266888313">(Jan 05 2022 at 01:48)</a>:</h4>
<p>interesting question: <a href="https://twitter.com/Erstejahre/status/1478515537470648322">https://twitter.com/Erstejahre/status/1478515537470648322</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/Erstejahre/status/1478515537470648322"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/f290d5f0e2fea64403f6844ca6ac896c0c8bc410/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313237353031313231352f6176617461725f6e6f726d616c2e706e67"></a><p><a href="https://twitter.com/RustSec">@RustSec</a> Theoretical question for you - If a crate was hijacked and had a cryptominer or other malicious code added, is there an established process to have that removed to prevent infections to consumers of <a href="https://t.co/IkWCZfiBHN">http://crates.io</a> ?</p><span>- Firstyear (@Erstejahre)</span></div></div>



<a name="266888941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266888941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266888941">(Jan 05 2022 at 02:00)</a>:</h4>
<p>start by reporting it to us at <a href="mailto:security@rust-lang.org">security@rust-lang.org</a></p>



<a name="266889017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266889017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266889017">(Jan 05 2022 at 02:01)</a>:</h4>
<p>but the actual actions will have to be taken by infra / <a href="http://crates.io">crates.io</a> teams -- <span class="user-mention" data-user-id="121055">@Pietro Albini</span> ?</p>



<a name="266889226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266889226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick12 <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266889226">(Jan 05 2022 at 02:05)</a>:</h4>
<p>Is that documented anywhere? I found <a href="https://www.rust-lang.org/policies/security">https://www.rust-lang.org/policies/security</a> but that says </p>
<blockquote>
<p>All security bugs in the Rust distribution should be reported by email to <a href="mailto:security@rust-lang.org">security@rust-lang.org</a>. </p>
</blockquote>
<p>Which sounds to me like if a crate is not used by rustc, then it's not the right address<br>
The crates io website has a link to that page at the bottom for security policy though</p>



<a name="266889335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266889335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266889335">(Jan 05 2022 at 02:07)</a>:</h4>
<p>I guess we need to clarify that scope, but yes, we've responded to broader reports before</p>



<a name="266907311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266907311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266907311">(Jan 05 2022 at 08:05)</a>:</h4>
<p>yeah if a crate is actually malicious security@ is the way to go</p>



<a name="266909216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266909216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pinkforest(she/her) <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266909216">(Jan 05 2022 at 08:30)</a>:</h4>
<p>Just a wild idea around "Community driven crates registry reflector" ... <br>
<a href="https://github.com/rust-secure-code/wg/issues/42">https://github.com/rust-secure-code/wg/issues/42</a><br>
Essentially if the community expects some type of guarantees around security - or - "moderation" - or - "hardening" someone will have to do it and naturally it could be community initiative to provide it and easy to plug into automatically.<br>
Enterprise users typically would be interested on this kind of thing.</p>



<a name="266910310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146229-wg-secure-code/topic/%22Backdooring%20Rust%20crates%20for%20fun%20and%20profit%22/near/266910310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pinkforest(she/her) <a href="https://zulip-archive.rust-lang.org/stream/146229-wg-secure-code/topic/.22Backdooring.20Rust.20crates.20for.20fun.20and.20profit.22.html#266910310">(Jan 05 2022 at 08:44)</a>:</h4>
<p>(I love that I got the Issue # 42 :D)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
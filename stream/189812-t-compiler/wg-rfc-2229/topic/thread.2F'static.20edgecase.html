<html>
<head><meta charset="utf-8"><title>thread/&#x27;static edgecase · t-compiler/wg-rfc-2229 · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/index.html">t-compiler/wg-rfc-2229</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html">thread/&#x27;static edgecase</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249752508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249752508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249752508">(Aug 17 2021 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> there is a possible edge case where an object might have been moved into the closure body in 2018, but now is only partially moved in. </p>
<p>This has implications where the closure is used to spawn a thread and some parts of the object are captured by ref and are not forced to be "ByValue"</p>



<a name="249752523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249752523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249752523">(Aug 17 2021 at 17:37)</a>:</h4>
<p>example: <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=6b42c5c3c5dd74591c4d70ff913b1730">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=6b42c5c3c5dd74591c4d70ff913b1730</a></p>



<a name="249773648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773648">(Aug 17 2021 at 20:20)</a>:</h4>
<p>are you saying, <span class="user-mention" data-user-id="281950">@Aman Arora</span>, that this is a "migration failure", basically?</p>



<a name="249773652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773652">(Aug 17 2021 at 20:20)</a>:</h4>
<p>if so, I agree</p>



<a name="249773667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773667">(Aug 17 2021 at 20:20)</a>:</h4>
<p>I'm not sure how serious it is though</p>



<a name="249773703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773703">(Aug 17 2021 at 20:20)</a>:</h4>
<p>Yea, basically an edge case we didn't think of</p>



<a name="249773726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773726">(Aug 17 2021 at 20:21)</a>:</h4>
<p>When you run rust check again it suggests using the move keyword</p>



<a name="249773743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773743">(Aug 17 2021 at 20:21)</a>:</h4>
<p>This came up 3x in crater</p>



<a name="249773794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773794">(Aug 17 2021 at 20:21)</a>:</h4>
<p>3x is probably not worth the trouble</p>



<a name="249773803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773803">(Aug 17 2021 at 20:22)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/88114">https://github.com/rust-lang/rust/issues/88114</a></p>



<a name="249773863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773863">(Aug 17 2021 at 20:22)</a>:</h4>
<p>2 of them seem linked</p>



<a name="249773892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/249773892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#249773892">(Aug 17 2021 at 20:22)</a>:</h4>
<p><code>finality-grandpa</code> and <code>tetsy-finality-grandpa</code></p>



<a name="250534787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250534787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250534787">(Aug 24 2021 at 19:20)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> donI close the issue?</p>



<a name="250534796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250534796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250534796">(Aug 24 2021 at 19:20)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/88114">https://github.com/rust-lang/rust/issues/88114</a></p>



<a name="250535609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535609">(Aug 24 2021 at 19:26)</a>:</h4>
<p><span class="user-mention" data-user-id="281950">@Aman Arora</span> I don't understand this question :)</p>



<a name="250535614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535614">(Aug 24 2021 at 19:26)</a>:</h4>
<p>oh, "do I"?</p>



<a name="250535632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535632">(Aug 24 2021 at 19:26)</a>:</h4>
<p>Do I</p>



<a name="250535648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535648">(Aug 24 2021 at 19:26)</a>:</h4>
<p>this is the case that only came up 3x</p>



<a name="250535651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535651">(Aug 24 2021 at 19:26)</a>:</h4>
<p>I see</p>



<a name="250535706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535706">(Aug 24 2021 at 19:27)</a>:</h4>
<p>Ye and two of them are linked</p>



<a name="250535751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535751">(Aug 24 2021 at 19:27)</a>:</h4>
<p>I'll comment</p>



<a name="250535958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535958">(Aug 24 2021 at 19:29)</a>:</h4>
<p>We may <span class="user-mention" data-user-id="281950">@Aman Arora</span> want to update the Edition Guide though</p>



<a name="250535975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250535975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250535975">(Aug 24 2021 at 19:29)</a>:</h4>
<p>I think we should discuss this case and have <em>that</em> PR close the issue</p>



<a name="250536030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/thread/%27static%20edgecase/near/250536030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/thread.2F&#x27;static.20edgecase.html#250536030">(Aug 24 2021 at 19:29)</a>:</h4>
<p>Sounds good</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
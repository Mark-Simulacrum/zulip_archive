<html>
<head><meta charset="utf-8"><title>issue #88476 / pr #88477 · t-compiler/wg-rfc-2229 · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/index.html">t-compiler/wg-rfc-2229</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html">issue #88476 / pr #88477</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251241211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241211">(Aug 30 2021 at 14:51)</a>:</h4>
<p><span class="user-mention" data-user-id="281950">@Aman Arora</span> reading <a href="https://github.com/rust-lang/rust/issues/88476">#88476</a>, I'm wondering if we should tweak the capture rules:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">rc</span>::<span class="n">Rc</span><span class="p">;</span><span class="w"></span>

<span class="k">struct</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Rc</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="nb">Drop</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">drop</span><span class="p">(</span><span class="bp">self</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Foo</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="n">Rc</span>::<span class="n">new</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Specifically, if we see a move capture, it seems like we should truncate at any struct that defines a destructor, else we are just guaranteeing the user an error later, right?</p>



<a name="251241266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241266">(Aug 30 2021 at 14:51)</a>:</h4>
<p>In other words, rather than fixing this by introducing a migration, maybe the bug is the new closure capture rule in this case</p>



<a name="251241466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241466">(Aug 30 2021 at 14:53)</a>:</h4>
<p>Right, they might just write fresh code like that</p>



<a name="251241476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241476">(Aug 30 2021 at 14:53)</a>:</h4>
<p>Sounds good</p>



<a name="251241517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241517">(Aug 30 2021 at 14:53)</a>:</h4>
<p>I'll make a new PR probably tonight</p>



<a name="251241529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241529">(Aug 30 2021 at 14:53)</a>:</h4>
<p>That would require tweaking the Rust reference PR, too</p>



<a name="251241552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241552">(Aug 30 2021 at 14:53)</a>:</h4>
<p>Yes</p>



<a name="251241575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241575" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241575">(Aug 30 2021 at 14:53)</a>:</h4>
<p>Need to do the same for the reference change</p>



<a name="251241668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251241668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251241668">(Aug 30 2021 at 14:54)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/88431">#88431</a></p>



<a name="251253363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251253363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251253363">(Aug 30 2021 at 16:14)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I remember now why I didn't quite do that. </p>
<p>I was trying to avoid adding extra rules to capture analysis. Not sure ergonomically but from understanding what's going on it might be overall for a lint to suggest use <code>let _ = ... </code> instead of just doing that truncation</p>



<a name="251253525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251253525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251253525">(Aug 30 2021 at 16:15)</a>:</h4>
<p>Or an improvement that we can make in the future is store "Truncation reason" as part of capture analysis. So that when we do throw a borrow error we can inform the user that the capture is not to complete precision because xyz reason</p>



<a name="251402696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251402696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251402696">(Aug 31 2021 at 15:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281950">Aman Arora</span> <a href="#narrow/stream/189812-t-compiler.2Fwg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477/near/251253363">said</a>:</p>
<blockquote>
<p>I was trying to avoid adding extra rules to capture analysis. Not sure ergonomically but from understanding what's going on it might be overall for a lint to suggest use <code>let _ = ... </code> instead of just doing that truncation</p>
</blockquote>
<p>This seems worth discussing. I definitely see the point that it's a kind of subtle extra rule, but the alternative seems to be generating a capture that we know will create an error, which doesn't sit right with me either.</p>



<a name="251403369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251403369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251403369">(Aug 31 2021 at 15:23)</a>:</h4>
<p>There are sort of two approaches in my head: a) borrow checker lint provides the <code>let _ =&amp;x</code> suggestion along with the error msg, or b) we truncate in capture analysis.  Regardless both result in the same capture</p>



<a name="251403607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251403607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251403607">(Aug 31 2021 at 15:24)</a>:</h4>
<p>a) is an overall less ergonomic option, <br>
b) we probably should improve borrow check error messages to account for truncation to better educate people of why the precision is not what they'd expect</p>



<a name="251403703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251403703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251403703">(Aug 31 2021 at 15:25)</a>:</h4>
<p>Yes, I think that adding notes to error messages around truncation is probably a good idea regardless</p>



<a name="251403948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251403948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251403948">(Aug 31 2021 at 15:26)</a>:</h4>
<p>I can create a PR for truncation in capture analysis tonight and we can implement the notes around truncation in a separate PR</p>



<a name="251404112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404112">(Aug 31 2021 at 15:27)</a>:</h4>
<p>I'm thinking about that</p>



<a name="251404130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404130">(Aug 31 2021 at 15:27)</a>:</h4>
<p>I imagine what we would want to do is something like:</p>



<a name="251404239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404239">(Aug 31 2021 at 15:28)</a>:</h4>
<ul>
<li>the closure captures <code>foo</code> but accesses <code>foo.bar</code></li>
<li>there is an access to <code>foo.baz</code> that generates an error</li>
<li>we note and explain why the closure capture was truncated</li>
</ul>



<a name="251404266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404266">(Aug 31 2021 at 15:28)</a>:</h4>
<p>we <em>might</em> skip the middle part and just always add an explanation;</p>



<a name="251404293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404293">(Aug 31 2021 at 15:28)</a>:</h4>
<p>e.g., whenever we highlight "X is captured beacuse of this access" we could explain that truncation occurred and why</p>



<a name="251404316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404316">(Aug 31 2021 at 15:28)</a>:</h4>
<p>it'd require tracking that of course, or recomputing it</p>



<a name="251404404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404404">(Aug 31 2021 at 15:29)</a>:</h4>
<p>Yeah something like that</p>



<a name="251404553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404553">(Aug 31 2021 at 15:30)</a>:</h4>
<p>I think the challenge might be to pass this information within the borrow checker</p>



<a name="251404678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251404678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251404678">(Aug 31 2021 at 15:31)</a>:</h4>
<p>I remember when Chris implemented the 2229 borrow message changes, getting relevant information/context passed around was hard</p>



<a name="251431064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431064">(Aug 31 2021 at 18:17)</a>:</h4>
<p>I've been thinking <span class="user-mention" data-user-id="281950">@Aman Arora</span> more about this and I'm feeling uncertain</p>



<a name="251431086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431086">(Aug 31 2021 at 18:17)</a>:</h4>
<p>we had some discussion in the lang team and I realized that the error only occurs when the field in question is not Copy (duh)</p>



<a name="251431106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431106">(Aug 31 2021 at 18:17)</a>:</h4>
<p>I'm starting to think maybe I prefer to just give a nice suggestion</p>



<a name="251431119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431119">(Aug 31 2021 at 18:17)</a>:</h4>
<p>I have to kind of write up the various examples</p>



<a name="251431344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431344">(Aug 31 2021 at 18:19)</a>:</h4>
<p>FWIW part of my worry is that in my experience the error about moving out of type implementing drop is <em>already</em> kinda annoying to run into (often it is a "false positive" in the sense that I <em>do</em> actually want to move out, not run the dtor), so seeing it more often is even more annoying</p>



<a name="251431620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431620">(Aug 31 2021 at 18:20)</a>:</h4>
<p>Yes. I'm not thrilled.</p>



<a name="251431671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431671">(Aug 31 2021 at 18:21)</a>:</h4>
<p>I want to write up a few examples I guess</p>



<a name="251431767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431767">(Aug 31 2021 at 18:21)</a>:</h4>
<p>if we always capture all of a value that implements <code>Drop</code>, we are closer to today's behavior, for sure</p>



<a name="251431939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431939">(Aug 31 2021 at 18:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/189812-t-compiler.2Fwg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477/near/251431344">said</a>:</p>
<blockquote>
<p>FWIW part of my worry is that in my experience the error about moving out of type implementing drop is <em>already</em> kinda annoying to run into (often it is a "false positive" in the sense that I <em>do</em> actually want to move out, not run the dtor), so seeing it more often is even more annoying</p>
</blockquote>
<p>side note, I wonder if we should try to "fix" this</p>



<a name="251431967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251431967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251431967">(Aug 31 2021 at 18:22)</a>:</h4>
<p>I'm not 100% sure how :) I imagine some kind of operator that moves-and-forgets</p>



<a name="251432193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432193">(Aug 31 2021 at 18:24)</a>:</h4>
<p>We will only capture completely only of it's by move capture, use still gets precision via a  by ref use</p>



<a name="251432463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432463">(Aug 31 2021 at 18:25)</a>:</h4>
<p>the example I was pondering is something like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span> <span class="nc">Character</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">hp</span>: <span class="kt">u32</span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="nb">Drop</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="n">character</span><span class="p">.</span><span class="n">hp</span><span class="p">)</span><span class="w"></span>
</code></pre></div>



<a name="251432562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432562">(Aug 31 2021 at 18:25)</a>:</h4>
<p>which could require <code>let hp = character.hp</code> outside the closure if we change the rules to "always truncate when moving a struct that implements <code>Drop</code>"</p>



<a name="251432570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432570">(Aug 31 2021 at 18:26)</a>:</h4>
<p>Does the borrow checker treat that as a move or copy</p>



<a name="251432682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432682">(Aug 31 2021 at 18:26)</a>:</h4>
<p>I believe this will capture <code>character.hp</code> today, which is a copy</p>



<a name="251432691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432691">(Aug 31 2021 at 18:26)</a>:</h4>
<p>and hence would compile</p>



<a name="251432718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432718">(Aug 31 2021 at 18:26)</a>:</h4>
<p>by "today" I mean "in Rust 2021 as presently implemented on master"</p>



<a name="251432841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251432841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251432841">(Aug 31 2021 at 18:27)</a>:</h4>
<p>Ah I see the what you were referring to</p>



<a name="251433044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251433044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251433044">(Aug 31 2021 at 18:28)</a>:</h4>
<p>One problem with truncation during capture analysis is that "Type impls Drop" is an approximation during that stage</p>



<a name="251433052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251433052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251433052">(Aug 31 2021 at 18:28)</a>:</h4>
<p>Having written it out, though, I see some value to the rules capturing all of <code>character</code> and saying "because <code>Character</code> implements Drop"</p>



<a name="251433090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251433090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251433090">(Aug 31 2021 at 18:28)</a>:</h4>
<p>How so ? We always know if a struct implements drop</p>



<a name="251433252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251433252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251433252">(Aug 31 2021 at 18:29)</a>:</h4>
<p>At least that what I understood about how we were using the trait/obligation code</p>



<a name="251433528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251433528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251433528">(Aug 31 2021 at 18:31)</a>:</h4>
<p>Eg the recent change me made around the overflow, the actual crate didn't need the recursion limit override to compile if I recall correctly</p>



<a name="251439165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251439165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251439165">(Aug 31 2021 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="281950">@Aman Arora</span> checking whether a particular struct implements <code>Drop</code> is easy</p>



<a name="251439181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251439181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251439181">(Aug 31 2021 at 19:03)</a>:</h4>
<p>in this case, we would be looking at a field projection <code>(.0)</code></p>



<a name="251439199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251439199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251439199">(Aug 31 2021 at 19:03)</a>:</h4>
<p>so we would have a particular struct in mind</p>



<a name="251439213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251439213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251439213">(Aug 31 2021 at 19:03)</a>:</h4>
<p>(the owner of that field)</p>



<a name="251440493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251440493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251440493">(Aug 31 2021 at 19:10)</a>:</h4>
<p>I'm thinking about  the accuracy of<code>type_implements_trait</code></p>



<a name="251440757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251440757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251440757">(Aug 31 2021 at 19:12)</a>:</h4>
<p>I could've completely misunderstood but I feel like everytime that function has been discussed there have been some amt of possilbility of false negatives</p>



<a name="251440818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251440818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251440818">(Aug 31 2021 at 19:12)</a>:</h4>
<p>my point is that you don't need that function</p>



<a name="251440855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251440855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251440855">(Aug 31 2021 at 19:12)</a>:</h4>
<p>Ah just check if destructor is there?</p>



<a name="251440884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251440884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251440884">(Aug 31 2021 at 19:13)</a>:</h4>
<p>Right</p>



<a name="251440949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251440949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251440949">(Aug 31 2021 at 19:13)</a>:</h4>
<p>I totally forgot that was a thing <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="251440993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251440993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251440993">(Aug 31 2021 at 19:14)</a>:</h4>
<p>Now I'm wondering why I have the check using traits in the lint <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="251441083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251441083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251441083">(Aug 31 2021 at 19:14)</a>:</h4>
<p>But okay yea I agree we can easily/confidently check for drop</p>



<a name="251742241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251742241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251742241">(Sep 02 2021 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  I read through the document, and it makes sense. I'll update my PR to handle the Copy case</p>



<a name="251750956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251750956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251750956">(Sep 02 2021 at 17:16)</a>:</h4>
<p><span class="user-mention" data-user-id="281950">@Aman Arora</span> good, add a test too please</p>



<a name="251842858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/251842858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#251842858">(Sep 03 2021 at 08:40)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/88477/files">https://github.com/rust-lang/rust/pull/88477/files</a> updated</p>



<a name="252370849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/252370849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#252370849">(Sep 07 2021 at 20:57)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/88477">https://github.com/rust-lang/rust/pull/88477</a></p>
<p>This is ready for review <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="252370919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/252370919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#252370919">(Sep 07 2021 at 20:57)</a>:</h4>
<p>r+</p>



<a name="252370928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/252370928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#252370928">(Sep 07 2021 at 20:57)</a>:</h4>
<p>thanks!</p>



<a name="252407755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/252407755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#252407755">(Sep 08 2021 at 05:17)</a>:</h4>
<p>what's the process of beta backprort?</p>



<a name="252478012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/issue%20%2388476%20/%20pr%20%2388477/near/252478012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/issue.20.2388476.20.2F.20pr.20.2388477.html#252478012">(Sep 08 2021 at 15:10)</a>:</h4>
<p>The beta backport process is described here: <a href="https://forge.rust-lang.org/release/backporting.html#beta-backporting-in-rust-langrust">https://forge.rust-lang.org/release/backporting.html#beta-backporting-in-rust-langrust</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
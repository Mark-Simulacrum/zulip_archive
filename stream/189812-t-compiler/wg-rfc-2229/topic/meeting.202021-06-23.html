<html>
<head><meta charset="utf-8"><title>meeting 2021-06-23 · t-compiler/wg-rfc-2229 · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/index.html">t-compiler/wg-rfc-2229</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html">meeting 2021-06-23</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="243704697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704697">(Jun 23 2021 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="281950">@Aman Arora</span> I can't make the meeting today!</p>



<a name="243704707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704707">(Jun 23 2021 at 20:01)</a>:</h4>
<p>I thought it was canceled but I think it was not?</p>



<a name="243704737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704737">(Jun 23 2021 at 20:01)</a>:</h4>
<p>That's okay</p>



<a name="243704764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704764">(Jun 23 2021 at 20:02)</a>:</h4>
<p>I am around on zulip for the next 10 minutes or so</p>



<a name="243704828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704828">(Jun 23 2021 at 20:02)</a>:</h4>
<p>main thing on my mind is we need a PR to tie the lint to the edition</p>



<a name="243704836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704836">(Jun 23 2021 at 20:02)</a>:</h4>
<p>So updates would be:</p>
<ul>
<li>Box and edition fix will be going in</li>
</ul>



<a name="243704855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704855">(Jun 23 2021 at 20:02)</a>:</h4>
<ul>
<li>I'll open PR for Rust Reference with those changes in now</li>
</ul>



<a name="243704896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243704896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243704896">(Jun 23 2021 at 20:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/189812-t-compiler.2Fwg-rfc-2229/topic/meeting.202021-06-23/near/243704828">said</a>:</p>
<blockquote>
<p>main thing on my mind is we need a PR to tie the lint to the edition</p>
</blockquote>
<p>I plan on working with Dhruv over this week to get insignificant dtors figured out</p>



<a name="243705120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705120">(Jun 23 2021 at 20:04)</a>:</h4>
<ul>
<li>The optimization seems to work pretty well and I'll clean up the code and open a PR about it</li>
</ul>



<a name="243705229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705229">(Jun 23 2021 at 20:05)</a>:</h4>
<p>thats' awesome</p>



<a name="243705241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705241">(Jun 23 2021 at 20:05)</a>:</h4>
<p>this all sounds great</p>



<a name="243705250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705250">(Jun 23 2021 at 20:05)</a>:</h4>
<p>I was just thinking, you had that nice blog post</p>



<a name="243705263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705263">(Jun 23 2021 at 20:05)</a>:</h4>
<p>yes</p>



<a name="243705267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705267">(Jun 23 2021 at 20:05)</a>:</h4>
<p>still hoping to post it?</p>



<a name="243705273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705273">(Jun 23 2021 at 20:06)</a>:</h4>
<p>Yes</p>



<a name="243705336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705336">(Jun 23 2021 at 20:06)</a>:</h4>
<p>I thought we wanted to land the edition and perf flag before that</p>



<a name="243705347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705347">(Jun 23 2021 at 20:06)</a>:</h4>
<p>That's all I'm waiting on</p>



<a name="243705358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705358">(Jun 23 2021 at 20:06)</a>:</h4>
<p>well working on*</p>



<a name="243705394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705394">(Jun 23 2021 at 20:06)</a>:</h4>
<p><code>cargo +stage1 rustc --lib -- -Zprofile-closures</code> btw this is what will kind of end up looking like</p>



<a name="243705426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705426">(Jun 23 2021 at 20:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281950">Aman Arora</span> <a href="#narrow/stream/189812-t-compiler.2Fwg-rfc-2229/topic/meeting.202021-06-23/near/243705336">said</a>:</p>
<blockquote>
<p>I thought we wanted to land the edition and perf flag before that</p>
</blockquote>
<p>yes, you're correct, that makes sense</p>



<a name="243705443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705443">(Jun 23 2021 at 20:07)</a>:</h4>
<p>that looks great</p>



<a name="243705457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705457">(Jun 23 2021 at 20:07)</a>:</h4>
<p>very cool that this simple optimization worked so well</p>



<a name="243705498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705498">(Jun 23 2021 at 20:07)</a>:</h4>
<p>Yea I'm pretty happy about it</p>



<a name="243705577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705577">(Jun 23 2021 at 20:08)</a>:</h4>
<p>I might put up an test PR to just have bors run some build on it</p>



<a name="243705594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705594">(Jun 23 2021 at 20:08)</a>:</h4>
<p>Just to make sure there aren't any compile failures in what ever it runs</p>



<a name="243705615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705615">(Jun 23 2021 at 20:08)</a>:</h4>
<p>Compiler stdlib rustdoc built fine after the change</p>



<a name="243705674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705674">(Jun 23 2021 at 20:09)</a>:</h4>
<p>I'm worried it's applying when it shouldnt :)</p>



<a name="243705681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705681">(Jun 23 2021 at 20:09)</a>:</h4>
<p>but we'll see when you open the PR</p>



<a name="243705688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705688">(Jun 23 2021 at 20:09)</a>:</h4>
<p>we had a few interesting test cases, right?</p>



<a name="243705691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705691">(Jun 23 2021 at 20:09)</a>:</h4>
<p>i.e., cases that <em>would</em> error if we were overzealous?</p>



<a name="243705695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705695">(Jun 23 2021 at 20:09)</a>:</h4>
<p>we should test those</p>



<a name="243705768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243705768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243705768">(Jun 23 2021 at 20:10)</a>:</h4>
<p>Yes I should do that, I just tested on things that I was profiling on</p>



<a name="243706312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243706312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243706312">(Jun 23 2021 at 20:14)</a>:</h4>
<p>sounds good</p>



<a name="243717456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243717456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dhruv Jauhar <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243717456">(Jun 23 2021 at 21:47)</a>:</h4>
<p>I tried to build the compiler with the lint DISJOINT_CAPTURE_MIGRATION enabled by default and get these errors <a href="/user_uploads/4715/PVcGijxhTjZHAGpOrxIj55Le/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/PVcGijxhTjZHAGpOrxIj55Le/image.png" title="image.png"><img src="/user_uploads/4715/PVcGijxhTjZHAGpOrxIj55Le/image.png"></a></div>



<a name="243717492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189812-t-compiler/wg-rfc-2229/topic/meeting%202021-06-23/near/243717492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/189812-t-compiler/wg-rfc-2229/topic/meeting.202021-06-23.html#243717492">(Jun 23 2021 at 21:47)</a>:</h4>
<p>Maybe we need the lint to only be fired if the closure was needed in used in that context</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>state of inline errors · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html">state of inline errors</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269109336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269109336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269109336">(Jan 24 2022 at 14:01)</a>:</h4>
<p>Hey all. I was talking to <span class="user-mention" data-user-id="211722">@Yoshua Wuyts [he/they]</span> today about how the inline error messages from rust-analyzer in vs code are not always as good as they are when running <code>cargo check</code> in the terminal. Does anyone have any insight into why this is? Is this something we could possibly spend some time improving? Thanks!</p>



<a name="269110058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269110058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269110058">(Jan 24 2022 at 14:06)</a>:</h4>
<p>We have code that maps the rustc diagnostics to LSP diagnostics, we've tuned that a bit already but it could potentially use some more improvements, yeah. Would be great to have an example that isn't optimal.</p>



<a name="269110117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269110117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269110117">(Jan 24 2022 at 14:06)</a>:</h4>
<p>Although LSP is also somewhat more limited than the terminal, so we probably won't be able to fully match it.</p>



<a name="269111229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269111229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269111229">(Jan 24 2022 at 14:14)</a>:</h4>
<p>I believe the hints should be able to render arbitrary markdown though, right?</p>



<a name="269111273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269111273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269111273">(Jan 24 2022 at 14:14)</a>:</h4>
<p>(specifically the mouse-over hints, not the "problems" panel)</p>



<a name="269111901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269111901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269111901">(Jan 24 2022 at 14:19)</a>:</h4>
<p>Diagnostics hovers aren't customizable in VSCode <em>I think</em>. And the LSP doesn't specify anything about the diagnostics message, so markdown isn't supported in there I imagine <a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#diagnostic">https://microsoft.github.io/language-server-protocol/specifications/specification-current/#diagnostic</a></p>



<a name="269112020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269112020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269112020">(Jan 24 2022 at 14:20)</a>:</h4>
<p>I think the biggest problem is that it's hard to visualize errors that point to multiple locations. You get an error in one place and a hint in another, but it's hard to tell how they're connected</p>



<a name="269112317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269112317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269112317">(Jan 24 2022 at 14:23)</a>:</h4>
<p>it'd probably be interesting to look at some examples and brainstorm how they could be best visualized in the editor UI if we disregard LSP / extension limitations</p>



<a name="269112635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269112635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269112635">(Jan 24 2022 at 14:25)</a>:</h4>
<p>oh lol, I even commented on one of those threads: <a href="https://github.com/microsoft/vscode/issues/54272#issuecomment-617670458">https://github.com/microsoft/vscode/issues/54272#issuecomment-617670458</a> (two years ago now)</p>



<a name="269112783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269112783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269112783">(Jan 24 2022 at 14:27)</a>:</h4>
<p>VSCode is unfortunately rather limited when it comes to diagnostic things <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span></p>



<a name="269113058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269113058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269113058">(Jan 24 2022 at 14:29)</a>:</h4>
<p>this is all very helpful, all. What I'm taking away is that we could try and make things happen in the long term, but right now we're actually blocked on the capabilities VS Code exposes.</p>



<a name="269113188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/state%20of%20inline%20errors/near/269113188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/state.20of.20inline.20errors.html#269113188">(Jan 24 2022 at 14:30)</a>:</h4>
<p>Pretty much, we can think of how to express multispan diagnostics and the like in the UI better, but actually prototyping/implementing that(at least in VSCode) wouldn't work.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
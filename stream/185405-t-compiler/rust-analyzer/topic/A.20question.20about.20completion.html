<html>
<head><meta charset="utf-8"><title>A question about completion · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html">A question about completion</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="258636087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258636087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zhou fan <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258636087">(Oct 21 2021 at 23:55)</a>:</h4>
<p>Hello, I'm confused about some tests of completion, such as the following</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">target_type_in_trait_impl_block</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">check</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="s">r#"</span>
<span class="s">impl Trait for Str$0</span>
<span class="s">"#</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">expect</span><span class="o">!</span><span class="p">[[</span><span class="s">r##"</span>
<span class="s">            kw self</span>
<span class="s">            kw super</span>
<span class="s">            kw crate</span>
<span class="s">            tt Trait</span>
<span class="s">            en Enum</span>
<span class="s">            st Record</span>
<span class="s">            st Tuple</span>
<span class="s">            md module</span>
<span class="s">            st Unit</span>
<span class="s">            ma makro!(…) #[macro_export] macro_rules! makro</span>
<span class="s">            un Union</span>
<span class="s">            bt u32</span>
<span class="s">        "##</span><span class="p">]],</span><span class="w"></span>
<span class="w">    </span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>These expectations are very strange to me. What is the relationship between this and the auto completion in VSCode?<br>
<a href="/user_uploads/4715/RcVyiTRQ4PIc-lMq3IfqiLc7/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/RcVyiTRQ4PIc-lMq3IfqiLc7/image.png" title="image.png"><img src="/user_uploads/4715/RcVyiTRQ4PIc-lMq3IfqiLc7/image.png"></a></div>



<a name="258636271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258636271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258636271">(Oct 21 2021 at 23:57)</a>:</h4>
<p>The expect test lists all completions we generate, unfiltered</p>



<a name="258636277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258636277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258636277">(Oct 21 2021 at 23:57)</a>:</h4>
<p>As the filtering is done by the client</p>



<a name="258636304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258636304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258636304">(Oct 21 2021 at 23:57)</a>:</h4>
<p>So whatever is written before the cursor position($0) in the tests doesn't really affect the test results</p>



<a name="258636379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258636379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258636379">(Oct 21 2021 at 23:58)</a>:</h4>
<p>Assuming that's what you were asking about</p>



<a name="258636940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258636940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zhou fan <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258636940">(Oct 22 2021 at 00:04)</a>:</h4>
<p>Yes, that is what I want to ask. In addition, where is the client code? where is the filtering code?</p>



<a name="258637013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258637013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> sim <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258637013">(Oct 22 2021 at 00:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="432755">zhou fan</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/A.20question.20about.20completion/near/258636940">said</a>:</p>
<blockquote>
<p>Yes, this is what I want to ask. In addition, where is the client code? where is the filtering code?</p>
</blockquote>
<p>Probably in the source code of whatever IDE / editor you're using</p>



<a name="258637029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258637029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258637029">(Oct 22 2021 at 00:05)</a>:</h4>
<p>The filtering is done by the client</p>



<a name="258637113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258637113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258637113">(Oct 22 2021 at 00:06)</a>:</h4>
<p>And ye as said, completions are fully handled by vscode, there is no extension code by us for that.</p>



<a name="258637123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258637123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258637123">(Oct 22 2021 at 00:06)</a>:</h4>
<p>Everything completion related fully lives in ide_completion</p>



<a name="258637301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258637301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zhou fan <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258637301">(Oct 22 2021 at 00:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300586">Lukas Wirth</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/A.20question.20about.20completion/near/258637113">said</a>:</p>
<blockquote>
<p>And ye as said, completions are fully handled by vscode, there is no extension code by us for that.</p>
</blockquote>
<p>I see, thank you. It’s very interesting that vscode can actually help filtering</p>



<a name="258637993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258637993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zhou fan <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258637993">(Oct 22 2021 at 00:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300586">Lukas Wirth</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/A.20question.20about.20completion/near/258637113">said</a>:</p>
<blockquote>
<p>And ye as said, completions are fully handled by vscode, there is no extension code by us for that.</p>
</blockquote>
<p>There is another question,  Where can I find the rules for vscode filtering?</p>



<a name="258638035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258638035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258638035">(Oct 22 2021 at 00:17)</a>:</h4>
<p>Not sure whether you can modify those</p>



<a name="258638046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258638046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258638046">(Oct 22 2021 at 00:17)</a>:</h4>
<p>or find them rather</p>



<a name="258638170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258638170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258638170">(Oct 22 2021 at 00:18)</a>:</h4>
<p>I wouldn't know where at least</p>



<a name="258638212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258638212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258638212">(Oct 22 2021 at 00:19)</a>:</h4>
<p>Though there shouldn't be much around  them aside from filtering by prefix I imagine</p>



<a name="258638527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/A%20question%20about%20completion/near/258638527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zhou fan <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/A.20question.20about.20completion.html#258638527">(Oct 22 2021 at 00:22)</a>:</h4>
<p>I don’t think I need to worry about this now. Thanks again</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
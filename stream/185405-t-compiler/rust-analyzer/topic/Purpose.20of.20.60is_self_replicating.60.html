<html>
<head><meta charset="utf-8"><title>Purpose of `is_self_replicating` · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Purpose.20of.20.60is_self_replicating.60.html">Purpose of `is_self_replicating`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277887492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Purpose%20of%20%60is_self_replicating%60/near/277887492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Purpose.20of.20.60is_self_replicating.60.html#277887492">(Apr 05 2022 at 14:31)</a>:</h4>
<p>Does anyone know why this function is needed to guard against macro recursion? <a href="https://github.com/rust-analyzer/rust-analyzer/blob/5a6918f1c4e9d4f0c6a655e6283470f64edd64cf/crates/hir_expand/src/db.rs#L510">https://github.com/rust-analyzer/rust-analyzer/blob/5a6918f1c4e9d4f0c6a655e6283470f64edd64cf/crates/hir_expand/src/db.rs#L510</a></p>
<p>Everything that expands macros already has its own recusion limit, so why do we need this too?</p>



<a name="277888260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Purpose%20of%20%60is_self_replicating%60/near/277888260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Purpose.20of.20.60is_self_replicating.60.html#277888260">(Apr 05 2022 at 14:37)</a>:</h4>
<p>It's from <a href="https://github.com/rust-analyzer/rust-analyzer/issues/8171#issuecomment-805985789=">https://github.com/rust-analyzer/rust-analyzer/issues/8171#issuecomment-805985789=</a></p>



<a name="277888734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Purpose%20of%20%60is_self_replicating%60/near/277888734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Purpose.20of.20.60is_self_replicating.60.html#277888734">(Apr 05 2022 at 14:40)</a>:</h4>
<p>I remember a case where the existing limits weren't enough, but I'm fuzzy on the details. Something wide, but shallow?</p>



<a name="277889034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Purpose%20of%20%60is_self_replicating%60/near/277889034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Purpose.20of.20.60is_self_replicating.60.html#277889034">(Apr 05 2022 at 14:42)</a>:</h4>
<p>The original version of the code was added earlier, to catch a stack overflow I think</p>



<a name="277889260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Purpose%20of%20%60is_self_replicating%60/near/277889260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Purpose.20of.20.60is_self_replicating.60.html#277889260">(Apr 05 2022 at 14:44)</a>:</h4>
<p>here: <a href="https://github.com/rust-analyzer/rust-analyzer/pull/3671">https://github.com/rust-analyzer/rust-analyzer/pull/3671</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>rust-analyzer transition into rust-lang · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html">rust-analyzer transition into rust-lang</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277616479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277616479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277616479">(Apr 03 2022 at 11:36)</a>:</h4>
<p>So our next step right now would be to move the various small crates into the main repo, the crates in question are <code>smol_str</code>, <code>lsp-server</code>, <code>countme</code>, <code>ungrammar</code>, <code>expect-test</code>, <code>rowan</code>, <code>text-size</code>. So the main question here is, which ones do we want to stay as their own repos and which do we want to merge into the main repo. Relevant <a href="https://github.com/rust-analyzer/rust-analyzer/issues/10307">r-a issue #10307</a>.</p>
<p>To be completely honest I feel like merging all into a monorepo seems a bit counter productive though, as issues with those crates will probably drown rather quickly in the big issue list of the main repo. But this worry might be unwarranted?</p>



<a name="277616609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277616609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277616609">(Apr 03 2022 at 11:37)</a>:</h4>
<p>We could probably add new issue labels for those crates specifically which might be enough to resolve that potential problem</p>



<a name="277619842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277619842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277619842">(Apr 03 2022 at 12:07)</a>:</h4>
<p>TBH, today the issues for those crates are drowning in oblivion anyway. It's not clear which one is better: </p>
<ul>
<li>small issue tracker no-one looks at</li>
<li>huge issue tracker some people actually triage</li>
</ul>



<a name="277620133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277620133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277620133">(Apr 03 2022 at 12:09)</a>:</h4>
<p>Ye, I can see that happening as well that is true. I mean, most of those crates don't really get many issues in the first place + if we add issue labels for each of them it sounds somewhat fine to have them in the main repo since you can easily look up specific issues for them then.</p>



<a name="277620259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277620259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277620259">(Apr 03 2022 at 12:10)</a>:</h4>
<p>So I would say we want to move all of them, except for rowan, as that is a rather big library compared to the rest.</p>



<a name="277620498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277620498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277620498">(Apr 03 2022 at 12:12)</a>:</h4>
<p>On that note, does anyone know how to properly merge repos while keeping the history? I googled around a bit in regards to this as well as git subtree but my search didn't result in anything usable :)</p>



<a name="277622067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277622067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277622067">(Apr 03 2022 at 12:27)</a>:</h4>
<p>We had a case for this at <code>$JOB</code> recently (creating a workspace for several related projects). It may depend a bit on the exact result you want (supposedly there are ways to do even better with (potentially manual) rebases; see also <a href="https://stackoverflow.com/questions/42161910/merge-two-git-repositories-and-keep-the-master-history">https://stackoverflow.com/questions/42161910/merge-two-git-repositories-and-keep-the-master-history</a>), but for us we decided it was good enough to guarantee keeping the <code>git log</code>, even if with this method one needs to <code>--follow</code> because of the file moving. But the upside is that for this you only need to </p>
<ul>
<li>check out both repos</li>
<li>make a branch in the one you want to move where you move all the files to the place you want them to be in their new home (e.g. mimic the subdirectory of the workspace you want to put them in in the end) and commit that</li>
<li>go to the target repo and add the source as a remote</li>
<li>merge the source branch that you just created with <code>--allow-unrelated-histories</code></li>
<li>verify everything worked by checking the logs</li>
</ul>
<p>There were some things we adjusted after merging everything, such as moving CI definitions for the (now-)subprojects into a combined one, but I was pleasantly surprised by the lack of any git-related troubles that required human intervention in this process.</p>



<a name="277622423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277622423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277622423">(Apr 03 2022 at 12:30)</a>:</h4>
<p>Thanks! I'll try that out later :)</p>



<a name="277635903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277635903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277635903">(Apr 03 2022 at 14:33)</a>:</h4>
<p>I <em>think</em> that worked? <a href="https://github.com/rust-analyzer/rust-analyzer/pull/11889">https://github.com/rust-analyzer/rust-analyzer/pull/11889</a></p>



<a name="277636417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636417">(Apr 03 2022 at 14:38)</a>:</h4>
<p>Actually, is it important to add the source remote from the github repo, or is it fine to point the remote to my local copy? Not sure if that makes a difference for git hence the question</p>



<a name="277636525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636525">(Apr 03 2022 at 14:39)</a>:</h4>
<p>The two should be equivalent, your local folder is technically a full repo (hence why you can add it as a remote)</p>



<a name="277636564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636564">(Apr 03 2022 at 14:39)</a>:</h4>
<p>Seeing the commits in the PR looks like it worked</p>



<a name="277636653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636653">(Apr 03 2022 at 14:40)</a>:</h4>
<p>Oh, this adds a merge commit, bors does not like that <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="277636677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636677">(Apr 03 2022 at 14:40)</a>:</h4>
<p>This should work with rebasing as well right?</p>



<a name="277636860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636860">(Apr 03 2022 at 14:42)</a>:</h4>
<p>Rebasing would destroy the history relation between the original repo and the new location.</p>



<a name="277636884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636884">(Apr 03 2022 at 14:42)</a>:</h4>
<p>Oh, pro tip btw (though I didn't see how exactly you did it): since the preparation commits all end up in the target repo, I think it makes sense to give them messages already as if they were in the workspace. Otherwise you end up like me - with the last 20 commits in the workspace being "move files into workspace structure" into "merge X" alternating <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="277636999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277636999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277636999">(Apr 03 2022 at 14:43)</a>:</h4>
<p>S<br>
<span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang/near/277636860">말함</a>:</p>
<blockquote>
<p>Rebasing would destroy the history relation between the original repo and the new location.</p>
</blockquote>
<p>So we gotta make bors shut up somehow? <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="277637066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277637066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277637066">(Apr 03 2022 at 14:44)</a>:</h4>
<p>I'd comment-out our merge check for know -- it seems like the case where we actually do want a merge commit</p>



<a name="277637106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277637106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277637106">(Apr 03 2022 at 14:44)</a>:</h4>
<p>to clarify -- this is not bors, this is our test in <code>tidy.rs</code></p>



<a name="277637933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277637933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277637933">(Apr 03 2022 at 14:52)</a>:</h4>
<p>Can we still publish these independently (so you don't download the whole of RA for <code>smol_str</code>? Actually, can we still publish them after moving?</p>



<a name="277637998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277637998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277637998">(Apr 03 2022 at 14:52)</a>:</h4>
<p>TBH, I liked them better outside the RA repo.</p>



<a name="277638826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277638826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277638826">(Apr 03 2022 at 15:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang/near/277637998">말함</a>:</p>
<blockquote>
<p>TBH, I liked them better outside the RA repo.</p>
</blockquote>
<p>I share this sentiment tbf, I am not a fan of generic libraries being part of the main repo</p>



<a name="277639609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277639609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277639609">(Apr 03 2022 at 15:07)</a>:</h4>
<blockquote>
<p>Actually, can we still publish them after moving</p>
</blockquote>
<p>I think, if we do the move, the rule we want is "everything from <code>/libs</code> is used via <a href="http://crates.io">crates.io</a>, not via path deps"</p>



<a name="277639736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277639736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277639736">(Apr 03 2022 at 15:08)</a>:</h4>
<p>As an alternative proposal -- can we just think about moving smaller crates later? :)</p>



<a name="277639745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277639745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277639745">(Apr 03 2022 at 15:08)</a>:</h4>
<p>And some workflows to still publish them when updating the version.</p>



<a name="277640154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640154">(Apr 03 2022 at 15:11)</a>:</h4>
<blockquote>
<p>And some workflows to still publish them when updating the version.</p>
</blockquote>
<p>oh wow we actually do <a href="https://docs.rs/ra_ap_la-arena/latest/ra_ap_la_arena/">https://docs.rs/ra_ap_la-arena/latest/ra_ap_la_arena/</a></p>



<a name="277640296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640296">(Apr 03 2022 at 15:12)</a>:</h4>
<p>Yeah, but.. that's not ideal</p>



<a name="277640298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640298">(Apr 03 2022 at 15:12)</a>:</h4>
<blockquote>
<p>As an alternative proposal -- can we just think about moving smaller crates later? :)</p>
</blockquote>
<p>That is certainly an option as well, I just figured this was the next simplest step, but maybe it makes sense to do/consider this after we moved main repo</p>



<a name="277640448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640448">(Apr 03 2022 at 15:14)</a>:</h4>
<p>In that case given the feedback in <a class="stream" data-stream-id="301329" href="/#narrow/stream/301329-t-devtools">#t-devtools</a> was limited, do we want to split out the vscode extension or not</p>



<a name="277640485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640485">(Apr 03 2022 at 15:14)</a>:</h4>
<p><a href="#narrow/stream/301329-t-devtools/topic/rust-analyzer.20ro.20rust-lang.20org.20transition/near/276721397">https://rust-lang.zulipchat.com/#narrow/stream/301329-t-devtools/topic/rust-analyzer.20ro.20rust-lang.20org.20transition/near/276721397</a></p>



<a name="277640554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640554">(Apr 03 2022 at 15:15)</a>:</h4>
<p>I am still in favor of moving it out personally (there seems to be a general drift for me to separate things out into multiple repos :) )</p>



<a name="277640764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640764">(Apr 03 2022 at 15:17)</a>:</h4>
<p>I think it will make coordinating LSP extension changes really annoying</p>



<a name="277640992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277640992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277640992">(Apr 03 2022 at 15:19)</a>:</h4>
<p>Ye that seems the major downside to it :/</p>



<a name="277641010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277641010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277641010">(Apr 03 2022 at 15:19)</a>:</h4>
<p>Though I guess thats also something we can think about <em>after</em> the move of the r-a repo into the rust-lang org</p>



<a name="277641082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277641082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277641082">(Apr 03 2022 at 15:20)</a>:</h4>
<p>But that's maybe just my experience from an unrelated project: there's a repository for the crate and one for a test suite, depending one on each other, and when you break the API of the crate you have to make a PR to the test runner to use a git dependency to the crate, then update the test runner dependency in the main crate to point to that PR branch</p>



<a name="277641136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277641136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277641136">(Apr 03 2022 at 15:20)</a>:</h4>
<p>It's not the same thing since we're not testing our extension code like this, but.. that one was pretty awful</p>



<a name="277641302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277641302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277641302">(Apr 03 2022 at 15:22)</a>:</h4>
<p>Ye its not quite the same but there is indeed the problem of having two PRs on different repos be interlinked I guess, given the implicit reliance of the extension on the latest server builds.</p>



<a name="277641431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer%20transition%20into%20rust-lang/near/277641431" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/rust-analyzer.20transition.20into.20rust-lang.html#277641431">(Apr 03 2022 at 15:23)</a>:</h4>
<p>I guess we can leave the repos alone for now, I'll get in touch with people to start transferring <code>rust-analyzer/rust-analyzer</code> to <code>rust-lang/rust-analyzer</code> then unless there are other points to raise before ( I've went through my list of things to do for that now )</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
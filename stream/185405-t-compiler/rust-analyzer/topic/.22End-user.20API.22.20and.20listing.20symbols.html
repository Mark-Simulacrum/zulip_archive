<html>
<head><meta charset="utf-8"><title>&quot;End-user API&quot; and listing symbols · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/.22End-user.20API.22.20and.20listing.20symbols.html">&quot;End-user API&quot; and listing symbols</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="223002022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/%22End-user%20API%22%20and%20listing%20symbols/near/223002022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alessandro Re <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/.22End-user.20API.22.20and.20listing.20symbols.html#223002022">(Jan 16 2021 at 19:44)</a>:</h4>
<p>Hello, I would like to perform some analysis over a rust workspace and I'm looking at RA for helping me in that.<br>
To make it concrete, right now I would like to extract a list of all the external symbols used inside a crate. For example, all the symbols in <code>std::</code>, whether they are in <code>use</code> declarations or just used anywhere in the crate's code.</p>
<p>I started using R-A as a LSP server (which I'm not very familiar with): I successfully managed to start the process and query it via stdio, and using <code>textDocument/documentSymbol</code> I managet to get the symbols in the crate... But these are not including <code>use</code> declarations. It seems only crate-defined symbols are listed. Is there a better request for LSP towards this end, maybe?</p>
<p>As an alternative, I saw that R-A has some "end-user" ide API, and other crates that maybe I could use. I couldn't find many details on those, and even if I delved a bit into rustc and I can understand a few things, I'm not very familiar with IDE and compiler development and I'm not sure on how to start.</p>
<p>What could be a good point where to start?<br>
Thank you!</p>



<a name="223127512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/%22End-user%20API%22%20and%20listing%20symbols/near/223127512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/.22End-user.20API.22.20and.20listing.20symbols.html#223127512">(Jan 18 2021 at 14:39)</a>:</h4>
<p>Sadly, there are no good starting points yet -- providing an API is not the current goal of the project. (</p>
<p>Two places to look at would be <code>crates/ide/src/lib.rs</code> and <code>crates/hir/src/code_model.rs</code></p>



<a name="223301297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/%22End-user%20API%22%20and%20listing%20symbols/near/223301297" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alessandro Re <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/.22End-user.20API.22.20and.20listing.20symbols.html#223301297">(Jan 19 2021 at 21:56)</a>:</h4>
<p>A starting point is good, and two are even better :) It's enough to start, thank you for taking some time to answer!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
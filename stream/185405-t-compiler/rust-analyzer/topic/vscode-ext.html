<html>
<head><meta charset="utf-8"><title>vscode-ext · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html">vscode-ext</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="159284487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284487">(Feb 24 2019 at 17:44)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> have you tried vim-ext for vscode? analyzer seems incompatible with vim-ext</p>



<a name="159284531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284531">(Feb 24 2019 at 17:45)</a>:</h4>
<p>No, I haven't tried that. Might be a good idea to run it with RUST_LOG=debug and see what's in the log</p>



<a name="159284584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284584">(Feb 24 2019 at 17:46)</a>:</h4>
<p>A common reason for incompatibility is that the client fails to send an initialized message.</p>



<a name="159284599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284599">(Feb 24 2019 at 17:46)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> okay, I'll try to debug it.</p>



<a name="159284615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284615">(Feb 24 2019 at 17:47)</a>:</h4>
<p>anyway, while searching for "vim", I got: <a href="https://github.com/rust-analyzer/rust-analyzer/search?q=vim&amp;unscoped_q=vim" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/search?q=vim&amp;unscoped_q=vim">https://github.com/rust-analyzer/rust-analyzer/search?q=vim&amp;unscoped_q=vim</a></p>



<a name="159284621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284621">(Feb 24 2019 at 17:47)</a>:</h4>
<p>solution seems already there <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="159284681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284681">(Feb 24 2019 at 17:48)</a>:</h4>
<p>ahh, sorry, I thought that's about VIM the editor, not about vim the vscode plugin</p>



<a name="159284692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284692">(Feb 24 2019 at 17:49)</a>:</h4>
<p>yeah, that's a bad issue without a clear path to fix it : )</p>



<a name="159284822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vipentti <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284822">(Feb 24 2019 at 17:52)</a>:</h4>
<p>Fixing enhancedTyping with VIM would require vscode fix I believe, <a href="https://github.com/Microsoft/vscode/issues/13441" target="_blank" title="https://github.com/Microsoft/vscode/issues/13441">https://github.com/Microsoft/vscode/issues/13441</a></p>



<a name="159284848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159284848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159284848">(Feb 24 2019 at 17:53)</a>:</h4>
<p>This also should really be a part of the protocol, instead of the horrid hack we currently use :)</p>



<a name="159494492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159494492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159494492">(Feb 27 2019 at 09:34)</a>:</h4>
<p>(I changed the name of this stream as QA for the vscode-extension)<br>
<span class="user-mention" data-user-id="133169">@matklad</span> not sure whether vscode itself is the one to blame. how to stop the rust-analyzer poping up this error message? it's a bit annoying.</p>



<a name="159494496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159494496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159494496">(Feb 27 2019 at 09:35)</a>:</h4>
<p><a href="/user_uploads/4715/HcKenHoDZo0GIhneCrErB4A4/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/HcKenHoDZo0GIhneCrErB4A4/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/4715/HcKenHoDZo0GIhneCrErB4A4/pasted_image.png"></a></div>



<a name="159494656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159494656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vipentti <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159494656">(Feb 27 2019 at 09:37)</a>:</h4>
<p>I think it's related to <a href="https://github.com/rust-analyzer/rust-analyzer/blob/4248b39993e2446c66f732ae9e45fb2f564099f5/crates/ra_lsp_server/src/main_loop.rs#L418-L423" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/blob/4248b39993e2446c66f732ae9e45fb2f564099f5/crates/ra_lsp_server/src/main_loop.rs#L418-L423">https://github.com/rust-analyzer/rust-analyzer/blob/4248b39993e2446c66f732ae9e45fb2f564099f5/crates/ra_lsp_server/src/main_loop.rs#L418-L423</a> , we could consider not reporting content modified error to the client</p>



<a name="159494662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159494662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159494662">(Feb 27 2019 at 09:37)</a>:</h4>
<p>that's <a href="https://github.com/Microsoft/vscode-languageserver-node/issues/457" target="_blank" title="https://github.com/Microsoft/vscode-languageserver-node/issues/457">https://github.com/Microsoft/vscode-languageserver-node/issues/457</a>.</p>



<a name="159494714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159494714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159494714">(Feb 27 2019 at 09:38)</a>:</h4>
<p>But yeah, I wonder if just reponding with <code>result: null</code> will work as we want?</p>



<a name="159495312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159495312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vipentti <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159495312">(Feb 27 2019 at 09:48)</a>:</h4>
<p>Is it possible to handle it in vscode client?</p>



<a name="159495357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159495357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159495357">(Feb 27 2019 at 09:49)</a>:</h4>
<p>I think it's possible, but very complicated. Have you tried just returning a <code>null</code> result in the server? Does it blow up something?</p>



<a name="159495541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159495541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vipentti <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159495541">(Feb 27 2019 at 09:52)</a>:</h4>
<p>I have not, I can try in a bit to see if this can fixed easily. It would be nice since the pop-up is somewhat annoying</p>



<a name="159499063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159499063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vipentti <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159499063">(Feb 27 2019 at 10:52)</a>:</h4>
<p>A workaround fix for this issue in <a href="https://github.com/rust-analyzer/rust-analyzer/issues/903" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/903">rust-analyzer#903</a></p>



<a name="159511214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159511214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159511214">(Feb 27 2019 at 13:29)</a>:</h4>
<p>Not sure if it is related but codelens fails to work once that happens and you have to switch files. My guess is that the client is expecting a specific error but I haven't looked into it</p>



<a name="159512149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159512149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vipentti <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159512149">(Feb 27 2019 at 13:35)</a>:</h4>
<p>Have you tried it now, after <a href="https://github.com/rust-analyzer/rust-analyzer/issues/903" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/903">rust-analyzer#903</a> was merged?</p>



<a name="159514066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159514066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159514066">(Feb 27 2019 at 13:49)</a>:</h4>
<p><span class="user-mention" data-user-id="204303">@vipentti</span> not yet but soon, <code>cargo install-code</code> ing<br>
feels good.</p>



<a name="159690115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159690115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159690115">(Mar 01 2019 at 08:57)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span>  ra_lsp failed to figure out the implementations here: <br>
<a href="/user_uploads/4715/AP-PSGJy4v2TbeyqwWH4jNS5/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/AP-PSGJy4v2TbeyqwWH4jNS5/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/4715/AP-PSGJy4v2TbeyqwWH4jNS5/pasted_image.png"></a></div>



<a name="159701131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159701131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159701131">(Mar 01 2019 at 11:06)</a>:</h4>
<p>Might be related to the generic param defaults <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="159709600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159709600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159709600">(Mar 01 2019 at 12:55)</a>:</h4>
<p>Yeah we don't handle generics in this case.</p>



<a name="159709628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159709628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159709628">(Mar 01 2019 at 12:55)</a>:</h4>
<p>I would assume that 'go to implementation' in vscode also fails on the above</p>



<a name="159709675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159709675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159709675">(Mar 01 2019 at 12:56)</a>:</h4>
<p>since the codelens uses that internally</p>



<a name="159719936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159719936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159719936">(Mar 01 2019 at 14:52)</a>:</h4>
<p>@csmoe where can i find that snippet?</p>



<a name="159719971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159719971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159719971">(Mar 01 2019 at 14:53)</a>:</h4>
<p>I have a simple case with those features and it seems to work</p>



<a name="159723742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext/near/159723742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/vscode-ext.html#159723742">(Mar 01 2019 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> it's from rustc codebase</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
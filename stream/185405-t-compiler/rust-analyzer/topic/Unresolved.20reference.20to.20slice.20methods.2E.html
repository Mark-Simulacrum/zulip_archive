<html>
<head><meta charset="utf-8"><title>Unresolved reference to slice methods. · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html">Unresolved reference to slice methods.</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277495511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277495511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277495511">(Apr 02 2022 at 00:59)</a>:</h4>
<p>I seem to have a lot of unresolved references for slice functions.</p>
<p>For example, see: this image: <a href="/user_uploads/4715/8GVlBZq-1tU-FHMYRbgKpNu_/Screen-Shot-2022-04-01-at-5.54.14-PM.png">Screen-Shot-2022-04-01-at-5.54.14-PM.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/8GVlBZq-1tU-FHMYRbgKpNu_/Screen-Shot-2022-04-01-at-5.54.14-PM.png" title="Screen-Shot-2022-04-01-at-5.54.14-PM.png"><img src="/user_uploads/4715/8GVlBZq-1tU-FHMYRbgKpNu_/Screen-Shot-2022-04-01-at-5.54.14-PM.png"></a></div><p>The red+underline on <code>len()</code> and such are coming from the semantic scope for <code>unresolvedReference</code>. This happens on prerelease and stable. Is this a known issue?</p>



<a name="277495745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277495745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277495745">(Apr 02 2022 at 01:03)</a>:</h4>
<p>This is not a known problem no</p>



<a name="277495800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277495800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277495800">(Apr 02 2022 at 01:04)</a>:</h4>
<p>Is there anything special going in that file? <code>#[cfg(...)]</code> attributes etc?</p>



<a name="277496145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277496145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277496145">(Apr 02 2022 at 01:10)</a>:</h4>
<p>Not at all</p>



<a name="277496163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277496163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277496163">(Apr 02 2022 at 01:11)</a>:</h4>
<p>Hmm, it works fine for me for slice methods like in the screenshot :/</p>



<a name="277496340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277496340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277496340">(Apr 02 2022 at 01:15)</a>:</h4>
<p>is that code inside of an proc-macro attribute annotated item?</p>



<a name="277496390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277496390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277496390">(Apr 02 2022 at 01:16)</a>:</h4>
<p>Judging from the indentation I'd guess not, odd. Not sure what could cause that</p>



<a name="277496963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277496963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277496963">(Apr 02 2022 at 01:27)</a>:</h4>
<p>No, it's just a normal module</p>



<a name="277496965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277496965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277496965">(Apr 02 2022 at 01:27)</a>:</h4>
<p>give me a second and i'll upload it to github</p>



<a name="277497129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277497129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277497129">(Apr 02 2022 at 01:31)</a>:</h4>
<p><a href="https://github.com/thomcc/envparse/blob/main/src/parse.rs#L81-L100">https://github.com/thomcc/envparse/blob/main/src/parse.rs#L81-L100</a></p>



<a name="277497135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277497135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277497135">(Apr 02 2022 at 01:31)</a>:</h4>
<p>(that code is not yet tested very much fyi, but that is probably irrelevant)</p>



<a name="277497182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277497182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277497182">(Apr 02 2022 at 01:32)</a>:</h4>
<p>(... tbh i did the <code>matches!</code> mostly because r-a wouldn't autocomplete is_ascii_whitespace() and i couldn't remember if there was a _ between white and space)</p>



<a name="277497213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277497213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277497213">(Apr 02 2022 at 01:34)</a>:</h4>
<p>This is on vscode insiders, if it matters. version:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Version</span>: <span class="mf">1.67.0</span><span class="o">-</span><span class="n">insider</span><span class="w"> </span><span class="p">(</span><span class="n">Universal</span><span class="p">)</span><span class="w"></span>
<span class="n">Commit</span>: <span class="mi">8</span><span class="n">b7086afdbfd42bf6e7b8c0bb586530bf7cf1396</span><span class="w"></span>
<span class="n">Date</span>: <span class="mi">2022</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">01</span><span class="n">T05</span>:<span class="mi">16</span>:<span class="mf">51.251</span><span class="n">Z</span><span class="w"></span>
<span class="n">Electron</span>: <span class="mf">17.3.0</span><span class="w"></span>
<span class="n">Chromium</span>: <span class="mf">98.0.4758.141</span><span class="w"></span>
<span class="n">Node</span><span class="p">.</span><span class="n">js</span>: <span class="mf">16.13.0</span><span class="w"></span>
<span class="n">V8</span>: <span class="mf">9.8.177.13</span><span class="o">-</span><span class="n">electron</span><span class="p">.</span><span class="mi">0</span><span class="w"></span>
<span class="n">OS</span>: <span class="nc">Darwin</span><span class="w"> </span><span class="n">arm64</span><span class="w"> </span><span class="mf">21.4.0</span><span class="w"></span>
</code></pre></div>



<a name="277497255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277497255" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277497255">(Apr 02 2022 at 01:34)</a>:</h4>
<p>which is the latest.</p>



<a name="277497263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277497263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277497263">(Apr 02 2022 at 01:34)</a>:</h4>
<p>it actually seems like a lot of things from libcore don't have methods. str, Option, etc.</p>



<a name="277498382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277498382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277498382">(Apr 02 2022 at 01:52)</a>:</h4>
<p>Filed <a href="https://github.com/rust-analyzer/rust-analyzer/issues/11876">https://github.com/rust-analyzer/rust-analyzer/issues/11876</a></p>



<a name="277498588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277498588" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277498588">(Apr 02 2022 at 01:55)</a>:</h4>
<p>It has some more info. In particular it seems like r-a might be failing to resolve inherent methods of things from libcore. It manages to resolve other things, including non-inherent methods.</p>
<p>This is not specific to this workspace, and is true for all workspaces on this machine. I haven't checked other machines, but I didn't notice this before (although my work machine may have a pinned r-a version, so that may mean nothing).</p>
<p>It doesn't seem to be impacted by the existence of the <a href="http://build.rs">build.rs</a>, by the <code>#[no_std]</code>, or by the <code>const</code>ness of the function.</p>



<a name="277498832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277498832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277498832">(Apr 02 2022 at 01:58)</a>:</h4>
<p>Oh, it seems like it goes away if I don't use nightly rust.</p>



<a name="277498843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Unresolved%20reference%20to%20slice%20methods./near/277498843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Unresolved.20reference.20to.20slice.20methods.2E.html#277498843">(Apr 02 2022 at 01:59)</a>:</h4>
<p>I can live with that for a little bit I guess</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
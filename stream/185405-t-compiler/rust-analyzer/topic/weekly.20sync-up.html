<html>
<head><meta charset="utf-8"><title>weekly sync-up · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html">weekly sync-up</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="174782334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782334">(Sep 03 2019 at 12:20)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="174782378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782378">(Sep 03 2019 at 12:21)</a>:</h4>
<p>So, yeah, last Friday I spent some time reading into Chalk and (somewhat) into the RLS</p>



<a name="174782389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782389" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782389">(Sep 03 2019 at 12:21)</a>:</h4>
<p>Trying to remember the lay of the land</p>



<a name="174782468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782468" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782468">(Sep 03 2019 at 12:22)</a>:</h4>
<p>I came up with a number of improvements and steps that we could take in/around Chalk, but they're kind of low-level specifics.</p>



<a name="174782492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782492" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782492">(Sep 03 2019 at 12:23)</a>:</h4>
<p>I guess it's worth stepping back a bit to review our overall goals over this week etc</p>



<a name="174782498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782498" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782498">(Sep 03 2019 at 12:23)</a>:</h4>
<p>I'd say the high order bit right now is fixing the "chalk spins CPU at 100%" problem</p>



<a name="174782559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782559">(Sep 03 2019 at 12:24)</a>:</h4>
<p>Well, depends I guess ;)</p>



<a name="174782569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782569">(Sep 03 2019 at 12:24)</a>:</h4>
<p>Yeah, reviewing goals seems right, but let me quickly note that happend on the ra side recently</p>



<a name="174782581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782581">(Sep 03 2019 at 12:24)</a>:</h4>
<p>go for it</p>



<a name="174782628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782628">(Sep 03 2019 at 12:25)</a>:</h4>
<ul>
<li>I mostly did cleanups and refactorings</li>
<li>florian integrated more chalk bits around associated types</li>
<li>the notify library, which we use for watching files, is abandoned.</li>
</ul>



<a name="174782705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782705">(Sep 03 2019 at 12:26)</a>:</h4>
<p>The last bit is interesting, in that I think starts are aligned perfectly to make us reconsider file watching and general interractions with file system. I'd love to transition to lazy file loading</p>



<a name="174782722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782722">(Sep 03 2019 at 12:26)</a>:</h4>
<p>(hence that question in salsa's zulip)</p>



<a name="174782747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782747">(Sep 03 2019 at 12:26)</a>:</h4>
<p>Yeah, that is interesting</p>



<a name="174782752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782752" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782752">(Sep 03 2019 at 12:27)</a>:</h4>
<p>oh, and, on rustc side, I do first small steps to make rustc parser use the same token model as proc-macros use (with jointness)</p>



<a name="174782759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782759">(Sep 03 2019 at 12:27)</a>:</h4>
<p>that's all I can remember I guess?</p>



<a name="174782845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782845">(Sep 03 2019 at 12:28)</a>:</h4>
<p>So I guess one question is -- we had planned to have a compiler team meeting. One of my immediate goals was to .. figure out what to be discussing there.</p>



<a name="174782907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174782907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174782907">(Sep 03 2019 at 12:29)</a>:</h4>
<p>I guess I can see a few things to do</p>



<a name="174783033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783033" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783033">(Sep 03 2019 at 12:30)</a>:</h4>
<p>Say more?</p>



<a name="174783040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783040">(Sep 03 2019 at 12:30)</a>:</h4>
<p>Well I don't think we're going to be in a position to propose a detailed technical propsal around chalk -- but we could focus on improving the experience in rust-analyzer and try to give an overview of where it is and discuss the idea of trying to extract chalk/type-checker into shared library, and maybe float out some of the challenges there.</p>



<a name="174783074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783074" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783074">(Sep 03 2019 at 12:31)</a>:</h4>
<p>I was vacillating about how much it makes sense to try and propose specific technical designs</p>



<a name="174783079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783079">(Sep 03 2019 at 12:31)</a>:</h4>
<p>But I think the answer is probably <del>not at all</del> relatively little, at least not yet</p>



<a name="174783175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783175">(Sep 03 2019 at 12:33)</a>:</h4>
<p>I am not sure: I think, at least in general terms, everyone is on board with the idea. So, I think it would be valuable to:</p>
<ul>
<li>highlight specific problems/prerequisites </li>
<li>find interested folks on the compiler side of things</li>
</ul>



<a name="174783208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783208" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783208">(Sep 03 2019 at 12:33)</a>:</h4>
<blockquote>
<p>I'd say the high order bit right now is fixing the "chalk spins CPU at 100%" problem</p>
</blockquote>
<p>On this topic, one thing I was thinking about was that it'd be nice to have a mode for RA (or chalk, perhaps) where it can basically dump out a self-contained <code>foo.chalk</code> file that tracks the goal(s) it is solving, so that we can easily reproduce these problems and isolate them</p>



<a name="174783321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783321">(Sep 03 2019 at 12:34)</a>:</h4>
<p>Would that really be more useful than dumping the rust source-code?</p>



<a name="174783336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783336">(Sep 03 2019 at 12:35)</a>:</h4>
<p>seems like yes</p>



<a name="174783363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783363">(Sep 03 2019 at 12:35)</a>:</h4>
<p>it could be minimzed more readily, I think, and it's smaller than the rust source code</p>



<a name="174783380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783380">(Sep 03 2019 at 12:35)</a>:</h4>
<p>Like, I think it doesn't really help with isolation: a small source file and a small goal look pretty equivalent to me? You can <code>dbg!(goal)</code> at the entry to chalk to see the actual goal.</p>



<a name="174783465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783465">(Sep 03 2019 at 12:36)</a>:</h4>
<p>it's more about the "environment" around the goal</p>



<a name="174783467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783467">(Sep 03 2019 at 12:36)</a>:</h4>
<p>And for minimization the biggest problem seems to the the envirionment with a lot of traits, and minimizing that seems not easy either way?</p>



<a name="174783469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783469">(Sep 03 2019 at 12:36)</a>:</h4>
<p>right now you have to debug that from within rust-analyzer</p>



<a name="174783497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783497" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783497">(Sep 03 2019 at 12:37)</a>:</h4>
<p>I'd like to be able to create stronger boundaries, so that you can debug and test chalk problems without really knowing much about rust-analyzer</p>



<a name="174783518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783518">(Sep 03 2019 at 12:37)</a>:</h4>
<p>I feel like that's some of the <em>promise</em> of library-ification is to enable these sorts of boundaries</p>



<a name="174783534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783534">(Sep 03 2019 at 12:37)</a>:</h4>
<p>(speaking as someone who feels "uncomfortable" in the r-a code base, I can attest it'd be nice if there were some standalone file I could load up into chalk)</p>



<a name="174783538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783538" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783538">(Sep 03 2019 at 12:37)</a>:</h4>
<p>that's true :)</p>



<a name="174783591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783591">(Sep 03 2019 at 12:38)</a>:</h4>
<p>that said I agree it's maybe more of a "side goal"</p>



<a name="174783607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783607" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783607">(Sep 03 2019 at 12:38)</a>:</h4>
<p>One thing to note about the Chalk-spinning-problem is that we're currently still producing a lot of 'broken' clauses (because of name resolution bugs or missing features), so in the cases I've looked into the problem seemed to me to be that it was enumerating solutions for some subgoal where in the end the final goal had no solution. My point being, maybe these problems aren't really representative of 'real' situations, where usually only a few clauses/impls are broken like that :)</p>



<a name="174783608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783608">(Sep 03 2019 at 12:38)</a>:</h4>
<blockquote>
<p>I am not sure: I think, at least in general terms, everyone is on board with the idea. So, I think it would be valuable to:</p>
<ul>
<li>highlight specific problems/prerequisites </li>
<li>find interested folks on the compiler side of things</li>
</ul>
</blockquote>
<p>in any case you're probably right about this</p>



<a name="174783616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783616">(Sep 03 2019 at 12:38)</a>:</h4>
<p>Actually, I think figuring out such things should be the primary goal !</p>



<a name="174783646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783646">(Sep 03 2019 at 12:39)</a>:</h4>
<p>It seems like retrofit such inspectability would be hard after the fact</p>



<a name="174783670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783670">(Sep 03 2019 at 12:39)</a>:</h4>
<p>the main problem I see here is that we want pull-based interface from chalk: there isn't a "world" that we can just <code>serde_json::to_string</code>, we have a bunch of callbacks...</p>



<a name="174783735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783735">(Sep 03 2019 at 12:40)</a>:</h4>
<p>well, chalk pulls info from r-a;</p>



<a name="174783745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783745">(Sep 03 2019 at 12:40)</a>:</h4>
<p>I was imagining that a given engine incarnation would gradually dump the info it pulls as it pulls it into a file</p>



<a name="174783747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783747">(Sep 03 2019 at 12:40)</a>:</h4>
<p>along with goals</p>



<a name="174783753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783753">(Sep 03 2019 at 12:40)</a>:</h4>
<p>so you could kind of load that up and "replay"</p>



<a name="174783767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783767">(Sep 03 2019 at 12:40)</a>:</h4>
<p>so, a very relevant question -- I think recently you were asking <span class="user-mention" data-user-id="133169">@matklad</span> about integration vs unit tests</p>



<a name="174783801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783801">(Sep 03 2019 at 12:41)</a>:</h4>
<p>I guess a real question is</p>



<a name="174783826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783826" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783826">(Sep 03 2019 at 12:41)</a>:</h4>
<p>suppose we encountered some bug in chalk via rust-analyzer, would we want to (as I'm vagualy proposing) extract out a <code>.chalk</code>  file and add that as a unit test to chalk,</p>



<a name="174783829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783829">(Sep 03 2019 at 12:41)</a>:</h4>
<p>or try to reduce it to Rust source</p>



<a name="174783843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783843">(Sep 03 2019 at 12:41)</a>:</h4>
<p>I think in general I tend towards the latter because it's more "canonical"</p>



<a name="174783917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783917">(Sep 03 2019 at 12:42)</a>:</h4>
<p>but I think in some ideal world we'd have relatively robust, Rust-like interfaces</p>



<a name="174783950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783950" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783950">(Sep 03 2019 at 12:43)</a>:</h4>
<p>anyway, that's kind of a bigger scope than I was initially imagining :) beacuse you wouldn't want like serialized chalk data structures, but some Rust-subset or something that captures the problem setup I guess?</p>



<a name="174783972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174783972" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174783972">(Sep 03 2019 at 12:43)</a>:</h4>
<p>plausible, just more complex</p>



<a name="174784055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784055">(Sep 03 2019 at 12:44)</a>:</h4>
<p>So, I think what we really want for tests is "data in, data out" setup</p>



<a name="174784085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784085" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784085">(Sep 03 2019 at 12:44)</a>:</h4>
<p>Boundary which is not data, but is an interface (callbacks, etc) is much harder to keep stable</p>



<a name="174784109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784109">(Sep 03 2019 at 12:45)</a>:</h4>
<blockquote>
<p>One thing to note about the Chalk-spinning-problem is that we're currently still producing a lot of 'broken' clauses  ...</p>
</blockquote>
<p>interesting, btw, I hadn't realize that.</p>



<a name="174784113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784113">(Sep 03 2019 at 12:45)</a>:</h4>
<blockquote>
<p>So, I think what we really want for tests is "data in, data out" setup</p>
</blockquote>
<p>Yes for sure this</p>



<a name="174784119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784119">(Sep 03 2019 at 12:45)</a>:</h4>
<p>And I think also that the "data in" has to be pretty high-level</p>



<a name="174784121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784121">(Sep 03 2019 at 12:45)</a>:</h4>
<p>So, for thinkgs like lexing or parsing where the input and output data has simple format, unit-tests and this boundary seem OK</p>



<a name="174784128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784128" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784128">(Sep 03 2019 at 12:45)</a>:</h4>
<p>Something like a <code>.chalk</code> file is actually pretty plausible (i.e., some subset of Rust syntax)</p>



<a name="174784248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784248">(Sep 03 2019 at 12:46)</a>:</h4>
<p>Seems so</p>



<a name="174784253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784253" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784253">(Sep 03 2019 at 12:47)</a>:</h4>
<p>It seems like this should be part of the "things we figure out" when deciding on a good library boundary</p>



<a name="174784291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784291" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784291">(Sep 03 2019 at 12:47)</a>:</h4>
<p>(BTW, I like how Swift .SIL is a real well-defined intermediate langauge which you can read from string)</p>



<a name="174784316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784316">(Sep 03 2019 at 12:47)</a>:</h4>
<p>I'd like to see MIR becoming comparably stable (and spec'd)</p>



<a name="174784325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784325">(Sep 03 2019 at 12:47)</a>:</h4>
<p>In any case, to circle back a bit, re: chalk spinning and being slow</p>



<a name="174784389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784389" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784389">(Sep 03 2019 at 12:48)</a>:</h4>
<p>So one thing that <span class="user-mention" data-user-id="129457">@Florian Diebold</span> pointed out to me was issues around normalization; I have specific thoughts on those, but I'll try to write them out in chalk issues / on that channel</p>



<a name="174784407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784407">(Sep 03 2019 at 12:48)</a>:</h4>
<p>But more deeply I am wondering about two options:</p>



<a name="174784433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784433">(Sep 03 2019 at 12:48)</a>:</h4>
<ul>
<li>Some kind of "cutoff" mechanism, fuel-esque</li>
<li>Investing the specific problems first</li>
</ul>



<a name="174784479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784479" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784479">(Sep 03 2019 at 12:49)</a>:</h4>
<p>I think for fuel (as I wrote somewhere) what I'd want to do is to refactor chalk's loop to not do looping, so that fuel can be enforced more at the r-a level (stop pulling for answers after enough iterations)</p>



<a name="174784510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784510">(Sep 03 2019 at 12:49)</a>:</h4>
<p>(though <span class="user-mention" data-user-id="129457">@Florian Diebold</span> had some concerns, we can discuss that a bit separately)</p>



<a name="174784571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784571">(Sep 03 2019 at 12:50)</a>:</h4>
<p>the main question is: prioritize the general mechanism first? or solve the specific bugs?</p>



<a name="174784579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784579">(Sep 03 2019 at 12:50)</a>:</h4>
<p>it feels like the general mechanism will be needed at the end of the day no matter what</p>



<a name="174784590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784590">(Sep 03 2019 at 12:50)</a>:</h4>
<p>Specific bugs should have priority</p>



<a name="174784599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784599" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784599">(Sep 03 2019 at 12:50)</a>:</h4>
<p>fuel can too easily mask bugs</p>



<a name="174784606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784606" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784606">(Sep 03 2019 at 12:50)</a>:</h4>
<p>Interesting</p>



<a name="174784633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784633">(Sep 03 2019 at 12:51)</a>:</h4>
<blockquote>
<p>fuel can too easily mask bugs</p>
</blockquote>
<p>yeah so this is what I was wrestling back and forth with :)</p>



<a name="174784881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784881" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784881">(Sep 03 2019 at 12:54)</a>:</h4>
<blockquote>
<p>(though <span class="user-mention silent" data-user-id="129457">Florian Diebold</span> had some concerns, we can discuss that a bit separately)</p>
</blockquote>
<p>not so much concerns as, I couldn't figure out a good way to do it ;)</p>



<a name="174784885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784885">(Sep 03 2019 at 12:54)</a>:</h4>
<blockquote>
<p>My point being, maybe these problems aren't really representative of 'real' situations, where usually only a few clauses/impls are broken like that :)</p>
</blockquote>
<p>It still would be nice if chalk degraded gracefully in such cases. Like, if you mistyped a dependency name in Cargo.toml you still can get a lot of broken code even for "normal" projects</p>



<a name="174784965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174784965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174784965">(Sep 03 2019 at 12:55)</a>:</h4>
<p>yeah, it would probably be fine if that was caught by fuel though</p>



<a name="174785155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785155">(Sep 03 2019 at 12:58)</a>:</h4>
<p>fine, yeah, but not perfect. I think ideally fuel should be required only for explicitelly adversary code, like "look at my type-level Turing machine!". For random garbage, I intuitively feel that arriving an "there's no answer" should be fast</p>



<a name="174785174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785174" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785174">(Sep 03 2019 at 12:58)</a>:</h4>
<p>I'm trying to summarize up some of our thoughts so far</p>
<p>1. For meeting, we should be thinking about identifying key technical challenges and maybe proposing specific boundaries to explore<br>
    - interesting question: what do unit tests look like? How can we enable people to be experts on one side but not the other? <br>
2. For chalk and r-a etc, let's look at r-a pain points and try to diagnose them<br>
    - fuel is a somewhat lower priority<br>
3. experience from the second point kind of feeds into the first</p>



<a name="174785201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785201" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785201">(Sep 03 2019 at 12:59)</a>:</h4>
<p>seems like zulip's markdown parser doesn't like my mixed bullet/numbered/indented lists but hopefully can you read that :)</p>



<a name="174785318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785318">(Sep 03 2019 at 13:00)</a>:</h4>
<p>4. file IO is another acute pain point at the moment, which needs attention</p>



<a name="174785379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785379">(Sep 03 2019 at 13:01)</a>:</h4>
<p>As far as specific boundaries for libraries, I think that there is an obvious one that encompasses:</p>
<ul>
<li>chalk + type inference + <em>maybe</em> coercion</li>
</ul>
<p>and then there's another level up that includes the type checker. The distinction I am drawing is basically that the type checker requires us to model the HIR and the full set of Rust expressions.</p>



<a name="174785403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785403">(Sep 03 2019 at 13:01)</a>:</h4>
<blockquote>
<p>How can we enable people to be experts on one side but not the other? </p>
</blockquote>
<p>Unit tests should also help tremendously with rebuild times: i guess building only chalk is much faster than building ra + chalk (and we really should be splitting our <code>ra_hir</code> which does <em>everything</em> into crates )</p>



<a name="174785407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785407">(Sep 03 2019 at 13:01)</a>:</h4>
<blockquote>
<p>4. file IO is another acute pain point at the moment, which needs attention</p>
</blockquote>
<p>yes and this is partially a salsa problem, right? We can discuss a bit more about how to model "lazy inputs" on the salsa side, it doesn't seem all <em>that</em> hard to me</p>



<a name="174785479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785479" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785479">(Sep 03 2019 at 13:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  what do you mean by "type inference" separate from type checking there?</p>



<a name="174785483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785483" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785483">(Sep 03 2019 at 13:02)</a>:</h4>
<p>Yeah, salsa's part seems easy, what is hard is cross-platform file watching</p>



<a name="174785531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785531" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785531">(Sep 03 2019 at 13:03)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> I mean encompassing operations like <code>T1 &lt;: T2</code> (make T1 and subtype of T2) and "coerce T1 to T2"</p>



<a name="174785555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785555">(Sep 03 2019 at 13:03)</a>:</h4>
<p>basically, you can think of type-checking as "generating a bunch of constraints" and "solving a bunch of constraints" -- I am separating out the <em>solving</em> part</p>



<a name="174785567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785567" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785567">(Sep 03 2019 at 13:03)</a>:</h4>
<p>the <em>generation</em> comes from walking the HIR</p>



<a name="174785570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785570" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785570">(Sep 03 2019 at 13:03)</a>:</h4>
<p>ah ok</p>



<a name="174785677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785677">(Sep 03 2019 at 13:04)</a>:</h4>
<p>OK. So I think I'll have some more time to devote to this late this afternoon or tomorrow. I'm going to try to convert some of my current thoughts into a vague paper doc and send it to y'all for feedback -- and maybe hack a bit on chalk because I can't help myself :P</p>



<a name="174785700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785700" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785700">(Sep 03 2019 at 13:05)</a>:</h4>
<blockquote>
<p>Yeah, salsa's part seems easy, what is hard is cross-platform file watching</p>
</blockquote>
<p>I feel I <em>personally</em> don't have much to contribute to that latter bit :)</p>



<a name="174785723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785723">(Sep 03 2019 at 13:05)</a>:</h4>
<p>That's a good example of the kind of thing I endeavor not to learn :P</p>



<a name="174785769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785769">(Sep 03 2019 at 13:06)</a>:</h4>
<p>I'd rather not to as well, but I fear I had to :D</p>



<a name="174785827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785827" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785827">(Sep 03 2019 at 13:06)</a>:</h4>
<p>that and linkers</p>



<a name="174785859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785859">(Sep 03 2019 at 13:06)</a>:</h4>
<p>In all seriousness, though, and I guess we want to be sure to keep in mind use cases like FB, where there are too many files -- but I guess that's somewhat addressed just by laziness.</p>



<a name="174785897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785897" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785897">(Sep 03 2019 at 13:07)</a>:</h4>
<p>Yeah, that's another recent conversation that convinced me that the current eager model is no right</p>



<a name="174785948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174785948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174785948">(Sep 03 2019 at 13:07)</a>:</h4>
<p>(I suggest we table file-watching discussion though, for the lack of relevant expertise among participants :) )</p>



<a name="174786290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174786290" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174786290">(Sep 03 2019 at 13:11)</a>:</h4>
<blockquote>
<p>and maybe hack a bit on chalk because I can't help myself :P</p>
</blockquote>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I've noticed that "trivial" prs like "update deps" are not merged into chalk on a timely basis. Do you think we should try to actively seek chalks co-maintainer?</p>



<a name="174786315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174786315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174786315">(Sep 03 2019 at 13:11)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> so concerning using Chalk's <code>Ty</code> from RA, there are a few points that come to mind:<br>
 - I think we need a <code>Ty::Error</code> in Chalk (I currently handle this in a not-great way that may actually be contributing to the hangs)<br>
 - it would be nice if we could get rid of the <code>lalrpop_intern::InternedString</code> in <code>UnselectedProjectionTy</code>, maybe we could just introduce a new Id type for associated type names? I'd be up for trying that out</p>



<a name="174830858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/174830858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#174830858">(Sep 03 2019 at 21:24)</a>:</h4>
<p>we could and probably should remove the "unselected" stuff for now</p>



<a name="175150433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175150433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175150433">(Sep 07 2019 at 18:24)</a>:</h4>
<p>In term of reproducing a problem, I've spend the last hour looking at the cycling error (in macro expansion) on <code>CrateId(52)</code> somewhere in rustc. I guess a nice first step would be to add <code>crate.dbg(db)</code> method, which prints actually useful information. I am somewhat proud by the fact that so little information is exposed to our HIR, but debugging is a pain in the back due to this</p>



<a name="175263348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263348">(Sep 09 2019 at 17:24)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="133169">@matklad</span> so I'm around now-ish at last</p>



<a name="175263354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263354">(Sep 09 2019 at 17:24)</a>:</h4>
<p>You still around?</p>



<a name="175263365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263365">(Sep 09 2019 at 17:24)</a>:</h4>
<p>yep!</p>



<a name="175263446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263446">(Sep 09 2019 at 17:25)</a>:</h4>
<p>So, some things that has happend:</p>
<ul>
<li>new mode to use client-provided file watching capabilities instead of notify</li>
</ul>



<a name="175263514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263514" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263514">(Sep 09 2019 at 17:26)</a>:</h4>
<ul>
<li>looking into watchman API to have something editor-indenepdent and Facebook grade. Still don't see the bottom :)</li>
</ul>



<a name="175263534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263534">(Sep 09 2019 at 17:26)</a>:</h4>
<p>what is "watchman"?</p>



<a name="175263548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263548">(Sep 09 2019 at 17:26)</a>:</h4>
<p>i.e., is that some pre-existing library?</p>



<a name="175263565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263565">(Sep 09 2019 at 17:27)</a>:</h4>
<ul>
<li>some initial debug-priting infra for hir, so that <code>println!("{:?}")</code> shows not <code>Crate(CrateId(92))</code> but <code>Crate(name: "foo", path: "src/lib.rs" )</code></li>
</ul>



<a name="175263572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263572">(Sep 09 2019 at 17:27)</a>:</h4>
<p>Watchman is Facebooks daemon for file watching</p>



<a name="175263676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263676">(Sep 09 2019 at 17:28)</a>:</h4>
<p>Ie, it is sort of a "library" for file watching, but it exists in a separate process, because OS APIs are horrible and it's hard to make a library</p>



<a name="175263735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263735">(Sep 09 2019 at 17:29)</a>:</h4>
<ul>
<li>we've got some nice macro name resolution improvements from <a href="https://github.com/uHOOCCOOHu" target="_blank" title="https://github.com/uHOOCCOOHu">https://github.com/uHOOCCOOHu</a></li>
</ul>



<a name="175263886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263886">(Sep 09 2019 at 17:30)</a>:</h4>
<ul>
<li><span class="user-mention" data-user-id="129457">@Florian Diebold</span> added more trait stff (<a href="https://github.com/rust-analyzer/rust-analyzer/pull/1786" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/1786">https://github.com/rust-analyzer/rust-analyzer/pull/1786</a>)</li>
</ul>



<a name="175263955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175263955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175263955">(Sep 09 2019 at 17:31)</a>:</h4>
<ul>
<li>I've looked deeper into transofrming rustc's parser to jointness token model, and realised that rust-analyzer's parse also deals with jointness in a questionable way, so fixing that atm</li>
</ul>



<a name="175264004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264004">(Sep 09 2019 at 17:31)</a>:</h4>
<p>And I think that's all bigger things that have happend since last week</p>



<a name="175264014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264014">(Sep 09 2019 at 17:31)</a>:</h4>
<p>ok. On my part not much has happened :) but I'm thinking about this upcoming Fri meeting</p>



<a name="175264092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264092" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264092">(Sep 09 2019 at 17:32)</a>:</h4>
<p>On Friday I was <em>mostly</em> focused on looking into some soundness related problems unrelated to rust-analyzer :)</p>



<a name="175264103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264103" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264103">(Sep 09 2019 at 17:32)</a>:</h4>
<p>That and reviewing various PRs</p>



<a name="175264304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264304">(Sep 09 2019 at 17:35)</a>:</h4>
<p>Anyway I'm going to try and draw up a start of a plan today sketching out how the type checker could be separated out, and also give some feedback in/around rust-analyzer/chalk problems.</p>



<a name="175264378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264378">(Sep 09 2019 at 17:36)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> what's the prep I need to do for Friday meeting? Short update about rust-analyzer + rough plan for librarification (are doing/can do/should do/must do table)?</p>



<a name="175264383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264383">(Sep 09 2019 at 17:36)</a>:</h4>
<p>Anything else?</p>



<a name="175264397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264397" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264397">(Sep 09 2019 at 17:36)</a>:</h4>
<p>That's what I'm trying to figure out</p>



<a name="175264412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264412" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264412">(Sep 09 2019 at 17:36)</a>:</h4>
<p>Let's start creating some kind of rough sketch</p>



<a name="175264434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264434">(Sep 09 2019 at 17:36)</a>:</h4>
<p><a href="https://hackmd.io/_ixQrAr5TKafV9m8eSU_VA" target="_blank" title="https://hackmd.io/_ixQrAr5TKafV9m8eSU_VA">https://hackmd.io/_ixQrAr5TKafV9m8eSU_VA</a></p>



<a name="175264441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264441">(Sep 09 2019 at 17:36)</a>:</h4>
<p>I think we've probably said a fair amount of things</p>



<a name="175264443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264443" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264443">(Sep 09 2019 at 17:37)</a>:</h4>
<p>in our overall approach</p>



<a name="175264453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264453">(Sep 09 2019 at 17:37)</a>:</h4>
<p>that would be good to document and try to get feedback on</p>



<a name="175264582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264582">(Sep 09 2019 at 17:38)</a>:</h4>
<p>ok, I'll jump to the hack.md document then!</p>



<a name="175264651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264651" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264651">(Sep 09 2019 at 17:39)</a>:</h4>
<p>great; I'm trying to figure out how to organize it, so feel free to edit</p>



<a name="175264938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175264938" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175264938">(Sep 09 2019 at 17:42)</a>:</h4>
<p>Oh, I've also noticed that there's a GSOC happening in Swift, whose goal is to move swift compiler over to Swift's libsyntax. Basically, the same which we'll need to do in rustc. I've contacted the person who does GSOC and asked them to blog about their experience :)</p>



<a name="175265149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175265149" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175265149">(Sep 09 2019 at 17:44)</a>:</h4>
<p>Nice</p>



<a name="175267150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267150">(Sep 09 2019 at 18:02)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> one of the things I am wondering about</p>



<a name="175267202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267202" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267202">(Sep 09 2019 at 18:03)</a>:</h4>
<p>to what extent does it make sense to try and code libraries "generically", so that they are not tied to a specific representation of types, HIR, etc</p>



<a name="175267217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267217" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267217">(Sep 09 2019 at 18:03)</a>:</h4>
<p>and to what extent should we just be sharing the definitions</p>



<a name="175267250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267250">(Sep 09 2019 at 18:03)</a>:</h4>
<p>I'd love to be concrete if we can</p>



<a name="175267261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267261" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267261">(Sep 09 2019 at 18:03)</a>:</h4>
<p>I agree</p>



<a name="175267281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267281">(Sep 09 2019 at 18:03)</a>:</h4>
<p>That suggests that an area of focus might be on figuring out how to share the <em>actual definitions</em></p>



<a name="175267342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267342">(Sep 09 2019 at 18:04)</a>:</h4>
<p>And I think with index-based structure you can acutlally do that: you can always key additional info by index</p>



<a name="175267348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267348">(Sep 09 2019 at 18:04)</a>:</h4>
<p>I think this is also one of the harder problems though</p>



<a name="175267365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267365">(Sep 09 2019 at 18:04)</a>:</h4>
<p>But I am not sure how interning and lifetimes should work for indices</p>



<a name="175267368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267368">(Sep 09 2019 at 18:04)</a>:</h4>
<p>right</p>



<a name="175267374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267374">(Sep 09 2019 at 18:04)</a>:</h4>
<p>I was thinking of calling this out as a "challenge"</p>



<a name="175267414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267414">(Sep 09 2019 at 18:05)</a>:</h4>
<p>Especially, how index assignment works across modifications</p>



<a name="175267518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267518">(Sep 09 2019 at 18:06)</a>:</h4>
<p>I guess, we can just try to move <code>Ty</code> out of <code>ra_hir</code> to <code>ra_ty</code>, which doesn't have access to DB, and see what breaks?</p>



<a name="175267992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175267992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175267992">(Sep 09 2019 at 18:12)</a>:</h4>
<p>seems like a first step</p>



<a name="175268026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268026">(Sep 09 2019 at 18:12)</a>:</h4>
<p>I added a few more thoughts in the "managing code" section</p>



<a name="175268034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268034">(Sep 09 2019 at 18:12)</a>:</h4>
<p>see if you think they make sense :)</p>



<a name="175268540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268540">(Sep 09 2019 at 18:17)</a>:</h4>
<p>Makes sense, though I feel like we miss the word we want to use instead of "unit tests". We want IR data-driven tests:  input is a serialized IR, output is also a piece of data we match against, and the actual <code>#[test]</code> function just pipies input IR via component</p>



<a name="175268623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268623">(Sep 09 2019 at 18:18)</a>:</h4>
<p>THat is, thests are not really unit, they test subsytem as a whole, and critically, the are data based, though input data is not necessary rust syntax (to avoid dependency on the parser)</p>



<a name="175268687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268687">(Sep 09 2019 at 18:19)</a>:</h4>
<p>yeah, that sounds right</p>



<a name="175268691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268691">(Sep 09 2019 at 18:19)</a>:</h4>
<p>I think a lot of things are pointing to</p>



<a name="175268699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268699">(Sep 09 2019 at 18:19)</a>:</h4>
<p>the correct selection of the <em>component boundary</em> is key</p>



<a name="175268722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268722">(Sep 09 2019 at 18:19)</a>:</h4>
<p>I'm thinking about e.g. <span class="user-mention" data-user-id="126931">@centril</span>'s comments about wanting to audit correctness from a language perspective</p>



<a name="175268793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268793">(Sep 09 2019 at 18:20)</a>:</h4>
<p>I feel like if the component boundaries are well-chosen, that actually becomes potentially <em>easier</em></p>



<a name="175268850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268850" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268850">(Sep 09 2019 at 18:21)</a>:</h4>
<blockquote>
<p>the correct selection of the <em>component boundary</em> is key</p>
</blockquote>
<p>an example of an ungreat boundary, I think, is probably "type unification"</p>



<a name="175268874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268874">(Sep 09 2019 at 18:21)</a>:</h4>
<p>like, it makes sense to collect the full set of things together I listed</p>



<a name="175268993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175268993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175268993">(Sep 09 2019 at 18:22)</a>:</h4>
<p>because they are approaching the level of concepts that might appear in a language spec</p>



<a name="175269008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269008" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269008">(Sep 09 2019 at 18:22)</a>:</h4>
<p>(at least, to my mind.)</p>



<a name="175269160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269160" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269160">(Sep 09 2019 at 18:24)</a>:</h4>
<p>the more I think about it, though, the more I think it makes sense to dive a bit into what sharing types would mean</p>



<a name="175269175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269175">(Sep 09 2019 at 18:24)</a>:</h4>
<p>The open question is "do such boundaries exist?" :) Compiler as a whole is obv a <em>great</em> bounary: text on the input, binary on the output, a perfect black-box inside</p>



<a name="175269222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269222" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269222">(Sep 09 2019 at 18:25)</a>:</h4>
<p>I am not altogether sure that extracting bits out of the middle would be net positive. I hope it would be</p>



<a name="175269306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269306" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269306">(Sep 09 2019 at 18:26)</a>:</h4>
<p>Yes, my hypothesis is that such boundaries exist, but they are fairly high-level</p>



<a name="175269323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269323" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269323">(Sep 09 2019 at 18:26)</a>:</h4>
<p>And further that exploiting them will be super useful :)</p>



<a name="175269335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269335" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269335">(Sep 09 2019 at 18:26)</a>:</h4>
<p>But I suppose there is a degenerate plan in which we use such boundaries only internally, in the code</p>



<a name="175269349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269349" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269349">(Sep 09 2019 at 18:26)</a>:</h4>
<p>I think this plan argues for a mono-repo and for integration tests only</p>



<a name="175269370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175269370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175269370">(Sep 09 2019 at 18:27)</a>:</h4>
<p>Specifically, there's a lot of truth to  <a href="https://www.tedinski.com/2018/02/06/system-boundaries.html#boundaries-arent-free" target="_blank" title="https://www.tedinski.com/2018/02/06/system-boundaries.html#boundaries-arent-free">https://www.tedinski.com/2018/02/06/system-boundaries.html#boundaries-arent-free</a></p>



<a name="175270055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270055">(Sep 09 2019 at 18:34)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> ok I'm finding this to be a somewhat useful brain dump. Something I think would help -- maybe a list of questions we would like help to answer. Or maybe we should figure out the question and a proposed answer and look for feedback.</p>



<a name="175270106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270106" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270106">(Sep 09 2019 at 18:35)</a>:</h4>
<p>I think from the <em>traits/types</em> side of thing, I would like to try and lay out a "trail" of steps to take, maybe a dep graph. I'm going to try and sketch out what that means :)</p>



<a name="175270117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270117">(Sep 09 2019 at 18:35)</a>:</h4>
<p>"Who wants to help out? :)" is a good question</p>



<a name="175270121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270121">(Sep 09 2019 at 18:35)</a>:</h4>
<p>lol</p>



<a name="175270126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270126" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270126">(Sep 09 2019 at 18:35)</a>:</h4>
<p>fair enough!</p>



<a name="175270141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270141">(Sep 09 2019 at 18:35)</a>:</h4>
<p>one question I had in mind was something like</p>



<a name="175270224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270224">(Sep 09 2019 at 18:36)</a>:</h4>
<p>is there some .. "time limit"? Are there bits of work we can frontload that would help us to figure out if we're going in the right direction?</p>



<a name="175270236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270236">(Sep 09 2019 at 18:36)</a>:</h4>
<p>but that question is not "well formed" yet I think</p>



<a name="175270288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270288">(Sep 09 2019 at 18:37)</a>:</h4>
<p>I'm basically experiencing a measure of self doubt around "is this a good use of time vs trying to soup up rust's existing systems in place", I suspect.</p>



<a name="175270424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270424" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270424">(Sep 09 2019 at 18:38)</a>:</h4>
<p>soup up: stir the soup until it nicely separates itself into original components? :)</p>



<a name="175270453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270453">(Sep 09 2019 at 18:39)</a>:</h4>
<p>But yeah, I also has "if this even the right direction" feeling: adding boundaries has costs</p>



<a name="175270471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270471" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270471">(Sep 09 2019 at 18:39)</a>:</h4>
<p>I think part of the way to answer that question is choosing the order to attack things</p>



<a name="175270481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270481">(Sep 09 2019 at 18:40)</a>:</h4>
<p>and then re-evaluating</p>



<a name="175270573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175270573" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175270573">(Sep 09 2019 at 18:40)</a>:</h4>
<p>uguh. I think that means "go for the easiest boundary first"</p>



<a name="175271776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175271776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175271776">(Sep 09 2019 at 18:53)</a>:</h4>
<p>that's what I'm wondering, indeed</p>



<a name="175814403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814403">(Sep 16 2019 at 14:01)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> I've realised that we've never actually announced this, but we are trying to have a weekly sync-up in this channel at this time</p>



<a name="175814406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814406" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814406">(Sep 16 2019 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> are you around?</p>



<a name="175814413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814413">(Sep 16 2019 at 14:01)</a>:</h4>
<p>yep</p>



<a name="175814426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814426">(Sep 16 2019 at 14:01)</a>:</h4>
<p>although it may be wise to make a fresh topic for each week :)</p>



<a name="175814437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814437" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814437">(Sep 16 2019 at 14:01)</a>:</h4>
<p>I'm kind of around</p>



<a name="175814478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814478">(Sep 16 2019 at 14:02)</a>:</h4>
<p>I'm a bit distracted because I'm trying to get to the bottom of an async-await thing right now</p>



<a name="175814490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814490">(Sep 16 2019 at 14:02)</a>:</h4>
<p>but I would like to follow up on the friday meeting</p>



<a name="175814536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814536">(Sep 16 2019 at 14:02)</a>:</h4>
<p>I guess makes sense to start with general updates, if there are any since last time we talked</p>



<a name="175814537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814537">(Sep 16 2019 at 14:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  I think that the same topic would actually be nicer, now? It's easier to caught up with prev meetings and do historical digging</p>



<a name="175814551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814551" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814551">(Sep 16 2019 at 14:03)</a>:</h4>
<p>no strong opinion</p>



<a name="175814580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814580">(Sep 16 2019 at 14:03)</a>:</h4>
<p>ok, let's stick with status quo, unless anyone objects</p>



<a name="175814581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814581">(Sep 16 2019 at 14:03)</a>:</h4>
<p>updates:</p>



<a name="175814592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814592" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814592">(Sep 16 2019 at 14:03)</a>:</h4>
<ul>
<li>we have a design meeting in t-compiler</li>
</ul>



<a name="175814660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814660">(Sep 16 2019 at 14:04)</a>:</h4>
<ul>
<li>some cleanups and refactoring of macro expansion in rust-analyzer</li>
</ul>



<a name="175814671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814671">(Sep 16 2019 at 14:04)</a>:</h4>
<ul>
<li>cleanups of name resolution</li>
</ul>



<a name="175814724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814724" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814724">(Sep 16 2019 at 14:05)</a>:</h4>
<ul>
<li>some parser fixes</li>
</ul>



<a name="175814756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814756" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814756">(Sep 16 2019 at 14:05)</a>:</h4>
<ul>
<li>one interesting architectural bit: we are inventing inheritance for IDs</li>
</ul>



<a name="175814799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814799">(Sep 16 2019 at 14:05)</a>:</h4>
<p>Specifically, we have an <code>enum Adt { Struct(Struct), Enum(Enum), Union(Union) } </code></p>



<a name="175814857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814857" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814857">(Sep 16 2019 at 14:06)</a>:</h4>
<p>and <code>enum ModuleDef {Adt(Adt), Function(Function), ...}</code></p>



<a name="175814890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814890">(Sep 16 2019 at 14:06)</a>:</h4>
<p>and transitive <code>Into</code>impls: <code>Struct -&gt; Adt</code>, <code>Adt -&gt; ModuleDef</code>, <code>Struct -&gt; ModuleDef</code>.</p>



<a name="175814938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814938" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814938">(Sep 16 2019 at 14:07)</a>:</h4>
<p>but we also have e.g. <code>TypableDef</code> which includes a subset of those, so it's kind of multiple inheritance ;)</p>



<a name="175814983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175814983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175814983">(Sep 16 2019 at 14:07)</a>:</h4>
<p>ohhh, <a href="https://github.com/uHOOCCOOHu" target="_blank" title="https://github.com/uHOOCCOOHu">https://github.com/uHOOCCOOHu</a> added completion for macros, so there's no need to type out <code>unimplemented</code> any more <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="175815069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815069">(Sep 16 2019 at 14:08)</a>:</h4>
<blockquote>
<ul>
<li>one interesting architectural bit: we are inventing inheritance for IDs</li>
</ul>
</blockquote>
<p>I was anticipating that this would happen, if we had "strongly typed ids"</p>



<a name="175815119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815119">(Sep 16 2019 at 14:09)</a>:</h4>
<p>So on my side, I started doing some work on chalk, specifically looking at what it would take to alter the interface to be more "selective" when it asks for impls</p>



<a name="175815129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815129">(Sep 16 2019 at 14:09)</a>:</h4>
<p>oh, I worked on closure types, but that's now a bit blocked on (at least a small subset of) <a href="https://github.com/rust-lang/chalk/issues/241" target="_blank" title="https://github.com/rust-lang/chalk/issues/241">https://github.com/rust-lang/chalk/issues/241</a> <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="175815168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815168">(Sep 16 2019 at 14:09)</a>:</h4>
<p>Yeah, I was just going to say, I opened <a href="https://github.com/rust-lang/chalk/issues/241" target="_blank" title="https://github.com/rust-lang/chalk/issues/241">https://github.com/rust-lang/chalk/issues/241</a> -- and I see <span class="user-mention" data-user-id="129457">@Florian Diebold</span> left some comments I've not yet read :)</p>



<a name="175815246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815246">(Sep 16 2019 at 14:10)</a>:</h4>
<p>I have to look more closely at my initial results. I made some preliminary changes in that direction and I'm getting some failing tests, but I don't know that the failures are significant.</p>



<a name="175815269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815269">(Sep 16 2019 at 14:10)</a>:</h4>
<p>(They have to do with how we model coherence specifically, and there is probably a way to circumvent them)</p>



<a name="175815433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815433">(Sep 16 2019 at 14:12)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="129457">@Florian Diebold</span> we should be able to land some changes that, while not perfect, help a lot in practice relatively soon. My <em>hope</em> for today was that I would sketch out a small series of steps around chalk, prioritizing (a) support for dyn and impl types, which is started, (b) the <code>RustIrDatabase</code> traits, (c) and steps to improve how we are handling lazy norm (although I think there are some open questions, as I wrote) -- but I'm not sure if those are the best priorities.</p>



<a name="175815461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815461">(Sep 16 2019 at 14:12)</a>:</h4>
<p>One thing I was wondering is whether my change to flounder when self type is unknown helped with the "chalk never terminates" bugs</p>



<a name="175815509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815509">(Sep 16 2019 at 14:13)</a>:</h4>
<p>I haven't seen any "chalk never terminates" bugs since the change that makes all traits non-enumerable</p>



<a name="175815528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815528">(Sep 16 2019 at 14:13)</a>:</h4>
<p>It did, yeah: at least, there's a clean improvement in runtime from <code>oo</code> to <code>10s</code> for that PR</p>



<a name="175815574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815574" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815574">(Sep 16 2019 at 14:14)</a>:</h4>
<p>there are some reports of crashes inside Chalk, which I haven't looked into in detail yet</p>



<a name="175815653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815653">(Sep 16 2019 at 14:14)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/1805" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/1805">https://github.com/rust-analyzer/rust-analyzer/issues/1805</a></p>



<a name="175815725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815725">(Sep 16 2019 at 14:15)</a>:</h4>
<p>it's very possible that this is some error in the Chalk lowering code in RA ;)</p>



<a name="175815731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815731">(Sep 16 2019 at 14:15)</a>:</h4>
<p>ah, interesting</p>



<a name="175815749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815749">(Sep 16 2019 at 14:15)</a>:</h4>
<p>one thing i'd like to do for chalk that's been on my radar for some time</p>



<a name="175815756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815756" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815756">(Sep 16 2019 at 14:15)</a>:</h4>
<p>is to try and make some "Benchmarks"</p>



<a name="175815797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815797" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815797">(Sep 16 2019 at 14:16)</a>:</h4>
<p>the code was never really written with perf in mind</p>



<a name="175815864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815864">(Sep 16 2019 at 14:16)</a>:</h4>
<p>it'd be nice to have e.g. some realistic-ish setup with some number of traits and a real query that we can run <code>perf</code> on and use to measure changes</p>



<a name="175815878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815878" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815878">(Sep 16 2019 at 14:16)</a>:</h4>
<p>just something to keep in mind if you come across some queries that seem plausible</p>



<a name="175815897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815897" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815897">(Sep 16 2019 at 14:17)</a>:</h4>
<p>that said, this is exactly the sort of thing that I would think a "chalk extractor" could do a great job on (and I'd still like to add that at some point, on the chalk side)</p>



<a name="175815918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815918">(Sep 16 2019 at 14:17)</a>:</h4>
<p>anyway, do my priorities sound plausible?</p>
<blockquote>
<p>(a) support for dyn and impl types, which is started, (b) the RustIrDatabase traits, (c) and steps to improve how we are handling lazy norm </p>
</blockquote>



<a name="175815944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175815944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175815944">(Sep 16 2019 at 14:17)</a>:</h4>
<p>I think <code>ra_cli analys-bench</code> is a pretty realistic  example (but it is bound to rust-analyzer of course)</p>



<a name="175816049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816049" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816049">(Sep 16 2019 at 14:18)</a>:</h4>
<p>It would be interesting to tie "dumping chalk IR as we go" idea from prev meeting into <code>analysis-bench</code>, so that you can record a real sample, and then use it to bench chalk, without ra</p>



<a name="175816130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816130">(Sep 16 2019 at 14:19)</a>:</h4>
<p>yeah; I think the chalk side is the right side to do it on</p>



<a name="175816149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816149" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816149">(Sep 16 2019 at 14:19)</a>:</h4>
<p>it'd be nice to be able to do it for rustc  too, for example</p>



<a name="175816262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816262" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816262">(Sep 16 2019 at 14:20)</a>:</h4>
<p>anyway, <span class="user-mention" data-user-id="133169">@matklad</span>, what is status arond parser work?</p>



<a name="175816270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816270">(Sep 16 2019 at 14:20)</a>:</h4>
<p>I've yet to catch up with that discussion from friday</p>



<a name="175816274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816274">(Sep 16 2019 at 14:20)</a>:</h4>
<p>Remembered two more things:</p>
<ul>
<li>
<p>I've gave an improvised talk about rust-analyzer at the local Rust meetup. As a result, <span class="user-mention" data-user-id="200750">@Vlad</span> and I are thinking that it's time to start drafting RFCs about leaking <code>impl</code>s out of function bodies (there's a thread in wg-traits here on zulip)</p>
</li>
<li>
<p>It looks like we are slowly distilling one more core abstraction in rust-analyzer: an <code>Source&lt;T&gt;</code>, which is an syntax tree bit, pinned to a particular place (crate &amp; module) in the crate. That is, syntax tree is a value type, and <code>Source&lt;SyntaxTree&gt;</code> is an identity type.</p>
</li>
</ul>



<a name="175816302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816302" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816302">(Sep 16 2019 at 14:20)</a>:</h4>
<blockquote>
<ul>
<li>I've gave an improvised talk about rust-analyzer at the local Rust meetup. As a result, <span class="user-mention silent" data-user-id="200750">Vlad</span> and I are thinking that it's time to start drafting RFCs about leaking <code>impl</code>s out of function bodies (there's a thread in wg-traits here on zulip)</li>
</ul>
</blockquote>
<p>Yes. In particular, I would expect to change this at a rust edition boundary</p>



<a name="175816347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816347" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816347">(Sep 16 2019 at 14:21)</a>:</h4>
<p>(I was thinking about that earlier, that we ought to be preparing for such a change well in advance)</p>



<a name="175816350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816350">(Sep 16 2019 at 14:21)</a>:</h4>
<p>re parser: nothing new on the rustc side, but rust-analyzer now handles composed tokens in the way I want rustc to handle them, so I know have the model to change rustc</p>



<a name="175816384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816384">(Sep 16 2019 at 14:21)</a>:</h4>
<p>I don't quite understand what you mean about <code>Source&lt;T&gt;</code> yet</p>



<a name="175816768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/175816768" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#175816768">(Sep 16 2019 at 14:25)</a>:</h4>
<p>editor's note: <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Source.3CT.3E.20refactoring" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Source.3CT.3E.20refactoring">responses about <code>Source&lt;T&gt;</code> broken out into a separate topic</a></p>



<a name="176370745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176370745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176370745">(Sep 23 2019 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> are you around for a weekly sync-up ? :)</p>



<a name="176370890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176370890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176370890">(Sep 23 2019 at 14:02)</a>:</h4>
<p>I'm around</p>



<a name="176370925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176370925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176370925">(Sep 23 2019 at 14:03)</a>:</h4>
<p>Stuff that happened this week:</p>
<ul>
<li>rust-analyzer has a website (currently in the stealf-mode): <a href="https://rust-analyzer.github.io/" target="_blank" title="https://rust-analyzer.github.io/">https://rust-analyzer.github.io/</a>. The idea is to put user docs and blog posts there. </li>
<li><span class="user-mention" data-user-id="220059">@Jasper De Sutter</span> implemented a web-version of rust-analyzer a while back, and I've finally merged it: <a href="https://rust-analyzer.github.io/wasm-demo.html" target="_blank" title="https://rust-analyzer.github.io/wasm-demo.html">https://rust-analyzer.github.io/wasm-demo.html</a></li>
</ul>



<a name="176370936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176370936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176370936">(Sep 23 2019 at 14:03)</a>:</h4>
<p>Nice</p>



<a name="176370942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176370942" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176370942">(Sep 23 2019 at 14:03)</a>:</h4>
<p>"web version" of rust-analyzer?</p>



<a name="176370952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176370952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176370952">(Sep 23 2019 at 14:03)</a>:</h4>
<p><a href="https://rust-analyzer.github.io/wasm-demo.html" target="_blank" title="https://rust-analyzer.github.io/wasm-demo.html">https://rust-analyzer.github.io/wasm-demo.html</a></p>



<a name="176371007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371007">(Sep 23 2019 at 14:04)</a>:</h4>
<p>(warning: 5 MB download)</p>



<a name="176371043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371043">(Sep 23 2019 at 14:04)</a>:</h4>
<p>That's very cool :)</p>



<a name="176371077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371077" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371077">(Sep 23 2019 at 14:05)</a>:</h4>
<ul>
<li>I've been refactoring macro-by-example in rust-analyzer and rustc (to make sure that mbe in rustc doesn't loose jointness info)</li>
</ul>



<a name="176371218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371218">(Sep 23 2019 at 14:06)</a>:</h4>
<ul>
<li><span class="user-mention" data-user-id="212617">@Geobomatic</span> added assist to switch between <code>"foo"</code> and <code>r#"foo"#</code></li>
<li><span class="user-mention" data-user-id="129457">@Florian Diebold</span> added more associated types stuff, and is about to give new salsa's cycle recovery support a try</li>
</ul>



<a name="176371249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371249" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371249">(Sep 23 2019 at 14:07)</a>:</h4>
<ul>
<li>misc parser fixed</li>
</ul>



<a name="176371304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371304">(Sep 23 2019 at 14:07)</a>:</h4>
<p>We also had a pretty interesting discussion about joint rls/rust-analyzer strategy. We didn't come up with a strategy, but made this nice markdown doc: <a href="https://hackmd.io/S5wub4mfToSnnLGvK3I-ew" target="_blank" title="https://hackmd.io/S5wub4mfToSnnLGvK3I-ew">https://hackmd.io/S5wub4mfToSnnLGvK3I-ew</a></p>



<a name="176371356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371356" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371356">(Sep 23 2019 at 14:08)</a>:</h4>
<p>I think that's it?</p>



<a name="176371386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371386" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371386">(Sep 23 2019 at 14:08)</a>:</h4>
<p>OK. My update is shorter, I guess. I landed a small update to chalk's IR, removing the <code>all_structs</code> callback, and I plan to work a bit more today to refine the "request impl" callback, and also to help push the dyn/impl integration forward.</p>



<a name="176371441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371441">(Sep 23 2019 at 14:09)</a>:</h4>
<p>Oh, one more thing: while working on mbe, I've realized that this could be another candidate for rather painless librarification. Maybe</p>



<a name="176371466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371466">(Sep 23 2019 at 14:10)</a>:</h4>
<p>Ah, interesting</p>



<a name="176371512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371512">(Sep 23 2019 at 14:10)</a>:</h4>
<p>I've thought about that before</p>



<a name="176371515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371515" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371515">(Sep 23 2019 at 14:10)</a>:</h4>
<p>In theory the interface for mbe are token trees, which is a relatively thing data-structure</p>



<a name="176371520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371520">(Sep 23 2019 at 14:10)</a>:</h4>
<p>But I had kind of forgotten it</p>



<a name="176371540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371540">(Sep 23 2019 at 14:10)</a>:</h4>
<p>Yeah; there is some interaction with name resolution, but there is also a part that can be factored out from that I suppose</p>



<a name="176371567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371567" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371567">(Sep 23 2019 at 14:10)</a>:</h4>
<p>In practice, the token trees in rustc contain AST, and that throws quite a wrench in the works</p>



<a name="176371586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371586">(Sep 23 2019 at 14:10)</a>:</h4>
<p>Indeed</p>



<a name="176371594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371594" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371594">(Sep 23 2019 at 14:10)</a>:</h4>
<p>I have also disliked that</p>



<a name="176371597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371597">(Sep 23 2019 at 14:10)</a>:</h4>
<p>Particularly since it's visible (in edge cases)</p>



<a name="176371615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371615" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371615">(Sep 23 2019 at 14:11)</a>:</h4>
<p>It's basically an efficiency optimization, which I think we could/should do in other ways</p>



<a name="176371640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371640" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371640">(Sep 23 2019 at 14:11)</a>:</h4>
<p>Is it visible in non-backwards compatible way?</p>



<a name="176371658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371658" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371658">(Sep 23 2019 at 14:11)</a>:</h4>
<p>Hmm so I think something else I should prioritize is doing a bit of work in/around rust-analyzer's type checker. I guess I can start by reviewing what <span class="user-mention" data-user-id="129457">@Florian Diebold</span> did around associated types.</p>



<a name="176371704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371704">(Sep 23 2019 at 14:12)</a>:</h4>
<p>Like, we can't today re-parse $var:expr as something else, but it seems like if we allow reparsing, that would only increase the set of accepted programs</p>



<a name="176371715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371715">(Sep 23 2019 at 14:12)</a>:</h4>
<blockquote>
<p>Is it visible in non-backwards compatible way?</p>
</blockquote>
<p>depends what you mean by "non backawrds compatible" -- I guess the question is "compatible with <em>what</em>"</p>



<a name="176371741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371741">(Sep 23 2019 at 14:12)</a>:</h4>
<p>Compatible with current stable behavior</p>



<a name="176371748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371748" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371748">(Sep 23 2019 at 14:12)</a>:</h4>
<p>if you had some stream of tokens that could be parsed as <em>either</em> an expression <em>or</em> a type</p>



<a name="176371759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371759">(Sep 23 2019 at 14:12)</a>:</h4>
<p>no, I mean, what <em>future</em> behavior are you imagining</p>



<a name="176371793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371793">(Sep 23 2019 at 14:13)</a>:</h4>
<p>I think that you could observe e.g. <code>macro_rules! foo { ($x:expr) =&gt; { .. } ($x:ty) =&gt; { .. } }</code></p>



<a name="176371822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371822">(Sep 23 2019 at 14:13)</a>:</h4>
<p>Ah. So, I imagine that we store <code>$var:expr</code> as a token tree with virtual delimiters</p>



<a name="176371837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371837">(Sep 23 2019 at 14:13)</a>:</h4>
<p>right, and I think that might not be enough to be fully compatible</p>



<a name="176371849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371849">(Sep 23 2019 at 14:13)</a>:</h4>
<p>though it is arguably a bug-fix</p>



<a name="176371876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371876" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371876">(Sep 23 2019 at 14:14)</a>:</h4>
<p>it's the kind of change where the behavior is sort of loosely documented :)</p>



<a name="176371922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371922">(Sep 23 2019 at 14:14)</a>:</h4>
<p>we definitelly should make sure that <code>macro</code> thing doesn't use the AST</p>



<a name="176371935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371935">(Sep 23 2019 at 14:14)</a>:</h4>
<p>macro 2.0 that is</p>



<a name="176371946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371946">(Sep 23 2019 at 14:14)</a>:</h4>
<p>Yeah.</p>



<a name="176371971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176371971" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176371971">(Sep 23 2019 at 14:14)</a>:</h4>
<p>( I have to run a bit early today btw -- but I'll be back around hacking on traits and rust-analyzer this afternoon )</p>



<a name="176372000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372000">(Sep 23 2019 at 14:15)</a>:</h4>
<p>So, are you still actively investigating parsing extraction?</p>



<a name="176372010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372010">(Sep 23 2019 at 14:15)</a>:</h4>
<p>I'm trying to understand the "status" of that</p>



<a name="176372020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372020">(Sep 23 2019 at 14:15)</a>:</h4>
<p>sort-of</p>



<a name="176372046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372046">(Sep 23 2019 at 14:15)</a>:</h4>
<p>I am actively trying to move the parser to the token-tree modelN</p>



<a name="176372055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372055">(Sep 23 2019 at 14:15)</a>:</h4>
<p>(which is a part of that)</p>



<a name="176372108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372108">(Sep 23 2019 at 14:16)</a>:</h4>
<p>I haven't looked further than that</p>



<a name="176372119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372119">(Sep 23 2019 at 14:16)</a>:</h4>
<p>the rustc parser?</p>



<a name="176372123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372123">(Sep 23 2019 at 14:16)</a>:</h4>
<p>or r-a parser?</p>



<a name="176372129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372129">(Sep 23 2019 at 14:16)</a>:</h4>
<p>that does seem like a good first step</p>



<a name="176372131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372131">(Sep 23 2019 at 14:16)</a>:</h4>
<p>rustc parser</p>



<a name="176372155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372155">(Sep 23 2019 at 14:16)</a>:</h4>
<blockquote>
<p>Ah. So, I imagine that we store <code>$var:expr</code> as a token tree with virtual delimiters</p>
</blockquote>
<p>to be clear: I think I'd prefer to try this model first,</p>



<a name="176372167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372167">(Sep 23 2019 at 14:16)</a>:</h4>
<p>r-a parser uses token tree model like the one is <code>proc_macro</code></p>



<a name="176372171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372171" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372171">(Sep 23 2019 at 14:17)</a>:</h4>
<p>because I <em>think</em> it's more what users would expect</p>



<a name="176372182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372182">(Sep 23 2019 at 14:17)</a>:</h4>
<p>but I think the "fix" to match rustc is also not that terrible</p>



<a name="176372188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372188">(Sep 23 2019 at 14:17)</a>:</h4>
<p>it'd kind of be that the "virtual delimeters" also encode the fragment</p>



<a name="176372200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372200" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372200">(Sep 23 2019 at 14:17)</a>:</h4>
<p>i.e., there are virtual "type" delimeters, virtual "expr" delimeters</p>



<a name="176372207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372207" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372207">(Sep 23 2019 at 14:17)</a>:</h4>
<p>I should probably make some proof of concept test case for what I'm talking about</p>



<a name="176372319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372319" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372319">(Sep 23 2019 at 14:18)</a>:</h4>
<p>Yeah, I think I undestand what you are talking about</p>



<a name="176372342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372342">(Sep 23 2019 at 14:18)</a>:</h4>
<p>It wouldn't be hard to implement indeed</p>



<a name="176372383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372383">(Sep 23 2019 at 14:19)</a>:</h4>
<p>but it would mean that <code>mbe</code> model is not quite <code>proc_macro2</code> tokens, which is a rather big problem, even if the difference is small</p>



<a name="176372404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372404">(Sep 23 2019 at 14:19)</a>:</h4>
<p>Though, perhaps we can store this info on the side</p>



<a name="176372537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372537">(Sep 23 2019 at 14:20)</a>:</h4>
<p>not very realistic, but <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=8271db061493e750a9b1cd60e4e9864d" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=8271db061493e750a9b1cd60e4e9864d">here is an example</a></p>



<a name="176372580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372580">(Sep 23 2019 at 14:21)</a>:</h4>
<p>oh, maybe not, I guess that doesn't parse as an expr for us</p>



<a name="176372588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372588" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372588">(Sep 23 2019 at 14:21)</a>:</h4>
<p>well I think I can make one but it takes some work :P</p>



<a name="176372590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372590">(Sep 23 2019 at 14:21)</a>:</h4>
<p>yeah, I did the same: <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=e9a29816fa71e6abb09fb349f4053d5a" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=e9a29816fa71e6abb09fb349f4053d5a">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=e9a29816fa71e6abb09fb349f4053d5a</a></p>



<a name="176372614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372614" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372614">(Sep 23 2019 at 14:21)</a>:</h4>
<p>ah yeah duh there you go</p>



<a name="176372616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372616">(Sep 23 2019 at 14:21)</a>:</h4>
<p>great</p>



<a name="176372619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372619" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372619">(Sep 23 2019 at 14:21)</a>:</h4>
<p>ok, I gotta run though, bbiab</p>



<a name="176372623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372623">(Sep 23 2019 at 14:21)</a>:</h4>
<p>heah, yeh, mine is better :D</p>



<a name="176372673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176372673" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176372673">(Sep 23 2019 at 14:22)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="176934478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176934478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176934478">(Sep 30 2019 at 14:01)</a>:</h4>
<p>hey, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, it's time for another weekly sink up. I have to run really soon, so I'll give just a brife update, and try to follow up later</p>



<a name="176934849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176934849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176934849">(Sep 30 2019 at 14:04)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="176934864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176934864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176934864">(Sep 30 2019 at 14:05)</a>:</h4>
<p>Things that happened since last week:</p>
<ul>
<li>support for closures ( <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> <span class="user-mention" data-user-id="129457">@Florian Diebold</span> )</li>
<li>support for coercions ( <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> <a href="https://github.com/uHOOCCOOHu" target="_blank" title="https://github.com/uHOOCCOOHu">https://github.com/uHOOCCOOHu</a>)</li>
<li>resolving <code>$crate</code> from macro by example (<a href="https://github.com/uHOOCCOOHu" target="_blank" title="https://github.com/uHOOCCOOHu">https://github.com/uHOOCCOOHu</a> is on a roll!) </li>
<li>I am refactoring API for modifying syntax trees, looking closely at Rosnlyn's syntax tree rewrites. At the moment, I am scaling down elaborate infra we have to the simplest thing that could work.</li>
<li>on the rustc side, I am wrangling with token jointness in macro by example</li>
</ul>



<a name="176934917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176934917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176934917">(Sep 30 2019 at 14:05)</a>:</h4>
<p>Can I get some links to the closures/coercions PRs etc?</p>



<a name="176934920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176934920" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176934920">(Sep 30 2019 at 14:05)</a>:</h4>
<p>Or is it best to read the source</p>



<a name="176934927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176934927" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176934927">(Sep 30 2019 at 14:05)</a>:</h4>
<p>I guess I can find them on the repo</p>



<a name="176934941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176934941" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176934941">(Sep 30 2019 at 14:05)</a>:</h4>
<p>Also, I will be traveling this week: giving a "Rust as a High Level Langauge" talk in Toulouse, so I might be slow to repond.</p>



<a name="176935022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176935022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176935022">(Sep 30 2019 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> commit hash is <a href="https://github.com/rust-lang/rust/commit/c7420ddaaa76741d1eebe393406b38ba5596e54a" target="_blank" title="https://github.com/rust-lang/rust/commit/c7420ddaaa76741d1eebe393406b38ba5596e54a">c7420ddaaa76741d1eebe393406b38ba5596e54a</a></p>



<a name="176935102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176935102" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176935102">(Sep 30 2019 at 14:07)</a>:</h4>
<p>a better link: <a href="https://github.com/rust-analyzer/rust-analyzer/commit/c7420ddaaa76741d1eebe393406b38ba5596e54a" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/commit/c7420ddaaa76741d1eebe393406b38ba5596e54a">https://github.com/rust-analyzer/rust-analyzer/commit/c7420ddaaa76741d1eebe393406b38ba5596e54a</a></p>



<a name="176935140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176935140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176935140">(Sep 30 2019 at 14:08)</a>:</h4>
<p>thanks</p>



<a name="176935439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176935439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176935439">(Sep 30 2019 at 14:10)</a>:</h4>
<p>on my side not a lot to tell, I plan to work more on the chalk changes that <span class="user-mention" data-user-id="129457">@Florian Diebold</span> alluded to today, along with some other things. I also started thinking about what it might look like to extract types into a library that many could share.</p>



<a name="176935485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176935485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176935485">(Sep 30 2019 at 14:10)</a>:</h4>
<p>seems like one of the hardest questions to answer will come up with interning and other such details, and how generic we want to be about that</p>



<a name="176935512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176935512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176935512">(Sep 30 2019 at 14:11)</a>:</h4>
<p>rust doesn't make it <em>super</em> easy to extract over these sorts of things, though I think in this case it could plausibly be done.</p>



<a name="176935550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/176935550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#176935550">(Sep 30 2019 at 14:11)</a>:</h4>
<p>though mostly I've been pondering how to cleanup chalk to address the normalization and "known self type" cases</p>



<a name="177521728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177521728" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177521728">(Oct 07 2019 at 14:00)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> , time for another update.</p>



<a name="177521805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177521805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177521805">(Oct 07 2019 at 14:01)</a>:</h4>
<p>Not a lot of stuff happened this week, but the highlight is the support for <code>#[cfg()]</code> attributes for conditional compilation by <a href="https://github.com/oxalica" target="_blank" title="https://github.com/oxalica">https://github.com/oxalica</a>: <a href="https://github.com/rust-analyzer/rust-analyzer/pull/1928" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/1928">https://github.com/rust-analyzer/rust-analyzer/pull/1928</a></p>



<a name="177522163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522163">(Oct 07 2019 at 14:05)</a>:</h4>
<p>Some other things:</p>
<ul>
<li>we've replaced type-based visitor for AST nodes with a macro, which does "dynamic cast"</li>
<li>in <a href="https://github.com/rust-analyzer/rust-analyzer/issues/1807" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/1807">#1807</a>,  cronokirby implemented "apply De Morgan Law" assist</li>
<li>goffrie did a couple of fixes to the parser</li>
<li>lnicola implemented support for diverging blocks</li>
</ul>



<a name="177522371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522371">(Oct 07 2019 at 14:07)</a>:</h4>
<p>I think I want to look at supporting dynamic reloading of the crate graph next:</p>
<ul>
<li>as a side effect, this'll move us to a lazy VFS, which is an interesting design problem</li>
<li>people are consistenly confused by rust-analyzer not picking up changes to Cargo.toml, it would be cool if we did something about this</li>
</ul>



<a name="177522505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522505" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522505">(Oct 07 2019 at 14:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> , any updates on your side?</p>



<a name="177522529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522529">(Oct 07 2019 at 14:09)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="133169">@matklad</span> sorry -- a neighbor came by with an emergency</p>



<a name="177522538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522538" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522538">(Oct 07 2019 at 14:09)</a>:</h4>
<p>was afk</p>



<a name="177522543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522543">(Oct 07 2019 at 14:09)</a>:</h4>
<p>just got back, let me catch up</p>



<a name="177522727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522727">(Oct 07 2019 at 14:11)</a>:</h4>
<p>OK, so, updates: </p>
<ul>
<li>we're making progress on dyn/impl Trait (thanks to <span class="user-mention" data-user-id="116108">@Keith Yeung</span>)</li>
<li>I am planning today to make some initial proposals regarding factoring out a shared type  library</li>
<li>and we're planning to establish a kind of regular design meeting, though the timeslot has to be figured out, that will help us in "disseminating" knowledge</li>
</ul>



<a name="177522747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522747">(Oct 07 2019 at 14:11)</a>:</h4>
<p>I spent most of my time last week exploring some non-RLS-related trait things (e.g., upcasts in rustc and what it takes to unblock const generics)</p>



<a name="177522758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522758">(Oct 07 2019 at 14:11)</a>:</h4>
<p>(The good news being that I think I see the path, but we'll see)</p>



<a name="177522912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522912">(Oct 07 2019 at 14:13)</a>:</h4>
<p>That reminds me... At the all hands, when we were discussing traits, there was an idea that, to unblock immediate progress on rustc side, we (well, you I presume :) ) should pause chalk work and instead augment the current trait solver.</p>
<p>I am curious what's the final plan here: are we doing GATs and stuff before chalkification?</p>



<a name="177522989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177522989" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177522989">(Oct 07 2019 at 14:14)</a>:</h4>
<p>I'm still kind of trying to figure that out. My current plan is to pursue two main things:</p>
<ul>
<li>Some form of lazy norm on rustc side -- this unblocks const generics primarily but maybe some other things</li>
<li>Chalk integration and improvements through rust-analyzer primarily</li>
</ul>



<a name="177523042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177523042" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177523042">(Oct 07 2019 at 14:15)</a>:</h4>
<p>Once we have lazy norm going, the next step would probably be figuring out some details of the "universe story" on rustc side; I did some of that work already. That might <em>then</em> enable GATs on the rustc side, but I'm not entirely sure. I remember the last time I did work on this I felt like it would be hard</p>



<a name="177523163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/177523163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#177523163">(Oct 07 2019 at 14:16)</a>:</h4>
<p>(I also opened a lot of issues around refactoring chalk last week, incidentally, but I need to prioritize them a bit)</p>



<a name="178108271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178108271" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178108271">(Oct 14 2019 at 14:33)</a>:</h4>
<p>Belated sync for this week:</p>
<ul>
<li>I've been tied up with migration to lazy VFS, which is not yet finished. I've uncovered interesting case where purely lazy VFS won't be enough: for "find all references", we want to do a text search first, and that wants to traverse files eagarly</li>
<li>Completing paths to generic types in the type context now automatically adds <code>&lt;&gt;</code></li>
<li>We now has a less hacky routing to change indentation based on the syntax tree, and not on the string</li>
<li>The code to resolve <code>mod foo;</code> to file is refactored and handled more edge cases correctly now</li>
<li><code>Self</code> is correcty resolve in adt definitions</li>
<li>Type inference code is split across several module</li>
</ul>



<a name="178657457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178657457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178657457">(Oct 21 2019 at 14:00)</a>:</h4>
<p>Next week, next syncup!</p>



<a name="178657705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178657705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178657705">(Oct 21 2019 at 14:03)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="178657878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178657878" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178657878">(Oct 21 2019 at 14:05)</a>:</h4>
<p>Update from last week:</p>
<ul>
<li>We had a trait design meeting where we talked about some of our possible plans for what a generic type library might look like. While flying to Rust Belt Rust, I also started working on this -- so far it's going reasonably well. My particular goal with this refactoring is to help improve the "must know self type" issue that is related to rust-analyzer</li>
</ul>



<a name="178657920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178657920" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178657920">(Oct 21 2019 at 14:05)</a>:</h4>
<p>I unfortunately don't have a lot of too report this week: I've been trying different thing, and they didn't quite work out.</p>
<p>In particular, I've made all preliminary refactoings for a lazy VFS, only to realise that we probably don't actually want a fully lazy VFS. We want to load file texts lazily, but the set of files should be loaded eagarly. This is how watchman works, and this I think is the only reliable way to get file watching right. </p>
<p>I've also looked into splitting hir database of rust-analyzer into several crates. The results are mixed:</p>
<ul>
<li>it's defiitelly possible to do the splitting</li>
<li>it's unclear how the split API should look like: neither <code>id.foo(db)</code> nor <code>db.foo(id)</code> are quite a fit</li>
<li>it's somewhat unclear along which lines the API should be split, as there are at least two dimensions: before types / after types and top level  / function bodies</li>
</ul>



<a name="178658021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658021" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658021">(Oct 21 2019 at 14:06)</a>:</h4>
<ul>
<li>I also talked a fair amount to <span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> at RBR about our overall IDE strategy and how to better "harmonize" rust-analyzer, RLS, and rustc development. We didn't  reach a firm conclusion yet except that we needed to setup some more time to talk about this with you present, <span class="user-mention" data-user-id="133169">@matklad</span>, and that we probably had to start devoting bigger blocks of time to talk it all out.</li>
</ul>



<a name="178658081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658081">(Oct 21 2019 at 14:07)</a>:</h4>
<p>Hmm, ok, I will try to catch up a bit on that discussion</p>



<a name="178658087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658087">(Oct 21 2019 at 14:07)</a>:</h4>
<p>(the splitting of the crate)</p>



<a name="178658118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658118">(Oct 21 2019 at 14:07)</a>:</h4>
<p>Oh, there is another thing, which is that we landed <em>some</em> support for <code>dyn Trait</code> and <code>impl Trait</code>, but it's quite broken</p>



<a name="178658120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658120">(Oct 21 2019 at 14:07)</a>:</h4>
<p>Indeed we ought to figure this particular elephant in the room out</p>



<a name="178658156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658156">(Oct 21 2019 at 14:07)</a>:</h4>
<p>Yeah. I was finding it useful to try and explore various "scenarios"</p>



<a name="178658180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658180">(Oct 21 2019 at 14:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> yeah, <span class="user-mention" data-user-id="129457">@Florian Diebold</span> already has a WIP PR which integrates that with rust-analyzer, which doens't quite work yet</p>



<a name="178658234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658234" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658234">(Oct 21 2019 at 14:08)</a>:</h4>
<p>e.g., if we go "all in" on rust-analyzer, what does that look like? which of the things we might want to do on rustc conflict with that? What is the opposite extreme? What's in the middle?</p>



<a name="178658251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658251">(Oct 21 2019 at 14:08)</a>:</h4>
<p>OK, I see a topic that looks like I need to catch up on it</p>



<a name="178658272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658272">(Oct 21 2019 at 14:08)</a>:</h4>
<blockquote>
<ul>
<li>We had a trait design meeting where we talked about some of our possible plans for what a generic type library might look like. </li>
</ul>
</blockquote>
<p>on this topic, not sure if you followed that at all <span class="user-mention" data-user-id="133169">@matklad</span>?</p>



<a name="178658295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658295">(Oct 21 2019 at 14:09)</a>:</h4>
<p>Nope, I think I've missed that</p>



<a name="178658328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658328" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658328">(Oct 21 2019 at 14:09)</a>:</h4>
<p>the relevant thing to rust-analyzer is that -- at <em>least</em> to start and maybe permanently -- I want to have traits that let you interact with types generically, without regard to their concrete representation</p>



<a name="178658347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658347" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658347">(Oct 21 2019 at 14:09)</a>:</h4>
<p>Like, I think I wasn't pinged, do you have a link to the zulip thread?</p>



<a name="178658356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658356" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658356">(Oct 21 2019 at 14:09)</a>:</h4>
<p>one sec</p>



<a name="178658375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658375">(Oct 21 2019 at 14:09)</a>:</h4>
<p>here are the <a href="https://github.com/rust-lang/wg-traits/blob/master/minutes/design-2019-10-16.md" target="_blank" title="https://github.com/rust-lang/wg-traits/blob/master/minutes/design-2019-10-16.md">notes on the meeting</a></p>



<a name="178658404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658404">(Oct 21 2019 at 14:10)</a>:</h4>
<p>there are links to the topic but also significant points</p>



<a name="178658516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658516">(Oct 21 2019 at 14:11)</a>:</h4>
<blockquote>
<p>the relevant thing to rust-analyzer is that -- at <em>least</em> to start and maybe permanently -- I want to have traits that let you interact with types generically, without regard to their concrete representation</p>
</blockquote>
<p>there are two reasons to do this:</p>
<ul>
<li>it allows us to bridge rustc and other crates in an incremental fashion</li>
<li>it also helps us to write more concrete code in some cases, where we want to divide out "categories" of types -- a lot of the discussion in the meeting was about one instance of this, in chalk. In this case, you might even have only one actual underlying "type representation", but you write the code against generics nonetheless.</li>
</ul>



<a name="178658517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658517" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658517">(Oct 21 2019 at 14:11)</a>:</h4>
<p>I'm exploring this</p>



<a name="178658536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658536">(Oct 21 2019 at 14:11)</a>:</h4>
<p>(I expect to put more time into that today)</p>



<a name="178658609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658609" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658609">(Oct 21 2019 at 14:12)</a>:</h4>
<p>If that makes more progress, I am definitely interested in trying to work with <span class="user-mention" data-user-id="129457">@Florian Diebold</span> to factor out the type checker from RLS into something more independent (maybe even integrate it into the chalk repository, not sure -- it depends on what we decide the "scope" of the chalk repo should be)</p>



<a name="178658612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658612">(Oct 21 2019 at 14:12)</a>:</h4>
<p>Aha, the typefamaly pattern seems like a hammer big enough to handle every librarification</p>



<a name="178658628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658628">(Oct 21 2019 at 14:12)</a>:</h4>
<p>Yes, I've found it a very powerful pattern in the past</p>



<a name="178658660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658660">(Oct 21 2019 at 14:12)</a>:</h4>
<p>Right now though what I'm trying to do</p>



<a name="178658665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658665">(Oct 21 2019 at 14:13)</a>:</h4>
<p>is refactor some of the parts of chalk that are quite messy <em>anyway</em></p>



<a name="178658676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658676">(Oct 21 2019 at 14:13)</a>:</h4>
<p>my goal is that the code reads <em>nicer</em> with the generics than without</p>



<a name="178658683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658683">(Oct 21 2019 at 14:13)</a>:</h4>
<p>and helps to avoid some kinds of bugs</p>



<a name="178658691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658691">(Oct 21 2019 at 14:13)</a>:</h4>
<p>we'll see if I can achieve that ;)</p>



<a name="178658709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658709">(Oct 21 2019 at 14:13)</a>:</h4>
<p>my main concern is undue complexity; otoh I think that people who hack on chalk should probably be pretty comfortable with traits :P</p>



<a name="178658728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658728" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658728">(Oct 21 2019 at 14:13)</a>:</h4>
<p>one of the nice things though of the "one true underlying type" thing</p>



<a name="178658738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658738">(Oct 21 2019 at 14:13)</a>:</h4>
<p>is that you can kind of "cut off" the generics at any point</p>



<a name="178658791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658791">(Oct 21 2019 at 14:14)</a>:</h4>
<p>i.e., in my chalk branch right now, the low-level code is generic, but at some point everybody just hardcodes on "type family"</p>



<a name="178658795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658795">(Oct 21 2019 at 14:14)</a>:</h4>
<p>(this lets me convert crate by crate)</p>



<a name="178658832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658832">(Oct 21 2019 at 14:14)</a>:</h4>
<p>I would also be concerned about separate compilation. But yeah, if, in the end, we have some concrete representation, that fixes this problem.</p>



<a name="178658874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658874">(Oct 21 2019 at 14:15)</a>:</h4>
<p>there is certainly the issue of compilation time and monomorphization, but -- yes -- keeping the number of concrete representations minimal means there aren't really multiple copies in the end</p>



<a name="178658895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658895" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658895">(Oct 21 2019 at 14:15)</a>:</h4>
<p>(though you do defer some of that compilation to the "leaf crate")</p>



<a name="178658916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658916" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658916">(Oct 21 2019 at 14:16)</a>:</h4>
<p>(hopefully incremental helps with this, if not, we should figure out <em>why not</em>)</p>



<a name="178658967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658967">(Oct 21 2019 at 14:16)</a>:</h4>
<p>this reminds me -- I've really failed to keep up with salsa, as you no doubt saw</p>



<a name="178658982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178658982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178658982">(Oct 21 2019 at 14:16)</a>:</h4>
<p>but you had mentioned something about <code>&amp;dyn Foo</code> not working for rust-analyzer?</p>



<a name="178659010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659010">(Oct 21 2019 at 14:16)</a>:</h4>
<p><code>&amp;(dyn AstDatabase + DefDatabase)</code> not working, yeah</p>



<a name="178659020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659020">(Oct 21 2019 at 14:16)</a>:</h4>
<p>yeah that <em>certainly</em> won't work</p>



<a name="178659037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659037" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659037">(Oct 21 2019 at 14:17)</a>:</h4>
<p>And there's a separate issue of creating mock databses for tests</p>



<a name="178659048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659048">(Oct 21 2019 at 14:17)</a>:</h4>
<p>actually the work that <span class="user-mention" data-user-id="124069">@Alexander Regueiro</span> has been doing on trait upcast could be quite relevant here</p>



<a name="178659070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659070">(Oct 21 2019 at 14:17)</a>:</h4>
<p>I remember that when I was pushing <code>&amp;dyn</code> changes through Lark</p>



<a name="178659073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659073" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659073">(Oct 21 2019 at 14:17)</a>:</h4>
<p>not having trait upcast was a horrible pain</p>



<a name="178659096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659096" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659096">(Oct 21 2019 at 14:17)</a>:</h4>
<p>basically, you need concrete db not only in the leaf trait, but also in the tests for intermediate crates, and creating that mock everytime is boilerplaty</p>



<a name="178659110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659110">(Oct 21 2019 at 14:17)</a>:</h4>
<p>maybe because we were using a large hierarchy of salsa traits</p>



<a name="178659198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659198" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659198">(Oct 21 2019 at 14:18)</a>:</h4>
<blockquote>
<p>basically, you need concrete db not only in the leaf trait, but also in the tests for intermediate crates, and creating that mock everytime is boilerplaty</p>
</blockquote>
<p>yeah I think in Lark I moved the tests by and large to the leaf crate</p>



<a name="178659217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659217" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659217">(Oct 21 2019 at 14:18)</a>:</h4>
<p>so as to have a single "mock db"</p>



<a name="178659224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659224">(Oct 21 2019 at 14:18)</a>:</h4>
<p>I certainly remember encountering this problem</p>



<a name="178659237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659237">(Oct 21 2019 at 14:18)</a>:</h4>
<p>Yeah, I also feel that salsa atm pushes me towards this direction, but I think that's horrible long-term</p>



<a name="178659267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659267">(Oct 21 2019 at 14:19)</a>:</h4>
<p>I'm not actually sure that's true</p>



<a name="178659278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659278" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659278">(Oct 21 2019 at 14:19)</a>:</h4>
<p>basically, if you fix a bug in a low-level crate, you need to recompile the whole tower to test it</p>



<a name="178659285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659285">(Oct 21 2019 at 14:19)</a>:</h4>
<p>But I guess I agree I'd prefer to make the choice for other reasons</p>



<a name="178659295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659295">(Oct 21 2019 at 14:19)</a>:</h4>
<p>Yeah, that part is not great I guess</p>



<a name="178659422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659422" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659422">(Oct 21 2019 at 14:20)</a>:</h4>
<p>I am actually not sure if it's a good idea to split databases over several crates.....</p>



<a name="178659441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659441">(Oct 21 2019 at 14:20)</a>:</h4>
<p>the other option</p>



<a name="178659461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659461">(Oct 21 2019 at 14:20)</a>:</h4>
<p>which I've experimented with in chalk</p>



<a name="178659477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659477">(Oct 21 2019 at 14:20)</a>:</h4>
<p>is just having <em>regular traits</em> basically</p>



<a name="178659496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659496">(Oct 21 2019 at 14:20)</a>:</h4>
<p>I can see a design where there's only a single database crate that does everytihng, and all other code lives in separate crates, and uses traits to interface to DB without knowning about salsa at all</p>



<a name="178659507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659507" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659507">(Oct 21 2019 at 14:20)</a>:</h4>
<p>yeah, that</p>



<a name="178659525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659525">(Oct 21 2019 at 14:21)</a>:</h4>
<p>I thnk this is a better fit (at minimum) for library-ification</p>



<a name="178659598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659598">(Oct 21 2019 at 14:22)</a>:</h4>
<p>For librarification, definitelly yes. For rust-analyzer itself, not sure</p>



<a name="178659657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659657" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659657">(Oct 21 2019 at 14:22)</a>:</h4>
<p>What's the reason to use a DB above using traits directly in the first place?</p>



<a name="178659663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659663">(Oct 21 2019 at 14:22)</a>:</h4>
<p>currently, hir is pretty slow to compile and pretty big. I'd love to slice it into at least "types" and "not types"</p>



<a name="178659780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659780">(Oct 21 2019 at 14:23)</a>:</h4>
<blockquote>
<p>What's the reason to use a DB above using traits directly in the first place?</p>
</blockquote>
<p>there isn't really a very good one that I can see, except that it's slightly less repetitive maybe</p>



<a name="178659873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659873" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659873">(Oct 21 2019 at 14:24)</a>:</h4>
<p>I could definitely be persuaded that it makes more sense to just use plain traits all the way down</p>



<a name="178659882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659882">(Oct 21 2019 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="125131">@detrumi</span> </p>
<ul>
<li>to avoid boilerplate of making a pure trait and DB trait</li>
<li>to make testing easier (as DB provides a natural impl for the traits)</li>
</ul>



<a name="178659910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659910" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659910">(Oct 21 2019 at 14:24)</a>:</h4>
<p>but yeah, maybe just using traits is the way to go....</p>



<a name="178659930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659930">(Oct 21 2019 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> regarding testing, I guess another way to go about reducing boilerplate would be to have macros or things that help you to generate the impls</p>



<a name="178659932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659932">(Oct 21 2019 at 14:24)</a>:</h4>
<p>I haven't thought much about it</p>



<a name="178659940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659940">(Oct 21 2019 at 14:24)</a>:</h4>
<p>it doesn't really feel like <em>salsa's</em> fault to me</p>



<a name="178659957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659957" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659957">(Oct 21 2019 at 14:25)</a>:</h4>
<p>I think Rust in general is not very good at this kind of re-use</p>



<a name="178659984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178659984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178659984">(Oct 21 2019 at 14:25)</a>:</h4>
<p>It's kind of an OO strength and -- lacking specialization and a few other things -- we don't quite have the tools you want</p>



<a name="178660035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660035">(Oct 21 2019 at 14:25)</a>:</h4>
<p>But regardless it is a limitation</p>



<a name="178660069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660069">(Oct 21 2019 at 14:25)</a>:</h4>
<p>I think the main reason I was thinking that pulling tests to the "root" is ok is the old tension of integration vs unit testing.</p>



<a name="178660145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660145">(Oct 21 2019 at 14:26)</a>:</h4>
<p>To some extent it's nice for the tests to be kind of independent of  the precise nature of your division into crates -- but to some extent that's also <em>not</em> nice, esp. for practical compilation time reasons.</p>



<a name="178660173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660173">(Oct 21 2019 at 14:26)</a>:</h4>
<p>Hm, I am not sure. I think, if salsa created a concrete DB (which are composed together in single inheritance style), I would be able to write</p>
<div class="codehilite"><pre><span></span>fn mock_db(fixture: &amp;str) -&gt; TheDbStruct
</pre></div>


<p>in the intermediate crate, and then use it in the final crate</p>



<a name="178660178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660178">(Oct 21 2019 at 14:26)</a>:</h4>
<p>if your crates are sufficiently coarse, and thus change infrequently, it's probably better to have the tests be linked to them</p>



<a name="178660260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660260" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660260">(Oct 21 2019 at 14:27)</a>:</h4>
<p>hmm, ok, I see, maybe there is some way for us to make the databases more composable in this way</p>



<a name="178660317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660317">(Oct 21 2019 at 14:28)</a>:</h4>
<p>this reminds me that you also had some other comments about state that I never fully understood</p>



<a name="178660358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660358">(Oct 21 2019 at 14:28)</a>:</h4>
<p>we probably need to create some kind of hackmd to help us track these concerns a bit</p>



<a name="178660364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660364">(Oct 21 2019 at 14:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> it seems like we need a meeting/design document for "physical architecture of salsa-based compilers"?</p>



<a name="178660376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660376">(Oct 21 2019 at 14:28)</a>:</h4>
<p>yes, exactly</p>



<a name="178660392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660392">(Oct 21 2019 at 14:29)</a>:</h4>
<p>Heh, great minds think alike</p>



<a name="178660403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660403">(Oct 21 2019 at 14:29)</a>:</h4>
<p>I'd like to go now and think about other things but I'd like to not forget this, and to maybe schedule an hour to talk it out</p>



<a name="178660412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660412" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660412">(Oct 21 2019 at 14:29)</a>:</h4>
<p>or, as they say in Russia, у дураков мысли сходятся</p>



<a name="178660640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660640" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660640">(Oct 21 2019 at 14:31)</a>:</h4>
<p>I think I'll open a thread on the salsa repository to just write down some thougts: that way, we won't forget this</p>



<a name="178660745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660745">(Oct 21 2019 at 14:32)</a>:</h4>
<p>good starting point</p>



<a name="178660761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/178660761" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#178660761">(Oct 21 2019 at 14:32)</a>:</h4>
<p>ok, great chat :) ttyl</p>



<a name="179233394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233394" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233394">(Oct 28 2019 at 14:01)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> , it's time for weekly sync-up</p>



<a name="179233396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233396">(Oct 28 2019 at 14:02)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="133169">@matklad</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="179233451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233451">(Oct 28 2019 at 14:02)</a>:</h4>
<p>A bunch off things happened recently</p>



<a name="179233513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233513" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233513">(Oct 28 2019 at 14:03)</a>:</h4>
<p>Most importantly, we've finally <a href="https://github.com/rust-analyzer/rust-analyzer/pull/1892" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/1892">merged find usages</a>, implemented by <a href="https://github.com/viorina" target="_blank" title="https://github.com/viorina">https://github.com/viorina</a></p>



<a name="179233557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233557">(Oct 28 2019 at 14:03)</a>:</h4>
<p>It does the classic IDE trick of using text-search to over-approximate the set of matchings, and then confirming the matches using the real analysis</p>



<a name="179233632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233632">(Oct 28 2019 at 14:04)</a>:</h4>
<p>We don't have a trigram index yet, so the text-search phase is brute force</p>



<a name="179233690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233690">(Oct 28 2019 at 14:05)</a>:</h4>
<p>As a consequence, it's now possible to invoke "rename" for functions, and it mostly works :)</p>



<a name="179233812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233812" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233812">(Oct 28 2019 at 14:06)</a>:</h4>
<p>Another biggish thing is that we now generate assists docs and tests from "doc comments". And in general I did some cleanup around assists. We have a whole bunch of them now:</p>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/docs/user/assists.md" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/blob/master/docs/user/assists.md">https://github.com/rust-analyzer/rust-analyzer/blob/master/docs/user/assists.md</a></p>
<p>(and a couple new were added this week)</p>



<a name="179233978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179233978" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179233978">(Oct 28 2019 at 14:08)</a>:</h4>
<p>Find usages also was a stress-test for our type inference, which uncovered that infinite allocation in chalk problem. I don't think the root cause if fixed yet, but I've improved our profiling infrastructure a bit:</p>
<ul>
<li>hierarchical profiling now shows unaccounted for time</li>
<li>batch analysis has an option to analyze dependencies as well</li>
</ul>



<a name="179234194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234194">(Oct 28 2019 at 14:10)</a>:</h4>
<p>Finally, I've put the VFS work on pause without actually finishing it: it seems like I am stuck a bit, as I don't see a design that feels right, and, if we speak about various tradeoff-based designs, the one we have already seems OK. I want  to come back to this later and just try to write direct bindings to watchman, but I have sunk way to many days into this, and I think I need to swticht to something else to make progress</p>



<a name="179234252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234252">(Oct 28 2019 at 14:11)</a>:</h4>
<p>Oh, and <span class="user-mention" data-user-id="116009">@nikomatsakis</span> and I had a productive discussion about splitting salsa-database across the crates, I hope to do something concrete in this area this week</p>



<a name="179234272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234272">(Oct 28 2019 at 14:11)</a>:</h4>
<p>That's all for me I guess?</p>



<a name="179234404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234404">(Oct 28 2019 at 14:13)</a>:</h4>
<p>Cool --</p>



<a name="179234415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234415">(Oct 28 2019 at 14:13)</a>:</h4>
<p>Ahhh, one more thing: <span class="user-mention" data-user-id="125131">@detrumi</span> implemented client-side shortening of type hints, which helps a lot with "as long as a screen" infered types :)</p>



<a name="179234434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234434">(Oct 28 2019 at 14:13)</a>:</h4>
<p>I've been working on some changes to chalk, some of which it seems like <span class="user-mention" data-user-id="129457">@Florian Diebold</span> has integrated</p>



<a name="179234494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234494" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234494">(Oct 28 2019 at 14:14)</a>:</h4>
<p>the overall goal is to rework how we handle associated types so that we never ask "open-ended" requests for "all impls of a trait"</p>



<a name="179234506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234506">(Oct 28 2019 at 14:14)</a>:</h4>
<p>though we're not there yet</p>



<a name="179234523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234523">(Oct 28 2019 at 14:14)</a>:</h4>
<p>it's also I think laying the foundations for a "shared type" library that both rustc / rust-analyzer can employ</p>



<a name="179234538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234538" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234538">(Oct 28 2019 at 14:14)</a>:</h4>
<p>though I want to do a bit more digging in that direction</p>



<a name="179234543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234543">(Oct 28 2019 at 14:14)</a>:</h4>
<p>I <em>also</em> think it's related to that bug you uncovered</p>



<a name="179234544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234544">(Oct 28 2019 at 14:14)</a>:</h4>
<blockquote>
<p>Ahhh, one more thing: <span class="user-mention silent" data-user-id="125131">detrumi</span> implemented client-side shortening of type hints, which helps a lot with "as long as a screen" infered types <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>
</blockquote>
<p>Good to hear it's useful <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="179234546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234546">(Oct 28 2019 at 14:14)</a>:</h4>
<p>but I've not 100% proven that</p>



<a name="179234598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234598">(Oct 28 2019 at 14:15)</a>:</h4>
<p>(that is, I think that bug is caused by the current logic in unification -- which would be removed in the new scheme -- causing a kind of "infinite set of goals to prove")</p>



<a name="179234726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234726">(Oct 28 2019 at 14:16)</a>:</h4>
<p>there has been some good PRs in this direction, with <span class="user-mention" data-user-id="125131">@detrumi</span> ( <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span>) implementing a derive for chalk's <code>Fold</code> trait, and <span class="user-mention" data-user-id="232957">@Jack Huey</span> working on simplifying some of rust's context traits</p>



<a name="179234771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234771">(Oct 28 2019 at 14:16)</a>:</h4>
<p>(as an aside, I am thinking about trying to rip out the chalk integration that's in rustc now and rework it so that it hooks into the chalk-solve crate, like rust-analyzer does)</p>



<a name="179234793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234793">(Oct 28 2019 at 14:17)</a>:</h4>
<p>anyway, we still didn't fix the bugs around <code>dyn Trait</code> but hopefully soon</p>



<a name="179234802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234802">(Oct 28 2019 at 14:17)</a>:</h4>
<p>so that we can combine that logic with rust-analyzer</p>



<a name="179234886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234886">(Oct 28 2019 at 14:18)</a>:</h4>
<p>Exciting, given that we want to use <code>dyn Trait</code> inside rust-analyzer more, when splitting stuff across crates :)</p>



<a name="179234902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234902">(Oct 28 2019 at 14:18)</a>:</h4>
<blockquote>
<p>the overall goal is to rework how we handle associated types so that we never ask "open-ended" requests for "all impls of a trait"</p>
</blockquote>
<p>on this topic, I was thinking that it hopefully soon I can turn to looking more into rust-analyzer's type checker and how to best integrate it with check (and ultimately create a shared library), because I think it's going to take some experimentation to get that truly working</p>



<a name="179234921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234921" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234921">(Oct 28 2019 at 14:18)</a>:</h4>
<blockquote>
<p>Exciting, given that we want to use <code>dyn Trait</code> inside rust-analyzer more, when splitting stuff across crates :)</p>
</blockquote>
<p>Yay =) I think there's not that much work to do, I'm not sure if <span class="user-mention" data-user-id="116108">@Keith Yeung</span> has had a chance to look into it yet</p>



<a name="179234948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179234948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179234948">(Oct 28 2019 at 14:19)</a>:</h4>
<p>(I'll check if they're busy, because I think it wouldn't take me long to prep the PR anyhow, but I don't want to steal it from them -- and it might be more work than I think)</p>



<a name="179235081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235081">(Oct 28 2019 at 14:20)</a>:</h4>
<p>Oh, one more thing: we are receiving more "rust-analyzer eats 8GB of ram after two hours of usage" issues recently.  I haven't seen this myself (as I pretty-much rebuild rust-analyzer once in ten minutes anyway), but it might be a symptom of something wrong with GC</p>



<a name="179235155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235155">(Oct 28 2019 at 14:21)</a>:</h4>
<p>hmm</p>



<a name="179235162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235162">(Oct 28 2019 at 14:21)</a>:</h4>
<p>Would be cool to be able "print, how much space each table occupies" to debug this issues, but I don't think we can esily implement this at the moment</p>



<a name="179235291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235291" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235291">(Oct 28 2019 at 14:23)</a>:</h4>
<p>What's blocking is the "heapsize" support?</p>



<a name="179235369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235369">(Oct 28 2019 at 14:24)</a>:</h4>
<p>the fact that heapsize on <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a> is pretty much dead, and the new one in Servo is not public</p>



<a name="179235420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235420" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235420">(Oct 28 2019 at 14:24)</a>:</h4>
<p>Although perhaps we should look at just the <em>number</em> of keys/values?</p>



<a name="179235467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235467">(Oct 28 2019 at 14:25)</a>:</h4>
<blockquote>
<p>the fact that heapsize on <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a> is pretty much dead, and the new one in Servo is not public</p>
</blockquote>
<p>I'm guessing they can't just open-source it?</p>



<a name="179235549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235549">(Oct 28 2019 at 14:26)</a>:</h4>
<p>"just" means making sure that the API actually makes sense outside of Servo</p>



<a name="179235570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235570" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235570">(Oct 28 2019 at 14:26)</a>:</h4>
<p>Ah, of course</p>



<a name="179235600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235600" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235600">(Oct 28 2019 at 14:27)</a>:</h4>
<p>Like, it seems like this is a pretty solvable problem, but someone needs to apply necessary labor (and a good API/macro design taste) to actually provide a production-ready solution</p>



<a name="179235638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235638" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235638">(Oct 28 2019 at 14:27)</a>:</h4>
<p>IIRC, HeapSize was <em>just</em> dumped to <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a>, and it's not maintained because it turned out to be not that great</p>



<a name="179235736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235736">(Oct 28 2019 at 14:28)</a>:</h4>
<p>But yeah, approximating it should be fine too as long as you identify the cause</p>



<a name="179235743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235743">(Oct 28 2019 at 14:28)</a>:</h4>
<p>(for posterity, the new heapsizeof is here <a href="https://github.com/servo/servo/blob/master/components/malloc_size_of/lib.rs" target="_blank" title="https://github.com/servo/servo/blob/master/components/malloc_size_of/lib.rs">https://github.com/servo/servo/blob/master/components/malloc_size_of/lib.rs</a>)</p>



<a name="179235982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179235982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179235982">(Oct 28 2019 at 14:31)</a>:</h4>
<p>Is there a plan to defeat compile times? It's getting pretty bad with running tests.</p>



<a name="179236250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179236250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179236250">(Oct 28 2019 at 14:34)</a>:</h4>
<p>Sort of. The immediate things I want to do are:</p>
<ul>
<li>split hir into N &gt; 1 crates</li>
<li>use <code>dyn DB</code> inside <code>hir</code> more</li>
<li>change testing strategy such that <code>MockDatabase</code> is not compiled for non-test usage</li>
</ul>
<p>Long term, I'd love to see if we can make <code>salsa</code>-based API less generic, but I think it makes sense to look into that after by-reference values (<span class="user-mention" data-user-id="116009">@nikomatsakis</span> wants to change salsa sot hat queries return <code>&amp;Thing</code> and not <code>Arc&lt;Thing&gt;</code>).</p>



<a name="179236646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179236646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179236646">(Oct 28 2019 at 14:39)</a>:</h4>
<p>Large crates are really having a big impact on compile times, it seems. Hopefully that can be improved on rustc's side in the future, as splitting things up each time is a lot of work</p>



<a name="179236900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179236900" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179236900">(Oct 28 2019 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> By less generic, do you mean the <code>&amp;impl Database</code> parameters?</p>



<a name="179236999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179236999" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179236999">(Oct 28 2019 at 14:42)</a>:</h4>
<p>Yeah, and the fact that test and read database are different types</p>



<a name="179841027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841027" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841027">(Nov 04 2019 at 15:06)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, time for another sync up!</p>



<a name="179841113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841113">(Nov 04 2019 at 15:07)</a>:</h4>
<p>I think the two biggest changes this week are:</p>
<ul>
<li>more chalk work by <span class="user-mention" data-user-id="129457">@Florian Diebold</span> , so we now complete and resolve static method calls </li>
<li>the great split of <code>ra_hir</code> into crates has begun</li>
</ul>



<a name="179841139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841139" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841139">(Nov 04 2019 at 15:07)</a>:</h4>
<p>I can probably say a bit about the second one</p>



<a name="179841278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841278" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841278">(Nov 04 2019 at 15:09)</a>:</h4>
<p>First of all, the split is not complete, so the code is really not great at places. FOr example, we have <code>DefDatabase</code> and <code>DefDatabase2</code>...</p>



<a name="179841475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841475" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841475">(Nov 04 2019 at 15:11)</a>:</h4>
<p>What we do have, however, is three crates instead of one:</p>
<ul>
<li><code>hir_expand</code></li>
<li><code>hir_def</code></li>
<li><code>hir</code></li>
</ul>
<p><code>hir_expand</code> deals with macro expansion. Specifically, it defines the core datatypes required to talk about all Rust source code (some of which might be generated from macros). I originally didn't intend to split this part out, but I really really like how it looks now.</p>
<p>It's interesting how macro expansion does not depend on name-resolution even in terms of dependencies between crates: this is beccause we encode resovled macro definition into the id of a macro call</p>



<a name="179841622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841622" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841622">(Nov 04 2019 at 15:13)</a>:</h4>
<p><code>hir_def</code> is a work-in-progress -- it should contain everything srictly between macro expansion and types. At the moment, it only has module-level name resolution. I want to move expression lowering to <code>hir_def</code> as well. <code>hir_def</code> is written with ECS API, where one operates with raw IDs</p>



<a name="179841738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841738">(Nov 04 2019 at 15:14)</a>:</h4>
<p><code>hir</code> currently contains everything else. I think that, after <code>hir_def</code> is done, we should split <code>hir</code> into <code>hir_ty</code> and <code>hir</code>, and make <code>hir</code> a strict facade over <code>hir_x</code> crates.</p>



<a name="179841846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841846">(Nov 04 2019 at 15:15)</a>:</h4>
<p>One thing we've lost from the split is <code>AstDb</code> / <code>DefDb</code> separation, which we used to enforce via <code>require</code> salsa clause. That is, we put some effort to make sure you can't accidently invoke a "brittle" query form a robust query previously, but this work is undone by the split.</p>



<a name="179841959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179841959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179841959">(Nov 04 2019 at 15:16)</a>:</h4>
<p>For testing, the idea is to have a <code>#[cfg(test)]</code> MockDatabse for each hir crate (renamed <code>TestDb</code>, as it is not really a mock), which share most of the fixture-related code via a <code>WithFixture</code> trait, defined in the root <code>ra_db</code> crate</p>



<a name="179842005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179842005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179842005">(Nov 04 2019 at 15:17)</a>:</h4>
<p>the observation here is that various hir layers never add new <em>inputs</em>, so you only need to define fixtures at the bottom layer</p>



<a name="179842267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179842267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179842267">(Nov 04 2019 at 15:20)</a>:</h4>
<p>Some of the less groundshaking changes:</p>
<ul>
<li>we now show deprecated status of the item in the completion (it is fetched from ast at the moment, should convert it to hir some day)</li>
<li>docs are correctly attached to statics</li>
<li>better hover for macros</li>
<li>don't insert braces after completing macro inside a use statemetn</li>
<li>some fixes for import-path routine</li>
</ul>



<a name="179842337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179842337" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179842337">(Nov 04 2019 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> sorry I'm late, I should've written, I had to run at the last minute (I've also been heads down on something this morning)</p>



<a name="179842355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179842355" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179842355">(Nov 04 2019 at 15:21)</a>:</h4>
<p>I'm going to catch up in a bit though</p>



<a name="179842363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179842363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179842363">(Nov 04 2019 at 15:21)</a>:</h4>
<p>oh, <span class="user-mention" data-user-id="132829">@Christopher Durham</span> is also doing some crazy unsafe experiments with rowan, with an effort to cut down the number of allocations even more. I haven't had a chance to review it properly, but the latest approach with boxed and interned tokens seems really promising</p>



<a name="179842426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179842426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179842426">(Nov 04 2019 at 15:22)</a>:</h4>
<p>And I am excited to see <span class="user-mention" data-user-id="216201">@Edwin Cheng</span> back! Looks like we are about to see some progress on macro front soon :)</p>



<a name="179843186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/179843186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#179843186">(Nov 04 2019 at 15:31)</a>:</h4>
<p>I think I can piggyback off <span class="user-mention" data-user-id="216201">@Edwin Cheng</span> 's work for macro signature help</p>



<a name="180429652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/180429652" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#180429652">(Nov 11 2019 at 14:55)</a>:</h4>
<p>I need to run soon, so let me give a short async update:</p>
<ul>
<li><span class="user-mention" data-user-id="216201">@Edwin Cheng</span> added ranges tracking to macro expansion. We now can correlate ranges in macro_call with ranges in the expansion result. So, goto definition on a macro-genereted struct now points to the identifier, and not to the macro call as a whole. </li>
<li><span class="user-mention" data-user-id="246514">@Martin Asquino</span> refactored handling of the deprecated attribute to hir. This also unlock more clear handing of doc comments, via deshugaring to attributes (at the moment, doc comments are first-class in ra)</li>
<li><span class="user-mention" data-user-id="204219">@Matthias247</span> implemented nameresolution support for no-std crates</li>
<li><span class="user-mention" data-user-id="216201">@Edwin Cheng</span> started implemented builtin macros, the `line! is already done</li>
<li><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> did a whole bunch of crate updates and improved hover for builtin types</li>
<li>I am continuing with splitting hir into crates. No major splits happened this weak, but I've cleaned up a bunch of interfaces (or, rather, introduced the interfaces in the first place).</li>
<li>We also experimentally disabled debug-info in dev builds of rust-analyzer, as it makes incremental less efective, and doesn't really help if you debug with <code>dbg!</code> and <code>eprintln!</code></li>
</ul>



<a name="180429935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/180429935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#180429935">(Nov 11 2019 at 14:58)</a>:</h4>
<p>The most interesting bit today is probably the first point. The main problem there was to identify tokens in the expended code as coming from either the call or the definition. My understanding that in rustc this is handled by each token having a <em>global</em> unique span.</p>
<p>In rust-analyzer, tokens are locally numbered with small interegers, and, when you substitute captures into a macro template, you shift the numbers of the tokens in captures, sort-of how you do subst in lambda-calculus with de-Bruijn indices</p>



<a name="180430353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/180430353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#180430353">(Nov 11 2019 at 15:03)</a>:</h4>
<p>Ok, I am leaving, will catch up later :) <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="180430355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/180430355" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#180430355">(Nov 11 2019 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> thanks for the update! On the chalk side, <span class="user-mention" data-user-id="232957">@Jack Huey</span> has been doing great work refactoring and fixing various bugs. I just remembered that I need to investigate that infinite loop. One good thing is that the work he's been doing is helping to pave way for fuel.</p>



<a name="181053895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181053895" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181053895">(Nov 18 2019 at 20:44)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> I've forgot about today's sync-up, but let me make an async update</p>
<ul>
<li><a href="https://github.com/chmln" target="_blank" title="https://github.com/chmln">https://github.com/chmln</a> implemented feature flags to disable postifx completions</li>
<li>expression lowering and scopes were moved to <code>hir_def</code>. <code>Resolver</code> I think is the sole big thing that is in <code>hir</code>, which I would like to move to <code>hir_def</code>. That means that <code>hir</code> at the moment is mostly about types, and it might make sense to start looking into extracting <code>hir_ty</code> out of it.</li>
<li><span class="user-mention" data-user-id="117482">@Pascal</span> implemented proper error reporting for <code>cargo xtask install</code></li>
<li><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> did a bunch of cleanups of windows builds </li>
<li><a href="https://github.com/rep-nop" target="_blank" title="https://github.com/rep-nop">https://github.com/rep-nop</a> added <code>add_new</code> assist, so that there's no need to pull in <code>derive(new)</code> for a couple of news</li>
<li>we've disabled all debug info for both debug and release builds of rust-analyzer</li>
<li>I've refactored handling of <code>impl</code>s and made them more similar to other, named items. This surprisingly removed quite a lot of code</li>
<li><span class="user-mention" data-user-id="198321">@Geoffry Song</span> fixed parsing of the <code>as</code> cast operator</li>
<li><span class="user-mention" data-user-id="129457">@Florian Diebold</span> upgraded chalk, so we have <code>dyn</code> and <code>impl</code> support!</li>
<li>I've also did a bit of refactoring around tracking macro ranges; in particular, I made more of the IDE features aware of macros. That means that <code>goto</code> definition now works for code that is inside macro calls (at least in some cases, there's many more bugs we need to iron out to make this robust). This also opens a door to making more IDE features to work inside macros, and in fact <span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> did this for hover and goto type def earlier today!</li>
<li><span class="user-mention" data-user-id="216201">@Edwin Cheng</span> is doing more work on supporting macros, in particular, on supporting <strong>eager</strong> built-in macros (I haven't caught up with this work yet :( )</li>
<li>Finally, we've switched (with the help from <span class="user-mention" data-user-id="132829">@Christopher Durham</span> ) the CI from travis to github actions</li>
</ul>



<a name="181830258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181830258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181830258">(Nov 25 2019 at 15:04)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> time for the next sync up!</p>



<a name="181830979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181830979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181830979">(Nov 25 2019 at 15:11)</a>:</h4>
<p>Things that happened last week:</p>
<ul>
<li><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> did a bunch of work to unlock more features in macros</li>
<li><span class="user-mention" data-user-id="216201">@Edwin Cheng</span> fixed several problems with macro expansion</li>
<li><span class="user-mention" data-user-id="216201">@Edwin Cheng</span> implemented "expand macro" action it the LSP and VS Code (and <span class="user-mention" data-user-id="129457">@Florian Diebold</span> implemented the Emacs side)</li>
<li>we did a minor upgrade of the rowan library, which included a semi-rewrite by <span class="user-mention" data-user-id="132829">@Christopher Durham</span> , which brought down memory usage of sytnax trees further down by 15%</li>
<li><a href="https://github.com/kiljacken" target="_blank" title="https://github.com/kiljacken">https://github.com/kiljacken</a> move type-hints truncation code to server-side</li>
<li>I did a whole bunch of refactorings all over the place. Again, I am tweaking the way IDs and mapping to source in a pretty fundamental way. Still have no idea if this is the right approach or not</li>
<li>Name resolution is fully encapsulated into the <code>hir_def</code> crate</li>
</ul>
<p>.. let me post this while I type some more...</p>



<a name="181831454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181831454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181831454">(Nov 25 2019 at 15:16)</a>:</h4>
<p>Can I suggest that you post these somewhere outside Zulip, too? Like a TWiRA?</p>



<a name="181831472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181831472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181831472">(Nov 25 2019 at 15:16)</a>:</h4>
<p>I bet it would get you more contributors</p>



<a name="181831630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181831630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181831630">(Nov 25 2019 at 15:18)</a>:</h4>
<ul>
<li>comment continuation feature is now less annoying  (it doesn't continue line non-doc comements)</li>
<li><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> and <span class="user-mention" data-user-id="216201">@Edwin Cheng</span> added support for <code>stringify!</code>, <code>compiler_error!</code> and <code>column!</code> build-in macros (compielr_error does not actually report an error)</li>
<li>I've refactored lang-items to use hir attributes and not syntax when looking for <code>#[lang]</code></li>
<li><a href="https://github.com/norcalli" target="_blank" title="https://github.com/norcalli">https://github.com/norcalli</a> implemented some support for rust-analyer in neovim on neovim side</li>
<li><a href="https://github.com/bravomikekilo" target="_blank" title="https://github.com/bravomikekilo">https://github.com/bravomikekilo</a> implemented <strong>invert if</strong> assist</li>
<li>finally, I've started moving all type-related things to a separate crate!</li>
</ul>



<a name="181831829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181831829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181831829">(Nov 25 2019 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="226095">@Dirkjan Ochtman</span> yeah, in general it definitely makes sense to talk more about what we do in rust-analyzer. We definitelly should start TWiRA once we have a release process, but maybe we can start it even before that....</p>



<a name="181831877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181831877" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181831877">(Nov 25 2019 at 15:21)</a>:</h4>
<p>I don't think it needs to be anything more than what you've got in this stream already :)</p>



<a name="181832012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181832012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181832012">(Nov 25 2019 at 15:22)</a>:</h4>
<p>It needs at least some frontend work on <a href="https://github.com/rust-analyzer/rust-analyzer.github.io" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer.github.io">https://github.com/rust-analyzer/rust-analyzer.github.io</a> to separate long-form blog post from weakly updates</p>



<a name="181832172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181832172" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181832172">(Nov 25 2019 at 15:24)</a>:</h4>
<p>Wow, that's a lot of work in a week's time <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="181833317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/181833317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#181833317">(Nov 25 2019 at 15:36)</a>:</h4>
<p>Note that one observation I did while refactorings is that, at the moment, the code is very prone to repeated climbings up the tree of defs. </p>
<p>For example, processing a record literal might call <code>field.ty</code> for each field, and <em>each</em> of those calls would fetch the parent struct, create name resolution ctx for it, etc... I feel this might become a problem, not due to any perf problems, but due to un-normalized data storage (basically, the same info is rederived several times). </p>
<p>Instead, I am trying to switch to a more Kotlin-like approach: when we need to learn a bit of info about <em>thing</em>, we look at its parent, process all the children and store the info into a map. </p>
<p>To get a bit of info about specific child, we load the map and do a lookup using a local ID.</p>



<a name="182354336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182354336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182354336">(Dec 02 2019 at 15:13)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="133169">@matklad</span> -- back from vacation, still catching up</p>



<a name="182354348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182354348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182354348">(Dec 02 2019 at 15:13)</a>:</h4>
<p>guessing no sync this week?</p>



<a name="182354488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182354488" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182354488">(Dec 02 2019 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I'll make an async sync later this week. I've moved to Berlin over the weeked, and still catching up with emails :)</p>



<a name="182518229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182518229" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ice1000 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182518229">(Dec 04 2019 at 02:13)</a>:</h4>
<p><code>ra_ide</code> compiles extremely slow</p>



<a name="182518236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182518236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ice1000 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182518236">(Dec 04 2019 at 02:13)</a>:</h4>
<p>I wish it can be split into even smaller ones</p>



<a name="182533113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182533113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182533113">(Dec 04 2019 at 07:53)</a>:</h4>
<p>Did you try <a href="https://github.com/rust-analyzer/rust-analyzer/issues/1987#issuecomment-546928766" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/1987#issuecomment-546928766">these linking flags</a>?</p>



<a name="182559548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182559548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182559548">(Dec 04 2019 at 14:22)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> </p>
<p>Hey, so here's belated update for this week.</p>
<p>First, as per <span class="user-mention" data-user-id="226095">@Dirkjan Ochtman</span> advice, I've moved "the laundry list of things that changed since last week" to the rust-analyzer website. You can read it here:  <a href="https://rust-analyzer.github.io/thisweek/2019/12/04/changelog-1.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2019/12/04/changelog-1.html">https://rust-analyzer.github.io/thisweek/2019/12/04/changelog-1.html</a>. For some reason, the format is eerie similar to <a href="https://intellij-rust.github.io/thisweek/" target="_blank" title="https://intellij-rust.github.io/thisweek/">this week in IntelliJ Rust</a>. I will make it a point to publish an update there each Monday before the sync-up (which should save everyone's time, as I routinely take like 15 minutes to just type this stuff). </p>
<p>With this in mind, I suggest re purposing this slot for a more free-form discussion of latest things. <span class="user-mention" data-user-id="116009">@nikomatsakis</span> how would you feel about this? </p>
<p>In particular, the highlight of this week is the introduction of a separate<code>hir_ty</code> crate, which deals with all type-related things. It should make it easier to move more of the types to <code>chalk</code>.</p>



<a name="182560668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182560668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182560668">(Dec 04 2019 at 14:37)</a>:</h4>
<p>reddit: <a href="https://www.reddit.com/r/rust/comments/e603vf/rustanalyzer_changelog_1/" target="_blank" title="https://www.reddit.com/r/rust/comments/e603vf/rustanalyzer_changelog_1/">https://www.reddit.com/r/rust/comments/e603vf/rustanalyzer_changelog_1/</a></p>



<a name="182665118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182665118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182665118">(Dec 05 2019 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> I rest my case that this at least generates nice amounts of PR :)</p>



<a name="182803446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182803446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182803446">(Dec 06 2019 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> repurposing for freeform discussion seems good to me</p>



<a name="182962979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182962979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182962979">(Dec 09 2019 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="182963032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963032">(Dec 09 2019 at 15:01)</a>:</h4>
<p>hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> !</p>



<a name="182963042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963042" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963042">(Dec 09 2019 at 15:01)</a>:</h4>
<p>this week changes are here: <a href="https://github.com/rust-analyzer/rust-analyzer.github.io/blob/3779a91eff76547ac1f347e8ac7e2ee933343ff7/thisweek/_posts/2019-12-09-changelog-2.md" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer.github.io/blob/3779a91eff76547ac1f347e8ac7e2ee933343ff7/thisweek/_posts/2019-12-09-changelog-2.md">https://github.com/rust-analyzer/rust-analyzer.github.io/blob/3779a91eff76547ac1f347e8ac7e2ee933343ff7/thisweek/_posts/2019-12-09-changelog-2.md</a></p>



<a name="182963145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963145">(Dec 09 2019 at 15:02)</a>:</h4>
<p>(will be on the website once the build is finished -- forgot to push the changes, and forgot to check that I am looking at the deopolied site and not 127.0.0.1 one when checking)</p>



<a name="182963206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963206" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963206">(Dec 09 2019 at 15:03)</a>:</h4>
<p>So you were talking about repurposing the slot for "freeform design discussion"</p>



<a name="182963234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963234" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963234">(Dec 09 2019 at 15:03)</a>:</h4>
<p>I was noticing that we have this upcoming meeting on Friday to discuss IDE/library-ification</p>



<a name="182963255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963255">(Dec 09 2019 at 15:03)</a>:</h4>
<p>And I was thinking I should touch base with you, <span class="user-mention" data-user-id="116083">@pnkfelix</span> and <span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> to try and figure out what we plan to <em>say</em> exactly</p>



<a name="182963257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963257">(Dec 09 2019 at 15:03)</a>:</h4>
<p>The highlights are:</p>
<ul>
<li>support of build-in derive macros, in a semi-proper way (as actual macros which expand to source code, and not just fake impls)</li>
<li>some refactorings around mapping sources and hir with each other</li>
</ul>



<a name="182963394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963394" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963394">(Dec 09 2019 at 15:05)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> right. I think we want to "pitch" the plan with integrating rust-analyzer with save-analysis, and continuing library-ification (as opposed to slowly boiling rustc itself)</p>



<a name="182963422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963422" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963422">(Dec 09 2019 at 15:05)</a>:</h4>
<p>Yeah. I'm wondering if you've done any more investigation into your idea of command-line tools</p>



<a name="182963449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963449">(Dec 09 2019 at 15:05)</a>:</h4>
<p>your blog post is of course part of the story here</p>



<a name="182963460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963460" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963460">(Dec 09 2019 at 15:05)</a>:</h4>
<p>We had a link to a "master" hackmd that linked to other notes and things</p>



<a name="182963464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963464">(Dec 09 2019 at 15:05)</a>:</h4>
<p>Do you happen to have it off hand?</p>



<a name="182963469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963469">(Dec 09 2019 at 15:06)</a>:</h4>
<p>Also go-to def works within println! etc now, which I'm pretty happy about :)</p>



<a name="182963526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963526" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963526">(Dec 09 2019 at 15:06)</a>:</h4>
<p>not much: the only thing I did was to briefly check why loading save-analysis from disk is slow.</p>



<a name="182963579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963579">(Dec 09 2019 at 15:07)</a>:</h4>
<p>And looks like the main reason is that JSON we currently use is just <strong>super</strong> verbose. zipping save-analysis gives 97% compression (the zip is 3% of original)</p>



<a name="182963639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963639">(Dec 09 2019 at 15:07)</a>:</h4>
<p><a href="https://hackmd.io/9qrJYdSLTK2MWG4-pbmpWw" target="_blank" title="https://hackmd.io/9qrJYdSLTK2MWG4-pbmpWw">This is "master" hackmd I was talking about</a></p>



<a name="182963643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963643">(Dec 09 2019 at 15:07)</a>:</h4>
<p>don't have link to master hack md :(</p>



<a name="182963707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963707">(Dec 09 2019 at 15:08)</a>:</h4>
<blockquote>
<p>And looks like the main reason is that JSON we currently use is just <strong>super</strong> verbose. zipping save-analysis gives 97% compression (the zip is 3% of original)</p>
</blockquote>
<p>fascinating</p>



<a name="182963765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963765">(Dec 09 2019 at 15:08)</a>:</h4>
<p>can we zip/unzip in process :)</p>



<a name="182963773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963773">(Dec 09 2019 at 15:08)</a>:</h4>
<p>not sure if that would actually help</p>



<a name="182963788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963788">(Dec 09 2019 at 15:08)</a>:</h4>
<p>presumably not</p>



<a name="182963852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963852" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963852">(Dec 09 2019 at 15:09)</a>:</h4>
<p>I'd rather we not encode each span as <code>{ "start_column": 0, "end_column": 1, "start_line": 0, "end_line": 1}</code></p>



<a name="182963903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963903" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963903">(Dec 09 2019 at 15:09)</a>:</h4>
<p>heh you think we could use a few fewer characters? :)</p>



<a name="182963967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963967">(Dec 09 2019 at 15:10)</a>:</h4>
<p>still it seems to me like the real question is</p>



<a name="182963985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963985" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963985">(Dec 09 2019 at 15:10)</a>:</h4>
<p>can we move save-analysis to something more universal</p>



<a name="182963996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182963996" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182963996">(Dec 09 2019 at 15:10)</a>:</h4>
<p>e.g., that LSP-based proposal</p>



<a name="182964003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182964003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182964003">(Dec 09 2019 at 15:10)</a>:</h4>
<p>I have no idea how they compare</p>



<a name="182964047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182964047" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182964047">(Dec 09 2019 at 15:10)</a>:</h4>
<p>anywaY I'm going to make a new hackmd, maybe we can briefly draft an agenda for discussion and key bullet points</p>



<a name="182964048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182964048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182964048">(Dec 09 2019 at 15:10)</a>:</h4>
<p>I think we can, and we should, long-term</p>



<a name="182964113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182964113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182964113">(Dec 09 2019 at 15:11)</a>:</h4>
<p><a href="https://hackmd.io/w8OIoc7iQsuTrBlRV1xKMQ" target="_blank" title="https://hackmd.io/w8OIoc7iQsuTrBlRV1xKMQ">hackmd</a></p>



<a name="182965969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182965969" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182965969">(Dec 09 2019 at 15:29)</a>:</h4>
<p>It's tricky how we want to adopt rust-analyzer as the "official" IDE (which requires some stability), while at the same time library-ifying some parts (which is as of yet easier because rust-analyzer is still experimental and can change easier)</p>



<a name="182966191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966191">(Dec 09 2019 at 15:31)</a>:</h4>
<p>Yes, there is some tension there,</p>



<a name="182966194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966194">(Dec 09 2019 at 15:31)</a>:</h4>
<p>and I think one question might be</p>



<a name="182966215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966215">(Dec 09 2019 at 15:31)</a>:</h4>
<p>how far can we get before doing so?</p>



<a name="182966371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966371">(Dec 09 2019 at 15:32)</a>:</h4>
<p>that is, how much can/must we "library-ify"?</p>



<a name="182966501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966501" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966501">(Dec 09 2019 at 15:32)</a>:</h4>
<p>at the same time, I don't know, I'm not <em>that</em> worried about it</p>



<a name="182966590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966590">(Dec 09 2019 at 15:32)</a>:</h4>
<p>I guess in part because I think rust-analyzer delivers a lot of value "as is"</p>



<a name="182966667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966667">(Dec 09 2019 at 15:32)</a>:</h4>
<p>and we can "gate" access to some parts of it conceivably</p>



<a name="182966687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966687">(Dec 09 2019 at 15:32)</a>:</h4>
<p>e.g., that is one reason to use save-analysis to start</p>



<a name="182966697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966697">(Dec 09 2019 at 15:32)</a>:</h4>
<p>still, I think we should identify this as a tension and thing to discuss maybe?</p>



<a name="182966708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966708" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966708">(Dec 09 2019 at 15:33)</a>:</h4>
<p>I'm debating the best use of the "agenda"</p>



<a name="182966743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182966743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182966743">(Dec 09 2019 at 15:33)</a>:</h4>
<p>Yeah, using gates can be a tool to get the best of both worlds</p>



<a name="182967042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967042" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967042">(Dec 09 2019 at 15:35)</a>:</h4>
<p>btw, I'm not 100% sure what falls under save analysis</p>



<a name="182967206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967206" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967206">(Dec 09 2019 at 15:37)</a>:</h4>
<p>OK, this was pretty producitve <span class="user-mention" data-user-id="133169">@matklad</span> -- I'm going to have to run, I have some errands to do locally</p>



<a name="182967316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967316">(Dec 09 2019 at 15:38)</a>:</h4>
<p>bye <span class="user-mention" data-user-id="116009">@nikomatsakis</span> ! I too feel this was productive!</p>



<a name="182967333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967333">(Dec 09 2019 at 15:38)</a>:</h4>
<p>we can try to clarify the doc and/or pick a final discussion agenda at the end?</p>



<a name="182967351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967351" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967351">(Dec 09 2019 at 15:38)</a>:</h4>
<p>I think we should advertise this doc in a broader topic on <a class="stream" data-stream-id="131828" href="/#narrow/stream/131828-t-compiler">#t-compiler</a> and solicit people to add questions and things to the end</p>



<a name="182967354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967354">(Dec 09 2019 at 15:38)</a>:</h4>
<p>and/or ask for "points of information" over the week</p>



<a name="182967373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967373" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967373">(Dec 09 2019 at 15:38)</a>:</h4>
<p>sorry, those msgs sent a bit out of order</p>



<a name="182967376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967376">(Dec 09 2019 at 15:38)</a>:</h4>
<p>but maybe you get the idea :)</p>



<a name="182967384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967384">(Dec 09 2019 at 15:38)</a>:</h4>
<p>yeah</p>



<a name="182967428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967428">(Dec 09 2019 at 15:39)</a>:</h4>
<p>I'll do the advertising</p>



<a name="182967664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182967664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182967664">(Dec 09 2019 at 15:41)</a>:</h4>
<p>OK -- I had this draft I was about to post, but I'll happily let you do it:</p>
<blockquote>
<p>HiT-compiler/meeting -- a few of us from <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> took a stab at creating <a href="https://hackmd.io/w8OIoc7iQsuTrBlRV1xKMQ?edit" target="_blank" title="https://hackmd.io/w8OIoc7iQsuTrBlRV1xKMQ?edit">a hackmd</a> for the upcoming design meeting this Friday. The topic is our plans regarding rust-analyzer, the "official" choice of IDE, and rustc. The document summarizes our current thinking and also includes a section at the end for the discussion agenda. My hope is that people can review the doc now, before-hand. You can ask questions here if there are things that are unclear or could be calrified, and perhaps leave ideas for broader discussion topics in the document. Then we can prune the agenda on Thu or so before the actual meeting.</p>
</blockquote>



<a name="182968003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182968003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182968003">(Dec 09 2019 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> gosh, how could I have missed goto-def in println? Pushed a new commit to the changelog</p>



<a name="182968799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182968799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182968799">(Dec 09 2019 at 15:51)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> maybe remove the <code>?edit</code> from the url?</p>



<a name="182969009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182969009" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182969009">(Dec 09 2019 at 15:52)</a>:</h4>
<p>I see ?edit as a bit of social engineering, actually encouriging folks to leave suggestions :)</p>



<a name="182972238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/182972238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#182972238">(Dec 09 2019 at 16:21)</a>:</h4>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/2492" target="_blank" title="https://github.com/rust-lang/rust/issues/2492">#2492</a> 2492, <a href="https://github.com/rust-lang/rust/issues/2494" target="_blank" title="https://github.com/rust-lang/rust/issues/2494">#2494</a> goto definition and syntax highlighting work properly for type parameters</p>
</blockquote>
<p>Typo, double 2492?</p>



<a name="183556550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183556550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183556550">(Dec 16 2019 at 15:02)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> This week's changelog is up: <a href="https://rust-analyzer.github.io/thisweek/2019/12/16/changelog-3.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2019/12/16/changelog-3.html">https://rust-analyzer.github.io/thisweek/2019/12/16/changelog-3.html</a></p>



<a name="183556643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183556643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183556643">(Dec 16 2019 at 15:03)</a>:</h4>
<p>I don't have anything specific to discuss I think, and I am moving between laptops, so I suggest to keep this week more async :)</p>



<a name="183556824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183556824" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183556824">(Dec 16 2019 at 15:04)</a>:</h4>
<p>One of the things on my mind is what follow-up we need from last week's meeting, <span class="user-mention" data-user-id="133169">@matklad</span></p>



<a name="183556873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183556873" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183556873">(Dec 16 2019 at 15:05)</a>:</h4>
<p>(By this I mean Friday)</p>



<a name="183557062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557062">(Dec 16 2019 at 15:06)</a>:</h4>
<p>Yeah, it's true that we need some follow up. Actually, I think there are two followup:</p>
<ul>
<li>there were a bunch of questions about parsing specifically, it's on me to organize technical discussion here</li>
<li>we maybe need a better way to build a consensus around the general plan</li>
</ul>



<a name="183557080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557080">(Dec 16 2019 at 15:06)</a>:</h4>
<p>the second one is more important, but much less clear</p>



<a name="183557124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557124">(Dec 16 2019 at 15:07)</a>:</h4>
<p>Yes.</p>



<a name="183557132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557132">(Dec 16 2019 at 15:07)</a>:</h4>
<p>I think you can generalize the first bullet a bit</p>



<a name="183557159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557159">(Dec 16 2019 at 15:07)</a>:</h4>
<p>basically I think we should be laying out clearer plans around specific library-ification efforts</p>



<a name="183557160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557160" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557160">(Dec 16 2019 at 15:07)</a>:</h4>
<p>I <em>feel</em> there are might be two possible answers:</p>
<ul>
<li>RFC</li>
<li>thread on internals</li>
</ul>
<p>Maybe pre-RFC thread on internals?</p>



<a name="183557182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557182">(Dec 16 2019 at 15:07)</a>:</h4>
<p>For the second point, you mean?</p>



<a name="183557199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557199" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557199">(Dec 16 2019 at 15:08)</a>:</h4>
<p>yeah</p>



<a name="183557283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557283">(Dec 16 2019 at 15:08)</a>:</h4>
<p>first one doesn't make tooo much sense unless we have consensus on the general direction</p>



<a name="183557288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557288">(Dec 16 2019 at 15:08)</a>:</h4>
<p>I don't think RFC is right</p>



<a name="183557296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557296">(Dec 16 2019 at 15:08)</a>:</h4>
<p>Yes</p>



<a name="183557315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557315">(Dec 16 2019 at 15:08)</a>:</h4>
<p>I thikn there's probably room to discuss specifically with <span class="user-mention" data-user-id="119009">@eddyb</span> as well</p>



<a name="183557331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557331">(Dec 16 2019 at 15:08)</a>:</h4>
<p>I guess I'm not <em>exactly</em> sure which parts of the plan are controversial</p>



<a name="183557434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557434">(Dec 16 2019 at 15:10)</a>:</h4>
<p>at the highest level I think the plan was</p>
<ul>
<li>bring parts of RLS into rust-analyzer and start to recommend that</li>
<li>use library-ification both to reduce code duplication and to get the "full" versions of various analyses</li>
</ul>



<a name="183557491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557491">(Dec 16 2019 at 15:10)</a>:</h4>
<p>it seemed like a lot of the discussion was more about how to achieve the first bullet</p>



<a name="183557508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557508" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557508">(Dec 16 2019 at 15:10)</a>:</h4>
<p>but maybe I'm not correct there, I'm not entirely sure</p>



<a name="183557511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557511">(Dec 16 2019 at 15:10)</a>:</h4>
<p>uhu</p>



<a name="183557589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557589" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557589">(Dec 16 2019 at 15:11)</a>:</h4>
<p>I <em>think</em> <span class="user-mention silent" data-user-id="119009">eddyb</span> was uncomfortable with not removing save-analysis completely</p>



<a name="183557694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557694">(Dec 16 2019 at 15:12)</a>:</h4>
<blockquote>
<p>I thikn there's probably room to discuss specifically with @eddyb as well</p>
</blockquote>
<p>Should we setup a video maybe?</p>



<a name="183557729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557729">(Dec 16 2019 at 15:12)</a>:</h4>
<p>I think that might make sense, yes</p>



<a name="183557742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557742">(Dec 16 2019 at 15:12)</a>:</h4>
<p>I would probably start there</p>



<a name="183557774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557774">(Dec 16 2019 at 15:13)</a>:</h4>
<blockquote>
<p>I <em>think</em> <span class="user-mention silent" data-user-id="119009">eddyb</span> was uncomfortable with not removing save-analysis completely</p>
</blockquote>
<p>yes, I think this may be true</p>



<a name="183557941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557941" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557941">(Dec 16 2019 at 15:14)</a>:</h4>
<p>I'm pondering this</p>



<a name="183557968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183557968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183557968">(Dec 16 2019 at 15:15)</a>:</h4>
<p>I guess I feel like the goal of using save-analysis was primarily that it exists and it lets us minimize the time until useful features</p>



<a name="183558003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558003">(Dec 16 2019 at 15:15)</a>:</h4>
<p>and then turn the focus more to library-ification and "cleaning up" the "native" approach</p>



<a name="183558012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558012">(Dec 16 2019 at 15:15)</a>:</h4>
<p>I think the latter is what <span class="user-mention silent" data-user-id="119009">eddyb</span> really wants</p>



<a name="183558028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558028" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558028">(Dec 16 2019 at 15:15)</a>:</h4>
<p>(and I agree)</p>



<a name="183558354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558354">(Dec 16 2019 at 15:19)</a>:</h4>
<p>In other words, it seems like we share a goal, and we're arguing about the steps towards it</p>



<a name="183558364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558364">(Dec 16 2019 at 15:19)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> there's also one more aspect of sava-analysis which is bad long-term, but which we find very useful right now. It is data that can be used outside of rustc process</p>



<a name="183558410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558410">(Dec 16 2019 at 15:19)</a>:</h4>
<p>This is good <strong>right now</strong>, because it allows us to have some of the correctness of RLS without build complexities of RLS</p>



<a name="183558485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558485">(Dec 16 2019 at 15:20)</a>:</h4>
<p>but it is wrong long-term, as it moves us further away from in-process lazy-analysis</p>



<a name="183558510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558510">(Dec 16 2019 at 15:20)</a>:</h4>
<p>Still, even sharing a goal, there's room for dispute, which comes back to the basic question -- we're kind of taking the "long path" towards a unified world, to some extent, and maybe <span class="user-mention silent" data-user-id="119009">eddyb</span> prefers to take the most direction path</p>



<a name="183558529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558529">(Dec 16 2019 at 15:20)</a>:</h4>
<p>Well, it looks like it moves us away, but I want to argue that it is exactly the quick and dirty hack we can use while we are building proper solution properly</p>



<a name="183558660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558660">(Dec 16 2019 at 15:22)</a>:</h4>
<p>Yes.</p>



<a name="183558681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183558681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183558681">(Dec 16 2019 at 15:22)</a>:</h4>
<p>OK, so, let's try to talk to eddyb -- maybe we can arrange a time this week</p>



<a name="183562090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183562090" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183562090">(Dec 16 2019 at 15:55)</a>:</h4>
<blockquote>
<p>but it is wrong long-term, as it moves us further away from in-process lazy-analysis</p>
</blockquote>
<p>is there actually consensus on this? With librarification, the end state would never be that 'RLS2' calls in-process queries from rustc, would it? At least my understanding is that the idea there is that code-sharing between the compiler would be achieved by sharing libraries, not the whole compiler. So I don't know if this is really just a disagreement about how to get to the end state</p>



<a name="183567110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/183567110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#183567110">(Dec 16 2019 at 16:45)</a>:</h4>
<blockquote>
<p>With librarification, the end state would never be that 'RLS2' calls in-process queries from rustc, would it?</p>
</blockquote>
<p>In my mind, in the end state RLS2 and rustc are indistinguishable. In particular, they do use the same query infrastructure (but maybe in a slightly different ways)</p>



<a name="184109848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109848">(Dec 23 2019 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> , <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's that time again!</p>



<a name="184109860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109860" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109860">(Dec 23 2019 at 15:01)</a>:</h4>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2019/12/23/changelog-4.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2019/12/23/changelog-4.html">https://rust-analyzer.github.io/thisweek/2019/12/23/changelog-4.html</a></p>



<a name="184109866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109866">(Dec 23 2019 at 15:01)</a>:</h4>
<p>(quite a bunch of changes there)</p>



<a name="184109880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109880" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109880">(Dec 23 2019 at 15:01)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="184109892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109892">(Dec 23 2019 at 15:01)</a>:</h4>
<p>I'm skimming the change-log</p>



<a name="184109901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109901" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109901">(Dec 23 2019 at 15:02)</a>:</h4>
<p>My main update is that I've been working on drafting the "what does a type library look like" docs</p>



<a name="184109946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109946">(Dec 23 2019 at 15:02)</a>:</h4>
<p>As well as various chalk updates</p>



<a name="184109967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184109967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184109967">(Dec 23 2019 at 15:02)</a>:</h4>
<p>I see that <span class="user-mention" data-user-id="129457">@Florian Diebold</span> already rebased over some of the various tweaks to chalk-ir, I expect more to come</p>



<a name="184110006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110006">(Dec 23 2019 at 15:03)</a>:</h4>
<p>Yeah, we've updated to chalk master yesterday</p>



<a name="184110022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110022">(Dec 23 2019 at 15:03)</a>:</h4>
<p>I think the hihglight of this week is super-preliminary support for items, nested in functions</p>



<a name="184110025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110025">(Dec 23 2019 at 15:03)</a>:</h4>
<p>I'm trying to figure out the best way to "get ahead" of these changes and to structure such a document; my ambition is of course that we also use this as the basis for a "portable" type-checking library</p>



<a name="184110035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110035">(Dec 23 2019 at 15:03)</a>:</h4>
<p>Ie, we actually create hir for such items, and do a suuuuper crude name resolution for them.</p>



<a name="184110087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110087">(Dec 23 2019 at 15:04)</a>:</h4>
<p>One thing that might be good for us to talk briefly about are the next steps after last week's meeting and the subsequent discussion</p>



<a name="184110099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110099" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110099">(Dec 23 2019 at 15:04)</a>:</h4>
<p>+1</p>



<a name="184110120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110120">(Dec 23 2019 at 15:05)</a>:</h4>
<p>Also, I'd love to check in with <span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> about rls-save-analysis crate refactorings. Did you get a chance to do the cleanups you wanted?</p>



<a name="184110145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110145">(Dec 23 2019 at 15:05)</a>:</h4>
<p>Yeah, I was wondering about that -- I think maybe the two of <em>us</em> aren't quite the right audience for the 'next steps' discussion, seems like we probably want at least <span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> and maybe a bit more</p>



<a name="184110147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110147" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110147">(Dec 23 2019 at 15:05)</a>:</h4>
<blockquote>
<p>One thing that might be good for us to talk briefly about are the next steps</p>
</blockquote>
<p>Is it correct to assume that t-compiler has a rough agreement on the overall plan?</p>



<a name="184110204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110204" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110204">(Dec 23 2019 at 15:06)</a>:</h4>
<p>I don't entirely know but I think so</p>



<a name="184110220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110220">(Dec 23 2019 at 15:06)</a>:</h4>
<p>no one explicitelly disagreed, and <span class="user-mention silent" data-user-id="119031">Esteban Küber</span> explictelly agreed, modulo diagnostics, so I'd lean towards yes</p>



<a name="184110222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110222" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110222">(Dec 23 2019 at 15:06)</a>:</h4>
<p>By "the overall plan" I think you're referring to <a class="stream-topic" data-stream-id="131828" href="/#narrow/stream/131828-t-compiler/topic/design.20meeting.202019-12-13.20follow-up">#t-compiler &gt; design meeting 2019-12-13 follow-up</a></p>



<a name="184110232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110232">(Dec 23 2019 at 15:06)</a>:</h4>
<p>yup</p>



<a name="184110233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110233">(Dec 23 2019 at 15:06)</a>:</h4>
<p>Yeah</p>



<a name="184110247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110247" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110247">(Dec 23 2019 at 15:06)</a>:</h4>
<p>One of the questions I'm pondering is what to do with that plan</p>



<a name="184110264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110264">(Dec 23 2019 at 15:06)</a>:</h4>
<p>I feel like it's even a bit bigger than t-compiler, it feels like something that should be at least "raised" with core team and reflected on the roadmap, for example, but I'm kind of trying to do that</p>



<a name="184110283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110283">(Dec 23 2019 at 15:07)</a>:</h4>
<p>Agree</p>



<a name="184110284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110284" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110284">(Dec 23 2019 at 15:07)</a>:</h4>
<p>Anyway let's assume there is general agreement</p>



<a name="184110289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110289" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110289">(Dec 23 2019 at 15:07)</a>:</h4>
<p>For the time being</p>



<a name="184110294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110294" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110294">(Dec 23 2019 at 15:07)</a>:</h4>
<p>I still think that maybe this is [pre-]RFC worthy</p>



<a name="184110300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110300">(Dec 23 2019 at 15:07)</a>:</h4>
<p>I actually agree with that</p>



<a name="184110301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110301">(Dec 23 2019 at 15:07)</a>:</h4>
<p>and was debating about drafting one</p>



<a name="184110364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110364">(Dec 23 2019 at 15:08)</a>:</h4>
<p>Though one of the questions is just what it should cover</p>



<a name="184110397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110397" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110397">(Dec 23 2019 at 15:08)</a>:</h4>
<p>In particular I'm not sure how deep to go on the technical details --</p>



<a name="184110415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110415">(Dec 23 2019 at 15:09)</a>:</h4>
<p>Anyway the main unresolved <em>technical</em> question, I think, is how to actually manage the "transition" to rust-analyzer</p>



<a name="184110419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110419">(Dec 23 2019 at 15:09)</a>:</h4>
<p>I think we should cover architecture in broad strokes, but explicitelly avoid digging into technical details</p>



<a name="184110426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110426">(Dec 23 2019 at 15:09)</a>:</h4>
<p>I think there are some "branding" questions -- e.g., is this "RLS 2.0" etc?</p>



<a name="184110430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110430">(Dec 23 2019 at 15:09)</a>:</h4>
<p>That is something I expect the core team may have opinions and insight into</p>



<a name="184110436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110436" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110436">(Dec 23 2019 at 15:09)</a>:</h4>
<p>(And/or other folks)</p>



<a name="184110438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110438">(Dec 23 2019 at 15:09)</a>:</h4>
<blockquote>
<p>I think we should cover architecture in broad strokes, but explicitelly avoid digging into technical details</p>
</blockquote>
<p>I lean this way as well</p>



<a name="184110451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110451">(Dec 23 2019 at 15:09)</a>:</h4>
<p>maybe we should create a hackmd to start drafting? and/or a repo</p>



<a name="184110511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110511">(Dec 23 2019 at 15:10)</a>:</h4>
<p>Though, we <em>should</em> solve the immediate technical question of save-analysis libary vs rls process, and preferably sooner rather than later</p>



<a name="184110517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110517" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110517">(Dec 23 2019 at 15:10)</a>:</h4>
<p>Agreed as well :)</p>



<a name="184110531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110531" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110531">(Dec 23 2019 at 15:10)</a>:</h4>
<p>We did the starting point of <a href="https://hackmd.io/sMospvYyTtisAnLMdlrUgQ" target="_blank" title="https://hackmd.io/sMospvYyTtisAnLMdlrUgQ">enumerating some of the design space</a></p>



<a name="184110532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110532" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110532">(Dec 23 2019 at 15:10)</a>:</h4>
<blockquote>
<p>maybe we should create a hackmd to start drafting? and/or a repo</p>
</blockquote>
<p>Yes! I think hackmd might be easier?</p>



<a name="184110540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110540">(Dec 23 2019 at 15:10)</a>:</h4>
<p>BTW</p>



<a name="184110545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110545" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110545">(Dec 23 2019 at 15:10)</a>:</h4>
<p>we should link all these things into that "master" hackmd</p>



<a name="184110549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110549">(Dec 23 2019 at 15:10)</a>:</h4>
<p>/me goes to look for it</p>



<a name="184110559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110559">(Dec 23 2019 at 15:11)</a>:</h4>
<p>(we could also use hackmd's tagging metadata feature...)</p>



<a name="184110572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110572">(Dec 23 2019 at 15:11)</a>:</h4>
<p>and we should link the "master" hackmd from somewhere, because I, offhand, don't know how to find it :)</p>



<a name="184110575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110575">(Dec 23 2019 at 15:11)</a>:</h4>
<blockquote>
<p>We did the starting point of <a href="https://hackmd.io/sMospvYyTtisAnLMdlrUgQ" target="_blank" title="https://hackmd.io/sMospvYyTtisAnLMdlrUgQ">enumerating some of the design space</a></p>
</blockquote>
<p>I feel like this is where <span class="user-mention" data-user-id="153740">@Igor Matuszewski</span>'s take would be useful</p>



<a name="184110577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110577">(Dec 23 2019 at 15:11)</a>:</h4>
<p>I guess I'll just bookmark</p>



<a name="184110589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110589" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110589">(Dec 23 2019 at 15:11)</a>:</h4>
<p>hold on, i'm finding and linking things together :)</p>



<a name="184110653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110653">(Dec 23 2019 at 15:12)</a>:</h4>
<p>I think another key point re: the technical design is the question of whether rust-analyzer will be distributed via rustup etc</p>



<a name="184110662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110662" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110662">(Dec 23 2019 at 15:12)</a>:</h4>
<p>yep</p>



<a name="184110663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110663">(Dec 23 2019 at 15:12)</a>:</h4>
<p>in particular, if it's going to be "implicitly" tied to rustc via save-analysis ...</p>



<a name="184110667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110667">(Dec 23 2019 at 15:12)</a>:</h4>
<p>but I think in general we should consider "rustup distribution" a feature</p>



<a name="184110671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110671">(Dec 23 2019 at 15:13)</a>:</h4>
<p>i.e., that is a feature of RLS, and we want to maintain parity with it, if the goal is to minimally disrupt user experience</p>



<a name="184110680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110680">(Dec 23 2019 at 15:13)</a>:</h4>
<p>I plan to try publish some binary releases directlyt o GitHub, jut to experiment</p>



<a name="184110690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110690">(Dec 23 2019 at 15:13)</a>:</h4>
<p><em>ideally</em> people would just do <code>rustup udpate</code> and get rust-analyzer</p>



<a name="184110695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110695">(Dec 23 2019 at 15:13)</a>:</h4>
<p>without knowing the difference</p>



<a name="184110696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110696" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110696">(Dec 23 2019 at 15:13)</a>:</h4>
<p>right?</p>



<a name="184110698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110698" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110698">(Dec 23 2019 at 15:13)</a>:</h4>
<p>THe interesting bit is that rust-analyzer doesn't <em>have</em> to be distributed via rustup, as we don't need nightly</p>



<a name="184110702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110702">(Dec 23 2019 at 15:13)</a>:</h4>
<p>well</p>



<a name="184110709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110709">(Dec 23 2019 at 15:13)</a>:</h4>
<blockquote>
<p>right?</p>
</blockquote>
<p>I am not sure actually</p>



<a name="184110715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110715">(Dec 23 2019 at 15:13)</a>:</h4>
<p>I feel like that is less true if it is consuming save-analysis data directly</p>



<a name="184110761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110761" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110761">(Dec 23 2019 at 15:14)</a>:</h4>
<p>it may not need <em>nightly</em>, but it will break if it is not using the version of rustc it expets</p>



<a name="184110768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110768" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110768">(Dec 23 2019 at 15:14)</a>:</h4>
<p>Like, the ideal workflow for VS Code is to install extension via a marketplace, and let the extension download stuff</p>



<a name="184110775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110775" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110775">(Dec 23 2019 at 15:14)</a>:</h4>
<p>well I guess I don't know how the RLS upgrades itself now etc</p>



<a name="184110800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110800" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110800">(Dec 23 2019 at 15:14)</a>:</h4>
<p>That is, what matter for user experience is not the server binary, but the editor plugin, and we can't distribute that via rustup</p>



<a name="184110819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110819">(Dec 23 2019 at 15:15)</a>:</h4>
<p>PS link to the <a href="https://hackmd.io/9qrJYdSLTK2MWG4-pbmpWw" target="_blank" title="https://hackmd.io/9qrJYdSLTK2MWG4-pbmpWw">master hackmd document</a></p>



<a name="184110926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110926" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110926">(Dec 23 2019 at 15:16)</a>:</h4>
<p>I think that we should try weekly releases outside of rustup first, and, if that's not convenient/breaks in practice, switch to rustup</p>



<a name="184110936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110936">(Dec 23 2019 at 15:16)</a>:</h4>
<p>would we expect people to manually upgrade?</p>



<a name="184110948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110948">(Dec 23 2019 at 15:16)</a>:</h4>
<p>anyway this seems like another detail to resolve for sure</p>



<a name="184110950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110950" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110950">(Dec 23 2019 at 15:16)</a>:</h4>
<p>We expect the extension to automatically upgrade</p>



<a name="184110962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110962" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110962">(Dec 23 2019 at 15:17)</a>:</h4>
<p>editor extension that is</p>



<a name="184110968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184110968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184110968">(Dec 23 2019 at 15:17)</a>:</h4>
<p>maybe we can start to update that "master" document with the broad outlines  of the plan and the "things to resolve"</p>



<a name="184111006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111006">(Dec 23 2019 at 15:17)</a>:</h4>
<p>/me tries to do that</p>



<a name="184111069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111069">(Dec 23 2019 at 15:18)</a>:</h4>
<p>or maybe that's "unresolved questions" section of the RFC draft? Maybe too technical for it though</p>



<a name="184111159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111159">(Dec 23 2019 at 15:19)</a>:</h4>
<p>I do think this point is potentially germane to the RFC</p>



<a name="184111173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111173">(Dec 23 2019 at 15:20)</a>:</h4>
<p>I think the RFC should be about what "end users of Rust have to know"</p>



<a name="184111273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111273" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Darin Morrison <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111273">(Dec 23 2019 at 15:21)</a>:</h4>
<p>you could have the editor extension notify the user when the server needs an upgrade</p>



<a name="184111336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111336">(Dec 23 2019 at 15:22)</a>:</h4>
<p>Personally I think this should be as "minimally disruptive" for folks as possible</p>



<a name="184111345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111345" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111345">(Dec 23 2019 at 15:22)</a>:</h4>
<p>But I don't exactly know what that means</p>



<a name="184111456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111456" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111456">(Dec 23 2019 at 15:24)</a>:</h4>
<p>I'm trying to think about the best way to start broadening up the conversation on these points, and include the right folks</p>



<a name="184111461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111461">(Dec 23 2019 at 15:24)</a>:</h4>
<p>internals thread is an option</p>



<a name="184111472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111472">(Dec 23 2019 at 15:24)</a>:</h4>
<p>I'm not 100% sure who the "right folks" are</p>



<a name="184111518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Darin Morrison <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111518">(Dec 23 2019 at 15:25)</a>:</h4>
<p>Yeah you don't want to spam them but you could, on first install, ask if they want updates. I've seen other extensions do that.</p>



<a name="184111571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111571">(Dec 23 2019 at 15:26)</a>:</h4>
<p>Pre-rfc thread seems good. I think the set of "right folks" is open hear: we've already did the technical discussion with t-compiler</p>



<a name="184111619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111619" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111619">(Dec 23 2019 at 15:26)</a>:</h4>
<p>BTW, created a <a href="https://hackmd.io/NKMNjAYoRE6AP_XRot3z0w" target="_blank" title="https://hackmd.io/NKMNjAYoRE6AP_XRot3z0w">hackmd</a> for the RFC drafting</p>



<a name="184111620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111620" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111620">(Dec 23 2019 at 15:26)</a>:</h4>
<p>well, we might want to have a round of conversation with core as well, but, after that, internals seems like the right audience</p>



<a name="184111626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111626" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111626">(Dec 23 2019 at 15:26)</a>:</h4>
<p>yeah that sounds correct, but I think we should do some "pre-gaming" to select the questions where we most want feedback</p>



<a name="184111643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111643">(Dec 23 2019 at 15:27)</a>:</h4>
<p>Hm, yeah, now that I think of it, it might be a good idea to talk to core before pre-RFC</p>



<a name="184111648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111648">(Dec 23 2019 at 15:27)</a>:</h4>
<p>I can certainly send a quick e-mail</p>



<a name="184111659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111659" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111659">(Dec 23 2019 at 15:27)</a>:</h4>
<p>Given that it's the holidays I wouldn't expect a lot of responses</p>



<a name="184111717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111717" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111717">(Dec 23 2019 at 15:28)</a>:</h4>
<p>Do we want to expedite something before the holidays end though?</p>



<a name="184111722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111722">(Dec 23 2019 at 15:28)</a>:</h4>
<p>That said I think an internals thread is also an ok next step -- but prior to that it probably makes sense to have a bit more of a "RFC draft" to point people at -- not finishing, and we should draft the internals message itself</p>



<a name="184111728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111728" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111728">(Dec 23 2019 at 15:28)</a>:</h4>
<p>I don't think there's a reason to stress</p>



<a name="184111742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111742">(Dec 23 2019 at 15:28)</a>:</h4>
<p>For full context, I'm also putting in some effort onto the roadmap discussion, and I think it's ok to discuss this a bit in that light</p>



<a name="184111755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111755">(Dec 23 2019 at 15:28)</a>:</h4>
<p>I have already raised it a number of times there</p>



<a name="184111757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111757">(Dec 23 2019 at 15:28)</a>:</h4>
<p>Oh, right, this is very roadmap related</p>



<a name="184111769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111769">(Dec 23 2019 at 15:29)</a>:</h4>
<p>/me realizes that its that time of the year again</p>



<a name="184111856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111856" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111856">(Dec 23 2019 at 15:30)</a>:</h4>
<p>I'm debating the right way to describe this plan for RFC summary, seems like a very good exercise</p>



<a name="184111882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111882">(Dec 23 2019 at 15:30)</a>:</h4>
<p>So, what  about this plan:</p>
<ul>
<li>you write a quick email to core, just to check that nobody thinks this all is an insane idea to discuss</li>
<li>we write a draft RFC</li>
<li>we open an internals thread with a draft RFC linked</li>
</ul>



<a name="184111909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111909">(Dec 23 2019 at 15:31)</a>:</h4>
<p>sounds like a plan; I don't know how much time I will have this week, plannin to mostly take vacation</p>



<a name="184111917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111917">(Dec 23 2019 at 15:31)</a>:</h4>
<p>I'm around today but maybe not after today</p>



<a name="184111918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111918">(Dec 23 2019 at 15:31)</a>:</h4>
<p>I can certainly send an e-mail to core tho</p>



<a name="184111988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184111988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184111988">(Dec 23 2019 at 15:32)</a>:</h4>
<p>Yeah, I think we should target discussion after new year, there's no particular rush</p>



<a name="184112004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112004">(Dec 23 2019 at 15:32)</a>:</h4>
<p>right</p>



<a name="184112010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112010">(Dec 23 2019 at 15:32)</a>:</h4>
<p>I'm practicing being more "zen" :)</p>



<a name="184112025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112025">(Dec 23 2019 at 15:33)</a>:</h4>
<p>I am also not sure about my availabilyty for the next two weeks, and I also plan to implement that standard lazy types RFC...</p>



<a name="184112051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112051">(Dec 23 2019 at 15:33)</a>:</h4>
<p>ok. I will put in some time today, I don't think the RFC has to be "done" to start discussing</p>



<a name="184112067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112067">(Dec 23 2019 at 15:33)</a>:</h4>
<p>but it needs at least enough bullets that people don't "fill in the blanks"</p>



<a name="184112068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112068" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112068">(Dec 23 2019 at 15:33)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="184112146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112146" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112146">(Dec 23 2019 at 15:34)</a>:</h4>
<p>It might not be the best time to open RFC during hollidays though, as those folks who use Rust profeccionally might be on vacation from RUst things</p>



<a name="184112155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112155">(Dec 23 2019 at 15:35)</a>:</h4>
<p>or it might actually be the opposite vacation =&gt; more time for bikeshedding</p>



<a name="184112351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112351" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112351">(Dec 23 2019 at 15:38)</a>:</h4>
<p>I'm not planning on opening it until next week</p>



<a name="184112352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112352" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112352">(Dec 23 2019 at 15:38)</a>:</h4>
<p>if then :)</p>



<a name="184112358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184112358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184112358">(Dec 23 2019 at 15:39)</a>:</h4>
<p>anyway not this week</p>



<a name="184477636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477636" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477636">(Dec 30 2019 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> not sure if you're around this week. I am but I'm a bit busy just now</p>



<a name="184477641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477641" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477641">(Dec 30 2019 at 15:02)</a>:</h4>
<p>It's time for the last update for this year <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="confetti" class="emoji emoji-1f38a" role="img" title="confetti">:confetti:</span> </p>
<p>Changelog is up, as usual: <a href="https://rust-analyzer.github.io/thisweek/2019/12/30/changelog-5.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2019/12/30/changelog-5.html">https://rust-analyzer.github.io/thisweek/2019/12/30/changelog-5.html</a></p>
<p>I don't have much to report personally, as I was traveling</p>



<a name="184477683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477683">(Dec 30 2019 at 15:03)</a>:</h4>
<p>But others were hard at work, so we landed a number of big features still!</p>
<ul>
<li><code>cargo watch</code> is moved to the server side, and now should work with emacs</li>
<li>for vs code, we now use a standard way to customize the color theme</li>
<li>and we support visibility during name resolution</li>
</ul>



<a name="184477741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477741">(Dec 30 2019 at 15:04)</a>:</h4>
<p>I didn't get a change to fill-in the pre-RFC from the previous week sadly :(</p>



<a name="184477794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477794">(Dec 30 2019 at 15:05)</a>:</h4>
<p>Yeah, that's on my to-do list for today</p>



<a name="184477806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477806" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477806">(Dec 30 2019 at 15:05)</a>:</h4>
<p>Sounds like I should also upgrade my r-a installation</p>



<a name="184477810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477810" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477810">(Dec 30 2019 at 15:05)</a>:</h4>
<p>cargo watch would be nice :)</p>



<a name="184477831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477831">(Dec 30 2019 at 15:06)</a>:</h4>
<p>I did I think send an e-mail to core team as we discussed</p>



<a name="184477872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184477872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184477872">(Dec 30 2019 at 15:06)</a>:</h4>
<p>but i've not checked my email to see if anyone responded :P</p>



<a name="184566277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184566277" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184566277">(Dec 31 2019 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> I put some more work into updating <a href="https://hackmd.io/NKMNjAYoRE6AP_XRot3z0w?edit" target="_blank" title="https://hackmd.io/NKMNjAYoRE6AP_XRot3z0w?edit">the draft RFC</a>, though it's by no means complete</p>



<a name="184913362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913362">(Jan 06 2020 at 15:04)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="133169">@matklad</span> -- you around this week?</p>



<a name="184913371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913371">(Jan 06 2020 at 15:04)</a>:</h4>
<p>So, let's have our first weekly update of the decade, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>!</p>
<p><a href="https://rust-analyzer.github.io/thisweek/2020/01/06/changelog-6.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/01/06/changelog-6.html">https://rust-analyzer.github.io/thisweek/2020/01/06/changelog-6.html</a></p>
<p>I sadly don't have a lot of to report this time: it was a mix of vacation and blogging about spinlocks for me :(</p>



<a name="184913380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913380">(Jan 06 2020 at 15:04)</a>:</h4>
<p>yup!</p>



<a name="184913411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913411" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913411">(Jan 06 2020 at 15:04)</a>:</h4>
<p>I haven't looked into the RFC yet, but I am going to do it today</p>



<a name="184913580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913580">(Jan 06 2020 at 15:06)</a>:</h4>
<p>OK. I don't have a ton to report. I had an epic conversation with <span class="user-mention" data-user-id="116083">@pnkfelix</span> about traits, chalk, etc, and I am thinking a lot about next steps, but that's probably best discussed in <a class="stream" data-stream-id="144729" href="/#narrow/stream/144729-wg-traits">#wg-traits</a>.</p>



<a name="184913584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913584" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913584">(Jan 06 2020 at 15:06)</a>:</h4>
<p>I was wondering one thing, though</p>



<a name="184913595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913595">(Jan 06 2020 at 15:07)</a>:</h4>
<p>In general, you've several times relayed a wish to get more involvement from other t-compiler folks</p>



<a name="184913619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913619" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913619">(Jan 06 2020 at 15:07)</a>:</h4>
<p>yesssssss</p>



<a name="184913729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913729">(Jan 06 2020 at 15:08)</a>:</h4>
<p>I'm still feeling a bit unsure how to "engineer" that :) I guess one question I had was what you thought such involvement would look like. I am imagining feedback on various design questions ?</p>



<a name="184913760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913760">(Jan 06 2020 at 15:09)</a>:</h4>
<p>I guess also potentially directly hacking on rust-analyzer :)</p>



<a name="184913773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913773">(Jan 06 2020 at 15:09)</a>:</h4>
<p>It seems like getting aggressive about library-ification (as we are hoping) is the best way forward here</p>



<a name="184913849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913849">(Jan 06 2020 at 15:10)</a>:</h4>
<p>I think directly hacking is more important, as it is a way to get design feedback with teeth, so to say</p>



<a name="184913931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913931" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913931">(Jan 06 2020 at 15:10)</a>:</h4>
<p>I'm inclined to agree</p>



<a name="184913946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913946">(Jan 06 2020 at 15:11)</a>:</h4>
<blockquote>
<p>It seems like getting aggressive about library-ification (as we are hoping) is the best way forward here</p>
</blockquote>
<p>Yes. It helps <strong>tremendously</strong> that folks can work on chalk, for example</p>



<a name="184913988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913988">(Jan 06 2020 at 15:11)</a>:</h4>
<p>Though I do think that there's a lot of importatn design question about state management in rust-analyzer itself, and that won't be covered by librariification</p>



<a name="184913993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184913993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184913993">(Jan 06 2020 at 15:11)</a>:</h4>
<p>one thing we've talked about is trying to spend more time planning out roadmaps, I wonder if it would be helpful to schedule some longer sessions (I think a lot of time is needed, e.g. potentially in the 2-4 hour region) to kind of "dump out" the thinking and plan out steps</p>



<a name="184914004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914004">(Jan 06 2020 at 15:11)</a>:</h4>
<p>felix and I did such a session in a cafe on friday for traits</p>



<a name="184914006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914006">(Jan 06 2020 at 15:11)</a>:</h4>
<p>and I'm still pondering it :)</p>



<a name="184914074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914074" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914074">(Jan 06 2020 at 15:12)</a>:</h4>
<p>side note: I feel like I owe you a lot of feedback re: salsa + encapsulation etc</p>



<a name="184914088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914088" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914088">(Jan 06 2020 at 15:12)</a>:</h4>
<p>not sure if you've talked much about the parser?</p>



<a name="184914105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914105">(Jan 06 2020 at 15:12)</a>:</h4>
<p>No, I didn't get to parser stuff still</p>



<a name="184914109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914109">(Jan 06 2020 at 15:12)</a>:</h4>
<blockquote>
<p>Though I do think that there's a lot of importatn design question about state management in rust-analyzer itself, and that won't be covered by librariification</p>
</blockquote>
<p>yeah; the initial steps are fairly modest somehow</p>



<a name="184914168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914168">(Jan 06 2020 at 15:13)</a>:</h4>
<p>I do think that planning roadmaps is important, but I feel that, for more technical roadmaps, some preliminary hacking is pre-requsite</p>



<a name="184914249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914249" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914249">(Jan 06 2020 at 15:14)</a>:</h4>
<p>yeah it's a difficult mix</p>



<a name="184914444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914444" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914444">(Jan 06 2020 at 15:16)</a>:</h4>
<p>OK, well, something to think about I guess. Anyway, I think we should try to finish up that RFC in any case, but I'm not sure how much it directly helps at getting people to hack some on rust-analyzer more.</p>



<a name="184914485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914485">(Jan 06 2020 at 15:17)</a>:</h4>
<p>FWIW, the general involvment with rust-analyzer is pretty great!</p>



<a name="184914509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914509">(Jan 06 2020 at 15:17)</a>:</h4>
<p>Yes! I shouldn't have written "people" so broadly</p>



<a name="184914512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914512">(Jan 06 2020 at 15:17)</a>:</h4>
<p>Probably bigger than what I can confortably review thoroughly already :)</p>



<a name="184914518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914518">(Jan 06 2020 at 15:17)</a>:</h4>
<p>(Did you see <span class="user-mention" data-user-id="116083">@pnkfelix</span>'s comments about writing up the steps to use rust-analyzer with rustc for various editors in the rustc-guide btw?)</p>



<a name="184914525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914525">(Jan 06 2020 at 15:17)</a>:</h4>
<blockquote>
<p>Probably bigger than what I can confortably review thoroughly already :)</p>
</blockquote>
<p>yeah, that's always a problem :)</p>



<a name="184914628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914628">(Jan 06 2020 at 15:18)</a>:</h4>
<p>It wasn't that  bad with IntelliJ Rust -- probably fewer people know both kotlin &amp; rust</p>



<a name="184914652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914652" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914652">(Jan 06 2020 at 15:18)</a>:</h4>
<p>Should have written rust-anlayzer in agda to solve this "problem" :D</p>



<a name="184914692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914692">(Jan 06 2020 at 15:18)</a>:</h4>
<p>Heh, that wouldn't have stopped me</p>



<a name="184914756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914756" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914756">(Jan 06 2020 at 15:19)</a>:</h4>
<p>But it seems like it's mostly you reviewing things, so that's a bottleneck</p>



<a name="184914775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914775" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914775">(Jan 06 2020 at 15:19)</a>:</h4>
<blockquote>
<p>comments about writing up the steps to use rust-analyzer with rustc for various editors in the rustc-guide btw?</p>
</blockquote>
<p>No, I only saw the poll</p>



<a name="184914867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184914867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184914867">(Jan 06 2020 at 15:20)</a>:</h4>
<p>tbh, I haven't hacked on rustc in a while, so I am not sure I know the best tips for rust-anlayzer/rustc combo right now :)</p>



<a name="184917150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/184917150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#184917150">(Jan 06 2020 at 15:42)</a>:</h4>
<p>I'm thinking I might take up the task of writing up such docs</p>



<a name="185500052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185500052" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185500052">(Jan 13 2020 at 14:56)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> (fyi, might be a bit late today)</p>



<a name="185500637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185500637" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185500637">(Jan 13 2020 at 15:02)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> this week's notes: <a href="https://rust-analyzer.github.io/thisweek/2020/01/13/changelog-7.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/01/13/changelog-7.html">https://rust-analyzer.github.io/thisweek/2020/01/13/changelog-7.html</a></p>



<a name="185500659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185500659" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185500659">(Jan 13 2020 at 15:02)</a>:</h4>
<p>I am super excited about today's release!</p>



<a name="185500823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185500823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185500823">(Jan 13 2020 at 15:04)</a>:</h4>
<p>The most interesting bit, procedurally, is that we have binary releases now. Once we also add auto-update to the editor plugin, we'll be able to better answer the question about the best distribution strategy</p>



<a name="185501087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185501087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185501087">(Jan 13 2020 at 15:07)</a>:</h4>
<p>I also opened a request for design meeting about parser library-ification: <a href="https://github.com/rust-lang/compiler-team/issues/237" target="_blank" title="https://github.com/rust-lang/compiler-team/issues/237">https://github.com/rust-lang/compiler-team/issues/237</a></p>
<p>In that proposal are links to the summary document about rust-analyzer's current approach to sytnax trees, as well as a plan I have in mind for sharing the parser</p>



<a name="185501178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185501178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185501178">(Jan 13 2020 at 15:08)</a>:</h4>
<p>Also, <span class="user-mention" data-user-id="116009">@nikomatsakis</span> I feel we should probably move forward with the rls/rust-analyzer RFC. I think I've added various bits of background info to the hackmd document</p>



<a name="185502762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185502762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185502762">(Jan 13 2020 at 15:23)</a>:</h4>
<blockquote>
<p>I also opened a request for design meeting about parser library-ification: <a href="https://github.com/rust-lang/compiler-team/issues/237" target="_blank" title="https://github.com/rust-lang/compiler-team/issues/237">https://github.com/rust-lang/compiler-team/issues/237</a></p>
</blockquote>
<p>That mentions merging the parsers for <code>ra</code> and <code>rustc</code>. Does that mean I should stop making PRs for the parser, since it's about to be in flux?</p>



<a name="185502943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185502943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185502943">(Jan 13 2020 at 15:25)</a>:</h4>
<blockquote>
<p>Does that mean I should stop making PRs for the parser, since it's about to be in flux?</p>
</blockquote>
<p>Nope, I hope we can change everything incrementally and in small steps, without huge all-breaking PRs</p>



<a name="185503001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503001">(Jan 13 2020 at 15:25)</a>:</h4>
<p>On my side, I've been thinking a lot about the strategy for extracting a type library, and I'm beginning to question a bit the plan I had. In particular, I've been thinking it would make sense to start adjusting rustc to move it towards the proposed design -- as well perhaps as adding the bridge I was contemplating before -- and try to "meet in the middle" and then extract to a shared library.</p>



<a name="185503056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503056" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503056">(Jan 13 2020 at 15:26)</a>:</h4>
<p>The same sort of applies to the trait solver strategy and other things</p>



<a name="185503129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503129">(Jan 13 2020 at 15:26)</a>:</h4>
<p>I agree re: the RFC, <span class="user-mention" data-user-id="133169">@matklad</span>, I guess I'll look over it -- I think it's probably ready to be posted soon? It seems to me that on the 'big picture' there aren't really many unknowns</p>



<a name="185503216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503216">(Jan 13 2020 at 15:27)</a>:</h4>
<p>I did a get few more e-mails from some core folks. <span class="user-mention" data-user-id="256841">@Nick Cameron</span> in particular mentioned the fact that we ought to try and ensure a seamless transition, and I agree</p>



<a name="185503402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503402">(Jan 13 2020 at 15:29)</a>:</h4>
<p>Yeah, transition is a hard bit</p>



<a name="185503451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503451">(Jan 13 2020 at 15:30)</a>:</h4>
<p>I think we should have at least some transitionary period, when both are available, so that the users can switch when they are ready</p>



<a name="185503514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503514" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503514">(Jan 13 2020 at 15:30)</a>:</h4>
<p>but that makes automatic transition harder</p>



<a name="185503544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503544">(Jan 13 2020 at 15:30)</a>:</h4>
<p>I'd be interested in benchmarking the parsers as well, I've noticed <code>ra</code> is usually faster than running cargo check</p>



<a name="185503560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503560">(Jan 13 2020 at 15:30)</a>:</h4>
<p>not sure how much of that is due to semantic analysis</p>



<a name="185503613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503613">(Jan 13 2020 at 15:31)</a>:</h4>
<p>rust-analyzer parser was about 2X slower than rustc last time I've checked it (which was more than a year ago I guess?e)</p>



<a name="185503804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503804">(Jan 13 2020 at 15:32)</a>:</h4>
<p>Makes sense, because rustc's parser probably has been optimized for a long time</p>



<a name="185503843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185503843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185503843">(Jan 13 2020 at 15:33)</a>:</h4>
<p>For transition, I feel that accepting the RFC will take a non-trivial amount of time, during which we could figure out the details better. </p>
<p>I still have a hypothesis that maybe we want to do something different from a <code>rustup component</code> :)</p>



<a name="185504435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185504435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185504435">(Jan 13 2020 at 15:38)</a>:</h4>
<p>Oh, one more chalk related thing: I've got an idea how to isolate chalk's panics and make them less painful: <a href="https://github.com/rust-analyzer/rust-analyzer/pull/2818" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/2818">https://github.com/rust-analyzer/rust-analyzer/pull/2818</a></p>
<p>Basiacally, wrap <code>catch_unwind</code> around trait solver and return <code>None</code> on panics. This is tricker than expected, because chalk itself is not unwind safe, so we also have to reset the sate on panic</p>



<a name="185506480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/185506480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#185506480">(Jan 13 2020 at 15:58)</a>:</h4>
<p>Oh, I totally forgot to mention that <span class="user-mention silent" data-user-id="212936">Emil Lauridsen</span> heroically triaged all the issues on the repo, closed a bunch of obsolted ones, and worked with original issue reporters to get more info! This work sadly is invisible in <code>git log --merges</code> (that's why I missed it :( ), but is hugely important!</p>



<a name="186109427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186109427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186109427">(Jan 20 2020 at 15:08)</a>:</h4>
<p>Note that thete's no sync up today: there's a holliday in USA, and Ferrous All Hands in Berlin</p>



<a name="186109450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186109450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186109450">(Jan 20 2020 at 15:08)</a>:</h4>
<p>There <strong>is</strong> a release however, and I hope to get to writing release notes later today :)</p>



<a name="186123305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186123305" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186123305">(Jan 20 2020 at 18:15)</a>:</h4>
<p>Could you please elaborate on when and who is taking part in sync-ups and its process? Or if there is some reference info about them?</p>



<a name="186123408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186123408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186123408">(Jan 20 2020 at 18:17)</a>:</h4>
<p>The only mandatory participants are <span class="user-mention silent" data-user-id="133169">matklad</span> and <span class="user-mention silent" data-user-id="116009">nikomatsakis</span> , but anyone else is free to join</p>



<a name="186123439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186123439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186123439">(Jan 20 2020 at 18:18)</a>:</h4>
<p>In general, our development process is mostly chaotic and not super well defined, but it tends to work out OK in practice</p>



<a name="186123491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186123491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186123491">(Jan 20 2020 at 18:18)</a>:</h4>
<p>As for when, it's the same time every monday</p>



<a name="186123966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186123966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186123966">(Jan 20 2020 at 18:25)</a>:</h4>
<p>okay, <em><code>the</code></em> same time, thank you!</p>



<a name="186689704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186689704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186689704">(Jan 27 2020 at 15:03)</a>:</h4>
<p>And this week there are Mozilla all-hands, so we'll have only a short sync up I guess</p>



<a name="186689714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186689714" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186689714">(Jan 27 2020 at 15:03)</a>:</h4>
<p>The changelog is up here: <a href="https://rust-analyzer.github.io/thisweek/2020/01/27/changelog-9.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/01/27/changelog-9.html">https://rust-analyzer.github.io/thisweek/2020/01/27/changelog-9.html</a></p>



<a name="186689849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186689849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186689849">(Jan 27 2020 at 15:04)</a>:</h4>
<p>As it was all-hands week for me last week, I didn't do many useful things. However, this release includes auto import, and semantic syntax highlighting inside macro calls.</p>



<a name="186690032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186690032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186690032">(Jan 27 2020 at 15:06)</a>:</h4>
<p>It almost makes me think that I am not that useful for rust-analyzer anymore <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span></p>



<a name="186690540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186690540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186690540">(Jan 27 2020 at 15:10)</a>:</h4>
<p>There's always room to do more <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="186690561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186690561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186690561">(Jan 27 2020 at 15:10)</a>:</h4>
<p>(also, shouldn't we ping people for the sync up?)</p>



<a name="186690757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186690757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186690757">(Jan 27 2020 at 15:12)</a>:</h4>
<p>yeah, let's do this <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span></p>



<a name="186692189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692189" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692189">(Jan 27 2020 at 15:26)</a>:</h4>
<p>Actually, there's some thing I'd like to throw in the air...</p>
<p>It looks like we've accumulated a bunch of cases where rust-analyzer breaks. I think the primary case here is chalk, but I've also seen some utf8-boundary error  somewhere, and we also ocasionaaly have panicy assists. </p>
<p>By itself, I think panics are OK: they are pretty isolated, and actually test, in practice, the resilience of rust-analyzer. What I don't really like though, is the fact that we've accumulated enougth panics to make it hard to notice new bugs/regressions</p>



<a name="186692245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692245">(Jan 27 2020 at 15:26)</a>:</h4>
<p>I wonder if we should maybe start moving towards zero bugs policy? Or at least zero panics?</p>



<a name="186692472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692472">(Jan 27 2020 at 15:29)</a>:</h4>
<p>Isn't that kinda tricky because the errors are hard to track down?</p>



<a name="186692575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692575">(Jan 27 2020 at 15:30)</a>:</h4>
<p>Do you mean by moving towards zero panics that fixing bugs should be the priority?</p>



<a name="186692595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692595">(Jan 27 2020 at 15:30)</a>:</h4>
<p>Yeah</p>



<a name="186692627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692627">(Jan 27 2020 at 15:30)</a>:</h4>
<p>Basically, prioritizing fixes (even obscure ones, like "this needs to be fixed in chalk" over feature work)</p>



<a name="186692745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692745">(Jan 27 2020 at 15:31)</a>:</h4>
<p>What if the fix requires a larger change, as often happens? Put a workaround in place to avoid crashing?</p>



<a name="186692805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186692805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186692805">(Jan 27 2020 at 15:32)</a>:</h4>
<p>(at first, while working on a real solution)</p>



<a name="186693025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693025">(Jan 27 2020 at 15:34)</a>:</h4>
<p>Well, removing bugs is always reasonable! I will try to finish with my changes to <code>ra_syntax</code> and take a look at adding sanititizers to better tackle issues with memory corruptions. Or does one think this wouldn't help/be possible?</p>



<a name="186693147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693147" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693147">(Jan 27 2020 at 15:35)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/2904" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/2904">issue</a></p>



<a name="186693338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693338" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693338">(Jan 27 2020 at 15:37)</a>:</h4>
<p>Could legitimate panics be hid by us using panics for cancellation?</p>



<a name="186693367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693367">(Jan 27 2020 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> nope, we specifically rethrough anything that is not the <code>Canceled</code> zst</p>



<a name="186693478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693478">(Jan 27 2020 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> i think that might help we have a repro. What confuses me though is that our fuzz tests (<code>cargo xtask fuzz-tests</code>) don't seem to catch anything....</p>



<a name="186693487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693487" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693487">(Jan 27 2020 at 15:38)</a>:</h4>
<p>concerning the Chalk problems, if you think it's the better trade-off, we could upgrade to current master and temporarily lose <code>impl Trait</code> support, but probably fix some panics and improve performance</p>



<a name="186693528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693528">(Jan 27 2020 at 15:39)</a>:</h4>
<p>I'm currently working on refactoring <code>impl Trait</code> handling on rust-analyzer side to prepare for the Chalk changes (and also to make it more correct), but it will take some more time</p>



<a name="186693636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693636" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693636">(Jan 27 2020 at 15:40)</a>:</h4>
<p>(I've realized that we need to handle argument-position impl trait by basically lowering to type variables anyway)</p>



<a name="186693713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693713">(Jan 27 2020 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span>  It seems that these fuzz tests generate overly-random data, I saw we could configure the fuzzer to emit something more like a rust source code.<br>
It is called <a href="https://rust-fuzz.github.io/book/cargo-fuzz/structure-aware-fuzzing.html" target="_blank" title="https://rust-fuzz.github.io/book/cargo-fuzz/structure-aware-fuzzing.html">structure-aware fuzzing</a></p>



<a name="186693837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693837">(Jan 27 2020 at 15:42)</a>:</h4>
<p>Ah, that's good to know for implementing impl trait on chalk's side</p>



<a name="186693936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186693936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186693936">(Jan 27 2020 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> I think I prefer to move slowly with chalk in this case: upgrading to master might fix some, but uncover other bugs :)</p>



<a name="186694020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186694020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186694020">(Jan 27 2020 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="125131">@detrumi</span> we might still use the impl Trait support for arguments when type-checking the function itself, I'm not sure... we could use the type param lowering there as well, I don't know yet what will work better</p>



<a name="186694091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186694091" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186694091">(Jan 27 2020 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> there's quite a bit to be gained in this case though, not just the panic fix but also fuel support</p>



<a name="186694223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186694223" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186694223">(Jan 27 2020 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> what would be overall less work? </p>
<ul>
<li>move now, lose <code>impl Trait</code>, add it back later</li>
<li>do refactorings, move together with <code>impl Trait</code> later</li>
</ul>



<a name="186694332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186694332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186694332">(Jan 27 2020 at 15:47)</a>:</h4>
<p>To cut on round-trips, I think it makes sense to do whatever needs the less work overall, because optimizing for your time seems very reasonable :D</p>



<a name="186694431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186694431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186694431">(Jan 27 2020 at 15:48)</a>:</h4>
<p>it's the same amount of work, I think</p>



<a name="186694476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186694476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186694476">(Jan 27 2020 at 15:49)</a>:</h4>
<p>my refactorings are mostly independent, and upgrading now would mostly just involve deactivating a few tests</p>



<a name="186694527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186694527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186694527">(Jan 27 2020 at 15:49)</a>:</h4>
<p>Hm, yeah, I don't have any opinion then :)</p>



<a name="186695125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186695125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186695125">(Jan 27 2020 at 15:55)</a>:</h4>
<p>I guess we could at least see what effect the Chalk upgrade has on <code>analysis-stats</code> (performance and analysis wise)</p>



<a name="186695212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186695212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186695212">(Jan 27 2020 at 15:56)</a>:</h4>
<p>Yeah, and also run it with <code>--with-deps</code>, to make sure nothing breaks horribly...</p>



<a name="186697268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186697268" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186697268">(Jan 27 2020 at 16:16)</a>:</h4>
<blockquote>
<p>I guess we could at least see what effect the Chalk upgrade has on <code>analysis-stats</code> (performance and analysis wise)</p>
</blockquote>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> I am <em>not</em> part of this wg, just a <em>very</em> big fan and user of rust-analyzer! That being said: your draft PR (<a href="https://github.com/rust-analyzer/rust-analyzer/pull/2872" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/2872">https://github.com/rust-analyzer/rust-analyzer/pull/2872</a>) would unblock me (and probably several others) to use newer rust-analyzers on the main <code>tracing</code> repository, as <code>ra</code> crashes with the chalk bug(s) that jack fixed. I don't mind the lack of <code>impl Trait</code> because y'all have landed _so_ many amazing features in the last month and a half and I'm <em>really</em> eager to try them out.</p>



<a name="186697414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186697414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186697414">(Jan 27 2020 at 16:18)</a>:</h4>
<p>(I hope this does not come off as me asking you to do work! i'm just a customer/user who is voicing _one_ (hopefully easily ignorable!) opinion. y'all obviously have <em>far</em> more context than I on this project.</p>



<a name="186698143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186698143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186698143">(Jan 27 2020 at 16:25)</a>:</h4>
<p>the work is already done anyway ;)</p>



<a name="186698490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186698490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186698490">(Jan 27 2020 at 16:28)</a>:</h4>
<p>Understood! I have <em>no clue</em> how much effort it would be to disable the <a href="https://github.com/rust-analyzer/rust-analyzer/pull/2872/checks?check_run_id=396690282#step:9:665" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/2872/checks?check_run_id=396690282#step:9:665">failing tests</a> and I don't want to assume anything.</p>



<a name="186698545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186698545" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186698545">(Jan 27 2020 at 16:29)</a>:</h4>
<p>especially for a project that people contribute their own time to.</p>



<a name="186702712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186702712" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186702712">(Jan 27 2020 at 17:07)</a>:</h4>
<p>I commented on the Chalk upgrade PR, but I personally recommend dropping <code>impl Trait</code> support for now in favor of upgrading</p>



<a name="186702792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186702792" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186702792">(Jan 27 2020 at 17:08)</a>:</h4>
<p>Partly because the recent changes should fix a host of problems (mostly related to truncation) and allow limiting Chalk solving time.</p>



<a name="186702820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186702820" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186702820">(Jan 27 2020 at 17:08)</a>:</h4>
<p>And partly because even though <span class="user-mention" data-user-id="125131">@detrumi</span> is working on <code>impl Trait</code>, there still is some design work to do I think</p>



<a name="186710665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186710665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186710665">(Jan 27 2020 at 18:28)</a>:</h4>
<p><a href="https://www.reddit.com/r/rust/comments/eus0cj/rustanalyzer_changelog_9/" target="_blank" title="https://www.reddit.com/r/rust/comments/eus0cj/rustanalyzer_changelog_9/">https://www.reddit.com/r/rust/comments/eus0cj/rustanalyzer_changelog_9/</a></p>



<a name="186724389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186724389" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186724389">(Jan 27 2020 at 20:51)</a>:</h4>
<p>current Chalk master does not crash (or hang) when analyzing RA, even if I set max size to 10. And setting fuel to 100 saves about 10% runtime on analysis, and doesn't seem to have much of an effect on unknown types (in fact it has slightly fewer unknown types than when I use 1000, which is probably because Chalk has less time to find ambiguities <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> )</p>



<a name="186729824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186729824" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186729824">(Jan 27 2020 at 21:50)</a>:</h4>
<p>If you don't set any fuel, does it still crash or hang?</p>



<a name="186729892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186729892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186729892">(Jan 27 2020 at 21:51)</a>:</h4>
<p>This makes me super happy to hear</p>



<a name="186733512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/186733512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#186733512">(Jan 27 2020 at 22:34)</a>:</h4>
<p>I haven't tried it without fuel</p>



<a name="187026770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187026770" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187026770">(Jan 30 2020 at 20:22)</a>:</h4>
<p>my two cents as an outsider: I notice bugs in RA much more than I notice missing features. I'd much rather not have random errors pointing to imports instead of code than better type hints or anything like that</p>



<a name="187026845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187026845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187026845">(Jan 30 2020 at 20:23)</a>:</h4>
<p>also, I've put a fair amount of time into fuzzing <a href="https://github.com/jyn514/rcc/" target="_blank" title="https://github.com/jyn514/rcc/">https://github.com/jyn514/rcc/</a>, so let me know if you want help with that :) Just giving AFL a bunch of valid [Rust] inputs usually gets good results</p>



<a name="187026960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187026960" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187026960">(Jan 30 2020 at 20:25)</a>:</h4>
<p>AFAIK structure-aware fuzzing doesn't work very well with self-recursive data types, you can't <code>#[derive(Arbitrary)]</code> or anything like that</p>



<a name="187030048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030048">(Jan 30 2020 at 21:00)</a>:</h4>
<p>Take a star mate! Could you please elaborate on what AFL means?</p>



<a name="187030123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030123">(Jan 30 2020 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> <a href="https://github.com/rust-fuzz/afl.rs/" target="_blank" title="https://github.com/rust-fuzz/afl.rs/">https://github.com/rust-fuzz/afl.rs/</a></p>



<a name="187030193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030193">(Jan 30 2020 at 21:02)</a>:</h4>
<p>and this is what my fuzz setup looks like: <a href="https://github.com/jyn514/rcc/tree/master/fuzz" target="_blank" title="https://github.com/jyn514/rcc/tree/master/fuzz">https://github.com/jyn514/rcc/tree/master/fuzz</a></p>



<a name="187030243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030243">(Jan 30 2020 at 21:03)</a>:</h4>
<p>although I've tried using <a href="https://github.com/rust-fuzz/honggfuzz-rs" target="_blank" title="https://github.com/rust-fuzz/honggfuzz-rs">hfuzz</a> lately: <a href="https://github.com/jyn514/rcc/blob/hfuzz/fuzz/hfuzz.rs" target="_blank" title="https://github.com/jyn514/rcc/blob/hfuzz/fuzz/hfuzz.rs">https://github.com/jyn514/rcc/blob/hfuzz/fuzz/hfuzz.rs</a></p>



<a name="187030590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030590">(Jan 30 2020 at 21:07)</a>:</h4>
<p>What is the advantage of <code>hfuzz?</code></p>



<a name="187030711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030711">(Jan 30 2020 at 21:08)</a>:</h4>
<p>If you look at my issues page it's caught 12 _different_ panics in the last 2 weeks</p>



<a name="187030727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030727">(Jan 30 2020 at 21:08)</a>:</h4>
<p>Honestly not much, a friend recommended it but it seems pretty similar to AFL</p>



<a name="187030749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030749">(Jan 30 2020 at 21:09)</a>:</h4>
<p>I don't think he's on Zulip or I'd tag him</p>



<a name="187030886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187030886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187030886">(Jan 30 2020 at 21:10)</a>:</h4>
<p>I wish I knew what was the secret...</p>



<a name="187269386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187269386" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187269386">(Feb 03 2020 at 15:01)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> weekly sync-up time! </p>
<p>We have the tenth changelog today: <a href="https://rust-analyzer.github.io/thisweek/2020/02/03/changelog-10.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/02/03/changelog-10.html">https://rust-analyzer.github.io/thisweek/2020/02/03/changelog-10.html</a></p>



<a name="187269505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187269505" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187269505">(Feb 03 2020 at 15:02)</a>:</h4>
<p>It is mostly stability&amp;fixes release, a lot of bugs were fixed around <code>cargo check</code> (thanks <span class="user-mention" data-user-id="212936">@Emil Lauridsen</span>!) and we've upgraded chalk to the fuel-enabled version!</p>



<a name="187269519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187269519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187269519">(Feb 03 2020 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> are you around?</p>



<a name="187269595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187269595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187269595">(Feb 03 2020 at 15:03)</a>:</h4>
<p>Another bigish thing is that I've finally get to learning more about sorbet, and it is really cool. I highly recommend reading the source code <a href="https://github.com/sorbet/sorbet" target="_blank" title="https://github.com/sorbet/sorbet">https://github.com/sorbet/sorbet</a></p>



<a name="187269658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187269658" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187269658">(Feb 03 2020 at 15:04)</a>:</h4>
<p>Their architecture is much simpler than ours, but doesn't handle LSP use-case too well.</p>



<a name="187272321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187272321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187272321">(Feb 03 2020 at 15:31)</a>:</h4>
<p>FYI: Niko has <a href="#narrow/stream/131828-t-compiler/topic/daughter.20sick" title="#narrow/stream/131828-t-compiler/topic/daughter.20sick">notified</a> that he would not be available today</p>



<a name="187272898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187272898" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187272898">(Feb 03 2020 at 15:36)</a>:</h4>
<p>I'm still working on refactoring impl trait and type parameters in general, it's getting quite big, but in the end I think it'll get us closer to Chalk and fix a few bugs</p>



<a name="187273269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187273269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187273269">(Feb 03 2020 at 15:40)</a>:</h4>
<p>I'm studying our VSCode extension codebase and VSCode api docs in parallel, hope to work on downloading github releases soon. Besides this I'd like to finish with this tech debt <a href="https://github.com/rust-analyzer/rust-analyzer/pull/2911/files#diff-b69d408968a5d30bec690c680ffcd1adR110" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/2911/files#diff-b69d408968a5d30bec690c680ffcd1adR110">here</a> after merging the linked PR</p>



<a name="187273443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187273443" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187273443">(Feb 03 2020 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> , I am surprised that you decided to <a href="https://github.com/rust-analyzer/rust-analyzer/pull/3001/files" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/3001/files">remove seedrandom</a> this is literally a package with 0 dependencies</p>



<a name="187273667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187273667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187273667">(Feb 03 2020 at 15:45)</a>:</h4>
<p>it has zero dependnecies, but I've spend like 3x time figuring out how do you actually import seedrandom from seedrandom than it take me to write hashString and randomU32numbers :D</p>



<a name="187273788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187273788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187273788">(Feb 03 2020 at 15:46)</a>:</h4>
<p>Yeah, the module system in TypeScript is very complicated and uneven, though that <code>esModuleInterop</code> was actually a good flag</p>



<a name="187275789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187275789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187275789">(Feb 03 2020 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> how did you end up with studying sorbet and why this project in particular? Did you randomly saw that talk on YouTube?</p>



<a name="187276830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187276830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187276830">(Feb 03 2020 at 16:16)</a>:</h4>
<p>If I have time this week I want to take a look at the latest semantic highlighting lsp bits</p>



<a name="187277668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187277668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187277668">(Feb 03 2020 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> there was a link to sorbet in the top of <a href="http://lobste.rs" target="_blank" title="http://lobste.rs">lobste.rs</a> recently, and then the author of olishell said that everyone must read sorbet's source code, and I trust their opinion</p>



<a name="187277991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187277991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emil Lauridsen <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187277991">(Feb 03 2020 at 16:27)</a>:</h4>
<p>Now that it seems like cargo check is finally cooling down stability wise, I'd love to dive deeper into the infer infrastructure and chalk, and hopefully get custom BinOp inference working barring upstream issues.</p>



<a name="187278243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187278243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187278243">(Feb 03 2020 at 16:29)</a>:</h4>
<p>the upstream issues (<a href="https://github.com/rust-lang-nursery/chalk/issues/234" target="_blank" title="https://github.com/rust-lang-nursery/chalk/issues/234">chalk#234</a>) are still there, so it might work, but in many cases it might not give results :(</p>



<a name="187823323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823323" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823323">(Feb 10 2020 at 15:05)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's Monday again!</p>



<a name="187823330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823330">(Feb 10 2020 at 15:05)</a>:</h4>
<p><a href="https://rust-analyzer.github.io/thisweek/2020/02/10/changelog-11.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/02/10/changelog-11.html">https://rust-analyzer.github.io/thisweek/2020/02/10/changelog-11.html</a></p>



<a name="187823426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823426">(Feb 10 2020 at 15:06)</a>:</h4>
<p>(Note that the actual release is still in progress; I feel like I should start cutting releases earlier, rust-analyzer moves fast and it takes a long time to catch up with all the stuff :-) )</p>



<a name="187823440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823440" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823440">(Feb 10 2020 at 15:07)</a>:</h4>
<p>I was just wondering whether we should mention in the change log that we kind of had impl trait support and removed it</p>



<a name="187823467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823467">(Feb 10 2020 at 15:07)</a>:</h4>
<p>I think we've mentioned it in the previous one?</p>



<a name="187823501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823501" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823501">(Feb 10 2020 at 15:07)</a>:</h4>
<p>Not in Changelog 10, I think</p>



<a name="187823505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823505" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823505">(Feb 10 2020 at 15:07)</a>:</h4>
<p>I don't think we did</p>



<a name="187823546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823546">(Feb 10 2020 at 15:08)</a>:</h4>
<p>it just says "update Chalk. This should fix some cases of extremely slow trait checking."</p>



<a name="187823557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823557">(Feb 10 2020 at 15:08)</a>:</h4>
<p>I can send a PR</p>



<a name="187823574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823574" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823574">(Feb 10 2020 at 15:08)</a>:</h4>
<p>(for the current one)</p>



<a name="187823587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823587">(Feb 10 2020 at 15:08)</a>:</h4>
<p>sure, that would be nice!</p>



<a name="187823596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823596" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823596">(Feb 10 2020 at 15:08)</a>:</h4>
<p>Can we mention <code>nodejs 10</code> -&gt; <code>nodejs 12</code> requirements change?</p>



<a name="187823630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823630">(Feb 10 2020 at 15:09)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="187823664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823664">(Feb 10 2020 at 15:09)</a>:</h4>
<p>That's quite the requirement, isn't nodejs 10 the default on ubuntu and such?</p>



<a name="187823668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823668">(Feb 10 2020 at 15:09)</a>:</h4>
<p>And we need to update the documentation on installing via marketplace. Currently it says users to download <code>.vsix</code> file from the latest GitHub release</p>



<a name="187823845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823845">(Feb 10 2020 at 15:11)</a>:</h4>
<p>(though maybe it's fine since it's only when you build from source)</p>



<a name="187823851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823851">(Feb 10 2020 at 15:11)</a>:</h4>
<p>I doubt that Ubuntu ships nodejs and npm at all</p>



<a name="187823863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823863">(Feb 10 2020 at 15:11)</a>:</h4>
<p>An <code>apt-cache search nodejs</code>  on my ubuntu 18.04 is showing me 8?</p>



<a name="187823883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187823883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187823883">(Feb 10 2020 at 15:11)</a>:</h4>
<p>Yes ubuntu ships nodejs and npm</p>



<a name="187824023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187824023" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187824023">(Feb 10 2020 at 15:13)</a>:</h4>
<p>So, highlights of the last week:</p>
<ul>
<li><span class="user-mention silent" data-user-id="258149">std::Veetaha</span> implemented downloading of binary releases (long awaited feature!)</li>
<li>I've published the first version of extension to the marketplace. As this is the first publish, I expect things to break horribly for the next couple of releases</li>
<li><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> rewritten our handing of type parameters</li>
</ul>



<a name="187824033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187824033" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187824033">(Feb 10 2020 at 15:13)</a>:</h4>
<p>Well yes, this won't be such a breaking change for everyone, since this is to build from sources</p>



<a name="187824130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187824130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187824130">(Feb 10 2020 at 15:14)</a>:</h4>
<p>Does the binary release work with the vscode remote extension?</p>



<a name="187824137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187824137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187824137">(Feb 10 2020 at 15:14)</a>:</h4>
<p>This week I plan to focus on releases and docs, to try to make sure that by the next release the process is solid, and not as manual as today.</p>



<a name="187824179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187824179" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187824179">(Feb 10 2020 at 15:14)</a>:</h4>
<p>We also had a meeting with t-compiler about parser library-ification. Looks like everyone is on board in general terms, and that we should just do this work.</p>



<a name="187824347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187824347" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187824347">(Feb 10 2020 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> are you around? I'd love to sync up regarding the RFC :)</p>



<a name="187825683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187825683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187825683">(Feb 10 2020 at 15:29)</a>:</h4>
<p>@matklad I would like discuss our validation logic in <code>ra_syntax</code> it you have time...</p>



<a name="187825851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187825851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187825851">(Feb 10 2020 at 15:31)</a>:</h4>
<p>sure!</p>



<a name="187826833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187826833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187826833">(Feb 10 2020 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> hmm the asciidoc seems to be broken in the first "new features" point?</p>



<a name="187826903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187826903" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187826903">(Feb 10 2020 at 15:42)</a>:</h4>
<p>also I assume "kbd::[Enter]" isn't supposed to look like that</p>



<a name="187826955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187826955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187826955">(Feb 10 2020 at 15:42)</a>:</h4>
<p>and it'd probably be nicer to make "Marketplace" a link instead of having the full URL in the text</p>



<a name="187827232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187827232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187827232">(Feb 10 2020 at 15:45)</a>:</h4>
<blockquote>
<p>hmm the asciidoc seems to be broken in the first "new features" point?</p>
</blockquote>
<p>Ah, so it's not the syntax highlighting in my editor that is broken <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="187827348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187827348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187827348">(Feb 10 2020 at 15:46)</a>:</h4>
<p>also, while I'm making suggestions anyway... maybe we could add the two sentences "rust-analyzer is an experimental modular compiler frontend for the Rust language. It is a part of a larger rls-2.0 effort to create excellent IDE support for Rust." to the beginning of each changelog and the home page? since it seems otherwise there's always someone on reddit who complains that the changelog doesn't say what RA is ;)</p>



<a name="187827403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187827403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187827403">(Feb 10 2020 at 15:46)</a>:</h4>
<p>yeah, this is exactly something I want to fix this week</p>



<a name="187827486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187827486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187827486">(Feb 10 2020 at 15:47)</a>:</h4>
<p>Also, on the home page of the website we can remove the sentence that rust-analyzer should be built from sources</p>



<a name="187827939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187827939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187827939">(Feb 10 2020 at 15:51)</a>:</h4>
<p>Yeah, I plan to just rewrite all the docs from scratch</p>



<a name="187828137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187828137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187828137">(Feb 10 2020 at 15:53)</a>:</h4>
<p>By the way, regarding rendering templates, there is much more Rust-y typesafe way of doing this: <a href="https://github.com/djc/askama" target="_blank" title="https://github.com/djc/askama">https://github.com/djc/askama</a></p>



<a name="187828474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187828474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187828474">(Feb 10 2020 at 15:56)</a>:</h4>
<p>yeah, I know, I don't think though that templating engine (and, specifically, compile-time templating engine) makes sense for our use-case</p>



<a name="187832107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187832107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sander van Harmelen <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187832107">(Feb 10 2020 at 16:32)</a>:</h4>
<p>Not sure where to ask, but I have a project that has 3 members in the [workspace] section of the top level Cargo file. Now it seems my editor isn't capable to handeling this properly. I'm using nvim+coc with the rust-analyzer plugin. When switching back to the RLS plugin it does work as expected. Is this a current limitation of the rust-analyzer (tested it with the release of a few days ago)?</p>



<a name="187832226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187832226" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187832226">(Feb 10 2020 at 16:34)</a>:</h4>
<p>That's roghtly the right place!</p>
<p>rust-analyzer itself <a href="https://github.com/rust-analyzer/rust-analyzer/blob/29f5e7eebf606c1929d5a77ad66624cd4f3fcf49/Cargo.toml#L1-L2" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/blob/29f5e7eebf606c1929d5a77ad66624cd4f3fcf49/Cargo.toml#L1-L2">is a workspace</a>, so that use-case should be supported:.</p>



<a name="187832245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187832245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187832245">(Feb 10 2020 at 16:34)</a>:</h4>
<p>What exactly does not work?</p>



<a name="187832389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187832389" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sander van Harmelen <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187832389">(Feb 10 2020 at 16:36)</a>:</h4>
<p>Hmm... Ok... Well it just stopped (when I changed my setup to a workspace configuration) giving we diagnostics. But let me revert back and see if I can see anything specific</p>



<a name="187832429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187832429" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187832429">(Feb 10 2020 at 16:36)</a>:</h4>
<p>We should provide diagnostics via <code>cargo check</code> in this situation, yeah</p>



<a name="187833022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187833022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sander van Harmelen <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187833022">(Feb 10 2020 at 16:43)</a>:</h4>
<p>Yeah, as always it does seem to work now. I did close everything and reboot my mac since yesterday, so maybe that fixed something. Anyway, thanks for the confirmation that it should be supported. Good to know!</p>



<a name="187833134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187833134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187833134">(Feb 10 2020 at 16:44)</a>:</h4>
<p>Glad to hear that it works now :)</p>



<a name="187833150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/187833150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#187833150">(Feb 10 2020 at 16:44)</a>:</h4>
<p>Heh, easy bug</p>



<a name="188385120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188385120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188385120">(Feb 17 2020 at 15:06)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's release is out (after four tries): <a href="https://rust-analyzer.github.io/thisweek/2020/02/17/changelog-12.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/02/17/changelog-12.html">https://rust-analyzer.github.io/thisweek/2020/02/17/changelog-12.html</a></p>



<a name="188385238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188385238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188385238">(Feb 17 2020 at 15:07)</a>:</h4>
<p>I think the highlight of the week is the awesome work <span class="user-mention" data-user-id="258149">@std::Veetaha</span> have been doing on the TypeScript extension. Specifically, it now downloads and upstes the server binary, which means that our release process is more or less finished!</p>
<p>We probably need to setup nightly builds as well some time, but that's lower priority</p>



<a name="188385344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188385344" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188385344">(Feb 17 2020 at 15:08)</a>:</h4>
<p>We've also got some refreshing of the docs: <a href="https://rust-analyzer.github.io/manual.html" target="_blank" title="https://rust-analyzer.github.io/manual.html">https://rust-analyzer.github.io/manual.html</a>.</p>
<p>It currently includes only installation instructions, we should move feature and asssits docs to this new place as well</p>



<a name="188385668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188385668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188385668">(Feb 17 2020 at 15:12)</a>:</h4>
<p>And we should probably use more recent screenshot of that download notification anyhow)</p>



<a name="188385686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188385686" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188385686">(Feb 17 2020 at 15:12)</a>:</h4>
<p>I personally would like to dedicate this week to paying down some technical debt:</p>
<ul>
<li>adding proper identity to rowan syntax tree</li>
<li>refreshing our highlighting infra.  <span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> is re-railing it on the new LSP protocol proposed extension; after that, I'd like to make sure that we make use of ranges and that in general that highlighting code is reasonable, it hasn't been touched in significant ways for a long time</li>
<li>we get an exploratory PR by <span class="user-mention" data-user-id="248906">@cjgillot</span> which changes lowering of expressions to be more reliable with respect to source map. I'd love to pick up this work, if possible. </li>
<li>we have <strong>a lot</strong> of technical debt around handing configuration</li>
<li>and I also want to move impl collection to crate_def_map</li>
</ul>



<a name="188385893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188385893" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188385893">(Feb 17 2020 at 15:15)</a>:</h4>
<p>And I would also want to raise a discussion on moving semantic errors reporting to ra_parser, though I always end up postponing this...</p>



<a name="188385994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188385994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188385994">(Feb 17 2020 at 15:16)</a>:</h4>
<p>Yep, we at least need to bring that syntax error refactoring PR over the finish line</p>



<a name="188386093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188386093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188386093">(Feb 17 2020 at 15:17)</a>:</h4>
<p>I think I will skip the part of adding tests for semantic validation and I'll just add some tests to that weird (to me) bug with merging errors on reprasing (which our current test don't test in anyway) and then I'll merge it.</p>



<a name="188386327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188386327" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188386327">(Feb 17 2020 at 15:20)</a>:</h4>
<p>Paying down tech debt is a really great idea</p>



<a name="188386669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188386669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188386669">(Feb 17 2020 at 15:24)</a>:</h4>
<p>would implementing the lsp configuration bits help the config design? i feel like some stuff might fall out of that</p>



<a name="188386678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188386678" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188386678">(Feb 17 2020 at 15:24)</a>:</h4>
<p>Probably!</p>



<a name="188386698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188386698" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188386698">(Feb 17 2020 at 15:24)</a>:</h4>
<p>I still haven't looked at how LSP configuration should be handled :-(</p>



<a name="188386850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188386850" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188386850">(Feb 17 2020 at 15:26)</a>:</h4>
<p>@matklad <a href="https://github.com/microsoft/language-server-protocol/issues/676" target="_blank" title="https://github.com/microsoft/language-server-protocol/issues/676">https://github.com/microsoft/language-server-protocol/issues/676</a> gives some clarification</p>



<a name="188386884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188386884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188386884">(Feb 17 2020 at 15:27)</a>:</h4>
<p>whereas things sent in the initialize request are more like command line arguments</p>



<a name="188387343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188387343" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188387343">(Feb 17 2020 at 15:33)</a>:</h4>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/3139" target="_blank" title="https://github.com/rust-lang/rust/issues/3139">#3139</a> bump VS Code requirenment to 1.41. </p>
</blockquote>
<p>This is 1.42 actually <span class="user-mention" data-user-id="133169">@matklad</span></p>



<a name="188387423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188387423" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188387423">(Feb 17 2020 at 15:34)</a>:</h4>
<p>fixed, thanks!</p>



<a name="188387502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188387502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188387502">(Feb 17 2020 at 15:35)</a>:</h4>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/3174" target="_blank" title="https://github.com/rust-lang/rust/issues/3174">#3174</a>, <a href="https://github.com/rust-lang/rust/issues/3174" target="_blank" title="https://github.com/rust-lang/rust/issues/3174">#3174</a> improve debugging settings for VS Code extension.</p>
</blockquote>
<p>Here is a typo</p>



<a name="188389644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188389644" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188389644">(Feb 17 2020 at 16:06)</a>:</h4>
<p>Is it normal that some of the RA crates take ages to codegen?</p>



<a name="188389744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188389744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188389744">(Feb 17 2020 at 16:07)</a>:</h4>
<p>I guess they depend on generics-heavy code? I'm thinking of <code>ra_ide</code>, <code>ra_assists</code>, <code>ra_lsp_server</code> and <code>ra_ide_db</code>, mostly</p>



<a name="188389796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188389796" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188389796">(Feb 17 2020 at 16:08)</a>:</h4>
<p>Yeah, I was just looking at <code>-Z timing</code> earlier today</p>



<a name="188389803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188389803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188389803">(Feb 17 2020 at 16:08)</a>:</h4>
<p><code>ra_syntax</code> builds in 8.6s, while <code>ra_assists</code> takes 74.8s</p>



<a name="188389848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188389848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188389848">(Feb 17 2020 at 16:09)</a>:</h4>
<p>I think that's expected: <code>ra_assists</code> is the first crate to monomorphise the ton of db queries</p>



<a name="188390410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390410">(Feb 17 2020 at 16:17)</a>:</h4>
<p>This is how it looks now:</p>
<p><a href="/user_uploads/4715/biBX36ucI0UqAEywhDIWpLGo/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/biBX36ucI0UqAEywhDIWpLGo/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/4715/biBX36ucI0UqAEywhDIWpLGo/pasted_image.png"></a></div>



<a name="188390448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390448" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390448">(Feb 17 2020 at 16:17)</a>:</h4>
<p>How did you build that tree?</p>



<a name="188390519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390519">(Feb 17 2020 at 16:18)</a>:</h4>
<p><code>cargo build -Z timings --release</code></p>



<a name="188390557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390557">(Feb 17 2020 at 16:19)</a>:</h4>
<p>is that still nightly only?</p>



<a name="188390561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390561">(Feb 17 2020 at 16:19)</a>:</h4>
<p>You could argue that <code>ra_cli</code> is not needed when building the LSP server, but..</p>



<a name="188390583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390583" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390583">(Feb 17 2020 at 16:19)</a>:</h4>
<p>Uh, I don't know. I think every <code>-Z</code> flag is nightly-only.</p>



<a name="188390720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390720">(Feb 17 2020 at 16:21)</a>:</h4>
<p>Maybe some generic code (the queries) is instantiated in every one of those crates? Could it be extracted into a separate crate that the others would depend upon instead?</p>



<a name="188390847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390847">(Feb 17 2020 at 16:23)</a>:</h4>
<p>Yeah, I think this is actually what might happen <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> </p>
<p>Without <code>-Zshare-generics</code> with <code>--release</code>, each crate does its own instantiatiosn</p>



<a name="188390970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188390970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188390970">(Feb 17 2020 at 16:24)</a>:</h4>
<p>Let me try that quickly</p>



<a name="188391107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391107">(Feb 17 2020 at 16:26)</a>:</h4>
<p>ugh this reminds me of the "instantiate all possibly C++ templates in one .cpp file"</p>



<a name="188391137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391137">(Feb 17 2020 at 16:27)</a>:</h4>
<p>Yeah, bit better: <a href="/user_uploads/4715/5fSITi39XIJtCzCnwIoQhTUO/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/5fSITi39XIJtCzCnwIoQhTUO/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/4715/5fSITi39XIJtCzCnwIoQhTUO/pasted_image.png"></a></div>



<a name="188391156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391156">(Feb 17 2020 at 16:27)</a>:</h4>
<p>They're more than twice as fast now and the full build is 1m 29s vs. 2m 33s.</p>



<a name="188391239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391239" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391239">(Feb 17 2020 at 16:28)</a>:</h4>
<p>wow is that from a clean build?</p>



<a name="188391248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391248">(Feb 17 2020 at 16:28)</a>:</h4>
<p>Yeah</p>



<a name="188391277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391277" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391277">(Feb 17 2020 at 16:29)</a>:</h4>
<p>(Sorry for hijacking the weekly sync thread, I tried to disjoin it, but I don't have permissions or I don't know how to)</p>



<a name="188391515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391515" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391515">(Feb 17 2020 at 16:32)</a>:</h4>
<p><span class="user-mention" data-user-id="203546">@Laurențiu Nicola</span> what was that? Just <code>-Zshare-generics</code>?</p>



<a name="188391530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188391530" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188391530">(Feb 17 2020 at 16:32)</a>:</h4>
<p>Are there any noticiable perf difference with <code>analysis-stats</code>?</p>



<a name="188392333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188392333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188392333">(Feb 17 2020 at 16:45)</a>:</h4>
<p>Yeah, it's much slower:</p>
<div class="codehilite"><pre><span></span>Database loaded, 191 roots, 158.113416ms
Crates in this dir: 30
Total modules found: 386
Total declarations: 6345
Total functions: 4740
Item Collection: 9.852548272s, 0b allocated 0b resident
Total expressions: 132346
Expressions of unknown type: 5431 (4%)
Expressions of partially unknown type: 3953 (2%)
Type mismatches: 266
Inference: 22.71735936s, 0b allocated 0b resident
Total: 32.569912625s, 0b allocated 0b resident

Database loaded, 191 roots, 1.343697027s
Crates in this dir: 30
Total modules found: 386
Total declarations: 6345
Total functions: 4740
Item Collection: 12.167735551s, 0b allocated 0b resident
Total expressions: 132346
Expressions of unknown type: 5423 (4%)
Expressions of partially unknown type: 3861 (2%)
Type mismatches: 266
Inference: 34.395031049s, 0b allocated 0b resident
Total: 46.562773422s, 0b allocated 0b resident
</pre></div>



<a name="188392451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188392451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188392451">(Feb 17 2020 at 16:46)</a>:</h4>
<p>Best of three runs. With <code>-Z share-generics</code> the first run was the fastest, which explains the larger "database loaded" time. The second run was:</p>
<div class="codehilite"><pre><span></span>Database loaded, 191 roots, 178.380958ms
Crates in this dir: 30
Total modules found: 386
Total declarations: 6345
Total functions: 4740
Item Collection: 12.137240132s, 0b allocated 0b resident
Total expressions: 132346
Expressions of unknown type: 5429 (4%)
Expressions of partially unknown type: 3944 (2%)
Type mismatches: 266
Inference: 34.593159173s, 0b allocated 0b resident
Total: 46.730405574s, 0b allocated 0b resident
</pre></div>



<a name="188934060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188934060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188934060">(Feb 24 2020 at 15:07)</a>:</h4>
<p>Oups, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> almost missed today's sync up ;)</p>



<a name="188934079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188934079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188934079">(Feb 24 2020 at 15:07)</a>:</h4>
<p>Today's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/02/24/changelog-13.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/02/24/changelog-13.html">https://rust-analyzer.github.io/thisweek/2020/02/24/changelog-13.html</a></p>



<a name="188934153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188934153" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188934153">(Feb 24 2020 at 15:08)</a>:</h4>
<p>It is a mostly quiet release with refactorings and bugfixes</p>



<a name="188934229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188934229" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188934229">(Feb 24 2020 at 15:09)</a>:</h4>
<p>Unfortunatelly, I wasn't able to complete many refactorings I've planed for the previous week</p>



<a name="188934244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188934244" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188934244">(Feb 24 2020 at 15:09)</a>:</h4>
<p>But the biggest one, <a href="https://github.com/rust-analyzer/rust-analyzer/pull/3222" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/pull/3222">https://github.com/rust-analyzer/rust-analyzer/pull/3222</a>, shapes quite nicely so far</p>



<a name="188934873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188934873" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188934873">(Feb 24 2020 at 15:16)</a>:</h4>
<p><code>rust-analyzer.lspServerPath</code> was actually <code>raLspServerPath</code>...</p>



<a name="188935425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188935425" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188935425">(Feb 24 2020 at 15:22)</a>:</h4>
<p>Do people really use such  simple assits like remove mut? It's simple to just press <code>Ctrl+Backspace</code> to remove the mut symbol in one go. Such assists (even maybe useful for someone) clutter the assists selection menu. Should we provide feature flags for them?</p>



<a name="188935753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188935753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188935753">(Feb 24 2020 at 15:26)</a>:</h4>
<p>I use it, because it deals with whitespace. This assist is only available only when the cursor is on the <code>mut</code>, so it dosn't clutters things that much</p>



<a name="188935773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188935773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188935773">(Feb 24 2020 at 15:26)</a>:</h4>
<p>that's the most cool thing about asssist UX: they are only available in context where they make sense</p>



<a name="188936653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188936653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188936653">(Feb 24 2020 at 15:36)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> if we could reliably detect whether the <code>mut</code> is unused, would you only show the assist in those cases?</p>



<a name="188937014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188937014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188937014">(Feb 24 2020 at 15:41)</a>:</h4>
<p>The lsp allows for that. I think the next vscode release will allow for displaying assists disabled with a reason why it's not available.</p>



<a name="188937648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188937648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188937648">(Feb 24 2020 at 15:48)</a>:</h4>
<p>Does it work when you place the caret on variable name symbol too? Otherwise for me this is just a shortcut which is not faster then <code>Ctrl+Backspace</code></p>



<a name="188937667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188937667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188937667">(Feb 24 2020 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> so I believe this needs to be both a quick fix for an error, but also an asssit/refactoring</p>



<a name="188937711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188937711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188937711">(Feb 24 2020 at 15:49)</a>:</h4>
<p>The original usecase which prompted me was turning <code>fn smth(&amp;mut self)</code> int <code>fn smth(&amp;self)</code></p>



<a name="188937740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188937740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188937740">(Feb 24 2020 at 15:49)</a>:</h4>
<blockquote>
<p>Otherwise for me this is just a shortcut which is not faster then Ctrl+Backspace</p>
</blockquote>
<p>It is faster for me, because I don't have to fix up the whitespace</p>



<a name="188937872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188937872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188937872">(Feb 24 2020 at 15:50)</a>:</h4>
<p>I press <code>Ctrl+Backspace</code> two times or <code>Ctrl+Backspace .. Ctrl+Delete</code>. For the assits its not faster, you press <code>Alt+Enter</code> and go through the list of assits to find <code>remove mut</code></p>



<a name="188938059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/188938059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#188938059">(Feb 24 2020 at 15:52)</a>:</h4>
<p>Well I won't argue if it's faster for you. You said that not all users want all features, that's why we implement feature flags</p>



<a name="189425016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189425016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ice1000 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189425016">(Mar 01 2020 at 08:18)</a>:</h4>
<p>Hi, seems the vscode marketplace plugin is not updated since 24 Feb. Should we update it?</p>



<a name="189426707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189426707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189426707">(Mar 01 2020 at 09:21)</a>:</h4>
<p>Updates are done weekly, on Monday, around 1600 CET</p>



<a name="189498692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189498692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189498692">(Mar 02 2020 at 15:02)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> there's some annoying problems with release today, it'll be slightly late :(</p>



<a name="189498747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189498747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189498747">(Mar 02 2020 at 15:03)</a>:</h4>
<p>What's wrong?</p>



<a name="189498930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189498930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189498930">(Mar 02 2020 at 15:04)</a>:</h4>
<p>Oh, I see this is about the semantic highlighting</p>



<a name="189499038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499038">(Mar 02 2020 at 15:05)</a>:</h4>
<p>Many things are wrong:</p>
<ul>
<li>you can't just comment out <code>propsedApi: "true"</code> in package.json, because json does not have comments</li>
<li>uploading artifact fails with some errors</li>
<li>and I think some other issue I've forgout about</li>
</ul>



<a name="189499299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499299">(Mar 02 2020 at 15:08)</a>:</h4>
<p>I'm surprised that can't be commented out. I thought they supported comments</p>



<a name="189499331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499331">(Mar 02 2020 at 15:08)</a>:</h4>
<p>VS does, npm does not</p>



<a name="189499333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499333">(Mar 02 2020 at 15:08)</a>:</h4>
<p>Maybe we should not hurry? The world is not going nowhere without the release at 5 pm</p>



<a name="189499382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499382">(Mar 02 2020 at 15:09)</a>:</h4>
<p>Making releases on time is much easier for me than making releases "when it's ready"</p>



<a name="189499414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499414">(Mar 02 2020 at 15:09)</a>:</h4>
<p>anyway, that probably doesn't fir the weekly sync-up discussion</p>



<a name="189499493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499493" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499493">(Mar 02 2020 at 15:10)</a>:</h4>
<p>I mean, let's just give it a good thought to tackle the deployment bugs and not put hotfixes to release branch</p>



<a name="189499722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499722">(Mar 02 2020 at 15:12)</a>:</h4>
<p>So, the two biggest highlights of this week are:</p>
<ul>
<li>new implementation of syntax highlighting! I am super excited to finally see this in VS Code, as this is the feature which exercise IDEs best (you need to do everything to highlight anything). I also hope that it'll get to other editors soon enought. </li>
<li>the new <code>hir::Semantics</code> API for conveniently bridging syntax-based IDE world and semantics-based hir world</li>
</ul>



<a name="189499953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189499953" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189499953">(Mar 02 2020 at 15:14)</a>:</h4>
<blockquote>
<p>I mean, let's just give it a good thought to tackle the deployment bugs and not put hotfixes to release branch</p>
</blockquote>
<p>For me it's easier to get the releas out of the door and then fix stuff in between releases. I am also not feeling too comfortable arguing about philosophical issues regarding the release process :)</p>



<a name="189500380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189500380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189500380">(Mar 02 2020 at 15:18)</a>:</h4>
<p>But isn't the release already out?</p>



<a name="189500450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189500450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189500450">(Mar 02 2020 at 15:19)</a>:</h4>
<p>Yup, it's out now! It just required some manual pushing to get to this state :D</p>



<a name="189500466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189500466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189500466">(Mar 02 2020 at 15:19)</a>:</h4>
<p>Is hir::Semantics the implementation of SyntaxNode global identity?</p>



<a name="189500467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189500467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189500467">(Mar 02 2020 at 15:19)</a>:</h4>
<p>Ah :D</p>



<a name="189500577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189500577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189500577">(Mar 02 2020 at 15:20)</a>:</h4>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> yeah, sort of. I really should blog about this pattern, as it is quite unusual, and is used in both Roslyn and Kotlin</p>



<a name="189500685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189500685" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189500685">(Mar 02 2020 at 15:21)</a>:</h4>
<p>Hmm, that didn't take so much to rewrite as you initially supposed, I guess</p>



<a name="189501195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/189501195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#189501195">(Mar 02 2020 at 15:26)</a>:</h4>
<p>@matklad you forgot to mention the change log :)</p>
<p><a href="https://rust-analyzer.github.io/thisweek/2020/03/02/changelog-14.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/03/02/changelog-14.html">https://rust-analyzer.github.io/thisweek/2020/03/02/changelog-14.html</a></p>



<a name="190071625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190071625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190071625">(Mar 09 2020 at 14:04)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> time for another weekly sync up</p>



<a name="190071642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190071642" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190071642">(Mar 09 2020 at 14:04)</a>:</h4>
<p>(which might be an hour earlier, depending on DST in your timezone)</p>



<a name="190071653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190071653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190071653">(Mar 09 2020 at 14:04)</a>:</h4>
<p>I was just wondering</p>



<a name="190071657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190071657" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190071657">(Mar 09 2020 at 14:04)</a>:</h4>
<p>Today's release: <a href="https://rust-analyzer.github.io/thisweek/2020/03/09/changelog-15.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/03/09/changelog-15.html">https://rust-analyzer.github.io/thisweek/2020/03/09/changelog-15.html</a></p>



<a name="190071751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190071751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190071751">(Mar 09 2020 at 14:05)</a>:</h4>
<p>Thanks to work by <span class="user-mention" data-user-id="129457">@Florian Diebold</span> and <span class="user-mention" data-user-id="216201">@Edwin Cheng</span>  (and many others, really) we now do code completion inside macro calls. This feels like a milestone to me :D</p>



<a name="190071885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190071885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190071885">(Mar 09 2020 at 14:06)</a>:</h4>
<p>very cool indeed</p>



<a name="190071928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190071928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190071928">(Mar 09 2020 at 14:07)</a>:</h4>
<p>Another curios thing is that we've <strong>disabled</strong> caching of Chalk, which improved perf and memory usage</p>



<a name="190072051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072051">(Mar 09 2020 at 14:08)</a>:</h4>
<p>I've also mostly finished the most pressing cleanups/refactorings, and am wondering what should I personally focus on next</p>



<a name="190072141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072141">(Mar 09 2020 at 14:09)</a>:</h4>
<p>Do you have a kind of "short list"?</p>



<a name="190072282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072282">(Mar 09 2020 at 14:10)</a>:</h4>
<p>Here are some things I want to do:</p>
<ul>
<li><a href="https://github.com/rust-analyzer/rust-analyzer/issues/3485" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/3485">https://github.com/rust-analyzer/rust-analyzer/issues/3485</a> -- another IR to work-around the problem that LRU doesn't really work that great for from-scratch analysis </li>
<li>adding support for reference values in sasal (&amp;T instaead of Arc&lt;T&gt;)</li>
<li>making rust-analyzer less generic to improve compile times</li>
<li>refactoring the way we handle configuration, it is confusing to users</li>
<li>starting to actually write some code for parser library-ification</li>
</ul>



<a name="190072361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072361" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072361">(Mar 09 2020 at 14:11)</a>:</h4>
<p>I'm skimming that 1st issue</p>



<a name="190072540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072540">(Mar 09 2020 at 14:13)</a>:</h4>
<p>I think I'd love to prioritize improving compile times (as it slows down everyone working on rust-analyzer), but the problem here is that I don't have any specific ideas here, except "make salsa database a concrete type"</p>



<a name="190072598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072598">(Mar 09 2020 at 14:13)</a>:</h4>
<p>I'm also wondering about -- more generally -- the idea of replacing RLS with rust-analyzer and what that really takes. We've kind of stalled out on that (sorry), but it seems like we're in a sort of weird spot where it's clear that rust-analyzer has the momentum but we've not talked about the overall transition story.</p>



<a name="190072651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072651" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072651">(Mar 09 2020 at 14:14)</a>:</h4>
<p>How much have you tried profiling compilation?</p>



<a name="190072668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072668">(Mar 09 2020 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> for the context, we've recently refactored rust-analyzer's IDE laye into <code>ra_ide_db</code>, which defines a concrete salsa database, and <code>ra_assist</code>, <code>ra_ide</code> crates, whcih provides features using that concrete DB</p>



<a name="190072716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072716" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072716">(Mar 09 2020 at 14:14)</a>:</h4>
<p>The problem with that is that now, I think, all three crates monomorphise type inference for the same types</p>



<a name="190072723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072723">(Mar 09 2020 at 14:14)</a>:</h4>
<p>(in `--release)</p>



<a name="190072820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072820" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072820">(Mar 09 2020 at 14:15)</a>:</h4>
<blockquote>
<p>How much have you tried profiling compilation?</p>
</blockquote>
<p>I've done <code>cargo -Z timings</code>, and it shows that each of the three crates I've mentioned above takes huge time to compile</p>



<a name="190072836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072836">(Mar 09 2020 at 14:15)</a>:</h4>
<p>TBH, I don't feel the compile times are a problem for me personally right now. Check is fast enough, I usually run single tests while developing, then all the tests for the crate, and a full <code>cargo test</code> once the PR is ready</p>



<a name="190072938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072938" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072938">(Mar 09 2020 at 14:16)</a>:</h4>
<p>I build in release pretty often, and it's easy 3-ish minutes after modifications to non-leaf crates.</p>



<a name="190072970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190072970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190072970">(Mar 09 2020 at 14:16)</a>:</h4>
<p>I agree that it's not <strong>too</strong> bad at the moment, but it also won't get better unless we make it.</p>



<a name="190073249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073249" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073249">(Mar 09 2020 at 14:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190072820" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190072820">said</a>:</p>
<blockquote>
<blockquote>
<p>How much have you tried profiling compilation?</p>
</blockquote>
<p>I've done <code>cargo -Z timings</code>, and it shows that each of the three crates I've mentioned above takes huge time to compile</p>
</blockquote>
<p>I was thinking more of the self-profile</p>



<a name="190073273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073273" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073273">(Mar 09 2020 at 14:19)</a>:</h4>
<p>I believe it should be possible to drill in and get more details</p>



<a name="190073280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073280">(Mar 09 2020 at 14:19)</a>:</h4>
<p>and validate e.g. the hypothesis</p>



<a name="190073302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073302" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073302">(Mar 09 2020 at 14:19)</a>:</h4>
<p>that it is due to things being monomorphized multiple times</p>



<a name="190073364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073364">(Mar 09 2020 at 14:20)</a>:</h4>
<p>if it is, I'm not sure what I'd recommend but I wonder if we can come up with some kind of strategy that makes that less problematic</p>



<a name="190073398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073398" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073398">(Mar 09 2020 at 14:20)</a>:</h4>
<p>Yeah, it's a very good call to actually validate what's happening</p>



<a name="190073416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073416">(Mar 09 2020 at 14:20)</a>:</h4>
<p>side note that feel like -- perhaps because of my emacs setup -- I'm not experienced <em>any</em> of these improvements</p>



<a name="190073454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073454">(Mar 09 2020 at 14:21)</a>:</h4>
<p>when I use rust-analyzer on rustc, it's (honestly) a big step back from CTAGS in terms of successful jump-to-def, for example</p>



<a name="190073493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073493" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073493">(Mar 09 2020 at 14:21)</a>:</h4>
<p>part of this is that I can't jump-to-def from compilation errors and a few other places, because rust-analyzer isn't "hooked in" there, I could probably fix this</p>



<a name="190073524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073524" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073524">(Mar 09 2020 at 14:21)</a>:</h4>
<p>I'm wondering ifmy setup is wrong, but I'm also thinking that I will try to change my dev workflow for things like chalk to use vscode</p>



<a name="190073542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073542">(Mar 09 2020 at 14:21)</a>:</h4>
<p>because I feel like I have less of a "visceral" feel for what the problems are</p>



<a name="190073549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073549">(Mar 09 2020 at 14:21)</a>:</h4>
<p>(or lack of problems)</p>



<a name="190073646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073646">(Mar 09 2020 at 14:22)</a>:</h4>
<p>though it also reminds me of <span class="user-mention" data-user-id="116083">@pnkfelix</span>'s thoughts about documenting the "best practices" for setting up a rustc rust-analyzer experience</p>



<a name="190073662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073662" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073662">(Mar 09 2020 at 14:22)</a>:</h4>
<p>(in various editors)</p>



<a name="190073728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073728" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073728">(Mar 09 2020 at 14:23)</a>:</h4>
<p>Yeah, for goto def, we literally <em>fall-back</em> to ctags-like index, so it shouldn't be that bad</p>



<a name="190073864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073864">(Mar 09 2020 at 14:24)</a>:</h4>
<p>I'm also curious <span class="user-mention" data-user-id="133169">@matklad</span> whether you see any value to trying to finish off that RFC we were working on. Specifically, I think the RFC would be about the plan to (1) embrace rust-analyzer as the  editor of choice; (2) discuss how we will transition from RLS to rust-analyzer (e.g., rustup integration); (3) ratify perhaps the idea of <em>not</em> using save-analysis (and hence losing precise find-all-usages for the time being). At least (3) seemed to be the way you were leaning when we last discussed it and I think that I've come around to it.</p>



<a name="190073919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190073919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190073919">(Mar 09 2020 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190073728" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190073728">said</a>:</p>
<blockquote>
<p>Yeah, for goto def, we literally <em>fall-back</em> to ctags-like index, so it shouldn't be that bad</p>
</blockquote>
<p>I'll try to take more careful note of where it doesn't work</p>



<a name="190074002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074002">(Mar 09 2020 at 14:25)</a>:</h4>
<p>If you are interested in trying to finish off the RFC, I think we could try to schedule some block of time to work on it. If you think it's not a good use of time, I'd like to briefly hear why =)</p>



<a name="190074009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074009" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074009">(Mar 09 2020 at 14:25)</a>:</h4>
<p>though I can imagine reasons</p>



<a name="190074010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074010">(Mar 09 2020 at 14:25)</a>:</h4>
<p>It might also make sense to chat directly with <span class="user-mention" data-user-id="129457">@Florian Diebold</span> about emacs support. I've honestly haven't tried anything besides goto def</p>



<a name="190074085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074085" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074085">(Mar 09 2020 at 14:26)</a>:</h4>
<p>I do think it's a good idea to finish the RFC, for the purpose of informing community.</p>



<a name="190074139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074139" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074139">(Mar 09 2020 at 14:26)</a>:</h4>
<p>I'd like to put some time into that</p>



<a name="190074164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074164">(Mar 09 2020 at 14:26)</a>:</h4>
<p>I am not sure the RFC process will help us decide on any open questions, but it might</p>



<a name="190074194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074194">(Mar 09 2020 at 14:27)</a>:</h4>
<p>I'm curious if you think it'd be better for the two of us to e.g. schedule a 2h block or something to try and finish it off, or if it'd be better to work a bit independently</p>



<a name="190074221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074221" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074221">(Mar 09 2020 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190074164" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190074164">said</a>:</p>
<blockquote>
<p>I am not sure the RFC process will help us decide on any open questions, but it might</p>
</blockquote>
<p>maybe not the RFC process itself BUT</p>



<a name="190074227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074227" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074227">(Mar 09 2020 at 14:27)</a>:</h4>
<p>I think the process of writing out the questions</p>



<a name="190074247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074247" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074247">(Mar 09 2020 at 14:27)</a>:</h4>
<p>and perhaps touching base with others on tools team etc</p>



<a name="190074254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074254" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074254">(Mar 09 2020 at 14:27)</a>:</h4>
<p>very well could :)</p>



<a name="190074265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074265">(Mar 09 2020 at 14:27)</a>:</h4>
<p>that might hapen in RFC thread but might also happen before</p>



<a name="190074380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074380">(Mar 09 2020 at 14:28)</a>:</h4>
<blockquote>
<p>e.g. schedule a 2h block or something to try and finish it off,</p>
</blockquote>
<p>Yeah, I think some sync time would be helpful, especially if we literally agree to just publish the thing after two hours end :)</p>



<a name="190074477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074477">(Mar 09 2020 at 14:29)</a>:</h4>
<p>Ie, it is helpful to both once again survery the ground (we've sort-of changed our mind last time, we might do it once again) and to put a deadline</p>



<a name="190074730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074730">(Mar 09 2020 at 14:31)</a>:</h4>
<p>OK, let's block out some time.</p>



<a name="190074759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190074759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190074759">(Mar 09 2020 at 14:31)</a>:</h4>
<p>I'm looking at my calendar :)</p>



<a name="190075141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190075141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190075141">(Mar 09 2020 at 14:34)</a>:</h4>
<p>tomorrow starting at the same time as this sync could work</p>



<a name="190075219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190075219" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190075219">(Mar 09 2020 at 14:34)</a>:</h4>
<p>Works for me!</p>



<a name="190117077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190117077" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190117077">(Mar 09 2020 at 21:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190073249" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/190073249">said</a>:</p>
<div class="codehilite"><pre><span></span>I was thinking more of the self-profile
</pre></div>


<p>I tried that, but I'm not sure how to interpret the output. It looks like ThinLTO takes about half of the compile time (40s) of that/those crates and it has poor parallelism, but I might be looking at it the wrong way.</p>



<a name="190725648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190725648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190725648">(Mar 16 2020 at 14:02)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's a sync-up time again</p>



<a name="190725722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190725722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190725722">(Mar 16 2020 at 14:02)</a>:</h4>
<p>Today's release notes: <a href="https://rust-analyzer.github.io/thisweek/2020/03/16/changelog-16.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/03/16/changelog-16.html">https://rust-analyzer.github.io/thisweek/2020/03/16/changelog-16.html</a></p>



<a name="190725780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190725780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190725780">(Mar 16 2020 at 14:03)</a>:</h4>
<p>There is a bunch of exciting stuff happening. So much, in fact, that I am not sure I am on top of everything (had a busy week last week)</p>



<a name="190726175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190726175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190726175">(Mar 16 2020 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="216201">@Edwin Cheng</span> and <span class="user-mention" data-user-id="212936">@Emil Lauridsen</span> are doing amazing work at supporting <code>include!(concat!(env!))</code> macro.</p>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> implemented nightly updates</p>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> did some exciting work with making macro by example expansion resilient to errors (which helps completion)</p>
<p>And I've investigated compile times a bit, with moderate success.</p>



<a name="190726254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190726254" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190726254">(Mar 16 2020 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> and me also worked a bit on the RFC about further IDE support</p>



<a name="190729361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190729361" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190729361">(Mar 16 2020 at 14:31)</a>:</h4>
<p>FYI with vscode 1.43.1 it looks like you'll have to be on a default theme (or opt into it in a custom theme) to get semantic highlighting until they open it up: <a href="https://github.com/microsoft/vscode/pull/92737" target="_blank" title="https://github.com/microsoft/vscode/pull/92737">https://github.com/microsoft/vscode/pull/92737</a></p>



<a name="190730759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190730759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190730759">(Mar 16 2020 at 14:39)</a>:</h4>
<p>Yeah, recently switched to <code>vscode-insiders</code> to test that. This is the killer feature for me, big thanks <span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> !</p>



<a name="190731182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190731182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190731182">(Mar 16 2020 at 14:42)</a>:</h4>
<p>I also started work on resurrecting a recursive solver for Chalk, as a possible solution to the associated types problem, before getting side-tracked with the macros thing <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> so I hope to finish the macros PR soon and get back to that</p>



<a name="190731645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190731645" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190731645">(Mar 16 2020 at 14:45)</a>:</h4>
<p>I am working on a proc-macro support POC (custom-derive) , I think I will finish in these 2 weeks :)</p>



<a name="190732064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/190732064" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#190732064">(Mar 16 2020 at 14:48)</a>:</h4>
<p>Also a note about nightlys. There is a slight problem that the weekly release is published from the fresh master branch, but the current nightly release doesn't contain last changes. This means that by switching to the nightly channel right now you are going to downgrade to the version without nightlys support ;D</p>



<a name="191476694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191476694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191476694">(Mar 23 2020 at 14:02)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> ! It's time for another sync-up</p>



<a name="191476752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191476752" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191476752">(Mar 23 2020 at 14:03)</a>:</h4>
<p>The release is still in progress: have to do some last-minute yaml fixes</p>



<a name="191477016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477016">(Mar 23 2020 at 14:05)</a>:</h4>
<p>The three biggest things this week, I think, are:</p>
<ul>
<li>"finished" support for <code>include!(concat!(env!(OUT_DIR)))</code>, by relying on <code>cargo check</code> to learn about <code>OUT_DIR</code></li>
<li>Improvements to macro expansion, which now recovers from errors, which helps completion</li>
<li>we've switched to using <code>&amp;dyn DB</code> internally, in order to reduce compile times</li>
</ul>



<a name="191477068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477068" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477068">(Mar 23 2020 at 14:05)</a>:</h4>
<p>Release failed :c</p>



<a name="191477203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477203" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477203">(Mar 23 2020 at 14:06)</a>:</h4>
<p>haha, classic</p>



<a name="191477378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477378">(Mar 23 2020 at 14:07)</a>:</h4>
<p>Was changing to <code>&amp;dyn DB</code> difficult, <span class="user-mention" data-user-id="133169">@matklad</span> ?</p>



<a name="191477635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477635">(Mar 23 2020 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> not really.</p>



<a name="191477689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477689">(Mar 23 2020 at 14:09)</a>:</h4>
<p>We were unable to do that originally because we had some cleverness around the <code>requires</code></p>



<a name="191477784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477784" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477784">(Mar 23 2020 at 14:10)</a>:</h4>
<p>But, when we split our hir into many crates early this year, we removed <code>requires</code> in favor of simpler design</p>



<a name="191477844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477844" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477844">(Mar 23 2020 at 14:10)</a>:</h4>
<p>So now switch was possible, albeit it required some explicit upcasting of trait objetcs</p>



<a name="191477882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477882">(Mar 23 2020 at 14:11)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/blob/aaa6961aa6d19b405dd2e837a09ac96ed6ace995/crates/ra_hir_ty/src/db.rs#L23" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/blob/aaa6961aa6d19b405dd2e837a09ac96ed6ace995/crates/ra_hir_ty/src/db.rs#L23">https://github.com/rust-analyzer/rust-analyzer/blob/aaa6961aa6d19b405dd2e837a09ac96ed6ace995/crates/ra_hir_ty/src/db.rs#L23</a></p>



<a name="191477915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191477915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191477915">(Mar 23 2020 at 14:11)</a>:</h4>
<p>(<code>Upcast&lt;dyn DefDB&gt;</code> is the upcasing bit)</p>



<a name="191478275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191478275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191478275">(Mar 23 2020 at 14:14)</a>:</h4>
<p>interesting</p>



<a name="191478295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191478295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191478295">(Mar 23 2020 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> the (not super rigorously measured) effects of the switch are:</p>
<ul>
<li>33% faster release build</li>
<li>slightly worse/same perf</li>
<li>no changes for debug build</li>
<li>slightly smaller binary</li>
</ul>



<a name="191478341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191478341" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191478341">(Mar 23 2020 at 14:15)</a>:</h4>
<p>really interesting</p>



<a name="191478357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191478357" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191478357">(Mar 23 2020 at 14:15)</a>:</h4>
<p>33% faster is a pretty big deal</p>



<a name="191478496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191478496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191478496">(Mar 23 2020 at 14:16)</a>:</h4>
<p>Ideally, there could be a compiler option not to monomorphize stuff)</p>



<a name="191478502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191478502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191478502">(Mar 23 2020 at 14:16)</a>:</h4>
<p>yup. cargo timing measures are here: <a href="https://github.com/rust-analyzer/rust-analyzer/issues/1987#issuecomment-598663651" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/issues/1987#issuecomment-598663651">https://github.com/rust-analyzer/rust-analyzer/issues/1987#issuecomment-598663651</a></p>



<a name="191481993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191481993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191481993">(Mar 23 2020 at 14:39)</a>:</h4>
<p>belated changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/03/23/changelog-17.html" target="_blank" title="https://rust-analyzer.github.io/thisweek/2020/03/23/changelog-17.html">https://rust-analyzer.github.io/thisweek/2020/03/23/changelog-17.html</a></p>



<a name="191483162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191483162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191483162">(Mar 23 2020 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span>, what do you think about the proposal from <code>bjorn</code> to use <a href="https://github.com/rust-lang/rust/blob/f4c675c476c18b1a11041193f2f59d695b126bc8/src/tools/compiletest/src/read2.rs" target="_blank" title="https://github.com/rust-lang/rust/blob/f4c675c476c18b1a11041193f2f59d695b126bc8/src/tools/compiletest/src/read2.rs">this bit of code from rustc</a>. Its obvious that the <code>read2()</code> function should be extracted into a reusable module. How do you see doing it?</p>



<a name="191484448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191484448" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191484448">(Mar 23 2020 at 14:55)</a>:</h4>
<p>I think, <em>ideally</em>, this should be somehow exposed on <code>std::process::Command</code> directly, as that's needed for implementation of <code>.output</code> anyway. For the time being, I'm fine with either copy-pasting that bit of code from cargo, or publishing a read2 micro crate. </p>
<p>I'd also love to be able to completely bypass the need to read stdout and stderr in lockstep, but I don't know of that's possible</p>



<a name="191485152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191485152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191485152">(Mar 23 2020 at 15:00)</a>:</h4>
<p>See also <a href="https://github.com/joshtriplett/io-mux" target="_blank" title="https://github.com/joshtriplett/io-mux">https://github.com/joshtriplett/io-mux</a>, which might be a bit more reliable wrt. ordering (but is Linux-only)</p>



<a name="191485355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191485355" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191485355">(Mar 23 2020 at 15:01)</a>:</h4>
<p>ohh, the API is kindof what we want, but the impl is overkill</p>



<a name="191485449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191485449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191485449">(Mar 23 2020 at 15:02)</a>:</h4>
<p>It's not so bad, except for the Linux-only part. That was a <a href="https://github.com/joshtriplett/io-mux/issues/7" target="_blank" title="https://github.com/joshtriplett/io-mux/issues/7">fun one</a> to figure out.</p>



<a name="191487470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191487470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191487470">(Mar 23 2020 at 15:14)</a>:</h4>
<blockquote>
<p>I'd also love to be able to completely bypass the need to read stdout and stderr in lockstep, but I don't know of that's possible</p>
</blockquote>
<p>What's bad in this <code>read2()</code> do you see?</p>



<a name="191488370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/191488370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#191488370">(Mar 23 2020 at 15:20)</a>:</h4>
<p>It's very hard to read like this while preserving the ordering. The code there reads from both pipes, but with no ordering guarantees.</p>



<a name="192251196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192251196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192251196">(Mar 30 2020 at 12:59)</a>:</h4>
<p>(note, due to DST shift, the sync-up starts in an hour)</p>



<a name="192259387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192259387" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192259387">(Mar 30 2020 at 14:01)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> hey, it's time for another meeting!</p>



<a name="192259400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192259400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192259400">(Mar 30 2020 at 14:01)</a>:</h4>
<p>Current changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/03/30/changelog-18.html" title="https://rust-analyzer.github.io/thisweek/2020/03/30/changelog-18.html">https://rust-analyzer.github.io/thisweek/2020/03/30/changelog-18.html</a></p>



<a name="192259890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192259890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192259890">(Mar 30 2020 at 14:04)</a>:</h4>
<p>Some highlights:</p>
<ul>
<li>this release "just worked", without me pushing last-minute changes to <code>release.yml</code></li>
<li><span class="user-mention" data-user-id="216201">@Edwin Cheng</span> did a lot of preliminary work for integrating proc macros</li>
<li>(not big, but important heads up): I've added an <code>stdx</code> crate for dumping misc utilities. Currently, it deals with formatting. I've wanted to move <code>jthread</code> support to it as well, but it is required in the VFS and needs to be a separate crate for this reason.</li>
<li>I am hacking on the new IR which, in theory, should improve performance by making sure that we parse code only once in a typical case</li>
</ul>



<a name="192259982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192259982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192259982">(Mar 30 2020 at 14:05)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> hows the recursive solver going? :)</p>



<a name="192260443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192260443" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192260443">(Mar 30 2020 at 14:08)</a>:</h4>
<p>it's making some kind of progress, there's still a bunch of test failures in Chalk, and performance isn't great, but it does seem to fix <a href="https://github.com/rust-lang-nursery/chalk/issues/234" title="https://github.com/rust-lang-nursery/chalk/issues/234">chalk#234</a> right now...</p>



<a name="192261069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261069">(Mar 30 2020 at 14:13)</a>:</h4>
<p>this is becoming ridiculously awesome</p>



<a name="192261098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261098" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261098">(Mar 30 2020 at 14:13)</a>:</h4>
<p>Minor note that we are beginning another chalk sprint</p>



<a name="192261248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261248">(Mar 30 2020 at 14:14)</a>:</h4>
<p>we posted a <a href="https://blog.rust-lang.org/inside-rust/2020/03/28/traits-sprint-1.html" title="https://blog.rust-lang.org/inside-rust/2020/03/28/traits-sprint-1.html">summary</a> of last sprint and our current thoughts around goals, but I guess this is a chance to ask <span class="user-mention" data-user-id="129457">@Florian Diebold</span> if there are particular things that would help with rust-analyzer -- it'd be good for you and I to sync up some more on the recursive solver, and I guess the other thing would be to put some energy into salsa in terms of extsending the model to support caching?</p>



<a name="192261279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261279" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261279">(Mar 30 2020 at 14:15)</a>:</h4>
<p>(I am reminded I've been hiding from the salsa zulip :eep:)</p>



<a name="192261299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261299">(Mar 30 2020 at 14:15)</a>:</h4>
<p>I wish :eep: was an emoji</p>



<a name="192261372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261372" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261372">(Mar 30 2020 at 14:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/192261248" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/192261248">said</a>:</p>
<blockquote>
<p>it'd be good for you and I to sync up some more on the recursive solver, and I guess the other thing would be to put some energy into salsa in terms of extsending the model to support caching?</p>
</blockquote>
<p>that pretty much, I think <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="192261485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261485">(Mar 30 2020 at 14:16)</a>:</h4>
<p>Yeah, at some point soon (tm), I'd like to maybe rethink salsa's abstractions...</p>



<a name="192261535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261535" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261535">(Mar 30 2020 at 14:16)</a>:</h4>
<p>Specifically, one think I stumble on repeatedly is that we store tree-shaped data in salsa</p>



<a name="192261573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261573" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261573">(Mar 30 2020 at 14:17)</a>:</h4>
<p>Say more?</p>



<a name="192261611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261611" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261611">(Mar 30 2020 at 14:17)</a>:</h4>
<p>(but yes I'm open to revisiting or at least repackaging the core ideas...)</p>



<a name="192261637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261637" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261637">(Mar 30 2020 at 14:17)</a>:</h4>
<p>So, our core <code>crate_def_map</code> query, which takes a crate id as an input, returns a tree of module</p>



<a name="192261666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261666" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261666">(Mar 30 2020 at 14:17)</a>:</h4>
<p>btw <span class="user-mention" data-user-id="133169">@matklad</span> I was hoping that we could finish that RFC this week. I also talked some to <span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> about it.</p>



<a name="192261667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261667">(Mar 30 2020 at 14:18)</a>:</h4>
<p>or a lower-level query which takes a file id, and returns a tree of items</p>



<a name="192261730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261730">(Mar 30 2020 at 14:18)</a>:</h4>
<p>So, the layout in memory is a bunch of small trees</p>



<a name="192261759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261759">(Mar 30 2020 at 14:18)</a>:</h4>
<p>I'd love to see the layout as a bunch of arrays instead</p>



<a name="192261777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261777">(Mar 30 2020 at 14:18)</a>:</h4>
<p>Ie, all modules from all lcrates are stored in a single vec.</p>



<a name="192261847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261847">(Mar 30 2020 at 14:19)</a>:</h4>
<p>ahem, SQLite <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="192261857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261857" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261857">(Mar 30 2020 at 14:19)</a>:</h4>
<p>/me runs away and hides</p>



<a name="192261983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192261983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192261983">(Mar 30 2020 at 14:20)</a>:</h4>
<p>well, yes, persistence is obviously another <strong>huge</strong> missing wall in the whole rust-analyzer castle....</p>



<a name="192262040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262040">(Mar 30 2020 at 14:20)</a>:</h4>
<p>so, you could "easily enough" represent those trees as vectors</p>



<a name="192262057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262057" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262057">(Mar 30 2020 at 14:21)</a>:</h4>
<p>then you have a "bunch of vectors"</p>



<a name="192262065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262065" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262065">(Mar 30 2020 at 14:21)</a>:</h4>
<blockquote>
<p>I was hoping that we could finish that RFC this week</p>
</blockquote>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> are there any specific action items for me in this regard</p>



<a name="192262075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262075">(Mar 30 2020 at 14:21)</a>:</h4>
<p>(this is what we did in Lark for things like fn bodies)</p>



<a name="192262101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262101">(Mar 30 2020 at 14:21)</a>:</h4>
<blockquote>
<p>so, you could "easily enough" represent those trees as vectors</p>
</blockquote>
<p>yes, that's what I actually do</p>



<a name="192262112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262112" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262112">(Mar 30 2020 at 14:21)</a>:</h4>
<p>is that something you've considered and rejected? not satisfying enough..?</p>



<a name="192262115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262115" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262115">(Mar 30 2020 at 14:21)</a>:</h4>
<p>ok</p>



<a name="192262131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262131">(Mar 30 2020 at 14:21)</a>:</h4>
<p>this is purely a matter of performance?</p>



<a name="192262138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262138" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262138">(Mar 30 2020 at 14:21)</a>:</h4>
<p>But, still, a bunch of vectors seems somehow <em>wrong</em></p>



<a name="192262150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262150">(Mar 30 2020 at 14:21)</a>:</h4>
<p>that's not obvious to me :)</p>



<a name="192262154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262154">(Mar 30 2020 at 14:21)</a>:</h4>
<p>but ok</p>



<a name="192262210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262210" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262210">(Mar 30 2020 at 14:22)</a>:</h4>
<p>I'd like to understand better what seems to be missing</p>



<a name="192262230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262230">(Mar 30 2020 at 14:22)</a>:</h4>
<p>One specific problem is that you'd then need to add explicit projections on top</p>



<a name="192262238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262238">(Mar 30 2020 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/192262065" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/192262065">said</a>:</p>
<blockquote>
<p>are there any specific action items for me in this regard</p>
</blockquote>
<p>maybe not, I think we may be just basically "ready" to post</p>



<a name="192262372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262372" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262372">(Mar 30 2020 at 14:23)</a>:</h4>
<blockquote>
<p>One specific problem is that you'd then need to add explicit projections on top</p>
</blockquote>
<p>I was thinking about a cool (but unsure if sound) scheme with reverse, push queries. </p>
<p>Basically, you run "lower_file" query, and that query calls a bunch of <code>set_</code> queries to create children structs, function, modules</p>



<a name="192262472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192262472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192262472">(Mar 30 2020 at 14:24)</a>:</h4>
<p>so, eg, a struct remebers that it was created as a side-effect of lowering file with specific ID.</p>



<a name="192268215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192268215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192268215">(Mar 30 2020 at 15:01)</a>:</h4>
<p>Reminds me a bit of adapton. It sounds plausible but I'm not sure yet what those set queries would do</p>



<a name="192268290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192268290" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192268290">(Mar 30 2020 at 15:01)</a>:</h4>
<p>I still tend to favor a more uniform, pull-based setup, I guess one question I have is: is this primarily an ergonomics concern? An efficiency one?</p>



<a name="192268319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192268319" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192268319">(Mar 30 2020 at 15:01)</a>:</h4>
<p>Anyway, maybe we should split this conversation out to somewhere else I guess</p>



<a name="192268371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192268371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192268371">(Mar 30 2020 at 15:02)</a>:</h4>
<p>/me has to run right now anyway, bbl</p>



<a name="192268694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/192268694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#192268694">(Mar 30 2020 at 15:04)</a>:</h4>
<p>I guess it is primary ergonomics. Definining arenas <a href="https://github.com/rust-analyzer/rust-analyzer/pull/3720/files#diff-b68642e4e4f3f675f63e95bfbd57b885R22-R38" title="https://github.com/rust-analyzer/rust-analyzer/pull/3720/files#diff-b68642e4e4f3f675f63e95bfbd57b885R22-R38">like this</a> seems like a busy-work. I'd love to be able to code and think in terms of entities, without defining storage explicitely.</p>



<a name="193045328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045328" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045328">(Apr 06 2020 at 14:00)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> !</p>



<a name="193045369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045369">(Apr 06 2020 at 14:00)</a>:</h4>
<p>Today's changelog is here: <a href="https://rust-analyzer.github.io/thisweek/2020/04/06/changelog-19.html" title="https://rust-analyzer.github.io/thisweek/2020/04/06/changelog-19.html">https://rust-analyzer.github.io/thisweek/2020/04/06/changelog-19.html</a></p>



<a name="193045438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045438">(Apr 06 2020 at 14:00)</a>:</h4>
<p>Notable things:</p>
<ul>
<li>the second release in a row without manual .yml massaging!</li>
</ul>



<a name="193045483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045483" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045483">(Apr 06 2020 at 14:00)</a>:</h4>
<ul>
<li>reworked configuration and initialization sequence (which is breaking for extensions)</li>
</ul>



<a name="193045538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045538" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045538">(Apr 06 2020 at 14:01)</a>:</h4>
<ul>
<li>more work by <span class="user-mention" data-user-id="216201">@Edwin Cheng</span> on proc-macro support</li>
</ul>



<a name="193045581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045581">(Apr 06 2020 at 14:01)</a>:</h4>
<p>And, most significant I think, <a href="https://github.com/rust-lang/rust/pull/70761" title="https://github.com/rust-lang/rust/pull/70761">https://github.com/rust-lang/rust/pull/70761</a> by <span class="user-mention" data-user-id="279832">@Luca Barbieri</span></p>



<a name="193045675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045675" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045675">(Apr 06 2020 at 14:02)</a>:</h4>
<p>This out-of-the blue PR ports rustc to use <code>ra_parser</code> and <code>ra_syntax</code> syntax trees.</p>



<a name="193045750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045750" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045750">(Apr 06 2020 at 14:02)</a>:</h4>
<p>fascinating</p>



<a name="193045853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045853">(Apr 06 2020 at 14:03)</a>:</h4>
<p>I've tried it out and indeed was able to compile a non-trivial crate with ra as a parser :D</p>



<a name="193045928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193045928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193045928">(Apr 06 2020 at 14:03)</a>:</h4>
<p>Note that PR is rather a proof of concept that something on the road to merging I think</p>



<a name="193046017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046017">(Apr 06 2020 at 14:04)</a>:</h4>
<p>So the main limitation is that it can't parse Rust 2015 syntax, because rust-analyzer only supports the 2018 edition currently</p>



<a name="193046050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046050" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046050">(Apr 06 2020 at 14:04)</a>:</h4>
<p>But it shows that the appoarch of lowering concrece syntax tree to ast (as opposed to even-based parsing approahc) is viable, and actually not that bad, diff wise</p>



<a name="193046082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046082" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046082">(Apr 06 2020 at 14:04)</a>:</h4>
<p>the PR adds about 3k likes to rustc</p>



<a name="193046116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046116" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046116">(Apr 06 2020 at 14:04)</a>:</h4>
<p>not that bad in the sense of "code complexity"?</p>



<a name="193046122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046122" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046122">(Apr 06 2020 at 14:04)</a>:</h4>
<p>idk, merging it might avoid bitrot, though it also adds some cost to keep it up to date</p>



<a name="193046130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046130">(Apr 06 2020 at 14:05)</a>:</h4>
<p>one obvious concern I would have is build times</p>



<a name="193046216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046216">(Apr 06 2020 at 14:05)</a>:</h4>
<p>build times of rustc itself, or compile times of code compiled with rustc?</p>



<a name="193046235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046235" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046235">(Apr 06 2020 at 14:05)</a>:</h4>
<p>the latter</p>



<a name="193046260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046260" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046260">(Apr 06 2020 at 14:05)</a>:</h4>
<p>i.e., adding another IR to be converted requires more allocation, etc,</p>



<a name="193046273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046273" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046273">(Apr 06 2020 at 14:05)</a>:</h4>
<p>The latter is my main concern as well indeed.</p>



<a name="193046296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046296">(Apr 06 2020 at 14:06)</a>:</h4>
<p>so I would expect it to be slower</p>



<a name="193046399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046399" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046399">(Apr 06 2020 at 14:06)</a>:</h4>
<p>I think we can now answer "how much slower" actually</p>



<a name="193046486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046486">(Apr 06 2020 at 14:07)</a>:</h4>
<p>With the caveat that the PR is enables only for real files, as far as i understand. All code generated by macros is still parsed with the old parser</p>



<a name="193046490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046490">(Apr 06 2020 at 14:07)</a>:</h4>
<p>I think the changelog entry with the <code>code-insiders</code> invocation is missing <code>--enable-proposed-api</code></p>



<a name="193046539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046539">(Apr 06 2020 at 14:07)</a>:</h4>
<p>though hopefully we can change that tomorrow when the new stable vscode is supposed to be out</p>



<a name="193046591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046591">(Apr 06 2020 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> fixed!</p>



<a name="193046592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046592" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046592">(Apr 06 2020 at 14:07)</a>:</h4>
<p>we can certainly test the perf of the current PR, if that's what you mean</p>



<a name="193046768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046768" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046768">(Apr 06 2020 at 14:08)</a>:</h4>
<p>yup, that's what I mean, but I am not sure if that would be useful, if we don't use this approach in the first place</p>



<a name="193046797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046797" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046797">(Apr 06 2020 at 14:09)</a>:</h4>
<p>Like, I do think that eventually we should remove ast and just use cst.</p>



<a name="193046825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046825" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046825">(Apr 06 2020 at 14:09)</a>:</h4>
<p>But for transition the event thing seems somewhat more promising.</p>



<a name="193046836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046836">(Apr 06 2020 at 14:09)</a>:</h4>
<p>So, one thing I was thinking about for this week is to try and get back into salsa a bit, and in particular to look into what it would take to support the recursive solver that <span class="user-mention" data-user-id="129457">@Florian Diebold</span> has been working on "properly"</p>



<a name="193046889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193046889" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193046889">(Apr 06 2020 at 14:09)</a>:</h4>
<p>(On that note, I still don't fully understand what you were talking about last time, but I guess maybe we should revisit that over in the Salsa zulip)</p>



<a name="193047019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047019" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047019">(Apr 06 2020 at 14:10)</a>:</h4>
<p>Oh, that actually remins me about a bit which has seen little progress: I wasn't able to put a lot of time into the new item-tree ir unfortunately.</p>



<a name="193047159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047159">(Apr 06 2020 at 14:11)</a>:</h4>
<blockquote>
<p>(On that note, I still don't fully understand what you were talking about last time, but I guess maybe we should revisit that over in the Salsa zulip)</p>
</blockquote>
<p>+1</p>



<a name="193047657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047657" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047657">(Apr 06 2020 at 14:14)</a>:</h4>
<p>Oh and</p>



<a name="193047689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047689">(Apr 06 2020 at 14:15)</a>:</h4>
<p>we should mention that <code>x.py</code> in the compiler should now support things better</p>



<a name="193047739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047739">(Apr 06 2020 at 14:15)</a>:</h4>
<p>Is there a rustc-dev-guide chaper guiding folks in how to setup and use rust-analyezr with rusc?</p>



<a name="193047774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047774">(Apr 06 2020 at 14:15)</a>:</h4>
<p>I remember <span class="user-mention" data-user-id="116083">@pnkfelix</span> talking about it; if so, it would want to include the <code>.vscode/settings.toml</code> etc.</p>



<a name="193047778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047778" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047778">(Apr 06 2020 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> ^^ ?</p>



<a name="193047808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047808">(Apr 06 2020 at 14:15)</a>:</h4>
<p>It's not like "particularly hard" to do</p>



<a name="193047862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047862" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047862">(Apr 06 2020 at 14:16)</a>:</h4>
<p>But I do think having a list of steps would be really nice</p>



<a name="193047906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047906" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047906">(Apr 06 2020 at 14:16)</a>:</h4>
<p>I haven't written anything on that yet</p>



<a name="193047936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047936">(Apr 06 2020 at 14:16)</a>:</h4>
<p>I had wanted to do a survey of the common editors</p>



<a name="193047956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193047956" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193047956">(Apr 06 2020 at 14:16)</a>:</h4>
<p>and I think that sent me down the rabbit hole of exploring neovim</p>



<a name="193048075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048075">(Apr 06 2020 at 14:17)</a>:</h4>
<p>(I think part of the problem is that there are different instructions depending on which variant of vim one uses? Not sure if that is still true, but when I was looking it seemed to be the case, and so I wanted to figure out which variant of vim was the best one to document...)</p>



<a name="193048229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048229" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048229">(Apr 06 2020 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> yeah, that's the biggest problem, every editor requires n, where n &gt;= 1 instructions</p>



<a name="193048310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048310" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048310">(Apr 06 2020 at 14:19)</a>:</h4>
<p>For rust-analyzer, I just made the manual easy to edit, hoping that folks would crowd-write it.</p>



<a name="193048363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048363">(Apr 06 2020 at 14:19)</a>:</h4>
<p>I would definitelyl suggest we just get started with at <em>least</em> documenting vscode :)</p>



<a name="193048366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048366">(Apr 06 2020 at 14:19)</a>:</h4>
<p>That said</p>



<a name="193048465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048465">(Apr 06 2020 at 14:20)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> the cargo watch functionality, is that built into the <em>VSCode plugin</em> or is it also part of the LSP server itself in some way?</p>



<a name="193048476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048476">(Apr 06 2020 at 14:20)</a>:</h4>
<p>I remember us talking about moving it around</p>



<a name="193048512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048512">(Apr 06 2020 at 14:20)</a>:</h4>
<p>That's now LSP-level functionality</p>



<a name="193048526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048526" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048526">(Apr 06 2020 at 14:20)</a>:</h4>
<p>So, it should be supported in any editor</p>



<a name="193048563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048563" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048563">(Apr 06 2020 at 14:21)</a>:</h4>
<p>Presumably the way that that "Cargo watch" command gets customized would also depend on your editor, though?</p>



<a name="193048586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048586">(Apr 06 2020 at 14:21)</a>:</h4>
<p>e.g., the emacs plugin may just not support it?</p>



<a name="193048758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048758">(Apr 06 2020 at 14:22)</a>:</h4>
<p>So, the LSP has the concept of configuration built-in, and, if editor supports LSP, it should be able to set arbitrary options</p>



<a name="193048819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193048819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193048819">(Apr 06 2020 at 14:22)</a>:</h4>
<p>but it is indeed true that this would be per-editor config. IE, we don't really have a <code>rust-analyzer.toml</code> config file.</p>



<a name="193049018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193049018" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193049018">(Apr 06 2020 at 14:24)</a>:</h4>
<p>Which is sort-of a limitation of the protocol:</p>
<ul>
<li>it specifies the way to configure servers from the editor</li>
<li>but it doesn't specify the on-disk storage format, each editor is expected to store config in their own format</li>
</ul>
<p>I think we can bend the protocol here, and merge <code>rust-analyzer.toml</code> with whatever the editor sends us</p>



<a name="193049264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193049264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193049264">(Apr 06 2020 at 14:26)</a>:</h4>
<p>What is the purpose of <code>rust-analyzer.toml</code>? To override the single flycheck command?</p>



<a name="193049482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193049482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193049482">(Apr 06 2020 at 14:27)</a>:</h4>
<p>To have something you can put into a git repo, which would be picked up by all editors, and not just by vs code</p>



<a name="193049680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193049680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193049680">(Apr 06 2020 at 14:28)</a>:</h4>
<p>we could, but it's not clear it's necessary, I guess we'd want to check if e.g. the emacs lsp-mode etc supports some way to set options</p>



<a name="193049681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193049681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193049681">(Apr 06 2020 at 14:28)</a>:</h4>
<p>I bet it does</p>



<a name="193050010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193050010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193050010">(Apr 06 2020 at 14:30)</a>:</h4>
<p>it does (via the normal emacs way, so you could have a <code>.dir-locals.el</code>)</p>



<a name="193050679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193050679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193050679">(Apr 06 2020 at 14:34)</a>:</h4>
<p>I think configuring the editor is a very personal thing. Not everyone would like to use that <code>x.py</code> script and she should not be forced to. Just documenting the recommended setup seems alright.</p>



<a name="193051301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193051301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193051301">(Apr 06 2020 at 14:38)</a>:</h4>
<p>We might need to start collecting LSP bits we're missing in different editors too. We mostly ignore client caps right now and just assume things like "markdown is supported"</p>



<a name="193051393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193051393" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193051393">(Apr 06 2020 at 14:39)</a>:</h4>
<p>I think there are many settings where it would make sense to configure them per repo, like files to ignore</p>



<a name="193051626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193051626" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193051626">(Apr 06 2020 at 14:40)</a>:</h4>
<p>This also seems arrogant to put <code>rust-analyzer.toml</code> to the repo, whilst some folks may be using intelij</p>



<a name="193052024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193052024" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193052024">(Apr 06 2020 at 14:43)</a>:</h4>
<p><code>rust-analyzer.toml</code> in no way precludes adding <code>.idea</code>. Honestly, I feel like the benefit of sharable config should be abundantly clear :)</p>



<a name="193053768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193053768" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193053768">(Apr 06 2020 at 14:55)</a>:</h4>
<p>Only if people don't save personal configs in this <code>.idea</code> folder ...</p>



<a name="193054922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193054922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193054922">(Apr 06 2020 at 15:02)</a>:</h4>
<p>The fact that we commit .vscode folder already looks weird. So each time when we modify the debug configs for vscode we have to keep an eye on not committing this change.<br>
The better approach would be to have a separate dir say <code>recommended-editor-configs</code> where people can look and copy the editor configs they want and be able to tweak them</p>



<a name="193055468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193055468" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193055468">(Apr 06 2020 at 15:06)</a>:</h4>
<p>I guess we can agree to disagree on the merits of sharing project config :)</p>



<a name="193055901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193055901" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193055901">(Apr 06 2020 at 15:09)</a>:</h4>
<p>And I want to report there are around 2 more PRs to complete the proc-macro custom derive feature.</p>



<a name="193055904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193055904" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193055904">(Apr 06 2020 at 15:09)</a>:</h4>
<p>the whole point is that you only put the settings you do want to share into the <code>rust-analyzer.toml</code> ;)</p>



<a name="193057369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193057369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193057369">(Apr 06 2020 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="216201">Edwin Cheng</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193055901" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193055901">said</a>:</p>
<blockquote>
<p>And I want to report there are around 2 more PRs to complete the proc-macro custom derive feature.</p>
</blockquote>
<p>with this and all the Chalk work going on, I'm hopeful we'll have pretty complete type inference (modulo bugs) in a few months :)</p>



<a name="193057494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193057494" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193057494">(Apr 06 2020 at 15:20)</a>:</h4>
<p>I am scared about perf though <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="193058282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193058282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193058282">(Apr 06 2020 at 15:25)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> I remember you mentioned you want some setup around --bench , e.g. auto-compare some source files. Do you remember which issue is it ? I would like to work on that task after these PRs.</p>



<a name="193058453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193058453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193058453">(Apr 06 2020 at 15:26)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/492" title="https://github.com/rust-analyzer/rust-analyzer/issues/492">https://github.com/rust-analyzer/rust-analyzer/issues/492</a> ?</p>



<a name="193058689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193058689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193058689">(Apr 06 2020 at 15:28)</a>:</h4>
<p>yes, thank you!</p>



<a name="193226483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193226483" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193226483">(Apr 07 2020 at 18:11)</a>:</h4>
<blockquote>
<p>"editor.semanticHighlighting.enabled": false</p>
</blockquote>
<p>Is this right? (from the changelog)</p>



<a name="193775620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193775620" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193775620">(Apr 13 2020 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193050010" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193050010">said</a>:</p>
<blockquote>
<p>it does (via the normal emacs way, so you could have a <code>.dir-locals.el</code>)</p>
</blockquote>
<p>ps, <span class="user-mention" data-user-id="129457">@Florian Diebold</span>, got any links or things to "apropos for" in order to find out how to set "custom settings" in emacs-lsp?</p>



<a name="193775962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193775962" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193775962">(Apr 13 2020 at 14:16)</a>:</h4>
<p>ouch, forgot to mention that there's no weekly today because there's a holiday here.</p>



<a name="193775977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193775977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193775977">(Apr 13 2020 at 14:16)</a>:</h4>
<p>there's a bunch of <a href="https://github.com/emacs-lsp/lsp-mode/blob/5c94fbd04cd082b5d303e9b3e0332d3ba01b4ad9/lsp-rust.el#L327-L416" title="https://github.com/emacs-lsp/lsp-mode/blob/5c94fbd04cd082b5d303e9b3e0332d3ba01b4ad9/lsp-rust.el#L327-L416">customization variables</a>, e.g. <code>lsp-rust-analyzer-cargo-watch-command</code>, you just have to make sure to set them before the server gets started. Also note that the setting names changed somewhat recently, there's been a commit in emacs-lsp to adapt to that but I haven't tested it since then. And I don't know whether the settings are complete</p>



<a name="193775991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193775991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193775991">(Apr 13 2020 at 14:16)</a>:</h4>
<p>(but actually, because I feel as asleep after writing an article on the Pratt parsing)</p>



<a name="193776581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193776581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193776581">(Apr 13 2020 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193775977" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193775977">said</a>:</p>
<blockquote>
<p>there's a bunch of <a href="https://github.com/emacs-lsp/lsp-mode/blob/5c94fbd04cd082b5d303e9b3e0332d3ba01b4ad9/lsp-rust.el#L327-L416" title="https://github.com/emacs-lsp/lsp-mode/blob/5c94fbd04cd082b5d303e9b3e0332d3ba01b4ad9/lsp-rust.el#L327-L416">customization variables</a>, e.g. <code>lsp-rust-analyzer-cargo-watch-command</code>, you just have to make sure to set them before the server gets started. Also note that the setting names changed somewhat recently, there's been a commit in emacs-lsp to adapt to that but I haven't tested it since then. And I don't know whether the settings are complete</p>
</blockquote>
<p>ah wacky</p>



<a name="193776592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193776592" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193776592">(Apr 13 2020 at 14:22)</a>:</h4>
<p>I somehow expected a more generic mechanism</p>



<a name="193776594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193776594" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193776594">(Apr 13 2020 at 14:23)</a>:</h4>
<p>but ok, that makes sense</p>



<a name="193776610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193776610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193776610">(Apr 13 2020 at 14:23)</a>:</h4>
<p>also, <span class="user-mention" data-user-id="133169">@matklad</span>, seems ok, I'm still catching up on notifications anyway</p>



<a name="193776623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193776623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193776623">(Apr 13 2020 at 14:23)</a>:</h4>
<p>always takes me more time than I leave for it</p>



<a name="193777548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193777548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193777548">(Apr 13 2020 at 14:33)</a>:</h4>
<p>I've been continuing to test the recursive Chalk solver and implemented a bunch of fixes in RA, which I'm turning into PRs, hence the bunch of PRs right now <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="193782062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193782062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193782062">(Apr 13 2020 at 15:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193775977" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/193775977">said</a>:</p>
<blockquote>
<p>there's a bunch of <a href="https://github.com/emacs-lsp/lsp-mode/blob/5c94fbd04cd082b5d303e9b3e0332d3ba01b4ad9/lsp-rust.el#L327-L416" title="https://github.com/emacs-lsp/lsp-mode/blob/5c94fbd04cd082b5d303e9b3e0332d3ba01b4ad9/lsp-rust.el#L327-L416">customization variables</a>, ...</p>
</blockquote>
<p>I'm always asking myself whether I should keep my LSP customizations in <code>custom.el</code> (therefore changing them with <code>M-x customize-variable</code>) or write them in my <code>personal/mysettings.el</code>. Currently I have custom settings a bit here and a bit there and it looks messy. Any suggestions?<br>
This is more a generic emacs question ... anyway, thanks :-)</p>



<a name="193869446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193869446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193869446">(Apr 14 2020 at 09:14)</a>:</h4>
<p>I don't use <code>customize-variable</code> and just put stuff into my user config function, but I use spacemacs so <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="193872278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/193872278" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#193872278">(Apr 14 2020 at 09:41)</a>:</h4>
<p>When I used to use emacs heavily (with prelude and vanilla config at different times) I also find <code>M-x customize-variable</code> to be more of a problem than a solution</p>



<a name="194680183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680183">(Apr 20 2020 at 14:13)</a>:</h4>
<p>Oups, almost missed weekly sync-up <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> !</p>



<a name="194680299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680299">(Apr 20 2020 at 14:14)</a>:</h4>
<p>So, we have a humongous release today, <a href="https://rust-analyzer.github.io/thisweek/2020/04/20/changelog-21.html" title="https://rust-analyzer.github.io/thisweek/2020/04/20/changelog-21.html">https://rust-analyzer.github.io/thisweek/2020/04/20/changelog-21.html</a>, thanks to work by <span class="user-mention" data-user-id="216201">@Edwin Cheng</span> and <span class="user-mention" data-user-id="129457">@Florian Diebold</span> over the past several weeks</p>



<a name="194680331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680331">(Apr 20 2020 at 14:14)</a>:</h4>
<p>release contains <em>both</em> new trait solver and procedural macros support.</p>



<a name="194680375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680375">(Apr 20 2020 at 14:14)</a>:</h4>
<p>Only support Custom-derive for now :)</p>



<a name="194680441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680441">(Apr 20 2020 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="216201">@Edwin Cheng</span>  how do we handle incorrect syntax in proc macros?</p>



<a name="194680480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680480">(Apr 20 2020 at 14:15)</a>:</h4>
<p>I am extremely happy to see custom derive working!</p>
<p>Like, for the past four years or something I was thinking "one day, we'll expand proc macros in an IDE", and today is that day.</p>



<a name="194680605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680605">(Apr 20 2020 at 14:16)</a>:</h4>
<p>oooh</p>



<a name="194680681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680681">(Apr 20 2020 at 14:17)</a>:</h4>
<p>the recursive solver is shipping, eh? Very exciting</p>



<a name="194680831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680831">(Apr 20 2020 at 14:18)</a>:</h4>
<p>On my side, I feel like I've done comparatively little :)</p>
<p>I am still in the process of solving the accidentally linear lookup in the sytnax trees, and the item-tree IR work is still on hold :(</p>



<a name="194680859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680859">(Apr 20 2020 at 14:18)</a>:</h4>
<p>So, I've been saying this for weeks, but I mean it now</p>



<a name="194680873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680873" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680873">(Apr 20 2020 at 14:18)</a>:</h4>
<p>(lol)</p>



<a name="194680876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680876" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680876">(Apr 20 2020 at 14:18)</a>:</h4>
<blockquote>
<p>the recursive solver is shipping, eh? </p>
</blockquote>
<p>Yes! And the impact is very visible.</p>



<a name="194680884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680884">(Apr 20 2020 at 14:18)</a>:</h4>
<p>I want to advance this IDE RFC</p>



<a name="194680894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680894">(Apr 20 2020 at 14:18)</a>:</h4>
<p>last week I got pretty distracted</p>



<a name="194680939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680939">(Apr 20 2020 at 14:19)</a>:</h4>
<p>I was going to read it over today and .. probably open it up? I'm not sure if there's any further consulting that makes sense, can't think what it would be right now</p>



<a name="194680964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680964">(Apr 20 2020 at 14:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194680876" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194680876">said</a>:</p>
<blockquote>
<p>Yes! And the impact is very visible.</p>
</blockquote>
<p>Very cool.</p>



<a name="194680974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680974" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680974">(Apr 20 2020 at 14:19)</a>:</h4>
<p>There's been a lot of activity in/around chalk</p>



<a name="194680984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680984">(Apr 20 2020 at 14:19)</a>:</h4>
<p>Even if there are, we can do this after opening the RFC</p>



<a name="194680997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194680997" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194680997">(Apr 20 2020 at 14:19)</a>:</h4>
<p>Right</p>



<a name="194681072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681072">(Apr 20 2020 at 14:20)</a>:</h4>
<p>I also want to write a "rust-analyzer is relased" blog post this week, and publish it next week.</p>



<a name="194681113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681113">(Apr 20 2020 at 14:20)</a>:</h4>
<p>What language features are most problematic for RLS in terms of chalk etc at this juncture?</p>



<a name="194681129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681129">(Apr 20 2020 at 14:20)</a>:</h4>
<p>Maybe in/around async I/O?</p>



<a name="194681142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681142" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681142">(Apr 20 2020 at 14:20)</a>:</h4>
<p>Like, we never had a proper announcement, with a short run-down of features, quick start, etc. I think combining that with RFC would be beneficial.</p>



<a name="194681158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681158">(Apr 20 2020 at 14:20)</a>:</h4>
<p>Ah, yeah, good idea.</p>



<a name="194681264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681264">(Apr 20 2020 at 14:21)</a>:</h4>
<blockquote>
<blockquote>
<p>the recursive solver is shipping, eh? </p>
</blockquote>
<p>Yes! And the impact is very visible.</p>
</blockquote>
<p>also in terms of performance though <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span> a timely review of <a href="https://github.com/rust-lang/chalk/issues/404" title="https://github.com/rust-lang/chalk/issues/404">rust-lang/chalk#404</a> would be helpful there</p>



<a name="194681265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681265">(Apr 20 2020 at 14:21)</a>:</h4>
<blockquote>
<p>What language features are most problematic for RLS in terms of chalk etc at this juncture?</p>
</blockquote>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> knows more, but, as a user, I see unresolved types with <code>dyn Trait</code> and <code>impl Trait</code> syntaxes</p>



<a name="194681402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681402">(Apr 20 2020 at 14:22)</a>:</h4>
<p>eek, yeah, will get on that today!</p>



<a name="194681438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681438">(Apr 20 2020 at 14:22)</a>:</h4>
<p>I was just going to say <span class="user-mention" data-user-id="129457">@Florian Diebold</span> that maybe you and I can spend some time today discussing the caching/salsa story more generally</p>



<a name="194681520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681520">(Apr 20 2020 at 14:23)</a>:</h4>
<p>Does it make sense for me to hop onto that discussion?</p>



<a name="194681556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681556">(Apr 20 2020 at 14:23)</a>:</h4>
<p>Sure!</p>



<a name="194681561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681561">(Apr 20 2020 at 14:23)</a>:</h4>
<p>Maybe later today?</p>



<a name="194681648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681648">(Apr 20 2020 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681265" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681265">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> knows more, but, as a user, I see unresolved types with <code>dyn Trait</code> and <code>impl Trait</code> syntaxes</p>
</blockquote>
<p>yeah, <code>impl Trait</code> support should be ready soon though, for <code>dyn Trait</code> the problem is super traits, and there's nothing ongoing there... apart from that, the ongoing work on built-in impls will have a big impact I think, and then the only thing that comes to mind is support for integer/float variables</p>



<a name="194681734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681734">(Apr 20 2020 at 14:24)</a>:</h4>
<p>I think we also want the ability to get a specific impl from chalk, and not just the yes/no answer</p>



<a name="194681748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681748" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681748">(Apr 20 2020 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681438" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681438">said</a>:</p>
<blockquote>
<p>I was just going to say <span class="user-mention silent" data-user-id="129457">Florian Diebold</span> that maybe you and I can spend some time today discussing the caching/salsa story more generally</p>
</blockquote>
<p>yeah, my other PR (<a href="https://github.com/rust-lang/chalk/issues/403" title="https://github.com/rust-lang/chalk/issues/403">rust-lang/chalk#403</a>) is kind of related to that btw</p>



<a name="194681807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681807" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681807">(Apr 20 2020 at 14:25)</a>:</h4>
<p>Like, I belive for <code>goto definition</code> for method we want to land on the impl, if possible, and not on the trait.</p>



<a name="194681815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681815">(Apr 20 2020 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681734" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681734">said</a>:</p>
<blockquote>
<p>I think we also want the ability to get a specific impl from chalk, and not just the yes/no answer</p>
</blockquote>
<p>can you say more about why? I've specifically avoided giving that info and don't intend to change that, but it can be done in other ways</p>



<a name="194681877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681877" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681877">(Apr 20 2020 at 14:25)</a>:</h4>
<p>ok, so, if the question you want to answer is more like "what is the precise version of this method that will run"</p>



<a name="194681972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194681972" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194681972">(Apr 20 2020 at 14:26)</a>:</h4>
<p>that is something we can/should add to chalk, but not that way, it'd be modeled I think more like an associated type normalization</p>



<a name="194682023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682023" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682023">(Apr 20 2020 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681748" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194681748">said</a>:</p>
<blockquote>
<p>yeah, my other PR (<a href="https://github.com/rust-lang/chalk/issues/403" title="https://github.com/rust-lang/chalk/issues/403">rust-lang/chalk#403</a>) is kind of related to that btw</p>
</blockquote>
<p>yep I saw that</p>



<a name="194682031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682031">(Apr 20 2020 at 14:26)</a>:</h4>
<p>TO be clear, this is not something urgently needed, but I'd love to see it eventually</p>



<a name="194682062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682062">(Apr 20 2020 at 14:26)</a>:</h4>
<p>well, I do think it'll be needed as rustc integration proceeds too</p>



<a name="194682077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682077" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682077">(Apr 20 2020 at 14:26)</a>:</h4>
<p>so it makes sense to work on</p>



<a name="194682105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682105">(Apr 20 2020 at 14:26)</a>:</h4>
<p>in any case it's sort of "technicality", the distinction I'm drawing</p>



<a name="194682164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682164">(Apr 20 2020 at 14:27)</a>:</h4>
<p>but in rustc when you ask a question like <code>T: Foo</code> you get back an answer that is a specific impl, and I'd like to avoid making that the interface. But we obviously need the ability to figure out "what version of this method will actually run"</p>



<a name="194682222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682222" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682222">(Apr 20 2020 at 14:27)</a>:</h4>
<p>the idea is to leverage the fact that every function definition written by a user has a unique type associated with it</p>



<a name="194682228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682228">(Apr 20 2020 at 14:27)</a>:</h4>
<blockquote>
<p>Like, I belive for <code>goto definition</code> for method we want to land on the impl, if possible, and not on the trait.</p>
</blockquote>
<p>Why not both :)</p>



<a name="194682377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682377">(Apr 20 2020 at 14:28)</a>:</h4>
<p>there should be a command to go to the trait as well, but if you go to the impl, you can still easily go up to the trait, but not the other way around</p>



<a name="194682388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682388">(Apr 20 2020 at 14:28)</a>:</h4>
<p>Yeah.... somethimes I even think about exposing some sort of "chain of evidence" in the UI, which explains how a particular type implements a trait.</p>



<a name="194682430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682430">(Apr 20 2020 at 14:29)</a>:</h4>
<p>yeah, that would be cool</p>



<a name="194682499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682499" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682499">(Apr 20 2020 at 14:29)</a>:</h4>
<p>I have so many thoughts about this</p>



<a name="194682504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682504" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682504">(Apr 20 2020 at 14:29)</a>:</h4>
<p>Like how IntelliJ does this somewat implicitelly, remmebering the current subsitution when doing goto defitinition (waves hands furiously)</p>



<a name="194682531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682531" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682531">(Apr 20 2020 at 14:29)</a>:</h4>
<p>well maybe <em>that</em> many :P</p>



<a name="194682562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682562">(Apr 20 2020 at 14:29)</a>:</h4>
<p>mostly I have ideas of things I would like to find better ways to help users see, navigate, and understand</p>



<a name="194682633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682633">(Apr 20 2020 at 14:30)</a>:</h4>
<p>but I'm not sure how hard that is to do in contexts like VSCode</p>



<a name="194682678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682678" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682678">(Apr 20 2020 at 14:30)</a>:</h4>
<p>certainly the "chain of evidence" is on there, in any case.</p>



<a name="194682704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682704">(Apr 20 2020 at 14:30)</a>:</h4>
<p>/me can't wait until the basics are in place, and we can experiement with fancy visualisations and stuff</p>



<a name="194682750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682750" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682750">(Apr 20 2020 at 14:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194682504" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194682504">said</a>:</p>
<blockquote>
<p>Like how IntelliJ does this somewat implicitelly, remmebering the current subsitution when doing goto defitinition (waves hands furiously)</p>
</blockquote>
<p>that reminds me that I would also love to do a similar thing for macros -- basically if you go to definition on a macro call, remember the parameters, so you could expand it further</p>



<a name="194682947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194682947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194682947">(Apr 20 2020 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> are there any action items for me with respect to the RFC?</p>



<a name="194684125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/194684125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#194684125">(Apr 20 2020 at 14:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194682750" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/194682750">said</a>:</p>
<blockquote>
<p>that reminds me that I would also love to do a similar thing for macros -- basically if you go to definition on a macro call, remember the parameters, so you could expand it further</p>
</blockquote>
<p>oh man it would be <strong>so great</strong>  to see the series of expansions and recursions this way...</p>



<a name="195421570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195421570" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195421570">(Apr 27 2020 at 14:04)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, it's that time of Monday again!</p>



<a name="195421693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195421693" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195421693">(Apr 27 2020 at 14:05)</a>:</h4>
<p>There's a ton of technical things which were done this week, but I am mostly excited about more general project life things</p>



<a name="195421710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195421710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195421710">(Apr 27 2020 at 14:05)</a>:</h4>
<p>We did a real release: <a href="https://rust-analyzer.github.io/blog/2020/04/20/first-release.html" title="https://rust-analyzer.github.io/blog/2020/04/20/first-release.html">https://rust-analyzer.github.io/blog/2020/04/20/first-release.html</a> (long overdue)</p>



<a name="195421820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195421820" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195421820">(Apr 27 2020 at 14:06)</a>:</h4>
<p>Also, the rust-analyzer RFC seems to be extremely well received (we'v collected more <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> than even nll :D )</p>



<a name="195421882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195421882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195421882">(Apr 27 2020 at 14:07)</a>:</h4>
<p>The usual release notes are here:</p>
<p><a href="https://rust-analyzer.github.io/thisweek/2020/04/27/changelog-22.html" title="https://rust-analyzer.github.io/thisweek/2020/04/27/changelog-22.html">https://rust-analyzer.github.io/thisweek/2020/04/27/changelog-22.html</a></p>



<a name="195422055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422055">(Apr 27 2020 at 14:08)</a>:</h4>
<p>How will our life change after this alpha release?</p>



<a name="195422089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422089" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422089">(Apr 27 2020 at 14:08)</a>:</h4>
<p>I wouldn't expect any changes</p>



<a name="195422240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422240">(Apr 27 2020 at 14:09)</a>:</h4>
<p>More github issues most likely</p>



<a name="195422243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422243">(Apr 27 2020 at 14:09)</a>:</h4>
<p>Though, because of the RFC, I think we need to spend more time making sure that rust-analyzer "just works" in other editors as well.</p>



<a name="195422255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422255">(Apr 27 2020 at 14:09)</a>:</h4>
<p>(I've already started this week)</p>



<a name="195422409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422409">(Apr 27 2020 at 14:10)</a>:</h4>
<p>oh, yeah, <span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> is 100% right. TBH, I don't look at every issue myself anymore, a lot of them get closed by the point I get to them in my mailbox</p>



<a name="195422491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422491">(Apr 27 2020 at 14:11)</a>:</h4>
<p>For that, I actually want to deflect some part of the torrent of questions to urlo: <a href="https://internals.rust-lang.org/t/discussion-forum-for-dev-tools-rust-analyzer/12160/5" title="https://internals.rust-lang.org/t/discussion-forum-for-dev-tools-rust-analyzer/12160/5">https://internals.rust-lang.org/t/discussion-forum-for-dev-tools-rust-analyzer/12160/5</a></p>



<a name="195422657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422657" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422657">(Apr 27 2020 at 14:12)</a>:</h4>
<p>Another bigish issue from this week is that proc-macros are broken on musl, because it can't dlopen</p>



<a name="195422707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422707">(Apr 27 2020 at 14:12)</a>:</h4>
<p>But how does rustc work on musl?</p>



<a name="195422775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422775" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422775">(Apr 27 2020 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="203546">@Laurențiu Nicola</span> is asking the right questions...</p>



<a name="195422793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422793">(Apr 27 2020 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/195422243" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/195422243">said</a>:</p>
<blockquote>
<p>Though, because of the RFC, I think we need to spend more time making sure that rust-analyzer "just works" in other editors as well.</p>
</blockquote>
<p>If these are due to LSP weirdness assign to me and I can take a look.</p>



<a name="195422842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422842" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422842">(Apr 27 2020 at 14:13)</a>:</h4>
<p>wait, I think it doesn't? Like, rustc links glibc dynamically I think?</p>



<a name="195422853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422853">(Apr 27 2020 at 14:13)</a>:</h4>
<p>I think we should try shipping glibc binaries and see if anyone complains. But maybe it's not the right moment</p>



<a name="195422975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195422975" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195422975">(Apr 27 2020 at 14:14)</a>:</h4>
<p>I think doing that next week would be OK! It might probably make sense to switch the nightly asap even</p>



<a name="195423011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423011" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423011">(Apr 27 2020 at 14:14)</a>:</h4>
<p>There's also this annoying slow allocator problem...</p>



<a name="195423094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423094" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423094">(Apr 27 2020 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> yup, I think that would be mostly it</p>



<a name="195423115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423115" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423115">(Apr 27 2020 at 14:14)</a>:</h4>
<p>I don't think it's slow on musl, but rather that the glibc one is pretty fast these days</p>



<a name="195423212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423212">(Apr 27 2020 at 14:15)</a>:</h4>
<p>Also, kudos to <span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> for being on top of many small things, like version updates and what not. They rarely get into release notes, which is really unforutnate :(</p>



<a name="195423244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423244" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423244">(Apr 27 2020 at 14:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/195422842" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/195422842">said</a>:</p>
<blockquote>
<p>wait, I think it doesn't? Like, rustc links glibc dynamically I think?</p>
</blockquote>
<p>There's a rust package on Alpine and I don't think it pulls in glibc</p>



<a name="195423447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423447" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423447">(Apr 27 2020 at 14:16)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> will you be able to look at ast docs pr some time this week?</p>



<a name="195423544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423544">(Apr 27 2020 at 14:17)</a>:</h4>
<p>That's not impossible :)</p>



<a name="195423691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423691">(Apr 27 2020 at 14:18)</a>:</h4>
<p>IIUC, rustc musl host use dynamic-musl and glibc .</p>



<a name="195423780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195423780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195423780">(Apr 27 2020 at 14:19)</a>:</h4>
<blockquote>
<p>@Jeremy Kolb yup, I think that would be mostly it</p>
</blockquote>
<p>The annoying thing would be our custom code-action format.  I am warming up to the idea of using the text snippets as internal representation, but that would require some extensive changes to out assist infra. Which are necessary anyway, as our cursor placement in assists is pretty stupid in majority of cases</p>



<a name="195424054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195424054" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195424054">(Apr 27 2020 at 14:21)</a>:</h4>
<p>Yeah that plays into server-side command execution. I saw your proposal for cursor position... I hope that gets in somehow</p>



<a name="195430474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/195430474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#195430474">(Apr 27 2020 at 15:05)</a>:</h4>
<p>I wonder if we could also enable jemalloc for the releases</p>



<a name="196183618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196183618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196183618">(May 04 2020 at 14:02)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> , it's time for a weekly sync up again!</p>



<a name="196183731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196183731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196183731">(May 04 2020 at 14:03)</a>:</h4>
<p>It was a quiet week (in comparision to couple of previous ones) with mostly feature polishing and internal refactorings</p>



<a name="196183885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196183885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196183885">(May 04 2020 at 14:04)</a>:</h4>
<p>We now have a tracking issue for rust-analyzer LSP RFC: <a href="https://github.com/rust-analyzer/rust-analyzer/issues/4224#issue-610020082" title="https://github.com/rust-analyzer/rust-analyzer/issues/4224#issue-610020082">https://github.com/rust-analyzer/rust-analyzer/issues/4224#issue-610020082</a></p>



<a name="196184013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196184013" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196184013">(May 04 2020 at 14:05)</a>:</h4>
<p>This week, I'd like to tackle our use of custom <code>rust-analyzer.applySourceChange</code> comand, which hurts interoperability</p>



<a name="196184165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196184165" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196184165">(May 04 2020 at 14:06)</a>:</h4>
<p>I also want to refactor our internal representation of code changes -- it seems like using snippets as <strong>the</strong> data structure is a better approach than our separate <code>caret_offset: TextSize</code> field (which was cargo-culted from IntelliJ)</p>



<a name="196184838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196184838" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196184838">(May 04 2020 at 14:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/196183885" title="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/196183885">said</a>:</p>
<blockquote>
<p>We now have a tracking issue for rust-analyzer LSP RFC: <a href="https://github.com/rust-analyzer/rust-analyzer/issues/4224#issue-610020082" title="https://github.com/rust-analyzer/rust-analyzer/issues/4224#issue-610020082">https://github.com/rust-analyzer/rust-analyzer/issues/4224#issue-610020082</a></p>
</blockquote>
<p>great</p>



<a name="196184851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196184851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196184851">(May 04 2020 at 14:11)</a>:</h4>
<p>I have a question to raise</p>



<a name="196184934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196184934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196184934">(May 04 2020 at 14:11)</a>:</h4>
<p>How are we tracking the issues and feedback that arise in terms of potential blockers around the RLS -&gt; rust-analyzer transition</p>



<a name="196184987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196184987" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196184987">(May 04 2020 at 14:12)</a>:</h4>
<p>I think you created an issue for that?</p>



<a name="196185101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185101">(May 04 2020 at 14:12)</a>:</h4>
<p>Yes, there's currently one issue which is sort of grab-bag for everything</p>



<a name="196185145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185145">(May 04 2020 at 14:13)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/4224" title="https://github.com/rust-analyzer/rust-analyzer/issues/4224">https://github.com/rust-analyzer/rust-analyzer/issues/4224</a></p>



<a name="196185153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185153" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185153">(May 04 2020 at 14:13)</a>:</h4>
<p>(the same issue)</p>



<a name="196185317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185317">(May 04 2020 at 14:14)</a>:</h4>
<p>We currently don't do any kind of organized tracking. Should probably do that, though I kind of want to tackle the technical issue of custom edit command first.</p>



<a name="196185372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185372" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185372">(May 04 2020 at 14:14)</a>:</h4>
<p>Oh, we also briefly chatted with <span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> about merging the VS Code extensions.</p>



<a name="196185480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185480">(May 04 2020 at 14:15)</a>:</h4>
<p>One think we are debated in the moment is where this unified VS Code extension should live -- at the moment its in the separate repo, but rust-analyzer one is in-tree</p>



<a name="196185857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185857" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Matuszewski <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185857">(May 04 2020 at 14:17)</a>:</h4>
<p>There’s also WIP to support RA in the RLS extension, which should not require much work to be in an acceptable state</p>



<a name="196185914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196185914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196185914">(May 04 2020 at 14:17)</a>:</h4>
<p><span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> that's sweet! Is there a link?</p>



<a name="196186069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196186069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Matuszewski <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196186069">(May 04 2020 at 14:18)</a>:</h4>
<p>Nothing shippable nor uploaded upstream, just hacking away locally</p>



<a name="196186101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196186101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196186101">(May 04 2020 at 14:18)</a>:</h4>
<p>Also, one thing I want to note that, after switching Chalk to recursive solver, I enjoy using rust-analyzer so much more. Like, it doesn't feel like hit-and-miss anymore, it's <em>mostly</em> hit, and now, when, eg, I don't get completions I expect, I start to look for bug in my code and not a bug in rust-analyzer :D</p>



<a name="196186112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196186112" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Matuszewski <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196186112">(May 04 2020 at 14:18)</a>:</h4>
<p>I’ll link whenever I have something working, which will be this week</p>



<a name="196186465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196186465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196186465">(May 04 2020 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> does using a snippet representation get you around the need for a custom LSP request?</p>



<a name="196186525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196186525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196186525">(May 04 2020 at 14:21)</a>:</h4>
<p>sort of</p>



<a name="196186662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196186662" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196186662">(May 04 2020 at 14:22)</a>:</h4>
<p>we'll be able to reuse "standard" API, but, because snippets are not supported in edits yet, we'd have to hack our custom handler for a standard command</p>



<a name="196186683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196186683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196186683">(May 04 2020 at 14:22)</a>:</h4>
<p>(natutally, if client advertises the capability)</p>



<a name="196188934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/196188934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#196188934">(May 04 2020 at 14:37)</a>:</h4>
<p>@matklad semi related: we still need to be able to change server caps based on the client</p>



<a name="197151694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197151694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197151694">(May 11 2020 at 14:18)</a>:</h4>
<p>Hey, I won't be able to make this sync up, though the release is up :)</p>



<a name="197154451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197154451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197154451">(May 11 2020 at 14:38)</a>:</h4>
<p>More generally, I am doing some client work this week, so I won't be fully available :-)</p>



<a name="197940423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940423" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940423">(May 18 2020 at 14:14)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's sync-up time!</p>



<a name="197940511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940511">(May 18 2020 at 14:15)</a>:</h4>
<p>Today's changelog is here: <a href="https://rust-analyzer.github.io/thisweek/2020/05/18/changelog-25.html">https://rust-analyzer.github.io/thisweek/2020/05/18/changelog-25.html</a></p>



<a name="197940591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940591">(May 18 2020 at 14:15)</a>:</h4>
<p>I've also blogged about my vision for longer-term plans here: <a href="https://rust-analyzer.github.io/blog/2020/05/18/next-few-years.html">https://rust-analyzer.github.io/blog/2020/05/18/next-few-years.html</a></p>



<a name="197940669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940669">(May 18 2020 at 14:16)</a>:</h4>
<p><em>years</em>?!</p>



<a name="197940736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940736">(May 18 2020 at 14:16)</a>:</h4>
<p>Well, I don't usually make plans, but when I do....</p>



<a name="197940884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940884">(May 18 2020 at 14:17)</a>:</h4>
<p>Though, realistically, I feel that we'll need a few years to get to a steady state with respect to IDE support.</p>



<a name="197940959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940959">(May 18 2020 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> is the <code>TextMate</code> plugin maintained in the r-a repo?</p>



<a name="197940975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197940975" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197940975">(May 18 2020 at 14:18)</a>:</h4>
<p>I guess, the lower bound is "time to merge chalk" :)</p>



<a name="197941063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941063" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941063">(May 18 2020 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> that's not <em>plugin</em>, it's a "grammar" file in a format, which is called TextMate</p>



<a name="197941078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941078" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941078">(May 18 2020 at 14:18)</a>:</h4>
<p>(have we merged the RFC yet? I think I have to ping people again)</p>



<a name="197941087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941087">(May 18 2020 at 14:18)</a>:</h4>
<p>I see</p>



<a name="197941105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941105">(May 18 2020 at 14:18)</a>:</h4>
<p>/me pours one out for the TextMate editor</p>



<a name="197941114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941114">(May 18 2020 at 14:19)</a>:</h4>
<p>Nope, the RFC is in FCP RN I think</p>



<a name="197941211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941211" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941211">(May 18 2020 at 14:19)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/pull/4431">https://github.com/rust-analyzer/rust-analyzer/pull/4431</a> is interesting</p>



<a name="197941227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941227" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941227">(May 18 2020 at 14:19)</a>:</h4>
<p>the "don't garbage collect" in particular</p>



<a name="197941332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941332">(May 18 2020 at 14:20)</a>:</h4>
<p>maybe I don't understand what you mean by that</p>



<a name="197941388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941388">(May 18 2020 at 14:20)</a>:</h4>
<p>So, used to store results of proc macro expansion in LRU</p>



<a name="197941454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941454">(May 18 2020 at 14:21)</a>:</h4>
<p>This breaks if proc-macro is non-deterministic (breaks as in, we get panics in rust-analyzer afterwards)</p>



<a name="197941484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941484" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941484">(May 18 2020 at 14:21)</a>:</h4>
<p>I'm skimming blog post btw, lots of interesting things to chew on there</p>



<a name="197941507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941507" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941507">(May 18 2020 at 14:21)</a>:</h4>
<p>it reminds me that I want to put in more time trying to create a "prioritization document" for compiler team</p>



<a name="197941810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941810" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941810">(May 18 2020 at 14:24)</a>:</h4>
<p>In terms of RFC progress:</p>
<ul>
<li><span class="user-mention" data-user-id="153740">@Igor Matuszewski</span> added initial support for rust-analyzer to RLS extensions</li>
<li>I implemented initial version of code actions which do not rely on our custom extension</li>
<li><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> fixed a bunch of various minor spec incompatabilities</li>
</ul>



<a name="197941857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941857" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941857">(May 18 2020 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/197941454">said</a>:</p>
<blockquote>
<p>This breaks if proc-macro is non-deterministic (breaks as in, we get panics in rust-analyzer afterwards)</p>
</blockquote>
<p>actually can you say a bit more about this?</p>



<a name="197941865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941865" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941865">(May 18 2020 at 14:24)</a>:</h4>
<p>that surprises me mildly</p>



<a name="197941893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941893" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941893">(May 18 2020 at 14:25)</a>:</h4>
<p>SO, let's say proc-macro produces <code>struct Foo; enum Bar;</code></p>



<a name="197941903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941903" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941903">(May 18 2020 at 14:25)</a>:</h4>
<p>I think I would expect that, if the procedural macro result is dropped, then we would re-execute it, and if it comes up with a different answer this time, it would be marked "red", which would in turn cause further ...</p>



<a name="197941922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941922">(May 18 2020 at 14:25)</a>:</h4>
<p>oh, hmm, maybe I see it</p>



<a name="197941947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941947">(May 18 2020 at 14:25)</a>:</h4>
<p>We intern id for <code>Foo</code> which says that it's the first thing in a file</p>



<a name="197941967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941967">(May 18 2020 at 14:25)</a>:</h4>
<p>we than LRU the tree out</p>



<a name="197941970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197941970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197941970">(May 18 2020 at 14:25)</a>:</h4>
<p>the asserts perhaps come from us concluding that, because all inputs have not changed, the output can't have changed</p>



<a name="197942041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942041">(May 18 2020 at 14:26)</a>:</h4>
<p>inputs have <em>not</em> changed</p>



<a name="197942051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942051">(May 18 2020 at 14:26)</a>:</h4>
<p>sorry, I meant to write <em>have not</em></p>



<a name="197942081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942081">(May 18 2020 at 14:26)</a>:</h4>
<p>Basically, the changed_at and  validated_at are up to date, it's just that the value is missing.</p>



<a name="197942091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942091" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942091">(May 18 2020 at 14:26)</a>:</h4>
<p>ok, so, if you have a graph like this</p>
<p>Input -&gt; ProcMacro -&gt; Derived</p>



<a name="197942099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942099" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942099">(May 18 2020 at 14:26)</a>:</h4>
<p>and Derived is cached</p>



<a name="197942111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942111" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942111">(May 18 2020 at 14:26)</a>:</h4>
<p>we might reuse that cached result</p>



<a name="197942124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942124">(May 18 2020 at 14:26)</a>:</h4>
<p>then demand ProcMacro and re-execute</p>



<a name="197942131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942131">(May 18 2020 at 14:27)</a>:</h4>
<p>but the two are now inconsistent</p>



<a name="197942137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942137">(May 18 2020 at 14:27)</a>:</h4>
<p>sure, that makes sense</p>



<a name="197942196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942196">(May 18 2020 at 14:27)</a>:</h4>
<p>right so we are effectively treating <code>ProcMacro</code> as "volatile</p>



<a name="197942207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942207" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942207">(May 18 2020 at 14:27)</a>:</h4>
<p>ie., the salsa way should be to treat it as having an untracked input</p>



<a name="197942225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942225" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942225">(May 18 2020 at 14:28)</a>:</h4>
<p>(this is precisely why we don't collect volatile things until a new round)</p>



<a name="197942276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942276" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942276">(May 18 2020 at 14:28)</a>:</h4>
<p>correct?</p>



<a name="197942339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942339" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942339">(May 18 2020 at 14:28)</a>:</h4>
<p>Not sure: untracked input would force us to re-execute it on every change, right?</p>



<a name="197942455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942455" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942455">(May 18 2020 at 14:29)</a>:</h4>
<p>Ie, it would be sound, but it would be inefficient, in a pretty horrible way, as proc macros are the things which we really want to cache agressively.</p>



<a name="197942482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942482">(May 18 2020 at 14:29)</a>:</h4>
<p>yes correct</p>



<a name="197942544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942544">(May 18 2020 at 14:30)</a>:</h4>
<p>I think it's the sound thing</p>



<a name="197942591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942591">(May 18 2020 at 14:30)</a>:</h4>
<p>an alternative would be</p>



<a name="197942601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942601" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942601">(May 18 2020 at 14:30)</a>:</h4>
<p>given durabilities and all</p>



<a name="197942630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942630">(May 18 2020 at 14:30)</a>:</h4>
<p>to have them take an input from some "pseudo-input" with high durability, meant to represent randomness</p>



<a name="197942674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942674" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942674">(May 18 2020 at 14:31)</a>:</h4>
<p>anyway ok I getthe problem, it's an intersting one, and I think there  is a kind of <em>contract</em> here that we should be trying to specify</p>



<a name="197942710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942710">(May 18 2020 at 14:31)</a>:</h4>
<p>i.e., do we expect proc macros to be deterministic, and how much do we "tolerate" them when they are not?</p>



<a name="197942736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942736">(May 18 2020 at 14:31)</a>:</h4>
<p>the batch compiler cares too after all</p>



<a name="197942860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942860" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942860">(May 18 2020 at 14:32)</a>:</h4>
<p>Yeah... I feel like the answer is "non deterministic proc macro is a bug", but that really needs a WM to enforce</p>



<a name="197942861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942861">(May 18 2020 at 14:32)</a>:</h4>
<p>it seems like we're saying: </p>
<ul>
<li>we expect them to be deterministic, and it is a bug to do otherwise</li>
<li><em>but</em> we try to be resilient, and hence if we are forced to re-execute, we assume that the output may change</li>
</ul>



<a name="197942892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942892">(May 18 2020 at 14:32)</a>:</h4>
<p>which isn't <em>really</em> a concept that salsa <em>quite</em> has, I think, durabilities don't <em>quite</em> capture it</p>



<a name="197942958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197942958" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197942958">(May 18 2020 at 14:32)</a>:</h4>
<p>Yeah. To be clear, I think our current scheme where we just don't LRU is also sound.</p>



<a name="197943003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943003">(May 18 2020 at 14:33)</a>:</h4>
<p>I think it's sound. The question would be "what should you do if you did LRU"</p>



<a name="197943007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943007">(May 18 2020 at 14:33)</a>:</h4>
<p>(as a reminder, we don't run any other form of GC besides LRU, which seems super wrong, but also seems to work OK?)</p>



<a name="197943008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943008" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943008">(May 18 2020 at 14:33)</a>:</h4>
<p>and the answer "assume result will change"</p>



<a name="197943067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943067">(May 18 2020 at 14:33)</a>:</h4>
<p>( i.e., you have to re-execute and compare a hash or whatever, not that we have hashes, in order to re-use later results )</p>



<a name="197943127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943127">(May 18 2020 at 14:34)</a>:</h4>
<p>Hm, not sure</p>



<a name="197943187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943187" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943187">(May 18 2020 at 14:34)</a>:</h4>
<p>I would say you'd have to somehow proactively tear down depndent queries?</p>



<a name="197943200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943200" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943200">(May 18 2020 at 14:34)</a>:</h4>
<p>the alternative seems to be ICEing</p>



<a name="197943251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943251">(May 18 2020 at 14:35)</a>:</h4>
<p>should there be an RFC or at least some documentation in the reference that explicitly says that proc macros should be deterministic (even if we can't enforce it)? also relatedly, it's not defined anywhere whether proc macros are allowed to e.g. read files or the network, or is it?</p>



<a name="197943252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943252">(May 18 2020 at 14:35)</a>:</h4>
<p>I'm not saying it would have to be <em>proactive</em></p>



<a name="197943259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943259" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943259">(May 18 2020 at 14:35)</a>:</h4>
<p>I guess, what I am trying to say is that we just can't LRU proc macros.</p>



<a name="197943294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943294" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943294">(May 18 2020 at 14:35)</a>:</h4>
<p>I don't think we're disagreeing in particular</p>



<a name="197943300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943300">(May 18 2020 at 14:35)</a>:</h4>
<p>I do feel an RFC is appropriate</p>



<a name="197943317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943317">(May 18 2020 at 14:35)</a>:</h4>
<p>I think what I'm saying is:</p>



<a name="197943420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943420" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943420">(May 18 2020 at 14:36)</a>:</h4>
<p>/me thinks how to phrase it</p>



<a name="197943496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943496">(May 18 2020 at 14:37)</a>:</h4>
<p>so we have a few options</p>



<a name="197943506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943506">(May 18 2020 at 14:37)</a>:</h4>
<p>we can say that</p>
<ul>
<li>procedural macros must be deterministic</li>
</ul>



<a name="197943526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943526" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943526">(May 18 2020 at 14:37)</a>:</h4>
<p>if that were <em>really</em> true, then you could LRU</p>



<a name="197943541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943541" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943541">(May 18 2020 at 14:37)</a>:</h4>
<p>but we know it's not true in practice, for a variety of reasons</p>



<a name="197943599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943599" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943599">(May 18 2020 at 14:38)</a>:</h4>
<p>we can still <em>say</em> it, but it seems like we're not willing to ICE and crash as a result of a buggy proc macro</p>



<a name="197943673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943673" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943673">(May 18 2020 at 14:38)</a>:</h4>
<p>so what we can say instead is:</p>
<ul>
<li>procedural macros must produce "equivalent" output given equal inputs. </li>
</ul>
<p>This means we reserve the right not to re-run them, essentially, and to re-use the cached output.</p>



<a name="197943705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943705">(May 18 2020 at 14:38)</a>:</h4>
<p>However, if we don't have cached output (or we throw it away, or whatever), then we can't really assume they would produce precisely the same output the next time.</p>



<a name="197943767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943767">(May 18 2020 at 14:39)</a>:</h4>
<p>This is, if nothing else, a matter of empirical observation.</p>



<a name="197943873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943873" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943873">(May 18 2020 at 14:40)</a>:</h4>
<p>We might still say that it's <em>wrong</em> even if we <em>tolerate</em> it, but I guess that people will continue to write buggy proc macros that we have to cope with unless we die a horrible death when they do.</p>



<a name="197943898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197943898" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197943898">(May 18 2020 at 14:40)</a>:</h4>
<p>Yup, I agree with this characterisation.</p>



<a name="197944024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944024" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944024">(May 18 2020 at 14:41)</a>:</h4>
<p>And yeah, "dying a horrible death" is not really an option for IDE unfortunately</p>



<a name="197944077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944077" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944077">(May 18 2020 at 14:41)</a>:</h4>
<p>I do think this should be in an RFC, I think it'd be great to summarize the experiences, and perhaps also note some of the implications for use cases like network access :)</p>



<a name="197944123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944123">(May 18 2020 at 14:41)</a>:</h4>
<p>e.g., a procedural macro that does that sort of thing probably needs some way to "explicitly" change an input if they want to force a refresh</p>



<a name="197944179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944179" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944179">(May 18 2020 at 14:42)</a>:</h4>
<p>In particular, the batch compiler</p>



<a name="197944201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944201" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944201">(May 18 2020 at 14:42)</a>:</h4>
<p>ought to be able to re-use proc macro results without re-executing as well</p>



<a name="197944230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944230">(May 18 2020 at 14:42)</a>:</h4>
<p>and since it persists to disk, that could last a lot longer</p>



<a name="197944248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944248">(May 18 2020 at 14:42)</a>:</h4>
<p>I am not sure this needs to be the RLS/rust-analyzer RFC though....</p>



<a name="197944277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944277" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944277">(May 18 2020 at 14:42)</a>:</h4>
<p>I .. see it as a compiler team RFC?</p>



<a name="197944344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944344" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944344">(May 18 2020 at 14:43)</a>:</h4>
<p>yup. I believe <span class="user-mention" data-user-id="213049">@Jeremy Fitzhardinge</span> was also interested in the topic of deterministic proc macros.</p>



<a name="197944357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944357" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944357">(May 18 2020 at 14:43)</a>:</h4>
<p>I guess I see rust-analyzer as becoming a compiler team project, and hence this sort of decision applies to the "unified architecture" we are ultimately envisioning</p>



<a name="197944397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944397" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944397">(May 18 2020 at 14:43)</a>:</h4>
<p>Yes, it obviously applies to questions of distribution as well</p>



<a name="197944556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944556">(May 18 2020 at 14:44)</a>:</h4>
<p>What do you mean by "distribution"?</p>



<a name="197944702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944702">(May 18 2020 at 14:45)</a>:</h4>
<p>Sorry, I meant distributing builds across a cluster or something</p>



<a name="197944715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944715">(May 18 2020 at 14:45)</a>:</h4>
<p>parallelizing</p>



<a name="197944742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944742">(May 18 2020 at 14:45)</a>:</h4>
<p>I think that's <span class="user-mention" data-user-id="213049">@Jeremy Fitzhardinge</span>'s "angle" here</p>



<a name="197944808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944808">(May 18 2020 at 14:46)</a>:</h4>
<p>it's worth pointing out actually that the rule we just gave above</p>



<a name="197944815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944815">(May 18 2020 at 14:46)</a>:</h4>
<p>is probably already embodied in cargo</p>



<a name="197944819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944819">(May 18 2020 at 14:46)</a>:</h4>
<p>Ahh, yeah, cloud build systems.</p>



<a name="197944847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944847">(May 18 2020 at 14:46)</a>:</h4>
<p>i.e., cargo won't rebuild your crate</p>



<a name="197944860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944860" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944860">(May 18 2020 at 14:46)</a>:</h4>
<p>unless it seems some diffs</p>



<a name="197944899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944899" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944899">(May 18 2020 at 14:46)</a>:</h4>
<p>proc macros do not have anyway to output dependencies to cargo today, yes</p>



<a name="197944906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944906" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944906">(May 18 2020 at 14:47)</a>:</h4>
<p>I remember having some problems with this actualy because I was abusing proc macros to generate tests by scraping files from the file system :)</p>



<a name="197944910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944910" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944910">(May 18 2020 at 14:47)</a>:</h4>
<p>(was reading the extended build systems à la carte on the weekend, it is still good read on salsa-like issues)</p>



<a name="197944937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197944937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197944937">(May 18 2020 at 14:47)</a>:</h4>
<p>I haven't read the extended version yet...</p>



<a name="197945011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197945011" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197945011">(May 18 2020 at 14:47)</a>:</h4>
<p>So who is going to write the RFC? :P</p>



<a name="197945029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197945029" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197945029">(May 18 2020 at 14:47)</a>:</h4>
<p>it'd be good to at least take some notes on this conversation somewhere</p>



<a name="197945230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197945230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197945230">(May 18 2020 at 14:49)</a>:</h4>
<p>I guess, I can draft some notes and maybe collaborate with <span class="user-mention" data-user-id="213049">@Jeremy Fitzhardinge</span> ?</p>



<a name="197945294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197945294" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197945294">(May 18 2020 at 14:49)</a>:</h4>
<p>I am not sure we can really write an RFC which can be implemented today, but "declaration of intent" RFC seems good</p>



<a name="197945470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197945470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197945470">(May 18 2020 at 14:50)</a>:</h4>
<p>In my view the RFC is clarifying the <strong>expectations</strong>, it's not something that can be "implemented" in any one place (multiple tools etc may come to depend onit)</p>



<a name="197945814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197945814" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197945814">(May 18 2020 at 14:53)</a>:</h4>
<p>Hm I would probably feel better about such an rfc if it suggested adding proc macro apis to explicitly indicate dependencies</p>



<a name="197946021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197946021" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197946021">(May 18 2020 at 14:54)</a>:</h4>
<p>I believe <span class="user-mention" data-user-id="132829">@Christopher Durham</span> has done some work on adding <em>file</em> dependencies to proc-macros?</p>



<a name="197954102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197954102" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Durham <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197954102">(May 18 2020 at 15:48)</a>:</h4>
<p>If you count reminding people that I want an API for it as work, then yes</p>



<a name="197954627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/197954627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Durham <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#197954627">(May 18 2020 at 15:52)</a>:</h4>
<p>The "minimum" API for proc-macro external dependencies would be just to bolt on the buildscript <code>cargo:rerun-if-changed</code> annotations</p>



<a name="198671847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198671847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198671847">(May 25 2020 at 14:01)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span>  <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> !</p>



<a name="198671856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198671856" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198671856">(May 25 2020 at 14:01)</a>:</h4>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/05/25/changelog-26.html">https://rust-analyzer.github.io/thisweek/2020/05/25/changelog-26.html</a></p>



<a name="198672109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198672109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198672109">(May 25 2020 at 14:04)</a>:</h4>
<p>This week we've mostly worked on intrnal stuff:</p>
<ul>
<li>we landed another Chalk upgrade, which made our type inference more precise</li>
<li>we refactored a lot of LSP-layer stuff. In particular, we now use snippets to specify cursor position</li>
<li>more generally, we documented (and cleaned up in the process) almost all our extensions to the protocol</li>
</ul>



<a name="198672788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198672788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198672788">(May 25 2020 at 14:11)</a>:</h4>
<p>Oh, the FCP for the RFC has ended, so <span class="user-mention" data-user-id="116009">@nikomatsakis</span> , do want to hit the merge button? </p>
<p><a href="https://github.com/rust-lang/rfcs/pull/2912">https://github.com/rust-lang/rfcs/pull/2912</a></p>



<a name="198672925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198672925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198672925">(May 25 2020 at 14:12)</a>:</h4>
<p>There was an additional concern about singling out VS Code as the primary implementation, and an additional technical question about the location of VS Code plugin.</p>



<a name="198672983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198672983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198672983">(May 25 2020 at 14:13)</a>:</h4>
<p>For location, I think moving rust-analyzer vs code plugin to the existing rls-vscode repo makes sense, at least until we deprecate RLS.</p>



<a name="198672994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198672994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198672994">(May 25 2020 at 14:13)</a>:</h4>
<p>You haven't mentioned "toggle inlay hints" and inlayHinst in lsp extensions</p>



<a name="198673060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198673060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198673060">(May 25 2020 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> I belive they are for the next release?</p>



<a name="198673135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198673135" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198673135">(May 25 2020 at 14:14)</a>:</h4>
<p><a href="/user_uploads/4715/kiECtVqq8BBkT-CkwxbzRA8J/image.png">image.png</a> ?</p>
<div class="message_inline_image"><a href="/user_uploads/4715/kiECtVqq8BBkT-CkwxbzRA8J/image.png" title="image.png"><img src="/user_uploads/4715/kiECtVqq8BBkT-CkwxbzRA8J/image.png"></a></div>



<a name="198673143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198673143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198673143">(May 25 2020 at 14:14)</a>:</h4>
<p>We now publish release from last night's nightly, so PRs merged today will be released next week</p>



<a name="198673158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198673158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198673158">(May 25 2020 at 14:15)</a>:</h4>
<p>(and the tag is just wrong :D )</p>



<a name="198673220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198673220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198673220">(May 25 2020 at 14:15)</a>:</h4>
<p>wait, no, if the tag is wrong, that means that changelogs are wrong <span aria-label="fear" class="emoji emoji-1f628" role="img" title="fear">:fear:</span> ?</p>



<a name="198673302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198673302" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198673302">(May 25 2020 at 14:16)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/4319">https://github.com/rust-analyzer/rust-analyzer/issues/4319</a></p>



<a name="198673315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198673315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198673315">(May 25 2020 at 14:16)</a>:</h4>
<p>Should really look into fixing that....</p>



<a name="198686061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198686061" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198686061">(May 25 2020 at 16:42)</a>:</h4>
<p>As part of the "two step" LSP initialization I also snuck in server info so the server name and version are passed to the client. We should be able to use that for bug tracking</p>



<a name="198686137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198686137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198686137">(May 25 2020 at 16:43)</a>:</h4>
<p>We also fall back properly on code actions if using an older client (not sure if that fixed anything in the wild but if someone's code actions mysteriously start showing up now....)</p>



<a name="198688384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198688384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198688384">(May 25 2020 at 17:18)</a>:</h4>
<blockquote>
<p>We should be able to use that for bug tracking</p>
</blockquote>
<p>Don't we already have "Rust Analyzer: server version" command for that?</p>



<a name="198754909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/198754909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#198754909">(May 26 2020 at 12:36)</a>:</h4>
<p>Definitely. But if someone dumps logs of LSP requests or something...</p>



<a name="199373559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199373559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199373559">(Jun 01 2020 at 14:10)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> !</p>



<a name="199373573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199373573" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199373573">(Jun 01 2020 at 14:10)</a>:</h4>
<p>We have a new release: <a href="https://rust-analyzer.github.io/thisweek/2020/06/01/changelog-27.html">https://rust-analyzer.github.io/thisweek/2020/06/01/changelog-27.html</a></p>



<a name="199373643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199373643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199373643">(Jun 01 2020 at 14:11)</a>:</h4>
<p>I can name two highlights of the week (but maybe I am missing some)</p>



<a name="199373691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199373691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199373691">(Jun 01 2020 at 14:11)</a>:</h4>
<ul>
<li>chalk updates and incremental improvements to type inference, which mean that there are fewer and fewer cases where we fail to infer types</li>
</ul>



<a name="199373808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199373808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199373808">(Jun 01 2020 at 14:12)</a>:</h4>
<ul>
<li>improved manual, which contans the full(-ish) list of features, with links to the source: <a href="https://rust-analyzer.github.io/manual.html#features">https://rust-analyzer.github.io/manual.html#features</a></li>
</ul>



<a name="199373934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199373934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199373934">(Jun 01 2020 at 14:13)</a>:</h4>
<p>The RFC is now merged, so I think we should now tackle the next steps of merging RLS and rust-analyzer:</p>
<ul>
<li>distribution via rustup</li>
<li>unifing the extensions</li>
</ul>



<a name="199374067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374067">(Jun 01 2020 at 14:14)</a>:</h4>
<p>I think we can do 1. right now (I guess I need to ask <span class="user-mention" data-user-id="121055">@Pietro Albini</span> what are specific steps here).</p>
<p>For 2., I'd love to clean up our inlay hints and runnables LSP extensions first, and then we should be ready to go</p>



<a name="199374110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374110">(Jun 01 2020 at 14:15)</a>:</h4>
<p>I also would like to opimize the meta process around rust-analyzer, which sounds hard:</p>



<a name="199374173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374173">(Jun 01 2020 at 14:15)</a>:</h4>
<ul>
<li>It seems like we no longer have enough review bandwidth, which, on the one hand, a good problem to have, but, on the other hand, is still a problem :-(</li>
</ul>



<a name="199374350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374350">(Jun 01 2020 at 14:16)</a>:</h4>
<ul>
<li>it seems like it's hard to share "institutional" knowledge about how rust-analyzer works. That is, during reviews I sometimes find myself saying things like "we shouldn't add dependency on module X to module Y here", but I think there's no way a new contributor can figure this out.</li>
</ul>



<a name="199374385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374385" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374385">(Jun 01 2020 at 14:17)</a>:</h4>
<p>hmm</p>



<a name="199374398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374398" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374398">(Jun 01 2020 at 14:17)</a>:</h4>
<p>(sorry, was reading manuals)</p>



<a name="199374400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374400">(Jun 01 2020 at 14:17)</a>:</h4>
<p>In general, i am interested in hearing how we can more effectively channel a lot of work people are willing to do on rust-analyzer :D</p>



<a name="199374406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374406" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374406">(Jun 01 2020 at 14:17)</a>:</h4>
<p>those are indeed hard problems :)</p>



<a name="199374441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374441">(Jun 01 2020 at 14:18)</a>:</h4>
<p>I feel like the "trick" with reviewer bandwidth is to have more reviewers</p>



<a name="199374529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374529">(Jun 01 2020 at 14:18)</a>:</h4>
<p>which... as you can tell by a glance at rustc's list of pending PRs... is sometimes not so easy</p>



<a name="199374579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374579">(Jun 01 2020 at 14:19)</a>:</h4>
<p>Yeah, and the trick to "more reviewers" is sharing "institutional knowledge" :)</p>



<a name="199374587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374587">(Jun 01 2020 at 14:19)</a>:</h4>
<p>lol, yes,</p>



<a name="199374615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374615" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374615">(Jun 01 2020 at 14:19)</a>:</h4>
<p>I feel like efforts like the rustc-dev-guide (and chalk book) are maybe helpful here but I'm not 100% sure how much</p>



<a name="199374710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374710">(Jun 01 2020 at 14:20)</a>:</h4>
<p>this specific example -- showing some kind of "structure" between models that is latent in the code -- is an interesting one that has sort of prodded me to want to use more crates than I would otherwise have used</p>



<a name="199374737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374737">(Jun 01 2020 at 14:20)</a>:</h4>
<p>(we're debating exactly this question around chalk)</p>



<a name="199374754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374754">(Jun 01 2020 at 14:20)</a>:</h4>
<p>I personally don't worry a lot about "code quality" aspect of review -- as long as code has tests, it should be fine to refactor it in subsequent PRs (but I am willing to change my optinion here, if people think otherwise). </p>
<p>What I worry more is drive-by "architecture" changes, which expand API of certain things, in ways which are not always appropriate. But figuring out what's appropriate is kind of hard...</p>



<a name="199374827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374827" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374827">(Jun 01 2020 at 14:21)</a>:</h4>
<p>/me nods</p>



<a name="199374910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374910" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374910">(Jun 01 2020 at 14:22)</a>:</h4>
<p>to what extent do you think the arch. can be written down or documented,</p>



<a name="199374934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374934">(Jun 01 2020 at 14:22)</a>:</h4>
<p>vs you not really knowing what those constraints are until you see them violated :)</p>



<a name="199374946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374946">(Jun 01 2020 at 14:22)</a>:</h4>
<p>We already have it documented, in architecture.md document</p>



<a name="199374970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199374970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199374970">(Jun 01 2020 at 14:22)</a>:</h4>
<p>The problem is, I haven't updated it in a year or so...</p>



<a name="199375025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375025">(Jun 01 2020 at 14:23)</a>:</h4>
<p>My immediate action items are:</p>
<ul>
<li>refresh the doc, so that it makes sense</li>
<li>make a point to always write down every "architecture" comment I do during review</li>
</ul>



<a name="199375061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375061" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375061">(Jun 01 2020 at 14:23)</a>:</h4>
<p>I am also entertaining the idea of generating architecture docs from code, the same way we now generate feature documentation</p>



<a name="199375118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375118">(Jun 01 2020 at 14:24)</a>:</h4>
<p>interesting</p>



<a name="199375363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375363">(Jun 01 2020 at 14:26)</a>:</h4>
<p>(deleted)</p>



<a name="199375366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375366">(Jun 01 2020 at 14:26)</a>:</h4>
<p>Also, orthogonally, I again was thinking about how I'd love salsa to be more like ECS (with entitities in flat vectors), and didn't come to any conclusions about what exactly do I want</p>



<a name="199375406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375406" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375406">(Jun 01 2020 at 14:27)</a>:</h4>
<p>I've been thinking about salsa too, not sure if you saw some of my notes</p>



<a name="199375429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375429" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375429">(Jun 01 2020 at 14:27)</a>:</h4>
<p>I think not</p>



<a name="199375445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375445" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375445">(Jun 01 2020 at 14:27)</a>:</h4>
<p>I want to do a few things</p>



<a name="199375463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375463">(Jun 01 2020 at 14:27)</a>:</h4>
<p>/me listens</p>



<a name="199375485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375485">(Jun 01 2020 at 14:27)</a>:</h4>
<p>one of them is to simplify the thread handling so that by default we assume queries are idempotent</p>



<a name="199375534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375534">(Jun 01 2020 at 14:28)</a>:</h4>
<p>meaning that if two threads start executing same query at same time it just runs twice</p>



<a name="199375557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375557">(Jun 01 2020 at 14:28)</a>:</h4>
<p>with a side layer for declaring "synchronized" queries where that is inappropriate -- I think that rust-analyzer would need this around procedural macros</p>



<a name="199375569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375569">(Jun 01 2020 at 14:28)</a>:</h4>
<p>(does rust-analyzer actually <em>run</em> procedural macros? I remember us talking about it at some point)</p>



<a name="199375584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375584" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375584">(Jun 01 2020 at 14:28)</a>:</h4>
<p>Yup, we now run procedural macros!</p>



<a name="199375590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375590">(Jun 01 2020 at 14:28)</a>:</h4>
<p>(derive only)</p>



<a name="199375595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375595">(Jun 01 2020 at 14:28)</a>:</h4>
<p>I thought so</p>



<a name="199375612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375612">(Jun 01 2020 at 14:29)</a>:</h4>
<p>anyway that is partly just to simplify the code but also</p>



<a name="199375627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375627">(Jun 01 2020 at 14:29)</a>:</h4>
<blockquote>
<p>need this around procedural macros</p>
</blockquote>
<p>And also around the main <code>crate_def_map</code> query</p>



<a name="199375644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375644" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375644">(Jun 01 2020 at 14:29)</a>:</h4>
<p>the more important change would be added support for "fixed-point queries" that can accommodate cycles</p>



<a name="199375668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375668">(Jun 01 2020 at 14:29)</a>:</h4>
<p>which would allow us to move some of that logic out from chalk and into salsa</p>



<a name="199375673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375673" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375673">(Jun 01 2020 at 14:29)</a>:</h4>
<p>and start to cache chalk queries</p>



<a name="199375683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375683">(Jun 01 2020 at 14:29)</a>:</h4>
<p>I think it's "quite doable"</p>



<a name="199375700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375700" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375700">(Jun 01 2020 at 14:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/199375627">said</a>:</p>
<blockquote>
<p>And also around the main <code>crate_def_map</code> query</p>
</blockquote>
<p>say a bit more? what is this query?</p>



<a name="199375755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375755">(Jun 01 2020 at 14:30)</a>:</h4>
<p>This query computes the set of names visible inside each module</p>



<a name="199375771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375771">(Jun 01 2020 at 14:30)</a>:</h4>
<p>So, import resolution and macro expansion</p>



<a name="199375796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375796" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375796">(Jun 01 2020 at 14:30)</a>:</h4>
<p>It is clear, at this point, that this is basically the single thing that matter to make IDE work well</p>



<a name="199375839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375839">(Jun 01 2020 at 14:31)</a>:</h4>
<p>Like, everything else you could do somehow, and it would work, because you can always do bite-sized chunks of work</p>



<a name="199375853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375853">(Jun 01 2020 at 14:31)</a>:</h4>
<p>why would it require sychronization</p>



<a name="199375876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375876" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375876">(Jun 01 2020 at 14:31)</a>:</h4>
<p>because it's quite expensive?</p>



<a name="199375881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375881" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375881">(Jun 01 2020 at 14:31)</a>:</h4>
<p>Yup</p>



<a name="199375887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375887">(Jun 01 2020 at 14:31)</a>:</h4>
<p>I feel it would be just expensive CPU time.</p>



<a name="199375898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375898" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375898">(Jun 01 2020 at 14:31)</a>:</h4>
<p>yeah, those are basically the two reasons to want to synchronize: expensive and/or not truly deterministic</p>



<a name="199375991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199375991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199375991">(Jun 01 2020 at 14:32)</a>:</h4>
<p>(I need to profile things, but my gut feeling is that the most expensive bit today is macro-by-example expansion, as that manipulates heavy data structures)</p>



<a name="199376020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376020">(Jun 01 2020 at 14:32)</a>:</h4>
<p>and it's not very incrementalizable, right?</p>



<a name="199376074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376074" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376074">(Jun 01 2020 at 14:33)</a>:</h4>
<p>Hm, no, each macro expansion incrementalizes well-enough</p>



<a name="199376081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376081">(Jun 01 2020 at 14:33)</a>:</h4>
<p>I wonder if it would make sense to talk through how it works again</p>



<a name="199376097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376097" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376097">(Jun 01 2020 at 14:33)</a>:</h4>
<p>no, sorry, I meant the query as a whole</p>



<a name="199376103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376103" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376103">(Jun 01 2020 at 14:33)</a>:</h4>
<p>I am thinking more about from-scrach perf, and the amount of stuff we need to store in memory</p>



<a name="199376162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376162">(Jun 01 2020 at 14:34)</a>:</h4>
<p>The query as a whole is incrementalizable well enough I would think</p>



<a name="199376234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376234" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376234">(Jun 01 2020 at 14:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/199375839">said</a>:</p>
<blockquote>
<p>Like, everything else you could do somehow, and it would work, because you can always do bite-sized chunks of work</p>
</blockquote>
<p>maybe I didn't understand this sentence</p>



<a name="199376285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376285">(Jun 01 2020 at 14:34)</a>:</h4>
<p>Everything else works on either per-file or per-function basis</p>



<a name="199376330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376330">(Jun 01 2020 at 14:35)</a>:</h4>
<p>And is embarassigbly parallel and easy to make lazy</p>



<a name="199376359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376359" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376359">(Jun 01 2020 at 14:35)</a>:</h4>
<p>right so that suggests that it's not as incrementalizable as you might like</p>



<a name="199376367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376367">(Jun 01 2020 at 14:35)</a>:</h4>
<p>maybe that is not the right word</p>



<a name="199376384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376384">(Jun 01 2020 at 14:35)</a>:</h4>
<p>For resolving imports and expanding macros, I feel we just have to do it fast</p>



<a name="199376412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376412" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376412">(Jun 01 2020 at 14:35)</a>:</h4>
<p>what I meant is, if you need to resolve "one name" or something, do you ultimately have to do the entire crate etc</p>



<a name="199376428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376428">(Jun 01 2020 at 14:36)</a>:</h4>
<p>I guess, the problem is "the input is big"</p>



<a name="199376565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376565">(Jun 01 2020 at 14:37)</a>:</h4>
<p>I don't think that this is an insurmontable problem -- processing the whole crate could be made fast enough, but it requires some careful coding</p>



<a name="199376606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376606" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376606">(Jun 01 2020 at 14:37)</a>:</h4>
<p>For example, we need to do something non-trivial to correctly parallelize the thing</p>



<a name="199376628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376628">(Jun 01 2020 at 14:37)</a>:</h4>
<p>that reminds me that</p>



<a name="199376676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376676">(Jun 01 2020 at 14:38)</a>:</h4>
<p>if we did the things I wanted to do above re: chalk and salsa integration</p>



<a name="199376690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376690">(Jun 01 2020 at 14:38)</a>:</h4>
<p>ideally, we should process all crates in parallel (which is constrained by DAG of deps), but we should also start parallely parsing each crate before fully resolving all deps</p>



<a name="199376703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376703" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376703">(Jun 01 2020 at 14:38)</a>:</h4>
<p>I think it would be parallelized as well and not require any state that salsa doesn't manage</p>



<a name="199376767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376767">(Jun 01 2020 at 14:39)</a>:</h4>
<p>(and salsa would be much less heavyweight in terms of how it manages threads in the common case, since it would basically just be a map that you first read and only write at the end)</p>



<a name="199376780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376780">(Jun 01 2020 at 14:39)</a>:</h4>
<p>More generally, I think the next big thing to tackle in rust-analyzer experiment is to make sure that we can saturate at least 4 cores :)</p>



<a name="199376800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376800" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376800">(Jun 01 2020 at 14:39)</a>:</h4>
<p>not particularly related to name resolution, although it'd be interesting to think whether the model can be stretched in some way to accommodate name resolution, since that is fundamentally also a fixed point process</p>



<a name="199376852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376852" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376852">(Jun 01 2020 at 14:40)</a>:</h4>
<p>I don't think (right now) you are re-using anything in between name resolutions apart from the expansions of macros, is that right?</p>



<a name="199376899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376899" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376899">(Jun 01 2020 at 14:40)</a>:</h4>
<p>Not really</p>



<a name="199376909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376909">(Jun 01 2020 at 14:40)</a>:</h4>
<p>There's an IR between syntax and name res</p>



<a name="199376932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376932">(Jun 01 2020 at 14:40)</a>:</h4>
<p>(the set of defs in the current file)</p>



<a name="199376944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376944">(Jun 01 2020 at 14:40)</a>:</h4>
<p>We re-use this IR</p>



<a name="199376983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199376983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199376983">(Jun 01 2020 at 14:41)</a>:</h4>
<p>(And I have been itching to rewrite this IR for like three months already)</p>



<a name="199386698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199386698" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Coenen Benjamin <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199386698">(Jun 01 2020 at 15:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/199374579">said</a>:</p>
<blockquote>
<p>Yeah, and the trick to "more reviewers" is sharing "institutional knowledge" :)</p>
</blockquote>
<p>Yes I try when I have free time to review some PRs to help. But I'm not always confident and don't want to make a bad review. So this kind of documentations could be very useful :)</p>



<a name="199392671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199392671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199392671">(Jun 01 2020 at 16:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/199373691">said</a>:</p>
<blockquote>
<ul>
<li>chalk updates and incremental improvements to type inference, which mean that there are fewer and fewer cases where we fail to infer types</li>
</ul>
</blockquote>
<p>Chalk is moving so fast at the moment that I'm not even keeping up with integrating all the new features -- we still have to integrate the integer/float variables support, and array types for example (and opaque types are in progress, of course)</p>



<a name="199392774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199392774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199392774">(Jun 01 2020 at 16:47)</a>:</h4>
<p>Lol yes, <strong>everything</strong> moves so fast now :)</p>



<a name="199396539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199396539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199396539">(Jun 01 2020 at 17:17)</a>:</h4>
<p>Btw the integer/float variable support is great. (From my experience updating the rustc integration)</p>



<a name="199396875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199396875" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199396875">(Jun 01 2020 at 17:20)</a>:</h4>
<p>My bandwidth has certainly reduced</p>



<a name="199396914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199396914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199396914">(Jun 01 2020 at 17:20)</a>:</h4>
<p>Maybe it will be the year of Rust IDE</p>



<a name="199482796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199482796" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vsrs <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199482796">(Jun 02 2020 at 12:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/199374067">said</a>:</p>
<blockquote>
<p>For 2., I'd love to clean up our inlay hints and runnables LSP extensions first, and then we should be ready to go</p>
</blockquote>
<p>I'm a bit concerned with the current runnables status and usage. My gut feeling is that it is a cool feature currently used wrong.</p>
<p>At first glance, it fits great for running tests, but it is not (IMHO). We need not only to run a test but also to gather results and show them in the UI or start a debugger. With runnables there are more problems than profit, especially with debug sessions.</p>
<p>I think this concept is better suited for, for example, <code>cargo asm</code> or <code>cargo expand</code> integration. I.e. for any <em>shell</em> command that needs a context-specific function\module name.</p>
<p>Yes, this includes <code>cargo test...</code>. But it should not be the main way to run\debug tests.</p>



<a name="199483159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/199483159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#199483159">(Jun 02 2020 at 12:26)</a>:</h4>
<p>@vsrs I think there's some truth to that. It would be nice if we could provide some sort of standard "debugger engine hooks" or conform to some standard "test adapter api" for those types of things.</p>



<a name="200101518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200101518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200101518">(Jun 08 2020 at 14:04)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> , it's time for another syncup</p>



<a name="200101634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200101634" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200101634">(Jun 08 2020 at 14:05)</a>:</h4>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/06/08/changelog-28.html">https://rust-analyzer.github.io/thisweek/2020/06/08/changelog-28.html</a></p>



<a name="200101776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200101776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200101776">(Jun 08 2020 at 14:06)</a>:</h4>
<p>There's a bunch of stuff in this release, my personal favorite one is support for <code>-&gt; impl Trait</code> :)</p>



<a name="200101929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200101929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200101929">(Jun 08 2020 at 14:07)</a>:</h4>
<p>Proceduraly, I did some work on documenting more of the review and contributing process, in hope to make the review process, ideally, embarrassingly parallel.</p>



<a name="200102026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102026">(Jun 08 2020 at 14:08)</a>:</h4>
<p>We also have an in-progress PR which adds rust-analyzer to rust-lang/rust project: <a href="https://github.com/rust-lang/rust/pull/72978#issuecomment-640163536">https://github.com/rust-lang/rust/pull/72978#issuecomment-640163536</a></p>



<a name="200102088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102088" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102088">(Jun 08 2020 at 14:08)</a>:</h4>
<p>It fails with a completely bewildering issue, so if anyone knows whats going on, please speak up :)</p>



<a name="200102093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102093">(Jun 08 2020 at 14:08)</a>:</h4>
<p>This is so that we do builds/releases with rust-lang/rust infra or what?</p>



<a name="200102127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102127">(Jun 08 2020 at 14:09)</a>:</h4>
<p>Yep, and shipping with rustup as an end-goal</p>



<a name="200102199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102199" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102199">(Jun 08 2020 at 14:09)</a>:</h4>
<p>We also switched to using chalk from <code>crates.io</code>, and I think that maybe it makes sense to talk though our long-term plan here?</p>



<a name="200102283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102283">(Jun 08 2020 at 14:10)</a>:</h4>
<p>Ie, to have the dreaded "monorepo" meeting, instead of postponing it :)</p>



<a name="200102288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102288">(Jun 08 2020 at 14:10)</a>:</h4>
<p>lol yes perhaps</p>



<a name="200102336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102336">(Jun 08 2020 at 14:10)</a>:</h4>
<p>it's probably not "the meeting"</p>



<a name="200102379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102379">(Jun 08 2020 at 14:11)</a>:</h4>
<p>at minimum, the time slot we normally use is not one that <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> is able to attend afaik</p>



<a name="200102404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102404">(Jun 08 2020 at 14:11)</a>:</h4>
<p>and I know that he's got strong opinions</p>



<a name="200102423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102423" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102423">(Jun 08 2020 at 14:11)</a>:</h4>
<p>and would probably like to take part in the discussion</p>



<a name="200102430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102430">(Jun 08 2020 at 14:11)</a>:</h4>
<p>I personally am  focusing on non-cargo build systems and VFS right now -- it's about time we get these foundational bits right :)</p>



<a name="200102469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102469">(Jun 08 2020 at 14:11)</a>:</h4>
<p>that said, I personally think we can kick this can down the road a bit further</p>



<a name="200102556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102556">(Jun 08 2020 at 14:12)</a>:</h4>
<blockquote>
<p>that said, I personally think we can kick this can down the road a bit further</p>
</blockquote>
<p>Yeah, I think I agree :)</p>



<a name="200102557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102557">(Jun 08 2020 at 14:12)</a>:</h4>
<p>i.e., we're still gathering data on the new clippy submodule integration etc, though I think that <em>seems</em> to be working out fairly well</p>



<a name="200102598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102598">(Jun 08 2020 at 14:12)</a>:</h4>
<p>and I think that offers a tantalizing middle ground</p>



<a name="200102639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102639">(Jun 08 2020 at 14:12)</a>:</h4>
<p>plus the "ship a chalk every week" infra is quite new etc</p>



<a name="200102651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102651" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102651">(Jun 08 2020 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200102430">said</a>:</p>
<blockquote>
<p>I personally am  focusing on non-cargo build systems and VFS right now -- it's about time we get these foundational bits right :)</p>
</blockquote>
<p>interesting</p>



<a name="200102678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102678" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102678">(Jun 08 2020 at 14:13)</a>:</h4>
<p>say a bit more?</p>



<a name="200102726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102726">(Jun 08 2020 at 14:13)</a>:</h4>
<p>(I think local imports and having to restart the server after project structure changes are the issues with most duplicates on the tracker.)</p>



<a name="200102747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102747">(Jun 08 2020 at 14:13)</a>:</h4>
<p>For non-cargo use-cases -- mostly documenting and ironing out bugs in our rust-project.json thing:</p>
<p><a href="https://rust-analyzer.github.io/manual.html#non-cargo-based-projects">https://rust-analyzer.github.io/manual.html#non-cargo-based-projects</a></p>



<a name="200102895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102895" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102895">(Jun 08 2020 at 14:14)</a>:</h4>
<p>For VFS -- figuring out the right abstraction in terms of salsa queries and stored data, so that we can easily plug watchman and solve painful problems like dynamic changes to the set of crates.</p>



<a name="200102939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200102939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200102939">(Jun 08 2020 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> there's actually something I want to chat about with respect to VFS and salsa</p>



<a name="200103097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103097" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103097">(Jun 08 2020 at 14:16)</a>:</h4>
<p>Question:</p>
<p>Suppose user creates a new file in <code>src</code> directory, <code>foo.rs</code>. How do we figure out that we don't have to recheck every <code>mod m;</code> declaration form a standard library?</p>



<a name="200103150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103150">(Jun 08 2020 at 14:16)</a>:</h4>
<p>(in theory, new file in user's src directory <em>could</em> affect module structure of creates from std or <a href="http://crates.io">crates.io</a>)</p>



<a name="200103396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103396">(Jun 08 2020 at 14:18)</a>:</h4>
<blockquote>
<p>(I think local imports and having to restart the server after project structure changes are the issues with most duplicates on the tracker.)</p>
</blockquote>
<p>yeah, it feels like we get one of those almost every day <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span> makes me almost want to look into local imports, but there's still some type system stuff I want to focus on</p>



<a name="200103458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103458" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103458">(Jun 08 2020 at 14:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200103150">said</a>:</p>
<blockquote>
<p>(in theory, new file in user's src directory <em>could</em> affect module structure of creates from std or <a href="http://crates.io">crates.io</a>)</p>
</blockquote>
<p>how?</p>



<a name="200103539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103539">(Jun 08 2020 at 14:19)</a>:</h4>
<p>it could have had a <code>#[path]</code> attribute, for example</p>



<a name="200103555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103555">(Jun 08 2020 at 14:19)</a>:</h4>
<p>(maybe we should fork that out into its own topic but I feel like I'm a bit confused by the question so far) :)</p>



<a name="200103581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103581">(Jun 08 2020 at 14:19)</a>:</h4>
<p>well, having a path attribute would not alter the structure of the a crate in std..?</p>



<a name="200103610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103610">(Jun 08 2020 at 14:19)</a>:</h4>
<p>it might read a file from a crate in std</p>



<a name="200103627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103627">(Jun 08 2020 at 14:19)</a>:</h4>
<p>The module might go from unresolved to resolved state</p>



<a name="200103707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103707">(Jun 08 2020 at 14:20)</a>:</h4>
<p>I'm not sure what that means</p>



<a name="200103726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103726">(Jun 08 2020 at 14:20)</a>:</h4>
<p>yeah, let me rephrase this</p>



<a name="200103753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103753">(Jun 08 2020 at 14:20)</a>:</h4>
<p>So, when we create a new file, we need to recalculate <em>some</em> module declarations</p>



<a name="200103791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103791">(Jun 08 2020 at 14:20)</a>:</h4>
<p>Because this might be a file for a module which was unresolved before</p>



<a name="200103817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103817" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103817">(Jun 08 2020 at 14:21)</a>:</h4>
<p>OK, now I'm starting to see. You are saying:</p>



<a name="200103823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103823">(Jun 08 2020 at 14:21)</a>:</h4>
<p>How do we limit the set of module declrations we need to check?</p>



<a name="200103828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103828" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103828">(Jun 08 2020 at 14:21)</a>:</h4>
<p>Imagine that libstd had a <code>#[path]</code></p>



<a name="200103844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103844" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103844">(Jun 08 2020 at 14:21)</a>:</h4>
<p>that somehow reached into the user's source directory</p>



<a name="200103851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103851">(Jun 08 2020 at 14:21)</a>:</h4>
<p>and they created a new file</p>



<a name="200103872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103872">(Jun 08 2020 at 14:21)</a>:</h4>
<p>obviously this is not the case</p>



<a name="200103885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103885">(Jun 08 2020 at 14:21)</a>:</h4>
<p>but how do we know this based on <em>salsa</em>?</p>



<a name="200103967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200103967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200103967">(Jun 08 2020 at 14:22)</a>:</h4>
<p>Exactly!</p>



<a name="200104053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104053" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104053">(Jun 08 2020 at 14:22)</a>:</h4>
<p>Interesting question. I can imagine a few ways go about it, but it also reminds me of the question of "lazy inputs"</p>



<a name="200104093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104093">(Jun 08 2020 at 14:22)</a>:</h4>
<p>My current thinking (and current impl) is that we construct explict "sets of files" outside of salsa, and that each crates has a single "set of files"</p>



<a name="200104145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104145">(Jun 08 2020 at 14:23)</a>:</h4>
<p>Ie, we upfront sepcify the super-set of files which can comprise the crate</p>



<a name="200104209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104209" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104209">(Jun 08 2020 at 14:23)</a>:</h4>
<p>And yes, this is inherently in tension with the desire to be lazy</p>



<a name="200104307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104307">(Jun 08 2020 at 14:24)</a>:</h4>
<blockquote>
<p>Ie, we upfront sepcify the super-set of files which can comprise the crate</p>
</blockquote>
<p>And this is very much <em>not</em> how rustc works currently</p>



<a name="200104415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104415">(Jun 08 2020 at 14:25)</a>:</h4>
<p>right so ..</p>



<a name="200104439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104439">(Jun 08 2020 at 14:25)</a>:</h4>
<p>I guess that the not-lazy version I was imagining is basically the same or similar</p>



<a name="200104461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104461">(Jun 08 2020 at 14:25)</a>:</h4>
<p>that you might have an "input" which is a list of filenames per directory for example</p>



<a name="200104481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104481">(Jun 08 2020 at 14:25)</a>:</h4>
<p>and we can monitor what is referenced</p>



<a name="200104493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104493" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104493">(Jun 08 2020 at 14:25)</a>:</h4>
<p>but it seems like what we really would prefer is that</p>



<a name="200104560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104560">(Jun 08 2020 at 14:26)</a>:</h4>
<p>we have a "lazy" input where we ask if a file exists and read it only then, and then remember</p>



<a name="200104587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104587">(Jun 08 2020 at 14:26)</a>:</h4>
<p>and then when modifications occur, we check against the files that have been read thus far</p>



<a name="200104596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104596" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104596">(Jun 08 2020 at 14:26)</a>:</h4>
<p>I sort of remember hacking up something like this for lark</p>



<a name="200104617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104617" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104617">(Jun 08 2020 at 14:26)</a>:</h4>
<p>but I think it's a pattern that salsa probably ought to support natively</p>



<a name="200104629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104629" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104629">(Jun 08 2020 at 14:26)</a>:</h4>
<p>I think I hacked it up with a "dummy" input</p>



<a name="200104685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104685" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104685">(Jun 08 2020 at 14:27)</a>:</h4>
<p>i.e., we had a side cache that you could read from and when you did we registered a read against some dummy input that was always <code>()</code>, I forget.</p>



<a name="200104695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104695">(Jun 08 2020 at 14:27)</a>:</h4>
<p>I am not exactly sure that we need this. The problem with purely lazy model is that you can't diagnose the problem that user crated <code>foo.rs</code>, but forgot about <code>mod foo;</code>, becuse you just don't see <code>foo.rs</code></p>



<a name="200104705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104705">(Jun 08 2020 at 14:27)</a>:</h4>
<p>but it seems easy enough for salsa to support this with some form of callback</p>



<a name="200104769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104769">(Jun 08 2020 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200104695">said</a>:</p>
<blockquote>
<p>I am not exactly sure that we need this. The problem with purely lazy model is that you can't diagnose the problem that user crated <code>foo.rs</code>, but forgot about <code>mod foo;</code>, becuse you just don't see <code>foo.rs</code></p>
</blockquote>
<p>indeed. this seems sort of inherent, no? but in any case I would imagine a kind of hybrid</p>



<a name="200104864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104864">(Jun 08 2020 at 14:28)</a>:</h4>
<p>where you <em>can</em> set value but you can also wait until they are demanded?</p>



<a name="200104901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104901" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104901">(Jun 08 2020 at 14:28)</a>:</h4>
<p>I guess a good question woul be to step back and ask what constraints we're trying to solve exactly</p>



<a name="200104930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200104930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200104930">(Jun 08 2020 at 14:28)</a>:</h4>
<p>you mentioned one question, I'm not sure whether you also wanted to avoid scanning directories aggressively</p>



<a name="200105003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105003">(Jun 08 2020 at 14:29)</a>:</h4>
<p>Scanning I think should be OK</p>



<a name="200105045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105045" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105045">(Jun 08 2020 at 14:29)</a>:</h4>
<p>The problem is that sometimes you might not know what to scan.</p>



<a name="200105090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105090" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105090">(Jun 08 2020 at 14:29)</a>:</h4>
<p>Ie, if the project includes <code>#[path = "/some/completely/unrelated/dir"] mod foo;</code></p>



<a name="200105108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105108">(Jun 08 2020 at 14:30)</a>:</h4>
<p>yeah so that maybe fits this hybrid model</p>



<a name="200105186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105186">(Jun 08 2020 at 14:30)</a>:</h4>
<p>though it makes the question of "Give me the keys" a bit trickier</p>



<a name="200105315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105315">(Jun 08 2020 at 14:31)</a>:</h4>
<p>I also was thinking about basically hacking this around....</p>
<p>When we try to read something which is ourside of the current set of dirs, we get back a <code>None</code>, but we also arrange to call <code>.set</code> on the next iteration of the event loop.</p>



<a name="200105610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105610">(Jun 08 2020 at 14:33)</a>:</h4>
<p>That's interesting</p>



<a name="200105678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105678" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105678">(Jun 08 2020 at 14:33)</a>:</h4>
<p>I guess there is also a legit question of</p>



<a name="200105694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105694">(Jun 08 2020 at 14:33)</a>:</h4>
<p>what range of things we <em>want</em> a path to be able to access anyway</p>



<a name="200105715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105715">(Jun 08 2020 at 14:34)</a>:</h4>
<p>I wonder if rustc imposes any limitations</p>



<a name="200105774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105774">(Jun 08 2020 at 14:34)</a>:</h4>
<p>I feel like I'd prefer that sources can't read files from random locations when building myself :)</p>



<a name="200105831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105831">(Jun 08 2020 at 14:34)</a>:</h4>
<p>I'm thinking what a lazy input really means</p>



<a name="200105841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105841" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105841">(Jun 08 2020 at 14:34)</a>:</h4>
<p>I guess it's basically a "volatile query"</p>



<a name="200105854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105854" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105854">(Jun 08 2020 at 14:34)</a>:</h4>
<p>(like, in its most pure form)</p>



<a name="200105883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105883">(Jun 08 2020 at 14:35)</a>:</h4>
<p>Yes, there's also build-system desire to know the set of files upfront. For example, rust+buck generally already list the set of files per crate.</p>



<a name="200105905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105905" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105905">(Jun 08 2020 at 14:35)</a>:</h4>
<p>that's probably not what we want because it implies that we have to 'poll' each file to know if they changed, vs being informed up front by vscode?</p>



<a name="200105967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200105967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200105967">(Jun 08 2020 at 14:35)</a>:</h4>
<blockquote>
<p>nikomatsakis: I'm thinking what a lazy input really means<br>
nikomatsakis: I guess it's basically a "volatile query"</p>
</blockquote>
<p>Not really I think</p>



<a name="200106039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106039" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106039">(Jun 08 2020 at 14:36)</a>:</h4>
<p>today, if you have an input, and you read an invalid key, you get a panic</p>



<a name="200106048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106048">(Jun 08 2020 at 14:36)</a>:</h4>
<p>the hybrid I could imagine would be that you get a callback</p>



<a name="200106075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106075">(Jun 08 2020 at 14:36)</a>:</h4>
<p>(but you still have to invoke <code>set</code> for any <em>changes</em>)</p>



<a name="200106091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106091" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106091">(Jun 08 2020 at 14:36)</a>:</h4>
<p>I think I've implemented that at some point already?</p>



<a name="200106106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106106" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106106">(Jun 08 2020 at 14:36)</a>:</h4>
<p>maybe it all seems familiar</p>



<a name="200106122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106122" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106122">(Jun 08 2020 at 14:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200105967">said</a>:</p>
<blockquote>
<p>Not really I think</p>
</blockquote>
<p>in what way not?</p>



<a name="200106144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106144">(Jun 08 2020 at 14:36)</a>:</h4>
<p><a href="https://salsa-rs.github.io/salsa/common_patterns/on_demand_inputs.html">https://salsa-rs.github.io/salsa/common_patterns/on_demand_inputs.html</a></p>



<a name="200106237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106237">(Jun 08 2020 at 14:37)</a>:</h4>
<blockquote>
<p>in what way not?</p>
</blockquote>
<p>We don't have to make the query volatile. We need a contract that the caller would start <code>.set</code>ing the key after we've first looked at it.</p>



<a name="200106257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106257">(Jun 08 2020 at 14:37)</a>:</h4>
<p>yes, ok, so that is what I listed above</p>



<a name="200106288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106288">(Jun 08 2020 at 14:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200106075">said</a>:</p>
<blockquote>
<p>(but you still have to invoke <code>set</code> for any <em>changes</em>)</p>
</blockquote>
<p>ie here</p>



<a name="200106350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106350">(Jun 08 2020 at 14:38)</a>:</h4>
<p>and yes I think you can model it today with some synthetic reads, much like that page suggests</p>



<a name="200106356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106356" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106356">(Jun 08 2020 at 14:38)</a>:</h4>
<p>so is that not what you want?</p>



<a name="200106383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106383">(Jun 08 2020 at 14:38)</a>:</h4>
<p>I don't know what I want, that the problem :)</p>



<a name="200106412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106412" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106412">(Jun 08 2020 at 14:38)</a>:</h4>
<p>Like, the eager model with explicit sets of files seems very compelling</p>



<a name="200106450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106450">(Jun 08 2020 at 14:39)</a>:</h4>
<p>But so does the lazy one , for complementary reasons :D</p>



<a name="200106544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106544">(Jun 08 2020 at 14:39)</a>:</h4>
<p>(and I think in lazy model the problem "how do we avoid rechecking std when new file is created in src" remains)</p>



<a name="200106704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106704">(Jun 08 2020 at 14:40)</a>:</h4>
<p>well, not entirely?</p>



<a name="200106718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106718" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106718">(Jun 08 2020 at 14:40)</a>:</h4>
<p>by that I mean</p>



<a name="200106748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106748" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106748">(Jun 08 2020 at 14:41)</a>:</h4>
<p>if there is a <code>#[path]</code>, then there will be an edge to <code>FileContents(/whatever/the/path/is)</code></p>



<a name="200106771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106771">(Jun 08 2020 at 14:41)</a>:</h4>
<p>and so if there is no <code>set</code> that effects this path, you're ok</p>



<a name="200106804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106804">(Jun 08 2020 at 14:41)</a>:</h4>
<p>Hm.... that makes sense I guess</p>



<a name="200106807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200106807" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200106807">(Jun 08 2020 at 14:41)</a>:</h4>
<p>or am I missing something?</p>



<a name="200107016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200107016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200107016">(Jun 08 2020 at 14:43)</a>:</h4>
<p>Hm, yeah, it works if we do path normalization. The potential problem here is that <code>foo/bar</code> and <code>foo/baz/../bar</code> <em>might</em> be different things</p>



<a name="200107269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200107269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200107269">(Jun 08 2020 at 14:44)</a>:</h4>
<p>yeah, ok, I hadn't considered that</p>



<a name="200107304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200107304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200107304">(Jun 08 2020 at 14:45)</a>:</h4>
<p>you do need some notion of "truepath"</p>



<a name="200107527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200107527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200107527">(Jun 08 2020 at 14:46)</a>:</h4>
<p>My current plant is to do both lazy and eager:</p>
<ul>
<li>the "compiler" part sees only the lazy API, "get text of this file by path"</li>
<li>what we actually store in salsa are file-sets, and the lazy API is implemented on top of them</li>
<li>additionally, IDE is allowed to do "list all files"</li>
<li>somehow this all is married to the file watching infrastrucure...</li>
</ul>



<a name="200107833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200107833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200107833">(Jun 08 2020 at 14:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200107304">said</a>:</p>
<blockquote>
<p>you do need some notion of "truepath"</p>
</blockquote>
<p>this feels inherent</p>



<a name="200107867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200107867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200107867">(Jun 08 2020 at 14:48)</a>:</h4>
<p>without canonicalization of some kind, I don't think you can have a "watcher" setup</p>



<a name="200107949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200107949" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200107949">(Jun 08 2020 at 14:49)</a>:</h4>
<p>ok I sort of take that back</p>



<a name="200108113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200108113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200108113">(Jun 08 2020 at 14:50)</a>:</h4>
<p>I guess that the most generic watcher could be dealing with the canonicalization problem in its own way, sort of hiding it from you, but anyway if you have "set" operations coming in, you need a way to match up the path that is being set with the ones that have been read</p>



<a name="200892381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200892381" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200892381">(Jun 15 2020 at 14:01)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> !</p>
<p>This week's changelog is here: <a href="https://rust-analyzer.github.io/thisweek/2020/06/15/changelog-29.html">https://rust-analyzer.github.io/thisweek/2020/06/15/changelog-29.html</a></p>



<a name="200892448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200892448" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200892448">(Jun 15 2020 at 14:01)</a>:</h4>
<p><a href="/user_uploads/4715/0STObVqMevmFqr0L44oTwFKH/extract-enum.gif">extract-enum.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/0STObVqMevmFqr0L44oTwFKH/extract-enum.gif" title="extract-enum.gif"><img src="/user_uploads/4715/0STObVqMevmFqr0L44oTwFKH/extract-enum.gif"></a></div>



<a name="200892534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200892534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200892534">(Jun 15 2020 at 14:01)</a>:</h4>
<p>I'd say this is the highlight of the week from the technical perspective -- it's the first refactoring which is non-local (it calls find usages inside)</p>



<a name="200892671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200892671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200892671">(Jun 15 2020 at 14:02)</a>:</h4>
<p>It looks like there's a huge "semantic search &amp; replace" infrastructure that should be developed around that :)</p>



<a name="200892829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200892829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200892829">(Jun 15 2020 at 14:03)</a>:</h4>
<p>I've also made some progress with the VFS rewrite. The new API is here, and I am pretty happy with how it looks: <a href="https://github.com/rust-analyzer/rust-analyzer/pull/4891">https://github.com/rust-analyzer/rust-analyzer/pull/4891</a></p>



<a name="200892870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200892870" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200892870">(Jun 15 2020 at 14:03)</a>:</h4>
<p>Though there's still a lot of work to make rust-analyzer actually use it.</p>



<a name="200892944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200892944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200892944">(Jun 15 2020 at 14:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200892534">said</a>:</p>
<blockquote>
<p>I'd say this is the highlight of the week from the technical perspective -- it's the first refactoring which is non-local (it calls find usages inside)</p>
</blockquote>
<p>ah, really cool</p>



<a name="200893150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893150">(Jun 15 2020 at 14:05)</a>:</h4>
<p>The "ship rust-analyzer with rustup" work is currently blocked on implementation -- we need to make vendoring inside rust-lang/rust work with rust-analyzer (it is non-trivial, as rust-analyzer is a separate workspace). If someone wants to take over the PR adding rust-analyzer to rustc, please free to do this :) I think I'll be busy with VFS for at least several days yet</p>



<a name="200893195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893195">(Jun 15 2020 at 14:05)</a>:</h4>
<p>Ohhh, there's another cool thing I've almost forgot</p>



<a name="200893264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893264">(Jun 15 2020 at 14:06)</a>:</h4>
<p>(which PR is that?)</p>



<a name="200893265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893265">(Jun 15 2020 at 14:06)</a>:</h4>
<p>We now do syntax highlighting (with type inference and such) of code inside doc comments.</p>



<a name="200893342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893342">(Jun 15 2020 at 14:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200893264">said</a>:</p>
<blockquote>
<p>(which PR is that?)</p>
</blockquote>
<p><a href="https://github.com/rust-lang/rust/pull/72978">https://github.com/rust-lang/rust/pull/72978</a></p>



<a name="200893345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893345" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893345">(Jun 15 2020 at 14:06)</a>:</h4>
<p>PR; <a href="https://github.com/rust-lang/rust/pull/72978">https://github.com/rust-lang/rust/pull/72978</a></p>



<a name="200893415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893415">(Jun 15 2020 at 14:07)</a>:</h4>
<blockquote>
<p>We now do syntax highlighting (with type inference and such) of code inside doc comments.</p>
</blockquote>
<p>We do that by creating an instance of a separate salsa DB for each doc comment</p>



<a name="200893534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893534">(Jun 15 2020 at 14:08)</a>:</h4>
<p>And there's an interesting problem here -- because this is a separate instance, this nested syntax highlighting is not really cancellable.</p>



<a name="200893613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893613">(Jun 15 2020 at 14:08)</a>:</h4>
<p>It seems like we might need some first-class salsa support for "ephemeral" inputs.</p>



<a name="200893742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893742">(Jun 15 2020 at 14:09)</a>:</h4>
<p>This is something we want during code completion as well: we'd love to type-check the code <em>as if</em> it had a fake identifier inserted at the position of the cursor.</p>



<a name="200893922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200893922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200893922">(Jun 15 2020 at 14:10)</a>:</h4>
<p>We curetntly are able to "as if" parse the code (because parsing is a function and not a query), but we actually <em>want</em> to type-check it as well.</p>



<a name="200894082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894082" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894082">(Jun 15 2020 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200893415">said</a>:</p>
<blockquote>
<blockquote>
<p>We now do syntax highlighting (with type inference and such) of code inside doc comments.</p>
</blockquote>
<p>We do that by creating an instance of a separate salsa DB for each doc comment</p>
</blockquote>
<p>woah</p>



<a name="200894124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894124">(Jun 15 2020 at 14:12)</a>:</h4>
<p>I guuss what I expected for that was that you would actually literally insert the token into the inputs</p>



<a name="200894152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894152">(Jun 15 2020 at 14:12)</a>:</h4>
<p>but I suppose that would have to happen "outside" of a query</p>



<a name="200894243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894243">(Jun 15 2020 at 14:13)</a>:</h4>
<p>I don't fully understand why we need to do that actually, instead of 'just' checking them as something like a separate file</p>



<a name="200894286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894286" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894286">(Jun 15 2020 at 14:13)</a>:</h4>
<p>this seems somewhat connected to "lazy" inputs</p>



<a name="200894307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894307">(Jun 15 2020 at 14:13)</a>:</h4>
<p>well, only somewhat</p>



<a name="200894380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894380">(Jun 15 2020 at 14:14)</a>:</h4>
<p>but yes I feel like for code comments at least you might have some kind of "code identifier" that you can give to that code block</p>



<a name="200894386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894386" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894386">(Jun 15 2020 at 14:14)</a>:</h4>
<p>Hm, actually we might be able to do what <span class="user-mention" data-user-id="129457">@Florian Diebold</span> suggests at least for doc comments. Have another variant for <code>HirFileId</code>, which is "the text of this doc comment"</p>



<a name="200894409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894409">(Jun 15 2020 at 14:14)</a>:</h4>
<p>yeah, basically</p>



<a name="200894433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894433">(Jun 15 2020 at 14:14)</a>:</h4>
<p>Though I don't like how this is very invasive</p>



<a name="200894521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894521">(Jun 15 2020 at 14:15)</a>:</h4>
<p>in salsa, at least, we had some kind of identifier for each "Item" that we are processing, and it might be like "the method inside this impl block in side this file" or whatever</p>



<a name="200894531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894531" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894531">(Jun 15 2020 at 14:15)</a>:</h4>
<p>Like, <code>HirFielId</code> is a very core type inside the "compiler", and it seems <em>wrong</em> to have to change it just for the purposes of handing doc comments, which, strictly speaking, exist outside of the langauge.</p>



<a name="200894537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894537">(Jun 15 2020 at 14:15)</a>:</h4>
<p>it seems like it would be natural to extend that to doc comments</p>



<a name="200894573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894573" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894573">(Jun 15 2020 at 14:15)</a>:</h4>
<p>I can see that point, although to me it feels... "right" :)</p>



<a name="200894585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894585">(Jun 15 2020 at 14:15)</a>:</h4>
<p>like, you want to be able to say "where the code came from"..</p>



<a name="200894618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894618">(Jun 15 2020 at 14:15)</a>:</h4>
<p>How would we go about fake idents for completions?</p>



<a name="200894687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894687">(Jun 15 2020 at 14:16)</a>:</h4>
<p>yeah, it feels right to me as well -- similarly to how we handle all crates in one DB, even though the actual compiler has a single-crate view</p>



<a name="200894726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894726">(Jun 15 2020 at 14:16)</a>:</h4>
<p>fake idents I'm not so sure, I'm not 100% sure why you want/need them anyway yet I have to admit</p>



<a name="200894742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894742">(Jun 15 2020 at 14:16)</a>:</h4>
<p>can you remind me the motivation?</p>



<a name="200894759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894759">(Jun 15 2020 at 14:17)</a>:</h4>
<p>Like, we can add yet another variant to <code>HirFileId</code> which is "file, like <code>foo.rs</code>, but there's <code>intellijRulez</code> token inserted at offset 42", but feels even more in the wrong direction to me :)</p>



<a name="200894818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894818" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894818">(Jun 15 2020 at 14:17)</a>:</h4>
<p>can you just step back and explain to me how the cycle works for a sec? like, when do you decide to insert those tokens?</p>



<a name="200894822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894822">(Jun 15 2020 at 14:17)</a>:</h4>
<blockquote>
<p>nikomatsakis: can you remind me the motivation?</p>
</blockquote>
<p>imagine the following code:</p>
<div class="codehilite"><pre><span></span><code>foo == /* cursor here*/
</code></pre></div>



<a name="200894909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894909">(Jun 15 2020 at 14:18)</a>:</h4>
<p>/me imagines. "ok"</p>



<a name="200894926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894926" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894926">(Jun 15 2020 at 14:18)</a>:</h4>
<p>we want to get the type of the right hand side do suggest nice completions. It's much easier to do if there's a phisical rhs there</p>



<a name="200894941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894941" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894941">(Jun 15 2020 at 14:18)</a>:</h4>
<p>do we always want to do this</p>



<a name="200894957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894957" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894957">(Jun 15 2020 at 14:18)</a>:</h4>
<p>or did the user hit some key that prompted us to provide completions?</p>



<a name="200894964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894964">(Jun 15 2020 at 14:18)</a>:</h4>
<p>even more so when we're completing something like <code>dbg!(/* cursor */)</code> -- we need to macro-expand the macro as if it actually contained something</p>



<a name="200894975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200894975" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200894975">(Jun 15 2020 at 14:18)</a>:</h4>
<p>This happens here:</p>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/blob/5b013e5665a34fd757fd6c48dc912606c0915b2c/crates/ra_ide/src/completion/completion_context.rs#L92-L99">https://github.com/rust-analyzer/rust-analyzer/blob/5b013e5665a34fd757fd6c48dc912606c0915b2c/crates/ra_ide/src/completion/completion_context.rs#L92-L99</a></p>



<a name="200895080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895080">(Jun 15 2020 at 14:19)</a>:</h4>
<p>The <code>HirFileId</code> could have a variant that represents the concatenation of multiple file parts. For example for</p>
<div class="codehilite"><pre><span></span><code><span class="sd">/// fn a() {</span>
<span class="sd">/// }</span>
</code></pre></div>


<p>it would be <code>Concat([file.rs:1:4-1:13, file.rs:2:4-2:13])</code> while for</p>
<div class="codehilite"><pre><span></span><code><span class="n">a</span><span class="p">.</span><span class="o">&lt;|&gt;</span><span class="w"></span>
</code></pre></div>


<p>it would be <code>Concat([file.rs:1:1-1:2, &lt;fake_ident&gt;:1:1-1:1])</code>.</p>



<a name="200895188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895188">(Jun 15 2020 at 14:20)</a>:</h4>
<blockquote>
<p>or did the user hit some key that prompted us to provide completions?</p>
</blockquote>
<p>usually yes, the user hit some key</p>



<a name="200895385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895385" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895385">(Jun 15 2020 at 14:21)</a>:</h4>
<p>From our perspective, the LSP client asked us to provide completions at this point</p>



<a name="200895642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895642" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895642">(Jun 15 2020 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> for completions, we don't want to put that into the DB though -- it's not worth caching. Also it's not a different file with different content like with doc comments, it's the same file 'in an alternative world' -- so it's in the same place in the module tree and so on</p>



<a name="200895713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895713">(Jun 15 2020 at 14:24)</a>:</h4>
<p>So what I imagined is that when we were asked to provide completions</p>



<a name="200895726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895726">(Jun 15 2020 at 14:24)</a>:</h4>
<p>we would insert some special token into the token stream</p>



<a name="200895763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895763">(Jun 15 2020 at 14:24)</a>:</h4>
<p>and then just compute completions</p>



<a name="200895778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895778" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895778">(Jun 15 2020 at 14:24)</a>:</h4>
<p>which would incrementally recompute type-check etc</p>



<a name="200895794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895794">(Jun 15 2020 at 14:24)</a>:</h4>
<p>in the same way as if the user had actually typed something</p>



<a name="200895927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895927" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895927">(Jun 15 2020 at 14:25)</a>:</h4>
<p>This works best to the extent that incremental re-parsing, etc works efficiently, of course</p>



<a name="200895943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200895943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200895943">(Jun 15 2020 at 14:25)</a>:</h4>
<p>I think that's basically what we want, except that we can throw away all the changes to the DB afterwards?</p>



<a name="200896009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896009" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896009">(Jun 15 2020 at 14:26)</a>:</h4>
<p>And the "we would insert some special token into the token stream" works by calling the actual <code>.set</code> outside of the query?</p>



<a name="200896016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896016">(Jun 15 2020 at 14:26)</a>:</h4>
<p>well I think then you just re-modify the input to remove the token</p>



<a name="200896032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896032">(Jun 15 2020 at 14:26)</a>:</h4>
<p>right</p>



<a name="200896036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896036" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896036">(Jun 15 2020 at 14:26)</a>:</h4>
<p>it's just a normal edit</p>



<a name="200896075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896075">(Jun 15 2020 at 14:26)</a>:</h4>
<p>also, it seems... not thread-safe</p>



<a name="200896079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896079">(Jun 15 2020 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/200896016">said</a>:</p>
<blockquote>
<p>well I think then you just re-modify the input to remove the token</p>
</blockquote>
<p>note: you could imagine salsa doing a different caching mechanism to make this more efficient</p>



<a name="200896094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896094" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896094">(Jun 15 2020 at 14:26)</a>:</h4>
<p>I am not sure about literal modification --- it'll cancel in-progress higlighting and such</p>



<a name="200896104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896104" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896104">(Jun 15 2020 at 14:26)</a>:</h4>
<p>all <code>set</code> calls occur when no other queries are ongoing</p>



<a name="200896117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896117">(Jun 15 2020 at 14:26)</a>:</h4>
<p>so yeah it would cancel those sorts of things</p>



<a name="200896145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896145">(Jun 15 2020 at 14:27)</a>:</h4>
<p>I can believe it's not a good strategy :)</p>



<a name="200896152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896152">(Jun 15 2020 at 14:27)</a>:</h4>
<p>it's just the strategy I imagined</p>



<a name="200896158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896158">(Jun 15 2020 at 14:27)</a>:</h4>
<p>yeah, didn't mean literal data races, but things like that</p>



<a name="200896192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896192">(Jun 15 2020 at 14:27)</a>:</h4>
<p>I guess, I want exactly this: ability to call <code>.set</code> without advancing global revision counter, and, more generally, keep the DB itself logically immutable</p>



<a name="200896209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896209" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896209">(Jun 15 2020 at 14:27)</a>:</h4>
<p>I guess that another way to look at it would be</p>



<a name="200896215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896215">(Jun 15 2020 at 14:27)</a>:</h4>
<p>yes, a "diff" file-id</p>



<a name="200896241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896241" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896241">(Jun 15 2020 at 14:27)</a>:</h4>
<p>i.e., this file is the same as that one but with some modification (the "logical cursor") or whatever</p>



<a name="200896297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896297" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896297">(Jun 15 2020 at 14:28)</a>:</h4>
<p>but that wouldn't leverage any incremental re-computation necessarily</p>



<a name="200896321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896321">(Jun 15 2020 at 14:28)</a>:</h4>
<p>that I think is the approach that <span class="user-mention" data-user-id="133169">@matklad</span> was kind of rejecting, though for a different reason</p>



<a name="200896359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896359" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896359">(Jun 15 2020 at 14:28)</a>:</h4>
<p>but also if you <em>literally</em> did it the wa I was just describing it's still a set in salsa terms</p>



<a name="200896374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896374">(Jun 15 2020 at 14:28)</a>:</h4>
<p>so it would still have all the bad side-effects</p>



<a name="200896392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896392">(Jun 15 2020 at 14:29)</a>:</h4>
<p>it sounds like what you want is the ability to create a "forked" database</p>



<a name="200896394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896394" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896394">(Jun 15 2020 at 14:29)</a>:</h4>
<p>(I can't help thniking that what we want here is "negative" durability for such transient inputs. Basically, everytying whcih depends on transient input can't be trusted in the next revision and should be teared down)</p>



<a name="200896447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896447" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896447">(Jun 15 2020 at 14:29)</a>:</h4>
<p>all of this is reminding me of some of my more ambituous ideas for reworking salsa to be more parallel friendly</p>



<a name="200896467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896467">(Jun 15 2020 at 14:29)</a>:</h4>
<p>where it took more of a "persistent data-structure" like approach</p>



<a name="200896583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896583" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896583">(Jun 15 2020 at 14:30)</a>:</h4>
<p>(which would make e.g. forking quite trivial, "just clone")</p>



<a name="200896611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896611" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896611">(Jun 15 2020 at 14:30)</a>:</h4>
<p>interesting</p>



<a name="200896703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896703" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896703">(Jun 15 2020 at 14:30)</a>:</h4>
<p>side note that</p>



<a name="200896741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896741">(Jun 15 2020 at 14:31)</a>:</h4>
<p>i am about to open a PR that fixes up the recursive solver's handling of negative goals</p>



<a name="200896750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896750" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896750">(Jun 15 2020 at 14:31)</a>:</h4>
<p>(in chalk)</p>



<a name="200896801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896801">(Jun 15 2020 at 14:31)</a>:</h4>
<p>at which point I wanted to return to the question of how to better integrate salsa / chalk, I realize now my old scheme didn't accommodate negative goals, but I think it can be fixed somehow :)</p>



<a name="200896833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896833">(Jun 15 2020 at 14:31)</a>:</h4>
<p>point being that it seems like we're due to kind of have some deeper talks about salsa and look again at the model with fresh eyes</p>



<a name="200896889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896889" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896889">(Jun 15 2020 at 14:32)</a>:</h4>
<p>Yesss</p>



<a name="200896903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896903" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896903">(Jun 15 2020 at 14:32)</a>:</h4>
<p>I know you've got an accruing list of "desiderata", <span class="user-mention silent" data-user-id="133169">matklad</span></p>



<a name="200896921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896921" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896921">(Jun 15 2020 at 14:32)</a>:</h4>
<p>I want more parallelism and less Arcs, which, admitedly, seem to be contradictory goals :D</p>



<a name="200896925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896925">(Jun 15 2020 at 14:32)</a>:</h4>
<p>maybe we should schedule some times to do some voice chats this week?</p>



<a name="200896936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896936">(Jun 15 2020 at 14:32)</a>:</h4>
<p>lol, maybe true</p>



<a name="200896986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200896986" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200896986">(Jun 15 2020 at 14:33)</a>:</h4>
<p>I have a few thoughts about parallelism</p>



<a name="200897000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897000">(Jun 15 2020 at 14:33)</a>:</h4>
<blockquote>
<p>maybe we should schedule some times to do some voice chats this week?</p>
</blockquote>
<p>Yup, I think some semi-structured chatting might be useful.</p>



<a name="200897014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897014">(Jun 15 2020 at 14:33)</a>:</h4>
<p>maybe we can start by just collecting ideas into a doc and things</p>



<a name="200897036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897036" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897036">(Jun 15 2020 at 14:33)</a>:</h4>
<p>to get a high-level view</p>



<a name="200897194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897194">(Jun 15 2020 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> could you just start the doc?</p>



<a name="200897205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897205" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897205">(Jun 15 2020 at 14:34)</a>:</h4>
<p>making it now</p>



<a name="200897225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897225" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897225">(Jun 15 2020 at 14:34)</a>:</h4>
<p>we can maybe chat a bit in salsa zulip too</p>



<a name="200897245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897245">(Jun 15 2020 at 14:35)</a>:</h4>
<p>not sure which is a better place ;)</p>



<a name="200897342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897342">(Jun 15 2020 at 14:35)</a>:</h4>
<p><a href="https://hackmd.io/o07mw34ITEiXgRaouTb4Yw">hackmd "Salsa 2020"</a></p>



<a name="200897550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/200897550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#200897550">(Jun 15 2020 at 14:37)</a>:</h4>
<p>Perfect name!</p>



<a name="201609199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201609199" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201609199">(Jun 22 2020 at 14:02)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> , its Monday again!</p>



<a name="201609226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201609226" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201609226">(Jun 22 2020 at 14:03)</a>:</h4>
<p>Today's changelog is here: <a href="https://rust-analyzer.github.io/thisweek/2020/06/22/changelog-30.html">https://rust-analyzer.github.io/thisweek/2020/06/22/changelog-30.html</a></p>



<a name="201609445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201609445" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201609445">(Jun 22 2020 at 14:04)</a>:</h4>
<p>We have a bunch of fixes for type inference, cool new UI for exploring types by <span class="user-mention" data-user-id="298653">@vsrs</span> , almost working VFS.</p>



<a name="201609534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201609534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201609534">(Jun 22 2020 at 14:05)</a>:</h4>
<p>Another highlight is that <a href="https://github.com/davidlattimore">https://github.com/davidlattimore</a>, the author of rerast, is doing some awesome work merging rerast into rust-analyzer</p>



<a name="201609646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201609646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201609646">(Jun 22 2020 at 14:06)</a>:</h4>
<p>Oh, <span class="user-mention" data-user-id="211727">@Jonas Schievink</span> is also doing a bunch of perf work around memory usage and item tree refactoring.</p>



<a name="201609864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201609864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201609864">(Jun 22 2020 at 14:08)</a>:</h4>
<p>No progress on shipping rust-analyzer via rustup -- no particular blockers, it's just that no one got to figuring the vendoring stuff.</p>



<a name="201610042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610042" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610042">(Jun 22 2020 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> would you like to discuss "Salsa 2020"  a bit more today?</p>



<a name="201610095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610095" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610095">(Jun 22 2020 at 14:10)</a>:</h4>
<p>Yup!</p>



<a name="201610134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610134">(Jun 22 2020 at 14:10)</a>:</h4>
<p>I did fill the document. The biggest addition I have is "priorites"</p>



<a name="201610193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610193">(Jun 22 2020 at 14:11)</a>:</h4>
<p>I singled out only two really big things:</p>
<ul>
<li>compile times (I fear that the current generic setup doesn't make it easy to achieve separate compilation)</li>
<li>parallelism</li>
</ul>



<a name="201610251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610251">(Jun 22 2020 at 14:11)</a>:</h4>
<p>(the documet in question: <a href="https://hackmd.io/o07mw34ITEiXgRaouTb4Yw">https://hackmd.io/o07mw34ITEiXgRaouTb4Yw</a>)</p>



<a name="201610572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610572">(Jun 22 2020 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> could we schedule a time to chat in a little bit maybe?</p>



<a name="201610577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610577">(Jun 22 2020 at 14:14)</a>:</h4>
<p>I'm trying to finish up my "morning prep"</p>



<a name="201610587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610587">(Jun 22 2020 at 14:15)</a>:</h4>
<p>although actually maybe now is not the worst time</p>



<a name="201610591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610591">(Jun 22 2020 at 14:15)</a>:</h4>
<p>I have to read what you wrote</p>



<a name="201610670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201610670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201610670">(Jun 22 2020 at 14:15)</a>:</h4>
<p>I do think a chat/call would be useful.</p>



<a name="201612983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201612983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201612983">(Jun 22 2020 at 14:33)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> how long are you around today?</p>



<a name="201613385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201613385" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201613385">(Jun 22 2020 at 14:37)</a>:</h4>
<p>for at least 4 hours more</p>



<a name="201613929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201613929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201613929">(Jun 22 2020 at 14:41)</a>:</h4>
<p>OK, I'll ping you in a bit!</p>



<a name="201621799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201621799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201621799">(Jun 22 2020 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> would you be up to have a quick zoom chat soon?</p>



<a name="201621813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201621813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201621813">(Jun 22 2020 at 15:38)</a>:</h4>
<p>any time basically</p>



<a name="201622101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201622101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201622101">(Jun 22 2020 at 15:41)</a>:</h4>
<p>yup, in 3 minutes!</p>



<a name="201633618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/201633618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#201633618">(Jun 22 2020 at 17:08)</a>:</h4>
<p>Nope, audio is non-existig :(</p>



<a name="202313518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202313518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202313518">(Jun 29 2020 at 14:07)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's sync-up time!</p>



<a name="202313544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202313544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202313544">(Jun 29 2020 at 14:07)</a>:</h4>
<p>Changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/06/29/changelog-31.html">https://rust-analyzer.github.io/thisweek/2020/06/29/changelog-31.html</a></p>



<a name="202313831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202313831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202313831">(Jun 29 2020 at 14:09)</a>:</h4>
<p>Notable changes:</p>
<ul>
<li>rust analyzer now infers more than 99% of expressions for rust-analyzer code base</li>
<li><span class="user-mention" data-user-id="211727">@Jonas Schievink</span> implemented new near-source-level IR, item tree, with much perf improvements</li>
<li>new VFS</li>
<li>I've rewritten the main loop that drives LSP server, to hopefully make it more understandable. In general, I've cleaned up and uniformalized concurrency quite a bit, we now using something resembling actor pattern consistently</li>
</ul>



<a name="202314182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202314182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202314182">(Jun 29 2020 at 14:11)</a>:</h4>
<p>(concurrency nerds might want to chime in on <a href="https://trio.discourse.group/t/sizing-the-channel-deadlock-freedom-vs-back-pressure/311">https://trio.discourse.group/t/sizing-the-channel-deadlock-freedom-vs-back-pressure/311</a>, there's still some unresolved questions left)</p>



<a name="202314463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202314463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202314463">(Jun 29 2020 at 14:13)</a>:</h4>
<p>There are also some ongoing refactors for our test suite</p>



<a name="202314477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202314477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vsrs <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202314477">(Jun 29 2020 at 14:13)</a>:</h4>
<p>I've published <a href="https://marketplace.visualstudio.com/items?itemName=vsrs.cross-rust-analyzer">cross-rust-analyzer</a> as well. Perhaps it makes sense to update the repo link in the changelog to the extension link.</p>



<a name="202314540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202314540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202314540">(Jun 29 2020 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="298653">@vsrs</span> could you PR?</p>



<a name="202314722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202314722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vsrs <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202314722">(Jun 29 2020 at 14:15)</a>:</h4>
<p>sure, but i don't know where are the changelog sources?</p>



<a name="202314773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202314773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202314773">(Jun 29 2020 at 14:15)</a>:</h4>
<blockquote>
<p>There are also some ongoing refactors for our test suite</p>
</blockquote>
<ul>
<li>
<p>Now, there's mostly one way to parse fixture which specifies the set of file to analyze. It auto-magically switcheds between single file and multifile mode based on the presense of <code>//-</code> marker comment. </p>
</li>
<li>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/pull/5101">https://github.com/rust-analyzer/rust-analyzer/pull/5101</a> propses a new snapshot testing library</p>
</li>
<li>rn I am refactoring ty tests to be more data driven</li>
</ul>



<a name="202314836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202314836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202314836">(Jun 29 2020 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="298653">@vsrs</span>  <a href="https://github.com/rust-analyzer/rust-analyzer.github.io">https://github.com/rust-analyzer/rust-analyzer.github.io</a></p>



<a name="202315216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202315216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202315216">(Jun 29 2020 at 14:18)</a>:</h4>
<p>Yesterday I found some time to categorize assists and fix call hierarchy</p>



<a name="202315591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202315591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202315591">(Jun 29 2020 at 14:20)</a>:</h4>
<p>Right, I saw the PR, did get to revieing it yet :)</p>



<a name="202317177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202317177" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vsrs <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202317177">(Jun 29 2020 at 14:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/202314540">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="298653">vsrs</span> could you PR?</p>
</blockquote>
<p>Done. <a href="https://github.com/rust-analyzer/rust-analyzer.github.io/pull/55">https://github.com/rust-analyzer/rust-analyzer.github.io/pull/55</a></p>



<a name="202329726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202329726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202329726">(Jun 29 2020 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> sorry I missed the sync today, this all sounds exciting though!</p>



<a name="202992821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/202992821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#202992821">(Jul 06 2020 at 13:56)</a>:</h4>
<p>Today's sync will be an hour late (so, in ~1hr) -- <span class="user-mention" data-user-id="133169">@matklad</span> is late with prepping  relnotes <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="203001188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203001188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203001188">(Jul 06 2020 at 15:05)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="203001208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203001208" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203001208">(Jul 06 2020 at 15:05)</a>:</h4>
<p>This week's changelog is up: <a href="https://rust-analyzer.github.io/thisweek/2020/07/06/changelog-32.html">https://rust-analyzer.github.io/thisweek/2020/07/06/changelog-32.html</a></p>



<a name="203001431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203001431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203001431">(Jul 06 2020 at 15:07)</a>:</h4>
<ul>
<li>a bunch of SSR improvements by <span class="user-mention silent" data-user-id="198560">David Lattimore</span> </li>
<li>primitive types from chalk</li>
<li>initial support for dynamic project loading</li>
<li>a whole bunch of tests are rewriten to be more data-driven. Fewer tests now depend on snpashot testing now, and some of those that still do use <code>expect!</code> now. I really like the new snapshot updating experience :D</li>
</ul>



<a name="203001468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203001468" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203001468">(Jul 06 2020 at 15:07)</a>:</h4>
<p>Oh, you can now grab rust-analyzer from <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz">https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz</a> !</p>



<a name="203001509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203001509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203001509">(Jul 06 2020 at 15:07)</a>:</h4>
<p>Hopefully, the next nightly would even contain rustup component</p>



<a name="203001583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203001583" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203001583">(Jul 06 2020 at 15:08)</a>:</h4>
<p>(which reminds me that I probably should setup automated rust-analzyer upgrade in rust-lang/rust repo</p>



<a name="203016062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203016062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203016062">(Jul 06 2020 at 17:13)</a>:</h4>
<p>We should make a framework out of this (at some point)</p>



<a name="203718045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203718045" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203718045">(Jul 13 2020 at 14:00)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span></p>



<a name="203718115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203718115" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203718115">(Jul 13 2020 at 14:01)</a>:</h4>
<p>It was a productive week, we have bunch of things in today's release:</p>
<p><a href="https://rust-analyzer.github.io/thisweek/2020/07/13/changelog-33.html">https://rust-analyzer.github.io/thisweek/2020/07/13/changelog-33.html</a></p>



<a name="203718280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203718280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203718280">(Jul 13 2020 at 14:02)</a>:</h4>
<p>The highlights are:</p>
<ul>
<li><code>rustup component add rust-analyzer-preview</code></li>
<li>rust-analyzer watches for changes in Cargo.toml and reloads automatically</li>
<li>chalk upgrade</li>
<li>salsa that compiles fast</li>
</ul>



<a name="203718372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203718372" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203718372">(Jul 13 2020 at 14:03)</a>:</h4>
<p>We are also moving vscode extension to the rust-lang/vscode-rust repo: <a href="https://github.com/rust-lang/vscode-rust/pull/816">https://github.com/rust-lang/vscode-rust/pull/816</a></p>



<a name="203718815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203718815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203718815">(Jul 13 2020 at 14:07)</a>:</h4>
<p>That Chalk upgrade looks awesome tbh</p>



<a name="203718828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203718828" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203718828">(Jul 13 2020 at 14:07)</a>:</h4>
<p>The highlight of my week</p>



<a name="203719177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203719177" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203719177">(Jul 13 2020 at 14:10)</a>:</h4>
<p>Yup, it is just so <strong>awesome</strong> that chalk and rust-analyzer are developed independently, and both are moving fast!</p>
<p>Yay modularization!</p>



<a name="203719265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203719265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203719265">(Jul 13 2020 at 14:11)</a>:</h4>
<p>I haven't looked closely at the PR but our development workflow will be to <code>npm install</code> the client separately? Will there be some sort of integration testing between server/client in the <code>vscode-rust</code> repo?</p>



<a name="203719274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203719274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203719274">(Jul 13 2020 at 14:11)</a>:</h4>
<p>I am curious just how much of a speedup <a href="https://github.com/rust-lang/chalk/pull/566">https://github.com/rust-lang/chalk/pull/566</a> is going to bring</p>



<a name="203719721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203719721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203719721">(Jul 13 2020 at 14:15)</a>:</h4>
<blockquote>
<p>but our development workflow will be to npm install the client separately?</p>
</blockquote>
<p>Good question, I haven't thought about that deeply. TBH, I almost never run the actual typesript extension myself, so I personally don't mind a lot that there's an extra step here</p>



<a name="203719738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203719738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203719738">(Jul 13 2020 at 14:15)</a>:</h4>
<blockquote>
<p>Will there be some sort of integration testing between server/client in the vscode-rust repo?</p>
</blockquote>
<p>Not that we have such tests today :P</p>



<a name="203719861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203719861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203719861">(Jul 13 2020 at 14:16)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> I'll run analysis stats unless somebody beats me to it :D</p>



<a name="203719896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203719896" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203719896">(Jul 13 2020 at 14:16)</a>:</h4>
<p>That would be awesome</p>



<a name="203720668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203720668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203720668">(Jul 13 2020 at 14:22)</a>:</h4>
<p>I'm looking forward to that even just for cleaning up the logs <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="203720674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203720674" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203720674">(Jul 13 2020 at 14:22)</a>:</h4>
<p>I'm expecting breakage with the recent change in the semantic tokens protocol but am waiting to see how it's handled in vscode first</p>



<a name="203720963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203720963" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203720963">(Jul 13 2020 at 14:24)</a>:</h4>
<p>"If you run less code, there's less code to debug" is a profound insight!</p>



<a name="203721238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721238">(Jul 13 2020 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/203720668">said</a>:</p>
<blockquote>
<p>I'm looking forward to that even just for cleaning up the logs <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>Oh for sure. I actually am using the branch to debug the cycle issue <span class="user-mention silent" data-user-id="116118">Matthew Jasper</span> posted</p>



<a name="203721270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721270">(Jul 13 2020 at 14:26)</a>:</h4>
<p>That being said, do you want to review/merge that PR <span class="user-mention" data-user-id="129457">@Florian Diebold</span>?</p>



<a name="203721294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721294" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721294">(Jul 13 2020 at 14:26)</a>:</h4>
<p>I'm not sure when Niko is going to be around and have time to review</p>



<a name="203721295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721295">(Jul 13 2020 at 14:26)</a>:</h4>
<p>Ah, so the signature of <code>RustIrDatabase::impls_for_trait</code> has changed, so it's not trivial for me to benchmark</p>



<a name="203721320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721320" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721320">(Jul 13 2020 at 14:27)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> sure, I can probably take a look later today</p>



<a name="203721334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721334">(Jul 13 2020 at 14:27)</a>:</h4>
<p>I guess, <span class="user-mention" data-user-id="129457">@Florian Diebold</span> might want to do this then :D</p>



<a name="203721371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721371">(Jul 13 2020 at 14:27)</a>:</h4>
<p>I guess <span class="user-mention" data-user-id="232957">@Jack Huey</span> needs to rebase his PR</p>



<a name="203721400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721400">(Jul 13 2020 at 14:28)</a>:</h4>
<p>whoops okay</p>



<a name="203721629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203721629" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203721629">(Jul 13 2020 at 14:29)</a>:</h4>
<p>Okay rebased</p>



<a name="203724087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203724087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203724087">(Jul 13 2020 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> </p>
<div class="codehilite"><pre><span></span><code>Before:
Parallel Inference: 12.637288447s,

After:
Parallel Inference: 10.732962004s,
</code></pre></div>



<a name="203724143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203724143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203724143">(Jul 13 2020 at 14:47)</a>:</h4>
<p>So, it is quite a bit faster, if we see 20% improvement in end-to-end bench</p>



<a name="203727710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203727710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203727710">(Jul 13 2020 at 15:15)</a>:</h4>
<p>That's not bad at all</p>



<a name="203739154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203739154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203739154">(Jul 13 2020 at 16:49)</a>:</h4>
<p>On to the next 20% then</p>



<a name="203764072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/203764072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#203764072">(Jul 13 2020 at 20:05)</a>:</h4>
<p>(deleted)</p>



<a name="204424938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/204424938" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#204424938">(Jul 20 2020 at 13:56)</a>:</h4>
<p>Hey, I am not feeling great today, so I won’t participate in the sync up, but the release is out :)</p>



<a name="204426001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/204426001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#204426001">(Jul 20 2020 at 14:05)</a>:</h4>
<p>Feel better!</p>



<a name="205120477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205120477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205120477">(Jul 27 2020 at 14:02)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span></p>



<a name="205120490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205120490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205120490">(Jul 27 2020 at 14:02)</a>:</h4>
<p>Here's this week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/07/27/changelog-35.html">https://rust-analyzer.github.io/thisweek/2020/07/27/changelog-35.html</a></p>



<a name="205120704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205120704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205120704">(Jul 27 2020 at 14:04)</a>:</h4>
<p>Couple of highlights:</p>
<ul>
<li>SSR improvements</li>
<li>we fully replaced <code>insta</code> with <code>expect</code> for snapshot testing</li>
<li>we now track various metrics at <a href="https://rust-analyzer.github.io/metrics/">https://rust-analyzer.github.io/metrics/</a></li>
</ul>



<a name="205120784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205120784" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205120784">(Jul 27 2020 at 14:05)</a>:</h4>
<p>VS Code extension merging is still in progress</p>



<a name="205120925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205120925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205120925">(Jul 27 2020 at 14:06)</a>:</h4>
<p>I've also started poking rustc's parser with a sharp stick today :) Trying to find a first-step towards parse library-ification</p>



<a name="205125001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205125001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205125001">(Jul 27 2020 at 14:38)</a>:</h4>
<p>Also, it's a first time in a long while I am using rust-analyzer with rustc code base, and the progress is nice</p>



<a name="205125031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205125031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205125031">(Jul 27 2020 at 14:39)</a>:</h4>
<p>Auto-importing stuff feels almost to good</p>



<a name="205125061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205125061" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205125061">(Jul 27 2020 at 14:39)</a>:</h4>
<p>And even auto-reload when adding new crate works!</p>



<a name="205126966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205126966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205126966">(Jul 27 2020 at 14:53)</a>:</h4>
<p>Metrics dashboard looks really cool! Would it be possible to split the build/analysis graphs into categories? (e.g. separate build/link times)</p>



<a name="205127149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127149" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127149">(Jul 27 2020 at 14:54)</a>:</h4>
<p>Yes, but I think that probably isn't required.  Total is enough to catch regressions. For investigation, you'll get more info re-running stuff locally</p>



<a name="205127220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127220">(Jul 27 2020 at 14:55)</a>:</h4>
<p>And there's a benefit in having <em>fewer</em> graphs on the page</p>



<a name="205127246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127246">(Jul 27 2020 at 14:55)</a>:</h4>
<p>Showing the commit hashes would be useful, because right now the horizontal axis doesn't say much</p>



<a name="205127369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127369">(Jul 27 2020 at 14:56)</a>:</h4>
<p>Well, it says 1, 2, 3, 4.... isn't that useful? :D</p>



<a name="205127414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127414">(Jul 27 2020 at 14:56)</a>:</h4>
<p>There's info about commit hashes, host machine, time, etc in the data</p>



<a name="205127450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127450">(Jul 27 2020 at 14:57)</a>:</h4>
<p>But I haven't looked into how to plug that into plotly.js</p>



<a name="205127617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127617" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127617">(Jul 27 2020 at 14:58)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/metrics/blob/f9d246925e87e6786228cfec09773a9fb46d8320/index.html#L52-L55">https://github.com/rust-analyzer/metrics/blob/f9d246925e87e6786228cfec09773a9fb46d8320/index.html#L52-L55</a></p>



<a name="205127679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205127679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205127679">(Jul 27 2020 at 14:58)</a>:</h4>
<p>I think there should be API to add hover info to the labels</p>



<a name="205797491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797491">(Aug 03 2020 at 14:03)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span></p>



<a name="205797608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797608">(Aug 03 2020 at 14:04)</a>:</h4>
<p>Here's this week chagelog: <a href="https://rust-analyzer.github.io/thisweek/2020/08/03/changelog-36.html">https://rust-analyzer.github.io/thisweek/2020/08/03/changelog-36.html</a></p>



<a name="205797693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797693" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797693">(Aug 03 2020 at 14:05)</a>:</h4>
<p>did we get the nightly update going again? I can take a look at disabling riscv for you if not</p>



<a name="205797717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797717" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797717">(Aug 03 2020 at 14:05)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> no, I haven't got to that yet</p>



<a name="205797740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797740">(Aug 03 2020 at 14:05)</a>:</h4>
<p>If yo could disable riscv, that would be helpful and I think more effective!</p>



<a name="205797794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797794">(Aug 03 2020 at 14:06)</a>:</h4>
<p>great! will do so in a bit</p>



<a name="205797832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797832">(Aug 03 2020 at 14:06)</a>:</h4>
<p>Though, until we flip the VS Code extension from matklad.rust-analyzer to rust-lang.rust, I wouldn't worry too much about frequently updating nightlies</p>



<a name="205797894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797894">(Aug 03 2020 at 14:07)</a>:</h4>
<p>ah okay</p>



<a name="205797918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205797918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205797918">(Aug 03 2020 at 14:07)</a>:</h4>
<p>The highlight of this week is Rust ungrammar: <a href="https://github.com/rust-analyzer/ungrammar/blob/master/rust.ungram">https://github.com/rust-analyzer/ungrammar/blob/master/rust.ungram</a></p>



<a name="205798034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205798034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205798034">(Aug 03 2020 at 14:08)</a>:</h4>
<p>We now fully specify structure of Rust's concrete syntax trees.</p>
<p>I <em>hope</em> that, using ungrammar, we'll be able to slowly bridge rustc's and rust-analyzer syntax trees. I want them both to be generated from ungrammar.</p>



<a name="205798094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205798094" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205798094">(Aug 03 2020 at 14:09)</a>:</h4>
<p>Though, it might be a bad IDE -- rustc's tree is a sufficiently abstract syntax tree, and generating it from CST grammar might be too annoying.</p>



<a name="205798188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205798188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205798188">(Aug 03 2020 at 14:10)</a>:</h4>
<p>There's also an MCP in progress for estabilishing parse library-ification working group: <a href="https://github.com/rust-lang/compiler-team/issues/338">https://github.com/rust-lang/compiler-team/issues/338</a></p>



<a name="205798254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205798254" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205798254">(Aug 03 2020 at 14:11)</a>:</h4>
<p>Finally, I am on vacation from Thursday to Tuesday. I wonder if <span class="user-mention" data-user-id="211727">@Jonas Schievink</span> would want to be a release manager next Monday?</p>



<a name="205798320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205798320" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205798320">(Aug 03 2020 at 14:11)</a>:</h4>
<p>I think I can do that, yeah. Just need some instructions.</p>



<a name="205798660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205798660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205798660">(Aug 03 2020 at 14:14)</a>:</h4>
<p>I'll try to add them to dev/readme, but most things are automated</p>
<div class="codehilite"><pre><span></span><code>$ git clone rust-analyzer
$ git clone rust-analyzer.github.io
$ pushd rust-analyzer; cargo xtask release; popd
$ cd rust-analyzer.github.io;
$ emacs (ls thisweek/_posts | tail -n1)
$ git push
</code></pre></div>



<a name="205798760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/205798760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#205798760">(Aug 03 2020 at 14:15)</a>:</h4>
<p>This releases latest nightly as stable, so there are no any kind of additional pre-flight checks</p>



<a name="206463433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/206463433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#206463433">(Aug 10 2020 at 14:00)</a>:</h4>
<p>Hi <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="206463442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/206463442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#206463442">(Aug 10 2020 at 14:00)</a>:</h4>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/08/10/changelog-37.html">https://rust-analyzer.github.io/thisweek/2020/08/10/changelog-37.html</a></p>



<a name="206463476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/206463476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#206463476">(Aug 10 2020 at 14:00)</a>:</h4>
<p>(I ran this week's release since Aleksey is on holidays)</p>



<a name="206463642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/206463642" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#206463642">(Aug 10 2020 at 14:02)</a>:</h4>
<p>We got a bunch of nice improvements and bug fixes in this release. No major refactorings or anything fundamental though, as one might expect.</p>



<a name="206472204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/206472204" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#206472204">(Aug 10 2020 at 15:12)</a>:</h4>
<p>Hmm, have I missed some organizational changes in rust-analyzer?</p>



<a name="206472306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/206472306" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#206472306">(Aug 10 2020 at 15:13)</a>:</h4>
<p><a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/205798254">https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/205798254</a></p>



<a name="207148601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207148601" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207148601">(Aug 17 2020 at 14:13)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's Monday again</p>



<a name="207148634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207148634" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207148634">(Aug 17 2020 at 14:13)</a>:</h4>
<p>I am back from <span aria-label="palm tree" class="emoji emoji-1f334" role="img" title="palm tree">:palm_tree:</span> vacation :)</p>



<a name="207148669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207148669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207148669">(Aug 17 2020 at 14:14)</a>:</h4>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/08/17/changelog-38.html">https://rust-analyzer.github.io/thisweek/2020/08/17/changelog-38.html</a></p>



<a name="207148795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207148795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207148795">(Aug 17 2020 at 14:14)</a>:</h4>
<p>/me remembers the need to update rust-analzyer in rust-lang/rust</p>



<a name="207148894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207148894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207148894">(Aug 17 2020 at 14:15)</a>:</h4>
<p>Let's see if this update sticks. The musl build should work, at least.</p>



<a name="207148912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207148912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207148912">(Aug 17 2020 at 14:15)</a>:</h4>
<p>This was relatively quite week, I think the biggest change is that we've removed <code>ra_</code> prefixes from crate names</p>



<a name="207149203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207149203" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207149203">(Aug 17 2020 at 14:18)</a>:</h4>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/5347">#5347</a> add rust-analyzer dump-chalk command.</p>
</blockquote>
<p>(from the changelog) That ended up being changed to a <code>CHALK_PRINT</code> setting instead to print chalk programs in log output</p>



<a name="207149610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207149610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207149610">(Aug 17 2020 at 14:22)</a>:</h4>
<p>I'd like to work on improving support within <code>macro_rules</code> blocks. Is there anyone I could work with to ensure I'm going down the right path for the design? Re <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Analysis.20within.20macro_rules/near/206934479">https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Analysis.20within.20macro_rules/near/206934479</a></p>



<a name="207149746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207149746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207149746">(Aug 17 2020 at 14:23)</a>:</h4>
<p>ouch, I should get back to this, still cleaning up vacation backlog, thanks for reminidng me!</p>



<a name="207149924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207149924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207149924">(Aug 17 2020 at 14:25)</a>:</h4>
<p>No worries, I also wasn't sure if I was pinging the right person, so I thought it might be better to ask during the sync-up.</p>



<a name="207151049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207151049" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207151049">(Aug 17 2020 at 14:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125131">detrumi</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/207149203">said</a>:</p>
<blockquote>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/5347">#5347</a> add rust-analyzer dump-chalk command.</p>
</blockquote>
<p>(from the changelog) That ended up being changed to a <code>CHALK_PRINT</code> setting instead to print chalk programs in log output</p>
</blockquote>
<p>Ooh nice. I'm excited to see how this helps/changes debugging</p>



<a name="207151330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207151330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207151330">(Aug 17 2020 at 14:36)</a>:</h4>
<p>Some names aren't being shown in the output yet, but eventually you'll be able to take that output and drop it into the chalk cli directly</p>



<a name="207847274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847274">(Aug 24 2020 at 14:08)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span></p>



<a name="207847289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847289" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847289">(Aug 24 2020 at 14:08)</a>:</h4>
<p>This week's changelog is up: <a href="https://rust-analyzer.github.io/thisweek/2020/08/24/changelog-39.html">https://rust-analyzer.github.io/thisweek/2020/08/24/changelog-39.html</a></p>



<a name="207847359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847359" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847359">(Aug 24 2020 at 14:09)</a>:</h4>
<p>Nothing to big happened in this release, although today, thanks to the awesome work by <span class="user-mention" data-user-id="254853">@pksunkara</span>, we published a bunch of auto-published crates to <a href="http://crates.io">crates.io</a></p>



<a name="207847420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847420" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847420">(Aug 24 2020 at 14:10)</a>:</h4>
<p>There's some progress on various parser/lexer bits in rust-lang/rustc, but it is suuuper slow</p>



<a name="207847504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847504" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847504">(Aug 24 2020 at 14:11)</a>:</h4>
<p>And I am also trying to sneak some snapshot tests into rustc :D </p>
<p><a href="https://github.com/rust-lang/rust/pull/75773">https://github.com/rust-lang/rust/pull/75773</a></p>



<a name="207847729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847729">(Aug 24 2020 at 14:13)</a>:</h4>
<p>Oh, I forgot the actual big thing</p>



<a name="207847730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847730">(Aug 24 2020 at 14:13)</a>:</h4>
<p><a href="https://github.com/rust-lang/vscode-rust/pull/840">https://github.com/rust-lang/vscode-rust/pull/840</a></p>



<a name="207847760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207847760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207847760">(Aug 24 2020 at 14:13)</a>:</h4>
<p>there's now a WIP PR merging typescript extensions!</p>



<a name="207848296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/207848296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Matuszewski <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#207848296">(Aug 24 2020 at 14:17)</a>:</h4>
<p>I'm back from vacation so I'll resume the work this week =)</p>



<a name="208572334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/208572334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#208572334">(Aug 31 2020 at 15:23)</a>:</h4>
<p>This week's changelog is up: <a href="https://rust-analyzer.github.io/thisweek/2020/08/31/changelog-40.html">https://rust-analyzer.github.io/thisweek/2020/08/31/changelog-40.html</a> <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="208572442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/208572442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#208572442">(Aug 31 2020 at 15:24)</a>:</h4>
<p>OMG, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> I completely forgot about the sync-up</p>



<a name="208572450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/208572450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#208572450">(Aug 31 2020 at 15:24)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="203546">@Laurențiu Nicola</span> <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="208572487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/208572487" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#208572487">(Aug 31 2020 at 15:25)</a>:</h4>
<p>So, yeah, we have a bunch of stuff coming together this week</p>



<a name="208572694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/208572694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#208572694">(Aug 31 2020 at 15:26)</a>:</h4>
<ul>
<li>Heroic efforts by <span class="user-mention" data-user-id="254853">@pksunkara</span> bore fruit -- rust-analyzer crates are now published to <a href="http://crates.io">crates.io</a> (without semver guarantees)</li>
<li>wg-parselib is a thing now (and we did a bunch of preliminary refactors already)!</li>
<li>We finally merged the work by <span class="user-mention" data-user-id="244843">@Zac Pullar-Strecker</span> , so we now parse doc comments and can make sense of the links within them</li>
</ul>



<a name="208572918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/208572918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#208572918">(Aug 31 2020 at 15:28)</a>:</h4>
<p>Oh, and I'll be on vacation the next two weeks :P</p>



<a name="209305644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/209305644" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#209305644">(Sep 07 2020 at 15:09)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>! Sorry for the delay today, but the release should be happening now. As was mentioned last week, Aleksey is on holidays, so I'm doing the release.</p>



<a name="209305780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/209305780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#209305780">(Sep 07 2020 at 15:11)</a>:</h4>
<p>I'll also review some PRs to keep the queue clean, but probably only later this week.</p>



<a name="210009244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210009244" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210009244">(Sep 14 2020 at 14:04)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>! <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> </p>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/09/14/changelog-42.html">https://rust-analyzer.github.io/thisweek/2020/09/14/changelog-42.html</a></p>
<p>Notably, we now support async blocks, a much requested feature, but there's a bunch of other cool stuff in there as well.</p>



<a name="210009542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210009542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210009542">(Sep 14 2020 at 14:06)</a>:</h4>
<p>Aleksey is still on holidays this week, but should be back for next week's release. I'll try to continue with the PR reviews until then.</p>



<a name="210059704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210059704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210059704">(Sep 14 2020 at 20:36)</a>:</h4>
<p>If I'm not mistaken, the configuration for the MergeBehaviour isn't actually in this release? At least vscode doesnt seem to recognize the config option in the settings.json and it doesnt seem to be in the extensions package.json either. Did the release not actually pick that PR up or did I make a mistake in my PR <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>? <a href="https://github.com/rust-analyzer/rust-analyzer/pull/5985">5985</a></p>



<a name="210060703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210060703" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210060703">(Sep 14 2020 at 20:44)</a>:</h4>
<p>Oh! I think releasing will just promote the already-built nightly binary, so the PR isn't included.</p>



<a name="210060774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210060774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210060774">(Sep 14 2020 at 20:45)</a>:</h4>
<p>Ah okay that would make sense</p>



<a name="210060919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210060919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210060919">(Sep 14 2020 at 20:46)</a>:</h4>
<p>I'll remove it from the changelog</p>



<a name="210094278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210094278" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210094278">(Sep 15 2020 at 06:28)</a>:</h4>
<p><span class="user-mention" data-user-id="300586">@veykril</span> since you're here, I didn't test your PR, but I'm not sure what the options mean. Which one is the "last layer", and can I use <code>last</code> to only merge one level of imports but without nesting them (e.g. <code>use std::io::{self, Read}</code> but not <code>use std::{fs, io::{self, Read}}</code>? I suspect that "last layer" can't really be ambiguous, though.</p>



<a name="210098751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210098751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210098751">(Sep 15 2020 at 07:36)</a>:</h4>
<p>Yes thats what is basically meant with it, I knew the wording wasn't the best, but I couldn't think of a good concise way to describe that behaviour. It basically is meant to only merge imports if the resulting import only contains one level of nesting.</p>



<a name="210098868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210098868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210098868">(Sep 15 2020 at 07:38)</a>:</h4>
<p>Basically it's supposed to do what was asked in this issue <a href="https://github.com/rust-analyzer/rust-analyzer/issues/3831">https://github.com/rust-analyzer/rust-analyzer/issues/3831</a></p>



<a name="210099254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210099254" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210099254">(Sep 15 2020 at 07:43)</a>:</h4>
<p>So it's "merge, but don't nest". Cool, I've always wanted that.</p>



<a name="210745576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210745576" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210745576">(Sep 21 2020 at 14:04)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's the meeting time again!</p>



<a name="210745639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210745639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210745639">(Sep 21 2020 at 14:04)</a>:</h4>
<p>I am back from vacation and trying to catch up</p>



<a name="210745727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210745727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210745727">(Sep 21 2020 at 14:05)</a>:</h4>
<p>Looks like I am not really necessary to keep the pace of development of rust-analyzer, that's great!</p>
<p>I am especially impressed that we've shipped async blocks!</p>



<a name="210745765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210745765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210745765">(Sep 21 2020 at 14:05)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="211727">@Jonas Schievink</span> for picking up the org stuff!</p>



<a name="210745971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/210745971" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#210745971">(Sep 21 2020 at 14:07)</a>:</h4>
<p>I guess, there's nothing too specific I can call out this week (still doing the catch up), but if I am needed to review or unblock something, feel free to agressively re-ping me!</p>



<a name="211508952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/211508952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#211508952">(Sep 28 2020 at 15:35)</a>:</h4>
<p>This week's changelog is up: <a href="https://rust-analyzer.github.io/thisweek/2020/09/28/changelog-44.html">https://rust-analyzer.github.io/thisweek/2020/09/28/changelog-44.html</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="213041928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213041928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213041928">(Oct 12 2020 at 14:01)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, it's that time again!</p>
<p>Today's changelog  is up!</p>
<p><a href="https://rust-analyzer.github.io/thisweek/2020/10/12/changelog-46.html">https://rust-analyzer.github.io/thisweek/2020/10/12/changelog-46.html</a></p>
<ul>
<li>I've got married :-) Getting married was the reason why I was less present during the recent couple of weeks, I should be more available now!</li>
<li>lots of quality improvements this week:<ul>
<li>configurable auto import (to nest or not to nest)</li>
<li>fix compat with 1.47</li>
<li>shortened hints for Iterators <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> </li>
<li>plain-text support in hover</li>
</ul>
</li>
</ul>
<p>No progress on parser library-ification sadly, I hope to get back to it next week.</p>



<a name="213041967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213041967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213041967">(Oct 12 2020 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> wow congratulations! <span aria-label="ring" class="emoji emoji-1f48d" role="img" title="ring">:ring:</span></p>



<a name="213041980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213041980" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Coenen Benjamin <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213041980">(Oct 12 2020 at 14:01)</a>:</h4>
<p>Congrats <span class="user-mention" data-user-id="133169">@matklad</span></p>



<a name="213042077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213042077" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Matuszewski <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213042077">(Oct 12 2020 at 14:02)</a>:</h4>
<p>Congratulations!</p>



<a name="213042116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213042116" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213042116">(Oct 12 2020 at 14:02)</a>:</h4>
<p>congratulations <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="213044293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213044293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213044293">(Oct 12 2020 at 14:20)</a>:</h4>
<p>Congratulations!</p>



<a name="213044745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213044745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213044745">(Oct 12 2020 at 14:24)</a>:</h4>
<p>Congratulations!</p>



<a name="213050318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213050318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213050318">(Oct 12 2020 at 15:07)</a>:</h4>
<p>Congratulations!!</p>



<a name="213055377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213055377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213055377">(Oct 12 2020 at 15:50)</a>:</h4>
<p>Oh, congrats!</p>



<a name="213291157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213291157" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213291157">(Oct 14 2020 at 13:54)</a>:</h4>
<p>I'm a bit late, but Congratulations!</p>



<a name="213296156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213296156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213296156">(Oct 14 2020 at 14:28)</a>:</h4>
<p>Oh my, congrats :D</p>



<a name="213790274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213790274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213790274">(Oct 19 2020 at 14:07)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> it's Monday again!</p>



<a name="213790288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213790288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213790288">(Oct 19 2020 at 14:07)</a>:</h4>
<p>Today's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/10/19/changelog-47.html">https://rust-analyzer.github.io/thisweek/2020/10/19/changelog-47.html</a></p>



<a name="213790342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213790342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213790342">(Oct 19 2020 at 14:07)</a>:</h4>
<p>There's quite a bunch of "improve quality &amp; polish" changes, I like that!</p>



<a name="213790708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213790708" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213790708">(Oct 19 2020 at 14:10)</a>:</h4>
<p>In the highlights, we have a new TextMate grammar, rewrote our build automation to use xshell (and I want to better automate all other builds: <a href="https://github.com/rust-analyzer/lsp-server/blob/master/xtask/src/main.rs">https://github.com/rust-analyzer/lsp-server/blob/master/xtask/src/main.rs</a>) and introduces S-actionable and S-unactionable issue labels</p>



<a name="213793922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213793922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213793922">(Oct 19 2020 at 14:31)</a>:</h4>
<p>I'm seeing some undefined responses coming back from inlay hints on master :(</p>



<a name="213794240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213794240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213794240">(Oct 19 2020 at 14:33)</a>:</h4>
<p>Hm, is there an issue for that?</p>



<a name="213794336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/213794336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#213794336">(Oct 19 2020 at 14:33)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/6285">https://github.com/rust-analyzer/rust-analyzer/issues/6285</a></p>



<a name="214578232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214578232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214578232">(Oct 26 2020 at 14:13)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> !</p>
<p>It's that time again (actually, it is different time this time, due to DST shenanigans)</p>



<a name="214578282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214578282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214578282">(Oct 26 2020 at 14:13)</a>:</h4>
<p>Today's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/10/26/changelog-48.html">https://rust-analyzer.github.io/thisweek/2020/10/26/changelog-48.html</a></p>



<a name="214578420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214578420" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214578420">(Oct 26 2020 at 14:14)</a>:</h4>
<p>We have a whole bunch of features and bugfixes. Additionaly, <span class="user-mention" data-user-id="245854">@popzxc</span> is working on refactoring our completion infrastructure</p>



<a name="214578523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214578523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214578523">(Oct 26 2020 at 14:15)</a>:</h4>
<p>There's one notable bug-fix: <code>cfg_if</code> now works in std, which unlocks platform-specific  modules.</p>
<p>The implemenation is ungreat -- we just pick random cfg-if from the crate graph and snap it onto std crates. It's not super clear what the proper fix should look like</p>



<a name="214578625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214578625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214578625">(Oct 26 2020 at 14:16)</a>:</h4>
<p>See the writeup at <a href="#narrow/stream/131828-t-compiler/topic/Moving.20.2Flibrary.20to.20a.20new.20worksapce">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/Moving.20.2Flibrary.20to.20a.20new.20worksapce</a> which proposes some direction for this issue</p>



<a name="214579996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214579996" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214579996">(Oct 26 2020 at 14:26)</a>:</h4>
<p>Hmm</p>



<a name="214580087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214580087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214580087">(Oct 26 2020 at 14:27)</a>:</h4>
<p>I don't think I realized that <a class="stream-topic" data-stream-id="131828" href="/#narrow/stream/131828-t-compiler/topic/Moving.20.2Flibrary.20to.20a.20new.20worksapce">#t-compiler &gt; Moving /library to a new worksapce</a> could help with IDEs</p>



<a name="214580338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214580338" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214580338">(Oct 26 2020 at 14:29)</a>:</h4>
<p>By itself, it would help a bit, it also needs "and vendor <a href="http://crates.io">crates.io</a> deps of stdlib into rust-src component" to be truly useufl</p>



<a name="214582055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214582055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214582055">(Oct 26 2020 at 14:41)</a>:</h4>
<p>It would also help with <code>-Zbuild-std</code>, I assume</p>



<a name="214599286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214599286" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214599286">(Oct 26 2020 at 16:38)</a>:</h4>
<p>There seem to be a lot of issues related to the new TM grammar. Having an up to date grammar is great but maybe we need to figure out how to make it more testable or disable it by default until it's a little more baked?</p>



<a name="214599561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214599561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214599561">(Oct 26 2020 at 16:40)</a>:</h4>
<p>We fixed a bunch of issues in this release, so I think it would be better now, and more or less fine after a couple of releases more.</p>



<a name="214599808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214599808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214599808">(Oct 26 2020 at 16:41)</a>:</h4>
<p>I don't think there's a way to simultaneously:</p>
<ul>
<li>let everyone test-drive the improvements to give feedback</li>
<li>don't change anything</li>
</ul>
<p>With our rapid release cycle and ability to easily <em>not</em> upgrade the extensions, I think we should favor "break things fast" approach</p>



<a name="214599990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214599990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214599990">(Oct 26 2020 at 16:42)</a>:</h4>
<p>I wonder if all those issues were reported against stable or against nightly?</p>



<a name="214600081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214600081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214600081">(Oct 26 2020 at 16:43)</a>:</h4>
<p>In theory, nightly should act as a buffer here</p>



<a name="214600112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214600112" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214600112">(Oct 26 2020 at 16:43)</a>:</h4>
<p>That's fair. We have a really good test framework for the rust side of things. TS needs more test love.</p>



<a name="214600179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214600179" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214600179">(Oct 26 2020 at 16:43)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/pull/6137">https://github.com/rust-analyzer/rust-analyzer/pull/6137</a> was merged 14 days ago, so it was in.. one stable release?</p>



<a name="214600280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214600280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214600280">(Oct 26 2020 at 16:44)</a>:</h4>
<p>Hm I'm not sure about stable vs nightly. I think if it was on stable we'd see more complaints on reddit</p>



<a name="214600302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214600302" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214600302">(Oct 26 2020 at 16:44)</a>:</h4>
<p>It's not just what we have, its what we <em>could</em> have. I belive most of the Rust stuff is unit-testable, while most of TS stuff is only testable by folks reported bugs</p>



<a name="214600547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214600547" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214600547">(Oct 26 2020 at 16:46)</a>:</h4>
<p>maybe its time to introduce <code>beta</code>:</p>
<ul>
<li>stagger stable by one week</li>
<li>on release, promote nightly to beta</li>
<li>on release, promote beta to stable</li>
</ul>
<p>When installing extension, opt-in 10% of the users into beta.</p>
<p>That should give us a much better coverage</p>



<a name="214600590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/214600590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#214600590">(Oct 26 2020 at 16:46)</a>:</h4>
<p>However, to make this really deliver value, we would need beta backport process, and that's a lot of process!</p>



<a name="215330319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215330319" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215330319">(Nov 02 2020 at 15:07)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> this week changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/11/02/changelog-49.html">https://rust-analyzer.github.io/thisweek/2020/11/02/changelog-49.html</a></p>



<a name="215330353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215330353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215330353">(Nov 02 2020 at 15:07)</a>:</h4>
<p>This was a pretty quite week :)</p>



<a name="215340889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215340889" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215340889">(Nov 02 2020 at 16:19)</a>:</h4>
<p>and pretty quiet sync-up ;)</p>



<a name="215348869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215348869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215348869">(Nov 02 2020 at 17:12)</a>:</h4>
<p>If I find the time and no one else gets to it I might try and move completion over to the resolve model or <code>experimental/resolveCodeAction</code> -&gt; <code>codeAction/resolve</code></p>



<a name="215349043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215349043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215349043">(Nov 02 2020 at 17:13)</a>:</h4>
<p>I don't think its worth it</p>



<a name="215349165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215349165" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215349165">(Nov 02 2020 at 17:14)</a>:</h4>
<p>This needs profiling, but I <em>think</em> that most of the work happens when computing available compleitons, and not when rendering them</p>



<a name="215349181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215349181" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215349181">(Nov 02 2020 at 17:14)</a>:</h4>
<p>(as opposed to assists)</p>



<a name="215350846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215350846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215350846">(Nov 02 2020 at 17:26)</a>:</h4>
<p>The code action change needs to be done anyway</p>



<a name="215350955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215350955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215350955">(Nov 02 2020 at 17:27)</a>:</h4>
<p>Yeah, we should move codeAction, but I tink we should keep completion as is</p>



<a name="215351281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/215351281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#215351281">(Nov 02 2020 at 17:30)</a>:</h4>
<p>Makes sense</p>



<a name="216097495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216097495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216097495">(Nov 09 2020 at 15:15)</a>:</h4>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/11/09/changelog-50.html">https://rust-analyzer.github.io/thisweek/2020/11/09/changelog-50.html</a></p>



<a name="216097687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216097687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216097687">(Nov 09 2020 at 15:17)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> :)</p>



<a name="216097798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216097798" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216097798">(Nov 09 2020 at 15:18)</a>:</h4>
<p>DST is confusing, but I think this it's the right hour?</p>



<a name="216097941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216097941" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216097941">(Nov 09 2020 at 15:18)</a>:</h4>
<p>We have a whole bunch of improvements by <span class="user-mention silent" data-user-id="300586">Lukas Wirth</span> , both new assists, as well as internal improvements to assist infra, to make tree difss smaller, to prevent cursor from moving</p>



<a name="216098127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216098127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216098127">(Nov 09 2020 at 15:20)</a>:</h4>
<p>There's also a bunch of work on TextMate grammar by <span class="user-mention" data-user-id="358204">@Dusty Pomerleau</span> . Hopefully, this will end up being upstreamed to VS Code</p>



<a name="216098275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216098275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216098275">(Nov 09 2020 at 15:21)</a>:</h4>
<p>We've also enabled <code>-Dunreacheable_pub</code> globally inside rust-analyzer, so no more pub field on priv struct shortcut :D</p>



<a name="216098332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216098332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216098332">(Nov 09 2020 at 15:22)</a>:</h4>
<p>And there also was a re-work for our literals grammar</p>



<a name="216883790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216883790" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216883790">(Nov 16 2020 at 15:11)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> this weeks changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/11/16/changelog-51.html">https://rust-analyzer.github.io/thisweek/2020/11/16/changelog-51.html</a></p>



<a name="216883913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216883913" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216883913">(Nov 16 2020 at 15:12)</a>:</h4>
<p>Mostly bugfixs and polish again, but we did gain one new major feature</p>



<a name="216883987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216883987" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216883987">(Nov 16 2020 at 15:13)</a>:</h4>
<p>Now <code>#[feature(rustc_private)]</code> is supported (but you need to set the path to sources of the compiler in the settings)</p>



<a name="216884009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/216884009" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#216884009">(Nov 16 2020 at 15:13)</a>:</h4>
<p>ah nice</p>



<a name="217621114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/217621114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#217621114">(Nov 23 2020 at 12:22)</a>:</h4>
<p>Hey, I am teaching some folks Rust today, so no weekly syncup</p>



<a name="217621134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/217621134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#217621134">(Nov 23 2020 at 12:23)</a>:</h4>
<p>but, well, we have auto-import during completion now! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="217646549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/217646549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#217646549">(Nov 23 2020 at 16:03)</a>:</h4>
<p>Just so it's here, the latest changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2020/11/23/changelog-52.html">https://rust-analyzer.github.io/thisweek/2020/11/23/changelog-52.html</a></p>



<a name="218319425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/218319425" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#218319425">(Nov 30 2020 at 17:38)</a>:</h4>
<p>This week's changelog: <a href="https://rust-analyzer.github.io/thisweek/2020/11/30/changelog-53.html">https://rust-analyzer.github.io/thisweek/2020/11/30/changelog-53.html</a></p>



<a name="219089990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219089990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219089990">(Dec 07 2020 at 15:01)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> hey, this week's changelog is up: <a href="https://rust-analyzer.github.io/thisweek/2020/12/07/changelog-54.html">https://rust-analyzer.github.io/thisweek/2020/12/07/changelog-54.html</a></p>



<a name="219090132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219090132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219090132">(Dec 07 2020 at 15:02)</a>:</h4>
<p>The highlight of the week is macro diagnostics and general cleanup by <span class="user-mention silent" data-user-id="211727">Jonas Schievink</span></p>



<a name="219090164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219090164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219090164">(Dec 07 2020 at 15:02)</a>:</h4>
<p>(I've been quitely hacking away on the "sharing config between various editors" problem, hope to have a solution this week)</p>



<a name="219863983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219863983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219863983">(Dec 14 2020 at 16:14)</a>:</h4>
<p><span aria-label="octopus" class="emoji emoji-1f419" role="img" title="octopus">:octopus:</span></p>



<a name="219864295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864295">(Dec 14 2020 at 16:17)</a>:</h4>
<p>Oh right!</p>



<a name="219864345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864345" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864345">(Dec 14 2020 at 16:17)</a>:</h4>
<p>I intended to make a <em>sneaky</em> sync-up: we are in the Christmas mode, so no pings</p>



<a name="219864402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864402">(Dec 14 2020 at 16:17)</a>:</h4>
<p><em>but</em> I've got sucked into implemented removal for a double linked list</p>



<a name="219864479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864479" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864479">(Dec 14 2020 at 16:18)</a>:</h4>
<p>This week's changelog makes me proud <span aria-label="blushing" class="emoji emoji-1f633" role="img" title="blushing">:blushing:</span> </p>
<p><a href="https://rust-analyzer.github.io/thisweek/2020/12/14/changelog-55.html">https://rust-analyzer.github.io/thisweek/2020/12/14/changelog-55.html</a></p>



<a name="219864496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864496">(Dec 14 2020 at 16:18)</a>:</h4>
<p><strong>soo</strong> much great features &amp; fixes in there!</p>



<a name="219864738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864738">(Dec 14 2020 at 16:20)</a>:</h4>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/6769">#6769</a>, <a href="https://github.com/rust-lang/rust/issues/6841">#6841</a> Remove this semicolon fix:</p>
</blockquote>
<p>this is really nice :D</p>



<a name="219864751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864751">(Dec 14 2020 at 16:20)</a>:</h4>
<p>Highlights are:</p>
<ul>
<li>Lazy resolution of edits in completion</li>
<li>Fixed critical accidently quadratic perf bug in SyntaxRewriter</li>
<li>A bunch of macro improvements by <span class="user-mention" data-user-id="211727">@Jonas Schievink</span></li>
<li>LSP Configuration now has a single source of truth -- <a href="http://config.rs">config.rs</a></li>
</ul>



<a name="219864786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864786" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864786">(Dec 14 2020 at 16:20)</a>:</h4>
<p>Finally, I am unreasonably excited about mutable immutable syntax trees</p>



<a name="219864841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864841" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864841">(Dec 14 2020 at 16:20)</a>:</h4>
<p>(that's why I am implementing the darn doubly-linked list <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> )</p>



<a name="219864868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864868">(Dec 14 2020 at 16:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/219864841">said</a>:</p>
<blockquote>
<p>(that's why I am implementing the darn doubly-linked list <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> )</p>
</blockquote>
<p>isn't there a crate for that?</p>



<a name="219864921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864921" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864921">(Dec 14 2020 at 16:21)</a>:</h4>
<p>I don't think so</p>



<a name="219864949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219864949" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219864949">(Dec 14 2020 at 16:21)</a>:</h4>
<p>I have 2dimensional linked lists which needs to sorted along X dimension</p>



<a name="219865032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865032">(Dec 14 2020 at 16:22)</a>:</h4>
<p>Not sure if it's possible to factorize that nicely...</p>



<a name="219865105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865105">(Dec 14 2020 at 16:22)</a>:</h4>
<p>(aaaand I think in the end the whole thing needs to be raw-pointer based. Efficient&amp;Ergonomic syntax trees are scary)</p>



<a name="219865478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865478">(Dec 14 2020 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/219864751">said</a>:</p>
<blockquote>
<p>Highlights are:</p>
</blockquote>
<p>also the Chalk update, which improves performance quite a bit</p>



<a name="219865576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865576" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865576">(Dec 14 2020 at 16:26)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> reddit will either love you or hate you after you land that</p>



<a name="219865755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865755">(Dec 14 2020 at 16:27)</a>:</h4>
<p>TBH, it's not <em>that</em> much worse than what we already have in rowan</p>



<a name="219865831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865831">(Dec 14 2020 at 16:28)</a>:</h4>
<p>I feel like folks just don't reallize how horrifyingly it is implemented inside :D</p>



<a name="219865924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865924">(Dec 14 2020 at 16:28)</a>:</h4>
<p>(and <em>that</em> is the real reason why we have this ast -&gt; SyntaxNode -&gt; cursor -&gt; GreenNode abstraction stacking -- to discourage folks from looking inside /s )</p>



<a name="219865964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865964">(Dec 14 2020 at 16:29)</a>:</h4>
<p>LSP 3.16 was officially released today and I have a PR up in lsp-types. We've been running on the proposed version for a while and I've been creating issues along the way for things we could take advantage of. If anyone else sees some useful opportunities (changelog: <a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#version_3_16_0">https://microsoft.github.io/language-server-protocol/specifications/specification-current/#version_3_16_0</a>) that I've missed please file issues or PRs</p>



<a name="219865977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219865977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219865977">(Dec 14 2020 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="129457">@Florian Diebold</span> so true, yeah!</p>



<a name="219866029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219866029" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219866029">(Dec 14 2020 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> thanks for being on top of that!</p>



<a name="219866154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219866154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219866154">(Dec 14 2020 at 16:30)</a>:</h4>
<p>Ok, I've just made the first smoke test of editing API work!</p>



<a name="219866611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/219866611" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#219866611">(Dec 14 2020 at 16:33)</a>:</h4>
<p>ship it!</p>



<a name="221067042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/221067042" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#221067042">(Dec 28 2020 at 15:15)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> (hopefully) the last release of the year is out: <a href="https://rust-analyzer.github.io/thisweek/2020/12/28/changelog-57.html">https://rust-analyzer.github.io/thisweek/2020/12/28/changelog-57.html</a>. Some of the larger features include better pattern and enum completion, extract and rename module assists, lifetime and label search/rename/go to definition and pre-built Apple M1 binaries. Also a bunch of MBE and proc macro fixes.</p>



<a name="221068328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/221068328" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#221068328">(Dec 28 2020 at 15:34)</a>:</h4>
<p>Also, someone broke the auto-update feature of the Code extension <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span></p>



<a name="221087000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/221087000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#221087000">(Dec 28 2020 at 19:56)</a>:</h4>
<p>The <a href="https://github.com/rust-analyzer/rust-analyzer/issues/7037"><code>${0:_}</code></a> being inserted after applying some of the actions is also a bit sad.</p>



<a name="221534908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/221534908" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#221534908">(Jan 04 2021 at 15:15)</a>:</h4>
<p>Today's changelog: <a href="https://rust-analyzer.github.io/thisweek/2021/01/04/changelog-58.html">https://rust-analyzer.github.io/thisweek/2021/01/04/changelog-58.html</a></p>



<a name="222309650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/222309650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#222309650">(Jan 11 2021 at 15:17)</a>:</h4>
<p>Today's changelog: <a href="https://rust-analyzer.github.io/thisweek/2021/01/11/changelog-59.html">https://rust-analyzer.github.io/thisweek/2021/01/11/changelog-59.html</a></p>



<a name="222312319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/222312319" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#222312319">(Jan 11 2021 at 15:33)</a>:</h4>
<p>Biggest update: <span class="user-mention" data-user-id="133169">@matklad</span> re-installs sync-up in the t-compiler calendar</p>



<a name="222314713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/222314713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#222314713">(Jan 11 2021 at 15:49)</a>:</h4>
<p>I've also started to work on that syntax tree redesign in <a href="https://github.com/rust-analyzer/rowan/tree/clone-for-update">https://github.com/rust-analyzer/rowan/tree/clone-for-update</a></p>



<a name="223130256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223130256" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223130256">(Jan 18 2021 at 15:01)</a>:</h4>
<p>Today's changelog: <a href="https://rust-analyzer.github.io/thisweek/2021/01/18/changelog-60.html">https://rust-analyzer.github.io/thisweek/2021/01/18/changelog-60.html</a></p>



<a name="223130266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223130266" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223130266">(Jan 18 2021 at 15:01)</a>:</h4>
<p>As a remilder, we are having a steering meeting today!</p>



<a name="223130336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223130336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223130336">(Jan 18 2021 at 15:01)</a>:</h4>
<p>But yeah, there's a changelog, as usual )</p>



<a name="223908429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223908429" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223908429">(Jan 25 2021 at 15:01)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span></p>



<a name="223908554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223908554" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223908554">(Jan 25 2021 at 15:02)</a>:</h4>
<p>we have a lot for this week: <a href="https://rust-analyzer.github.io/thisweek/2021/01/25/changelog-61.html">https://rust-analyzer.github.io/thisweek/2021/01/25/changelog-61.html</a></p>



<a name="223908605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223908605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223908605">(Jan 25 2021 at 15:02)</a>:</h4>
<p>I wonder if our steering process has anything to do with it <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="223908726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223908726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223908726">(Jan 25 2021 at 15:03)</a>:</h4>
<p>Yeah, that meeting was fairly motivating for me</p>



<a name="223908915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223908915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223908915">(Jan 25 2021 at 15:04)</a>:</h4>
<p>The highlights: <span class="user-mention" data-user-id="211727">@Jonas Schievink</span> is working on supporting local items, <span class="user-mention" data-user-id="300586">@Lukas Wirth</span> is working through some of the long-overdue refactors and <span class="user-mention" data-user-id="216201">@Edwin Cheng</span> is pushing proc macros forward</p>



<a name="223909113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223909113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223909113">(Jan 25 2021 at 15:05)</a>:</h4>
<p>(I was mostly busy with rowan stuff. It got a bit faster&amp;smaller, one seemengly major optimization turned out to be useless, <em>but</em> we now have <code>countme</code> infra)</p>



<a name="223909191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223909191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223909191">(Jan 25 2021 at 15:06)</a>:</h4>
<p>ohhhhh</p>



<a name="223909300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223909300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223909300">(Jan 25 2021 at 15:07)</a>:</h4>
<p>of course, <span class="user-mention" data-user-id="231447">@Kirill Bulatov</span> shipped assoc item auto-import, <em>and</em> they are helping Microsoft to upstream inlay hints!</p>



<a name="223909529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223909529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223909529">(Jan 25 2021 at 15:08)</a>:</h4>
<p>trait associated items completion are very useful one !</p>



<a name="223910446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223910446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223910446">(Jan 25 2021 at 15:15)</a>:</h4>
<p>who is rowan?</p>



<a name="223910465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223910465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223910465">(Jan 25 2021 at 15:15)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rowan/">https://github.com/rust-analyzer/rowan/</a></p>



<a name="223910675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223910675" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223910675">(Jan 25 2021 at 15:16)</a>:</h4>
<p>And I'm slowly trying to go through the remaining issues and see if there's anything we can close</p>



<a name="223910749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223910749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223910749">(Jan 25 2021 at 15:17)</a>:</h4>
<p>Thank you so much for this <span class="user-mention" data-user-id="203546">@Laurențiu Nicola</span> !</p>



<a name="223910943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223910943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223910943">(Jan 25 2021 at 15:19)</a>:</h4>
<p>what is the tl;dr for 'helping MS upstream inlay hints'?</p>



<a name="223911124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223911124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223911124">(Jan 25 2021 at 15:20)</a>:</h4>
<p>The type hints we show after variable declarations and in other places are basically a hack, and they work only in Code because they're not standardized yet. Upstreaming means adding them to LSP, so every editor can use them, and we no longer need client-side code to render them. It might even fix the janky cursor movement around them.</p>



<a name="223911209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223911209" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223911209">(Jan 25 2021 at 15:20)</a>:</h4>
<p>well.. I get type hints in Vim, but there is probably nuance</p>



<a name="223911332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223911332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223911332">(Jan 25 2021 at 15:21)</a>:</h4>
<p><a href="/user_uploads/4715/HqNtNGc3y0Sp4V5yFSNWe55S/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/HqNtNGc3y0Sp4V5yFSNWe55S/image.png" title="image.png"><img src="/user_uploads/4715/HqNtNGc3y0Sp4V5yFSNWe55S/image.png"></a></div>



<a name="223911346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223911346" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223911346">(Jan 25 2021 at 15:21)</a>:</h4>
<p>These ones</p>



<a name="223911431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223911431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223911431">(Jan 25 2021 at 15:22)</a>:</h4>
<p>If you're using coc.nvim, that's a fork of the Code extension, so it supports more stuff than most other clients</p>



<a name="223911472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223911472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223911472">(Jan 25 2021 at 15:22)</a>:</h4>
<p>that explains it</p>



<a name="223911918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223911918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223911918">(Jan 25 2021 at 15:25)</a>:</h4>
<p><a href="/user_uploads/4715/UI9KVvIf_qSFkXKxJ1AQARdb/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/UI9KVvIf_qSFkXKxJ1AQARdb/image.png" title="image.png"><img src="/user_uploads/4715/UI9KVvIf_qSFkXKxJ1AQARdb/image.png"></a></div>



<a name="223915547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223915547" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223915547">(Jan 25 2021 at 15:48)</a>:</h4>
<p>so overall not as fully featured as what's presented in Code</p>



<a name="223915669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223915669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223915669">(Jan 25 2021 at 15:49)</a>:</h4>
<p>It's only been implemented recently</p>



<a name="223937629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223937629" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223937629">(Jan 25 2021 at 18:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/223909113">said</a>:</p>
<blockquote>
<p>(I was mostly busy with rowan stuff. It got a bit faster&amp;smaller, one seemengly major optimization turned out to be useless, <em>but</em> we now have <code>countme</code> infra)</p>
</blockquote>
<p>Out of curiosity what was the optimization and why did it end up being useless?</p>



<a name="223937945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223937945" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223937945">(Jan 25 2021 at 18:16)</a>:</h4>
<p>(deleted)</p>



<a name="223938061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223938061" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223938061">(Jan 25 2021 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-id="203366">@Jeremy Kolb</span> we use structural shading between green nods -- all identical tokens in a file point to the same green node. This is done per file. I wanted to introduce a global read-only cache with frequent tokens -- keywords, punctuation, etc</p>



<a name="223938287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/223938287" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#223938287">(Jan 25 2021 at 18:18)</a>:</h4>
<p>so that literarly all syntax trees share the same <code>true</code> node. Turns out, this is not a big win in comparison to just per-file caching</p>



<a name="224737407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/224737407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#224737407">(Feb 01 2021 at 15:00)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> I think matklad might be away or busy, so I'll do the honours today. The changelog post is up at <a href="https://rust-analyzer.github.io/thisweek/2021/02/01/changelog-62.html">https://rust-analyzer.github.io/thisweek/2021/02/01/changelog-62.html</a></p>



<a name="224737594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/224737594" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#224737594">(Feb 01 2021 at 15:01)</a>:</h4>
<p>The big items this week are async proc macro loading (by <strong>Edwin Cheng</strong>), references code lens (<strong>vsrs</strong>) and a lot of ongoing work for local item support done by <strong>Jonas Schievink</strong> .</p>



<a name="224738449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/224738449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#224738449">(Feb 01 2021 at 15:06)</a>:</h4>
<p>In addition, I've labelled more issues, so everyone can have a pick at an <code>S-actionable</code> (or <code>S-unactionable</code>) one</p>



<a name="224739498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/224739498" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#224739498">(Feb 01 2021 at 15:13)</a>:</h4>
<p>last time I checked, all open issues were labeled actually! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="224739940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/224739940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#224739940">(Feb 01 2021 at 15:17)</a>:</h4>
<p><del>I think there's two remaining ones, but nothing too important.</del> Oh, somebody labelled them in the meanwhile.</p>



<a name="225526001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225526001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225526001">(Feb 08 2021 at 10:39)</a>:</h4>
<p>Hey, I am busy this Monday as well, could anyone cut a release? :)</p>



<a name="225527281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225527281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225527281">(Feb 08 2021 at 10:53)</a>:</h4>
<p>Umm, yeah, I'll try</p>



<a name="225531665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225531665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225531665">(Feb 08 2021 at 11:39)</a>:</h4>
<p>@matklad r? <a href="https://github.com/rust-analyzer/rust-analyzer.github.io/commit/8a57b0a174b4e4d7d507defcf17c6cb096072153">https://github.com/rust-analyzer/rust-analyzer.github.io/commit/8a57b0a174b4e4d7d507defcf17c6cb096072153</a></p>



<a name="225531819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225531819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225531819">(Feb 08 2021 at 11:40)</a>:</h4>
<p>Thanks!</p>



<a name="225555846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225555846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225555846">(Feb 08 2021 at 15:01)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/02/08/changelog-63.html">https://rust-analyzer.github.io/thisweek/2021/02/08/changelog-63.html</a>.</p>
<p>The bigger changes this week are two new assists, "extract function" and "generate enum match methods", even more work on local item support and a bunch of architecture and LSP client config docs.</p>



<a name="225558127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225558127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225558127">(Feb 08 2021 at 15:15)</a>:</h4>
<p>We also managed to update the version distributed with <code>rustup</code>. The previous one was from last September.</p>



<a name="225562035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225562035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225562035">(Feb 08 2021 at 15:41)</a>:</h4>
<p>Just to mention, we've got an initial discussion about inlay hints upstreaming, nothing really new happened, the guys seemed enthusiastic enough to work on our particular related pain points, I'll work on using that new API in RA to give them better feedback.</p>



<a name="225562205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225562205" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225562205">(Feb 08 2021 at 15:42)</a>:</h4>
<p>Did they fix the cursor movement across the hints?</p>



<a name="225562339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225562339" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225562339">(Feb 08 2021 at 15:43)</a>:</h4>
<p>Let's see how long would it take Microsoft to ship the feature <span class="user-mention" data-user-id="231447">@Kirill Bulatov</span> did for fun :)</p>



<a name="225563159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225563159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225563159">(Feb 08 2021 at 15:49)</a>:</h4>
<p>No, they did not fix the caret before we've spoken, but now they consider doing this and it seems like a small change from their side, so maybe it gets better soon.</p>



<a name="225564631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225564631" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225564631">(Feb 08 2021 at 15:59)</a>:</h4>
<p><span class="user-mention" data-user-id="231447">@Kirill Bulatov</span> is there an actual vscode issue that this is all being tracked in from their side or is the defacto location the issue in our repo?</p>



<a name="225565025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225565025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225565025">(Feb 08 2021 at 16:01)</a>:</h4>
<p>Nothing but our repo and their frozen issue with tons of "I'd love that feature" comments.<br>
I'll create a few after I get something working for RA.</p>



<a name="225565081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/225565081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#225565081">(Feb 08 2021 at 16:02)</a>:</h4>
<p>I think that this will be the thirdish feature in vscode that has largely come out of rust-analyzer.</p>



<a name="226393730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226393730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226393730">(Feb 15 2021 at 15:00)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, it's that time again!</p>



<a name="226393826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226393826" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226393826">(Feb 15 2021 at 15:01)</a>:</h4>
<p>Heres's the <code>0b1000000</code> changelog: <a href="https://rust-analyzer.github.io/thisweek/2021/02/15/changelog-64.html">https://rust-analyzer.github.io/thisweek/2021/02/15/changelog-64.html</a></p>



<a name="226393839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226393839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226393839">(Feb 15 2021 at 15:01)</a>:</h4>
<p>it's huuuge!</p>



<a name="226393902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226393902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226393902">(Feb 15 2021 at 15:02)</a>:</h4>
<p>We shipped inner items!</p>



<a name="226394087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394087">(Feb 15 2021 at 15:03)</a>:</h4>
<p>I also have one announcement to make...</p>



<a name="226394139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394139" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394139">(Feb 15 2021 at 15:04)</a>:</h4>
<p><a href="https://matklad.github.io/2021/02/15/NEAR.html">https://matklad.github.io/2021/02/15/NEAR.html</a></p>



<a name="226394177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394177" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394177">(Feb 15 2021 at 15:04)</a>:</h4>
<p>I am joining NEAR (sharded proof of stake public blockchain)! TL;DR: I’ll be spending 60% of my time on WASM runtime for smart contracts and 40% on rust-analyzer :)</p>



<a name="226394474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394474">(Feb 15 2021 at 15:06)</a>:</h4>
<p>I am also making some progress on mutable syntax trees</p>



<a name="226394577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394577">(Feb 15 2021 at 15:07)</a>:</h4>
<p>I am excited about the API for editing trees, it really becomes world's simpler. At the same time, I am not thrilled about the perf impact</p>



<a name="226394699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394699">(Feb 15 2021 at 15:08)</a>:</h4>
<p>I am seeing 10% overall regression on analysis stats. I think it's ok, in the grand scheme of things, but it really grinds my gears that mutability is not zero cost )</p>



<a name="226394836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394836">(Feb 15 2021 at 15:10)</a>:</h4>
<p>It also seems that today I was nerd-sniped into designing an actor library by <span class="user-mention" data-user-id="218683">@Alice Ryhl</span> , so we might gain some more strumture aroound threar joining</p>



<a name="226394884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226394884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226394884">(Feb 15 2021 at 15:10)</a>:</h4>
<p>That's it for me!</p>



<a name="226395294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226395294" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226395294">(Feb 15 2021 at 15:13)</a>:</h4>
<p>The changelog wasn't posted on twitter yet</p>



<a name="226395303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226395303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226395303">(Feb 15 2021 at 15:14)</a>:</h4>
<p>Congrats on the job! I'm glad they'll let you work on rust-analyzer.</p>



<a name="226395348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226395348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226395348">(Feb 15 2021 at 15:14)</a>:</h4>
<p>If I find the time I might try to implement the new completion item labelling</p>



<a name="226396636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226396636" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226396636">(Feb 15 2021 at 15:25)</a>:</h4>
<p>I already mentioned it, but I made a PoC Grafana dashboard with our analysis-stats metrics, it's at <a href="https://grafana.dend.ro/d/XF6z6oPMk/rust-analyzer-metrics?orgId=1">https://grafana.dend.ro/d/XF6z6oPMk/rust-analyzer-metrics?orgId=1</a></p>



<a name="226396681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226396681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226396681">(Feb 15 2021 at 15:25)</a>:</h4>
<p>It doesn't sync yet, but it's a bit hacky anyway, so I don't know if anyone will use it</p>



<a name="226396898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226396898" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226396898">(Feb 15 2021 at 15:27)</a>:</h4>
<p>it def looks prettier than what we use.</p>



<a name="226397010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226397010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226397010">(Feb 15 2021 at 15:28)</a>:</h4>
<p>It's more about supporting zoom than being pretty, but I suspect we could implement that in the old one so it stays a static web page</p>



<a name="226397040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226397040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226397040">(Feb 15 2021 at 15:28)</a>:</h4>
<p>It's Plotly anyway, because the Grafana plots don't support random values on the X axis</p>



<a name="226397474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226397474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226397474">(Feb 15 2021 at 15:32)</a>:</h4>
<p>I've hooked up a proto branch with the proposed hints API used:<br>
<a href="https://github.com/rust-analyzer/rust-analyzer/compare/master...SomeoneToIgnore:upstream-inlay-hints?expand=1">https://github.com/rust-analyzer/rust-analyzer/compare/master...SomeoneToIgnore:upstream-inlay-hints?expand=1</a></p>
<p>Currently feels pretty far behind the decorators we have: no our issues are solved, a few more added on top.<br>
I've also reached out and shared the feedback, proposing to do some tracking on it, that was the hardest task of the whole week <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span><br>
I'll do my best to keep it rolling and will be waiting and adjusting the code as the time goes.</p>
<p>Maybe next week I'm finally able to spend some time on the completion at last.</p>



<a name="226397580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226397580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226397580">(Feb 15 2021 at 15:33)</a>:</h4>
<p>iirc, that was the case with our orignal impl of highlightingz</p>



<a name="226397592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226397592" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226397592">(Feb 15 2021 at 15:33)</a>:</h4>
<p>it flickered badly</p>



<a name="226397669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226397669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226397669">(Feb 15 2021 at 15:34)</a>:</h4>
<p>So, I wouldn't worry too much about "point in time" quality</p>



<a name="226398108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226398108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226398108">(Feb 15 2021 at 15:37)</a>:</h4>
<p>That diff looks great, though</p>



<a name="226398413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226398413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226398413">(Feb 15 2021 at 15:40)</a>:</h4>
<p>Well this time Code just updates the hints after ~500ms no matter what I try, so no flickering for me <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> <br>
Hopefully that's me not knowing how to code in TS rather than some inner issue.</p>
<p>Anyway, at the current state, only completions to the left are displayed, so all our <code>: Type</code> completions are messed up, also, due to some issues with vscode-preview (maybe?) I'm unable to apply our syntax highlighting stub (had to comment it out) and the build does not work well with the <code>-next</code> lsp version too that was added recently.<br>
All that combined hints that I'll most probably skip a few weeks before announcing any further progress here.</p>



<a name="226400481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226400481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226400481">(Feb 15 2021 at 15:58)</a>:</h4>
<p>Oh I THINK the semantic highlight workaround can either be removed now or... really really soon. I think I saw that implemented somewhere</p>



<a name="226400712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226400712" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226400712">(Feb 15 2021 at 16:00)</a>:</h4>
<p>I think this covers it: <a href="https://github.com/microsoft/vscode-languageserver-node/commit/dae62de921d25964e8732411ca09e532dde992f5">https://github.com/microsoft/vscode-languageserver-node/commit/dae62de921d25964e8732411ca09e532dde992f5</a> and we're now on that client version.</p>



<a name="226401933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226401933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226401933">(Feb 15 2021 at 16:05)</a>:</h4>
<p>I'll verify before removing the workaround...</p>



<a name="226792665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226792665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226792665">(Feb 18 2021 at 10:45)</a>:</h4>
<p>Slightly improved metrics dashboard is up: <a href="https://rust-analyzer.github.io/metrics/">https://rust-analyzer.github.io/metrics/</a></p>



<a name="226797268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226797268" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226797268">(Feb 18 2021 at 11:33)</a>:</h4>
<p>oh this is nice!</p>



<a name="226797288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226797288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226797288">(Feb 18 2021 at 11:34)</a>:</h4>
<p>Next useful thing would be to synchronize the zoom level</p>



<a name="226978465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226978465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226978465">(Feb 19 2021 at 15:26)</a>:</h4>
<p>It would be neat to see commit details beyond the sha</p>



<a name="226980848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226980848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226980848">(Feb 19 2021 at 15:40)</a>:</h4>
<p>You mean like a PR#?</p>



<a name="226992217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/226992217" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#226992217">(Feb 19 2021 at 16:48)</a>:</h4>
<p>I was thinking either the commit message on hover or a clickable link to the commit in github?</p>



<a name="227230572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/227230572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#227230572">(Feb 22 2021 at 08:00)</a>:</h4>
<p>Release is out, changelog PR is up</p>



<a name="227233231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/227233231" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#227233231">(Feb 22 2021 at 08:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203366">Jeremy Kolb</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/226992217">said</a>:</p>
<blockquote>
<p>I was thinking either the commit message on hover or a clickable link to the commit in github?</p>
</blockquote>
<p>Clicking on a graph now copies the commit URL to clipboard</p>



<a name="227278851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/227278851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#227278851">(Feb 22 2021 at 15:00)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, this week's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/02/22/changelog-65.html">https://rust-analyzer.github.io/thisweek/2021/02/22/changelog-65.html</a></p>



<a name="227279382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/227279382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#227279382">(Feb 22 2021 at 15:03)</a>:</h4>
<p>This was a smaller release; the biggest changes are an improved "extract function" assist, an UTF-8 offsets protocol extension (not available yet in Code) and automatic server downloads when doing remote development on Alpine. There was also a nice <code>chalk</code> upgrade and better support for completion with <code>dyn Trait</code></p>



<a name="227279668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/227279668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#227279668">(Feb 22 2021 at 15:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu Nicola</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/227233231">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="203366">Jeremy Kolb</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/226992217">said</a>:</p>
<blockquote>
<p>I was thinking either the commit message on hover or a clickable link to the commit in github?</p>
</blockquote>
<p>Clicking on a graph now copies the commit URL to clipboard</p>
</blockquote>
<p>ooh this is perfect, thanks for working on this!</p>



<a name="227279909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/227279909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#227279909">(Feb 22 2021 at 15:06)</a>:</h4>
<p>Actually, I asked for help on that one (thought it turns out that using <code>position: fixed</code> isn't rocket science)</p>



<a name="228244739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/228244739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#228244739">(Mar 01 2021 at 15:01)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>! This week's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/03/01/changelog-66.html">https://rust-analyzer.github.io/thisweek/2021/03/01/changelog-66.html</a>. We have a couple of nice assists, some local item fixes and <code>vec!</code> is finally inferred again.</p>



<a name="228245119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/228245119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#228245119">(Mar 01 2021 at 15:03)</a>:</h4>
<p>(and we have a steering mtng in the neighbouring channel<br>
)</p>



<a name="229312285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/229312285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#229312285">(Mar 08 2021 at 15:02)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>! This week we've got some assist changes, a new MBE matcher and other fixes, and work towards using the <code>chalk</code> types in RA. Full changelog at <a href="https://rust-analyzer.github.io/thisweek/2021/03/08/changelog-67.html">https://rust-analyzer.github.io/thisweek/2021/03/08/changelog-67.html</a>.</p>



<a name="230359279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230359279" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230359279">(Mar 15 2021 at 15:02)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>! This week's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/03/15/changelog-68.html">https://rust-analyzer.github.io/thisweek/2021/03/15/changelog-68.html</a>. We have some very nice assists, MBE optimizations and fixes and some <code>chalk</code> work, but please skim the full changelog for everything.</p>



<a name="230359431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230359431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230359431">(Mar 15 2021 at 15:03)</a>:</h4>
<p>our changelogs have grown really large, seems like we're landing a lot of stuff</p>



<a name="230359620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230359620" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230359620">(Mar 15 2021 at 15:04)</a>:</h4>
<p>good problem to have</p>



<a name="230359739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230359739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230359739">(Mar 15 2021 at 15:05)</a>:</h4>
<p>I guess I'm also trimming fewer PRs than matklad.</p>



<a name="230359836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230359836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230359836">(Mar 15 2021 at 15:05)</a>:</h4>
<p>yeah, and stuff like the chalk PRs could probably be summed up with one line ("further Chalk integration")</p>



<a name="230359855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230359855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230359855">(Mar 15 2021 at 15:06)</a>:</h4>
<p>no, we legitimately increased the pace of development</p>



<a name="230359947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230359947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230359947">(Mar 15 2021 at 15:06)</a>:</h4>
<p>i've been trying to catch up with my inbox since morning, and I am not succeeding :)</p>



<a name="230360136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230360136" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230360136">(Mar 15 2021 at 15:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/weekly.20sync-up/near/230359836">said</a>:</p>
<blockquote>
<p>yeah, and stuff like the chalk PRs could probably be summed up with one line ("further Chalk integration")</p>
</blockquote>
<p>I do that sometimes.</p>



<a name="230360137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230360137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230360137">(Mar 15 2021 at 15:07)</a>:</h4>
<p>but yeah, it'd be good to find less labor-intensive soulution for changelog trimming and compression. It's valuable for the users to keep the logs short</p>



<a name="230360321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230360321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230360321">(Mar 15 2021 at 15:08)</a>:</h4>
<p>I've started adding some marker comments to the PRs so we can classify them automatically</p>



<a name="230360335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230360335" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230360335">(Mar 15 2021 at 15:08)</a>:</h4>
<p>Do we want to enable proc macros by default? We now have version check merged, so that should work nicely?</p>



<a name="230360444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230360444" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230360444">(Mar 15 2021 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="203546">@Laurențiu Nicola</span> saw that! Could you document them in the docs? I think, ideally, the author of PR should leave a chanegelog  note.</p>



<a name="230360727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230360727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230360727">(Mar 15 2021 at 15:10)</a>:</h4>
<p>Sure, but maybe after actually implementing that? Just in case we need to change the format. OTOH, it's not like we care too much about backwards compatibility on those.</p>



<a name="230366539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/230366539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#230366539">(Mar 15 2021 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span>  <a href="https://github.com/rust-lang/rust/issues/8033">#8033</a> would be make sure the version check (it is a warning actually) will actually work in all platform.</p>



<a name="231369936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/231369936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#231369936">(Mar 22 2021 at 19:25)</a>:</h4>
<p>I forgot about this, but I guess y'all know it by know. Today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/03/22/changelog-69.html">https://rust-analyzer.github.io/thisweek/2021/03/22/changelog-69.html</a>.</p>



<a name="232263542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232263542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232263542">(Mar 29 2021 at 13:00)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/03/29/changelog-70.html">https://rust-analyzer.github.io/thisweek/2021/03/29/changelog-70.html</a>. The big items are initial Macros 2.0 support and the fix for a recently-introduced memory leak.</p>



<a name="232263823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232263823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232263823">(Mar 29 2021 at 13:02)</a>:</h4>
<p>I'll tweet</p>



<a name="232263949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232263949" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232263949">(Mar 29 2021 at 13:03)</a>:</h4>
<p><a href="https://twitter.com/rust_analyzer/status/1376520337551204357">https://twitter.com/rust_analyzer/status/1376520337551204357</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/rust_analyzer/status/1376520337551204357"><img class="twitter-avatar" src="https://pbs.twimg.com/profile_images/1217461647377420289/HXHa6hZU_normal.jpg"></a><p>Changelog #70 is out!

This release features initial Macros 2.0 support, a fix for a recently introduced memory leak, as well as a new "move item" command.

<a href="https://t.co/WhFL0M2v55">https://rust-analyzer.github.io/thisweek/2021/03/29/changelog-70.html</a> <a href="https://t.co/YuBGBXMcd6">https://twitter.com/rust_analyzer/status/1376520337551204357/photo/1</a></p><span>- rust-analyzer (@rust_analyzer)</span></div></div>



<a name="232264400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232264400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232264400">(Mar 29 2021 at 13:06)</a>:</h4>
<p>Random policy question: When are we dropping the "experimental" in the description of r-a? I feel like we've moved past that stage already :)</p>



<a name="232264623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232264623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232264623">(Mar 29 2021 at 13:08)</a>:</h4>
<p>Sounds good to me</p>



<a name="232266576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232266576" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232266576">(Mar 29 2021 at 13:22)</a>:</h4>
<p>Yeah, let's drop experimental! That's <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> but also <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> Ideally, we should've switched from experimental straight to <code>rustc --lsp</code></p>



<a name="232267301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232267301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232267301">(Mar 29 2021 at 13:27)</a>:</h4>
<p>Seems like I can't edit the twitter profile</p>



<a name="232268735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232268735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232268735">(Mar 29 2021 at 13:37)</a>:</h4>
<p>Edited the description</p>



<a name="232279653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232279653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232279653">(Mar 29 2021 at 14:44)</a>:</h4>
<p>people have already noticed <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span>  <a href="https://www.reddit.com/r/rust/comments/mfptzg/rustanalyzer_drop_experimental/">https://www.reddit.com/r/rust/comments/mfptzg/rustanalyzer_drop_experimental/</a></p>



<a name="232279863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/232279863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#232279863">(Mar 29 2021 at 14:46)</a>:</h4>
<p>That's me :)</p>



<a name="233175045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233175045" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233175045">(Apr 05 2021 at 14:00)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>. The latest changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/04/05/changelog-71.html">https://rust-analyzer.github.io/thisweek/2021/04/05/changelog-71.html</a>. We have a couple of new assists, some nice quality-of-life improvements and Jonas did a lot of work on interning stuff to reduce the memory usage.</p>



<a name="233175967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233175967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233175967">(Apr 05 2021 at 14:07)</a>:</h4>
<p>We also have a steering meeting next week, so it's a good place to look back, and look forward, and have some thoughts before the next Monday!</p>



<a name="233176048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233176048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chetan Khilosiya <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233176048">(Apr 05 2021 at 14:08)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span>🏻</p>



<a name="233176050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233176050" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233176050">(Apr 05 2021 at 14:08)</a>:</h4>
<p>By the looks of it, we actually did everything we wanted to in this sprint?</p>



<a name="233176937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233176937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233176937">(Apr 05 2021 at 14:15)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/8313">#8313</a> is still in progres , right ?</p>



<a name="233177087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233177087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233177087">(Apr 05 2021 at 14:16)</a>:</h4>
<p>Ah, right, but we are making great progress on that one!</p>



<a name="233177202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233177202" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233177202">(Apr 05 2021 at 14:17)</a>:</h4>
<p>And "Fix major bugs in local items resolution" is done by Jonas too</p>



<a name="233179992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233179992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233179992">(Apr 05 2021 at 14:39)</a>:</h4>
<p>Tweeted the release <a href="https://twitter.com/rust_analyzer/status/1379081098219683846">https://twitter.com/rust_analyzer/status/1379081098219683846</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/rust_analyzer/status/1379081098219683846"><img class="twitter-avatar" src="https://pbs.twimg.com/profile_images/1217461647377420289/HXHa6hZU_normal.jpg"></a><p>Changelog #71 is out!

This release features 2 new assists, many bug fixes, and improvements to memory usage.

<a href="https://t.co/Q4x7z2gNE5">https://rust-analyzer.github.io/thisweek/2021/04/05/changelog-71.html</a> <a href="https://t.co/qRDRrtLHBj">https://twitter.com/rust_analyzer/status/1379081098219683846/photo/1</a></p><span>- rust-analyzer (@rust_analyzer)</span></div></div>



<a name="233180920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/233180920" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#233180920">(Apr 05 2021 at 14:46)</a>:</h4>
<p>congrats all on another release, moving the RLS world forward one week at a time</p>



<a name="234142156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234142156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234142156">(Apr 12 2021 at 11:32)</a>:</h4>
<p>there's a steering meeting today, right?</p>



<a name="234142460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234142460" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234142460">(Apr 12 2021 at 11:35)</a>:</h4>
<p>Yep</p>



<a name="234163402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234163402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234163402">(Apr 12 2021 at 14:01)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> (can we rename this?), today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/04/12/changelog-72.html">https://rust-analyzer.github.io/thisweek/2021/04/12/changelog-72.html</a>. In short, it's just awesome.</p>



<a name="234163477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234163477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234163477">(Apr 12 2021 at 14:01)</a>:</h4>
<p>and small!</p>



<a name="234163728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234163728" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234163728">(Apr 12 2021 at 14:03)</a>:</h4>
<p>though, we are having weekly/steering meeting in an hour, not right now.</p>



<a name="234163856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234163856" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234163856">(Apr 12 2021 at 14:03)</a>:</h4>
<p>Oops, must be a timezone/DST thing</p>



<a name="234164130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164130">(Apr 12 2021 at 14:05)</a>:</h4>
<p>is the meeting time written down anywhere?</p>



<a name="234164168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164168">(Apr 12 2021 at 14:05)</a>:</h4>
<p>No, AFAIK</p>



<a name="234164239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164239" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164239">(Apr 12 2021 at 14:05)</a>:</h4>
<p>hm</p>



<a name="234164260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164260" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164260">(Apr 12 2021 at 14:05)</a>:</h4>
<p>I am just a slave to the calendar: </p>
<p><a href="/user_uploads/4715/AYVdVE153NwsNQlkBb-ixo3G/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/AYVdVE153NwsNQlkBb-ixo3G/image.png" title="image.png"><img src="/user_uploads/4715/AYVdVE153NwsNQlkBb-ixo3G/image.png"></a></div>



<a name="234164292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164292" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164292">(Apr 12 2021 at 14:06)</a>:</h4>
<p>It's in the Rust calendar at least</p>



<a name="234164400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164400">(Apr 12 2021 at 14:06)</a>:</h4>
<p><a href="https://calendar.google.com/calendar?cid=NnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ">https://calendar.google.com/calendar?cid=NnU1cnJ0Y2U2bHJ0djA3cGZpM2RhbWdqdXNAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ</a></p>



<a name="234164421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164421" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164421">(Apr 12 2021 at 14:06)</a>:</h4>
<p>I think that's the magic link</p>



<a name="234164518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164518">(Apr 12 2021 at 14:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/234164260">said</a>:</p>
<blockquote>
<p>I am just a slave to the calendar: </p>
<p><a href="/user_uploads/4715/AYVdVE153NwsNQlkBb-ixo3G/image.png">image.png</a></p>
</blockquote>
<p>Wow, how did you make it show in <strong>my</strong> timezone?</p>



<a name="234164521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164521">(Apr 12 2021 at 14:07)</a>:</h4>
<p>ah, it is</p>



<a name="234164794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164794">(Apr 12 2021 at 14:08)</a>:</h4>
<p>it was definitely an hour earlier last few times (for Europe at least)</p>



<a name="234164912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164912">(Apr 12 2021 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="203546">@Laurențiu</span> I'm behind your back!</p>



<a name="234164913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164913" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164913">(Apr 12 2021 at 14:09)</a>:</h4>
<p>My fault only :-)</p>



<a name="234164932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164932">(Apr 12 2021 at 14:09)</a>:</h4>
<p>(not really, but close enough to be in the same TZ)</p>



<a name="234164959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234164959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234164959">(Apr 12 2021 at 14:09)</a>:</h4>
<p>but the calendar doesn't say what time zone the event is locked to</p>



<a name="234165000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165000">(Apr 12 2021 at 14:09)</a>:</h4>
<p>I think it just shows in your local timezone</p>



<a name="234165103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165103" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165103">(Apr 12 2021 at 14:10)</a>:</h4>
<p>yeah</p>



<a name="234165173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165173">(Apr 12 2021 at 14:10)</a>:</h4>
<p>but there has to be some time zone the meeting itself moves along with</p>



<a name="234165219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165219" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165219">(Apr 12 2021 at 14:11)</a>:</h4>
<p>or some sort of time spec like "UTC"</p>



<a name="234165308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165308" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165308">(Apr 12 2021 at 14:11)</a>:</h4>
<p>ah, moscow standard time</p>



<a name="234165323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165323" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165323">(Apr 12 2021 at 14:11)</a>:</h4>
<p>/me imagines an alternative timeline, where there's only a single timezone, but everyone is using tabs with custom width</p>



<a name="234165339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165339" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165339">(Apr 12 2021 at 14:11)</a>:</h4>
<p>it only says when printing the event :/</p>



<a name="234165426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165426">(Apr 12 2021 at 14:12)</a>:</h4>
<p>daylight saving indentation</p>



<a name="234165620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/234165620" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#234165620">(Apr 12 2021 at 14:13)</a>:</h4>
<p>TIL I'm on the same TZ as Moscow, at least sometimes</p>



<a name="235200046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235200046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235200046">(Apr 19 2021 at 15:25)</a>:</h4>
<p>Hi <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, latest changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/04/19/changelog-73.html">https://rust-analyzer.github.io/thisweek/2021/04/19/changelog-73.html</a>, we've got a new assist, a <code>cargo check</code> hack that broke Windows project loading, and lazier diagnostics</p>



<a name="235204212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235204212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235204212">(Apr 19 2021 at 15:52)</a>:</h4>
<p>I guess <code>cargo check</code> hack that broke windows would be a good test for our (yet to be written) point release infra...</p>



<a name="235204746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235204746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235204746">(Apr 19 2021 at 15:56)</a>:</h4>
<p>Another update is that I've emailed core team about moving rust-analyzer to the rust-lang org, waiting for the reply now</p>



<a name="235208866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235208866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235208866">(Apr 19 2021 at 16:22)</a>:</h4>
<p>What's the process for joining the <code>rust-lang</code> org?</p>



<a name="235208984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235208984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235208984">(Apr 19 2021 at 16:22)</a>:</h4>
<p>normally you join a team or working group</p>



<a name="235209069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235209069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235209069">(Apr 19 2021 at 16:23)</a>:</h4>
<p>I guess I'll find out when we get there</p>



<a name="235209074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235209074" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235209074">(Apr 19 2021 at 16:23)</a>:</h4>
<p>I think this might even be automated? So we'd sync team memberships in rust-lang/teams and it should work</p>



<a name="235209080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/235209080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#235209080">(Apr 19 2021 at 16:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211727">Jonas Schievink  [he/him]</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/235208984">said</a>:</p>
<blockquote>
<p>normally you join a team or working group</p>
</blockquote>
<p>And then open a PR to <a href="https://github.com/rust-lang/team/">https://github.com/rust-lang/team/</a> to add yourself. Once it is merged by a member of the core team, you will automatically be invited by <code>@rust-lang-owner</code>.</p>



<a name="236164777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236164777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236164777">(Apr 26 2021 at 12:32)</a>:</h4>
<p>it looks like, with const generics getting used more heavily in the ecosystem, we might want to prioritize supporting them</p>



<a name="236164912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236164912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236164912">(Apr 26 2021 at 12:33)</a>:</h4>
<p>specifically we have to come up with a good approach for <a href="https://github.com/rust-analyzer/rust-analyzer/issues/7434">https://github.com/rust-analyzer/rust-analyzer/issues/7434</a></p>



<a name="236166404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236166404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236166404">(Apr 26 2021 at 12:43)</a>:</h4>
<p>so... I think the general approach would be to come up with some kind of ID that can address all of these consts, right? and then make queries like <code>body</code> and <code>infer</code> take those IDs</p>



<a name="236166503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236166503" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236166503">(Apr 26 2021 at 12:44)</a>:</h4>
<p>I'm thinking more and more we need some kind of general "Node ID" like rustc has</p>



<a name="236168173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236168173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236168173">(Apr 26 2021 at 12:56)</a>:</h4>
<p>there are some plans to move rustc towards hierarchical-ish node IDs for better incrementality, that seems like something we might want to have too</p>



<a name="236168333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236168333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236168333">(Apr 26 2021 at 12:57)</a>:</h4>
<p>we currently have the "bdfs" logic that makes AstIds more robust, something like that could work here too</p>



<a name="236170197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236170197" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236170197">(Apr 26 2021 at 13:09)</a>:</h4>
<p>Hm, aren't we alerady using  general ids to identify bodies?</p>



<a name="236170223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236170223" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236170223">(Apr 26 2021 at 13:09)</a>:</h4>
<p><a href="/user_uploads/4715/-tLherpR-euT5VOedN3er2WL/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/-tLherpR-euT5VOedN3er2WL/image.png" title="image.png"><img src="/user_uploads/4715/-tLherpR-euT5VOedN3er2WL/image.png"></a></div>



<a name="236170332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236170332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236170332">(Apr 26 2021 at 13:10)</a>:</h4>
<p>We have id's for const bodies and for function bodies, extending that shouldn't be too hard?</p>



<a name="236171668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236171668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236171668">(Apr 26 2021 at 13:18)</a>:</h4>
<p>yup that should work</p>



<a name="236171730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236171730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236171730">(Apr 26 2021 at 13:18)</a>:</h4>
<p>I'm just wondering what the best way to obtain those IDs is</p>



<a name="236171882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236171882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236171882">(Apr 26 2021 at 13:19)</a>:</h4>
<p>like, we could just use AstIds like I did for blocks, but that kind of uses them for even more stuff they're not really supposed to be used for, right?</p>



<a name="236172020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236172020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236172020">(Apr 26 2021 at 13:20)</a>:</h4>
<p>and also might be problematic if you have <code>Thing&lt;T&gt;</code> where <code>T</code> is actually a <code>const T: usize</code> from the parent</p>



<a name="236172060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236172060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236172060">(Apr 26 2021 at 13:20)</a>:</h4>
<p>so every type parameter <em>might</em> be a const parameter and thus needs an ID</p>



<a name="236176628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236176628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236176628">(Apr 26 2021 at 13:47)</a>:</h4>
<p>I think the "extending IDs to all consts" part is the hardest part of this, yes</p>



<a name="236176684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236176684" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236176684">(Apr 26 2021 at 13:48)</a>:</h4>
<p>because we can have const bodies nested deep in types</p>



<a name="236176838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236176838" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236176838">(Apr 26 2021 at 13:49)</a>:</h4>
<p>OTOH if we collect them out-of-band while constructing <code>TypeRef</code>s maybe it's not that hard</p>



<a name="236177161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236177161" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236177161">(Apr 26 2021 at 13:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211727">Jonas Schievink  [he/him]</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/236172060">said</a>:</p>
<blockquote>
<p>so every type parameter <em>might</em> be a const parameter and thus needs an ID</p>
</blockquote>
<p>not completely necessarily... <code>T</code> should not be lowered to a Chalk <code>ConcreteConst</code> anyway</p>



<a name="236179178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236179178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236179178">(Apr 26 2021 at 14:04)</a>:</h4>
<p>I think that actually works out. const args can only be a const parameter, a literal, or <code>{ something }</code>. Only a const parameter can be confused with a type, but that will be lowered to <code>ConstValue::Placeholder</code> and doesn't need a body</p>



<a name="236179258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236179258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236179258">(Apr 26 2021 at 14:04)</a>:</h4>
<p>or, wait, can it be a const</p>



<a name="236179338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236179338" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236179338">(Apr 26 2021 at 14:05)</a>:</h4>
<p>yes <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span> so that makes it more complicated</p>



<a name="236180529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236180529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236180529">(Apr 26 2021 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="129457">Florian Diebold</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/236176838">said</a>:</p>
<blockquote>
<p>OTOH if we collect them out-of-band while constructing <code>TypeRef</code>s maybe it's not that hard</p>
</blockquote>
<p>We do want to collect them as bodies so that IDE stuff works, right?</p>



<a name="236181603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236181603" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236181603">(Apr 26 2021 at 14:19)</a>:</h4>
<p>yeah, I mean something like while lowering AST to <code>TypeRef</code>s, keep an <code>Arena&lt;Expr&gt;</code> where we collect those bodies for all types in the def and use the IDs from that</p>



<a name="236185710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236185710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236185710">(Apr 26 2021 at 14:43)</a>:</h4>
<p>Hm, that's really annoying... </p>
<p>If I were running a non-incremental compiler, I'd just have a global <code>bodies: Vec&lt;Body&gt;</code> and I'd push a body onto this list every time I needed to lower something. So the type refs would contain <code>BodyId</code>s, and that would be enough to globally identify a thing. </p>
<p>In salsa, that's not really possible...</p>



<a name="236186470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236186470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236186470">(Apr 26 2021 at 14:47)</a>:</h4>
<p>yeah, but we can do it per-def</p>



<a name="236188804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/236188804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#236188804">(Apr 26 2021 at 15:00)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, this is the usual Monday ping. Today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/04/26/changelog-74.html">https://rust-analyzer.github.io/thisweek/2021/04/26/changelog-74.html</a>. We have (hopefully) two new assists, support for macros in type positions, and a lot of fixes including one for hangs on project loading.</p>



<a name="237174303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237174303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237174303">(May 03 2021 at 15:01)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/05/03/changelog-75.html">https://rust-analyzer.github.io/thisweek/2021/05/03/changelog-75.html</a>. It's been a quiet week, but we  have some nice first contributions and a couple of fixes.</p>



<a name="237174542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237174542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237174542">(May 03 2021 at 15:02)</a>:</h4>
<p>Also we (hopefully) fixed the annoying token already registered issue!</p>



<a name="237175433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237175433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237175433">(May 03 2021 at 15:04)</a>:</h4>
<p><span class="user-mention" data-user-id="211727">@Jonas Schievink  [he/him]</span> we have "attribute proc macros" in the steering issue, is it correct that you are tacking that?</p>



<a name="237175541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237175541" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237175541">(May 03 2021 at 15:05)</a>:</h4>
<p>somewhat, I'm not actively working on it at the moment</p>



<a name="237175681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237175681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237175681">(May 03 2021 at 15:05)</a>:</h4>
<p>I think to make progress on that I need to figure out how to do attribute stripping correctly, I'll open another thread about that</p>



<a name="237177576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237177576" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237177576">(May 03 2021 at 15:13)</a>:</h4>
<p><span class="user-mention" data-user-id="211727">@Jonas Schievink  [he/him]</span> do u think it is related to <a href="https://github.com/rust-analyzer/rust-analyzer/issues/8092">https://github.com/rust-analyzer/rust-analyzer/issues/8092</a> ?</p>



<a name="237178571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237178571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237178571">(May 03 2021 at 15:17)</a>:</h4>
<p>not immediately, no</p>



<a name="237179281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237179281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edwin Cheng <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237179281">(May 03 2021 at 15:22)</a>:</h4>
<p>So is it orthogonal? I would like to make a pr to fix it… but I don’t know if whats the plan there.</p>



<a name="237179660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237179660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237179660">(May 03 2021 at 15:25)</a>:</h4>
<p>I think it's orthogonal yeah, feel free to work on it</p>



<a name="237179762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/237179762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#237179762">(May 03 2021 at 15:25)</a>:</h4>
<p>hmm, well, maybe with the proposal in <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Attribute.20stripping.20for.20proc.20macros/near/237179615">https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Attribute.20stripping.20for.20proc.20macros/near/237179615</a> it might be affected</p>



<a name="238156621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/238156621" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#238156621">(May 10 2021 at 15:00)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/05/10/changelog-76.html">https://rust-analyzer.github.io/thisweek/2021/05/10/changelog-76.html</a>. We now load <code>.cargo/config.toml</code>, auto-insert <code>}</code> in use trees, and got a couple of performance fixes.</p>



<a name="238156984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/238156984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#238156984">(May 10 2021 at 15:02)</a>:</h4>
<p>I'm still slowly working on replacing our unification code by Chalk's by the way, which also necessitates some changes to coercion and how we're handling obligations</p>



<a name="238157322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/238157322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#238157322">(May 10 2021 at 15:04)</a>:</h4>
<p>On my side, I am replacing SyntaxRewriter usages with mutable trees and wonder what should be the next big task for me</p>



<a name="238157370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/238157370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#238157370">(May 10 2021 at 15:04)</a>:</h4>
<p>Last week, we also eliminated almost all broken windows by the way!</p>



<a name="238157618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/238157618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#238157618">(May 10 2021 at 15:06)</a>:</h4>
<p>I'm looking into attribute macros yet again</p>



<a name="239104612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239104612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239104612">(May 17 2021 at 15:00)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, in today's <a href="https://rust-analyzer.github.io/thisweek/2021/05/17/changelog-77.html">release</a> we have array length inference support, auto-indent in use trees, and a nice assortment of fixes.</p>



<a name="239105652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239105652" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239105652">(May 17 2021 at 15:06)</a>:</h4>
<p>And we have a steering meeting next week!</p>



<a name="239105877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239105877" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239105877">(May 17 2021 at 15:07)</a>:</h4>
<p>So, it's time to start thinking "deeply" about the bigger picture!</p>
<p>I am personally torn between two epics: </p>
<ul>
<li>extracing rust-analyzer's parser as a stand-alone crate</li>
<li>prototyping the tree-based HIR</li>
</ul>



<a name="239106508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239106508" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239106508">(May 17 2021 at 15:11)</a>:</h4>
<p>This week we've also almost completely switched to mutable syntax trees.</p>



<a name="239108940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239108940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris B <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239108940">(May 17 2021 at 15:22)</a>:</h4>
<p>Are you no longer using <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/docs/dev/syntax.md">the rowan/red-green scheme</a> , or is it a modification of that?<br>
I know that doc is old, but what I read in master a few days ago seems to be along the same lines.</p>



<a name="239109223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239109223" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239109223">(May 17 2021 at 15:24)</a>:</h4>
<p>Re: Extraction of libraries, extracting the match-checking algorithm is something that could be relatively straightforward</p>



<a name="239112677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239112677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239112677">(May 17 2021 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="211727">@Jonas Schievink  [he/him]</span> that's an interesting thought -- do you mean from rustc?</p>



<a name="239112738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239112738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239112738">(May 17 2021 at 15:45)</a>:</h4>
<p>yeah, r-a's is not as advanced</p>



<a name="239117973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239117973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239117973">(May 17 2021 at 16:15)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/pull/8717#issuecomment-831865759">related discussion</a></p>



<a name="239118952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239118952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239118952">(May 17 2021 at 16:21)</a>:</h4>
<p><span class="user-mention" data-user-id="412662">@Chris B</span> it's a modification of that. The red layer is now mutable (via interior mutability). So you can do side-effectful things like <code>node.remove();</code> What happens internally is that a green tree gets respine, in functional style, and all live red node start pointing to the updated green nodesz</p>



<a name="239123623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239123623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239123623">(May 17 2021 at 16:52)</a>:</h4>
<p>What would be the big parts we'd have to address for the librarification of RA's parser?</p>



<a name="239124212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239124212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239124212">(May 17 2021 at 16:56)</a>:</h4>
<p>after <a href="https://github.com/rust-analyzer/rust-analyzer/issues/8856">rust-analyzer/rust-analyzer#8856</a>, I think the Chalk move is finally properly done, so I might be looking at introducing more type-based diagnostics afterwards (and fixing the remaining type mismatches (a big part of them comes from missing attribute macro support, though))</p>



<a name="239124307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239124307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239124307">(May 17 2021 at 16:56)</a>:</h4>
<p>or maybe <a href="https://github.com/rust-analyzer/rust-analyzer/issues/4558">rust-analyzer/rust-analyzer#4558</a>, or const generics <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="239124966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239124966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239124966">(May 17 2021 at 17:01)</a>:</h4>
<p>great work!</p>



<a name="239125055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239125055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239125055">(May 17 2021 at 17:02)</a>:</h4>
<p>We also need some reusable lint infra, so that we don't have to implement <code>#[allow]</code> directives etc. for every single lint</p>



<a name="239125496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239125496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239125496">(May 17 2021 at 17:04)</a>:</h4>
<p>yep</p>



<a name="239127994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239127994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Mcnab <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239127994">(May 17 2021 at 17:22)</a>:</h4>
<p>I would like to push for <a href="https://github.com/rust-analyzer/rust-analyzer/issues/4558">rust-analyzer/rust-analyzer#4558</a>. It could be quite a big project, depending on how that happens.</p>



<a name="239149705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239149705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239149705">(May 17 2021 at 19:54)</a>:</h4>
<p>Random question:  should we have random video meetings about rust-analyzer? Sort of office hours, just to talk about stuff?</p>



<a name="239152723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239152723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239152723">(May 17 2021 at 20:13)</a>:</h4>
<p>we could do that, would that be helpful?</p>



<a name="239162440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/239162440" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#239162440">(May 17 2021 at 21:21)</a>:</h4>
<p>maybe if the recording gets published it could help draw more people in</p>



<a name="240062720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240062720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240062720">(May 24 2021 at 15:00)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>. Today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/05/24/changelog-78.html">https://rust-analyzer.github.io/thisweek/2021/05/24/changelog-78.html</a>, with improved workspace symbol lookup, auto-detection of import styles, improved "generate getter" assist, and loads of internal changes. Also, there's a steering meeting today.</p>



<a name="240843317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240843317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240843317">(May 31 2021 at 15:00)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, this week's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/05/31/changelog-79.html">https://rust-analyzer.github.io/thisweek/2021/05/31/changelog-79.html</a>. We have some support for stand-alone files, "Go to implementations" for trait functions, cleaner completion lists, and a lot of other improvements.</p>



<a name="240843946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240843946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240843946">(May 31 2021 at 15:06)</a>:</h4>
<p>On my side, I started a bit with refactoring diagnostics. I want to finish this base refctor this week. Although there's a bunch of broken windows as well, which need looking into</p>



<a name="240844001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240844001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240844001">(May 31 2021 at 15:06)</a>:</h4>
<p>Does anyone want to pick items of <a href="https://github.com/rust-analyzer/rust-analyzer/labels/Broken%20Window">https://github.com/rust-analyzer/rust-analyzer/labels/Broken%20Window</a> ?</p>



<a name="240844187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240844187" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240844187">(May 31 2021 at 15:08)</a>:</h4>
<p>I can try looking into the quadratic issue</p>



<a name="240844720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240844720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240844720">(May 31 2021 at 15:13)</a>:</h4>
<p>I accidentally made attribute macros work, I wonder what the right way to roll them out is?</p>



<a name="240844747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240844747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240844747">(May 31 2021 at 15:13)</a>:</h4>
<p>Maybe we should gate them behind an extra setting for now?</p>



<a name="240846311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240846311" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240846311">(May 31 2021 at 15:29)</a>:</h4>
<p>I think that makes sense</p>



<a name="240846416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240846416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240846416">(May 31 2021 at 15:30)</a>:</h4>
<p>just keep them 'experimental' for a week or two to iron out bugs</p>



<a name="240846449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240846449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240846449">(May 31 2021 at 15:30)</a>:</h4>
<p>at least until we don't see any obvious ones ;)</p>



<a name="240847843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240847843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240847843">(May 31 2021 at 15:45)</a>:</h4>
<p>I suggest accidentally rolling them out on Sunday, so that there's no way back.</p>



<a name="240848028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240848028" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240848028">(May 31 2021 at 15:46)</a>:</h4>
<p>I suggest adding  top-level <code>experimental</code> config flag -- so that users have it enabled and get new stuff without case by case opt in.</p>



<a name="240862150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240862150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240862150">(May 31 2021 at 18:50)</a>:</h4>
<p>There is a bug in our latest release, detached Rust files opening is not working despite the changelist.</p>
<p>The fix is trivial: <a href="https://github.com/rust-analyzer/rust-analyzer/issues/9082">https://github.com/rust-analyzer/rust-analyzer/issues/9082</a> is it worth to make another release with it?</p>



<a name="240864623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240864623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240864623">(May 31 2021 at 19:25)</a>:</h4>
<p>Yeah, let's make a release</p>



<a name="240864719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240864719" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240864719">(May 31 2021 at 19:26)</a>:</h4>
<div class="codehilite"><pre><span></span><code>22:25:19|~/projects/rust-analyzer|master✓
λ git switch release
Branch &#39;release&#39; set up to track remote branch &#39;release&#39; from &#39;upstream&#39;.
Switched to a new branch &#39;release&#39;

22:25:26|~/projects/rust-analyzer|release✓
λ git status --short --branch
## release...upstream/release

22:25:27|~/projects/rust-analyzer|release✓
λ git pull --rebase
remote: Enumerating objects: 41, done.
remote: Counting objects: 100% (41/41), done.
remote: Compressing objects: 100% (19/19), done.
remote: Total 41 (delta 23), reused 35 (delta 21), pack-reused 0
Unpacking objects: 100% (41/41), 186.84 KiB | 1.05 MiB/s, done.
From github.com:rust-analyzer/rust-analyzer
 + 97e69e52d...8ea7f771a gh-pages   -&gt; upstream/gh-pages  (forced update)
   020610f45..42dfdb87c  master     -&gt; upstream/master
   4cb4b23dc..42dfdb87c  staging    -&gt; upstream/staging
Already up to date.

22:25:31|~/projects/rust-analyzer|release✓
λ git status --short --branch
## release...upstream/release

22:25:31|~/projects/rust-analyzer|release✓
λ git cherry-pick a127b10d0087c19c299ccfcb5b9f3af4615411f8
error: commit a127b10d0087c19c299ccfcb5b9f3af4615411f8 is a merge but no -m option was given.
fatal: cherry-pick failed

22:25:44|~/projects/rust-analyzer|release✓
λ git status --short --branch
## release...upstream/release

22:25:45|~/projects/rust-analyzer|release✓
λ git cherry-pick 60e7817
[release 28e32fe40] Fix opening single files
 Author: Kirill Bulatov &lt;mail4score@gmail.com&gt;
 Date: Mon May 31 21:37:08 2021 +0300
 1 file changed, 1 insertion(+), 1 deletion(-)

22:25:59|~/projects/rust-analyzer|release✓
λ git status --short --branch
## release...upstream/release [ahead 1]

22:26:00|~/projects/rust-analyzer|release✓
λ git status --short --branch
## release...upstream/release [ahead 1]

22:26:02|~/projects/rust-analyzer|release✓
λ git push
Enumerating objects: 11, done.
Counting objects: 100% (11/11), done.
Delta compression using up to 24 threads
Compressing objects: 100% (5/5), done.
Writing objects: 100% (6/6), 510 bytes | 510.00 KiB/s, done.
Total 6 (delta 4), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
To github.com:rust-analyzer/rust-analyzer.git
   f43839812..28e32fe40  release -&gt; release
</code></pre></div>



<a name="240867287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240867287" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240867287">(May 31 2021 at 20:06)</a>:</h4>
<p>I'll give <a href="https://code.visualstudio.com/api/working-with-extensions/testing-extension">https://code.visualstudio.com/api/working-with-extensions/testing-extension</a> a try as my next task then.<br>
(not sure how that's supposed to work without the binary though)</p>



<a name="240867516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240867516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240867516">(May 31 2021 at 20:09)</a>:</h4>
<p>Good question. I was thinking even that perhaps the time has come to move the code extension to another repo?</p>



<a name="240867582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/240867582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#240867582">(May 31 2021 at 20:10)</a>:</h4>
<p>That way, we can write horrible slow integration tests, without interfering with rust-analyzer's usual test suite.</p>



<a name="241789585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241789585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241789585">(Jun 07 2021 at 15:00)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> , this week's changelog is at <a href="https://rust-analyzer.github.io/thisweek/2021/06/07/changelog-80.html">https://rust-analyzer.github.io/thisweek/2021/06/07/changelog-80.html</a>. We have initial support for attribute proc macros, some support for the 2021 edition, some hover changes, and a lot of assist fixes. We also enabled proc macros in the CI metrics, so there's a nice drop there.</p>



<a name="241789755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241789755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241789755">(Jun 07 2021 at 15:01)</a>:</h4>
<p>Umm, this is a bit awkward. I post the changelog link to the other thread so Jonas or matklad can tweet it, so by the weekly meeting time pretty much everyone has already seen it :-).</p>



<a name="241791017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241791017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241791017">(Jun 07 2021 at 15:08)</a>:</h4>
<p>My update: still ill, but better. PSA: even if you and your SO are both total recluses and basically never leave the house, do get a covid shot anyways :)</p>



<a name="241791370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241791370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241791370">(Jun 07 2021 at 15:10)</a>:</h4>
<p>I've been restructuring <code>CompletionContext</code> a bit more(most of which I did the week prior to last though), it doesn't have a ton of different fields anymore now.</p>



<a name="241793132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241793132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241793132">(Jun 07 2021 at 15:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/241791017">said</a>:</p>
<blockquote>
<p>My update: still ill, but better. PSA: even if you and your SO are both total recluses and basically never leave the house, do get a covid shot anyways :)</p>
</blockquote>
<p>And <strong>do</strong> get a Covid shot even if you were sick. Not everyone gets long-lasting immunity from it.</p>



<a name="241804314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241804314" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241804314">(Jun 07 2021 at 16:36)</a>:</h4>
<p>Glad to hear that you're doing better. Nothing from me... I'm busy with work and non-rust things</p>



<a name="241813798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241813798" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241813798">(Jun 07 2021 at 17:44)</a>:</h4>
<p>I have apparently made attribute macros even redder than before<br>
<a href="/user_uploads/4715/9MBcKOPlOWsJNls_MLhQLvTE/screenshot-2021-06-07-194413.png">screenshot-2021-06-07-194413.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/9MBcKOPlOWsJNls_MLhQLvTE/screenshot-2021-06-07-194413.png" title="screenshot-2021-06-07-194413.png"><img src="/user_uploads/4715/9MBcKOPlOWsJNls_MLhQLvTE/screenshot-2021-06-07-194413.png"></a></div>



<a name="241813839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/241813839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#241813839">(Jun 07 2021 at 17:45)</a>:</h4>
<p>I didn't even know a keyword could be an <code>unresolvedReference</code>??</p>



<a name="242610352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242610352" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242610352">(Jun 14 2021 at 15:01)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's changelog is up at  <a href="https://rust-analyzer.github.io/thisweek/2021/06/14/changelog-81.html">https://rust-analyzer.github.io/thisweek/2021/06/14/changelog-81.html</a>. We have a big diagnostics refactoring, better completions and "Go to definition" and more attribute proc macro fixes.</p>



<a name="242610567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242610567" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242610567">(Jun 14 2021 at 15:02)</a>:</h4>
<p>Ominously, just as Niko is removing GC support from salsa, I've noticed a couple of fresh complaints about memory usage :D</p>



<a name="242611325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242611325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242611325">(Jun 14 2021 at 15:06)</a>:</h4>
<p>Just tried clearing the memory twice, it says 107 mb remaining (I don't recall what that is), but the process itself is at 921 MB RSS.</p>



<a name="242612272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242612272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242612272">(Jun 14 2021 at 15:12)</a>:</h4>
<p>That may be fragmented memory causing the memory allocator to be unable to return contiguous chunks of memory &gt;= 1 page to the OS.</p>



<a name="242612735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242612735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242612735">(Jun 14 2021 at 15:15)</a>:</h4>
<p>Is there a good way to measure fragmentation? I've heard a lot of horror stories about it, and I think, given our allocation habits, we should be hitting the worst possible case here.</p>



<a name="242612804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242612804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242612804">(Jun 14 2021 at 15:16)</a>:</h4>
<p>That sounds likely -- "Server status" also shows 107 MB, so maybe that's what the allocator says we're using.</p>



<a name="242616016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242616016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242616016">(Jun 14 2021 at 15:36)</a>:</h4>
<p>It's not great by any means, but if we can tweak the allocator to always use mmap, we can run a workload and compare its memory usage profile (peak or sampled) with that of the unmodified version. The difference should be caused by external fragmentation.</p>



<a name="242618315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242618315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242618315">(Jun 14 2021 at 15:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/242612735">said</a>:</p>
<blockquote>
<p>Is there a good way to measure fragmentation? I've heard a lot of horror stories about it, and I think, given our allocation habits, we should be hitting the worst possible case here.</p>
</blockquote>
<p>From <a href="https://www.joyfulbikeshedding.com/blog/2019-03-14-what-causes-ruby-memory-bloat.html">https://www.joyfulbikeshedding.com/blog/2019-03-14-what-causes-ruby-memory-bloat.html</a>: <a href="https://github.com/FooBarWidget/heap_dumper_visualizer">https://github.com/FooBarWidget/heap_dumper_visualizer</a></p>



<a name="242649178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242649178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242649178">(Jun 14 2021 at 19:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/242616016">said</a>:</p>
<blockquote>
<p>It's not great by any means, but if we can tweak the allocator to always use mmap, we can run a workload and compare its memory usage profile (peak or sampled) with that of the unmodified version. The difference should be caused by external fragmentation.</p>
</blockquote>
<p>Never mind, that makes no sense.</p>



<a name="242693830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/242693830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#242693830">(Jun 15 2021 at 06:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/242618315">said</a>:</p>
<blockquote>
<p>From <a href="https://www.joyfulbikeshedding.com/blog/2019-03-14-what-causes-ruby-memory-bloat.html">https://www.joyfulbikeshedding.com/blog/2019-03-14-what-causes-ruby-memory-bloat.html</a>: <a href="https://github.com/FooBarWidget/heap_dumper_visualizer">https://github.com/FooBarWidget/heap_dumper_visualizer</a></p>
</blockquote>
<p><code>malloc_trim</code> does sound interesting, I guess we could also call it when clearing the memory.</p>



<a name="243395392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243395392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243395392">(Jun 21 2021 at 15:01)</a>:</h4>
<p>hey <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, it's time for another weekly sync up!</p>



<a name="243395451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243395451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243395451">(Jun 21 2021 at 15:01)</a>:</h4>
<p>Looking at the changelog for the past week reveals an interesting pattern: <a href="https://rust-analyzer.github.io/thisweek/2021/06/21/changelog-82.html">https://rust-analyzer.github.io/thisweek/2021/06/21/changelog-82.html</a></p>



<a name="243395630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243395630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243395630">(Jun 21 2021 at 15:02)</a>:</h4>
<p>We were refactoring a lot of tests! I think this is really cool -- it really means that we focus on long-term things, rather on "getting things done right now"!</p>



<a name="243395661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243395661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243395661">(Jun 21 2021 at 15:02)</a>:</h4>
<p>We also have better tests, which is a nice side benefit <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span> !</p>



<a name="243396065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243396065" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243396065">(Jun 21 2021 at 15:04)</a>:</h4>
<p>On my side, I've also came back to thinking about managing concurrency in rust-analyzer, and came up with this: </p>
<p><a href="https://github.com/matklad/devils/blob/63eb7e4a60b3b5c777340a0429ab64be12290188/src/lib.rs#L1-L137">https://github.com/matklad/devils/blob/63eb7e4a60b3b5c777340a0429ab64be12290188/src/lib.rs#L1-L137</a></p>



<a name="243396196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243396196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243396196">(Jun 21 2021 at 15:05)</a>:</h4>
<p>I am not sure if this library will graduate from <span class="user-mention" data-user-id="133169">@matklad</span> 's fooling with structured concurrency to actually being part of rust-analyzer, but this dosen't seem completely unreasonable to me at this point</p>



<a name="243396236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243396236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243396236">(Jun 21 2021 at 15:05)</a>:</h4>
<p>oh, very cool, will take a look later</p>



<a name="243396437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243396437" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243396437">(Jun 21 2021 at 15:07)</a>:</h4>
<p>I guess, that's it on my side. Anyone has anything fun to report?</p>



<a name="243396595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243396595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243396595">(Jun 21 2021 at 15:08)</a>:</h4>
<p>didn't get to work much on r-a last week, but now I'm fooling around with on-type formatting again</p>



<a name="243396692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243396692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243396692">(Jun 21 2021 at 15:08)</a>:</h4>
<p>Nothing from me.</p>



<a name="243397553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243397553" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243397553">(Jun 21 2021 at 15:14)</a>:</h4>
<p>Refactored a bunch of tests, thats about it for me</p>



<a name="243397581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243397581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243397581">(Jun 21 2021 at 15:14)</a>:</h4>
<p>Also I made no new progress on the quadratic highlighting issue unfortunately</p>



<a name="243397630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243397630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243397630">(Jun 21 2021 at 15:15)</a>:</h4>
<p>Right, I wanted to say that I'll take over that!</p>



<a name="243398365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243398365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirill Bulatov <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243398365">(Jun 21 2021 at 15:20)</a>:</h4>
<p>Nothing actionable from me.</p>
<p>I've tried running <code>db.parse</code> during the cache warm-up to speed up completions even more, but looks like that has no effect on the profile traces: they still are reparsed during completion (reparse is done for completion renders, to be precise).<br>
Stuck on digging that, but almost sure it's due to macro expansion.</p>
<p>So far revolve around there, thinking on why that many reparses of different files are needed for completion renders and why they are not interned.</p>



<a name="243398525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243398525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243398525">(Jun 21 2021 at 15:21)</a>:</h4>
<p>Yeah, this sounds like <a href="https://github.com/rust-analyzer/rust-analyzer/issues/8754">https://github.com/rust-analyzer/rust-analyzer/issues/8754</a> -- havent' investigated that fully myself yet</p>



<a name="243401724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/243401724" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#243401724">(Jun 21 2021 at 15:41)</a>:</h4>
<p>I haven't looked at the LSP diagnostic pull model yet but it's documented here <a href="https://github.com/microsoft/vscode-languageserver-node/blob/main/protocol/src/common/proposed.diagnostics.md">https://github.com/microsoft/vscode-languageserver-node/blob/main/protocol/src/common/proposed.diagnostics.md</a> It should be available client-side once <a href="https://github.com/rust-analyzer/rust-analyzer/pull/9359">https://github.com/rust-analyzer/rust-analyzer/pull/9359</a> is in</p>



<a name="244157884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244157884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244157884">(Jun 28 2021 at 15:00)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/06/28/changelog-83.html">https://rust-analyzer.github.io/thisweek/2021/06/28/changelog-83.html</a>. We have some nice performance improvements for IDE features, better <code>cfg</code> completion and loop and function exit point highlighting.</p>



<a name="244158433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244158433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244158433">(Jun 28 2021 at 15:04)</a>:</h4>
<p>just for some additional visibility, I've opened a PR to add some more people to the wg-rls-2 working group member list and give them <code>@bors r+</code> rights so that more people can sync the submodule <a href="https://github.com/rust-lang/team/pull/598">https://github.com/rust-lang/team/pull/598</a></p>



<a name="244158521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244158521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244158521">(Jun 28 2021 at 15:05)</a>:</h4>
<p>not a complete list, but the usual suspects that do or may want to do releases and submodule syncs are in there</p>



<a name="244158659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244158659" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244158659">(Jun 28 2021 at 15:06)</a>:</h4>
<p>But isn't it frowned upon to self-<code>r+</code> PRs to <code>rust-lang/rust</code>?</p>



<a name="244158805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244158805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244158805">(Jun 28 2021 at 15:07)</a>:</h4>
<p>yeah, but submodule updates are an exception IIRC</p>



<a name="244158837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244158837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244158837">(Jun 28 2021 at 15:07)</a>:</h4>
<p>any code changes do need to be reviewed</p>



<a name="244158967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244158967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244158967">(Jun 28 2021 at 15:08)</a>:</h4>
<p>Ah, okay</p>



<a name="244161461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244161461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244161461">(Jun 28 2021 at 15:25)</a>:</h4>
<p>I am on vacation this week, so I’ll be partially available! Last week I made some progress on the hir2.0 design. Where the progress is defined as finding assumptions that RA makes which are just wrong.</p>
<p>An interesting one is <a href="https://github.com/rust-analyzer/rust-analyzer/issues/9403">https://github.com/rust-analyzer/rust-analyzer/issues/9403</a> — today, during macro expansion, we assume that we “map” input tokens to output tokens, but that’s not what actually takes place, and we need to do something about it.</p>



<a name="244162305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244162305" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244162305">(Jun 28 2021 at 15:31)</a>:</h4>
<p>I'm still somewhat confused about what this means concretely</p>



<a name="244162381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244162381" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244162381">(Jun 28 2021 at 15:31)</a>:</h4>
<p>but I get that something like <code>Span::join</code> isn't really implementable with what we have now</p>



<a name="244164966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244164966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244164966">(Jun 28 2021 at 15:48)</a>:</h4>
<p>I've followed the issue about macros loosely. It made me think of something we have at work: there is a DSL that contains import statements that semantically do not import namespaces, but instead sections of a file (more like a pre-processor / C[++] imports). Perhaps it could be an interesting thought experiment to think of macros less as the expansion of the tokens the macro is invoked with and more as "importing" (in the pre-processor sense of the word) code, except not from a file but from thin air through how the macro is defined. Macro arguments represent connection points between the old invocation code and the new generated code, kind of in the way of templating. Except templates can also be proc macros, so... it's definitely not a perfect analogy I'm putting together here <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> </p>
<p>Since I'm otherwise not that involved, I can't really relate to specifics anyways, just had this come to mind because I worked with our imports at work recently. Food for thought.</p>



<a name="244165968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244165968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244165968">(Jun 28 2021 at 15:55)</a>:</h4>
<p>We already treat macro expansion results as virtual files</p>



<a name="244946245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/244946245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#244946245">(Jul 05 2021 at 15:01)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, new changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/07/05/changelog-84.html">https://rust-analyzer.github.io/thisweek/2021/07/05/changelog-84.html</a>. We have an improved "Replace <code>if let</code> with match assist", better closure type inference and a couple of other goodies.</p>



<a name="245698275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/245698275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#245698275">(Jul 12 2021 at 15:00)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/07/12/changelog-85.html">https://rust-analyzer.github.io/thisweek/2021/07/12/changelog-85.html</a>, with improved assists and type inference fixes. Steering meeting the today in other thread.</p>



<a name="246466385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246466385" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246466385">(Jul 19 2021 at 15:01)</a>:</h4>
<p>Hello, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/07/19/changelog-86.html">https://rust-analyzer.github.io/thisweek/2021/07/19/changelog-86.html</a>. We have multiple proc macro ABI support, "Go to type definition" improvements and a Windows update workaround.</p>



<a name="246466609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246466609" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246466609">(Jul 19 2021 at 15:02)</a>:</h4>
<p>I am excited about <a href="https://github.com/rust-analyzer/rust-analyzer/pull/9550">https://github.com/rust-analyzer/rust-analyzer/pull/9550</a>! Such a great feature!</p>



<a name="246466727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246466727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246466727">(Jul 19 2021 at 15:03)</a>:</h4>
<p>And a first contribution, too :-)</p>



<a name="246466776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246466776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246466776">(Jul 19 2021 at 15:03)</a>:</h4>
<p>On my side, I think I am at my 20th "It'll take me half an hour to add tests to project-model"! Getting there though</p>



<a name="246466933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246466933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246466933">(Jul 19 2021 at 15:04)</a>:</h4>
<p>Oh, and I've started <a href="https://www.youtube.com/playlist?list=PLhb66M_x9UmrqXhQuIpWC5VgTdrGxMx3y">https://www.youtube.com/playlist?list=PLhb66M_x9UmrqXhQuIpWC5VgTdrGxMx3y</a> ! Probably should start plugging that link into the docs</p>



<a name="246467616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246467616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246467616">(Jul 19 2021 at 15:10)</a>:</h4>
<p>I'm working on adding unit tests for proc macros, it turned out somewhat annoying</p>



<a name="246467733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246467733" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246467733">(Jul 19 2021 at 15:10)</a>:</h4>
<p>We need to obtain an in-process macro server, but the arrangement of the <code>proc_macro_api</code> and <code>proc_macro_srv</code> crates makes this a bit hard</p>



<a name="246467939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246467939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246467939">(Jul 19 2021 at 15:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/246466609">said</a>:</p>
<blockquote>
<p>I am excited about <a href="https://github.com/rust-analyzer/rust-analyzer/pull/9550">https://github.com/rust-analyzer/rust-analyzer/pull/9550</a>! Such a great feature!</p>
</blockquote>
<p>Yeah, this is pretty cool!</p>



<a name="246467968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246467968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246467968">(Jul 19 2021 at 15:12)</a>:</h4>
<p>though I'm wondering about the long-term maintainability of this</p>



<a name="246467997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246467997" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246467997">(Jul 19 2021 at 15:12)</a>:</h4>
<p>Why do we want in-process? Just to make things faster? Big <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> from me!</p>



<a name="246468002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468002">(Jul 19 2021 at 15:12)</a>:</h4>
<p>presumably we'll delete old ABIs once they're no longer used by stable rust</p>



<a name="246468080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468080">(Jul 19 2021 at 15:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/246467997">said</a>:</p>
<blockquote>
<p>Why do we want in-process? Just to make things faster? Big <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> from me!</p>
</blockquote>
<p>because I don't think you can reliably spawn a binary target from a unit test, at least not without artifact dependencies</p>



<a name="246468143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468143">(Jul 19 2021 at 15:13)</a>:</h4>
<p>this one <a href="https://rust-lang.github.io/rfcs/3028-cargo-binary-dependencies.html">https://rust-lang.github.io/rfcs/3028-cargo-binary-dependencies.html</a></p>



<a name="246468151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468151">(Jul 19 2021 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="211727">@Jonas Schievink  [he/him]</span> you can spawn the binary from the same crate.</p>



<a name="246468222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468222" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468222">(Jul 19 2021 at 15:14)</a>:</h4>
<p>ah no, that's only for integration tests</p>



<a name="246468242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468242">(Jul 19 2021 at 15:14)</a>:</h4>
<p>yeah</p>



<a name="246468269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468269">(Jul 19 2021 at 15:14)</a>:</h4>
<p>and I'd really love to have proc macros available in unit tests too</p>



<a name="246468353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468353">(Jul 19 2021 at 15:15)</a>:</h4>
<p>Yeah, anyway, in-process feels better to me -- "no IPC/IO in tests" i think served us well so far</p>



<a name="246468525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468525">(Jul 19 2021 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="211727">@Jonas Schievink  [he/him]</span> as someone more familiar with <code>rustc</code>, would it be possible to extract some form of an ap published crate for proc macro server, which rustc and ra can re-use, like we did for lexer?</p>



<a name="246468633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468633">(Jul 19 2021 at 15:17)</a>:</h4>
<p>To be honest, I wish very hard that that "just happens", but I am trying not to think about me driving that effort :)</p>



<a name="246468754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468754">(Jul 19 2021 at 15:18)</a>:</h4>
<p>yes, me too :D</p>



<a name="246468778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468778" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468778">(Jul 19 2021 at 15:18)</a>:</h4>
<p>it should be possible to extract the proc_macro_bridge into its own crate</p>



<a name="246468814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468814" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468814">(Jul 19 2021 at 15:18)</a>:</h4>
<p>but, that still leaves the question of how to deal with breakage in its interface</p>



<a name="246468900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246468900" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246468900">(Jul 19 2021 at 15:19)</a>:</h4>
<p>in the long term, I don't think we have much choice but to sync with nightly rust, like clippy and rustfmt do</p>



<a name="246469237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246469237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246469237">(Jul 19 2021 at 15:21)</a>:</h4>
<p>I actually started doing this extraction, but wasn't really sure what it'd buy us in the short term</p>



<a name="246469263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246469263" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246469263">(Jul 19 2021 at 15:21)</a>:</h4>
<p>By "interface" you mean the <code>API</code> of the crate, or the <code>ABI</code> of proc-macros?</p>



<a name="246469295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246469295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246469295">(Jul 19 2021 at 15:22)</a>:</h4>
<p>the crate's public API</p>



<a name="246469432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246469432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246469432">(Jul 19 2021 at 15:22)</a>:</h4>
<p>I don't think there are a lot of short-term wins -- short-term, it's <strong>always</strong> easier just to copy-paste stuff in. I do think long-term this would be worthwhile. LIke, in the end, this code will be shared, and we can share it today, so we might as well get started!</p>



<a name="246469757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246469757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246469757">(Jul 19 2021 at 15:24)</a>:</h4>
<p>I think we can just chase the API -- shouldn't be harder than chasing the API <em>and</em> updating vendored sources. One way to make it easier is to add a test upstraem which exercises the API we use. That way, upstream folks will notice when they break API and could be more mindful about that. </p>
<p>For <code>rustc_lexer</code>, the sharing worked out alright I thinkz</p>



<a name="246470043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246470043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246470043">(Jul 19 2021 at 15:26)</a>:</h4>
<blockquote>
<p>in the long term, I don't think we have much choice but to sync with nightly rust, like clippy and rustfmt do</p>
</blockquote>
<p>Maaaybe. I'd still would like to try the other way around, and adsorb rustc into rust-analyzer "repo". Its so much easier to live without bootstrapping and x.py shenanigans.</p>



<a name="246470306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246470306" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246470306">(Jul 19 2021 at 15:28)</a>:</h4>
<p>The difference with <code>rustc_lexer</code> is that we can update that whenever we want</p>



<a name="246470414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246470414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246470414">(Jul 19 2021 at 15:29)</a>:</h4>
<p>Ah, and, for proc_maccro, we need to update every time the ABI changes... yeah, that's a good point <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="246470427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246470427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246470427">(Jul 19 2021 at 15:29)</a>:</h4>
<p><code>proc_macro</code> on the other hand is tied to a specific Rust version, so we can either lock our support down to one individual Rust version, or add a copy for each version we support</p>



<a name="246470536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246470536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246470536">(Jul 19 2021 at 15:29)</a>:</h4>
<p>don't think there's a way around that unless rustc stabilizes the proc macro ABI or internal API, which will never happen</p>



<a name="246470922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/246470922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#246470922">(Jul 19 2021 at 15:32)</a>:</h4>
<blockquote>
<p>or add a copy for each version we support</p>
</blockquote>
<p>This I think shouldn't be hard? Cargo allows linking in mutiple major versions. We are going to get an upleasent compile time hit of course, but I wouldn't worry too much about that: seems like two versions (latest stable + latest nightly) should cover most cases .</p>



<a name="247217080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247217080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247217080">(Jul 26 2021 at 15:19)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> bit late, sorry, but today's changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/07/26/changelog-87.html">https://rust-analyzer.github.io/thisweek/2021/07/26/changelog-87.html</a>, with better completions and <code>derive</code> path resolution.</p>



<a name="247218664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247218664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247218664">(Jul 26 2021 at 15:29)</a>:</h4>
<p>hmm, <code>derive</code> resolution only seems to work in certain cases</p>



<a name="247218900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247218900" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247218900">(Jul 26 2021 at 15:31)</a>:</h4>
<p>in other news, I am yet again staring into the name resolution abyss</p>



<a name="247218962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247218962" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247218962">(Jul 26 2021 at 15:31)</a>:</h4>
<p>this time, to fix our legacy macro scoping</p>



<a name="247361411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247361411" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247361411">(Jul 27 2021 at 17:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211727">Jonas Schievink  [he/him]</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/247218664">said</a>:</p>
<blockquote>
<p>hmm, <code>derive</code> resolution only seems to work in certain cases</p>
</blockquote>
<p>Looks like this is due to clashing namespaces again, all derives that also have their trait in the prelude fail to resolve cause the code finds the trait instead of the macro while it expects a macro</p>



<a name="247929056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247929056" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247929056">(Aug 02 2021 at 14:55)</a>:</h4>
<p>I won't be able to join this sync-up since I have a call with a client at that time</p>



<a name="247929781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247929781" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247929781">(Aug 02 2021 at 15:01)</a>:</h4>
<p>Hi, <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>, if you haven't seen it, the changelog is up at <a href="https://rust-analyzer.github.io/thisweek/2021/08/02/changelog-88.html">https://rust-analyzer.github.io/thisweek/2021/08/02/changelog-88.html</a>, with "hover range" to see the type of an expression and <code>#[doc(hidden)]</code> items hidden from completion.</p>



<a name="247929922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247929922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247929922">(Aug 02 2021 at 15:02)</a>:</h4>
<p>On my side, I've decided to stop working on cool stuff until I fix all broken windows</p>



<a name="247930336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247930336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247930336">(Aug 02 2021 at 15:05)</a>:</h4>
<p>I haven't done much this week :(</p>



<a name="247930423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247930423" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247930423">(Aug 02 2021 at 15:05)</a>:</h4>
<p>I was camping all week and away from computers</p>



<a name="247930426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247930426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247930426">(Aug 02 2021 at 15:05)</a>:</h4>
<p>I've been working on a bunch of assist improvements</p>



<a name="247930493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247930493" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Kolb <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247930493">(Aug 02 2021 at 15:06)</a>:</h4>
<p>I love the new hover extension</p>



<a name="247930708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247930708" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247930708">(Aug 02 2021 at 15:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203366">Jeremy Kolb</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/weekly.20sync-up/near/247930493">said</a>:</p>
<blockquote>
<p>I love the new hover extension</p>
</blockquote>
<p>currently adding the coercion info on hover on top of that(without syntax highlighting unfortunately)</p>



<a name="247930758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247930758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247930758">(Aug 02 2021 at 15:08)</a>:</h4>
<p><a href="/user_uploads/4715/pUWDoZ8SBATkgP085bwSIIXm/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/pUWDoZ8SBATkgP085bwSIIXm/image.png" title="image.png"><img src="/user_uploads/4715/pUWDoZ8SBATkgP085bwSIIXm/image.png"></a></div>



<a name="247940184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/weekly%20sync-up/near/247940184" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/185405-t-compiler/rust-analyzer/topic/weekly.20sync-up.html#247940184">(Aug 02 2021 at 16:42)</a>:</h4>
<p>that's super cool!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
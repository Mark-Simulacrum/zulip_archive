<html>
<head><meta charset="utf-8"><title>Packaging with rustup · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html">Packaging with rustup</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="199385242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199385242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199385242">(Jun 01 2020 at 15:48)</a>:</h4>
<p>Hey, <span class="user-mention" data-user-id="121055">@Pietro Albini</span>, I think now that we've merged the RFC about transitioning to rust-analyzer, it makes sense to package it as a rustup component. </p>
<p>I have two questions:</p>
<ul>
<li>What are the steps to do here?</li>
<li>Who is the best person to do this? Perhaps someone from <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> wants to be rust-analyzer "release manager"?</li>
</ul>



<a name="199385397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199385397" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199385397">(Jun 01 2020 at 15:49)</a>:</h4>
<p>Third question:</p>
<ul>
<li>Are you the right person to ping? :) Should we tag someone else as well?</li>
</ul>



<a name="199387415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387415">(Jun 01 2020 at 16:04)</a>:</h4>
<p>so, it depends how you want to ship it</p>



<a name="199387461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387461">(Jun 01 2020 at 16:04)</a>:</h4>
<p>the easiest way is to just have it as a component, shipping it with nightlies</p>



<a name="199387572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387572">(Jun 01 2020 at 16:05)</a>:</h4>
<p>the initial work needed is to add it as a submodule, and hook it up with the build system to build RA in dist builders and prepare a tarball for it</p>



<a name="199387581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387581">(Jun 01 2020 at 16:05)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116122">@simulacrum</span> on that</p>



<a name="199387638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387638">(Jun 01 2020 at 16:05)</a>:</h4>
<p>yeah that seems like the right approach</p>



<a name="199387698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387698">(Jun 01 2020 at 16:06)</a>:</h4>
<p>how long does rust-analyzer take to build?</p>



<a name="199387729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387729">(Jun 01 2020 at 16:06)</a>:</h4>
<p>then the release process bits need to be updated to also ship RA only with nightly</p>



<a name="199387765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387765">(Jun 01 2020 at 16:06)</a>:</h4>
<p>and finally you need to coordinate with kinnison (on discord) to setup the bits on the rustup side</p>



<a name="199387815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387815">(Jun 01 2020 at 16:07)</a>:</h4>
<p>once the initial implementation is done, the only maintenance overhead is to send a PR bumping the submodule every time you want to update rustup</p>



<a name="199387925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199387925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199387925">(Jun 01 2020 at 16:08)</a>:</h4>
<p>since RA is not really affected by rustc changes you can even <code>r+ rollup</code> the PRs updating RA, since they won't break the build anyway (granted they build beforehand)</p>



<a name="199388016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199388016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199388016">(Jun 01 2020 at 16:08)</a>:</h4>
<p>I guess <code>r?</code> simulacrum on the build system bits, <code>r?</code> me or mark on the release process bits, and <code>r?</code> kinnison for the rustup bits</p>



<a name="199388044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199388044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199388044">(Jun 01 2020 at 16:09)</a>:</h4>
<p>besides, I can't wait for RA to be available through rustup <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="199388178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199388178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199388178">(Jun 01 2020 at 16:10)</a>:</h4>
<p>yep, this sounds right. if it turns out that RA takes too long for our CI we can also explore taking binary artifacts and reuploading them, but I would rather not do that if at all possible to avoid.</p>



<a name="199388538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199388538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199388538">(Jun 01 2020 at 16:12)</a>:</h4>
<p>The last commit took ~5m30s to build and test the <code>rust-analyzer</code> executable and ~3m to just build it. Building and testing the vscode extension is less than 1min.</p>



<a name="199388566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199388566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199388566">(Jun 01 2020 at 16:13)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/runs/727874068">https://github.com/rust-analyzer/rust-analyzer/runs/727874068</a></p>



<a name="199396031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199396031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199396031">(Jun 01 2020 at 17:13)</a>:</h4>
<p>hm okay so seems probably well within fine</p>



<a name="199400548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199400548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199400548">(Jun 01 2020 at 17:48)</a>:</h4>
<p>This might be the <code>debug</code> build though, the release build for me is</p>
<div class="codehilite"><pre><span></span><code>real 495.99s
user 3226.26s
sys  29.97s
rss  1087380k
</code></pre></div>



<a name="199614648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199614648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199614648">(Jun 03 2020 at 12:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> </p>
<p>Could you give a link for "and hook it up with the build system" part? </p>
<p>I imagine I can try to look how this is done for cargo and rustup, but, if you can just point me to the relevant file, that would help</p>



<a name="199614666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199614666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199614666">(Jun 03 2020 at 12:50)</a>:</h4>
<p>sure! well, kind of</p>



<a name="199614745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199614745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199614745">(Jun 03 2020 at 12:51)</a>:</h4>
<p>I would start here: <a href="https://github.com/Mark-Simulacrum/rust/blob/5afb70a48564118b1e7f738110ce3e22e733dab8/src/bootstrap/tool.rs#L652-L669">https://github.com/Mark-Simulacrum/rust/blob/5afb70a48564118b1e7f738110ce3e22e733dab8/src/bootstrap/tool.rs#L652-L669</a></p>



<a name="199614825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199614825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199614825">(Jun 03 2020 at 12:51)</a>:</h4>
<p>and then once you've configured the tool there and in <a href="http://builder.rs">builder.rs</a> (the comment lies, you want builder not build, if you could fix that while there that'd be great)</p>



<a name="199614920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199614920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199614920">(Jun 03 2020 at 12:52)</a>:</h4>
<p>you will need to add some code to <a href="http://dist.rs">dist.rs</a> in bootstrap, following something like what we do for miri probably (miri is also nightly-only)</p>



<a name="199614947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199614947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199614947">(Jun 03 2020 at 12:52)</a>:</h4>
<p>presumably rust analyzer will always build so we won't need any toolstate shenanigans</p>



<a name="199615097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199615097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199615097">(Jun 03 2020 at 12:53)</a>:</h4>
<p>once that's done you'll want to post a PR and we can merge that, and then I forget if we need some polish somewhere else</p>



<a name="199615156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199615156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199615156">(Jun 03 2020 at 12:54)</a>:</h4>
<p>iirc there's a bit you need to add to the manifest generator but I can't recall right now where that lives</p>



<a name="199739291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199739291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199739291">(Jun 04 2020 at 12:32)</a>:</h4>
<p>WIP PR: <a href="https://github.com/rust-lang/rust/pull/72978">https://github.com/rust-lang/rust/pull/72978</a></p>



<a name="199739341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199739341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199739341">(Jun 04 2020 at 12:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> the PR fails tidy check for code inside rust-analyze repository (we have test files with all kinds of weird shenanigans). Presumably, I should just exclude the whole submodule from tidy, right?</p>



<a name="199739430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199739430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199739430">(Jun 04 2020 at 12:34)</a>:</h4>
<p>Yep! Look in src/tools/tidy, there should be at least one ignore list, maybe more</p>



<a name="199739651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199739651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199739651">(Jun 04 2020 at 12:36)</a>:</h4>
<p>And the second question: how do I actually kick the <code>dist</code> locally? <code>./x.py dist</code> I thik doesn't build tools?</p>



<a name="199739663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199739663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199739663">(Jun 04 2020 at 12:36)</a>:</h4>
<p><code>./x.py dist rls</code> fails with assert about <code>extended</code></p>



<a name="199741905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199741905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199741905">(Jun 04 2020 at 12:56)</a>:</h4>
<p>ah you may need to enable extended in config.toml</p>



<a name="199741919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199741919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199741919">(Jun 04 2020 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> should be able to grep for it</p>



<a name="199757583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199757583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199757583">(Jun 04 2020 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> can I force-push branches with review fixes, or would it break the try build?</p>



<a name="199757758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199757758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199757758">(Jun 04 2020 at 14:48)</a>:</h4>
<p>should be fine</p>



<a name="199921054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199921054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199921054">(Jun 05 2020 at 19:06)</a>:</h4>
<p>Seems like try succeded. How do I grab the artifacts?</p>



<a name="199927902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199927902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199927902">(Jun 05 2020 at 20:08)</a>:</h4>
<p>rustup-toolchain-install-master, but I can take a stab at it</p>



<a name="199928011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199928011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199928011">(Jun 05 2020 at 20:10)</a>:</h4>
<p>seems to work for me (haven't tried running but the binary is there and ldd and running it doesn't just break completely)</p>



<a name="199928065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199928065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199928065">(Jun 05 2020 at 20:10)</a>:</h4>
<p>$ ~/.rustup/toolchains/8e490eadad848809668611e7ae2a4b6ce5118bc1/bin/rust-analyzer --version<br>
rust-analyzer 9c52f52</p>



<a name="199928176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199928176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199928176">(Jun 05 2020 at 20:11)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> I'd be happy to r+ the PR with commits squashed into one -- have we gotten FCP from the relevant teams yet? I think so via RFC but I'll leave that to you to decide and feel free to r=me on the PR if so once you squash things down.</p>



<a name="199965498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/199965498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#199965498">(Jun 06 2020 at 09:25)</a>:</h4>
<p>Yeah, I think it's fine to r+ -- there was an RFC, and reverting should be easy</p>



<a name="202961630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/202961630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#202961630">(Jul 06 2020 at 07:51)</a>:</h4>
<p>So, I see rust-analyzer at <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz">https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz</a> !</p>



<a name="202961646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/202961646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#202961646">(Jul 06 2020 at 07:51)</a>:</h4>
<p>Next stop -- adding rustup component</p>



<a name="203353060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/203353060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#203353060">(Jul 09 2020 at 05:59)</a>:</h4>
<p><code>rustup component add rust-analyzer-preview</code> works now!<br>
Is there anything I have to do/uninstall if I want to switch from <code>cargo xtask install</code> to the rustup-shipped version?</p>



<a name="203354452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/203354452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#203354452">(Jul 09 2020 at 06:33)</a>:</h4>
<p>Depending on your editor, you might have to change a setting to point to it. In Code, you can set <code>rust-analyzer.serverPath</code> for that.</p>



<a name="203354463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/203354463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#203354463">(Jul 09 2020 at 06:33)</a>:</h4>
<p>I don't think there's a <code>rustup</code> shim, so it might not be in <code>PATH</code>. If you e.g. replace the old binary with a symlink, it might work directly.</p>



<a name="203364905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Packaging%20with%20rustup/near/203364905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Packaging.20with.20rustup.html#203364905">(Jul 09 2020 at 09:12)</a>:</h4>
<p>yeah, symlink works nicely, cool :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
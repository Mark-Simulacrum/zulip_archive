<html>
<head><meta charset="utf-8"><title>Semantic generate getter &amp; introduciton · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html">Semantic generate getter &amp; introduciton</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254074873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254074873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254074873">(Sep 20 2021 at 16:08)</a>:</h4>
<p>Hi! My name is Andrzej and I'm a new contributor to RA. I'm a recent CS graduate (University of Warsaw, Poland) fascinated with programming languages design &amp; dev tooling. Some time ago I stumbled upon matklad 's ERA series and I started binge watching it :D Last week I submitted my first PR and now I'd like to tackle something more ambitious: <a href="https://github.com/rust-analyzer/rust-analyzer/issues/10295">https://github.com/rust-analyzer/rust-analyzer/issues/10295</a>, but I will need some guidance.</p>



<a name="254075156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254075156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254075156">(Sep 20 2021 at 16:10)</a>:</h4>
<p>both problems describes in the issue arise from the fact that the assist currently doesn't rely on semantic information. Relevant pieces of code: <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_getter.rs#L103">https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_getter.rs#L103</a><br>
<a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/utils.rs#L466">https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/utils.rs#L466</a></p>



<a name="254075359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254075359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254075359">(Sep 20 2021 at 16:11)</a>:</h4>
<p>You want to query the <code>Semantics</code> for the relevant info here, that is you want to lower the field type ast node to the <code>hir::Type</code> version first with which you can then do the proper checks</p>



<a name="254075522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254075522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254075522">(Sep 20 2021 at 16:12)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/blob/f1d7f98ed07b9934286b9c4809dd4d7a47537879\crates\hir\src\semantics.rs#L266">This</a> should give you the <code>hir::Type</code></p>



<a name="254075967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254075967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254075967">(Sep 20 2021 at 16:15)</a>:</h4>
<p>For checking that <code>String</code> refers to the actual std string type you want to make use of <a href="https://github.com/Veykril/rust-analyzer/blob/f1d7f98ed07b9934286b9c4809dd4d7a47537879\crates\ide_db\src\helpers.rs#L129"><code>FamousDefs</code></a> to fetch the std String type and compare it, though there is a problem here in that this only contains <code>core</code> definitions currently while we need <code>alloc</code>/<code>std</code> for this</p>



<a name="254075977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254075977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254075977">(Sep 20 2021 at 16:15)</a>:</h4>
<p>I'd like to replace this aptly named function <code>useless_type_special_case</code>with following logic:</p>
<ol>
<li>resolve the type using ctx's <code>Semantics</code></li>
<li>check if the type implements Copy, if yes, we don't need to return a reference</li>
<li>check if the type implements <code>AsRef&lt;T&gt;</code>, <code>AsRef&lt;[T]&gt;</code> or <code>AsRef&lt;str&gt;</code> - if yes, return <code>self.field.as_ref()</code></li>
<li>handle the Option case, which appears to be a bit harder</li>
</ol>



<a name="254076254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254076254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254076254">(Sep 20 2021 at 16:17)</a>:</h4>
<p>All of those should be doable(maybe not that easily for 3) via querying <code>FamousDefs</code> with the required paths and sources added I believe(doesn't need the <code>std</code>/<code>alloc</code> problem I just mentioned after all if you rely on <code>AsRef</code> actually)</p>



<a name="254076274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254076274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254076274">(Sep 20 2021 at 16:17)</a>:</h4>
<p>1 is easy, as <span class="user-mention" data-user-id="300586">@Lukas Wirth</span> wrote, 2 I also figured out, but the rest is not that straightforward</p>



<a name="254076415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254076415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254076415">(Sep 20 2021 at 16:18)</a>:</h4>
<p>What's the option case(4)?</p>



<a name="254076891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254076891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254076891">(Sep 20 2021 at 16:22)</a>:</h4>
<p>For 3 you should be able to do something like <code>ty.impls_trait(db, as_ref_trait, &amp;[str_primitive_ty])</code> to check for <code>AsRef&lt;str&gt;</code></p>



<a name="254076926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254076926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254076926">(Sep 20 2021 at 16:22)</a>:</h4>
<p>I need to check if the type is Option&lt;&amp;T&gt; for some T - the hard part is figuring out how to handle generic type params, but that's as hard as in 3, but I also don't understand why Option's as_ref does something different than AsRef's one, despite having the same name</p>



<a name="254076946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254076946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254076946">(Sep 20 2021 at 16:22)</a>:</h4>
<p>Where you would get the <code>as_ref_trait</code> and <code>str_primitive_ty</code> via <code>FamousDefs</code></p>



<a name="254077017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254077017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254077017">(Sep 20 2021 at 16:23)</a>:</h4>
<p>I mean, Option doesn't implement AsRef</p>



<a name="254077050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254077050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254077050">(Sep 20 2021 at 16:23)</a>:</h4>
<p>but that's related to the language itself, not RA :P</p>



<a name="254077052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254077052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254077052">(Sep 20 2021 at 16:23)</a>:</h4>
<p>Because Option's <code>as_ref</code> returns an Option again, while the <code>AsRef</code> trait requires to return a reference to something</p>



<a name="254077276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254077276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254077276">(Sep 20 2021 at 16:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300586">Lukas Wirth</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton/near/254076946">said</a>:</p>
<blockquote>
<p>Where you would get the <code>as_ref_trait</code> and <code>str_primitive_ty</code> via <code>FamousDefs</code></p>
</blockquote>
<p>yeah, that's the easier part, but what about generic params?</p>



<a name="254077395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254077395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254077395">(Sep 20 2021 at 16:25)</a>:</h4>
<p>regarding FamousDefs, why isn't is_copy implemented in terms of it?</p>
<div class="codehilite"><pre><span></span><code>pub fn is_copy(&amp;self, db: &amp;dyn HirDatabase) -&gt; bool {
        let lang_item = db.lang_item(self.krate, SmolStr::new(&quot;copy&quot;));
        let copy_trait = match lang_item {
            Some(LangItemTarget::TraitId(it)) =&gt; it,
            _ =&gt; return false,
        };
        self.impls_trait(db, copy_trait.into(), &amp;[])
    }
</code></pre></div>



<a name="254077421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254077421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254077421">(Sep 20 2021 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="436269">Andrzej Głuszak</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton/near/254077276">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="300586">Lukas Wirth</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton/near/254076946">said</a>:</p>
<blockquote>
<p>Where you would get the <code>as_ref_trait</code> and <code>str_primitive_ty</code> via <code>FamousDefs</code></p>
</blockquote>
<p>yeah, that's the easier part, but what about generic params?</p>
</blockquote>
<p>I don't think we expose anything for that on the IDE layer/from <code>hir</code> yet</p>



<a name="254077549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254077549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254077549">(Sep 20 2021 at 16:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="436269">Andrzej Głuszak</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton/near/254077395">said</a>:</p>
<blockquote>
<p>regarding FamousDefs, why isn't is_copy implemented in terms of it?</p>
<p><div class="codehilite"><pre><span></span><code>pub fn is_copy(&amp;self, db: &amp;dyn HirDatabase) -&gt; bool {
        let lang_item = db.lang_item(self.krate, SmolStr::new(&quot;copy&quot;));
        let copy_trait = match lang_item {
            Some(LangItemTarget::TraitId(it)) =&gt; it,
            _ =&gt; return false,
        };
        self.impls_trait(db, copy_trait.into(), &amp;[])
    }
</code></pre></div><br>
</p>
</blockquote>
<p>Because the <code>hir</code> crate doesn't know about <code>FamousDefs</code>,  it's defined in <code>ide_db</code> which depends on <code>hir</code> itself</p>



<a name="254078367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254078367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254078367">(Sep 20 2021 at 16:32)</a>:</h4>
<p>okay, so why is <code>is_copy</code> defined there? I mean, I was wondering if I should define <code>is_as_ref</code> there as well, because my use case seems to be very similar. It irks me that there are only some methods defined directly on a <code>hir::Type</code></p>



<a name="254078637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254078637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254078637">(Sep 20 2021 at 16:34)</a>:</h4>
<p>I mean, there are (at least) two ways to check if a type implements <code>Copy</code> - one by using <code>is_copy</code> (which doesn't use FamousTypes) and the second one by querying <code>impls_trait</code>with a value from FamousTypes</p>



<a name="254078671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254078671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254078671">(Sep 20 2021 at 16:34)</a>:</h4>
<p>Those are just short cuts, I think the proper API should only expose <code>impls_trait</code>, but we currently don't offer a way for the ide layer to query <code>lang_items</code> I believe</p>



<a name="254078792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254078792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254078792">(Sep 20 2021 at 16:35)</a>:</h4>
<p>So ye technically there are two ways to look for the <code>Copy</code> trait in general, via the lang item or via its core/std path(which can be invalid in <code>no_core</code> projects)</p>



<a name="254078866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254078866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254078866">(Sep 20 2021 at 16:35)</a>:</h4>
<p>for AsRef you want to go through FamousDefs</p>



<a name="254078914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254078914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254078914">(Sep 20 2021 at 16:35)</a>:</h4>
<p>okay, thanks!</p>



<a name="254079100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254079100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254079100">(Sep 20 2021 at 16:37)</a>:</h4>
<p>Note that you need to duplicate  the trait definition into the file here <a href="https://github.com/rust-analyzer/rust-analyzer/blob/f1d7f98ed07b9934286b9c4809dd4d7a47537879\crates\test_utils\src\minicore.rs#L10">https://github.com/rust-analyzer/rust-analyzer/blob/f1d7f98ed07b9934286b9c4809dd4d7a47537879\crates\test_utils\src\minicore.rs#L10</a></p>



<a name="254079144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254079144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254079144">(Sep 20 2021 at 16:37)</a>:</h4>
<p>for testing purposes(just the signatures of things is enough, bodies don't matter)</p>



<a name="254079242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254079242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254079242">(Sep 20 2021 at 16:38)</a>:</h4>
<p>That's the file FamousDefs uses when run inside tests so we don't have to depend on the <em>huge</em> core/std source when running unit tests</p>



<a name="254115332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/254115332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#254115332">(Sep 20 2021 at 20:46)</a>:</h4>
<p>I figured out how to handle generic cases :)</p>



<a name="257914827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Semantic%20generate%20getter%20%26%20introduciton/near/257914827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrzej Głuszak <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Semantic.20generate.20getter.20.26.20introduciton.html#257914827">(Oct 17 2021 at 12:26)</a>:</h4>
<p><span class="user-mention" data-user-id="300586">@Lukas Wirth</span> I finished that PR and I'd be grateful for a code review :) <a href="https://github.com/rust-analyzer/rust-analyzer/pull/10563">https://github.com/rust-analyzer/rust-analyzer/pull/10563</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
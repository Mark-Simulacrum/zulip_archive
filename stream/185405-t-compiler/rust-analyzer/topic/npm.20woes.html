<html>
<head><meta charset="utf-8"><title>npm woes · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/npm.20woes.html">npm woes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267828121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/npm%20woes/near/267828121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Hunt <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/npm.20woes.html#267828121">(Jan 13 2022 at 06:12)</a>:</h4>
<p>Anyone know what may be causing the following error when performing a <code>cargo xtask install</code>? Seems node related... I couldn't find any docs on what version of node was required:</p>
<div class="codehilite"><pre><span></span><code>&gt; rust-analyzer@0.4.0-dev package
&gt; vsce package -o rust-analyzer.vsix

/Users/huntc/Projects/hacking/rust-analyzer/editors/code/node_modules/vsce/out/package.js:136
    return (translations ?? [])
                          ^

SyntaxError: Unexpected token &#39;?&#39;
    at wrapSafe (internal/modules/cjs/loader.js:915:16)
    at Module._compile (internal/modules/cjs/loader.js:963:27)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10)
    at Module.load (internal/modules/cjs/loader.js:863:32)
    at Function.Module._load (internal/modules/cjs/loader.js:708:14)
    at Module.require (internal/modules/cjs/loader.js:887:19)
    at require (internal/modules/cjs/helpers.js:74:18)
    at Object.&lt;anonymous&gt; (/Users/huntc/Projects/hacking/rust-analyzer/editors/code/node_modules/vsce/out/main.js:27:19)
    at Module._compile (internal/modules/cjs/loader.js:999:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1027:10)
Error: install client

Caused by:
    command `npm run package --scripts-prepend-node-path` failed, exit status: 1
</code></pre></div>



<a name="267828256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/npm%20woes/near/267828256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Hunt <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/npm.20woes.html#267828256">(Jan 13 2022 at 06:14)</a>:</h4>
<p>Hmm. I did update <code>vsce</code> also:</p>
<div class="codehilite"><pre><span></span><code>npm install -g vsce
</code></pre></div>



<a name="267828736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/npm%20woes/near/267828736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Hunt <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/npm.20woes.html#267828736">(Jan 13 2022 at 06:23)</a>:</h4>
<p>Ah, it could be my node version...</p>



<a name="267828947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/npm%20woes/near/267828947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Hunt <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/npm.20woes.html#267828947">(Jan 13 2022 at 06:27)</a>:</h4>
<p>Seems v14 is required. We should doc that?</p>



<a name="267831846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/npm%20woes/near/267831846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/npm.20woes.html#267831846">(Jan 13 2022 at 07:17)</a>:</h4>
<p>Yeah, it's the node version. Can we specify that dependency in <code>package.json</code> (under <code>engines</code>, maybe)? But otherwise we only support the latest two Code versions or so, and it feels like you should be using a matching version of node.</p>



<a name="267839193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/npm%20woes/near/267839193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Hunt <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/npm.20woes.html#267839193">(Jan 13 2022 at 08:51)</a>:</h4>
<p>I think we can specify the min version of Node required as per vsce (which is 14)...</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
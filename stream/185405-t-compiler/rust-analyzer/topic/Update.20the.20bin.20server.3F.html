<html>
<head><meta charset="utf-8"><title>Update the bin server? · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html">Update the bin server?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="188379284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188379284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geobomatic <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188379284">(Feb 17 2020 at 13:53)</a>:</h4>
<p>Hi there, <br>
Since we have the marketplace extension that download the server, I was wondering how do we update it now? (Like, getting the weekly release build). I've looked for a command in the extension but couldn't find one.</p>



<a name="188380256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380256">(Feb 17 2020 at 14:05)</a>:</h4>
<p>In theory, the binary should just automatically update with today's releas</p>



<a name="188380310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380310">(Feb 17 2020 at 14:06)</a>:</h4>
<p>By the way, when will the release be published to the Code marketplace?</p>



<a name="188380352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380352">(Feb 17 2020 at 14:07)</a>:</h4>
<p>when this CI job finishes: <a href="https://github.com/rust-analyzer/rust-analyzer/runs/450646393" target="_blank" title="https://github.com/rust-analyzer/rust-analyzer/runs/450646393">https://github.com/rust-analyzer/rust-analyzer/runs/450646393</a></p>



<a name="188380449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geobomatic <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380449">(Feb 17 2020 at 14:08)</a>:</h4>
<p>Ok, I'll wait for the maketplace release <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> thank you!</p>



<a name="188380467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380467">(Feb 17 2020 at 14:08)</a>:</h4>
<p>Ah, I saw the tagged release on GitHub and thought it's ready</p>



<a name="188380476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380476">(Feb 17 2020 at 14:09)</a>:</h4>
<p>It just failed</p>



<a name="188380565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380565">(Feb 17 2020 at 14:10)</a>:</h4>
<p><code>ENOENT: no such file or directory, stat './dist/rust-analyzer-$EXT_VERSION.vsix'</code></p>



<a name="188380639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380639">(Feb 17 2020 at 14:11)</a>:</h4>
<p>Should it say <code>${{ env.EXT_VERSION }}</code> instead?</p>



<a name="188380645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380645">(Feb 17 2020 at 14:11)</a>:</h4>
<p>Just updating the extension in marketplace should work, you'll get a notification that proposes to download the new version of LSP server. <span class="user-mention" data-user-id="212617">@Geobomatic</span> , if you won't see one, please notify!</p>



<a name="188380888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380888">(Feb 17 2020 at 14:15)</a>:</h4>
<blockquote>
<p>Laurențiu Nicola: It just failed</p>
</blockquote>
<p>third time's a charm they say:</p>
<p><a href="/user_uploads/4715/-MLPCMOUqWVZIeyOu330omIa/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/-MLPCMOUqWVZIeyOu330omIa/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/4715/-MLPCMOUqWVZIeyOu330omIa/pasted_image.png"></a></div>



<a name="188380967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188380967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188380967">(Feb 17 2020 at 14:16)</a>:</h4>
<p>This is how deployment to production always looks like</p>



<a name="188381029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188381029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188381029">(Feb 17 2020 at 14:17)</a>:</h4>
<p>Yeah, we need to implement CI for our CD</p>



<a name="188381113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188381113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188381113">(Feb 17 2020 at 14:18)</a>:</h4>
<p>I am afraid this will result in infinite recursion...</p>



<a name="188381909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188381909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188381909">(Feb 17 2020 at 14:27)</a>:</h4>
<p><a href="/user_uploads/4715/JeVD-KkI-l4LsQhl_1BumxB5/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/JeVD-KkI-l4LsQhl_1BumxB5/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/4715/JeVD-KkI-l4LsQhl_1BumxB5/pasted_image.png"></a></div>



<a name="188382139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188382139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188382139">(Feb 17 2020 at 14:30)</a>:</h4>
<p>We need to rename the artifact here</p>



<a name="188384135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188384135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geobomatic <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188384135">(Feb 17 2020 at 14:54)</a>:</h4>
<p>updated, and downloading the LSP fine, thank you guys!</p>



<a name="188384256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188384256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188384256">(Feb 17 2020 at 14:55)</a>:</h4>
<p>Cool, thank you for the input too! Because my vscode crashed under WSL when the extension updated...</p>



<a name="188384260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188384260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188384260">(Feb 17 2020 at 14:55)</a>:</h4>
<blockquote>
<p>downloading the LSP fine, thank you guys!</p>
</blockquote>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> you can breathe now, auto-update works, thanks for driving this!</p>



<a name="188404811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188404811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188404811">(Feb 17 2020 at 20:27)</a>:</h4>
<p>I know we don't really need an HTTP client in <code>ra_lsp_server</code>, but what if we made the server update itself? :-). Perhaps in the future we could um, remove the semicolons from the Code extension by removing lines of code</p>



<a name="188922660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188922660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188922660">(Feb 24 2020 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="258149">@std::Veetaha</span> I ran into "Failed to download language server from rust-analyzer GitHub repository: Cannot destructure property <code>downloadUrl</code> of 'undefined' or 'null'.", do you know if this is a known issue?</p>



<a name="188922705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188922705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188922705">(Feb 24 2020 at 12:57)</a>:</h4>
<p>I think I'm on <a href="https://github.com/rust-lang/rust/commit/e3037c2631ecb55996b676ce2c18b9df1858abaa" target="_blank" title="https://github.com/rust-lang/rust/commit/e3037c2631ecb55996b676ce2c18b9df1858abaa">e3037c2631ecb55996b676ce2c18b9df1858abaa</a>, from Friday</p>



<a name="188922813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188922813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188922813">(Feb 24 2020 at 12:58)</a>:</h4>
<p>I think <code>fetchArtifactReleaseInfo</code> returns <code>null</code> as if it couldn't find the artifact</p>



<a name="188922975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188922975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188922975">(Feb 24 2020 at 13:00)</a>:</h4>
<p>then <code>downloadServer</code> calls <code>downloadArtifact</code> with <code>null</code>? I'm not sure how the postfix <code>!</code> operator works</p>



<a name="188923202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188923202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188923202">(Feb 24 2020 at 13:03)</a>:</h4>
<p>I knew an assert there would be needed <span class="user-mention" data-user-id="133169">@matklad</span> )</p>



<a name="188923288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188923288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> std::Veetaha <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188923288">(Feb 24 2020 at 13:04)</a>:</h4>
<p>Postfix ! operator just silences the compiler error (cast from nullable to non-nullable)</p>



<a name="188923322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188923322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188923322">(Feb 24 2020 at 13:05)</a>:</h4>
<p>Looks like it's a <code>ra_lsp_server-linux</code> vs. <code>rust-analyzer-linux</code> thing</p>



<a name="188923362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188923362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188923362">(Feb 24 2020 at 13:05)</a>:</h4>
<p>Yeah, it makes sense, the binary name has changed, but I'm trying to download the older release</p>



<a name="188923628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188923628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188923628">(Feb 24 2020 at 13:08)</a>:</h4>
<blockquote>
<p>Downloading ra_lsp_server-linux: 5445.490ms</p>
</blockquote>



<a name="188923632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Update%20the%20bin%20server%3F/near/188923632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Update.20the.20bin.20server.3F.html#188923632">(Feb 24 2020 at 13:08)</a>:</h4>
<p>So it was fast this time</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
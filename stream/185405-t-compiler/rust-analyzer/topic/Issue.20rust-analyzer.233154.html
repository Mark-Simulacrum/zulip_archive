<html>
<head><meta charset="utf-8"><title>Issue rust-analyzer#3154 · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html">Issue rust-analyzer#3154</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="257438266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257438266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nell Shamrell-Harrington <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257438266">(Oct 13 2021 at 21:08)</a>:</h4>
<p>Hello everyone! I'm looking into this issue <a href="https://github.com/rust-analyzer/rust-analyzer/issues/3154">https://github.com/rust-analyzer/rust-analyzer/issues/3154</a> as part of Microsoft's Hack Week.</p>
<p>Right now, I'm working on some repro steps and am writing up my understanding of the problem (I'll then post it in the issue and ask for feedback to ensure my understanding is correct)</p>
<p>For now, is there a way to output what version/build of Rust rust-analyzer is using?</p>
<p>For example, if I were running rustc 1.9.0-nightly (02310fd31 2016-03-19) on my system, is there a way to verify that rust-analyzer is using rustc 1.9.0-nightly (02310fd31 2016-03-19)?</p>



<a name="257438484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257438484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nell Shamrell-Harrington <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257438484">(Oct 13 2021 at 21:10)</a>:</h4>
<p>I tried setting RA_LOG=info and monitoring rust analyzer's output in VSCode, but I'm not seeing anything that shows the rust version/build used by rust-analyzer</p>



<a name="257449660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257449660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257449660">(Oct 13 2021 at 22:35)</a>:</h4>
<p>I don't think we output that information</p>



<a name="257449693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257449693" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257449693">(Oct 13 2021 at 22:35)</a>:</h4>
<p>Only thing we log(on debug) is the target triple we run for I think</p>



<a name="257449780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257449780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257449780">(Oct 13 2021 at 22:36)</a>:</h4>
<p>In general we just use whatever invoking plain cargo in the workspace would use<del>(unless the user overwrite the cargo command in the settings)</del></p>



<a name="257451594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257451594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nell Shamrell-Harrington <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257451594">(Oct 13 2021 at 22:54)</a>:</h4>
<p>Would that be the <a href="http://rust-analyzer.cargo.target">rust-analyzer.cargo.target</a> setting?</p>



<a name="257451939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257451939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257451939">(Oct 13 2021 at 22:57)</a>:</h4>
<p>Ye if that setting isn't set we query and log the found target, <a href="https://github.com/rust-analyzer/rust-analyzer/blob/1619fa9d8f80a4d00f71a6674835aa88dbc6c9e4/crates/project_model/src/cargo_workspace.rs#L411">https://github.com/rust-analyzer/rust-analyzer/blob/1619fa9d8f80a4d00f71a6674835aa88dbc6c9e4/crates/project_model/src/cargo_workspace.rs#L411</a></p>



<a name="257452126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257452126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257452126">(Oct 13 2021 at 22:59)</a>:</h4>
<p>Oh I take it back you can't overwrite the cargo command we use for fetching metadata it seems(would be pointless anyways)</p>



<a name="257452803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257452803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257452803">(Oct 13 2021 at 23:05)</a>:</h4>
<p>Oh and we print out the cargo version(which I think is also the same as the rustc version) when we fail to fetch the metadata here <a href="https://github.com/rust-analyzer/rust-analyzer/blob/1619fa9d8f80a4d00f71a6674835aa88dbc6c9e4/crates/project_model/src/workspace.rs#L164-L170">https://github.com/rust-analyzer/rust-analyzer/blob/1619fa9d8f80a4d00f71a6674835aa88dbc6c9e4/crates/project_model/src/workspace.rs#L164-L170</a><br>
So we could probably put an info level log for the version here as well if required</p>



<a name="257452834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257452834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nell Shamrell-Harrington <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257452834">(Oct 13 2021 at 23:05)</a>:</h4>
<p>excellent! that is what I was looking for, ty!</p>



<a name="257589724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Issue%20rust-analyzer%233154/near/257589724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nell Shamrell-Harrington <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Issue.20rust-analyzer.233154.html#257589724">(Oct 14 2021 at 19:17)</a>:</h4>
<p>Updated the issue with some analysis <a href="https://github.com/rust-analyzer/rust-analyzer/issues/3154#issuecomment-943650738">https://github.com/rust-analyzer/rust-analyzer/issues/3154#issuecomment-943650738</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>memory stats · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/memory.20stats.html">memory stats</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="248878721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/memory%20stats/near/248878721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/memory.20stats.html#248878721">(Aug 09 2021 at 17:17)</a>:</h4>
<p>wrote some code (will polish tomorrow) to measure source code / macro code. statis for rust-analyzer:</p>
<p><code>files: 31mb, macros: 12mb</code>, and the sum-total of memory usage is <code> 882mb</code></p>
<p>My conclusion: I am surprised that macro code is less than half of the non-macro code - I'd expect it to be bigger. </p>
<p>rust-analyzer memeory amplification factor seems to be 20x. This isn't unreasonable, but I wonder if we can do better.</p>



<a name="248880154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/memory%20stats/near/248880154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/memory.20stats.html#248880154">(Aug 09 2021 at 17:26)</a>:</h4>
<p>what is that measuring exactly? source text size?</p>



<a name="248883730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/memory%20stats/near/248883730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Antwan Gaggi <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/memory.20stats.html#248883730">(Aug 09 2021 at 17:55)</a>:</h4>
<p>i am assuming its memory usage/benchmarks for processing code?</p>



<a name="248955240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/memory%20stats/near/248955240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/memory.20stats.html#248955240">(Aug 10 2021 at 09:00)</a>:</h4>
<p>Yeh, source text len</p>



<a name="248955260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/memory%20stats/near/248955260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/memory.20stats.html#248955260">(Aug 10 2021 at 09:00)</a>:</h4>
<p>although I realised that this overccounts whitespace</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>issue rust-analyzer#10492 · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html">issue rust-analyzer#10492</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="257130099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257130099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257130099">(Oct 11 2021 at 23:51)</a>:</h4>
<p>I'd like to work on this <a href="https://github.com/rust-analyzer/rust-analyzer/issues/10492">https://github.com/rust-analyzer/rust-analyzer/issues/10492</a><br>
And you probably have been asked this a hundred times but I can't seem to find how to debug/test against it. Could someone give me a had to get me started?</p>



<a name="257156013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257156013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257156013">(Oct 12 2021 at 06:35)</a>:</h4>
<p>See <a href="https://github.com/rust-analyzer/rust-analyzer/tree/master/docs/dev">https://github.com/rust-analyzer/rust-analyzer/tree/master/docs/dev</a>, but debugging it can be iffy. The code might be around <a href="https://github.com/rust-analyzer/rust-analyzer/blob/ed4b312fa777ebb39ba1348fe3df574c441a485e/crates/parser/src/grammar/expressions.rs#L389">https://github.com/rust-analyzer/rust-analyzer/blob/ed4b312fa777ebb39ba1348fe3df574c441a485e/crates/parser/src/grammar/expressions.rs#L389</a> or <a href="https://github.com/rust-analyzer/rust-analyzer/blob/ed4b312fa777ebb39ba1348fe3df574c441a485e/crates/parser/src/grammar/expressions.rs#L476">https://github.com/rust-analyzer/rust-analyzer/blob/ed4b312fa777ebb39ba1348fe3df574c441a485e/crates/parser/src/grammar/expressions.rs#L476</a></p>



<a name="257156729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257156729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257156729">(Oct 12 2021 at 06:45)</a>:</h4>
<p>I think this is related to <a href="https://github.com/rust-analyzer/rust-analyzer/issues/1109">https://github.com/rust-analyzer/rust-analyzer/issues/1109</a> as we parse a float in the error case here too</p>



<a name="257222750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257222750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257222750">(Oct 12 2021 at 15:34)</a>:</h4>
<p>Thanks guys. I read the dev folders and tried to work using the tests, making one regarding tuples fail. Do you know how to get those rast files? Pretty much nothing on zulip or issues or the dev folder (With a complete test I can probably work just fine from there)</p>



<a name="257223064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257223064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257223064">(Oct 12 2021 at 15:36)</a>:</h4>
<p>those will be generated by the parser tests automatically</p>



<a name="257224092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257224092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257224092">(Oct 12 2021 at 15:43)</a>:</h4>
<p>Thanks for the help. I added a <code>0195_tuple_access.rs</code> file to <code>crates/syntax/test_data/parser/inline/ok/</code> then <code>cargo test parser_tests</code>. From those two fail understandably. <code>tests::sourcegen_tests::sourcegen_parser_tests</code> saying the test got deleted. and <code>tests::parser_tests</code></p>



<a name="257224148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257224148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257224148">(Oct 12 2021 at 15:43)</a>:</h4>
<p>How do I get the rast (is that rust ast?) ?</p>



<a name="257224295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257224295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257224295">(Oct 12 2021 at 15:44)</a>:</h4>
<p>the file I added is empty for now. I'm just trying to understand how you guys produce those tests</p>



<a name="257224428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257224428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257224428">(Oct 12 2021 at 15:45)</a>:</h4>
<p>I think the tests are extracted from the comments inside the source code. You don't have to add them to <code>inline/ok</code></p>



<a name="257224552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257224552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257224552">(Oct 12 2021 at 15:46)</a>:</h4>
<p>It thinks they're been removed because they are on disk, but not in the source</p>



<a name="257224844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257224844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257224844">(Oct 12 2021 at 15:47)</a>:</h4>
<p>oh ok! Searched for the contents of one of those in the source and found it</p>



<a name="257224861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257224861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257224861">(Oct 12 2021 at 15:47)</a>:</h4>
<p>thanks that helps a lot</p>



<a name="257225045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257225045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257225045">(Oct 12 2021 at 15:48)</a>:</h4>
<p><code>parser/src/grammar/expressions.rs</code> seems to be where those are</p>



<a name="257225130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257225130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257225130">(Oct 12 2021 at 15:49)</a>:</h4>
<p>Yeah, that's the file I mentioned earlier</p>



<a name="257873324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257873324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257873324">(Oct 17 2021 at 00:25)</a>:</h4>
<p>I added a test in the comments with the issue and changed the first conditional in <a href="https://github.com/rust-analyzer/rust-analyzer/blob/ed4b312fa777ebb39ba1348fe3df574c441a485e/crates/parser/src/grammar/expressions.rs#L389">postfix_dot_expr</a> to test if there is a whitespace after the dot, before the method call but it still fails. I assume then that the issue is in <a href="https://github.com/rust-analyzer/rust-analyzer/blob/ed4b312fa777ebb39ba1348fe3df574c441a485e/crates/parser/src/grammar/expressions.rs#L476">field_expr</a> and that it's really <a href="https://github.com/rust-analyzer/rust-analyzer/issues/1109">issue 1109</a></p>



<a name="257930487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257930487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257930487">(Oct 17 2021 at 16:24)</a>:</h4>
<p>Or in other words I'm not sure how to tackle it :/</p>



<a name="257968684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257968684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kdy1 <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257968684">(Oct 18 2021 at 02:39)</a>:</h4>
<p>Hi. I want to know if there's way to exclude some mitems from rust analyzer, just like <code>#[cfg(not(rls))]</code>.<br>
I need this because <a href="https://docs.rs/testing/0.14.1/testing/attr.fixture.html">https://docs.rs/testing/0.14.1/testing/attr.fixture.html</a> macro expands to enormous amount of items, and it disturbs writing code.</p>
<p>I searched for <code>cfg</code> but I failed to find one.</p>



<a name="257997870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/257997870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#257997870">(Oct 18 2021 at 09:07)</a>:</h4>
<p>No, there isn't. I feel that that would be an anti-feature -- we should just make the stuff fast, no matter what.</p>



<a name="258040311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/issue%20rust-analyzer%2310492/near/258040311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> divma <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/issue.20rust-analyzer.2310492.html#258040311">(Oct 18 2021 at 14:47)</a>:</h4>
<p>any thought on this issue itself? I think this got offtopic</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
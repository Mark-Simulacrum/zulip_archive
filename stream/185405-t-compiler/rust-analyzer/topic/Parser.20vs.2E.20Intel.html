<html>
<head><meta charset="utf-8"><title>Parser vs. Intel · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Parser.20vs.2E.20Intel.html">Parser vs. Intel</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="255748575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Parser%20vs.%20Intel/near/255748575" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Parser.20vs.2E.20Intel.html#255748575">(Oct 01 2021 at 14:00)</a>:</h4>
<p>Some profiling revealed that we spend several hundred milliseconds on every startup just parsing the enormous generated stdarch files. <a href="https://github.com/rust-lang/stdarch/blob/master/crates/core_arch/src/x86/avx512f.rs">This file</a> in particular is over 50000 lines long, because AVX512 is just an absolutely unhinged instruction set. On my machine, we spend 140ms parsing it, and another 120ms turning it into an ItemTree.</p>
<p>Might make for a good benchmark if someone feels like optimizing the parser!</p>



<a name="255750320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Parser%20vs.%20Intel/near/255750320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Parser.20vs.2E.20Intel.html#255750320">(Oct 01 2021 at 14:11)</a>:</h4>
<p>the <a href="https://github.com/rust-lang/stdarch/blob/master/crates/core_arch/src/arm_shared/neon/generated.rs">Neon generated file</a> is also pretty big at 34K lines</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
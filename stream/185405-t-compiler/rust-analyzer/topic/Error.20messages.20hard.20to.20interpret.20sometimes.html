<html>
<head><meta charset="utf-8"><title>Error messages hard to interpret sometimes · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html">Error messages hard to interpret sometimes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254199157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254199157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emil Gardström <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254199157">(Sep 21 2021 at 12:34)</a>:</h4>
<p>Hi! I've been watching on streams how people new to rust use the tools available to them to try and solve compilation errors. One big thing I've noticed, is that they rely on the error message from when they hover over the red squiggly (in vscode), and get frustrated when they cant figure it out. However, I think in most of these cases, manually running cargo check would point them towards the solution. I dont have any concrete examples right now, but I'm sure you can yourself think of situations like this, where you've needed to run cargo check to get the human formatted error message.</p>
<p>Is there an existing issue for this already or talk about it somewhere?</p>
<p>Would it be possible to somehow hint to the user to use cargo check/clippy/whatever they are using when they hit something like this?</p>



<a name="254199514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254199514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254199514">(Sep 21 2021 at 12:37)</a>:</h4>
<p>No issue AFAIK, I noticed it myself, but I'm not sure it's because we don't show some information, because it's harder to pinpoint the errors in the GUI, or because I didn't pay attention. I don't think including a hint to run <code>cargo check</code> would help. It would be just noise.</p>



<a name="254199573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254199573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254199573">(Sep 21 2021 at 12:37)</a>:</h4>
<p>Why can they figure it out with <code>cargo check</code>, but not the in-editor diagnostics? Because related diagnostics aren't connected?</p>



<a name="254199667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254199667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254199667">(Sep 21 2021 at 12:38)</a>:</h4>
<p>We should, at least today, display basically <em>all</em> the information there is in a diagnostic</p>



<a name="254199711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254199711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254199711">(Sep 21 2021 at 12:38)</a>:</h4>
<p>I can believe that it's harder to piece them together in a GUI though</p>



<a name="254199970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254199970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254199970">(Sep 21 2021 at 12:40)</a>:</h4>
<p>It wouldn't be too hard to add a function that runs the check-on-save command in a terminal, but making that discoverable without adding unhelpful noise seems a bit difficult</p>



<a name="254200150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254200150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emil Gardström <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254200150">(Sep 21 2021 at 12:42)</a>:</h4>
<p>Because the issue is related to something not directly to that squiggly, or the suggestion has been made to show multiple spans etc. Sometimes it can also just be that there's another error that is the real cause, like if you return <code>impl T</code> but return multiple different <code>impl T</code></p>



<a name="254200261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254200261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254200261">(Sep 21 2021 at 12:42)</a>:</h4>
<p>Maybe we could highlight the related parts of the code when hovering/selecting a problem?</p>



<a name="254200296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254200296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254200296">(Sep 21 2021 at 12:43)</a>:</h4>
<p>oh, that's a cool idea</p>



<a name="254200353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254200353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254200353">(Sep 21 2021 at 12:43)</a>:</h4>
<p>Not sure it's possible, though. Or if it's easy.</p>



<a name="254200436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254200436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emil Gardström <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254200436">(Sep 21 2021 at 12:44)</a>:</h4>
<p>Multiple hovers maybe? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> That'd probably be messy though</p>



<a name="254200686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254200686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254200686">(Sep 21 2021 at 12:46)</a>:</h4>
<p><del>There's <a href="https://github.com/microsoft/vscode/issues/55253">https://github.com/microsoft/vscode/issues/55253</a> that seems slightly related and <a href="https://github.com/microsoft/vscode/issues/64566">https://github.com/microsoft/vscode/issues/64566</a>, but that's something else.</del> Ah, I didn't realize linked diagnostics are already available in LSP.</p>



<a name="254201465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254201465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254201465">(Sep 21 2021 at 12:52)</a>:</h4>
<p>Yeah, been thinking about this myself recently. Thoughts:</p>
<ul>
<li>fundamentally, GUI is a much better way to show errors. You can highlight specific parts which are wrong, you can <em>cycle</em> through suggestions, you higlight lifetime reagions, etc.</li>
<li>hover, <code>rustc</code> CLI output is very well optimized. In theory, rustc's snippets infra is just a workaround for an inability to highlight the code directly. In practice though, the CLI experience is very polished. Even if we can do 10x better with GUI in theory, we are 0.1x better in practice today. </li>
<li>there's a tension between detecting errors in the ide and using compiler output</li>
<li>default vscode workflow is suboptimal. It doesn't have a concept of "compiler error". When I code in code, I disable <code>checkOnSave</code>. Instead, I use <strong>Rust Analyzer: Run</strong> , which shows me the errors in the terminal. I feel that's a superior approach, but I don't feel comfortable pushing our users to it, as it is different form VS Code default UX</li>
</ul>
<p>Practically: </p>
<ul>
<li>I think we should emit 80% of most common errors ourselves</li>
<li>For the rest, I think we should just make our persentaiton better. rustc already emits strucured jsons, and vscode already has linked diagnostics, we should make sure we use those as efficiently as possible.</li>
</ul>



<a name="254202223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254202223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254202223">(Sep 21 2021 at 12:58)</a>:</h4>
<p>linked diagnostics (via <code>DiagnosticRelatedInformation</code>) unfortunately aren't very good in terms of UI</p>



<a name="254212444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254212444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254212444">(Sep 21 2021 at 14:07)</a>:</h4>
<p>For what it’s worth, on both Stack Overflow and Discord it’s basically a copy–paste macro to tell people to stop looking at the error inside Visual Studio code; especially if they’re confused by it.￼</p>



<a name="254212789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254212789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254212789">(Sep 21 2021 at 14:08)</a>:</h4>
<blockquote>
<p>Please [edit] your question and paste the exact and entire error that you're getting — that will help us to understand what the problem is so we can help best. Sometimes trying to interpret an error message is tricky and it's actually a different part of the error message that's important. <strong>Please use the message from running the compiler directly, not the message produced by an IDE, which might be trying to interpret the error for you.</strong></p>
</blockquote>



<a name="254212843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254212843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254212843">(Sep 21 2021 at 14:09)</a>:</h4>
<p>Maybe an assist that shows up on errors and shows them in the terminal would help? Might not be super easy to discover though</p>



<a name="254212946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254212946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254212946">(Sep 21 2021 at 14:09)</a>:</h4>
<p>Generally I'm happy to implement any concrete suggestions for better diagnostic mappings</p>



<a name="254213535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Error%20messages%20hard%20to%20interpret%20sometimes/near/254213535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Error.20messages.20hard.20to.20interpret.20sometimes.html#254213535">(Sep 21 2021 at 14:13)</a>:</h4>
<p>On the flip side, I use the in-editor (emacs) errors and when I already know the meaning of an error it's much quicker than reading the full build output.</p>
<p>If there could be a "what?" button on the inline error that then showed the full compiler error (and maybe another "what?" button there that showed the <code>--explain</code> output...), that could help.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
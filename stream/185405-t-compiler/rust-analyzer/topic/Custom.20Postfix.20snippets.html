<html>
<head><meta charset="utf-8"><title>Custom Postfix snippets · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html">Custom Postfix snippets</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="256072938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256072938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256072938">(Oct 04 2021 at 14:59)</a>:</h4>
<p>Small sneak peek of custom (postfix) snippets <a href="/user_uploads/4715/zZS8KQoSr86ljGlJBf9x-YZl/nruByiHaIA.gif">nruByiHaIA.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/zZS8KQoSr86ljGlJBf9x-YZl/nruByiHaIA.gif" title="nruByiHaIA.gif"><img src="/user_uploads/4715/zZS8KQoSr86ljGlJBf9x-YZl/nruByiHaIA.gif"></a></div>



<a name="256073040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256073040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256073040">(Oct 04 2021 at 15:00)</a>:</h4>
<p>Mainly putting that here to potentially collect ideas for this</p>



<a name="256073542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256073542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256073542">(Oct 04 2021 at 15:03)</a>:</h4>
<p>Basically what I'm thinking of currently is, postfix snippets should be able to require Items and Traits to be in scope specified by paths(as with the <code>imports</code> field here), have access to the receiver(in case of a postfix snippet) and tab points($0, $1 etc. forgot the name of these).</p>



<a name="256073659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256073659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256073659">(Oct 04 2021 at 15:03)</a>:</h4>
<p>Assuming we will have type postfix snippets at some point it would probably make sense to have these split on expr and type snippets</p>



<a name="256127437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256127437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256127437">(Oct 04 2021 at 20:28)</a>:</h4>
<p>Okay added both postfix and normal snippets, tabpoints working and <code>$receiver</code> being replaced by the postfix receiver. Form of a snippet is currently(in typescript notation with <code>null | ...</code> being optional):</p>
<div class="codehilite" data-code-language="TypeScript"><pre><span></span><code><span class="kd">interface</span> <span class="nx">UserSnippet</span> <span class="p">{</span>
    <span class="s2">"snippet"</span><span class="o">:</span> <span class="kt">string</span> <span class="o">|</span> <span class="p">[</span><span class="kt">string</span><span class="p">],</span>
    <span class="s2">"description"</span><span class="o">:</span> <span class="kc">null</span> <span class="o">|</span> <span class="kt">string</span> <span class="o">|</span> <span class="p">[</span><span class="kt">string</span><span class="p">],</span>
    <span class="s2">"requires"</span><span class="o">:</span> <span class="kc">null</span> <span class="o">|</span> <span class="kt">string</span> <span class="o">|</span> <span class="p">[</span><span class="kt">string</span><span class="p">],</span>
    <span class="s2">"scope"</span><span class="o">:</span> <span class="kc">null</span> <span class="o">|</span> <span class="s2">"item"</span> <span class="o">|</span> <span class="s2">"expr"</span> <span class="c1">// "expr" | "type" for postfix</span>
<span class="p">}</span>
</code></pre></div>
<p>For <code>snippet</code> and <code>description</code> the array variant just joins all of the strings with a newline(this is similar to how usual vscode snippet definitions work). Might make sense to have <code>description</code> <em>and</em> <code>detail</code> here which render differently.</p>
<p><code>requires</code> is just a bunch of item paths that will be resolved to which we will then try and  find an import path again. That means the path given is not necessarily the import path that will be used, this has the advantage that we will adhere to the selected import prefix. If the item path does not resolve to an item the snippet will be discarded for the current completion attempt, which also has the nice property that a snippet completion doesn't work in a crate if the crate can't see the item but it may work in another crate in the same workspace if the item is visible from there.</p>
<p><code>scope</code> is just a filter for when the snippets may apply(will flesh this part out).</p>
<p>If you got any suggestions, ideas etc feel free to drop them here. Implementation PR <a href="https://github.com/rust-analyzer/rust-analyzer/pull/10458">#10458</a></p>



<a name="256237678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256237678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256237678">(Oct 05 2021 at 12:41)</a>:</h4>
<p>Changed some ideas while writing a feature doc, adoc render -&gt; <a href="https://gist.github.com/Veykril/7a6ff91966beff1abebc9e8e8f16a4bc">https://gist.github.com/Veykril/7a6ff91966beff1abebc9e8e8f16a4bc</a></p>



<a name="256266863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256266863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256266863">(Oct 05 2021 at 15:30)</a>:</h4>
<p>One thing I am thinking about is whether we should allow more than one tab stop</p>



<a name="256267083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256267083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256267083">(Oct 05 2021 at 15:31)</a>:</h4>
<p>I don't see why we should only allow a single one</p>



<a name="256267316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256267316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256267316">(Oct 05 2021 at 15:32)</a>:</h4>
<p>When completing keywords, we currently have several tab-stops (ie, in <code>match</code>) and that causse very practical problems in that tab-stops disable completions. (So for the last month I've been wanting to revert that change, but didn't get to it yet). </p>
<p>More generally, since my IntelliJ days, I've felt like snippet UI with tabs for navigation is pretty bad. The mode of being "in" snippet is very transient and path dependent, the same action behaved differently depending on whether the snippet is active or not</p>



<a name="256267925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256267925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256267925">(Oct 05 2021 at 15:35)</a>:</h4>
<p>So, my ideal UX would be:</p>
<ul>
<li>the cursor is positioned to the right place after expansion</li>
<li>given the cursor placement, we provide navigation facilites regargless of whether you expanded the snippet or typed the thing yourself</li>
</ul>



<a name="256268009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268009">(Oct 05 2021 at 15:36)</a>:</h4>
<p><a href="/user_uploads/4715/kGd1hNdXzTzqM9oUE8BMgoGM/Peek-2021-10-05-18-35.gif">Peek-2021-10-05-18-35.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/kGd1hNdXzTzqM9oUE8BMgoGM/Peek-2021-10-05-18-35.gif" title="Peek-2021-10-05-18-35.gif"><img src="/user_uploads/4715/kGd1hNdXzTzqM9oUE8BMgoGM/Peek-2021-10-05-18-35.gif"></a></div>



<a name="256268153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268153">(Oct 05 2021 at 15:37)</a>:</h4>
<p>^ note how there's no completion, and how there's relatively little feedback about whether the tab will bring me to the next tab stop or whether it'll just tab</p>



<a name="256268192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268192">(Oct 05 2021 at 15:37)</a>:</h4>
<p>huh, that is not the behaviour I observe <a href="/user_uploads/4715/SI-352SSANOcFQw3qKlpWvWE/RZRNdqL8a3.gif">RZRNdqL8a3.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/SI-352SSANOcFQw3qKlpWvWE/RZRNdqL8a3.gif" title="RZRNdqL8a3.gif"><img src="/user_uploads/4715/SI-352SSANOcFQw3qKlpWvWE/RZRNdqL8a3.gif"></a></div>



<a name="256268445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268445">(Oct 05 2021 at 15:38)</a>:</h4>
<p>Do you have <code>"editor.suggest.snippetsPreventQuickSuggestions"</code> in your settings?</p>



<a name="256268494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268494">(Oct 05 2021 at 15:39)</a>:</h4>
<p>I have that set to <code>false</code></p>



<a name="256268551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268551">(Oct 05 2021 at 15:39)</a>:</h4>
<p>So I guess that why it works for me</p>



<a name="256268579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268579">(Oct 05 2021 at 15:39)</a>:</h4>
<p>Yeah,the default is false</p>



<a name="256268601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268601">(Oct 05 2021 at 15:39)</a>:</h4>
<p>No the default is <code>true</code></p>



<a name="256268680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268680">(Oct 05 2021 at 15:40)</a>:</h4>
<p><a href="/user_uploads/4715/kbywiyf1b4RkP4zRpl8u4fV9/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/kbywiyf1b4RkP4zRpl8u4fV9/image.png" title="image.png"><img src="/user_uploads/4715/kbywiyf1b4RkP4zRpl8u4fV9/image.png"></a></div>



<a name="256268696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268696">(Oct 05 2021 at 15:40)</a>:</h4>
<p>Yeah, that's what I wanted to say</p>



<a name="256268724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268724">(Oct 05 2021 at 15:40)</a>:</h4>
<p>Ah okay, ye that makes more sense anyways right</p>



<a name="256268890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268890">(Oct 05 2021 at 15:41)</a>:</h4>
<p>I still don't think the server should disallow more than one tabstop though, this is something the client does and for custom snippets its the user who is in charge of these anyhow</p>



<a name="256268949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256268949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256268949">(Oct 05 2021 at 15:41)</a>:</h4>
<p>I think I had this set to <code>false</code> once, to fix this issue. And then I thought that I shoudl be running with default configs, as majority of the users do, such that I am motivated to fix the problem. So I was runing with this set to default for many months -- I am annoyed each time I complete the keyword, but not enough to get this fixed XD</p>



<a name="256269306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256269306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256269306">(Oct 05 2021 at 15:44)</a>:</h4>
<p>I can see your point in regards to the snippets the server has built-in given the default setting, but I disagree with forbidding multiple tab stops in custom snippets specifically as that is up to the user to manage anyways.</p>



<a name="256269524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256269524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256269524">(Oct 05 2021 at 15:45)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> I guess the right fix here:</p>
<ul>
<li>in the vscode client, snoop the value of <code>snippetsPreventQuickSuggestions</code> config, tell it to the server</li>
<li>in the server, erase all-but-the-first tab-stops from the snippets as a post-processing step unless that option is fixed</li>
</ul>



<a name="256269764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256269764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256269764">(Oct 05 2021 at 15:46)</a>:</h4>
<p>Yeah, I agree that doing something jusb because VS Code is wrong. </p>
<p>I do feel that my overall point about "snippets are poor UX in general" is right, but we need to fix <a href="https://github.com/rust-analyzer/rust-analyzer/issues/7280">https://github.com/rust-analyzer/rust-analyzer/issues/7280</a> before it becomes actionable and verifyiable</p>



<a name="256270110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256270110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256270110">(Oct 05 2021 at 15:49)</a>:</h4>
<p>snippets in emacs have similar problems, they do allow completions but e.g. disable parenthesis matching (smartparens)</p>



<a name="256270321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256270321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256270321">(Oct 05 2021 at 15:50)</a>:</h4>
<p>Is Emacs behavior different between snippets with one tab stop and with multiple?</p>



<a name="256272533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256272533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256272533">(Oct 05 2021 at 16:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Custom.20Postfix.20snippets/near/256269764">said</a>:</p>
<blockquote>
<p>Yeah, I agree that doing something jusb because VS Code is wrong. </p>
<p>I do feel that my overall point about "snippets are poor UX in general" is right, but we need to fix <a href="https://github.com/rust-analyzer/rust-analyzer/issues/7280">https://github.com/rust-analyzer/rust-analyzer/issues/7280</a> before it becomes actionable and verifyiable</p>
</blockquote>
<p>Ye I think it would be better to go with this, that is change builtin snippets to only use one tabstop and nudge users to instead use structural navigation.</p>



<a name="256274856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256274856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256274856">(Oct 05 2021 at 16:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Custom.20Postfix.20snippets/near/256270321">said</a>:</p>
<blockquote>
<p>Is Emacs behavior different between snippets with one tab stop and with multiple?</p>
</blockquote>
<p>I think if you have just one tab stop smartparens doesn't get disabled, yes. (I haven't tried this recently though, so maybe things have improved)</p>



<a name="256279773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256279773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Mcnab <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256279773">(Oct 05 2021 at 16:49)</a>:</h4>
<p>Can we let crates add custom snippets too (e.g. in our Cargo.toml metadata section)</p>



<a name="256280290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256280290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256280290">(Oct 05 2021 at 16:53)</a>:</h4>
<p>That's an idea I had as well in the back of my head. Cargo.toml metadata might work, we could also maybe use tool attributes for this(honestly no idea how they work as there seems to be almost no resources on these)?</p>



<a name="256280825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256280825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Mcnab <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256280825">(Oct 05 2021 at 16:56)</a>:</h4>
<p>Hmm, I'm not sure that tool attributes are the right tool for this job.</p>



<a name="256280948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Custom%20Postfix%20snippets/near/256280948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Custom.20Postfix.20snippets.html#256280948">(Oct 05 2021 at 16:57)</a>:</h4>
<p>Ye probably, cargo metadata does seem like a good spot to put these if we want crates to have this ability</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
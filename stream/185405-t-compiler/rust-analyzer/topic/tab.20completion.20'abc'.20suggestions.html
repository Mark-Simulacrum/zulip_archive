<html>
<head><meta charset="utf-8"><title>tab completion &#x27;abc&#x27; suggestions · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html">tab completion &#x27;abc&#x27; suggestions</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269462223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269462223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269462223">(Jan 26 2022 at 18:53)</a>:</h4>
<p>When I tab complete something (using VSCode), I often will get a list of suggestions that are just based on text suggestions (they have the 'abc' icon next to the suggestion).  This list of completions comes up immediately, without delay.  If I dismiss the tab complete menu and then immediately bring it up again with ctrl+space, the list of suggestions is then what I expect from RA (that is, full of the methods and fields that I expect).  This is not a new issue, but only recently have I been annoyed enough to report it.  Is this a known issue, or has anyone else experienced this?</p>



<a name="269462385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269462385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269462385">(Jan 26 2022 at 18:54)</a>:</h4>
<p>It's a known issue</p>



<a name="269462551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269462551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269462551">(Jan 26 2022 at 18:55)</a>:</h4>
<p>Ah, very good.  ok thanks</p>



<a name="269464332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269464332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269464332">(Jan 26 2022 at 19:05)</a>:</h4>
<p>Do you use copilot?</p>



<a name="269465881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269465881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269465881">(Jan 26 2022 at 19:15)</a>:</h4>
<p>I'm having the same issue and I don't use copilot <span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="269467943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269467943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269467943">(Jan 26 2022 at 19:29)</a>:</h4>
<p>Do you also immediately get text based suggestions or only after a delay?</p>



<a name="269468092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269468092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269468092">(Jan 26 2022 at 19:30)</a>:</h4>
<p>The immediate part made me think of vscodes default <code>"editor.suggest.snippetsPreventQuickSuggestions": true</code> setting which can cause copilot to straight up prevent completions, hence why I asked</p>



<a name="269468629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269468629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269468629">(Jan 26 2022 at 19:34)</a>:</h4>
<p>no, i don't use copilot.  the text-based suggestions come up instantly</p>



<a name="269468722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269468722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269468722">(Jan 26 2022 at 19:34)</a>:</h4>
<p>(generally automatically after i press <code>.</code>)</p>



<a name="269469040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269469040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269469040">(Jan 26 2022 at 19:36)</a>:</h4>
<p>Hmm, can you set the following in your vscode settings, restart the server, do the completion and check the server logs?</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">    </span><span class="nt">"rust-analyzer.server.extraEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"RA_PROFILE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"handle_completion=*"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
</code></pre></div>



<a name="269469104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269469104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269469104">(Jan 26 2022 at 19:36)</a>:</h4>
<p><a href="/user_uploads/4715/LTj3VZHcdReNyYUSPKR0Bm0A/image.png">image.png</a> These logs that is(the tab only exists if there are logs in it)</p>
<div class="message_inline_image"><a href="/user_uploads/4715/LTj3VZHcdReNyYUSPKR0Bm0A/image.png" title="image.png"><img src="/user_uploads/4715/LTj3VZHcdReNyYUSPKR0Bm0A/image.png"></a></div>



<a name="269469137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269469137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269469137">(Jan 26 2022 at 19:37)</a>:</h4>
<p>will do.  this issue is surprisingly hard to reproduce on-demand, but it happens often enough that i'm sure i'll run into it soon enough</p>



<a name="269469230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269469230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269469230">(Jan 26 2022 at 19:37)</a>:</h4>
<p>It's odd that the text based ones happen immediately, they usually appear if we take too long calculating completions but that should cause a noticable delay</p>



<a name="269469334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269469334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269469334">(Jan 26 2022 at 19:38)</a>:</h4>
<p>my mental model might be wrong, but it feels like RA takes a little bit of time to generate the completions, but VS isn't waiting for RA and just shows the text-based completions</p>



<a name="269469449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269469449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269469449">(Jan 26 2022 at 19:39)</a>:</h4>
<p>(i checked my settings and I don't see <code>snippetsPreventQuickSuggestiosn</code> anywhere)</p>



<a name="269469742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269469742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269469742">(Jan 26 2022 at 19:41)</a>:</h4>
<p>fwiw, this behaviour is something I observe quite often when "typing over" the first suggestion popup because I want to narrow the list of candidates</p>



<a name="269470187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470187">(Jan 26 2022 at 19:44)</a>:</h4>
<p>hm, i see a new "Rust Analyzer Language Server Trace" option in the VSCode "Output" tab, but it's empty</p>



<a name="269470245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470245">(Jan 26 2022 at 19:44)</a>:</h4>
<p><code>Trace</code> is the wrong one, you want the non trace one, but as said  it only exists if there have been logging events for it</p>



<a name="269470279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470279">(Jan 26 2022 at 19:45)</a>:</h4>
<p>from a quick check: starting from <code>thing</code> without a <code>.</code>, typing <code>.</code> immediately brings up the correct r-a list of suggestions. Typing on slowly letter by letter narrows it as you'd expect. Typing on quickly shows no list at all. Typing on slowly _and then quickly_ also doesn't show any list either, or shows the VSC list once you get to a few letters.</p>



<a name="269470325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470325">(Jan 26 2022 at 19:45)</a>:</h4>
<p>Ye that problem is known</p>



<a name="269470439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470439">(Jan 26 2022 at 19:46)</a>:</h4>
<p>I don't remember the current state of things for that problem unfortunately</p>



<a name="269470507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470507">(Jan 26 2022 at 19:46)</a>:</h4>
<p>also, if i can capture this problem in a video, would that be useful to the team?</p>



<a name="269470511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470511">(Jan 26 2022 at 19:46)</a>:</h4>
<p>From <code>thing.</code> the VSC list is always there for fast typing - it seems like once it is in that mode the r-a list just doesn't come back (while the VSC list is active)</p>



<a name="269470737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470737">(Jan 26 2022 at 19:48)</a>:</h4>
<p>That sounds odd, though I also have text based suggestions disabled entirely for rust files <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="269470856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470856">(Jan 26 2022 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="222286">Andrew Chin (eminence)</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/tab.20completion.20'abc'.20suggestions/near/269470507">말함</a>:</p>
<blockquote>
<p>also, if i can capture this problem in a video, would that be useful to the team?</p>
</blockquote>
<p>probably not</p>



<a name="269470863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269470863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269470863">(Jan 26 2022 at 19:49)</a>:</h4>
<p><a href="https://github.com/rust-analyzer/rust-analyzer/issues/7560">https://github.com/rust-analyzer/rust-analyzer/issues/7560</a> is the issue for this i think</p>



<a name="269473199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269473199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269473199">(Jan 26 2022 at 20:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300586">Lukas Wirth</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/tab.20completion.20'abc'.20suggestions/near/269467943">said</a>:</p>
<blockquote>
<p>Do you also immediately get text based suggestions or only after a delay?</p>
</blockquote>
<p>There is no delay:<br>
<a href="/user_uploads/4715/nPKz2DLbK5Zg0eN-W72yhkQd/Peek-2022-01-26-23-03.gif">Peek-2022-01-26-23-03.gif</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/nPKz2DLbK5Zg0eN-W72yhkQd/Peek-2022-01-26-23-03.gif" title="Peek-2022-01-26-23-03.gif"><img src="/user_uploads/4715/nPKz2DLbK5Zg0eN-W72yhkQd/Peek-2022-01-26-23-03.gif"></a></div><p>(when RA suggestion show up it's me hitting esc to hide the "abc" suggestions and ^space to show the RA suggestions)</p>



<a name="269476021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269476021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269476021">(Jan 26 2022 at 20:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300586">Lukas Wirth</span> <a href="#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/tab.20completion.20'abc'.20suggestions/near/269469040">said</a>:</p>
<blockquote>
<p>Hmm, can you set the following in your vscode settings, restart the server, do the completion and check the server logs?</p>
<p><div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">    </span><span class="nt">"rust-analyzer.server.extraEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"RA_PROFILE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"handle_completion=*"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>
<p>Even with this setting and after triggering RA siggestions, "Rust Analuzer Language Server" doesn't seem to appear in the output <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="269477220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269477220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269477220">(Jan 26 2022 at 20:30)</a>:</h4>
<p>Ah that might be the wrong format, try <code>handle_completion&gt;10</code> then</p>



<a name="269478066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269478066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269478066">(Jan 26 2022 at 20:36)</a>:</h4>
<p>Yep, that works.</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>some logs, if they help</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>   55ms - handle_completion
       44ms - CompletionContext::new
           33ms - descend_into_macros
               33ms - Semantics::analyze_impl
                   31ms - SourceBinder::to_module_def
                       31ms - crate_def_map:wait
                        0   - crate_def_map:wait (2 calls)
                        0   - relevant_crates (1 calls)
                    0   - crate_def_map:wait (2 calls)
           10ms - CompletionContext::expand_and_fill (1 calls)
            0   - Semantics::analyze_impl (1 calls)
            0   - crate_def_map:wait (1 calls)
       11ms - complete_unqualified_path
           11ms - CompletionContext::process_all_names
               11ms - render_resolution
                   11ms - infer:wait @ test
                0   - crate_def_map:wait (1 calls)
            0   - item::Builder::build (3 calls)
        0   - item::Builder::build (23 calls)
  102ms - handle_completion
       90ms - complete_unqualified_path
           90ms - CompletionContext::process_all_names
                0   - crate_def_map:wait (227 calls)
               64ms - parse_query (33 calls)
                6ms - render_resolution (151 calls)
               20ms - ???
            0   - item::Builder::build (3 calls)
        2ms - CompletionContext::new (1 calls)
        0   - SourceBinder::to_module_def (1 calls)
        7ms - import_on_the_fly (1 calls)
        0   - item::Builder::build (23 calls)
  194ms - handle_completion
       41ms - CompletionContext::new
           34ms - descend_into_macros
               34ms - Semantics::analyze_impl
                   34ms - SourceBinder::to_module_def
                       34ms - crate_def_map:wait
                        0   - crate_def_map:wait (2 calls)
                        0   - relevant_crates (1 calls)
                    0   - crate_def_map:wait (2 calls)
            6ms - CompletionContext::expand_and_fill (1 calls)
            0   - Semantics::analyze_impl (1 calls)
            0   - crate_def_map:wait (1 calls)
       96ms - complete_unqualified_path
           96ms - CompletionContext::process_all_names
               93ms - render_resolution
                   93ms - infer:wait @ test
                    0   - crate_def_map:wait (1 calls)
                    0   - item::Builder::build (1 calls)
                0   - crate_def_map:wait (202 calls)
                2ms - render_resolution (150 calls)
            0   - item::Builder::build (3 calls)
       55ms - import_on_the_fly @ bot
           55ms - import_assets::search_for_imports
               55ms - import_assets::search_for
                   55ms - import_assets::path_applicable_imports
                        9ms - find_path_prefixed (50 calls)
                       36ms - get_name_definition (26 calls)
                        9ms - items_with_name (1 calls)
                    0   - import_assets::scope_definitions (1 calls)
        0   - SourceBinder::to_module_def (1 calls)
        0   - item::Builder::build (23 calls)
  347ms - handle_completion
       43ms - CompletionContext::new
           36ms - descend_into_macros
               36ms - Semantics::analyze_impl
                   36ms - SourceBinder::to_module_def
                       36ms - crate_def_map:wait
                        0   - crate_def_map:wait (2 calls)
                        0   - relevant_crates (1 calls)
                    0   - crate_def_map:wait (2 calls)
            6ms - CompletionContext::expand_and_fill (1 calls)
            0   - Semantics::analyze_impl (1 calls)
            0   - crate_def_map:wait (1 calls)
       91ms - Semantics::analyze_impl
           91ms - infer:wait @ test
            0   - SourceBinder::to_module_def (1 calls)
            0   - crate_def_map:wait (1 calls)
       91ms - iterate_method_candidates
           29ms - trait_solve::wait
               29ms - trait_solve_query @ Ord
                    0   - crate_def_map:wait (1 calls)
                   28ms - impl_datum (14 calls)
           16ms - trait_solve::wait
               16ms - trait_solve_query @ Eq
                    0   - crate_def_map:wait (1 calls)
                   15ms - impl_datum (14 calls)
           18ms - trait_solve::wait
               18ms - trait_solve_query @ PartialOrd
                    0   - crate_def_map:wait (1 calls)
                   18ms - impl_datum (14 calls)
           13ms - trait_solve::wait
               13ms - trait_solve_query @ PartialEq
                    0   - crate_def_map:wait (1 calls)
                   12ms - impl_datum (16 calls)
            0   - crate_def_map:wait (444 calls)
            0   - deref (1 calls)
            0   - generic_params_query (134 calls)
            6ms - render_method (102 calls)
            3ms - trait_solve::wait (32 calls)
      119ms - import_on_the_fly @
          119ms - import_assets::search_for_imports
              119ms - import_assets::search_for
                  119ms - import_assets::trait_applicable_items
                       11ms - items_with_name @ Name: , crate: AssocItemsOnly, assoc items: Some("teloxide_core"), limit: Some(40)
                           11ms - find_items
                                2ms - crate_symbols (1 calls)
                                8ms - query_external_importables (1 calls)
                       92ms - iterate_method_candidates
                           29ms - lang_item_query
                               29ms - crate_lang_items_query
                                   29ms - collect_lang_item (1016 calls)
                                    0   - crate_def_map:wait (3 calls)
                           17ms - trait_solve::wait
                               17ms - trait_solve_query @ Datelike
                                   17ms - lang_item_query
                                       17ms - crate_lang_items_query
                                           17ms - collect_lang_item (635 calls)
                                            0   - crate_def_map:wait (1 calls)
                                    0   - crate_def_map:wait (2 calls)
                           36ms - trait_solve::wait
                               36ms - trait_solve_query @ Read
                                   35ms - lang_item_query
                                       35ms - crate_lang_items_query
                                           35ms - collect_lang_item (484 calls)
                                            0   - crate_def_map:wait (7 calls)
                                    0   - crate_def_map:wait (2 calls)
                                    0   - impl_datum (1 calls)
                            0   - crate_def_map:wait (756 calls)
                            0   - deref (1 calls)
                            0   - find_path_prefixed (2 calls)
                            0   - generic_params_query (290 calls)
                            3ms - trait_solve::wait (60 calls)
                        0   - applicable_inherent_traits (1 calls)
                        0   - deref (2 calls)
                        0   - env_traits (1 calls)
                       15ms - get_name_definition (40 calls)
                    0   - import_assets::scope_definitions (1 calls)
            0   - Semantics::analyze_impl (1 calls)
        0   - Semantics::analyze_impl (1 calls)
        0   - complete_unqualified_path (1 calls)
        0   - crate_def_map:wait (236 calls)
        0   - deref (1 calls)
        0   - find_path_prefixed (3 calls)
        0   - item::Builder::build (18 calls)
        0   - lang_item_query (1 calls)
        0   - trait_solve::wait (3 calls)
</code></pre></div>
</div></div>
<p><del>Though it seems unrelated, because I just haven't seen a suggestions from a 92ms query, but have seen them from a 146ms one.</del></p>



<a name="269717414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/tab%20completion%20%27abc%27%20suggestions/near/269717414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/tab.20completion.20&#x27;abc&#x27;.20suggestions.html#269717414">(Jan 28 2022 at 10:52)</a>:</h4>
<p>Another related issue <a href="https://github.com/rust-analyzer/rust-analyzer/issues/10187">https://github.com/rust-analyzer/rust-analyzer/issues/10187</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
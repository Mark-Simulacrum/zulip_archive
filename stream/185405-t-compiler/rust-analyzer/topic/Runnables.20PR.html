<html>
<head><meta charset="utf-8"><title>Runnables PR · t-compiler/rust-analyzer · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/index.html">t-compiler/rust-analyzer</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html">Runnables PR</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254703632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/254703632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mr Smeet <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#254703632">(Sep 24 2021 at 13:29)</a>:</h4>
<p>Hello,  I am working on a pull request for test and runnables integration.  I want to ask a couple of questions about the code and what I'm doing. <br>
Now i want iterate over files and collect runnable for all level of project. So i correct understand that i need use crate_root  <a href="https://github.com/rust-analyzer/rust-analyzer/pull/5765/commits/6994aa3885be6d983d89bc41f51cf652059c5c96">https://github.com/rust-analyzer/rust-analyzer/pull/5765/commits/6994aa3885be6d983d89bc41f51cf652059c5c96</a>  crates/hir_runnables/src/lib.rs : 16</p>



<a name="254705898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/254705898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#254705898">(Sep 24 2021 at 13:44)</a>:</h4>
<p>If you want to collect runnables from a <em>crate</em>, you want to iterate modules, not files. See the code in analysis-stats, for example.</p>
<p>However, I am not sure if we should be doing that as a part of MVP. It seems better to start with just "project-structure" tests -- getting a list of packages in a workspace and, for each cargo package, the list of cargo targets within. </p>
<p>We can add tests <em>within</em> a single cargo target/crate in a follow up</p>



<a name="254934754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/254934754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mr Smeet <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#254934754">(Sep 26 2021 at 14:19)</a>:</h4>
<p>What difference between   SomeLoc and InFile&lt;Some&gt;?</p>



<a name="254934836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/254934836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mr Smeet <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#254934836">(Sep 26 2021 at 14:20)</a>:</h4>
<p>I think if i create some code related information i should bind it but what correct way for this?</p>



<a name="254935800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/254935800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#254935800">(Sep 26 2021 at 14:35)</a>:</h4>
<p><code>*Loc</code> types are private to hir, they shouldn't be used for any ide functionality. <code>InFile&lt;Some&gt;</code> is some syntactic element in a context of a particualar file, which potentially can be a macro expansion</p>



<a name="254935826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/254935826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#254935826">(Sep 26 2021 at 14:35)</a>:</h4>
<p>Locs are just some private stuff we store to get from numerical item ID to actual stuff which comprises the item</p>



<a name="258005929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/258005929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mr Smeet <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#258005929">(Oct 18 2021 at 10:17)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span>  <br>
Hello, let's clarify the implementation of the runnables as salsa db. <br>
And other questions in pr <a href="https://github.com/rust-analyzer/rust-analyzer/pull/5765">https://github.com/rust-analyzer/rust-analyzer/pull/5765</a></p>



<a name="258006073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/258006073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mr Smeet <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#258006073">(Oct 18 2021 at 10:18)</a>:</h4>
<p>I think in private conversation my arguments were convincing. But still, so that there is no misunderstanding in the course of work on PR</p>



<a name="258006259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/258006259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mr Smeet <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#258006259">(Oct 18 2021 at 10:20)</a>:</h4>
<p>I am now planning to downgrade Semantic, becose now it can not be used in salsa databases</p>



<a name="258840633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/185405-t-compiler/rust-analyzer/topic/Runnables%20PR/near/258840633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mr Smeet <a href="https://zulip-archive.rust-lang.org/stream/185405-t-compiler/rust-analyzer/topic/Runnables.20PR.html#258840633">(Oct 23 2021 at 20:12)</a>:</h4>
<p>Can anyone give me some tips about the purpose of this <a href="https://github.com/rust-analyzer/rust-analyzer/blob/d56c8796d6521cfacb10d31c09fcc246cf511dbd/crates/ide/src/runnables.rs#L132">https://github.com/rust-analyzer/rust-analyzer/blob/d56c8796d6521cfacb10d31c09fcc246cf511dbd/crates/ide/src/runnables.rs#L132</a> alwase call</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
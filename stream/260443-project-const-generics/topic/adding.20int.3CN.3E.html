<html>
<head><meta charset="utf-8"><title>adding int&lt;N&gt; · project-const-generics · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/index.html">project-const-generics</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html">adding int&lt;N&gt;</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272637315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272637315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272637315">(Feb 21 2022 at 03:34)</a>:</h4>
<p>Hello! People are getting restless over the thought of adding <code>int&lt;N&gt;</code> now that C23 is going to have it. <a href="https://github.com/rust-lang/rfcs/pull/2581">https://github.com/rust-lang/rfcs/pull/2581</a> and <span class="user-mention" data-user-id="330161">@Clar Fon</span> suggested that someone open a conversation in your general direction. So, have at thee! Conversation... OPEN!</p>
<p>I suspect the biggest problem they run into is that they require lessthan/morethan expressions to be resoluble.</p>



<a name="272648291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272648291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272648291">(Feb 21 2022 at 06:56)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="215333">@Florian Gilcher</span></p>



<a name="272651512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272651512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272651512">(Feb 21 2022 at 07:41)</a>:</h4>
<p>i'm assuming that <code>(int&lt;4&gt;, int&lt;4&gt;)</code> wouldn't be a u8 -- or more broadly, this would be totally orthogonal to any bitfield support (aside from the niche support you'd expect)</p>



<a name="272652356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272652356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272652356">(Feb 21 2022 at 07:51)</a>:</h4>
<p>Maybe tuples? But yeah I would be assuming that we would have to work out the story for how they work at all first.</p>



<a name="272653017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272653017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272653017">(Feb 21 2022 at 07:59)</a>:</h4>
<p>On that note, can we skip the <code>From</code> thing with size conversions for now, too?</p>



<a name="272653244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272653244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272653244">(Feb 21 2022 at 08:01)</a>:</h4>
<p>I mean, we can already do something like it via <code>where [(); assert!(N &lt; M)]</code>, but we def don't want to stabilize it</p>



<a name="272655582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272655582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272655582">(Feb 21 2022 at 08:28)</a>:</h4>
<p>Hmm, I think uint&lt;1..=7&gt; has to have a conversion into i8.</p>



<a name="272657315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272657315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272657315">(Feb 21 2022 at 08:44)</a>:</h4>
<p>Maybe if <code>as</code> works on them we could get away without the relevant From/Into impls.</p>



<a name="272670418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272670418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272670418">(Feb 21 2022 at 10:38)</a>:</h4>
<p>uint&lt;0&gt; should also convert into i8...uint&lt;0&gt; would definitely be handy for some things, such as representing 0-bit signals for languages like verilog/vhdl</p>



<a name="272675356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272675356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272675356">(Feb 21 2022 at 11:24)</a>:</h4>
<p>Hold up, ranged types aren't on the table here, are they? We're just talking about making the bitsize generic for now</p>



<a name="272675752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272675752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272675752">(Feb 21 2022 at 11:29)</a>:</h4>
<p>In either case: I think as an even smaller MVP we could add just the type and make the regular int types be type aliases of it. This would get us the advantage of one impl for all unsigned/signed int types but not require any fancy generic from impls. We'd simply keep the indidvidual explicit ones in libstd</p>



<a name="272675812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272675812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272675812">(Feb 21 2022 at 11:30)</a>:</h4>
<p>Once that works without a breaking change or other problems, we can start experimenting with other bit sizes</p>



<a name="272725344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272725344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272725344">(Feb 21 2022 at 19:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/260443-project-const-generics/topic/adding.20int.3CN.3E/near/272675356">said</a>:</p>
<blockquote>
<p>Hold up, ranged types aren't on the table here, are they? We're just talking about making the bitsize generic for now</p>
</blockquote>
<p>Yeah I meant "<code>uint&lt;1&gt;</code> through <code>uint&lt;7&gt;</code>, inclusive"</p>



<a name="272913564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272913564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272913564">(Feb 23 2022 at 07:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/260443-project-const-generics/topic/adding.20int.3CN.3E/near/272675752">said</a>:</p>
<blockquote>
<p>In either case: I think as an even smaller MVP we could add just the type and make the regular int types be type aliases of it.</p>
</blockquote>
<p>How would this work for stuff like <code>usize</code>/<code>isize</code> which are distinct types but the same size as other integer types? or should they just be not included in this at all</p>



<a name="272913783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272913783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272913783">(Feb 23 2022 at 07:42)</a>:</h4>
<p>imho u/isize are just not included</p>



<a name="272919075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272919075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272919075">(Feb 23 2022 at 08:49)</a>:</h4>
<p>Yea, they are too special for inclusion in this, but maybe we can figure something out by making <code>i</code> and <code>u</code> be type aliases themselves: <code>type u&lt;const SIZE: u128&gt; = u_inner&lt;0..SIZE&gt;;</code> and making <code>usize</code> use a marker type on <code>u_inner</code> instead of a range.</p>



<a name="272920752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272920752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272920752">(Feb 23 2022 at 09:04)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">IntBits</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Bits</span><span class="p">(</span><span class="kt">usize</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">PtrSize</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">IntKind</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">TwosComplement</span><span class="p">,</span><span class="w"> </span><span class="c1">// a signed integer</span>
<span class="w">    </span><span class="n">Modular</span><span class="p">,</span><span class="w"> </span><span class="c1">// an unsigned integer</span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[lang = </span><span class="s">"int"</span><span class="cp">]</span><span class="w"></span>
<span class="cp">#[repr(int(kind = Kind, bits = Bits))]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Int</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">Kind</span>: <span class="nc">IntKind</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Bits</span>: <span class="nc">IntBits</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="nc">uint</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">Modular</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">Bits</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="nc">sint</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">TwosComplement</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">Bits</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">Modular</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">PtrSize</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">isize</span> <span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">TwosComplement</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">PtrSize</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="n">uint</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">i8</span> <span class="o">=</span><span class="w"> </span><span class="n">sint</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">u16</span> <span class="o">=</span><span class="w"> </span><span class="n">uint</span><span class="o">&lt;</span><span class="mi">16</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">i16</span> <span class="o">=</span><span class="w"> </span><span class="n">sint</span><span class="o">&lt;</span><span class="mi">16</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="c1">// ...</span>
</code></pre></div>



<a name="272928792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272928792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272928792">(Feb 23 2022 at 10:21)</a>:</h4>
<p>Yesss! Perfect</p>



<a name="272949411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272949411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272949411">(Feb 23 2022 at 13:41)</a>:</h4>
<p>I am not a huge fan of arbitrary precision integers despite using them everyday writing SystemVerilog.</p>



<a name="272949500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272949500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272949500">(Feb 23 2022 at 13:42)</a>:</h4>
<p>I think it provides too little value for its massive complexity.</p>



<a name="272950010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272950010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272950010">(Feb 23 2022 at 13:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="229517">Jacob Lifshay</span> <a href="#narrow/stream/260443-project-const-generics/topic/adding.20int.3CN.3E/near/272920752">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">IntBits</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Bits</span><span class="p">(</span><span class="kt">usize</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">PtrSize</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">enum</span> <span class="nc">IntKind</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">TwosComplement</span><span class="p">,</span><span class="w"> </span><span class="c1">// a signed integer</span>
<span class="w">    </span><span class="n">Modular</span><span class="p">,</span><span class="w"> </span><span class="c1">// an unsigned integer</span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[lang = </span><span class="s">"int"</span><span class="cp">]</span><span class="w"></span>
<span class="cp">#[repr(int(kind = Kind, bits = Bits))]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Int</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">Kind</span>: <span class="nc">IntKind</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Bits</span>: <span class="nc">IntBits</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="nc">uint</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">Modular</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">Bits</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="nc">sint</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">TwosComplement</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">Bits</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">Modular</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">PtrSize</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">isize</span> <span class="o">=</span><span class="w"> </span><span class="n">Int</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="n">IntKind</span>::<span class="n">TwosComplement</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">IntBits</span>::<span class="n">PtrSize</span><span class="w"> </span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="n">uint</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">i8</span> <span class="o">=</span><span class="w"> </span><span class="n">sint</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">u16</span> <span class="o">=</span><span class="w"> </span><span class="n">uint</span><span class="o">&lt;</span><span class="mi">16</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">type</span> <span class="kt">i16</span> <span class="o">=</span><span class="w"> </span><span class="n">sint</span><span class="o">&lt;</span><span class="mi">16</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="c1">// ...</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Alas, the types still need to have their names made available by the compiler in every module.</p>



<a name="272950434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272950434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272950434">(Feb 23 2022 at 13:49)</a>:</h4>
<p>Would the prelude be enough for that?</p>



<a name="272950842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272950842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272950842">(Feb 23 2022 at 13:52)</a>:</h4>
<p>No, since you can name them on stable even with <code>#![no_implicit_prelude]</code>.</p>



<a name="272975788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272975788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272975788">(Feb 23 2022 at 16:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span> <a href="#narrow/stream/260443-project-const-generics/topic/adding.20int.3CN.3E/near/272949500">said</a>:</p>
<blockquote>
<p>I think it provides too little value for its massive complexity.</p>
</blockquote>
<p>unfortunately it has turned out that they would be very valuable for certain interfaces.</p>



<a name="272984223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272984223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272984223">(Feb 23 2022 at 17:41)</a>:</h4>
<blockquote>
<p>No, since you can name them on stable even with <code>#![no_implicit_prelude]</code>.</p>
</blockquote>
<p>well, what about a separate super implicit prelude?</p>



<a name="272984493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/272984493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#272984493">(Feb 23 2022 at 17:43)</a>:</h4>
<p>maybe something like <code>#[rustc_always_visible]</code>?</p>



<a name="273289009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/adding%20int%3CN%3E/near/273289009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/adding.20int.3CN.3E.html#273289009">(Feb 25 2022 at 21:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span> <a href="#narrow/stream/260443-project-const-generics/topic/adding.20int.3CN.3E/near/272949500">said</a>:</p>
<blockquote>
<p>I think it provides too little value for its massive complexity.</p>
</blockquote>
<p>also I am curious as to where exactly, in your opinion, the complexity lies.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>`min_generic_const_exprs` · project-const-generics · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/index.html">project-const-generics</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html">`min_generic_const_exprs`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267583686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267583686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267583686">(Jan 11 2022 at 13:55)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> <span class="user-group-mention" data-user-group-id="3805">@project-const-generics</span> and anyone else reading this</p>
<p>after recently talking about it with <span class="user-mention" data-user-id="326176">@Boxy [she/her]</span>, here's a somewhat rough draft for an mvp of generic const exprs. Please take a look at it and give feedback on this: <a href="https://hackmd.io/utjHsFL8SWSu98kYfF99uQ">https://hackmd.io/utjHsFL8SWSu98kYfF99uQ</a></p>
<p>If you have any questions, suggestions or whatever, feel free to post these here. I am also interested in case you want to talk or chat about this in sync.</p>



<a name="267584099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267584099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267584099">(Jan 11 2022 at 13:58)</a>:</h4>
<p>the reason that I've started to consider this is that getting full <code>generic_const_exprs</code> ready for stabilization feels dauntingly difficult to me</p>



<a name="267613998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267613998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dominik Stolz <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267613998">(Jan 11 2022 at 17:15)</a>:</h4>
<p>Hey, I don't quite understand why determining which substs are used in an anon const is hard. Could you maybe give an example? (please excuse my ignorance, I'm only starting to get into rustc <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>)</p>



<a name="267616059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267616059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267616059">(Jan 11 2022 at 17:29)</a>:</h4>
<p><span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> fun read. I actually gained lifetime from reading this instead of it having taken time. I'm all for the MVP, as it seems easy to understand without any downsides. Its fully forward compatible to any scheme that was discussed, right?</p>



<a name="267616459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267616459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267616459">(Jan 11 2022 at 17:32)</a>:</h4>
<blockquote>
<p>I don't quite understand why determining which substs are used in an anon const is hard.</p>
</blockquote>
<p>I think the problem is that you can use a generic param T without mentioning it: by using another generic param U that has a where bound that mentions T. Now you need to look at the where bounds to find the set of generic params. The where bounds could contain the very constant you are currently checking. Now you may end up trying to look into that</p>



<a name="267630822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267630822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267630822">(Jan 11 2022 at 19:13)</a>:</h4>
<p>Yeah I think the proposed solution is forwards compatible with whatever we want to do in the future <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> cant think of anything that it would disallow rn and couldn't think of anything when we wrote that.</p>



<a name="267630868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267630868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267630868">(Jan 11 2022 at 19:13)</a>:</h4>
<p><code>const&lt;N&gt; { N + 1 }</code> looks like an inline const to me.</p>



<a name="267630964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267630964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267630964">(Jan 11 2022 at 19:14)</a>:</h4>
<p>But inline const actually could safely reference generic params (not currently, but I am preparing a PR to allow it)</p>



<a name="267630993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267630993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267630993">(Jan 11 2022 at 19:14)</a>:</h4>
<p>Yeah its basically an inline const with what generics it uses explicitly mentioned</p>



<a name="267631081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267631081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267631081">(Jan 11 2022 at 19:15)</a>:</h4>
<p>maybe we have a different syntax or something i dont think its hugely important exactly _What_ the syntax is for purposes of getting <code>min_generic_const_exprs</code> done</p>



<a name="267640925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267640925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jknodt <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267640925">(Jan 11 2022 at 20:32)</a>:</h4>
<p>The syntax with <code>&lt;() as AddOne&lt;N&gt;&gt;::Added</code> is really confusing to me, and I think integrating crates with each other using that kind of syntax would be painful. I also am a bit lacking in why there's an additional <code>const&lt;N&gt; where [...] { ... }</code> syntax but I guess that's part of the bikeshedding. I'm worried that with more complex syntax or requiring additional structs it might come out like type soup, but I'm excited for this feature!</p>



<a name="267641026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267641026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267641026">(Jan 11 2022 at 20:33)</a>:</h4>
<p>should have made this a bit clearer <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> I don't think we ever want <code>&lt;() as AddOne&lt;N&gt;&gt;::Added</code>, we just wanted an example saying that both assoc consts and free named constants will work</p>



<a name="267641068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267641068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267641068">(Jan 11 2022 at 20:33)</a>:</h4>
<p>probably replace that with <code>&lt;Self as Encodable&gt;::SIZE</code> or something</p>



<a name="267641183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267641183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267641183">(Jan 11 2022 at 20:34)</a>:</h4>
<p><code>const&lt;N&gt; where ...</code> is some bikeshedable placeholder if we want to avoid named constants while still not implicitly using any parent generics</p>



<a name="267641228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267641228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267641228">(Jan 11 2022 at 20:35)</a>:</h4>
<p>i don't know whether we want something like that or just actually push for full <code>generic_const_exprs</code>, no matter how hard that might be</p>



<a name="267641421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267641421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267641421">(Jan 11 2022 at 20:36)</a>:</h4>
<p>considering that the only restrictions will by syntactic, e.g. going from <code>min_generic_const_exprs</code> to <code>generic_const_exprs</code> won't allow any new apis. it will just improve the experience of writing them (by a lot)</p>



<a name="267673993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267673993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jknodt <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267673993">(Jan 12 2022 at 02:02)</a>:</h4>
<p>I'm curious, what's the general use case for <code>generic_const_exprs</code>? I'm curious also about reading them as well, especially a large library that uses the feature</p>



<a name="267688133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267688133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267688133">(Jan 12 2022 at 06:57)</a>:</h4>
<p>I've wanted it in a few places, mostly the ability to use generic <code>size_of::&lt;T&gt;()</code> in array bounds, so I don't need to allocate a statically known amount of memory on the heap.</p>



<a name="267692350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267692350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267692350">(Jan 12 2022 at 08:09)</a>:</h4>
<p>i can think of three main usecases rn</p>
<ul>
<li>generic utility functions, mostly for arrays:</li>
</ul>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">value</span>: <span class="nc">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="p">[</span><span class="n">T</span><span class="p">;</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">append</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">M</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">other</span>: <span class="p">[</span><span class="n">T</span><span class="p">;</span><span class="w"> </span><span class="n">M</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="p">[</span><span class="n">T</span><span class="p">;</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">M</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li>changing the length of arrays in your own generic code, e.g using <code>[u8; size_of::&lt;T&gt;()]</code> or something like that. Often using an associated constants, e.g. <a href="https://docs.rs/odht/0.3.1/odht/trait.Config.html#associatedtype.EncodedKey">https://docs.rs/odht/0.3.1/odht/trait.Config.html#associatedtype.EncodedKey</a> should just be <code>const KEY_LENGTH: usize</code>.</li>
<li>in where clauses, e.g. restrict stuff to not be <code>0</code> or to be coprime (needed for some crypto algos afaik). We will see how that will work</li>
</ul>



<a name="267693895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267693895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267693895">(Jan 12 2022 at 08:29)</a>:</h4>
<p>portable-simd wants it for bitmasks: <code>[u8; (N + 7) / 8]</code> for storage sufficient for <code>N</code> bits.</p>



<a name="267694078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267694078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267694078">(Jan 12 2022 at 08:31)</a>:</h4>
<p>it's also used for preprocessing const swizzles (cuz llvm's <code>shuffle</code> instruction requires the swizzle pattern to be const).</p>



<a name="267727034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267727034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jknodt <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267727034">(Jan 12 2022 at 13:55)</a>:</h4>
<p>interesting, so for those use cases it seems it wouldn't be pervasive, so it might be mostly across one function?</p>



<a name="267727477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267727477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267727477">(Jan 12 2022 at 13:59)</a>:</h4>
<p>what exactly do you mean with "pervasive" here? something like this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">uses_generic_fn_in_generic_context</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="p">(</span><span class="n">arr</span>: <span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="n">N</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">arr</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// do you consider this to be pervasive because the `N + 1` of `push` has to unify with a different `N + 1`?</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="267781064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267781064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jknodt <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267781064">(Jan 12 2022 at 20:25)</a>:</h4>
<p>I think if it's implemented in trait definitions or structs, the same expression would need to be repeated across a lot of different instances. For a single function, it's less painful to have something like the other struct with associated consts. I'm not really thinking about it from an implementation perspective, but from a user/reader one</p>



<a name="267781101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267781101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jknodt <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267781101">(Jan 12 2022 at 20:25)</a>:</h4>
<p>I might be totally off-track tho, so if I'm not making any sense feel free to disregard</p>



<a name="267832840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267832840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267832840">(Jan 13 2022 at 07:32)</a>:</h4>
<p>while i don't know how often that will happen, i do see it being really annoying for complex constants like <code>ADD::&lt;MUL::&lt;N, 2&gt;, MUL::&lt;M, 4&gt;&gt;</code></p>



<a name="267832853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267832853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267832853">(Jan 13 2022 at 07:32)</a>:</h4>
<p>if you have to copy that across multiple signatures</p>



<a name="267833023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267833023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267833023">(Jan 13 2022 at 07:35)</a>:</h4>
<p>so having transparent consts would help with that e.g. add</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[transparent_const]</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="n">MY_DATA_LENGTH</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">M</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ADD</span>::<span class="o">&lt;</span><span class="n">MUL</span>::<span class="o">&lt;</span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">MUL</span>::<span class="o">&lt;</span><span class="n">M</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>but we do need a way to declare consts as transparent on stable, potentially right from the start <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> we could also wait for complaints and work on it without this in mind for now, considering a solution exists, even if it isn't completely clear how it should look</p>



<a name="267916674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267916674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267916674">(Jan 13 2022 at 19:15)</a>:</h4>
<p>Generic constants woooo</p>



<a name="267920272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267920272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267920272">(Jan 13 2022 at 19:44)</a>:</h4>
<p>What does "transparent" mean here?</p>



<a name="267921183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/267921183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#267921183">(Jan 13 2022 at 19:51)</a>:</h4>
<p>Like "implementation is public API", that compiler can assume that <code>[(); MY_DATA_SIZE&lt;3, 5&gt;]</code> is the same type as <code>[(); ADD::&lt;MUL::&lt;3, 2&gt;, MUL::&lt;5, 4&gt;&gt;]</code>, right?</p>



<a name="268264550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/260443-project-const-generics/topic/%60min_generic_const_exprs%60/near/268264550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/260443-project-const-generics/topic/.60min_generic_const_exprs.60.html#268264550">(Jan 17 2022 at 12:34)</a>:</h4>
<p>wrote a less in depth (but hopefully better organized) blogpost about this together with <span class="user-mention" data-user-id="326176">@Boxy [she/her]</span> : <a href="https://lcnr.de/blog/generic-const-expressions/">https://lcnr.de/blog/generic-const-expressions/</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>I-prioritize #73537 cannot create local mono-item for DefId · t-compiler/wg-prioritization · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/index.html">t-compiler/wg-prioritization</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html">I-prioritize #73537 cannot create local mono-item for DefId</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="201472613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201472613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201472613">(Jun 20 2020 at 10:48)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> issue <a href="https://github.com/rust-lang/rust/issues/73537">#73537</a> has been requested for prioritization.</p>



<a name="201472734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201472734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201472734">(Jun 20 2020 at 10:52)</a>:</h4>
<p>Pinged cleanup</p>



<a name="201882469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201882469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201882469">(Jun 24 2020 at 18:02)</a>:</h4>
<p>this one is pending, so bumping it up</p>



<a name="201887220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887220">(Jun 24 2020 at 18:42)</a>:</h4>
<p>if I understand what's going on here properly seems at least <code>P-high</code></p>



<a name="201887232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887232">(Jun 24 2020 at 18:43)</a>:</h4>
<p>or even <code>P-critical</code></p>



<a name="201887275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887275">(Jun 24 2020 at 18:43)</a>:</h4>
<p>well I've said at least <code>P-high</code> :)</p>



<a name="201887276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887276" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887276">(Jun 24 2020 at 18:43)</a>:</h4>
<p>We definitely need an MCVE IMO</p>



<a name="201887405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887405" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887405">(Jun 24 2020 at 18:44)</a>:</h4>
<p>Let's cc an expert for monomorphization?</p>



<a name="201887449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887449">(Jun 24 2020 at 18:44)</a>:</h4>
<p>but it seems like it was working code</p>



<a name="201887463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887463">(Jun 24 2020 at 18:44)</a>:</h4>
<p><a href="https://github.com/constellation-rs/amadeus/commit/5dd9081fb2f5ad1bc45e79c60a5ece02eb66d800">https://github.com/constellation-rs/amadeus/commit/5dd9081fb2f5ad1bc45e79c60a5ece02eb66d800</a></p>



<a name="201887469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887469">(Jun 24 2020 at 18:44)</a>:</h4>
<p>this fixes the ICE</p>



<a name="201887496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887496">(Jun 24 2020 at 18:44)</a>:</h4>
<p>well I meant, the other way around</p>



<a name="201887526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201887526" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201887526">(Jun 24 2020 at 18:45)</a>:</h4>
<p>adding inline always fixes the ICE</p>



<a name="201888627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201888627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201888627">(Jun 24 2020 at 18:53)</a>:</h4>
<p>Hm, also think <code>P-high</code> or <code>P-critical</code> here</p>



<a name="201888818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201888818" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201888818">(Jun 24 2020 at 18:55)</a>:</h4>
<p>I personally expect <code>tcx.is_reachable_non_generic(def_id)</code> to be incorrect, which would mean that a hashmap was built incorrectly, which is where I don't know how to proceed further <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span></p>



<a name="201888991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201888991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201888991">(Jun 24 2020 at 18:56)</a>:</h4>
<p><code>CloundfrontRow::from_line</code> is monomorphic, so <code>tcx.is_reachable_non_generic(def_id)</code> should return <code>true</code> here afaik.</p>



<a name="201889226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201889226" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201889226">(Jun 24 2020 at 18:58)</a>:</h4>
<p>I wonder when exactly this worked to label the regression accordingly</p>



<a name="201889330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201889330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201889330">(Jun 24 2020 at 18:59)</a>:</h4>
<p>I think I'd label as <code>P-critical</code> for now, to raise awareness</p>



<a name="201892841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2373537%20cannot%20create%20local%20mono-item%20for%20DefId/near/201892841" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2373537.20cannot.20create.20local.20mono-item.20for.20DefId.html#201892841">(Jun 24 2020 at 19:31)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/73537">#73537</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
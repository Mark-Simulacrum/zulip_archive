<html>
<head><meta charset="utf-8"><title>Possible deadlock in reqwest · t-compiler/wg-prioritization · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/index.html">t-compiler/wg-prioritization</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html">Possible deadlock in reqwest</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="198882716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198882716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198882716">(May 27 2020 at 12:20)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> I filed <a href="https://github.com/seanmonstar/reqwest/issues/926">https://github.com/seanmonstar/reqwest/issues/926</a> for the possible deadlock issue we were seeing the last couple of days</p>



<a name="198882754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198882754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198882754">(May 27 2020 at 12:21)</a>:</h4>
<p>Actually, let me update the ticket to point to the code on that specific commit so it doesn't get out of date if you add in new changes</p>



<a name="198885005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198885005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198885005">(May 27 2020 at 12:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116114">@Paul Faria</span> maybe a better idea is if I create a different branch and we point them to that one or if you just fork it and point to that</p>



<a name="198885037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198885037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198885037">(May 27 2020 at 12:45)</a>:</h4>
<p>whatever you prefer but I guess it would be easier to just give them a branch and this one is going to diverge for sure :)</p>



<a name="198886715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198886715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198886715">(May 27 2020 at 13:01)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="196385" href="/#narrow/stream/196385-t-compiler.2Fwg-rustc-dev-guide/topic/Possible.20deadlock.20in.20reqwest">#t-compiler/wg-rustc-dev-guide &gt; Possible deadlock in reqwest</a> by <span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span></p>



<a name="198886778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198886778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198886778">(May 27 2020 at 13:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116114">@Paul Faria</span> moved the discussion here, because this is really about prioritization</p>



<a name="198886880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198886880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198886880">(May 27 2020 at 13:02)</a>:</h4>
<p>wanted to point out that the issue says <code>Wait until you see an Empty</code>, that may not be true at the point in future someone runs this code because the query may return something :)</p>



<a name="198888958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198888958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198888958">(May 27 2020 at 13:20)</a>:</h4>
<p>Oh, what should the instructions say then?</p>



<a name="198889146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198889146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198889146">(May 27 2020 at 13:22)</a>:</h4>
<div class="codehilite"><pre><span></span><code>3. [PR&#39;s waiting on libs-impl](https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-team+label%3Alibs-impl)
    - Explicitly nominate any that you think may be able to be resolved *quickly* in triage meeting.

### Issues

Empty
</code></pre></div>



<a name="198889157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198889157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198889157">(May 27 2020 at 13:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116114">@Paul Faria</span> there is where this gets stuck</p>



<a name="198889175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198889175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198889175">(May 27 2020 at 13:22)</a>:</h4>
<p>instead of empty, I'd say <code>.*</code> <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="198889208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198889208" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198889208">(May 27 2020 at 13:23)</a>:</h4>
<p>So "if it stops outputting anything for over a minute"?</p>



<a name="198889261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198889261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198889261">(May 27 2020 at 13:23)</a>:</h4>
<p>but you can just mention that it gets stuck after printing section <code>3. [PR's waiting on libs-impl](https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-team+label%3Alibs-impl)</code></p>



<a name="198889364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198889364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198889364">(May 27 2020 at 13:24)</a>:</h4>
<p>also, let me know if you can create a branch with this or if should I to make things a bit simpler</p>



<a name="198918553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198918553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198918553">(May 27 2020 at 16:41)</a>:</h4>
<p><a href="https://github.com/seanmonstar/reqwest/issues/926#issuecomment-634789281">https://github.com/seanmonstar/reqwest/issues/926#issuecomment-634789281</a></p>



<a name="198918555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198918555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198918555">(May 27 2020 at 16:41)</a>:</h4>
<p>updated a bit the thread</p>



<a name="198918580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198918580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198918580">(May 27 2020 at 16:41)</a>:</h4>
<p>I could try to see what conditions are threads waiting on</p>



<a name="198918599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/Possible%20deadlock%20in%20reqwest/near/198918599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/227806-t-compiler/wg-prioritization/topic/Possible.20deadlock.20in.20reqwest.html#198918599">(May 27 2020 at 16:41)</a>:</h4>
<p>but oh man, takes time and unsure how much I want to spend on this :P</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>I-prioritize #71861 vec macro into_boxed codegen regression · t-compiler/wg-prioritization · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/index.html">t-compiler/wg-prioritization</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html">I-prioritize #71861 vec macro into_boxed codegen regression</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="196123341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196123341" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196123341">(May 03 2020 at 21:07)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> issue <a href="https://github.com/rust-lang/rust/issues/71861" title="https://github.com/rust-lang/rust/issues/71861">#71861</a> has been requested for prioritization.</p>



<a name="196242241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196242241" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196242241">(May 04 2020 at 21:28)</a>:</h4>
<p>hmmm I wonder how bad should we consider this one</p>



<a name="196242350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196242350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196242350">(May 04 2020 at 21:29)</a>:</h4>
<p>in particular I guess it would be nice to see how bad some real world code would perform because of this issue</p>



<a name="196242432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196242432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196242432">(May 04 2020 at 21:30)</a>:</h4>
<p>with the given information I'd say <code>P-high</code> at least :)</p>



<a name="196242571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196242571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196242571">(May 04 2020 at 21:31)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> this is the only one missing prioritization right now :)</p>



<a name="196273358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196273358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196273358">(May 05 2020 at 06:58)</a>:</h4>
<p>It seems like the kind of issues that don’t only appear specifically with <code>vec![0; n].into_boxed_slice()</code>, right?</p>



<a name="196273405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196273405" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196273405">(May 05 2020 at 06:59)</a>:</h4>
<p>I’d also say <code>P-high</code></p>



<a name="196274439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196274439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> o0Ignition0o - Jeremy Lempereur <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196274439">(May 05 2020 at 07:16)</a>:</h4>
<p>P-High sounds good to me as well!</p>



<a name="196294555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196294555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196294555">(May 05 2020 at 11:21)</a>:</h4>
<p><code>P-high</code> for now then if someone feels it should have a different priority we can discuss here :)</p>



<a name="196294670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196294670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196294670">(May 05 2020 at 11:22)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/71861" title="https://github.com/rust-lang/rust/issues/71861">#71861</a>'s prioritization request has been removed.</p>



<a name="196307563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196307563" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196307563">(May 05 2020 at 13:30)</a>:</h4>
<p>I'm ok with <code>P-high</code> but I think personally this is more of a <code>P-medium</code> issue. As far as I can tell, nothing is actually broken by this, it's just less efficient. If this was preventing somebody from using Rust on a embedded device or something, then I'd say <code>P-high</code> but as it is, it just seems like an optimization issue. We have lots of those <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="196307691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196307691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196307691">(May 05 2020 at 13:31)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> completely agree</p>



<a name="196307749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196307749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196307749">(May 05 2020 at 13:32)</a>:</h4>
<p>but a performance issue in my opinion could totally be even <code>P-critical</code></p>



<a name="196307802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196307802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196307802">(May 05 2020 at 13:32)</a>:</h4>
<p>imagine a <code>fn main() { println!("hi"); }</code> program taking a minute to execute, I'd say that's <code>P-critical</code></p>



<a name="196307859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196307859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196307859">(May 05 2020 at 13:33)</a>:</h4>
<p>that's why I've mentioned, I guess it depends on how bad is the regression on real world cases</p>



<a name="196307881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196307881" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196307881">(May 05 2020 at 13:33)</a>:</h4>
<p>should we ask for that? should we ping cleanup crew to find that out?</p>



<a name="196307954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196307954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196307954">(May 05 2020 at 13:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span> <a href="#narrow/stream/227806-t-compiler.2Fwg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression/near/196307802" title="#narrow/stream/227806-t-compiler.2Fwg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression/near/196307802">said</a>:</p>
<blockquote>
<p>imagine a <code>fn main() { println!("hi"); }</code> program taking a minute to execute, I'd say that's <code>P-critical</code></p>
</blockquote>
<p>but in particular also, I'd like to know if you <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> agree with me on this thing :)</p>



<a name="196308077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196308077" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196308077">(May 05 2020 at 13:35)</a>:</h4>
<p>Yeah, I'd agree with that!</p>



<a name="196308119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196308119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196308119">(May 05 2020 at 13:35)</a>:</h4>
<p>Having read through the <del>URLO</del> IRLO post, I don't think that's the case though <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="196308300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196308300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196308300">(May 05 2020 at 13:37)</a>:</h4>
<p>I think, to your point, we need to also consider how important the code in question is. In any given release, we're going to regress some things and improve some other things. For most of that code, it doesn't really matter as long as it's not egregious.</p>



<a name="196308501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196308501" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196308501">(May 05 2020 at 13:38)</a>:</h4>
<p>This doesn't feel like a critical part of the std lib where the difference in reported code size matters.</p>



<a name="196308534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196308534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196308534">(May 05 2020 at 13:38)</a>:</h4>
<p>As far as I can tell, nobody is actually complaining that the performance is bad, just that the code size is large.</p>



<a name="196309293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196309293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196309293">(May 05 2020 at 13:45)</a>:</h4>
<p>Any way, it seems that we're mostly on the same page. I think in the absence of evidence that this is causing a performance issue, I would lean toward <code>P-medium</code>.</p>



<a name="196309948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196309948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196309948">(May 05 2020 at 13:51)</a>:</h4>
<p>agreed <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="196309953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize%20%2371861%20vec%20macro%20into_boxed%20codegen%20regression/near/196309953" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/227806-t-compiler/wg-prioritization/topic/I-prioritize.20.2371861.20vec.20macro.20into_boxed.20codegen.20regression.html#196309953">(May 05 2020 at 13:51)</a>:</h4>
<p>let's make it <code>P-medium</code></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
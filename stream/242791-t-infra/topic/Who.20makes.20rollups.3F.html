<html>
<head><meta charset="utf-8"><title>Who makes rollups? · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html">Who makes rollups?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="215129956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215129956" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215129956">(Oct 30 2020 at 18:01)</a>:</h4>
<p>Not sure where to ask this question. But I figured people here will know: Is a specific team (release?) responsible for making all rollups? Is there a list of people on some rotation for this? Or is it more a 'whoever has time for it' thing?</p>



<a name="215130228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130228">(Oct 30 2020 at 18:03)</a>:</h4>
<p>There's no rotation or team, it's just people who have time</p>



<a name="215130312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130312" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130312">(Oct 30 2020 at 18:04)</a>:</h4>
<p>Or people who have a PR in the queue that would take weeks to be merged if they don't start opening rollups :D</p>



<a name="215130486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130486">(Oct 30 2020 at 18:05)</a>:</h4>
<p>haha, okay. so anyone with r+ permissions can (should?) do it?</p>



<a name="215130533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130533" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130533">(Oct 30 2020 at 18:05)</a>:</h4>
<p>I think so, yeah</p>



<a name="215130645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130645" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130645">(Oct 30 2020 at 18:06)</a>:</h4>
<p>cool. thanks. might try that out some time ^^</p>



<a name="215130702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130702">(Oct 30 2020 at 18:07)</a>:</h4>
<p>wasn't there a discord channel for coordination?</p>



<a name="215130845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130845">(Oct 30 2020 at 18:08)</a>:</h4>
<p>oh. hm. i see #rollups does exist on the official discord, but the last message was over two months ago.</p>



<a name="215130863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130863">(Oct 30 2020 at 18:08)</a>:</h4>
<p>ah, there's ops #rollups, but the last message there was me asking in August, so...</p>



<a name="215130868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130868">(Oct 30 2020 at 18:08)</a>:</h4>
<p>yeah</p>



<a name="215130896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215130896" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215130896">(Oct 30 2020 at 18:08)</a>:</h4>
<p>pretty sure i've seen rollups since then ^^'</p>



<a name="215132029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215132029" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215132029">(Oct 30 2020 at 18:16)</a>:</h4>
<p>We have instructions for rollups in the Forge: <a href="https://forge.rust-lang.org/release/rollups.html">https://forge.rust-lang.org/release/rollups.html</a></p>



<a name="215132127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215132127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215132127">(Oct 30 2020 at 18:17)</a>:</h4>
<p>yeah, i did read that. i was just missing the part that explains who that page is aimed at. but i guess the answer is just everyone</p>



<a name="215132133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215132133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215132133">(Oct 30 2020 at 18:17)</a>:</h4>
<p>(they <em>are</em> kind of part of what the release team does, but people outside the team also do rollups)</p>



<a name="215133676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215133676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215133676">(Oct 30 2020 at 18:30)</a>:</h4>
<p>Side note: Couldn't rollups be automated? Maybe they wouldn't be auto-approved but it seems to me like bors could automatically open rollup PRs for approved <code>rollup=always</code> PRs</p>



<a name="215134238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215134238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215134238">(Oct 30 2020 at 18:35)</a>:</h4>
<p>I guess you need to be sure that someone has time to handle failures and point those to the right PR?</p>



<a name="215134336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215134336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215134336">(Oct 30 2020 at 18:36)</a>:</h4>
<p>and many PRs are rollup=maybe, that need some judgement. though i guess if it's automated, people will use rollup=always more often.</p>



<a name="215134365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215134365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215134365">(Oct 30 2020 at 18:36)</a>:</h4>
<p>But I think we could still have a person be the one to approve and shepherd the rollup into being merged</p>



<a name="215134398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215134398" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215134398">(Oct 30 2020 at 18:36)</a>:</h4>
<p>It would just reduce pressure and let people do more impactful things than being the mergebot <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="215134511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215134511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215134511">(Oct 30 2020 at 18:37)</a>:</h4>
<p>Looks like <span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> already proposed this: <a href="https://github.com/rust-lang/homu/issues/25">https://github.com/rust-lang/homu/issues/25</a></p>



<a name="215134758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215134758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215134758">(Oct 30 2020 at 18:39)</a>:</h4>
<p>hm, the 'create a rollup' button above the queue gives me a 'Error: 500 Internal Server Error'</p>



<a name="215135044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135044">(Oct 30 2020 at 18:42)</a>:</h4>
<blockquote>
<p>Sorry, the requested URL '<a href="https://bors.rust-lang.org/callback?[..]">https://bors.rust-lang.org/callback?[..]</a>' caused an error:</p>
<p>Internal Server Error</p>
</blockquote>



<a name="215135059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135059">(Oct 30 2020 at 18:42)</a>:</h4>
<p>Did you get to the GitHub auth page?</p>



<a name="215135088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135088" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135088">(Oct 30 2020 at 18:42)</a>:</h4>
<p>first time, yes.</p>



<a name="215135107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135107">(Oct 30 2020 at 18:42)</a>:</h4>
<p>but now that i authorized it, it just gives this error</p>



<a name="215135288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135288">(Oct 30 2020 at 18:44)</a>:</h4>
<p>Weird. I haven't authorized before so can't help <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="215135323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135323" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135323">(Oct 30 2020 at 18:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310399">Mara</span> <a href="#narrow/stream/242791-t-infra/topic/Who.20makes.20rollups.3F/near/215134758">said</a>:</p>
<blockquote>
<p>hm, the 'create a rollup' button above the queue gives me a 'Error: 500 Internal Server Error'</p>
</blockquote>
<p><span class="user-mention" data-user-id="211727">@Jonas Schievink</span> ^</p>



<a name="215135382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135382">(Oct 30 2020 at 18:45)</a>:</h4>
<p>haven't seen that happen before</p>



<a name="215135397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135397" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135397">(Oct 30 2020 at 18:45)</a>:</h4>
<p>let me try creating one</p>



<a name="215135542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135542">(Oct 30 2020 at 18:46)</a>:</h4>
<p>hmm that worked fine <a href="https://github.com/rust-lang/rust/pull/78582">https://github.com/rust-lang/rust/pull/78582</a></p>



<a name="215135630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215135630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215135630">(Oct 30 2020 at 18:47)</a>:</h4>
<p>i still get the same error if i try again. weird</p>



<a name="215137051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215137051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215137051">(Oct 30 2020 at 18:59)</a>:</h4>
<p>Maybe try revoking its permissions and then trying again?</p>



<a name="215137293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215137293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215137293">(Oct 30 2020 at 19:01)</a>:</h4>
<p>nope. same</p>



<a name="215137473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215137473" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215137473">(Oct 30 2020 at 19:03)</a>:</h4>
<p>Cc <span class="user-mention" data-user-id="121055">@Pietro Albini</span></p>



<a name="215137494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215137494" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215137494">(Oct 30 2020 at 19:03)</a>:</h4>
<p>(this has like, no priority at all)</p>



<a name="215137557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215137557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215137557">(Oct 30 2020 at 19:04)</a>:</h4>
<p>Oh sorry for the ping then <span aria-label="embarrassed" class="emoji emoji-1f633" role="img" title="embarrassed">:embarrassed:</span></p>



<a name="215137564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215137564" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215137564">(Oct 30 2020 at 19:04)</a>:</h4>
<p>Just seems really bizarre</p>



<a name="215138119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215138119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215138119">(Oct 30 2020 at 19:09)</a>:</h4>
<p>wut</p>



<a name="215138128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215138128" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215138128">(Oct 30 2020 at 19:09)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Traceback (most recent call last):
  File &quot;/usr/local/bin/bottle.py&quot;, line 868, in _handle
    return route.call(**args)
  File &quot;/usr/local/bin/bottle.py&quot;, line 1748, in wrapper
    rv = callback(*a, **ka)
  File &quot;/src/homu/server.py&quot;, line 258, in callback
    return rollup(user_gh, state, repo_label, repo_cfg, repo)
  File &quot;/src/homu/server.py&quot;, line 289, in rollup
    utils.github_set_ref(
  File &quot;/src/homu/utils.py&quot;, line 12, in github_set_ref
    url = repo._build_url(&#39;git&#39;, &#39;refs&#39;, ref, base_url=repo._api)
AttributeError: &#39;NoneType&#39; object has no attribute &#39;_build_url&#39;
</code></pre></div>



<a name="215146496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215146496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215146496">(Oct 30 2020 at 20:26)</a>:</h4>
<p><a href="https://github.com/rust-lang/homu/blob/c6f8fc6fd16011d8b84e76a5c8d2568f0aff5476/homu/server.py#L265-L294">Relevant code:</a></p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="k">def</span> <span class="nf">rollup</span><span class="p">(</span><span class="n">user_gh</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">repo_label</span><span class="p">,</span> <span class="n">repo_cfg</span><span class="p">,</span> <span class="n">repo</span><span class="p">):</span>
    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">user_gh</span><span class="o">.</span><span class="n">repository</span><span class="p">(</span><span class="n">user_gh</span><span class="o">.</span><span class="n">user</span><span class="p">()</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">repo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">base_repo</span> <span class="o">=</span> <span class="n">user_gh</span><span class="o">.</span><span class="n">repository</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">owner</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">repo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


    <span class="n">nums</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'nums'</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">if</span> <span class="n">nums</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rollup_states</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">repo_label</span><span class="p">][</span><span class="n">num</span><span class="p">]</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Invalid PR number: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rollup_states</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">repo_label</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">rollup</span><span class="p">]</span>
    <span class="n">rollup_states</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rollup_states</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">approved_by</span><span class="p">]</span>
    <span class="n">rollup_states</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>


    <span class="k">if</span> <span class="ow">not</span> <span class="n">rollup_states</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">'No pull requests are marked as rollup'</span>


    <span class="n">base_ref</span> <span class="o">=</span> <span class="n">rollup_states</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">base_ref</span>


    <span class="n">base_sha</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="s1">'heads/'</span> <span class="o">+</span> <span class="n">base_ref</span><span class="p">)</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">sha</span>
    <span class="n">branch_name</span> <span class="o">=</span> <span class="s1">'rollup-'</span> <span class="o">+</span> <span class="s1">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">digits</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_lowercase</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">utils</span><span class="o">.</span><span class="n">github_set_ref</span><span class="p">(</span>
        <span class="n">user_repo</span><span class="p">,</span>
        <span class="s1">'heads/'</span> <span class="o">+</span> <span class="n">branch_name</span><span class="p">,</span>
        <span class="n">base_sha</span><span class="p">,</span>
        <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>



<a name="215146845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215146845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215146845">(Oct 30 2020 at 20:30)</a>:</h4>
<p>I think I know what's up! <span class="user-mention" data-user-id="310399">@Mara</span>, you don't have a fork of rust-lang/rust under your user account, right? (It's under fusion-engineering-forks instead.) I think you either have to log in as fusion-engineering-forks (which may not be possible/preferable), or make a fork of rust-lang/rust under m-ou-se</p>



<a name="215146868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215146868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215146868">(Oct 30 2020 at 20:31)</a>:</h4>
<p>That would explain why it's only happening for you</p>



<a name="215147265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215147265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215147265">(Oct 30 2020 at 20:35)</a>:</h4>
<p>I opened a PR to provide a better error: <a href="https://github.com/rust-lang/homu/pull/113">https://github.com/rust-lang/homu/pull/113</a></p>



<a name="215147850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215147850" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215147850">(Oct 30 2020 at 20:42)</a>:</h4>
<p>ooh, that makes sense. let's try :)</p>



<a name="215148052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215148052" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215148052">(Oct 30 2020 at 20:44)</a>:</h4>
<p>that worked! thanks :)</p>



<a name="215150359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Who%20makes%20rollups%3F/near/215150359" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Who.20makes.20rollups.3F.html#215150359">(Oct 30 2020 at 21:07)</a>:</h4>
<p>You're welcome :)</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
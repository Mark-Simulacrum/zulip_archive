<html>
<head><meta charset="utf-8"><title>dist-various-2 failing · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html">dist-various-2 failing</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="223417461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223417461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223417461">(Jan 20 2021 at 18:51)</a>:</h4>
<p>The dist-various-2 runner seems to be consistenly failing right now:</p>
<ul>
<li><a href="https://github.com/rust-lang-ci/rust/runs/1736835293">https://github.com/rust-lang-ci/rust/runs/1736835293</a></li>
<li><a href="https://github.com/rust-lang-ci/rust/runs/1736692202">https://github.com/rust-lang-ci/rust/runs/1736692202</a></li>
</ul>



<a name="223418294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223418294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223418294">(Jan 20 2021 at 18:58)</a>:</h4>
<p>This repeats five times before it gives up: (With a lot more output before that.)</p>
<div class="codehilite"><pre><span></span><code>/usr/local/x86_64-sun-solaris2.10/bin/ld: cannot find -lc
collect2: error: ld returned 1 exit status
Makefile:945: recipe for target &#39;libgcc_s.so&#39; failed
</code></pre></div>



<a name="223419157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223419157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223419157">(Jan 20 2021 at 19:04)</a>:</h4>
<p>And again: <a href="https://github.com/rust-lang-ci/rust/runs/1736966510">https://github.com/rust-lang-ci/rust/runs/1736966510</a></p>
<p><span class="user-group-mention" data-user-group-id="2943">@T-infra</span> Time for a <code>@bors treeclosed</code>? :(</p>



<a name="223419173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223419173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223419173">(Jan 20 2021 at 19:04)</a>:</h4>
<p>gah</p>



<a name="223419179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223419179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223419179">(Jan 20 2021 at 19:04)</a>:</h4>
<p>yeah</p>



<a name="223419197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223419197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223419197">(Jan 20 2021 at 19:04)</a>:</h4>
<p>I don't have time tonight to investigate I suspec</p>



<a name="223419317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223419317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223419317">(Jan 20 2021 at 19:05)</a>:</h4>
<p>I'll see if i can find out what is going wrong.</p>



<a name="223420769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223420769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223420769">(Jan 20 2021 at 19:13)</a>:</h4>
<p>building the docker image doesn't get past:</p>
<blockquote>
<p>RUN /tmp/build-solaris-toolchain.sh x86_64  amd64   solaris-i386</p>
</blockquote>



<a name="223423082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223423082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223423082">(Jan 20 2021 at 19:31)</a>:</h4>
<p>The dependencies needed for this build are downloaded from this apt repo: <a href="http://apt.dilos.org/dilos/dists/dilos2/main/binary-solaris-i386/">http://apt.dilos.org/dilos/dists/dilos2/main/binary-solaris-i386/</a><br>
(Which updated a few hours ago, it seems.)</p>



<a name="223424305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223424305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223424305">(Jan 20 2021 at 19:40)</a>:</h4>
<p>Some of the packages that build script refers to (libc-dev, libpthread-dev, etc.) simply don't exist in that repository. But those are silently ignored. Not sure if that's on purpose.</p>



<a name="223436831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223436831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223436831">(Jan 20 2021 at 21:17)</a>:</h4>
<p>gah</p>



<a name="223437109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437109">(Jan 20 2021 at 21:19)</a>:</h4>
<p><span class="user-mention" data-user-id="310399">@Mara</span> so, this is kinda bad, because we have nothing to revert that could fix this</p>



<a name="223437204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437204">(Jan 20 2021 at 21:20)</a>:</h4>
<p>yeah, i was about to ask how this kind of stuff is usually handled ^^'</p>



<a name="223437254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437254">(Jan 20 2021 at 21:20)</a>:</h4>
<p>basically what happened is that the cached docker image expired, and building that docker image broke between the last build and now</p>



<a name="223437275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437275">(Jan 20 2021 at 21:21)</a>:</h4>
<p>so we have no way to recover other than just fixing the issue</p>



<a name="223437281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437281">(Jan 20 2021 at 21:21)</a>:</h4>
<p>yeah :(</p>



<a name="223437329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437329">(Jan 20 2021 at 21:21)</a>:</h4>
<p>could someone build the old docker image and upload that somewhere?</p>



<a name="223437417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437417">(Jan 20 2021 at 21:22)</a>:</h4>
<p>the problem is that you can't build that image anymore</p>



<a name="223437427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437427">(Jan 20 2021 at 21:22)</a>:</h4>
<p>it was fetching things from the network that don't exist anymore</p>



<a name="223437714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223437714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223437714">(Jan 20 2021 at 21:25)</a>:</h4>
<p>ok so the <code>cannot find -lc</code> means it can't find libc</p>



<a name="223438360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223438360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223438360">(Jan 20 2021 at 21:29)</a>:</h4>
<p>yeah so i checked the contents of the packages it did download (libc, but not libc-dev). and it seems almost the same as the old libc-dev package i found in that same repo. main difference is that everything is now <code>.1</code>: <code>libc.so.1</code> instead of <code>libc.so</code>. but all files are there, at first glance</p>



<a name="223438436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223438436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223438436">(Jan 20 2021 at 21:30)</a>:</h4>
<p>so maybe the part where it symlinks <a href="http://libc.so">libc.so</a> to libc.so.1 is missing now, and wasn't needed before? (ldconfig?)</p>



<a name="223438753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223438753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223438753">(Jan 20 2021 at 21:32)</a>:</h4>
<p>I don't know about solaris, but <code>libc.so</code> is actually a linker script on GNU platforms</p>



<a name="223438808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223438808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223438808">(Jan 20 2021 at 21:33)</a>:</h4>
<p>not here. it's an ELF file directly</p>



<a name="223438944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223438944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223438944">(Jan 20 2021 at 21:34)</a>:</h4>
<p>well <code>libc.so.1</code> should definitely be ELF</p>



<a name="223438984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223438984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223438984">(Jan 20 2021 at 21:34)</a>:</h4>
<p>ah, the <code>libc-dev</code> package was literally just a bunch of symlinks:<br>
<a href="/user_uploads/4715/G1M2AJSq1tN7Hs2LtgMbIZ7O/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/G1M2AJSq1tN7Hs2LtgMbIZ7O/image.png" title="image.png"><img src="/user_uploads/4715/G1M2AJSq1tN7Hs2LtgMbIZ7O/image.png"></a></div>



<a name="223439023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223439023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223439023">(Jan 20 2021 at 21:35)</a>:</h4>
<p>ok</p>



<a name="223439087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223439087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223439087">(Jan 20 2021 at 21:35)</a>:</h4>
<p>but maybe we should reach out to "dilos" to see why libc-dev disappeared</p>



<a name="223439117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223439117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223439117">(Jan 20 2021 at 21:35)</a>:</h4>
<p>a lot of packages in that repo do list <code>libc-dev</code> as a dependency. but the package itself is just not there.</p>



<a name="223444375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223444375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223444375">(Jan 20 2021 at 22:12)</a>:</h4>
<p>okay, got it working again locally. cleaning up now for a PR.</p>



<a name="223444699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223444699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223444699">(Jan 20 2021 at 22:15)</a>:</h4>
<p>oh. the next step also fails. (the sparcv9 architecture instead of i386) hopefully the same problem</p>



<a name="223445227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223445227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223445227">(Jan 20 2021 at 22:18)</a>:</h4>
<p>thanks for looking into this mara!</p>



<a name="223446919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223446919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223446919">(Jan 20 2021 at 22:35)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/81229">https://github.com/rust-lang/rust/pull/81229</a></p>



<a name="223446930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223446930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223446930">(Jan 20 2021 at 22:35)</a>:</h4>
<p>not the prettiest workaround. but it seems to work.</p>



<a name="223447021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223447021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223447021">(Jan 20 2021 at 22:36)</a>:</h4>
<p>at least it gets past the solaris toolchain building steps when building the docker image.</p>



<a name="223448204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223448204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223448204">(Jan 20 2021 at 22:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <span class="user-mention" data-user-id="121055">@Pietro Albini</span> This PR might fix it for now ^</p>



<a name="223449166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223449166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223449166">(Jan 20 2021 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="310399">@Mara</span> feel free to r=me those changes and subsequent fixes as long as they don't diverge too much</p>



<a name="223450159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223450159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223450159">(Jan 20 2021 at 23:08)</a>:</h4>
<p>/me staring at the live log output</p>



<a name="223450251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223450251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223450251">(Jan 20 2021 at 23:09)</a>:</h4>
<p>yess, looks like it's working</p>



<a name="223455425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223455425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223455425">(Jan 21 2021 at 00:17)</a>:</h4>
<p><a href="/user_uploads/4715/hmImVB9-kUSHxlj-SOt7M0ko/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/hmImVB9-kUSHxlj-SOt7M0ko/image.png" title="image.png"><img src="/user_uploads/4715/hmImVB9-kUSHxlj-SOt7M0ko/image.png"></a></div>



<a name="223455432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223455432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223455432">(Jan 21 2021 at 00:17)</a>:</h4>
<p>time to sleep <span aria-label="zzz" class="emoji emoji-1f4a4" role="img" title="zzz">:zzz:</span></p>



<a name="223456712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223456712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223456712">(Jan 21 2021 at 00:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/dist-various-2.20failing/near/223437254">said</a>:</p>
<blockquote>
<p>basically what happened is that the cached docker image expired, and building that docker image broke between the last build and now</p>
</blockquote>
<p>is there any way we could avoid such expiration?</p>



<a name="223456727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223456727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223456727">(Jan 21 2021 at 00:35)</a>:</h4>
<p>well I don't know that's a great idea; that just delays the problem</p>



<a name="223456779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223456779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223456779">(Jan 21 2021 at 00:36)</a>:</h4>
<p>or maybe it could send an email so deleting the image is manual, so someone has time to deal with it</p>



<a name="223459608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223459608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223459608">(Jan 21 2021 at 01:24)</a>:</h4>
<p>I have long wanted to switch to a on-demand rather than time-based model for docker caches, and also regularly rebuild those images on, say, a nightly or weekly basis to give us forewarning. No time though.</p>



<a name="223460343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223460343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223460343">(Jan 21 2021 at 01:38)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> delaying the problem means it doesn't have to be a fire drill when there are remote issues</p>



<a name="223460391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223460391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223460391">(Jan 21 2021 at 01:38)</a>:</h4>
<p>especially if we have some forewarning as <span class="user-mention silent" data-user-id="116122">simulacrum</span> suggests</p>



<a name="223464000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223464000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223464000">(Jan 21 2021 at 02:47)</a>:</h4>
<p>I can't seem to repon the tree: <a href="https://github.com/rust-lang/rust/pull/81229#issuecomment-764195154">https://github.com/rust-lang/rust/pull/81229#issuecomment-764195154</a></p>



<a name="223464316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223464316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Gaynor <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223464316">(Jan 21 2021 at 02:53)</a>:</h4>
<p>FWIW, what we do on the Python Cryptographic Authority is we have set of jobs that build docker images and then our main CI ones just trust they've already been built; we have the build jobs run on cron (and run whenever there are relevant changes). The one painful thing about this is that if you want to change an image and then use that change, it's a 2 PR dance. I suppose with more and better automation we could fix that, but we never have.</p>



<a name="223471574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223471574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223471574">(Jan 21 2021 at 05:28)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> I don't think treeclosed works on closed PRs.  I went ahead and opened it.</p>



<a name="223489800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223489800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223489800">(Jan 21 2021 at 10:17)</a>:</h4>
<blockquote>
<p>I don't think treeclosed works on closed PRs. </p>
</blockquote>
<p>Ah, good to know. ^^</p>



<a name="223491640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/dist-various-2%20failing/near/223491640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/dist-various-2.20failing.html#223491640">(Jan 21 2021 at 10:38)</a>:</h4>
<p>Yeah bors ignores everything in closed PRs. I documented this on the bors page some time ago: <a href="https://bors.rust-lang.org/">https://bors.rust-lang.org/</a> Finding this (hard to find) note is left as an exercise to the reader. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Updating our DTK · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html">Updating our DTK</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="213651076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213651076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213651076">(Oct 17 2020 at 13:07)</a>:</h4>
<p>I’m going to remote in to the DTK and update the OS and Xcode versions sometime. Any objections?</p>
<p>/cc <span class="user-mention" data-user-id="121055">@Pietro Albini</span> <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="213653387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213653387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213653387">(Oct 17 2020 at 14:02)</a>:</h4>
<p>Sounds good to me.</p>



<a name="213657343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213657343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213657343">(Oct 17 2020 at 15:41)</a>:</h4>
<p>go for it!</p>



<a name="213671785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213671785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213671785">(Oct 17 2020 at 21:34)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> no luck. I installed a newer Xcode, but can't update the OS. Maybe we have to ask MacStadium?</p>



<a name="213754014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213754014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213754014">(Oct 19 2020 at 08:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> is there an error message I can give to the macstadium folks, or any context?</p>



<a name="213782830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213782830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213782830">(Oct 19 2020 at 13:15)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> not much of one:</p>
<p><a href="/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png" title="image.png"><img src="/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png"></a></div><p>I've tried it over a few days so it's not transient. I tried to download the OS update by hand, but since the machine isn't tied to my account / a Rust account, I don't think that works.</p>



<a name="213782878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213782878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213782878">(Oct 19 2020 at 13:16)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> is it possible to do it from the CLI?</p>



<a name="213782924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213782924" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213782924">(Oct 19 2020 at 13:16)</a>:</h4>
<p>maybe it shows more detailed error messages</p>



<a name="213783393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213783393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213783393">(Oct 19 2020 at 13:19)</a>:</h4>
<div class="codehilite"><pre><span></span><code> % softwareupdate -i &#39;macOS Big Sur Beta 10-20A5395g&#39;
Software Update Tool

Finding available software
2020-10-19 06:18:54.414 softwareupdate[11439:2664983] Creating client/daemon connection: 11714DB4-27F6-4109-923F-7CC49C74E87A
Downloading macOS Big Sur Beta 10
downloading: 100.00%
Failed to download &amp; prepare update: Error Domain=SUMacControllerError Code=7721 &quot;[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)]&quot; UserInfo={NSUnderlyingError=0x13f919be0 {Error Domain=MobileSoftwareUpdateErrorDomain Code=7 &quot;No service connection&quot; UserInfo={NSLocalizedDescription=No service connection}}, SUMacControllerErrorIndicationsMask=0, NSDebugDescription=[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)], NSLocalizedDescription=Failed to launch the software update installer. Please try again.}
</code></pre></div>



<a name="213783532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/213783532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#213783532">(Oct 19 2020 at 13:20)</a>:</h4>
<blockquote>
<p>[MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)]</p>
</blockquote>
<p><span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="214342732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214342732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214342732">(Oct 23 2020 at 17:34)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> you have any free time to ping MacStadium?</p>



<a name="214342764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214342764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214342764">(Oct 23 2020 at 17:35)</a>:</h4>
<p>gah</p>



<a name="214342766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214342766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214342766">(Oct 23 2020 at 17:35)</a>:</h4>
<p>no</p>



<a name="214342789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214342789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214342789">(Oct 23 2020 at 17:35)</a>:</h4>
<p>one sec, doing another thing</p>



<a name="214342791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214342791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214342791">(Oct 23 2020 at 17:35)</a>:</h4>
<p>No hurries, just checking in :-)</p>



<a name="214343491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214343491" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214343491">(Oct 23 2020 at 17:41)</a>:</h4>
<p>If it's feasible for me to do the contacting, I'm happy to do so.</p>



<a name="214343518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214343518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214343518">(Oct 23 2020 at 17:41)</a>:</h4>
<p>I just know you did the initial contact</p>



<a name="214343804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/214343804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#214343804">(Oct 23 2020 at 17:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> if you write a message I can relay it to support</p>



<a name="215716492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215716492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215716492">(Nov 05 2020 at 14:15)</a>:</h4>
<div class="codehilite"><pre><span></span><code>We would like to update our DTK to the newest beta of macOS Big Sur. However, when we try to do so via remote screen sharing, we always get an error. Is this something that requires on-premise permissions to update?

A screenshot of the error:

https://rust-lang.zulipchat.com/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png

And the error when trying to update via command line:

&gt; % softwareupdate -i &#39;macOS Big Sur Beta 10-20A5395g&#39;
&gt; Software Update Tool
&gt;
&gt; Finding available software
&gt; 2020-10-19 06:18:54.414 softwareupdate[11439:2664983] Creating client/daemon connection: 11714DB4-27F6-4109-923F-7CC49C74E87A
&gt; Downloading macOS Big Sur Beta 10
&gt; downloading: 100.00%
&gt; Failed to download &amp; prepare update: Error Domain=SUMacControllerError Code=7721 &quot;[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)]&quot; UserInfo={NSUnderlyingError=0x13f919be0 {Error Domain=MobileSoftwareUpdateErrorDomain Code=7 &quot;No service connection&quot; UserInfo={NSLocalizedDescription=No service connection}}, SUMacControllerErrorIndicationsMask=0, NSDebugDescription=[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)], NSLocalizedDescription=Failed to launch the software update installer. Please try again.}

Thank you!
</code></pre></div>



<a name="215716509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215716509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215716509">(Nov 05 2020 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> ^</p>



<a name="215730889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215730889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215730889">(Nov 05 2020 at 15:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> opened the ticket!</p>



<a name="215759382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215759382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215759382">(Nov 05 2020 at 19:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> provisioned an account for macstadium support, they're going to try and apply the update manually</p>



<a name="215760206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215760206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215760206">(Nov 05 2020 at 19:12)</a>:</h4>
<p>Wunderbar</p>



<a name="215772149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215772149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215772149">(Nov 05 2020 at 20:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> try again?</p>



<a name="215772173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215772173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215772173">(Nov 05 2020 at 20:50)</a>:</h4>
<p>they should've applied the patch</p>



<a name="215772226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215772226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215772226">(Nov 05 2020 at 20:51)</a>:</h4>
<p>Neat! I’m out with Vivian at the moment, but maybe in a few hours. Thank you!</p>



<a name="215851322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215851322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215851322">(Nov 06 2020 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> I've no idea what they did, but I don't think they did it to our machine... it hasn't been rebooted. When I rebooted it, it still lists the update as available. I still can't apply the update as my user.</p>



<a name="215855051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215855051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215855051">(Nov 06 2020 at 14:46)</a>:</h4>
<p>Unless they mean that they downloaded the beta _installer_ for us</p>



<a name="215855133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215855133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215855133">(Nov 06 2020 at 14:46)</a>:</h4>
<p>Which I'll now run. What's the worst that can happen.</p>



<a name="215858925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215858925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215858925">(Nov 06 2020 at 15:12)</a>:</h4>
<p>restarting. <a href="http://butt.holdings/">http://butt.holdings/</a></p>



<a name="215862613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215862613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215862613">(Nov 06 2020 at 15:39)</a>:</h4>
<p><a href="/user_uploads/4715/WOKCneo9ybr_8j2EuHgnHKgN/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/WOKCneo9ybr_8j2EuHgnHKgN/image.png" title="image.png"><img src="/user_uploads/4715/WOKCneo9ybr_8j2EuHgnHKgN/image.png"></a></div>



<a name="215863087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215863087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215863087">(Nov 06 2020 at 15:42)</a>:</h4>
<p>Well, I can log in, and the OS version is different, so that's good.</p>
<p>Annnnnnnnd it looks like I can download the Big Sur Release Candidate, so lets do it all over.</p>



<a name="215867492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215867492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215867492">(Nov 06 2020 at 16:12)</a>:</h4>
<p><a href="/user_uploads/4715/qp25cTTYcrLETDcWnVOdVZs5/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/qp25cTTYcrLETDcWnVOdVZs5/image.png" title="image.png"><img src="/user_uploads/4715/qp25cTTYcrLETDcWnVOdVZs5/image.png"></a></div><p>Kinda neat that screen sharing works during an update</p>



<a name="215869220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215869220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215869220">(Nov 06 2020 at 16:25)</a>:</h4>
<p><a href="/user_uploads/4715/SS35beLiHpPYBrfxxWyNcq9L/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/SS35beLiHpPYBrfxxWyNcq9L/image.png" title="image.png"><img src="/user_uploads/4715/SS35beLiHpPYBrfxxWyNcq9L/image.png"></a></div>



<a name="215869471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215869471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215869471">(Nov 06 2020 at 16:27)</a>:</h4>
<p>Ooh, and an Xcode 12.2 RC as well.</p>



<a name="215871628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215871628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215871628">(Nov 06 2020 at 16:42)</a>:</h4>
<p>closed the macstadium support ticket</p>



<a name="215883554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215883554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215883554">(Nov 06 2020 at 18:15)</a>:</h4>
<p>C'mon, Apple:</p>
<div class="codehilite"><pre><span></span><code> % cc --version

objc[4261]: Class AMSupportURLConnectionDelegate is implemented in both ?? (0x21013a750) and ?? (0x1149242b8). One of the two will be used. Which one is undefined.
objc[4261]: Class AMSupportURLSession is implemented in both ?? (0x21013a7a0) and ?? (0x114924308). One of the two will be used. Which one is undefined.

Apple clang version 12.0.0 (clang-1200.0.32.27)
Target: arm64-apple-darwin20.1.0
Thread model: posix
InstalledDir: /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
</code></pre></div>
<p>How you gonna have warnings like that in your own tools.</p>



<a name="215884859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215884859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215884859">(Nov 06 2020 at 18:25)</a>:</h4>
<p>Hmm. Rosetta isn't installed by default, and the error you get from the command line is useless:</p>
<div class="codehilite"><pre><span></span><code>% cmake --version
zsh: bad CPU type in executable: cmake
</code></pre></div>



<a name="215885618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215885618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215885618">(Nov 06 2020 at 18:30)</a>:</h4>
<p>Now to rebuild everything. _really_ wish that rustfmt hadn't been broken for the last weeks</p>



<a name="215927972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215927972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215927972">(Nov 07 2020 at 02:53)</a>:</h4>
<p>Ugh. Forgot to open Xcode once to it could download other components</p>



<a name="215928392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215928392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215928392">(Nov 07 2020 at 03:04)</a>:</h4>
<p>Well, this isn't good.</p>
<div class="codehilite"><pre><span></span><code>% cargo +stage1 run
   Compiling x v0.1.0 (/private/tmp/x)
    Finished dev [unoptimized + debuginfo] target(s) in 0.41s
     Running `target/debug/x`
zsh: killed     cargo +stage1 run
</code></pre></div>



<a name="215928522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215928522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215928522">(Nov 07 2020 at 03:08)</a>:</h4>
<p>Hmm</p>
<div class="codehilite"><pre><span></span><code>% cargo +nightly-x86_64-apple-darwin run --target aarch64-apple-darwin
   Compiling x v0.1.0 (/private/tmp/x)
&lt;jemalloc&gt;: Unsupported system page size
    Finished dev [unoptimized + debuginfo] target(s) in 0.54s
     Running `target/aarch64-apple-darwin/debug/x`
Hello, world!
</code></pre></div>



<a name="215962129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215962129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215962129">(Nov 07 2020 at 16:24)</a>:</h4>
<p>Ok, I don't know exactly what's going on, but I think this is one of the artifacts of bouncing between x86_64 / arm64 processes. I was able to fix the problem using a shim rustc that forced arm64:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>
<span class="nb">exec</span> arch --arm64 /Users/shepmaster/Projects/rust/full/build/aarch64-apple-darwin/stage2/bin/rustc <span class="nv">$@</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>RUSTC=/tmp/foorustc cargo +stage2 build
</code></pre></div>



<a name="215962162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/215962162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#215962162">(Nov 07 2020 at 16:25)</a>:</h4>
<p>And then rebuilt/reinstalled rustup. Now things seem to be working:</p>
<div class="codehilite"><pre><span></span><code>% cargo +stage2 run
   Compiling x v0.1.0 (/private/tmp/x)
    Finished dev [unoptimized + debuginfo] target(s) in 0.39s
     Running `target/debug/x`
Hello, world!
</code></pre></div>



<a name="216696859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/216696859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#216696859">(Nov 14 2020 at 01:36)</a>:</h4>
<p>Gonna update to the released versions of macOS and Xcode.</p>



<a name="216700278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/216700278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#216700278">(Nov 14 2020 at 02:40)</a>:</h4>
<p><a href="/user_uploads/4715/45mi5OQMkVGnEbKID0lx-mOh/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/45mi5OQMkVGnEbKID0lx-mOh/image.png" title="image.png"><img src="/user_uploads/4715/45mi5OQMkVGnEbKID0lx-mOh/image.png"></a></div>



<a name="216700282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/216700282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#216700282">(Nov 14 2020 at 02:40)</a>:</h4>
<p>nailed it</p>



<a name="216795288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Updating%20our%20DTK/near/216795288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Updating.20our.20DTK.html#216795288">(Nov 15 2020 at 14:30)</a>:</h4>
<p>FWIW I'm enabling the ability to run lldb via ssh:</p>
<div class="codehilite"><pre><span></span><code> % DevToolsSecurity -enable
Developer mode is now enabled.
</code></pre></div>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
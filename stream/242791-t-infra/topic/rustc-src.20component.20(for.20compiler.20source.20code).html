<html>
<head><meta charset="utf-8"><title>rustc-src component (for compiler source code) · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html">rustc-src component (for compiler source code)</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264736762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264736762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264736762">(Dec 13 2021 at 17:02)</a>:</h4>
<p>hi, not sure this is the right stream, but I just opened <a href="https://github.com/rust-lang/rust/issues/91864">#91864</a> (<code>Consider shipping compiler source code as a rustup component ("rustc-src"?)</code>)</p>



<a name="264736826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264736826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264736826">(Dec 13 2021 at 17:03)</a>:</h4>
<p>and I wanted to check if anyone knew what team to address/who to ping, etc.</p>



<a name="264736879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264736879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264736879">(Dec 13 2021 at 17:03)</a>:</h4>
<p>it's low-priority so if it's seen here at some point that's probably good enough</p>



<a name="264737017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264737017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264737017">(Dec 13 2021 at 17:04)</a>:</h4>
<p>I'm mostly just curious what other ppl think the tradeoffs are, of having a <code>rustc-src</code> component (separate from <code>rust-src</code> which just has <code>library</code> source code)</p>



<a name="264737447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264737447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264737447">(Dec 13 2021 at 17:06)</a>:</h4>
<p>Isn't the compiler source code already shipped with <code>rustc_dev</code>?</p>



<a name="264737581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264737581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264737581">(Dec 13 2021 at 17:07)</a>:</h4>
<p>won't I look like a fool if that's the case...</p>



<a name="264737761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264737761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264737761">(Dec 13 2021 at 17:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/242791-t-infra/topic/rustc-src.20component.20.28for.20compiler.20source.20code.29/near/264737447">said</a>:</p>
<blockquote>
<p>Isn't the compiler source code already shipped with <code>rustc_dev</code>?</p>
</blockquote>
<p>it's not AFAICT</p>



<a name="264737867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264737867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264737867">(Dec 13 2021 at 17:09)</a>:</h4>
<p>or at least I am not looking in the right place?</p>



<a name="264737916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264737916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264737916">(Dec 13 2021 at 17:09)</a>:</h4>
<p>aaah it's in a separate <code>rustc-src</code> dir /facepalm</p>



<a name="264737936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264737936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264737936">(Dec 13 2021 at 17:10)</a>:</h4>
<p>Yeah, I just looked it up and it is at <code>~/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/rustc-src/rust/compiler</code>. Since you also asked about rust-analyzer, Clippy has hands-on documentation on how to get that: <a href="https://github.com/rust-lang/rust-clippy/blob/master/CONTRIBUTING.md#rust-analyzer">https://github.com/rust-lang/rust-clippy/blob/master/CONTRIBUTING.md#rust-analyzer</a></p>



<a name="264738046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264738046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264738046">(Dec 13 2021 at 17:10)</a>:</h4>
<p><em>sigh</em></p>



<a name="264738181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264738181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264738181">(Dec 13 2021 at 17:11)</a>:</h4>
<p>Note that to enable that for a crate, you not only have to configure rust-analyzer in your IDE, but also add </p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[package.metadata.rust-analyzer]</span>
<span class="c1"># This package uses #[feature(rustc_private)]</span>
<span class="n">rustc_private</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre></div>
<p>to the Cargo.toml of your crate.</p>



<a name="264738552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264738552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264738552">(Dec 13 2021 at 17:13)</a>:</h4>
<p>I need to have a chat with <span class="user-mention" data-user-id="200146">@Daniel Mcnab</span> before I confuse myself any further</p>



<a name="264738690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264738690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264738690">(Dec 13 2021 at 17:14)</a>:</h4>
<p>I somehow thought I saw a diff of this being removed <a href="https://github.com/EmbarkStudios/rust-gpu/blame/da7c3ed71f27d67e05c0d2a4d3c839db14daf1f8/crates/rustc_codegen_spirv/Cargo.toml#L54-L56">https://github.com/EmbarkStudios/rust-gpu/blame/da7c3ed71f27d67e05c0d2a4d3c839db14daf1f8/crates/rustc_codegen_spirv/Cargo.toml#L54-L56</a></p>



<a name="264739626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264739626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264739626">(Dec 13 2021 at 17:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/242791-t-infra/topic/rustc-src.20component.20.28for.20compiler.20source.20code.29/near/264738181">said</a>:</p>
<blockquote>
<p>Note that to enable that for a crate, you not only have to configure rust-analyzer in your IDE, but also add ...</p>
</blockquote>
<p>it was only <code>"rust-analyzer.rustcSource": "discover"</code> that I needed, the <code>Cargo.toml</code> had already been updated by <span class="user-mention" data-user-id="200146">@Daniel Mcnab</span></p>



<a name="264739787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rustc-src%20component%20%28for%20compiler%20source%20code%29/near/264739787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/rustc-src.20component.20(for.20compiler.20source.20code).html#264739787">(Dec 13 2021 at 17:22)</a>:</h4>
<p>I wish it was more discoverable (har)... there's no way around reading clippy docs or every single RA setting</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
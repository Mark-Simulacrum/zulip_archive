<html>
<head><meta charset="utf-8"><title>terraform ecs-app · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html">terraform ecs-app</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="216243142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216243142" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216243142">(Nov 10 2020 at 17:17)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> btw, I spent some time today making it easier to deploy an app to ECS</p>



<a name="216243193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216243193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216243193">(Nov 10 2020 at 17:17)</a>:</h4>
<p>namely, I grouped all the code related to ECR, CI and ECS into a <code>ecs-app</code> module</p>



<a name="216243266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216243266" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216243266">(Nov 10 2020 at 17:18)</a>:</h4>
<p>and I switched bors to it -- all of <code>ci.tf</code> and <code>deployment.tf</code> become <a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/bors/app.tf">https://github.com/rust-lang/simpleinfra/blob/master/terraform/bors/app.tf</a></p>



<a name="216244374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216244374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216244374">(Nov 10 2020 at 17:26)</a>:</h4>
<p>Ok!</p>



<a name="216244455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216244455" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216244455">(Nov 10 2020 at 17:26)</a>:</h4>
<p>btw, we should standardize rust- prefixes on ECS apps</p>



<a name="216244464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216244464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216244464">(Nov 10 2020 at 17:26)</a>:</h4>
<p>We have like half and half</p>



<a name="216244478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216244478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216244478">(Nov 10 2020 at 17:27)</a>:</h4>
<p>(or ECR repositories?)</p>



<a name="216244947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216244947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216244947">(Nov 10 2020 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'd go without the <code>rust-</code> prefix</p>



<a name="216244997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216244997" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216244997">(Nov 10 2020 at 17:31)</a>:</h4>
<p>Sure, makes sense</p>



<a name="216245003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216245003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216245003">(Nov 10 2020 at 17:31)</a>:</h4>
<p>I'm also thinking about changing the structure of log groups</p>



<a name="216245041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216245041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216245041">(Nov 10 2020 at 17:31)</a>:</h4>
<p>I know the rollback script has trouble with some apps because of the inconsistency</p>



<a name="216245059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216245059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216245059">(Nov 10 2020 at 17:31)</a>:</h4>
<p>rigth now they are <code>/ecs/{app}</code>, I'm tempted for it to either be <code>/{prod,dev}/ecs/{app}</code> or just <code>/{prod,dev}/{app}</code></p>



<a name="216245158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/216245158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#216245158">(Nov 10 2020 at 17:32)</a>:</h4>
<p>I'm fine with whatever</p>



<a name="224374731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/224374731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#224374731">(Jan 28 2021 at 18:55)</a>:</h4>
<p>ok migrated highfive to its own terraform state file and to <code>ecs-app</code>: <a href="https://github.com/rust-lang/simpleinfra/commit/315463b2dc3a86fd84a0a268750c03cd8762c3e3">https://github.com/rust-lang/simpleinfra/commit/315463b2dc3a86fd84a0a268750c03cd8762c3e3</a></p>



<a name="224374816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/224374816" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#224374816">(Jan 28 2021 at 18:55)</a>:</h4>
<p>also renamed the ECR repository <code>highfive</code> (from <code>rust-highfive</code>) while I were at it</p>



<a name="224374822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/224374822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#224374822">(Jan 28 2021 at 18:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> ^</p>



<a name="224375017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20ecs-app/near/224375017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/terraform.20ecs-app.html#224375017">(Jan 28 2021 at 18:57)</a>:</h4>
<p>thanks</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>gha-self-hosted broken · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html">gha-self-hosted broken</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="207826962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207826962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207826962">(Aug 24 2020 at 10:15)</a>:</h4>
<p><a href="/user_uploads/4715/gX5TPjOK2cG8JGNvaM_2lDVX/2020-08-24-12-15-16.png">2020-08-24-12-15-16.png</a> <br>
"short and memorable"</p>
<div class="message_inline_image"><a href="/user_uploads/4715/gX5TPjOK2cG8JGNvaM_2lDVX/2020-08-24-12-15-16.png" title="2020-08-24-12-15-16.png"><img src="/user_uploads/4715/gX5TPjOK2cG8JGNvaM_2lDVX/2020-08-24-12-15-16.png"></a></div>



<a name="207827192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827192">(Aug 24 2020 at 10:18)</a>:</h4>
<p>in other news, self-hosted runners are broken on rust-lang-ci/rust but not on my own test repo :/</p>



<a name="207827207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827207">(Aug 24 2020 at 10:18)</a>:</h4>
<p>let's see if it's because of a feature flag somewhere on the rust-lang-ci org</p>



<a name="207827758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827758">(Aug 24 2020 at 10:26)</a>:</h4>
<p>wtf</p>



<a name="207827783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827783">(Aug 24 2020 at 10:27)</a>:</h4>
<p>apparently in rust-lang-ci/rust, GHA forces us to self-update the runner</p>



<a name="207827793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827793">(Aug 24 2020 at 10:27)</a>:</h4>
<p>which fails because we blocked self-updates  in our fork</p>



<a name="207827808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827808">(Aug 24 2020 at 10:27)</a>:</h4>
<p>but it doesn't force it for any other repository I can think of, including rust-lang-ci/pietro-debugging-stuff-dont-look-thx</p>



<a name="207827857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827857">(Aug 24 2020 at 10:28)</a>:</h4>
<p>I'm wondering if it's something in rustc's CI config</p>



<a name="207827876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Silverstone <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827876">(Aug 24 2020 at 10:28)</a>:</h4>
<p>Have they had a security issue related to something rustc uses but the other repos don't?<br>
Maybe they could be requiring a newer runner for that kind of reason?</p>



<a name="207827900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827900">(Aug 24 2020 at 10:28)</a>:</h4>
<p>so, the runner is <em>technically</em> up to date</p>



<a name="207827920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827920">(Aug 24 2020 at 10:29)</a>:</h4>
<p>the latest upstream version is 2.272.0, and our version is 2.272.0-rust1</p>



<a name="207827965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207827965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207827965">(Aug 24 2020 at 10:29)</a>:</h4>
<p>let me try copy/paste the rustc config file in my test repo</p>



<a name="207828485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207828485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207828485">(Aug 24 2020 at 10:36)</a>:</h4>
<p>wtf, it also works with the same configuration as rustc itself</p>



<a name="207831946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207831946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207831946">(Aug 24 2020 at 11:27)</a>:</h4>
<p>ok apparently it wants to update to 2.273.0, which is still a pre-release :/</p>



<a name="207831960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207831960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207831960">(Aug 24 2020 at 11:27)</a>:</h4>
<p>...</p>



<a name="207832199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207832199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207832199">(Aug 24 2020 at 11:30)</a>:</h4>
<p>rebased our fork of the runner on 2.273.0</p>



<a name="207835791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207835791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207835791">(Aug 24 2020 at 12:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/gha-self-hosted.20broken/near/207831946">said</a>:</p>
<blockquote>
<p>ok apparently it wants to update to 2.273.0, which is still a pre-release :/</p>
</blockquote>
<p>maybe we should report a github actions bug?</p>



<a name="207842720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207842720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207842720">(Aug 24 2020 at 13:29)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> already known: <a href="https://github.com/actions/runner/issues/581">https://github.com/actions/runner/issues/581</a></p>



<a name="207843087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha-self-hosted%20broken/near/207843087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/gha-self-hosted.20broken.html#207843087">(Aug 24 2020 at 13:33)</a>:</h4>
<p>confirmed builds are running again now that I updated the GHA runner version</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>triagebot spamming · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html">triagebot spamming</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204310700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204310700" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204310700">(Jul 18 2020 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I killed triagebot since it was spamming the <a href="http://docs.rs">docs.rs</a> repo</p>



<a name="204310705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204310705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204310705">(Jul 18 2020 at 17:55)</a>:</h4>
<p><a href="https://github.com/rust-lang/docs.rs/issues/158">https://github.com/rust-lang/docs.rs/issues/158</a></p>



<a name="204310907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204310907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204310907">(Jul 18 2020 at 17:59)</a>:</h4>
<p>logs @ <a href="https://us-west-1.console.aws.amazon.com/cloudwatch/home?region=us-west-1#logsV2:log-groups/log-group/$252Fecs$252Ftriagebot/log-events$3Fstart$3D1595094420000">https://us-west-1.console.aws.amazon.com/cloudwatch/home?region=us-west-1#logsV2:log-groups/log-group/$252Fecs$252Ftriagebot/log-events$3Fstart$3D1595094420000</a></p>



<a name="204310952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204310952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204310952">(Jul 18 2020 at 18:00)</a>:</h4>
<p>(aws access is required to access them)</p>



<a name="204311240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311240">(Jul 18 2020 at 18:06)</a>:</h4>
<p>tried to restart it and it started spamming again as soon as I commented on that</p>



<a name="204311334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311334">(Jul 18 2020 at 18:08)</a>:</h4>
<p>Okay will take a look in an hour or so</p>



<a name="204311407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311407">(Jul 18 2020 at 18:10)</a>:</h4>
<p>actually just reverted the latest triagebot pr which is the only recent thing and the likely cause, so we can restart it as soon as that's ready</p>



<a name="204311414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311414">(Jul 18 2020 at 18:10)</a>:</h4>
<p>or will it already do so itself on deploy?</p>



<a name="204311419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311419">(Jul 18 2020 at 18:10)</a>:</h4>
<p>it won't, I did set the desired instanced count to 0</p>



<a name="204311433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311433">(Jul 18 2020 at 18:11)</a>:</h4>
<p>how do I revert that?</p>



<a name="204311493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311493" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311493">(Jul 18 2020 at 18:13)</a>:</h4>
<p>Hm I wonder if some kind of rate limit would be feasible</p>



<a name="204311498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311498" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311498">(Jul 18 2020 at 18:13)</a>:</h4>
<p>definitely</p>



<a name="204311502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311502">(Jul 18 2020 at 18:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/242791-t-infra/topic/triagebot.20spamming/near/204311433">said</a>:</p>
<blockquote>
<p>how do I revert that?</p>
</blockquote>
<p>either run <code>terraform apply</code> or go to the console and update the service</p>



<a name="204311509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311509">(Jul 18 2020 at 18:13)</a>:</h4>
<p>Okay sounds good, thanks! Will do so when I'm around to monitor and such</p>



<a name="204311549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311549">(Jul 18 2020 at 18:14)</a>:</h4>
<p>Probably in half an hour</p>



<a name="204311562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311562">(Jul 18 2020 at 18:14)</a>:</h4>
<p>btw, it seems there was some kind of internal loop</p>



<a name="204311568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311568" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311568">(Jul 18 2020 at 18:14)</a>:</h4>
<p>the same request id is processed over and over</p>



<a name="204311569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311569">(Jul 18 2020 at 18:15)</a>:</h4>
<p><a href="https://us-west-1.console.aws.amazon.com/cloudwatch/home?region=us-west-1#logsV2:log-groups/log-group/$252Fecs$252Ftriagebot/log-events$3Fstart$3D-600000$26filterPattern$3D$2522request_id$253D14238690-2ea0-4c8f-818f-654f15103284$2522">https://us-west-1.console.aws.amazon.com/cloudwatch/home?region=us-west-1#logsV2:log-groups/log-group/$252Fecs$252Ftriagebot/log-events$3Fstart$3D-600000$26filterPattern$3D$2522request_id$253D14238690-2ea0-4c8f-818f-654f15103284$2522</a></p>



<a name="204311642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311642" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311642">(Jul 18 2020 at 18:16)</a>:</h4>
<p>Yeah I'll need to look in more detail. The PR that caused it was rather large refactor</p>



<a name="204311677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204311677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204311677">(Jul 18 2020 at 18:17)</a>:</h4>
<p>I'm also not sure that request ID can be entirely trusted</p>



<a name="204312150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204312150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204312150">(Jul 18 2020 at 18:29)</a>:</h4>
<p>okay deployed the old codebase, will take a look in more detail later on</p>



<a name="204312216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204312216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204312216">(Jul 18 2020 at 18:30)</a>:</h4>
<p>is it safe to unlock the issue? <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="204347089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/triagebot%20spamming/near/204347089" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/triagebot.20spamming.html#204347089">(Jul 19 2020 at 12:24)</a>:</h4>
<p>should be yeah</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
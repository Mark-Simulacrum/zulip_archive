<html>
<head><meta charset="utf-8"><title>rust-bots cpu usage · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html">rust-bots cpu usage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="200259031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259031">(Jun 09 2020 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you have any clue on what's happening to rust-bots?</p>



<a name="200259048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259048">(Jun 09 2020 at 16:52)</a>:</h4>
<p>cpu is pinned at 100% witha bunch of iowait</p>



<a name="200259068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259068" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259068">(Jun 09 2020 at 16:52)</a>:</h4>
<p>logging in the machine is getting painful</p>



<a name="200259069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259069">(Jun 09 2020 at 16:52)</a>:</h4>
<p>Yeah is it affecting something?</p>



<a name="200259093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259093">(Jun 09 2020 at 16:52)</a>:</h4>
<p>well <a href="http://crater.rust-lang.org">crater.rust-lang.org</a> is practically offline</p>



<a name="200259110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259110">(Jun 09 2020 at 16:52)</a>:</h4>
<p>Should happen twice a day, it's the backup to s3 for perf.rlo</p>



<a name="200259132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259132">(Jun 09 2020 at 16:52)</a>:</h4>
<p>You can kill it for now - we can limit the CPU or something</p>



<a name="200259149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259149" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259149">(Jun 09 2020 at 16:53)</a>:</h4>
<p>(crontab)</p>



<a name="200259183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259183">(Jun 09 2020 at 16:53)</a>:</h4>
<p>More like export rather than backup actually</p>



<a name="200259365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259365">(Jun 09 2020 at 16:54)</a>:</h4>
<p><a href="/user_uploads/4715/uYwTLRPrWLOLKTly3mc0MJZ3/2020-06-09-18-54-10.png">2020-06-09-18-54-10.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/uYwTLRPrWLOLKTly3mc0MJZ3/2020-06-09-18-54-10.png" title="2020-06-09-18-54-10.png"><img src="/user_uploads/4715/uYwTLRPrWLOLKTly3mc0MJZ3/2020-06-09-18-54-10.png"></a></div>



<a name="200259388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259388">(Jun 09 2020 at 16:54)</a>:</h4>
<p>well this is not really sustainable <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="200259430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200259430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200259430">(Jun 09 2020 at 16:55)</a>:</h4>
<p>that's basically killing crater twice a day</p>



<a name="200260178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260178">(Jun 09 2020 at 17:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> killed everything</p>



<a name="200260255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260255">(Jun 09 2020 at 17:02)</a>:</h4>
<p>that script is doing too much IO though, it's unsustainable to run it</p>



<a name="200260267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260267">(Jun 09 2020 at 17:02)</a>:</h4>
<p>what is it doing exactly?</p>



<a name="200260309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260309" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260309">(Jun 09 2020 at 17:02)</a>:</h4>
<p>Essentially exporting perf data to a sqlite db and uploading that to s3</p>



<a name="200260355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260355" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260355">(Jun 09 2020 at 17:03)</a>:</h4>
<p>We can maybe make it incremental somehow, though that's always quite hard, and alternatively I can just rate limit it somewhat</p>



<a name="200260388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260388">(Jun 09 2020 at 17:03)</a>:</h4>
<p>(e.g. say it takes 10x longer but only uses 10% CPU)</p>



<a name="200260391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260391" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260391">(Jun 09 2020 at 17:03)</a>:</h4>
<p>hmm, I'm not much familiar with the perf architecture, why does it need to do that?</p>



<a name="200260436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260436" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260436">(Jun 09 2020 at 17:03)</a>:</h4>
<p>Because we want people to be able to work with the official dataset locally - we can also export only a subset potentially</p>



<a name="200260548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260548">(Jun 09 2020 at 17:04)</a>:</h4>
<p>The other option is public read only access to the database (or a subset of it) but I'd rather not do that because I don't trust myself to get read only access right</p>



<a name="200260607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260607" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260607">(Jun 09 2020 at 17:05)</a>:</h4>
<p>I'm fine with moving this off of rust-bots or something</p>



<a name="200260636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260636" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260636">(Jun 09 2020 at 17:05)</a>:</h4>
<p>can you investigate running it as a cron on ECS?</p>



<a name="200260737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260737">(Jun 09 2020 at 17:06)</a>:</h4>
<p>I wasn't able to find too many details about that, but the disk usage makes that somewhat annoying to get working I think. I guess with efs it's not infeasible</p>



<a name="200260798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260798" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260798">(Jun 09 2020 at 17:06)</a>:</h4>
<p>But yeah and for now we can move cron to say once a week or something (or even manual)</p>



<a name="200260839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260839">(Jun 09 2020 at 17:07)</a>:</h4>
<blockquote>
<p>I wasn't able to find too many details about that, but the disk usage makes that somewhat annoying to get working I think. I guess with efs it's not infeasible</p>
</blockquote>
<p>what about like, exporting just a week worth of data?</p>



<a name="200260967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200260967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200260967">(Jun 09 2020 at 17:08)</a>:</h4>
<p>Right, yeah. I think that's probably the way to go. If we do that though it might be quick enough to leave on bots for now</p>



<a name="200261143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200261143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200261143">(Jun 09 2020 at 17:09)</a>:</h4>
<p>Modifying to export a subset of the data shouldn't be too hard I think, so I can look at doing that. We can leave it off of cron for now.</p>



<a name="200261226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200261226" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200261226">(Jun 09 2020 at 17:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you have time to modify cron yourself or do I need to do it?</p>



<a name="200261242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200261242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200261242">(Jun 09 2020 at 17:10)</a>:</h4>
<p>I think ecs cron, being an entirely unexplored territory for us will be harder but not infeasible either</p>



<a name="200261267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200261267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200261267">(Jun 09 2020 at 17:10)</a>:</h4>
<p>I can modify cron (should just be commenting a line though)</p>



<a name="200261274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200261274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200261274">(Jun 09 2020 at 17:10)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span>.</p>



<a name="200261283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200261283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200261283">(Jun 09 2020 at 17:10)</a>:</h4>
<p>It'll be in an hour or so though</p>



<a name="200261304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200261304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200261304">(Jun 09 2020 at 17:11)</a>:</h4>
<p>no worries</p>



<a name="200273465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Javier Viola <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273465">(Jun 09 2020 at 18:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I don't know how the backup process is made but you can use the ecs cron to launch a fargate task to run the backup ( will be terminated after the process finish ). I can help with the config.</p>



<a name="200273584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273584" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273584">(Jun 09 2020 at 18:49)</a>:</h4>
<p>yeah that's probably basically what we want</p>



<a name="200273760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Javier Viola <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273760">(Jun 09 2020 at 18:50)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span>  let me know if I can help you</p>



<a name="200273792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273792" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273792">(Jun 09 2020 at 18:51)</a>:</h4>
<div class="codehilite"><pre><span></span><code>cd /home/ec2-user/rustc-perf
docker run --rm -v /home/ec2-user/rustc-perf:/cwd $ECR_URL rustc-perf-export-to-sqlite $PDB /cwd/$SDB
/home/ec2-user/.cargo/bin/szip perf-rust-lang-org.db
aws s3 cp --acl public-read perf-rust-lang-org.db.sz s3://rustc-perf/export.db.sz
rm perf-rust-lang-org.db.sz
</code></pre></div>



<a name="200273807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273807" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273807">(Jun 09 2020 at 18:51)</a>:</h4>
<p>this is basically the script right now</p>



<a name="200273865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273865" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273865">(Jun 09 2020 at 18:51)</a>:</h4>
<p>I imagine that if you wanted to post a PR against rust-lang/simpleinfra that added a cron job running either that script (or even just the docker container) then that would already be amazing</p>



<a name="200273919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273919">(Jun 09 2020 at 18:52)</a>:</h4>
<p>I don't know how easy it is to use terraform without standing up your own set of infra though</p>



<a name="200273954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/rust-bots%20cpu%20usage/near/200273954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/rust-bots.20cpu.20usage.html#200273954">(Jun 09 2020 at 18:52)</a>:</h4>
<p>you'll look at <a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/rustc-perf/main.tf">https://github.com/rust-lang/simpleinfra/blob/master/terraform/rustc-perf/main.tf</a> if you want to though</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
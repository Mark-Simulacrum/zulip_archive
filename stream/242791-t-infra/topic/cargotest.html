<html>
<head><meta charset="utf-8"><title>cargotest · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html">cargotest</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="200611882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200611882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200611882">(Jun 11 2020 at 21:54)</a>:</h4>
<p>What is the status of cargotest?  I know there is <a href="https://github.com/rust-lang/rust/issues/70659">https://github.com/rust-lang/rust/issues/70659</a>, but I was wondering if that went anywhere.</p>
<p>The reason I ask is because I was thinking of changing it so that it tested with the repo-cargo instead of the bootstrap cargo.  This would be a good way to smoke-test that Cargo actually works.  For context, the Cargo about to ship tonight is broken, and will fail in almost all non-trivial projects.  Would anyone object if I made that change?</p>



<a name="200612077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612077">(Jun 11 2020 at 21:56)</a>:</h4>
<p>wait, we don't test with repo cargo today?!</p>



<a name="200612121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612121">(Jun 11 2020 at 21:56)</a>:</h4>
<p>that seems like definitely something to fix</p>



<a name="200612130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612130">(Jun 11 2020 at 21:56)</a>:</h4>
<p>I'm pretty sure <code>initial_cargo</code> is beta?  <a href="https://github.com/rust-lang/rust/blob/master/src/bootstrap/test.rs#L168">https://github.com/rust-lang/rust/blob/master/src/bootstrap/test.rs#L168</a></p>



<a name="200612150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612150">(Jun 11 2020 at 21:56)</a>:</h4>
<p>yeah you're right</p>



<a name="200612165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612165">(Jun 11 2020 at 21:56)</a>:</h4>
<p>we should check that we're already building cargo on the relevant builders</p>



<a name="200612277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612277">(Jun 11 2020 at 21:57)</a>:</h4>
<p>The only 2 builders that run cargotest happen to be the only ones that runs cargo's testsuite, so I think it shouldn't be too hard to make that work.  I'll take a look.</p>



<a name="200612282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612282">(Jun 11 2020 at 21:57)</a>:</h4>
<p>but regardless this should be fixed</p>



<a name="200612355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612355">(Jun 11 2020 at 21:58)</a>:</h4>
<p>should mostly be a matter of using <code>builder.ensure(tool::Cargo { .. })</code> instead of intial_cargo there</p>



<a name="200612825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200612825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200612825">(Jun 11 2020 at 22:02)</a>:</h4>
<p>this is <a href="https://github.com/rust-lang/cargo/issues/8351">https://github.com/rust-lang/cargo/issues/8351</a> right?</p>



<a name="200613136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200613136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200613136">(Jun 11 2020 at 22:04)</a>:</h4>
<p>if this is going to break a good percent of the ecosystem we probably want to open an issue on rust-lang/rust and pin that as well as the cargo issue</p>



<a name="200613150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200613150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200613150">(Jun 11 2020 at 22:05)</a>:</h4>
<p>(just to make it less "dozens of issues" filed)</p>



<a name="200613261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200613261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200613261">(Jun 11 2020 at 22:06)</a>:</h4>
<p>yes.  I just posted a PR to fix on the Cargo side.  Whenever that gets through, I'll do a high-priority update on rust-lang/rust.</p>



<a name="200613312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200613312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200613312">(Jun 11 2020 at 22:06)</a>:</h4>
<p>I can try and review? Regardless given at least one broken nightly we'll probably want to pin some issues for a bit at least I imagine</p>



<a name="200613683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200613683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200613683">(Jun 11 2020 at 22:10)</a>:</h4>
<p>yea, pinned issues sound good.   And feel free to review, thanks!</p>



<a name="200613719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/cargotest/near/200613719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/cargotest.html#200613719">(Jun 11 2020 at 22:11)</a>:</h4>
<p>i have to run out for about 15-20 minutes, i'll be back soon.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>when would x.py try to download rust-dev-nightly? · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html">when would x.py try to download rust-dev-nightly?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="217090766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090766">(Nov 18 2020 at 02:55)</a>:</h4>
<p>I'm trying to reproduce steps from <a href="https://github.com/rust-lang/rust/issues/78236">#78236</a>, and I'm hitting an unexpected 404 during <code>x.py</code>, on the URI: <a href="https://ci-artifacts.rust-lang.org/rustc-builds//rust-dev-nightly-x86_64-unknown-linux-gnu.tar.xz">https://ci-artifacts.rust-lang.org/rustc-builds//rust-dev-nightly-x86_64-unknown-linux-gnu.tar.xz</a></p>



<a name="217090786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090786">(Nov 18 2020 at 02:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> do you have <code>rustc = "nightly"</code> in config.toml?</p>



<a name="217090835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090835">(Nov 18 2020 at 02:56)</a>:</h4>
<p>if not this is probably <code>download-ci-llvm</code> going wrong</p>



<a name="217090836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090836">(Nov 18 2020 at 02:56)</a>:</h4>
<p>I only have the config.toml listed on <a href="https://github.com/rust-lang/rust/issues/78236">#78236</a>, which has <code>profile = "compiler"</code> but no setting for <code>rustc</code></p>



<a name="217090848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090848">(Nov 18 2020 at 02:56)</a>:</h4>
<p>maybe something <span class="user-group-mention" data-user-group-id="2907">@T-release</span> did during the beta bump today?</p>



<a name="217090856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090856">(Nov 18 2020 at 02:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F/near/217090836">said</a>:</p>
<blockquote>
<p>I only have the config.toml listed on <a href="https://github.com/rust-lang/rust/issues/78236">#78236</a>, which has <code>profile = "compiler"</code> but no setting for <code>rustc</code></p>
</blockquote>
<p>right, <code>profile = "compiler"</code> sets <code>download-ci-llvm = "if-available"</code></p>



<a name="217090865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090865">(Nov 18 2020 at 02:57)</a>:</h4>
<p>Hm I am confused, the URL you gave does not have a commit hash</p>



<a name="217090871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090871">(Nov 18 2020 at 02:57)</a>:</h4>
<p>Is that intentional?</p>



<a name="217090875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090875">(Nov 18 2020 at 02:57)</a>:</h4>
<p>I'm just copying what I see from my terminal</p>



<a name="217090942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090942">(Nov 18 2020 at 02:58)</a>:</h4>
<p>Hm ok</p>



<a name="217090953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090953">(Nov 18 2020 at 02:58)</a>:</h4>
<p>Is this on master?</p>



<a name="217090954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090954">(Nov 18 2020 at 02:58)</a>:</h4>
<p>but also,. as I said, I'm trying to recreate the steps from <a href="https://github.com/rust-lang/rust/issues/78236">#78236</a>. So I'm also at commit 6b9fbf212a0 on my checkout</p>



<a name="217090960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090960">(Nov 18 2020 at 02:58)</a>:</h4>
<p>Ah that could be a problem</p>



<a name="217090969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217090969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217090969">(Nov 18 2020 at 02:58)</a>:</h4>
<p>The llvm download support probably doesn't date back that far? Let me try and check</p>



<a name="217091004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091004">(Nov 18 2020 at 02:59)</a>:</h4>
<p>hmm. But maybe I can override that by setting <code>download-ci-llvm = false</code> explicitly in the <code>config.toml</code>? I'm hoping that piece is not relevant to recreating the bug here ...</p>



<a name="217091007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091007">(Nov 18 2020 at 02:59)</a>:</h4>
<p>I think so</p>



<a name="217091084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091084">(Nov 18 2020 at 03:00)</a>:</h4>
<p>(if not, you can definitely inline the compiler.toml options)</p>



<a name="217091091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091091">(Nov 18 2020 at 03:00)</a>:</h4>
<p>So the support for download-ci-llvm depends on grabbing the nightly tar ball so that we can reuse the LLVM it has built, is that right?</p>



<a name="217091121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091121">(Nov 18 2020 at 03:00)</a>:</h4>
<p>commit hash, not nightly, but yes</p>



<a name="217091148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091148">(Nov 18 2020 at 03:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F/near/217091004">said</a>:</p>
<blockquote>
<p>hmm. But maybe I can override that by setting <code>download-ci-llvm = false</code> explicitly in the <code>config.toml</code>? I'm hoping that piece is not relevant to recreating the bug here ...</p>
</blockquote>
<p>it shouldn't have been possible to use download-ci-llvm that far back</p>



<a name="217091155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091155">(Nov 18 2020 at 03:01)</a>:</h4>
<p>so there's no way it could have affected the bug</p>



<a name="217091165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091165">(Nov 18 2020 at 03:01)</a>:</h4>
<p>but I can't reproduce the behavior you're seeing I think</p>



<a name="217091167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091167">(Nov 18 2020 at 03:01)</a>:</h4>
<p>hmm. I wonder what that <em>should</em> do, when you aren't on master</p>



<a name="217091187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091187">(Nov 18 2020 at 03:01)</a>:</h4>
<p>the script in bootstrap.py should work</p>



<a name="217091193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091193">(Nov 18 2020 at 03:02)</a>:</h4>
<p>(on non-master, that is)</p>



<a name="217091240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091240">(Nov 18 2020 at 03:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> ah it is supposed to use the current commit as the basis for what it downloads, or something?</p>



<a name="217091252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091252">(Nov 18 2020 at 03:02)</a>:</h4>
<p>it goes back to the first bors commit to have modified llvm-project submodule, and then downloads results of that on CI</p>



<a name="217091256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091256">(Nov 18 2020 at 03:02)</a>:</h4>
<p>I guess I can go try to find the logic in bootstrap.py</p>



<a name="217091269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091269">(Nov 18 2020 at 03:03)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/6b9fbf212a06944ff23325d2d63215805dc3c6c3/src/bootstrap/bootstrap.py#L435-L441">https://github.com/rust-lang/rust/blob/6b9fbf212a06944ff23325d2d63215805dc3c6c3/src/bootstrap/bootstrap.py#L435-L441</a></p>



<a name="217091298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091298">(Nov 18 2020 at 03:03)</a>:</h4>
<p>but, as I mentioned, I cannot reproduce this URL error -  are you by chance not in a git repo or something?</p>



<a name="217091301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091301">(Nov 18 2020 at 03:03)</a>:</h4>
<p>I'm in a subdirectory</p>



<a name="217091310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091310">(Nov 18 2020 at 03:03)</a>:</h4>
<p>oh</p>



<a name="217091312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091312">(Nov 18 2020 at 03:03)</a>:</h4>
<p>hm</p>



<a name="217091322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091322">(Nov 18 2020 at 03:03)</a>:</h4>
<p>My build process is to create subdirectories (with a config.toml) and invoke ../x.py</p>



<a name="217091325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091325">(Nov 18 2020 at 03:03)</a>:</h4>
<p>I think I know the problem</p>



<a name="217091369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091369">(Nov 18 2020 at 03:04)</a>:</h4>
<p>we run <code>git log -n1 --author=bors -m --first-parent --format=%H -- src/llvm-project src/bootstrap/download-ci-llvm-stamp</code></p>



<a name="217091373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091373">(Nov 18 2020 at 03:04)</a>:</h4>
<p>which is not repository-root relative</p>



<a name="217091377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091377">(Nov 18 2020 at 03:04)</a>:</h4>
<p>ah</p>



<a name="217091381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091381">(Nov 18 2020 at 03:04)</a>:</h4>
<p>so you're basically passing non-existent files</p>



<a name="217091385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091385">(Nov 18 2020 at 03:04)</a>:</h4>
<p>oh lol that should have <code>$(git rev-parse --show-toplevel)</code> at the top</p>



<a name="217091390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091390">(Nov 18 2020 at 03:04)</a>:</h4>
<p>/me has to step away but yay, found a bug. Heh.</p>



<a name="217091412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091412">(Nov 18 2020 at 03:05)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> could you submit a PR? I'm off as well, but seems good to either PR a fix or at least file an issue</p>



<a name="217091414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091414">(Nov 18 2020 at 03:05)</a>:</h4>
<p>sure</p>



<a name="217091416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091416">(Nov 18 2020 at 03:05)</a>:</h4>
<p>it might be easier to run the git command in a known cwd, btw</p>



<a name="217091420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091420">(Nov 18 2020 at 03:05)</a>:</h4>
<p>/me is behind enough on homework another 15 minutes won't hurt</p>



<a name="217091422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091422">(Nov 18 2020 at 03:05)</a>:</h4>
<p>e.g. the directory bootstrap.py itself is in</p>



<a name="217091426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091426">(Nov 18 2020 at 03:05)</a>:</h4>
<p>heh, I know the feeling</p>



<a name="217091760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/when%20would%20x.py%20try%20to%20download%20rust-dev-nightly%3F/near/217091760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/when.20would.20x.2Epy.20try.20to.20download.20rust-dev-nightly.3F.html#217091760">(Nov 18 2020 at 03:11)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/79156">https://github.com/rust-lang/rust/pull/79156</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
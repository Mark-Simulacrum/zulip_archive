<html>
<head><meta charset="utf-8"><title>gha runner update · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html">gha runner update</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="219909808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219909808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219909808">(Dec 14 2020 at 22:13)</a>:</h4>
<p>gah this just came out <a href="https://github.com/actions/runner/releases/tag/v2.275.1">https://github.com/actions/runner/releases/tag/v2.275.1</a></p>



<a name="219909859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219909859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219909859">(Dec 14 2020 at 22:13)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> wanna try doing the bump yourself?</p>



<a name="219909891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219909891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219909891">(Dec 14 2020 at 22:14)</a>:</h4>
<p>(so we're not bottlenecked by me)</p>



<a name="219909911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219909911" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219909911">(Dec 14 2020 at 22:14)</a>:</h4>
<p>yeah</p>



<a name="219910162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910162">(Dec 14 2020 at 22:16)</a>:</h4>
<p>ok, the basic steps are:</p>



<a name="219910164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910164">(Dec 14 2020 at 22:16)</a>:</h4>
<ul>
<li>rebase <a href="https://github.com/rust-lang/gha-runner">https://github.com/rust-lang/gha-runner</a> on the newly published tag<ul>
<li>the latest commit will conflict during the rebase:<ul>
<li>the release notes should be replaced with the infra disclaimer (so, keeping our changes)</li>
<li>the version number should have <code>-rust1</code> appended to it (in both files)</li>
</ul>
</li>
</ul>
</li>
</ul>



<a name="219910283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910283">(Dec 14 2020 at 22:17)</a>:</h4>
<ul>
<li>once the gha runner is force-pushed and CI on it finishes, update <a href="https://github.com/rust-lang/gha-self-hosted/blob/master/images/ubuntu/scripts/install-gha-runner.sh#L7">https://github.com/rust-lang/gha-self-hosted/blob/master/images/ubuntu/scripts/install-gha-runner.sh#L7</a> with the new version number</li>
</ul>



<a name="219910321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910321">(Dec 14 2020 at 22:17)</a>:</h4>
<p>(is there a reason these aren't on the forge page?) <a href="https://forge.rust-lang.org/infra/docs/gha-self-hosted.html">https://forge.rust-lang.org/infra/docs/gha-self-hosted.html</a></p>



<a name="219910358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910358">(Dec 14 2020 at 22:17)</a>:</h4>
<p>never had the time to write them there</p>



<a name="219910416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910416">(Dec 14 2020 at 22:18)</a>:</h4>
<p>I'll open a PR tomorrow morning</p>



<a name="219910677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910677">(Dec 14 2020 at 22:20)</a>:</h4>
<p>and I force push the gha-runner main branch?</p>



<a name="219910721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910721">(Dec 14 2020 at 22:21)</a>:</h4>
<p>yep</p>



<a name="219910733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910733" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910733">(Dec 14 2020 at 22:21)</a>:</h4>
<p>that will trigger CI, which will build the runner and upload it to a github release</p>



<a name="219910801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910801">(Dec 14 2020 at 22:21)</a>:</h4>
<p>oh <span class="user-mention" data-user-id="116122">@simulacrum</span>, also, until <a href="https://github.com/rust-lang/gha-self-hosted/issues/16">https://github.com/rust-lang/gha-self-hosted/issues/16</a> is fixed, roughly an hour after you pushed the change, log into <a href="http://ci-arm-1.infra.rust-lang.org">ci-arm-1.infra.rust-lang.org</a> and run <code>sudo systemctl restart gha-vm-{name}</code> for each runner in <a href="https://github.com/rust-lang-ci/rust/settings/actions">https://github.com/rust-lang-ci/rust/settings/actions</a> that's not marked as active</p>



<a name="219910877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910877" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910877">(Dec 14 2020 at 22:22)</a>:</h4>
<p>ok force pushed</p>



<a name="219910931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219910931" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219910931">(Dec 14 2020 at 22:22)</a>:</h4>
<p>I guess I'll spend some time tomorrow improving the setup</p>



<a name="219911022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219911022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219911022">(Dec 14 2020 at 22:23)</a>:</h4>
<p>thinking about fixing <a href="https://github.com/rust-lang/gha-self-hosted/issues/16">https://github.com/rust-lang/gha-self-hosted/issues/16</a> and automatically opening a PR to gha-self-hosted with the version bump when CI finishes</p>



<a name="219911169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219911169" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219911169">(Dec 14 2020 at 22:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/gha.20runner.20update/near/219910931">said</a>:</p>
<blockquote>
<p>I guess I'll spend some time tomorrow improving the setup</p>
</blockquote>
<p>I hoped it wouldn't have been necessary, but given how the call today went oh well</p>



<a name="219911691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219911691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219911691">(Dec 14 2020 at 22:30)</a>:</h4>
<p>ok CI on runner passed</p>



<a name="219912123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219912123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219912123">(Dec 14 2020 at 22:34)</a>:</h4>
<p>pushed version bump</p>



<a name="219912152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219912152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219912152">(Dec 14 2020 at 22:34)</a>:</h4>
<p>and set a 1 hour timer for systemctl restarts</p>



<a name="219918254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219918254" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219918254">(Dec 14 2020 at 23:39)</a>:</h4>
<p>ok restarted arm-1-2</p>



<a name="219918263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219918263" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219918263">(Dec 14 2020 at 23:39)</a>:</h4>
<p>should be done</p>



<a name="219995001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995001">(Dec 15 2020 at 15:32)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <a href="https://github.com/rust-lang/gha-self-hosted/commit/f9c6afa299418e4b6229688d2eeb7a65babb268c">https://github.com/rust-lang/gha-self-hosted/commit/f9c6afa299418e4b6229688d2eeb7a65babb268c</a> <br>
<span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="219995105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995105">(Dec 15 2020 at 15:33)</a>:</h4>
<p>wait are we auto bumping now?</p>



<a name="219995146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995146" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995146">(Dec 15 2020 at 15:33)</a>:</h4>
<p>ok today I did the following things on gha-self-hosted:</p>
<ul>
<li>implemented the configuration on the server to restart idle VMs after an image update (removing the need to log into the server and manually restart them)</li>
<li>automatically bump <code>gha-self-hosted</code> after we manually rebase <code>gha-runner</code></li>
</ul>



<a name="219995199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995199" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995199">(Dec 15 2020 at 15:33)</a>:</h4>
<p>ah ok, great</p>



<a name="219995258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995258">(Dec 15 2020 at 15:34)</a>:</h4>
<p>there is still the manual step of rebasing rust-lang/gha-runner, but now there is no need to wait for CI to be done and update rust-lang/gha-self-hosted</p>



<a name="219995272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995272">(Dec 15 2020 at 15:34)</a>:</h4>
<p>we could probably pull off auto rebasing most of the time now that I think about it</p>



<a name="219995315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995315">(Dec 15 2020 at 15:34)</a>:</h4>
<p>(if there are no conflicts beyond the expected ones)</p>



<a name="219995318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995318">(Dec 15 2020 at 15:34)</a>:</h4>
<p>my experience is that patch releases rebase just fine, while minor releases need some manual intervention</p>



<a name="219995392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995392">(Dec 15 2020 at 15:35)</a>:</h4>
<p>(I usually need to go and manually cherry-pick instead of running <code>git rebase</code> -- there is probably a git command that does that but I don't know it)</p>



<a name="219995599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995599" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995599">(Dec 15 2020 at 15:36)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> any other idea that's easy to automate, or should I start writing the docs now?</p>



<a name="219995625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995625">(Dec 15 2020 at 15:36)</a>:</h4>
<p>no I think this is good</p>



<a name="219995652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995652" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995652">(Dec 15 2020 at 15:37)</a>:</h4>
<p>I am confused by git rebase not working</p>



<a name="219995726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995726">(Dec 15 2020 at 15:37)</a>:</h4>
<p>point releases are developed on a separate branch than main</p>



<a name="219995814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219995814" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219995814">(Dec 15 2020 at 15:38)</a>:</h4>
<p>so when you do a <code>git rebase</code> git picks the wrong rebase base (it tries to rebase all the commits github included in the patch releases)</p>



<a name="219996231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219996231" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219996231">(Dec 15 2020 at 15:41)</a>:</h4>
<p>Would something like <code>git rebase --onto upstream/master upstream/minor-branch</code> work?</p>



<a name="219996267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219996267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219996267">(Dec 15 2020 at 15:41)</a>:</h4>
<p>maybe, never used <code>--onto</code></p>



<a name="219996288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219996288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219996288">(Dec 15 2020 at 15:41)</a>:</h4>
<p>I should probably try...</p>



<a name="219996327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219996327" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219996327">(Dec 15 2020 at 15:41)</a>:</h4>
<p>Neither did I. I just remembered reading about something like that in the help.</p>



<a name="219996706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/219996706" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Silverstone <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#219996706">(Dec 15 2020 at 15:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/gha.20runner.20update/near/219996267">said</a>:</p>
<blockquote>
<p>maybe, never used <code>--onto</code></p>
</blockquote>
<p>Crikey, I almost always use <code>--onto</code> even if I'm rebasing to fix up my commit series.  It's just habit.</p>



<a name="220026477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/220026477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#220026477">(Dec 15 2020 at 19:06)</a>:</h4>
<p>ok I'll write docs on this tomorrow</p>



<a name="220116650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/gha%20runner%20update/near/220116650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/gha.20runner.20update.html#220116650">(Dec 16 2020 at 13:48)</a>:</h4>
<p>opened a PR with the docs! <a href="https://github.com/rust-lang/rust-forge/pull/487">https://github.com/rust-lang/rust-forge/pull/487</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
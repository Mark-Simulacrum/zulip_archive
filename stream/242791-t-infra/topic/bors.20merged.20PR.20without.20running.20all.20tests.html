<html>
<head><meta charset="utf-8"><title>bors merged PR without running all tests · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html">bors merged PR without running all tests</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267489671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489671">(Jan 10 2022 at 19:44)</a>:</h4>
<p>PR <a href="https://github.com/rust-lang/rust/issues/92733">#92733</a> got merged without all the tests being run. Here's its merge commit: <a href="https://github.com/rust-lang/rust/commit/90e092f69f0d97b05a6d2b6acbde224c898fa9ce">90e092f69f0d97b05a6d2b6acbde224c898fa9ce</a>. As you can see, it says <code>r=&lt;try&gt;</code>.</p>
<p>Here are the steps that made this happen (it wasn't intentional, although I was somewhat concerned it could cause bors to glitch):</p>
<ol>
<li>Post comment with <code>@bors r+</code></li>
<li>Post comment with <code>@bors r- @bors try @rust-timer queue</code></li>
<li>Post comment with <code>@bors r+</code></li>
</ol>
<p>cc <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="267489679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489679">(Jan 10 2022 at 19:45)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="121055">@Pietro Albini</span></p>



<a name="267489715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489715">(Jan 10 2022 at 19:45)</a>:</h4>
<p>I suspect the best thing to do is to push a revert direct to master, but not sure</p>



<a name="267489760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489760">(Jan 10 2022 at 19:45)</a>:</h4>
<p>uff</p>



<a name="267489855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489855">(Jan 10 2022 at 19:46)</a>:</h4>
<p>I'd send a revert as a normal PR</p>



<a name="267489862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489862">(Jan 10 2022 at 19:46)</a>:</h4>
<p>(we could also force push dropping this commit, but that seems worse, I guess)</p>



<a name="267489876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489876">(Jan 10 2022 at 19:46)</a>:</h4>
<p>I mean, the PR itself should be good</p>



<a name="267489883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489883">(Jan 10 2022 at 19:46)</a>:</h4>
<p>the commit being on master at all is going to cause pain all over the place</p>



<a name="267489905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489905">(Jan 10 2022 at 19:46)</a>:</h4>
<p>true</p>



<a name="267489913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489913">(Jan 10 2022 at 19:46)</a>:</h4>
<p>I guess it just won't have proper artifacts</p>



<a name="267489916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489916">(Jan 10 2022 at 19:46)</a>:</h4>
<p>e.g., perf, triagebot, etc. all are going to need special cases</p>



<a name="267489956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489956">(Jan 10 2022 at 19:47)</a>:</h4>
<p>ok it was 6 minutes ago</p>



<a name="267489961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267489961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267489961">(Jan 10 2022 at 19:47)</a>:</h4>
<p>force push it away</p>



<a name="267490009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490009">(Jan 10 2022 at 19:47)</a>:</h4>
<p>ok, will do</p>



<a name="267490016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490016">(Jan 10 2022 at 19:47)</a>:</h4>
<p>Luckily I noticed right away :)</p>



<a name="267490034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490034">(Jan 10 2022 at 19:48)</a>:</h4>
<p>thanks for the quick ping <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="267490118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490118">(Jan 10 2022 at 19:48)</a>:</h4>
<p>it wouldn't have resulted in a release as the release process would've crashed with all the components but x86 linux missing</p>



<a name="267490125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490125">(Jan 10 2022 at 19:48)</a>:</h4>
<p>dropped from origin/master</p>



<a name="267490132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490132">(Jan 10 2022 at 19:48)</a>:</h4>
<p>but still</p>



<a name="267490136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490136">(Jan 10 2022 at 19:48)</a>:</h4>
<p>thanks mark</p>



<a name="267490155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490155">(Jan 10 2022 at 19:48)</a>:</h4>
<p>(someone should reopen a new PR)</p>



<a name="267490199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490199">(Jan 10 2022 at 19:49)</a>:</h4>
<p>Yep, just commented on the PR</p>



<a name="267490220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490220">(Jan 10 2022 at 19:49)</a>:</h4>
<p>Also, could this have messed up the PR currently having CI run?</p>



<a name="267490258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490258">(Jan 10 2022 at 19:49)</a>:</h4>
<p>In terms of its merge-base</p>



<a name="267490259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490259">(Jan 10 2022 at 19:49)</a>:</h4>
<p>oh yeah</p>



<a name="267490271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490271">(Jan 10 2022 at 19:49)</a>:</h4>
<p>that'd merge the commit back in</p>



<a name="267490274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490274">(Jan 10 2022 at 19:49)</a>:</h4>
<p>retry it to let it pick the new master</p>



<a name="267490342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490342">(Jan 10 2022 at 19:50)</a>:</h4>
<p>Although that PR started being tested before the problem commit landed</p>



<a name="267490358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490358">(Jan 10 2022 at 19:50)</a>:</h4>
<p>Maybe worth retrying just in case?</p>



<a name="267490372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490372">(Jan 10 2022 at 19:50)</a>:</h4>
<p>yeah</p>



<a name="267490386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490386">(Jan 10 2022 at 19:50)</a>:</h4>
<p>it's 6 minutes of lost CI anyway</p>



<a name="267490422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490422">(Jan 10 2022 at 19:50)</a>:</h4>
<p>As in, yes, retry it?</p>



<a name="267490428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490428">(Jan 10 2022 at 19:51)</a>:</h4>
<p>yes</p>



<a name="267490578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490578">(Jan 10 2022 at 19:52)</a>:</h4>
<p>Done</p>



<a name="267490627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267490627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267490627">(Jan 10 2022 at 19:52)</a>:</h4>
<p>More info in case it helps to fix the bug:</p>
<p>When I checked the merge queue after step 2, I didn't see the PR listed as having a try run. But I also noticed that the try GitHub Action was still running (which usually happens when a try run is cancelled).</p>



<a name="267493431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267493431" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267493431">(Jan 10 2022 at 20:13)</a>:</h4>
<p>I think it's just that bors has the state "none|trying|autoing" and the commit it's waiting for a response on</p>



<a name="267493440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267493440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267493440">(Jan 10 2022 at 20:13)</a>:</h4>
<p>so with the r+ you changed the trying to autoing</p>



<a name="267493550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267493550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267493550">(Jan 10 2022 at 20:14)</a>:</h4>
<p>and when it received the update for the try run being finished it matched that commit message with the row for autoing</p>



<a name="267495158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267495158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267495158">(Jan 10 2022 at 20:28)</a>:</h4>
<p>So maybe a stopgap fix would be to disallow state changes from trying to autoing?</p>



<a name="267495248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267495248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267495248">(Jan 10 2022 at 20:29)</a>:</h4>
<p>In some ways, I'm kind of surprised this hasn't happened (or hasn't been noticed) before. I'd imagine people sometimes do a perf run and then r+ before the perf run finishes for whatever reason...</p>



<a name="267495824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267495824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267495824">(Jan 10 2022 at 20:34)</a>:</h4>
<p>yeah I'd prevent r+ing if the PR is trying</p>



<a name="267495879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267495879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267495879">(Jan 10 2022 at 20:35)</a>:</h4>
<p>I thought that was already the case -- I think there's code for this, at least. But it might be for the other way around only (no "try" after r+), I guess.</p>



<a name="267496122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267496122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267496122">(Jan 10 2022 at 20:37)</a>:</h4>
<p>Yeah, bors doesn't let you try after r+</p>



<a name="267496207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/267496207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#267496207">(Jan 10 2022 at 20:37)</a>:</h4>
<p>I was just talking about this here: <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267476753">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267476753</a></p>
<p>Now I know why it's barred <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="270856215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/270856215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#270856215">(Feb 05 2022 at 23:59)</a>:</h4>
<p>It looks like this still needs to be fixed in bors?</p>



<a name="270856282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/270856282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#270856282">(Feb 06 2022 at 00:00)</a>:</h4>
<p>I'm just going off the fact that rust-lang/homu master hasn't been updated since November.</p>



<a name="270856376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/270856376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#270856376">(Feb 06 2022 at 00:02)</a>:</h4>
<p>I don't feel qualified to fix it, but I thought I should bring it up, given the potential scale of the disruption.</p>



<a name="270856760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20merged%20PR%20without%20running%20all%20tests/near/270856760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20merged.20PR.20without.20running.20all.20tests.html#270856760">(Feb 06 2022 at 00:12)</a>:</h4>
<p>It's not all that common to trigger, and bors isn't too easy to modify</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
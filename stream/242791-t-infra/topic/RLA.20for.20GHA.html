<html>
<head><meta charset="utf-8"><title>RLA for GHA · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html">RLA for GHA</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="203383493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203383493" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203383493">(Jul 09 2020 at 13:14)</a>:</h4>
<p>hey all, I'm downloading the logs to train RLA on GHA</p>



<a name="203383539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203383539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203383539">(Jul 09 2020 at 13:15)</a>:</h4>
<p>I hope to deploy RLA on ECS and switch it to GHA instead of Azure today or tomorrow</p>



<a name="203399860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203399860" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203399860">(Jul 09 2020 at 15:23)</a>:</h4>
<p>RLA is pretty brittle :(</p>



<a name="203409223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203409223" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203409223">(Jul 09 2020 at 16:35)</a>:</h4>
<p>anyone up to review <a href="https://github.com/rust-lang/rust-log-analyzer/pull/48">https://github.com/rust-lang/rust-log-analyzer/pull/48</a> ?</p>



<a name="203419859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203419859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203419859">(Jul 09 2020 at 18:08)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> LGTM</p>



<a name="203419871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203419871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203419871">(Jul 09 2020 at 18:08)</a>:</h4>
<p>not sure how much my opinion matters though :P</p>



<a name="203526138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203526138" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203526138">(Jul 10 2020 at 16:09)</a>:</h4>
<p>ok I started working on deploying RLA to ECS today</p>



<a name="203526166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203526166" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203526166">(Jul 10 2020 at 16:09)</a>:</h4>
<p>pushed the configuration I got so far to simpleinfra</p>



<a name="203526193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203526193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203526193">(Jul 10 2020 at 16:09)</a>:</h4>
<p>(configured access for CI to push to ECR, and prepared the EFS filesystem to store the index)</p>



<a name="203526213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203526213" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203526213">(Jul 10 2020 at 16:09)</a>:</h4>
<p>and also uploaded a pre-trained index on EFS</p>



<a name="203526332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/203526332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#203526332">(Jul 10 2020 at 16:10)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116122">@simulacrum</span>, I created a module to have working EFS filesystems<br>
<a href="https://github.com/rust-lang/simpleinfra/blob/2ed962fff10b5b5dc45a4af6dd98a14fecbb9aea/terraform/shared/modules/efs-filesystem/main.tf">https://github.com/rust-lang/simpleinfra/blob/2ed962fff10b5b5dc45a4af6dd98a14fecbb9aea/terraform/shared/modules/efs-filesystem/main.tf</a><br>
<a href="https://github.com/rust-lang/simpleinfra/blob/2ed962fff10b5b5dc45a4af6dd98a14fecbb9aea/terraform/rust-log-analyzer/deployment.tf">https://github.com/rust-lang/simpleinfra/blob/2ed962fff10b5b5dc45a4af6dd98a14fecbb9aea/terraform/rust-log-analyzer/deployment.tf</a></p>



<a name="204419101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204419101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204419101">(Jul 20 2020 at 13:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you have time for a quick review of <a href="https://github.com/rust-lang/rust-log-analyzer/pull/49">https://github.com/rust-lang/rust-log-analyzer/pull/49</a> ?</p>



<a name="204419126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204419126" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204419126">(Jul 20 2020 at 13:04)</a>:</h4>
<p>once that's done we can switch RLA to listen for GHA</p>



<a name="204419138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204419138" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204419138">(Jul 20 2020 at 13:04)</a>:</h4>
<p>(hopefully)</p>



<a name="204419178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204419178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204419178">(Jul 20 2020 at 13:04)</a>:</h4>
<p>yeah</p>



<a name="204419475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204419475" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204419475">(Jul 20 2020 at 13:07)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> r=me on the PR btw</p>



<a name="204419485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204419485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204419485">(Jul 20 2020 at 13:07)</a>:</h4>
<p><span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="204421442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204421442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204421442">(Jul 20 2020 at 13:25)</a>:</h4>
<p>ok RLA is healthy <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="204429742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204429742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204429742">(Jul 20 2020 at 14:35)</a>:</h4>
<p>RLA is deployed, but for whatever reason it's not replying properly</p>



<a name="204429749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204429749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204429749">(Jul 20 2020 at 14:35)</a>:</h4>
<p>adding more logging to it</p>



<a name="204648907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204648907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204648907">(Jul 22 2020 at 10:11)</a>:</h4>
<p>I'm investigating why RLA is not posting anything btw</p>



<a name="204648927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204648927" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204648927">(Jul 22 2020 at 10:11)</a>:</h4>
<p>I found the cause why it's not posting anything for try/auto builds: I was passing the wrong flag to the server, making it query fork builds on the primary repo</p>



<a name="204649010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204649010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204649010">(Jul 22 2020 at 10:12)</a>:</h4>
<p>which was needed by azure but not by GHA</p>



<a name="204649035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204649035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204649035">(Jul 22 2020 at 10:13)</a>:</h4>
<p>pushed <a href="https://github.com/rust-lang/simpleinfra/commit/3f378707be5d5f62561fd72ae730af227cf3d7d0">https://github.com/rust-lang/simpleinfra/commit/3f378707be5d5f62561fd72ae730af227cf3d7d0</a> to fix it, so hopefully try/auto messages will start working again</p>



<a name="204654040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204654040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204654040">(Jul 22 2020 at 11:29)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you have an opinion on <a href="https://github.com/rust-lang/rust-log-analyzer/pull/50">https://github.com/rust-lang/rust-log-analyzer/pull/50</a> ?</p>



<a name="204654109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204654109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204654109">(Jul 22 2020 at 11:30)</a>:</h4>
<p>I've been meaning to do it on our other services (triagebot, perf) but historically have struggled to make it work</p>



<a name="204654112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204654112" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204654112">(Jul 22 2020 at 11:30)</a>:</h4>
<p>so <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> if it works :)</p>



<a name="204654155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204654155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204654155">(Jul 22 2020 at 11:31)</a>:</h4>
<p>I guess RLA isn't using async yet?</p>



<a name="204654163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204654163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204654163">(Jul 22 2020 at 11:31)</a>:</h4>
<p>that probably makes it much simpler</p>



<a name="204654446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/RLA%20for%20GHA/near/204654446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/RLA.20for.20GHA.html#204654446">(Jul 22 2020 at 11:35)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> yeah processing incoming logs is sync</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
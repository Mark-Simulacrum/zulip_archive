<html>
<head><meta charset="utf-8"><title>apple ci cpu-usage · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html">apple ci cpu-usage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270120865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270120865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270120865">(Jan 31 2022 at 23:00)</a>:</h4>
<p><span class="user-mention" data-user-id="330154">@The 8472</span> I think it was you that mentioned the low CPU utilization -- I think you were right, it is fishy, but I suspect our cpu util script is just broken on hyperthreads on apple, or something like that</p>



<a name="270120967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270120967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270120967">(Jan 31 2022 at 23:00)</a>:</h4>
<p><a href="/user_uploads/4715/xheA_aD02D6hv4We0E-Jbv_d/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/xheA_aD02D6hv4We0E-Jbv_d/image.png" title="image.png"><img src="/user_uploads/4715/xheA_aD02D6hv4We0E-Jbv_d/image.png"></a></div>



<a name="270121015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121015">(Jan 31 2022 at 23:01)</a>:</h4>
<p>this is the current chart for x86_64-apple builder (3 cores on the builders)</p>



<a name="270121096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121096">(Jan 31 2022 at 23:01)</a>:</h4>
<p>locally, I wrote a simple script that just loops adding to burn CPU, and it looks like on my 4c/8t macbook, our script considers each 'physical' core to contribute 1/4 of the cpu time (i.e., one thread spinning gives me 75% metric)</p>



<a name="270121332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121332">(Jan 31 2022 at 23:03)</a>:</h4>
<p>1/4th = 75%? o.O</p>



<a name="270121363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121363">(Jan 31 2022 at 23:03)</a>:</h4>
<p>well, it's idle time</p>



<a name="270121381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121381">(Jan 31 2022 at 23:03)</a>:</h4>
<p>so 75% is the expected 'physical core utilization'</p>



<a name="270121443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121443">(Jan 31 2022 at 23:04)</a>:</h4>
<p>er, non-utilization</p>



<a name="270121477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121477">(Jan 31 2022 at 23:04)</a>:</h4>
<p>ah</p>



<a name="270121487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121487">(Jan 31 2022 at 23:04)</a>:</h4>
<p>(the graph script subtracts the csv data from 100)</p>



<a name="270121836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121836">(Jan 31 2022 at 23:06)</a>:</h4>
<p>given the builders have 3 cores according to sysstat or w/e I don't really know how those map onto physical hardware</p>



<a name="270121859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121859">(Jan 31 2022 at 23:07)</a>:</h4>
<p>but my guess is the script is not looking at all 3, though hard to be sure</p>



<a name="270121894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270121894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270121894">(Jan 31 2022 at 23:07)</a>:</h4>
<p>the 70% usage figure is still... weird</p>



<a name="270122242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270122242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270122242">(Jan 31 2022 at 23:09)</a>:</h4>
<p>on linux we don't seem to have that problem -- 6 threads on my 6c/12t computer is reported at 50%</p>



<a name="270122302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270122302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270122302">(Jan 31 2022 at 23:10)</a>:</h4>
<p>I don't have a windows computer to test that.</p>



<a name="270122716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270122716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270122716">(Jan 31 2022 at 23:12)</a>:</h4>
<p>maybe we should do the opposite? instead of recording the idle time record the active cpu-seconds per second? on a 3-core machine it would then ideally be 300% that way it doesn't get confused by physical vs. virtual core accounting.</p>



<a name="270122785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270122785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270122785">(Jan 31 2022 at 23:13)</a>:</h4>
<p>hm</p>



<a name="270122920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270122920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270122920">(Jan 31 2022 at 23:14)</a>:</h4>
<p>I think the code for macOS is just not reading anything at all from the virtual cores, so to speak</p>



<a name="270122987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270122987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270122987">(Jan 31 2022 at 23:15)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/498eeb72f590e518e19746b346be53713689e207/src/ci/cpu-usage-over-time.py#L136">https://github.com/rust-lang/rust/blob/498eeb72f590e518e19746b346be53713689e207/src/ci/cpu-usage-over-time.py#L136</a></p>



<a name="270123656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270123656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270123656">(Jan 31 2022 at 23:20)</a>:</h4>
<p><a href="https://stackoverflow.com/questions/20471920/how-to-get-total-cpu-idle-time-in-objective-c-c-on-os-x">https://stackoverflow.com/questions/20471920/how-to-get-total-cpu-idle-time-in-objective-c-c-on-os-x</a><br>
maybe try <code>host_statistics</code>?</p>



<a name="270124101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270124101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270124101">(Jan 31 2022 at 23:24)</a>:</h4>
<p>let me rewrite that into python...</p>



<a name="270124804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270124804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270124804">(Jan 31 2022 at 23:32)</a>:</h4>
<p>gah, need to figure out where these values are coming from, looks like my xcode is out of date and I don't have the relevant files installed</p>



<a name="270124815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270124815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270124815">(Jan 31 2022 at 23:32)</a>:</h4>
<p>will try later.</p>



<a name="270229491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270229491" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270229491">(Feb 01 2022 at 15:29)</a>:</h4>
<p>ok, so I tried the host_statistics this morning</p>



<a name="270229506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270229506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270229506">(Feb 01 2022 at 15:29)</a>:</h4>
<p>I'm seeing pretty.. weird behavior</p>



<a name="270229617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270229617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270229617">(Feb 01 2022 at 15:30)</a>:</h4>
<p>need to investigate some more, but it looks like it <em>very slowly</em> approaches real CPU usage -- probably my code has some bug that's causing it to be inaccurate?</p>



<a name="270229932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270229932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270229932">(Feb 01 2022 at 15:32)</a>:</h4>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/sysctl.h&gt;</span><span class="cp"></span>
<span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/types.h&gt;</span><span class="cp"></span>
<span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mach/mach.h&gt;</span><span class="cp"></span>
<span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mach/processor_info.h&gt;</span><span class="cp"></span>
<span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mach/mach_host.h&gt;</span><span class="cp"></span>
<span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>

<span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">totalSystemTime</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">totalUserTime</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">totalIdleTime</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">};</span><span class="w"></span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">sample</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="w"> </span><span class="o">*</span><span class="n">sample</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">kern_return_t</span><span class="w"> </span><span class="n">kr</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">mach_msg_type_number_t</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">host_cpu_load_info_data_t</span><span class="w"> </span><span class="n">r_load</span><span class="p">;</span><span class="w"></span>

<span class="w">      </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">totalSystemTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">totalUserTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">totalIdleTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">      </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HOST_CPU_LOAD_INFO_COUNT</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">kr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">host_statistics</span><span class="p">(</span><span class="n">mach_host_self</span><span class="p">(),</span><span class="w"> </span><span class="n">HOST_CPU_LOAD_INFO</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">r_load</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">count</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">kr</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">KERN_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">printf</span><span class="p">(</span><span class="s">"oops: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">mach_error_string</span><span class="p">(</span><span class="n">kr</span><span class="p">));</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="n">sample</span><span class="o">-&gt;</span><span class="n">totalSystemTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r_load</span><span class="p">.</span><span class="n">cpu_ticks</span><span class="p">[</span><span class="n">CPU_STATE_SYSTEM</span><span class="p">];</span><span class="w"></span>
<span class="w">      </span><span class="n">sample</span><span class="o">-&gt;</span><span class="n">totalUserTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r_load</span><span class="p">.</span><span class="n">cpu_ticks</span><span class="p">[</span><span class="n">CPU_STATE_USER</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">r_load</span><span class="p">.</span><span class="n">cpu_ticks</span><span class="p">[</span><span class="n">CPU_STATE_NICE</span><span class="p">];</span><span class="w"></span>
<span class="w">      </span><span class="n">sample</span><span class="o">-&gt;</span><span class="n">totalIdleTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r_load</span><span class="p">.</span><span class="n">cpu_ticks</span><span class="p">[</span><span class="n">CPU_STATE_IDLE</span><span class="p">];</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">print_sample</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="o">*</span><span class="w"> </span><span class="n">sample</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample</span><span class="o">-&gt;</span><span class="n">totalSystemTime</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sample</span><span class="o">-&gt;</span><span class="n">totalUserTime</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sample</span><span class="o">-&gt;</span><span class="n">totalIdleTime</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="kt">double</span><span class="w"> </span><span class="n">one_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">total</span><span class="o">/</span><span class="mf">100.0f</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">"Idle: %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="w"> </span><span class="n">sample</span><span class="o">-&gt;</span><span class="n">totalIdleTime</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">one_percent</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">"Starting...</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="w"> </span><span class="n">samples</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
<span class="w">      </span><span class="n">sample</span><span class="p">(</span><span class="o">&amp;</span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>

<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="c1">// Sample into the next slot on each cycle</span>
<span class="w">          </span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="o">*</span><span class="w"> </span><span class="n">sample1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<span class="w">          </span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="o">*</span><span class="w"> </span><span class="n">sample2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">samples</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<span class="w">          </span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="n">sample</span><span class="p">(</span><span class="n">sample2</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="w"> </span><span class="n">delta</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="n">delta</span><span class="p">.</span><span class="n">totalSystemTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample2</span><span class="o">-&gt;</span><span class="n">totalSystemTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">sample1</span><span class="o">-&gt;</span><span class="n">totalSystemTime</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="n">delta</span><span class="p">.</span><span class="n">totalUserTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample2</span><span class="o">-&gt;</span><span class="n">totalUserTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">sample1</span><span class="o">-&gt;</span><span class="n">totalUserTime</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="n">delta</span><span class="p">.</span><span class="n">totalIdleTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample2</span><span class="o">-&gt;</span><span class="n">totalIdleTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">sample1</span><span class="o">-&gt;</span><span class="n">totalIdleTime</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="n">print_sample</span><span class="p">(</span><span class="o">&amp;</span><span class="n">delta</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="n">memcpy</span><span class="p">(</span><span class="n">sample2</span><span class="p">,</span><span class="w"> </span><span class="n">sample1</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">cpusample</span><span class="p">));</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="270230680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270230680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270230680">(Feb 01 2022 at 15:36)</a>:</h4>
<p>memcpy'd the wrong direction....</p>



<a name="270231041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270231041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270231041">(Feb 01 2022 at 15:37)</a>:</h4>
<p>ok, so I have a C impl that works well, now will need to try to get it working on the python code</p>



<a name="270756272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270756272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270756272">(Feb 04 2022 at 18:47)</a>:</h4>
<p>ok, put up <a href="https://github.com/rust-lang/rust/pull/93657">https://github.com/rust-lang/rust/pull/93657</a></p>



<a name="270895313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270895313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270895313">(Feb 06 2022 at 15:28)</a>:</h4>
<p>x86_64-apple:</p>
<p><a href="/user_uploads/4715/NeBucxZR0EgeLNbmNM6EBP2-/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/NeBucxZR0EgeLNbmNM6EBP2-/image.png" title="image.png"><img src="/user_uploads/4715/NeBucxZR0EgeLNbmNM6EBP2-/image.png"></a></div>



<a name="270895326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270895326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270895326">(Feb 06 2022 at 15:28)</a>:</h4>
<p>so looks like we are actually mostly using the CPU fully on at least this apple builder, not too much slack left (unlike the previous 70% conclusion)</p>



<a name="270895900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/270895900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#270895900">(Feb 06 2022 at 15:42)</a>:</h4>
<p>Better data is still good, even if it's not the data we hoped for.</p>



<a name="271458814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271458814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271458814">(Feb 10 2022 at 16:46)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> I put up <a href="https://github.com/rust-lang/rust/pull/93862">https://github.com/rust-lang/rust/pull/93862</a> to split the x86_64-apple builder up -- given the CPU data above it doesn't seem like we're going to get any internal parallelism wins really.</p>



<a name="271459039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271459039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271459039">(Feb 10 2022 at 16:47)</a>:</h4>
<p>I'll take a look shortly</p>



<a name="271459050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271459050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271459050">(Feb 10 2022 at 16:48)</a>:</h4>
<p>and I agree splitting is the only way to go</p>



<a name="271459089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271459089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271459089">(Feb 10 2022 at 16:48)</a>:</h4>
<p>(well, shortly =&gt; today)</p>



<a name="271459160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271459160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271459160">(Feb 10 2022 at 16:48)</a>:</h4>
<p>yeah, just don't want to make it sit too long and I know you mentioned your inbox is overloaded -- no rush</p>



<a name="271611999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271611999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271611999">(Feb 11 2022 at 17:45)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span>  Merged in under 3 hours!!!<br>
<a href="/user_uploads/4715/_29QWgMHcMl4QN1_kgj6_8qQ/image.png">image.png</a> <br>
That's amazing!!<br>
Thanks so much Mark :D <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>
<div class="message_inline_image"><a href="/user_uploads/4715/_29QWgMHcMl4QN1_kgj6_8qQ/image.png" title="image.png"><img src="/user_uploads/4715/_29QWgMHcMl4QN1_kgj6_8qQ/image.png"></a></div>



<a name="271628199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271628199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271628199">(Feb 11 2022 at 19:53)</a>:</h4>
<p>We should be around 2 hours and 20-25 minutes on merges, in part due to the splitting but also GHA getting faster in the last week or so by a good bit</p>



<a name="271628358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271628358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271628358">(Feb 11 2022 at 19:54)</a>:</h4>
<p>the drop on x86_64-apple at the end is all GHA (and it reproduces across other macos builders too):</p>
<p><a href="/user_uploads/4715/5C1tLubXBs38jzinhScO6NP6/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/5C1tLubXBs38jzinhScO6NP6/image.png" title="image.png"><img src="/user_uploads/4715/5C1tLubXBs38jzinhScO6NP6/image.png"></a></div>



<a name="271628650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271628650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271628650">(Feb 11 2022 at 19:57)</a>:</h4>
<p>I guess the last dip (in the utilization chart) is the dist step, building the gz archives? Maybe that's still worth optimizing</p>



<a name="271629348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271629348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271629348">(Feb 11 2022 at 20:02)</a>:</h4>
<p>yeah, maybe. not sure.</p>



<a name="271630029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271630029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271630029">(Feb 11 2022 at 20:07)</a>:</h4>
<p>fwiw, new graph:</p>
<p><a href="/user_uploads/4715/gleSfJ3oQFEWyvlHel0cKe2I/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/gleSfJ3oQFEWyvlHel0cKe2I/image.png" title="image.png"><img src="/user_uploads/4715/gleSfJ3oQFEWyvlHel0cKe2I/image.png"></a></div>



<a name="271631182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271631182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271631182">(Feb 11 2022 at 20:17)</a>:</h4>
<p>I'm going to go ahead and move a couple more things over to x86_64-apple-2, since it looks like that's taking 1h30m, which is much smaller</p>



<a name="271631401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271631401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271631401">(Feb 11 2022 at 20:19)</a>:</h4>
<p>oh is there an announcement on GHA getting an upgrade or something? :)</p>



<a name="271631466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271631466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271631466">(Feb 11 2022 at 20:20)</a>:</h4>
<p>Or was this just something for the rust-lang org?</p>



<a name="271631532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271631532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271631532">(Feb 11 2022 at 20:21)</a>:</h4>
<p>I suspect it's just bringing online a new pool spreading out load or something similarly behind the scenes</p>



<a name="271631611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271631611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271631611">(Feb 11 2022 at 20:21)</a>:</h4>
<p>Also we might want to consider reducing the bors-run-timeout limit now...?<br>
I think it was like 4 hours or 4 hours 20 minutes previously, maybe it makes sense to reduced it to something between 3 hours or 3hours 30 minś? :)</p>



<a name="271631757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271631757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271631757">(Feb 11 2022 at 20:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/242791-t-infra/topic/apple.20ci.20cpu-usage/near/271630029">said</a>:</p>
<blockquote>
<p>fwiw, new graph:</p>
<p><a href="/user_uploads/4715/gleSfJ3oQFEWyvlHel0cKe2I/image.png">image.png</a></p>
</blockquote>
<p>wow that's quite the improvement :)</p>



<a name="271633001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271633001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271633001">(Feb 11 2022 at 20:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="217864">matthiaskrgr</span> <a href="#narrow/stream/242791-t-infra/topic/apple.20ci.20cpu-usage/near/271631611">said</a>:</p>
<blockquote>
<p>Also we might want to consider reducing the bors-run-timeout limit now...?<br>
I think it was like 4 hours or 4 hours 20 minutes previously, maybe it makes sense to reduced it to something between 3 hours or 3hours 30 minś? :)</p>
</blockquote>
<p>yeah, we can probably drop it now</p>



<a name="271633010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271633010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271633010">(Feb 11 2022 at 20:33)</a>:</h4>
<p>let me switch to graphing max rather than median</p>



<a name="271633097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271633097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271633097">(Feb 11 2022 at 20:34)</a>:</h4>
<p><a href="/user_uploads/4715/2_feBd1etINGoII5FXIJQhkl/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/2_feBd1etINGoII5FXIJQhkl/image.png" title="image.png"><img src="/user_uploads/4715/2_feBd1etINGoII5FXIJQhkl/image.png"></a></div>



<a name="271633128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271633128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271633128">(Feb 11 2022 at 20:34)</a>:</h4>
<p>yeah so max looks like we'll be around the 3 hour mark pretty safely</p>



<a name="271633975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271633975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271633975">(Feb 11 2022 at 20:40)</a>:</h4>
<p>put up a PR to drop the max time - <a href="https://github.com/rust-lang/homu/pull/163">https://github.com/rust-lang/homu/pull/163</a></p>



<a name="271842768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple%20ci%20cpu-usage/near/271842768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/apple.20ci.20cpu-usage.html#271842768">(Feb 14 2022 at 15:35)</a>:</h4>
<p>hit 10 PRs/day merged for the first time since September :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
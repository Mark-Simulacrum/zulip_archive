<html>
<head><meta charset="utf-8"><title>x.py calls itself recursively? · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html">x.py calls itself recursively?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="210290435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210290435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210290435">(Sep 16 2020 at 16:58)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> and I found that <code>x.py dist</code> (with any number of arguments) recursively calls <code>x.py build</code>. Is that intentional? It's caused assertion failures because it doesn't preserve the <code>--stage</code> flag.</p>



<a name="210290470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210290470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210290470">(Sep 16 2020 at 16:59)</a>:</h4>
<p>debugging: <a href="https://dev.azure.com/rust-lang/rust/_build/results?buildId=36647&amp;view=logs&amp;j=47a1bc7e-8c45-538f-b0da-4f81d313a4e0&amp;t=996ebcfa-683f-59d2-16b2-142a9e0870fc&amp;l=328">https://dev.azure.com/rust-lang/rust/_build/results?buildId=36647&amp;view=logs&amp;j=47a1bc7e-8c45-538f-b0da-4f81d313a4e0&amp;t=996ebcfa-683f-59d2-16b2-142a9e0870fc&amp;l=328</a><br>
original failure: <a href="https://github.com/rust-lang/rust/pull/75991">https://github.com/rust-lang/rust/pull/75991</a></p>



<a name="210290511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210290511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210290511">(Sep 16 2020 at 16:59)</a>:</h4>
<p>"Recursive Make Considered Harmful"</p>



<a name="210290534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210290534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210290534">(Sep 16 2020 at 16:59)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/76799/">https://github.com/rust-lang/rust/pull/76799/</a> might be related?</p>



<a name="210290781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210290781" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210290781">(Sep 16 2020 at 17:01)</a>:</h4>
<p>actually let me try rebasing over that and see if it helps</p>



<a name="210291159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291159">(Sep 16 2020 at 17:04)</a>:</h4>
<p>is not related</p>



<a name="210291218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291218">(Sep 16 2020 at 17:04)</a>:</h4>
<p>no idea what's happening</p>



<a name="210291233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291233">(Sep 16 2020 at 17:05)</a>:</h4>
<p>std::backtrace::Backtrace::new() on those debugs?</p>



<a name="210291308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291308" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291308">(Sep 16 2020 at 17:05)</a>:</h4>
<p>oh I know what's up</p>



<a name="210291324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291324" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291324">(Sep 16 2020 at 17:06)</a>:</h4>
<p><a href="https://github.com/Mark-Simulacrum/rust/blob/3c6cf7ecc36c5effa564b575061e9a6e7596d554/src/bootstrap/flags.rs#L442">https://github.com/Mark-Simulacrum/rust/blob/3c6cf7ecc36c5effa564b575061e9a6e7596d554/src/bootstrap/flags.rs#L442</a></p>



<a name="210291430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291430">(Sep 16 2020 at 17:06)</a>:</h4>
<p>lol adding logging causes builds to fail <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="210291435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291435">(Sep 16 2020 at 17:06)</a>:</h4>
<p>talk about a heisenbug</p>



<a name="210291437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291437" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291437">(Sep 16 2020 at 17:06)</a>:</h4>
<p>probably all of that should be gated on needs_help</p>



<a name="210291468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291468" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291468">(Sep 16 2020 at 17:07)</a>:</h4>
<p>happy to r+ a PR</p>



<a name="210291476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291476">(Sep 16 2020 at 17:07)</a>:</h4>
<p>sure, I'm working on it</p>



<a name="210291490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/x.py%20calls%20itself%20recursively%3F/near/210291490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/x.2Epy.20calls.20itself.20recursively.3F.html#210291490">(Sep 16 2020 at 17:07)</a>:</h4>
<p>thanks for the help!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
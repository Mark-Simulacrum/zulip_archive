<html>
<head><meta charset="utf-8"><title>playground observer · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html">playground observer</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270979687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/playground%20observer/near/270979687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html#270979687">(Feb 07 2022 at 13:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you think it would be a good/bad/useless idea for the playground web server to also be a jobserver? That way if only a single request is being processed, it could make use of both CPUs on the instance.</p>



<a name="270979896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/playground%20observer/near/270979896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html#270979896">(Feb 07 2022 at 13:47)</a>:</h4>
<p>I wouldn't expect it to be that helpful, the compiler itself is pretty single threaded on short files</p>



<a name="270979991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/playground%20observer/near/270979991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html#270979991">(Feb 07 2022 at 13:48)</a>:</h4>
<p>And it's probably a pain to actually do that well across the docker boundary - it's hard to sandbox jobserver protocol in a way that guarantees tokens are returned to the pool.</p>



<a name="270987221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/playground%20observer/near/270987221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html#270987221">(Feb 07 2022 at 14:40)</a>:</h4>
<p>Shouldn't the scheduler already take care of it? new cgroup for each container and the default CPU weight -&gt; even split if both are competing for cycles but ability to use all cores when they're unused</p>



<a name="270989595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/playground%20observer/near/270989595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html#270989595">(Feb 07 2022 at 14:57)</a>:</h4>
<p>assuming it doesn't spawn more containers than cores</p>



<a name="271016476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/playground%20observer/near/271016476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html#271016476">(Feb 07 2022 at 17:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/242791-t-infra/topic/playground.20observer/near/270989595">said</a>:</p>
<blockquote>
<p>assuming it doesn't spawn more containers than cores</p>
</blockquote>
<p>This is not true currently. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> It's something that I'm looking into addressing.</p>



<a name="271016687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/playground%20observer/near/271016687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/playground.20observer.html#271016687">(Feb 07 2022 at 17:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/242791-t-infra/topic/playground.20observer/near/270987221">said</a>:</p>
<blockquote>
<p>Shouldn't the scheduler already take care of it? new cgroup for each container and the default CPU weight -&gt; even split if both are competing for cycles but ability to use all cores when they're unused</p>
</blockquote>
<p>There's also things like <a href="https://github.com/integer32llc/rust-playground/blob/master/compiler/base/Cargo.toml#L7">https://github.com/integer32llc/rust-playground/blob/master/compiler/base/Cargo.toml#L7</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
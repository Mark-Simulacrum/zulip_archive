<html>
<head><meta charset="utf-8"><title>drop range tracking ICEs · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html">drop range tracking ICEs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268958758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268958758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268958758">(Jan 22 2022 at 13:50)</a>:</h4>
<p>a heads up: <a href="https://github.com/rust-lang/rust/issues/93161">#93161</a> has reached nightly, and there are already a few duplicates and similar issues being opened</p>



<a name="268958772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268958772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268958772">(Jan 22 2022 at 13:51)</a>:</h4>
<p>drop range tracking should be disabled by <a href="https://github.com/rust-lang/rust/issues/93165">#93165</a> currently being tested in rollup <a href="https://github.com/rust-lang/rust/issues/93191">#93191</a> (which could land real soon)</p>



<a name="268958903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268958903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268958903">(Jan 22 2022 at 13:54)</a>:</h4>
<p>at a glance it's hard to see if the other issues are actually duplicates, 93161 would supposedly be fixed by 93180, but this PR does not fix the "same" ice on <code>tonic</code> for example</p>



<a name="268959038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268959038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268959038">(Jan 22 2022 at 13:57)</a>:</h4>
<p>(I've avoided asking for a try build for 93165 since the rollup should land soon, and to avoid messing with bors and the in-progress testing. if it fails I'll trigger a try build and check on tonic, <a href="https://github.com/rust-lang/rust/issues/93190">#93190</a>, <a href="https://github.com/rust-lang/rust/issues/93197">#93197</a>, and <a href="https://github.com/rust-lang/rust/issues/93195">#93195</a>)</p>



<a name="268959846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268959846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268959846">(Jan 22 2022 at 14:15)</a>:</h4>
<p>oh sorry I didn't see that in time</p>



<a name="268959973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268959973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268959973">(Jan 22 2022 at 14:18)</a>:</h4>
<p>what was your plan?<br>
wait for the rollup to be retried and then r- and then do a try or perf run of <a href="https://github.com/rust-lang/rust/pull/93165">https://github.com/rust-lang/rust/pull/93165</a>?</p>



<a name="268959979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268959979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268959979">(Jan 22 2022 at 14:18)</a>:</h4>
<p>aaah, the joys of communication across different channels at the same time <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="268960072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960072">(Jan 22 2022 at 14:21)</a>:</h4>
<p>haha</p>



<a name="268960137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960137">(Jan 22 2022 at 14:22)</a>:</h4>
<p><span class="user-mention" data-user-id="217864">@matthiaskrgr</span> the try build should be done soon and we can re-land the rollup and save a few hours, right ?</p>



<a name="268960153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960153">(Jan 22 2022 at 14:23)</a>:</h4>
<p>or find an alternative like a real revert if it doesn't fix it, and land the rollup minus the PR in the meantime so the queue goes on</p>



<a name="268960213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960213">(Jan 22 2022 at 14:24)</a>:</h4>
<p>how is the rollup related?</p>



<a name="268960217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960217">(Jan 22 2022 at 14:24)</a>:</h4>
<p>it contains the PR</p>



<a name="268960222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960222">(Jan 22 2022 at 14:24)</a>:</h4>
<p>r- the PR doesn't impact the rollup ?</p>



<a name="268960233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960233" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960233">(Jan 22 2022 at 14:25)</a>:</h4>
<p>Oh you are right, shoot.. I thought I skipped it</p>



<a name="268960245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960245">(Jan 22 2022 at 14:25)</a>:</h4>
<p>I probably skipped it in the rollup earlier that failed because of some other issue.</p>



<a name="268960287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960287">(Jan 22 2022 at 14:26)</a>:</h4>
<p>then maybe we should open a new rollup without the PR ?</p>



<a name="268960291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960291">(Jan 22 2022 at 14:26)</a>:</h4>
<p>and if the PR ultimately succeeds in fixing the issues, we'll p=1 it and be done with it</p>



<a name="268960296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960296">(Jan 22 2022 at 14:26)</a>:</h4>
<p>I actually didn't want it to be part of the rollup in case of perf changes (the original PR already had a lot of perf changes)<br>
Yeah, I'll abort the rollup</p>



<a name="268960305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960305">(Jan 22 2022 at 14:26)</a>:</h4>
<p>yeah I saw the -90% <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="268960455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960455">(Jan 22 2022 at 14:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116113">lqd</span> <a href="#narrow/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs/near/268960222">said</a>:</p>
<blockquote>
<p>r- the PR doesn't impact the rollup ?</p>
</blockquote>
<p>I don't think github know if a pr has r+ or r-.<br>
The rollup is just separate PR and it "just happens" to include all commits of a different PR.  I think github just sees this and if it is merged it closes both prs since all of their commits are merged into master, or something like that.</p>



<a name="268960550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960550">(Jan 22 2022 at 14:33)</a>:</h4>
<p>ah interesting</p>



<a name="268960671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960671">(Jan 22 2022 at 14:36)</a>:</h4>
<p>If you have a rollup that contains a PR A and A gets <code>r-</code>'d after the rollup starts in ci, I think A would still be merged and closed if the rollup passes ci</p>



<a name="268960689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960689">(Jan 22 2022 at 14:37)</a>:</h4>
<p>although I would not want to test this right now... :p</p>



<a name="268960840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268960840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268960840">(Jan 22 2022 at 14:41)</a>:</h4>
<p>thanks for taking care of the new rollup; I'll test 93165 once the try build completes and re-r+ if it does work (and be like <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span> if it doesn't)</p>



<a name="268966819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/drop%20range%20tracking%20ICEs/near/268966819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/drop.20range.20tracking.20ICEs.html#268966819">(Jan 22 2022 at 16:59)</a>:</h4>
<p>summary:</p>
<ul>
<li>I was able to verify <a href="https://github.com/rust-lang/rust/issues/93165">#93165</a> fixes the ICE on tonic, <a href="https://github.com/rust-lang/rust/issues/93190">#93190</a>, <a href="https://github.com/rust-lang/rust/issues/93195">#93195</a>, <a href="https://github.com/rust-lang/rust/issues/93207">#93207</a> so I closed them all as duplicates of <a href="https://github.com/rust-lang/rust/issues/93161">#93161</a> and reapproved the PR, hoping it lands by tomorrow's nightly</li>
<li>I wasn't able to test <a href="https://github.com/rust-lang/rust/issues/93197">#93197</a> (it is different from the other duplicates, but still related to drop range tracking) myself, but I've been told that neither <a href="https://github.com/rust-lang/rust/issues/93165">#93165</a> nor <a href="https://github.com/rust-lang/rust/issues/93180">#93180</a> do fix it. I've pinged the author so they take a look at it.</li>
</ul>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>2021-09-21 nightly missing · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html">2021-09-21 nightly missing</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254237191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254237191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254237191">(Sep 21 2021 at 16:32)</a>:</h4>
<p>I can't find any discussion or issues about this, but I was waiting for today's nightly (i.e. the one that should've been released ~16h ago), as it has one of my PRs in it, and it's just not there</p>



<a name="254237371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254237371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254237371">(Sep 21 2021 at 16:33)</a>:</h4>
<p>Hm this could be the terraform changes fault</p>



<a name="254237373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254237373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254237373">(Sep 21 2021 at 16:33)</a>:</h4>
<p>I don't know if this is the right place to discuss it, but I can't quickly find anywhere that would let me see the logs for the automated promotion of a build to nightly, so I'm guessing that stuff is private and maintained by T-infra</p>



<a name="254237483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254237483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254237483">(Sep 21 2021 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254237371">said</a>:</p>
<blockquote>
<p>Hm this could be the terraform changes fault</p>
</blockquote>
<p>hmm and nobody wanted specifically today's nightly yet?</p>



<a name="254237522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254237522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254237522">(Sep 21 2021 at 16:34)</a>:</h4>
<p>so nobody noticed?</p>



<a name="254237543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254237543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254237543">(Sep 21 2021 at 16:34)</a>:</h4>
<p>Yeah seems possible let me look</p>



<a name="254237785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254237785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254237785">(Sep 21 2021 at 16:36)</a>:</h4>
<p>looking at recent issues, there's <a href="https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467">https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467</a> so maybe <span class="user-mention" data-user-id="307537">@Noah Lev</span> could've run into it, but only if trying to test the fix (yay timezones)</p>



<a name="254238356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254238356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254238356">(Sep 21 2021 at 16:39)</a>:</h4>
<blockquote>
<p>Error: No space left on device (os error 28)</p>
</blockquote>



<a name="254238362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254238362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254238362">(Sep 21 2021 at 16:40)</a>:</h4>
<p>well that's awkward</p>



<a name="254238497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254238497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254238497">(Sep 21 2021 at 16:40)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="121055">@Pietro Albini</span> -- looks like nightly is "too big"</p>



<a name="254239223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254239223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254239223">(Sep 21 2021 at 16:45)</a>:</h4>
<p>looks like we're on BUILD_GENERAL1_LARGE with a linux container right now</p>



<a name="254239265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254239265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254239265">(Sep 21 2021 at 16:45)</a>:</h4>
<p>that gives us 128 GB</p>



<a name="254239567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254239567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254239567">(Sep 21 2021 at 16:47)</a>:</h4>
<p>unfortunately it looks like the next tier is <em>way</em> bigger</p>



<a name="254240409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254240409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254240409">(Sep 21 2021 at 16:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254237785">said</a>:</p>
<blockquote>
<p>looking at recent issues, there's <a href="https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467">https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467</a> so maybe <span class="user-mention silent" data-user-id="307537">Noah Lev</span> could've run into it, but only if trying to test the fix (yay timezones)</p>
</blockquote>
<p>Yeah, I haven't tried to download the nightly because I don't have a machine to test that issue on. I was just notifying the people on the issue who would be able to test.</p>



<a name="254240537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254240537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254240537">(Sep 21 2021 at 16:53)</a>:</h4>
<p>But, indeed, <code>rustup update nightly</code> for me says the latest release was 2021-09-19, not 2021-09-20. (EDIT: fixed incorrect date)</p>



<a name="254240607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254240607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254240607">(Sep 21 2021 at 16:53)</a>:</h4>
<p>Okay, I'm going to temporarily bump us up to the next tier -- it is more expensive, but in the short term that seems like the right fix</p>



<a name="254240805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254240805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254240805">(Sep 21 2021 at 16:55)</a>:</h4>
<p>I'm wondering, what artifacts are taking up so much space?</p>



<a name="254241003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241003">(Sep 21 2021 at 16:56)</a>:</h4>
<p>Well, each release is pretty large, currently we try to store everything on the same disk</p>



<a name="254241084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241084">(Sep 21 2021 at 16:56)</a>:</h4>
<p><a href="https://github.com/rust-lang/promote-release/">https://github.com/rust-lang/promote-release/</a> is where the code running here lives</p>



<a name="254241127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241127">(Sep 21 2021 at 16:56)</a>:</h4>
<p>Are all targets' artifacts on one disk, or one target per disk?</p>



<a name="254241153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241153">(Sep 21 2021 at 16:57)</a>:</h4>
<p>I think the fix is probably to make it more of a streaming computation rather than "download everything", then process, then reupload</p>



<a name="254241201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241201">(Sep 21 2021 at 16:57)</a>:</h4>
<p>all artifacts (targets, hosts, etc.) for a given release</p>



<a name="254241215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241215">(Sep 21 2021 at 16:57)</a>:</h4>
<p>does AWS not have a remote copy command or something?</p>



<a name="254241223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241223">(Sep 21 2021 at 16:57)</a>:</h4>
<p>it does</p>



<a name="254241246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241246">(Sep 21 2021 at 16:57)</a>:</h4>
<p>I'm surprised they're downloaded at all</p>



<a name="254241247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241247">(Sep 21 2021 at 16:57)</a>:</h4>
<p>well, I think so, it's just that we do some processing too</p>



<a name="254241262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241262">(Sep 21 2021 at 16:57)</a>:</h4>
<p>like recompression and such</p>



<a name="254241277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241277">(Sep 21 2021 at 16:57)</a>:</h4>
<p>aaah interesting</p>



<a name="254241577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241577">(Sep 21 2021 at 16:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254240409">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254237785">said</a>:</p>
<blockquote>
<p>looking at recent issues, there's <a href="https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467">https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467</a> so maybe <span class="user-mention silent" data-user-id="307537">Noah Lev</span> could've run into it, but only if trying to test the fix (yay timezones)</p>
</blockquote>
<p>Yeah, I haven't tried to download the nightly because I don't have a machine to test that issue on. I was just notifying the people on the issue who would be able to test.</p>
</blockquote>
<p>Ok, I left a comment on the issue so people aren't confused about why the nightly didn't get released.</p>



<a name="254241825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241825">(Sep 21 2021 at 17:00)</a>:</h4>
<p>I'm off to back to back meetings for the next 6 hours or something, but we should have a nightly in ~7 hours? it's 5pm utc</p>



<a name="254241952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254241952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254241952">(Sep 21 2021 at 17:01)</a>:</h4>
<p>yeah, I'll check tomorrow morning. thanks a lot!</p>



<a name="254242035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254242035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254242035">(Sep 21 2021 at 17:02)</a>:</h4>
<p>(I am not issuing a nightly right now because don't want to break things more on accident, though I think it would've been fine)</p>



<a name="254242124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254242124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254242124">(Sep 21 2021 at 17:02)</a>:</h4>
<p>no worries, it's pretty late over here anyway</p>



<a name="254262932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254262932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254262932">(Sep 21 2021 at 19:22)</a>:</h4>
<p>I also took the step of setting up a notification for <a href="mailto:admin@rust-lang.org">admin@rust-lang.org</a> from aws that should <em>hopefully</em> tell us when this happens in the future</p>



<a name="254262995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254262995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254262995">(Sep 21 2021 at 19:22)</a>:</h4>
<p>it's not quite the eventual way to do it probably (should integrate into our prometheus/grafana setup, I guess), but seems like a good step</p>



<a name="254296944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254296944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254296944">(Sep 22 2021 at 00:10)</a>:</h4>
<p>OK, looks like the build failed, probably due to my changes -- some permissions error</p>



<a name="254300719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254300719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254300719">(Sep 22 2021 at 01:03)</a>:</h4>
<p>and we have a nightly after fixing those!</p>



<a name="254306229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254306229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254306229">(Sep 22 2021 at 02:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254241577">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254240409">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254237785">said</a>:</p>
<blockquote>
<p>looking at recent issues, there's <a href="https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467">https://github.com/rust-lang/rust/issues/89085#issuecomment-923344467</a> so maybe <span class="user-mention silent" data-user-id="307537">Noah Lev</span> could've run into it, but only if trying to test the fix (yay timezones)</p>
</blockquote>
<p>Yeah, I haven't tried to download the nightly because I don't have a machine to test that issue on. I was just notifying the people on the issue who would be able to test.</p>
</blockquote>
<p>Ok, I left a comment on the issue so people aren't confused about why the nightly didn't get released.</p>
</blockquote>
<p>Btw, OP closed issue because they say the new nightly fixes it <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="254329973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254329973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254329973">(Sep 22 2021 at 08:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> this is really weird</p>



<a name="254330009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254330009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254330009">(Sep 22 2021 at 08:04)</a>:</h4>
<p>.xz artifacts for a nightly are 19.8gb</p>



<a name="254330042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254330042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254330042">(Sep 22 2021 at 08:05)</a>:</h4>
<p>so 128gb should be really really enough</p>



<a name="254330171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254330171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254330171">(Sep 22 2021 at 08:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing/near/254262932">said</a>:</p>
<blockquote>
<p>I also took the step of setting up a notification for <a href="mailto:admin@rust-lang.org">admin@rust-lang.org</a> from aws that should <em>hopefully</em> tell us when this happens in the future</p>
</blockquote>
<p>is that on terraform?</p>



<a name="254330333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254330333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254330333">(Sep 22 2021 at 08:08)</a>:</h4>
<p>hmm... <a href="https://docs.aws.amazon.com/codebuild/latest/userguide/build-env-ref-compute-types.html">https://docs.aws.amazon.com/codebuild/latest/userguide/build-env-ref-compute-types.html</a></p>
<blockquote>
<p>The disk space listed for each build environment is available only in the directory specified by the CODEBUILD_SRC_DIR environment variable.</p>
</blockquote>



<a name="254330733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254330733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254330733">(Sep 22 2021 at 08:12)</a>:</h4>
<p>ok I think if we change <code>/release</code> <a href="https://github.com/rust-lang/simpleinfra/blob/cd173bfafb96561d601159157e41d569824bf53a/terraform/releases/impl/promote-release.tf#L29">here</a> to <code>"${CODEBUILD_SRC_DIR}/work"</code> it <em>should</em> work again?</p>



<a name="254330854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254330854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254330854">(Sep 22 2021 at 08:13)</a>:</h4>
<p>I can try making and debugging the changes if you confirm terraform is up to date <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="254345876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254345876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254345876">(Sep 22 2021 at 10:28)</a>:</h4>
<p>I haven't pushed yet <span class="user-mention" data-user-id="121055">@Pietro Albini</span> no</p>



<a name="254345952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254345952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254345952">(Sep 22 2021 at 10:29)</a>:</h4>
<p>I'll take a look this morning and update that, maybe do a dev static nightly to test it or something</p>



<a name="254345987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254345987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254345987">(Sep 22 2021 at 10:29)</a>:</h4>
<p>sounds good!</p>



<a name="254354953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254354953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254354953">(Sep 22 2021 at 12:00)</a>:</h4>
<p>ok, changed to that locally and kicked off dev-static nightly</p>



<a name="254355492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2021-09-21%20nightly%20missing/near/254355492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2021-09-21.20nightly.20missing.html#254355492">(Sep 22 2021 at 12:05)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> .</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
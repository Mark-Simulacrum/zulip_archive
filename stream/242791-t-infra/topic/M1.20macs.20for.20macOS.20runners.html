<html>
<head><meta charset="utf-8"><title>M1 macs for macOS runners · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html">M1 macs for macOS runners</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="258071065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258071065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258071065">(Oct 18 2021 at 17:54)</a>:</h4>
<p>HN suggests that  <a href="https://www.hetzner.com/dedicated-rootserver/matrix-apple">https://www.hetzner.com/dedicated-rootserver/matrix-apple</a> will go live sometime tomorrow. Might this be the time for us to get more beefy build machines?</p>



<a name="258074555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258074555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258074555">(Oct 18 2021 at 18:16)</a>:</h4>
<p>Can you link to the HN comment(s)?</p>



<a name="258076022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258076022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258076022">(Oct 18 2021 at 18:25)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> the main problem with custom macOS runners right now is having to manage ephemeral builders on them</p>



<a name="258076109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258076109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258076109">(Oct 18 2021 at 18:25)</a>:</h4>
<p>there are already providers offering M1 macs, and we'd likely be able to get them sponsored from some, but still we'd need to configure and manage them</p>



<a name="258076196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258076196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258076196">(Oct 18 2021 at 18:26)</a>:</h4>
<p><a href="https://news.ycombinator.com/item?id=28908170">https://news.ycombinator.com/item?id=28908170</a></p>



<a name="258076465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258076465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258076465">(Oct 18 2021 at 18:28)</a>:</h4>
<p>semi-related: I finally bought an Apple Silicon machine. Hope to regularly run the tests on it</p>



<a name="258077211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258077211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258077211">(Oct 18 2021 at 18:33)</a>:</h4>
<p>I would love to help with getting a CI running on Macos ARM64. I actually have a test machine at Scaleway which I could use for that purpose. My idea was to set up a "shadow bors" as a first step which just runs dist/test CI on whatever is committed to auto.</p>



<a name="258077462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258077462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258077462">(Oct 18 2021 at 18:35)</a>:</h4>
<p>I worked on this a bit already: <a href="#narrow/stream/242791-t-infra/topic/CI.20on.20Macos.20ARM64">https://rust-lang.zulipchat.com/#narrow/stream/242791-t-infra/topic/CI.20on.20Macos.20ARM64</a></p>



<a name="258077996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258077996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258077996">(Oct 18 2021 at 18:38)</a>:</h4>
<p>yes, i expect that any such process will be relatively limited — we would not want to allow automatic posting comments to pull requests, for example</p>



<a name="258079834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258079834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258079834">(Oct 18 2021 at 18:50)</a>:</h4>
<p>Well, it could be a testbed for automation/sandboxing and eventually be run as part of the Rust infrastructure.</p>



<a name="258080215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258080215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258080215">(Oct 18 2021 at 18:52)</a>:</h4>
<p>As Pietro mentioned, the problem is largely around trust / maintenance. Gotta make sure that the builds are all separate from each other, can't escape out of the build onto the system, etc.</p>



<a name="258081875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258081875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258081875">(Oct 18 2021 at 19:02)</a>:</h4>
<p>With Monterey Macos-on-Macos VMs will be possible, which will help with that. In Big Sur M1 we only have limited sandboxing with <code>sandbox-exec</code>.</p>



<a name="258082335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/M1%20macs%20for%20macOS%20runners/near/258082335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/M1.20macs.20for.20macOS.20runners.html#258082335">(Oct 18 2021 at 19:05)</a>:</h4>
<p>Sounds like you've got a business plan ready to go :-)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Crater failure · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html">Crater failure</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249528352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249528352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249528352">(Aug 15 2021 at 20:06)</a>:</h4>
<p>Is it safe to restart <a href="https://crater.rust-lang.org/ex/pr-88041">https://crater.rust-lang.org/ex/pr-88041</a> ?</p>



<a name="249531466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249531466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249531466">(Aug 15 2021 at 21:33)</a>:</h4>
<p>Yes, restarted</p>



<a name="249531474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249531474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249531474">(Aug 15 2021 at 21:34)</a>:</h4>
<p>This started happening recently, haven't had a chance to investigate quite yet though I do have a couple theories.</p>



<a name="249532877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249532877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249532877">(Aug 15 2021 at 22:13)</a>:</h4>
<p>hm. looks like a non-transient failure, investigating</p>
<div class="codehilite"><pre><span></span><code>Aug 15 21:33:36 crater-gcp-2.infra.rust-lang.org docker[4493]: [2021-08-15T21:33:36Z INFO  rustwide::cmd::sandbox] checking if the docker daemon is running
Aug 15 21:33:36 crater-gcp-2.infra.rust-lang.org docker[4493]: [2021-08-15T21:33:36Z INFO  rustwide::cmd] running `Command { std: &quot;docker&quot; &quot;info&quot;, kill_on_drop: false }`
Aug 15 21:38:36 crater-gcp-2.infra.rust-lang.org docker[4493]: [2021-08-15T21:38:36Z ERROR rustwide::cmd] error running command: no output for 300 seconds
Aug 15 21:38:36 crater-gcp-2.infra.rust-lang.org docker[4493]: [2021-08-15T21:38:36Z ERROR crater::utils] docker is not running
Aug 15 21:38:36 crater-gcp-2.infra.rust-lang.org docker[4493]: [2021-08-15T21:38:36Z ERROR crater::utils] note: run with `RUST_BACKTRACE=1` to display a backtrace.
</code></pre></div>



<a name="249532921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249532921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249532921">(Aug 15 2021 at 22:14)</a>:</h4>
<p><code>docker info</code> indeed seems to hang, but docker ps works fine seemingly...</p>



<a name="249533315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249533315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249533315">(Aug 15 2021 at 22:24)</a>:</h4>
<p>I think it's because of</p>
<div class="codehilite"><pre><span></span><code>Filesystem      Size  Used Avail Use% Mounted on
tmpfs            13G     0   13G   0% /run/user/1001
</code></pre></div>



<a name="249534356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249534356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249534356">(Aug 15 2021 at 22:53)</a>:</h4>
<p>restarted docker - seems to have fixed the issue. but the /run/user/1001 tmpfs is still full.</p>



<a name="249534357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249534357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249534357">(Aug 15 2021 at 22:53)</a>:</h4>
<p>so not sure what actually caused docker to go unresponsive</p>



<a name="249547689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249547689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249547689">(Aug 16 2021 at 04:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/242791-t-infra/topic/Crater.20failure/near/249533315">said</a>:</p>
<blockquote>
<p>I think it's because of</p>
<p><div class="codehilite"><pre><span></span><code>Filesystem      Size  Used Avail Use% Mounted on
tmpfs            13G     0   13G   0% /run/user/1001
</code></pre></div><br>
</p>
</blockquote>
<p>Looks empty to me with lots of available space. Am I missing something?</p>



<a name="249547821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249547821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249547821">(Aug 16 2021 at 04:33)</a>:</h4>
<p>/run is weird, I wouldn't expect that to be accurate tbh</p>



<a name="249622891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249622891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249622891">(Aug 16 2021 at 17:50)</a>:</h4>
<p>The job now seems stuck at 354280 crates completed: <a href="https://crater.rust-lang.org/ex/pr-88041">https://crater.rust-lang.org/ex/pr-88041</a></p>



<a name="249625325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249625325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249625325">(Aug 16 2021 at 18:08)</a>:</h4>
<p>It's likely waiting for one of the builders to come online and finish</p>



<a name="249641597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249641597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249641597">(Aug 16 2021 at 20:16)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> Two of the agents are marked 'Online', and one is 'Unreachable'</p>



<a name="249642089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Crater%20failure/near/249642089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Crater.20failure.html#249642089">(Aug 16 2021 at 20:20)</a>:</h4>
<p>yeah, this is <a href="https://github.com/rust-lang/crater/issues/577">https://github.com/rust-lang/crater/issues/577</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
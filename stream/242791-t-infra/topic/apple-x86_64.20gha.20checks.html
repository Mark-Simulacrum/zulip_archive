<html>
<head><meta charset="utf-8"><title>apple-x86_64 gha checks · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html">apple-x86_64 gha checks</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="214918325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/214918325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#214918325">(Oct 29 2020 at 01:51)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/78432">#78432</a>, <a href="https://github.com/rust-lang-ci/rust/runs/1323896596">failed</a> test test/debuginfo/pretty-std-collections.rs because of</p>
<div class="codehilite"><pre><span></span><code>stderr:
------------------------------------------
error: need to add support for DW_TAG_base_type &#39;()&#39; encoded with DW_ATE = 0x7, bit_size = 0
clang: CommandLine Error: Option &#39;h&#39; registered more than once!
LLVM ERROR: inconsistency in registered CommandLine options
clang: CommandLine Error: Option &#39;h&#39; registered more than once!
LLVM ERROR: inconsistency in registered CommandLine options
</code></pre></div>


<p>At least on the surface, the PR should've not affected anything to do with the error being reported.  Just want to check before I go investigate if anyone has any clues if this is a spurious failure? If so can someone restart the build?</p>



<a name="214938861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/214938861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#214938861">(Oct 29 2020 at 08:44)</a>:</h4>
<p><span class="user-mention" data-user-id="281950">@Aman Arora</span> that seems a weird error, retry?</p>



<a name="214946965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/214946965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#214946965">(Oct 29 2020 at 10:04)</a>:</h4>
<p>Yeah, seems spurious, I had a rollup fail with the same error</p>



<a name="214953427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/214953427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#214953427">(Oct 29 2020 at 11:19)</a>:</h4>
<p>that's a weird spurious</p>



<a name="214966788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/214966788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#214966788">(Oct 29 2020 at 13:36)</a>:</h4>
<p>hmm, actually that rollup was <a href="https://github.com/rust-lang/rust/pull/78501">https://github.com/rust-lang/rust/pull/78501</a>, which contained the PR above, so maybe that did cause it</p>



<a name="214966821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/214966821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#214966821">(Oct 29 2020 at 13:36)</a>:</h4>
<p>no idea how that would cause it though</p>



<a name="215000183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215000183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215000183">(Oct 29 2020 at 17:23)</a>:</h4>
<p>Hmm this got cancelled, looks like all agents had passed: <a href="https://github.com/rust-lang-ci/rust/runs/1328044356">https://github.com/rust-lang-ci/rust/runs/1328044356</a></p>



<a name="215000332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215000332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215000332">(Oct 29 2020 at 17:24)</a>:</h4>
<blockquote>
<p>GitHub Actions has encountered an internal error when running your job.</p>
</blockquote>



<a name="215001089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215001089" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215001089">(Oct 29 2020 at 17:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211727">Jonas Schievink</span> <a href="#narrow/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks/near/215000332">said</a>:</p>
<blockquote>
<blockquote>
<p>GitHub Actions has encountered an internal error when running your job.</p>
</blockquote>
</blockquote>
<p>curious, where do you see this?</p>



<a name="215001858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215001858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215001858">(Oct 29 2020 at 17:35)</a>:</h4>
<p>In the run overview: <a href="https://github.com/rust-lang-ci/rust/actions/runs/336037245">https://github.com/rust-lang-ci/rust/actions/runs/336037245</a></p>



<a name="215001944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215001944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215001944">(Oct 29 2020 at 17:36)</a>:</h4>
<p>I just had the same error happen to me in an unrelated repo: <a href="https://github.com/jonas-schievink/rubble/actions/runs/336357031">https://github.com/jonas-schievink/rubble/actions/runs/336357031</a></p>



<a name="215001998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215001998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215001998">(Oct 29 2020 at 17:36)</a>:</h4>
<p>Ah</p>



<a name="215002012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215002012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215002012">(Oct 29 2020 at 17:36)</a>:</h4>
<p>Thanks!</p>



<a name="215010095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215010095" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215010095">(Oct 29 2020 at 18:38)</a>:</h4>
<p>This rollup failed with the same error: <a href="https://github.com/rust-lang/rust/pull/78528#issuecomment-718943540">https://github.com/rust-lang/rust/pull/78528#issuecomment-718943540</a></p>
<p><a href="https://github.com/rust-lang-ci/rust/actions/runs/336351650">https://github.com/rust-lang-ci/rust/actions/runs/336351650</a></p>



<a name="215010527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215010527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215010527">(Oct 29 2020 at 18:42)</a>:</h4>
<p><a href="https://github.com/actions/runner/issues/744">https://github.com/actions/runner/issues/744</a> intermittent failure? Nothing was explicitly linked to fixing it</p>



<a name="215014220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215014220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215014220">(Oct 29 2020 at 19:11)</a>:</h4>
<p>I don't have the time to investigate this right now, if nobody beats me to it I'll look at it next morning</p>



<a name="215050485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215050485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215050485">(Oct 30 2020 at 02:20)</a>:</h4>
<p>I think the rollup went through, can someone restart <a href="https://github.com/rust-lang/rust/pull/78432">https://github.com/rust-lang/rust/pull/78432</a></p>



<a name="215050588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215050588" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215050588">(Oct 30 2020 at 02:23)</a>:</h4>
<p>done</p>



<a name="215050761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215050761" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215050761">(Oct 30 2020 at 02:27)</a>:</h4>
<p>thank you <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="215120495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215120495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215120495">(Oct 30 2020 at 16:45)</a>:</h4>
<p>aight this got merged <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="215252046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215252046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215252046">(Nov 01 2020 at 16:50)</a>:</h4>
<p>I've gotten that spurious error twice in a row on <a href="https://github.com/rust-lang/rust/pull/75534">https://github.com/rust-lang/rust/pull/75534</a></p>



<a name="215253973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215253973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215253973">(Nov 01 2020 at 17:38)</a>:</h4>
<p>According to &lt;<a href="https://github.com/actions/virtual-environments">https://github.com/actions/virtual-environments</a>&gt;, they're rolling out an update for the apple runners, which is at 85% now. Maybe this happens only on the non-updated or only on the updated ones?</p>



<a name="215258060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215258060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215258060">(Nov 01 2020 at 19:24)</a>:</h4>
<p>the PR went through on the third try</p>



<a name="215260465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215260465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215260465">(Nov 01 2020 at 20:20)</a>:</h4>
<p>Always the third try <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="215262031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262031">(Nov 01 2020 at 20:59)</a>:</h4>
<p>another one of those failures: <a href="https://github.com/rust-lang/rust/pull/78640#issuecomment-720150429">https://github.com/rust-lang/rust/pull/78640#issuecomment-720150429</a> :(</p>



<a name="215262168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262168">(Nov 01 2020 at 21:02)</a>:</h4>
<p>I'll take a look first thing tomorrow</p>



<a name="215262261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262261" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262261">(Nov 01 2020 at 21:05)</a>:</h4>
<p>Looks like this same error message has been hit before: <a href="https://github.com/rust-lang/rust/issues/63266">https://github.com/rust-lang/rust/issues/63266</a></p>



<a name="215262263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262263" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262263">(Nov 01 2020 at 21:05)</a>:</h4>
<p>though that doesn't explain why it's showing up inconsistently on CI</p>



<a name="215262321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262321">(Nov 01 2020 at 21:06)</a>:</h4>
<p>I think I know what it is</p>



<a name="215262325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262325">(Nov 01 2020 at 21:07)</a>:</h4>
<p>for the builds we're using our own clang, version 10</p>



<a name="215262327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262327" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262327">(Nov 01 2020 at 21:07)</a>:</h4>
<p>but they upgraded to llvm 11 <a href="https://github.com/actions/virtual-environments/releases/tag/macOS-10.15%2F20201026.2">https://github.com/actions/virtual-environments/releases/tag/macOS-10.15%2F20201026.2</a></p>



<a name="215262330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262330">(Nov 01 2020 at 21:07)</a>:</h4>
<p>that's plausible with the rollouts</p>



<a name="215262332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215262332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215262332">(Nov 01 2020 at 21:07)</a>:</h4>
<p>tomorrow I'll open a ticket</p>



<a name="215299855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215299855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215299855">(Nov 02 2020 at 10:14)</a>:</h4>
<p><span class="user-mention" data-user-id="125254">@kennytm</span> <a href="https://github.com/rust-lang/rust/pull/78280">https://github.com/rust-lang/rust/pull/78280</a> is this</p>



<a name="215299868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215299868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215299868">(Nov 02 2020 at 10:14)</a>:</h4>
<p>(copy/pasted the wrong thing before)</p>



<a name="215299898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215299898" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215299898">(Nov 02 2020 at 10:14)</a>:</h4>
<p>and yeah I tested a bit in a local repository and the llvm version mismatch seems to be the cause</p>



<a name="215299944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215299944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215299944">(Nov 02 2020 at 10:15)</a>:</h4>
<p>we're bringing our own llvm 10 in the CI builders, but the recent virtual environments upgrade bumped the system version to llvm 11</p>



<a name="215299955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215299955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215299955">(Nov 02 2020 at 10:15)</a>:</h4>
<p>so we're using the system lldb 11 with llvm 10</p>



<a name="215300088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215300088" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215300088">(Nov 02 2020 at 10:17)</a>:</h4>
<p>I'm... not sure how to fix this tho</p>



<a name="215300110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215300110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215300110">(Nov 02 2020 at 10:17)</a>:</h4>
<p>llvm doesn't ship prebuilt lldb :/</p>



<a name="215301789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215301789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215301789">(Nov 02 2020 at 10:34)</a>:</h4>
<p>opened a ticket asking to roll us back temporarily to the old environment</p>



<a name="215303072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215303072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215303072">(Nov 02 2020 at 10:45)</a>:</h4>
<p>ok, so, this is weird because some builds with the new build environment are working</p>



<a name="215303773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215303773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215303773">(Nov 02 2020 at 10:54)</a>:</h4>
<p>ugh debugging this without a mac is painful</p>



<a name="215304123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215304123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215304123">(Nov 02 2020 at 10:58)</a>:</h4>
<p>Opened <a href="https://github.com/rust-lang/rust/issues/78665">#78665</a> before finding this topic, thanks for investigating :)</p>



<a name="215304149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215304149" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215304149">(Nov 02 2020 at 10:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks/near/215303072">said</a>:</p>
<blockquote>
<p>ok, so, this is weird because some builds with the new build environment are working</p>
</blockquote>
<p>yeah, <a href="https://github.com/rust-lang/rust/issues/75020">#75020</a> is fine but <a href="https://github.com/rust-lang/rust/issues/78661">#78661</a> failed to test :/</p>



<a name="215306419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306419">(Nov 02 2020 at 11:27)</a>:</h4>
<p>so, my working theory is that the problem lies somewhere with our <code>src/etc/lldb_batchmode.py</code></p>



<a name="215306426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306426">(Nov 02 2020 at 11:27)</a>:</h4>
<p>and how it interacts with the new lldb</p>



<a name="215306494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306494" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306494">(Nov 02 2020 at 11:28)</a>:</h4>
<p>I think the "clang" part of "clang: CommandLine Error: Option 'h' registered more than once!" is a red herring, because it doesn't make any sense we'd provide <code>clang</code> with <code>-h</code>/<code>--help</code></p>



<a name="215306605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306605">(Nov 02 2020 at 11:30)</a>:</h4>
<p>but while ripgrepping around I found <code>src/etc/lldb_commands</code>, which calls lldb's <code>type summary add</code>, which accepts a <code>-h</code> option that actually makes sense</p>



<a name="215306632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306632">(Nov 02 2020 at 11:30)</a>:</h4>
<div class="codehilite"><pre><span></span><code>-h ( --hide-empty )
     Do not expand aggregate data types with no children.
</code></pre></div>



<a name="215306657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306657" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306657">(Nov 02 2020 at 11:30)</a>:</h4>
<p>also, in <a href="https://github.com/rust-lang-ci/rust/runs/1337490520">https://github.com/rust-lang-ci/rust/runs/1337490520</a> the error message is this one:</p>
<div class="codehilite"><pre><span></span><code>clangclang: CommandLine Error: Option &#39;: CommandLine Error: Option &#39;hh&#39; registered more than once!
&#39; registered more than once!
LLVM ERROR: inconsistency in registered CommandLine options
LLVM ERROR: inconsistency in registered CommandLine options
</code></pre></div>



<a name="215306769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306769">(Nov 02 2020 at 11:32)</a>:</h4>
<p>that error message is printed by <a href="https://github.com/llvm/llvm-project/blob/9ffb5b0469ae593f8b7e1d7d9ef6ea46cd366e6e/llvm/lib/Support/CommandLine.cpp#L181-L185">https://github.com/llvm/llvm-project/blob/9ffb5b0469ae593f8b7e1d7d9ef6ea46cd366e6e/llvm/lib/Support/CommandLine.cpp#L181-L185</a>, and it overlaps exactly between the <code>&lt;&lt;</code>s</p>



<a name="215306821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306821">(Nov 02 2020 at 11:33)</a>:</h4>
<p>since it happens spuriously, and in one case it actually happened two times, I think it's <code>lldb_batchmode.py</code> that sends the commands to the new <code>lldb</code> too fast, or the new <code>lldb</code> is too slow to accept them</p>



<a name="215306845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306845">(Nov 02 2020 at 11:33)</a>:</h4>
<p>and so it breaks while sending <code>src/etc/lldb_commands</code></p>



<a name="215306979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306979">(Nov 02 2020 at 11:35)</a>:</h4>
<p>I haven't dig into <code>lldb_batchmode.py</code> yet, and not having a mac is making things hard (I'm tempted to just throw money at apple) :/</p>



<a name="215306988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215306988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215306988">(Nov 02 2020 at 11:35)</a>:</h4>
<p>/end</p>



<a name="215307082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215307082" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215307082">(Nov 02 2020 at 11:36)</a>:</h4>
<p>would be nice if apple would sponsor some macs for the rust infra team.</p>



<a name="215307297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215307297" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215307297">(Nov 02 2020 at 11:38)</a>:</h4>
<p>heh</p>



<a name="215307441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215307441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215307441">(Nov 02 2020 at 11:40)</a>:</h4>
<p>I guess it's now time to mindlessly read the lldb_batchmode source code and try to guess why it's broken</p>



<a name="215308453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215308453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215308453">(Nov 02 2020 at 11:54)</a>:</h4>
<p>ok no that's not the problem</p>



<a name="215308463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215308463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215308463">(Nov 02 2020 at 11:54)</a>:</h4>
<p><code>lldb_batchmode.py</code> doesn't load <code>lldb_commands</code></p>



<a name="215308519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215308519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215308519">(Nov 02 2020 at 11:55)</a>:</h4>
<p>and the error is happening before the script actually starts, since <a href="https://github.com/rust-lang/rust/blob/234099d1d12bef9d6e81a296222fbc272dc51d89/src/etc/lldb_batchmode.py#L174-L178"><code>lldb_batchmode.py</code> prints stuff at startup</a></p>



<a name="215308937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215308937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215308937">(Nov 02 2020 at 12:00)</a>:</h4>
<p>ok this makes less and less sense the more I look into it</p>



<a name="215308979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215308979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215308979">(Nov 02 2020 at 12:01)</a>:</h4>
<p>we're not passing anything to clang before <code>lldb_batchmode.py</code> starts up</p>



<a name="215309110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215309110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215309110">(Nov 02 2020 at 12:02)</a>:</h4>
<p>so either python is just eating <code>print</code>s (I know about buffering and <code>PYTHONUNBUFFERED</code>, but like, it should flush when it exits) or... dunno</p>



<a name="215309353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215309353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215309353">(Nov 02 2020 at 12:05)</a>:</h4>
<p><a href="https://github.com/llvm/llvm-project/blob/9ffb5b0469ae593f8b7e1d7d9ef6ea46cd366e6e/llvm/include/llvm/Support/ErrorHandling.h#L69-L70">great so LLVM just <code>abort()</code>s when there is an error</a></p>



<a name="215309440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215309440" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215309440">(Nov 02 2020 at 12:06)</a>:</h4>
<p>so it's possible that python doesn't have a chance to print the buffered output</p>



<a name="215309586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215309586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215309586">(Nov 02 2020 at 12:07)</a>:</h4>
<p><del>all of this would've been so nice with a device to test stuff on</del></p>



<a name="215311249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311249" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311249">(Nov 02 2020 at 12:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> opened <a href="https://github.com/rust-lang/rust/pull/78667">https://github.com/rust-lang/rust/pull/78667</a> to hopefully get vaguely useful data out of those failures</p>



<a name="215311348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311348">(Nov 02 2020 at 12:27)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> fwiw you can probably use our aarch64 mac?</p>



<a name="215311417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311417" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311417">(Nov 02 2020 at 12:28)</a>:</h4>
<p>I'm not sure our test suite actually works there</p>



<a name="215311465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311465">(Nov 02 2020 at 12:28)</a>:</h4>
<p>Hm ok</p>



<a name="215311499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311499" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311499">(Nov 02 2020 at 12:29)</a>:</h4>
<p>I can try running something in a while loop on my mac if that's helpful?</p>



<a name="215311649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311649">(Nov 02 2020 at 12:30)</a>:</h4>
<p>running debug tests in a loop could probably show it?</p>



<a name="215311692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311692">(Nov 02 2020 at 12:30)</a>:</h4>
<p>but I <em>guess</em> we need lldb from system llvm 11</p>



<a name="215311717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215311717" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215311717">(Nov 02 2020 at 12:31)</a>:</h4>
<p>dunno if that's what you have?</p>



<a name="215321730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215321730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215321730">(Nov 02 2020 at 14:02)</a>:</h4>
<p>I'll need to pull it out and I probably don't have time today unfortunately</p>



<a name="215337180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215337180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215337180">(Nov 02 2020 at 15:54)</a>:</h4>
<p>ok the extra debug information landed, ping me when it happens again</p>



<a name="215349503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215349503" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215349503">(Nov 02 2020 at 17:16)</a>:</h4>
<p>btw, got an answer from github support, they can't halt the rollout in our organization</p>



<a name="215349562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215349562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215349562">(Nov 02 2020 at 17:16)</a>:</h4>
<p>which... seems weird if we have rollouts, but it wouldn't be the most surprising thing I learned about github actions</p>



<a name="215379188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215379188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215379188">(Nov 02 2020 at 21:10)</a>:</h4>
<p>ok the buffering intuition was correct</p>



<a name="215379194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215379194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215379194">(Nov 02 2020 at 21:10)</a>:</h4>
<p>we were losing a bunch of messages</p>



<a name="215379196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215379196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215379196">(Nov 02 2020 at 21:10)</a>:</h4>
<p><a href="https://github.com/rust-lang-ci/rust/runs/1343837326">https://github.com/rust-lang-ci/rust/runs/1343837326</a></p>



<a name="215379363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215379363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215379363">(Nov 02 2020 at 21:11)</a>:</h4>
<div class="codehilite"><pre><span></span><code>---- [debuginfo-lldb] debuginfo/pretty-std-collections.rs stdout ----
NOTE: compiletest thinks it is using LLDB version 1200
NOTE: compiletest thinks it is using LLDB without native rust support

error: Error while running LLDB
status: exit code: 1
command: &quot;/usr/bin/python3&quot; &quot;/Users/runner/work/rust/rust/src/etc/lldb_batchmode.py&quot; &quot;/Users/runner/work/rust/rust/build/x86_64-apple-darwin/test/debuginfo/pretty-std-collections.lldb/a&quot; &quot;/Users/runner/work/rust/rust/build/x86_64-apple-darwin/test/debuginfo/pretty-std-collections.lldb/pretty-std-collections.debugger.script&quot;
stdout:
------------------------------------------
LLDB batch-mode script
----------------------
Debugger commands script is &#39;/Users/runner/work/rust/rust/build/x86_64-apple-darwin/test/debuginfo/pretty-std-collections.lldb/pretty-std-collections.debugger.script&#39;.
Target executable is &#39;/Users/runner/work/rust/rust/build/x86_64-apple-darwin/test/debuginfo/pretty-std-collections.lldb/a&#39;.
Current working directory is &#39;/Users/runner/work/rust/rust&#39;
Creating a target for &#39;/Users/runner/work/rust/rust/build/x86_64-apple-darwin/test/debuginfo/pretty-std-collections.lldb/a&#39;
settings set auto-confirm true

version
lldb-1200.0.32.1 Apple Swift version 5.3 (swiftlang-1200.0.29.2 clang-1200.0.30.1)
command script import /Users/runner/work/rust/rust/./src/etc/lldb_lookup.py
type synthetic add -l lldb_lookup.synthetic_lookup -x &#39;.*&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(alloc::([a-z_]+::)+)String$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^&amp;str$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^&amp;\[.+\]$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(std::ffi::([a-z_]+::)+)OsString$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(alloc::([a-z_]+::)+)Vec&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(alloc::([a-z_]+::)+)VecDeque&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(alloc::([a-z_]+::)+)BTreeSet&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(alloc::([a-z_]+::)+)BTreeMap&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(std::collections::([a-z_]+::)+)HashMap&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(std::collections::([a-z_]+::)+)HashSet&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(alloc::([a-z_]+::)+)Rc&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(alloc::([a-z_]+::)+)Arc&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(core::([a-z_]+::)+)Cell&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(core::([a-z_]+::)+)Ref&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(core::([a-z_]+::)+)RefMut&lt;.+&gt;$&#39; --category Rust
type summary add -F lldb_lookup.summary_lookup  -e -x -h &#39;^(core::([a-z_]+::)+)RefCell&lt;.+&gt;$&#39; --category Rust
type category enable Rust

breakpoint set --file &#39;pretty-std-collections.rs&#39; --line 158
Breakpoint 1: where = a`pretty_std_collections::main::h1ef1d7ce5967b6a7 + 1513 at pretty-std-collections.rs:158:5, address = 0x0000000100029399
Error while trying to register breakpoint callback, id = 1
run
Process 68725 stopped * thread #1, queue = &#39;com.apple.main-thread&#39;, stop reason = breakpoint 1.1 frame #0: 0x0000000100029399 a`pretty_std_collections::main::h1ef1d7ce5967b6a7 at pretty-std-collections.rs:158:5 155 hash_set.insert(i); 156 } 157 -&gt; 158 zzz(); // #break ^ 159 } 160 161 fn zzz() { Target 0: (a) stopped. Process 68725 launched: &#39;/Users/runner/work/rust/rust/build/x86_64-apple-darwin/test/debuginfo/pretty-std-collections.lldb/a&#39; (x86_64)
print vec_deque
(alloc::collections::vec_deque::VecDeque&lt;int&gt;) $0 = size=3 { [0] = 5 [1] = 3 [2] = 7 }
print vec_deque2
(alloc::collections::vec_deque::VecDeque&lt;int&gt;) $1 = size=7 { [0] = 2 [1] = 3 [2] = 4 [3] = 5 [4] = 6 [5] = 7 [6] = 8 }
print hash_map

------------------------------------------
stderr:
------------------------------------------
error: need to add support for DW_TAG_base_type &#39;()&#39; encoded with DW_ATE = 0x7, bit_size = 0
clang: CommandLine Error: Option &#39;h&#39; registered more than once!
LLVM ERROR: inconsistency in registered CommandLine options
</code></pre></div>



<a name="215438378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215438378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215438378">(Nov 03 2020 at 11:03)</a>:</h4>
<p>I'd love a review on <a href="https://github.com/rust-lang/rust/pull/78699">https://github.com/rust-lang/rust/pull/78699</a></p>



<a name="215438396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215438396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215438396">(Nov 03 2020 at 11:03)</a>:</h4>
<p>(from anyone, really)</p>



<a name="215439272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215439272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Silverstone <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215439272">(Nov 03 2020 at 11:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks/near/215438378">said</a>:</p>
<blockquote>
<p>I'd love a review on <a href="https://github.com/rust-lang/rust/pull/78699">https://github.com/rust-lang/rust/pull/78699</a></p>
</blockquote>
<p>I'm not confident saying this on the PR itself, but it looks reasonable to me.  I'm not experienced in python/llvm stuff</p>



<a name="215441581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215441581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215441581">(Nov 03 2020 at 11:36)</a>:</h4>
<p>Looks fine, I saw GetError is called below so presumably it's defined</p>



<a name="215695007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215695007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215695007">(Nov 05 2020 at 10:42)</a>:</h4>
<p>so, <code>error: need to add support for DW_TAG_base_type '()' encoded with DW_ATE = 0x7, bit_size = 0</code> is a false flag</p>



<a name="215695053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215695053" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215695053">(Nov 05 2020 at 10:43)</a>:</h4>
<p>I tried running the debuginfo test locally on my linux machine: the test passed, and when I disabled output capturing the error message was there</p>



<a name="215698961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215698961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215698961">(Nov 05 2020 at 11:25)</a>:</h4>
<p>the other error we're seeing is "Error while trying to register breakpoint callback, id = 1, message = error: could not get num args: can't find callable: breakpoint_callback"</p>



<a name="215698980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215698980" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215698980">(Nov 05 2020 at 11:25)</a>:</h4>
<p>which... doesn't make sense, that function is defined</p>



<a name="215718563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215718563" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215718563">(Nov 05 2020 at 14:30)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> I was looking at this a little last night.  The <code>can't find callable</code> is not mac-specific, it also happens on linux.  It's because the function isn't imported.  The lldb script interpreter has a "session" dictionary, and functions need to be specifically added to it to be called.</p>



<a name="215730987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215730987" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215730987">(Nov 05 2020 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> weird, I don't recall that error happening locally for me</p>



<a name="215731435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215731435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215731435">(Nov 05 2020 at 15:56)</a>:</h4>
<p>If you ran the test locally, at least for me it appears in <code>build/x86_64-unknown-linux-gnu/test/debuginfo/pretty-std-collections.lldb/pretty-std-collections.out</code>.    Maybe it depends on the version of lldb?  I have <code>lldb version 10.0.0</code> on linux and <code>lldb-1200.0.32.1</code> on macos.</p>



<a name="215732182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215732182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215732182">(Nov 05 2020 at 16:00)</a>:</h4>
<p>uh, I think that's because I have lldb 6 on my system <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="215732212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215732212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215732212">(Nov 05 2020 at 16:01)</a>:</h4>
<p>on it though the callback gets registered just fine</p>



<a name="215743542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215743542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215743542">(Nov 05 2020 at 17:11)</a>:</h4>
<p>I tried running the script in a loop on GitHub Actions for about 20 minutes (500 iterations), but wasn't able to get it to fail. <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="215952967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215952967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215952967">(Nov 07 2020 at 12:32)</a>:</h4>
<p>It seems to happen a lot less often now, but it happened again just now: &lt;<a href="https://github.com/rust-lang-ci/rust/runs/1367502589">https://github.com/rust-lang-ci/rust/runs/1367502589</a>&gt;</p>



<a name="215984940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/215984940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#215984940">(Nov 08 2020 at 02:29)</a>:</h4>
<p>It happened again in <a href="https://github.com/rust-lang-ci/rust/runs/1369020942">https://github.com/rust-lang-ci/rust/runs/1369020942</a></p>



<a name="216032713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216032713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216032713">(Nov 09 2020 at 00:07)</a>:</h4>
<p>Another case in <a href="https://github.com/rust-lang/rust/pull/78201#issuecomment-723674636">https://github.com/rust-lang/rust/pull/78201#issuecomment-723674636</a></p>



<a name="216062408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216062408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dániel Buga <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216062408">(Nov 09 2020 at 09:55)</a>:</h4>
<p>and one more: <a href="https://github.com/rust-lang-ci/rust/runs/1370761818">https://github.com/rust-lang-ci/rust/runs/1370761818</a></p>



<a name="216126761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216126761" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216126761">(Nov 09 2020 at 18:43)</a>:</h4>
<p>Would it make sense to temporarily disable this test while it's investigated further, or are the new failure logs providing additional information? This is resulting in a large number of spurious failures, and people who aren't aware of this issue may waste time trying to debug their own PR.</p>



<a name="216353968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216353968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216353968">(Nov 11 2020 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> ok my mac mini arrived earlier than expected, and I'm running the test in a loop</p>



<a name="216353982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216353982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216353982">(Nov 11 2020 at 14:41)</a>:</h4>
<p>and it's always succeeding</p>



<a name="216354018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216354018" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216354018">(Nov 11 2020 at 14:41)</a>:</h4>
<p>now I guess the next step is to try and reproduce the CI environment locally</p>



<a name="216354415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216354415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216354415">(Nov 11 2020 at 14:45)</a>:</h4>
<p>Yea, feel free to ask any questions. I've tried a large number of different things, I could maybe summarize them?  I tried a bunch to replicate GHA's environment locally, but never succeeded in reproducing it.</p>
<p>My current reproducer is <a href="https://github.com/ehuss/test/blob/pretty-std-collections/.github/workflows/main.yml">here</a> with the script <a href="https://github.com/ehuss/test/blob/pretty-std-collections/lldb-test.sh">lldb-test.sh</a>.  I tried some dyld debug printing, but nothing interesting showed up.</p>
<p>Unfortunately I don't know much about how lldb is implemented, and the codebase is quite large.</p>



<a name="216364312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216364312" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216364312">(Nov 11 2020 at 16:01)</a>:</h4>
<p>New data point: Xcode 11.7 doesn't seem to fail</p>



<a name="216817907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216817907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216817907">(Nov 15 2020 at 22:26)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> FWIW, I'm also seeing this on aarch64-apple-darwin.</p>



<a name="216817938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216817938" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216817938">(Nov 15 2020 at 22:27)</a>:</h4>
<p>Xcode 12.2 release, Big Sur, git commit <a href="https://github.com/rust-lang/rust/commit/9d78d1d02761b906038ba4d54c5f3427f920f5fb">9d78d1d02761b906038ba4d54c5f3427f920f5fb</a> (with some local modifications)</p>



<a name="216817979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216817979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216817979">(Nov 15 2020 at 22:28)</a>:</h4>
<p>reproduced via <code>x.py test --stage=2</code></p>



<a name="216818067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216818067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216818067">(Nov 15 2020 at 22:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> Was that running under the github actions runner, or were you running it manually?</p>



<a name="216818617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216818617" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216818617">(Nov 15 2020 at 22:40)</a>:</h4>
<p>Manually on the DTK. ￼</p>



<a name="216850195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216850195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216850195">(Nov 16 2020 at 09:47)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> LOL</p>



<a name="216850270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216850270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216850270">(Nov 16 2020 at 09:47)</a>:</h4>
<p>I tried a bunch to reproduce it with <code>./x.py test --stage 1</code>, and it never reproduced</p>



<a name="216850336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216850336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216850336">(Nov 16 2020 at 09:48)</a>:</h4>
<p>ran <code>./x.py test --stage 2</code> and it <em>immediately</em> failed <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="216850371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/apple-x86_64%20gha%20checks/near/216850371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/apple-x86_64.20gha.20checks.html#216850371">(Nov 16 2020 at 09:48)</a>:</h4>
<p>need to finish some release stuff, I'll then take a look at investigating it more in-depth</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
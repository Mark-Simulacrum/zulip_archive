<html>
<head><meta charset="utf-8"><title>Moving the playground to aarch64 · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html">Moving the playground to aarch64</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267269375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267269375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267269375">(Jan 08 2022 at 02:35)</a>:</h4>
<p>Mostly musing: The crates in the playground all appear to build on <code>aarch64-unknown-linux-gnu</code>. Would it be worth moving to an ARM EC2 instance?</p>



<a name="267269432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267269432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267269432">(Jan 08 2022 at 02:36)</a>:</h4>
<p>There'd be lots of details to hammer out, of course.</p>



<a name="267269930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267269930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267269930">(Jan 08 2022 at 02:46)</a>:</h4>
<p>Considering we've not yet even moved off the current instance (right?), due to stalling out on <a href="https://github.com/rust-lang/simpleinfra/pull/78">https://github.com/rust-lang/simpleinfra/pull/78</a>, it doesn't seem worthwhile to add another step to this</p>



<a name="267270368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267270368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267270368">(Jan 08 2022 at 02:54)</a>:</h4>
<p>Sure, but ideally once that is merged, it should be "easy" to move to a different instance.</p>



<a name="267270757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267270757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267270757">(Jan 08 2022 at 03:00)</a>:</h4>
<p>True.</p>



<a name="267288828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267288828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267288828">(Jan 08 2022 at 10:28)</a>:</h4>
<p>tbh I'm not sure it'll make much of a difference</p>



<a name="267301674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267301674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267301674">(Jan 08 2022 at 15:42)</a>:</h4>
<p>Not even for money or money per core (eg getting more cores)?</p>



<a name="267303021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267303021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267303021">(Jan 08 2022 at 16:14)</a>:</h4>
<p>I mean definitely</p>



<a name="267303025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267303025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267303025">(Jan 08 2022 at 16:14)</a>:</h4>
<p>but the playground is such a tiny expense compared to the rest of our aws account</p>



<a name="267308357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267308357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267308357">(Jan 08 2022 at 18:19)</a>:</h4>
<p>Well, I'd like to have the playground not be resource limited to provide a better experience. I'm operating under the assumption that more cores would help that.</p>



<a name="267308840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267308840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267308840">(Jan 08 2022 at 18:30)</a>:</h4>
<p>well, yes, but more cores are not limited to aarch64</p>



<a name="267314705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267314705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267314705">(Jan 08 2022 at 20:48)</a>:</h4>
<p>As a user, it might be nice to have a choice of either target, to play with stuff like asm or intrinsics.</p>



<a name="267345419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267345419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267345419">(Jan 09 2022 at 08:33)</a>:</h4>
<p>Orthogonally to what architecture it runs on, it'd be nice to have "ASM" options for both x86-64 and aarch64.</p>



<a name="267345432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267345432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267345432">(Jan 09 2022 at 08:33)</a>:</h4>
<p>(I realize I can use godbolt for that, but the playground seems much more convenient.)</p>



<a name="267365670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267365670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267365670">(Jan 09 2022 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64/near/267314705">said</a>:</p>
<blockquote>
<p>to play with stuff like asm or intrinsics.</p>
</blockquote>
<p>What kind of "play"? As mentioned, we could probably generate assembly for many platforms with comparative ease. Fully compiling or even executing is more painful.</p>



<a name="267368312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267368312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267368312">(Jan 09 2022 at 17:33)</a>:</h4>
<p>Don't you need to compile in order to generate assembly?</p>



<a name="267368367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267368367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267368367">(Jan 09 2022 at 17:34)</a>:</h4>
<p>In particular, wouldn't generating asm for both x86-64 and aarch64 require building the playground crates for both?</p>



<a name="267368379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267368379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267368379">(Jan 09 2022 at 17:34)</a>:</h4>
<p>Or am I missing something about how the asm option works?</p>



<a name="267376485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267376485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267376485">(Jan 09 2022 at 20:36)</a>:</h4>
<p>mmm crates. yeah, I was just thinking that rustc can cross-compile trivially, but we would have to build the crates AoT as well.</p>



<a name="267541811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267541811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267541811">(Jan 11 2022 at 06:34)</a>:</h4>
<p>crates with bundled C libraries are often... painful to cross compile. the "same OS different arch" case makes it more likely to work, though, but IME anything that that uses the <code>cmake</code> crate will have a hard time. (conversely stuff that uses <code>cc</code> tends to cross-compile more painlessly)</p>



<a name="267541829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267541829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267541829">(Jan 11 2022 at 06:34)</a>:</h4>
<p>you shouldnt need to do this to just generate the asm tho</p>



<a name="267619784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267619784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267619784">(Jan 11 2022 at 17:54)</a>:</h4>
<p>The playground container already can compile for aarch64-linux-unknown. I know because I forgot to specify the architecture locally :-)</p>



<a name="267619921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267619921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267619921">(Jan 11 2022 at 17:55)</a>:</h4>
<p><a href="/user_uploads/4715/FzxyPnMCeCR96AJFU6MqZo6L/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/FzxyPnMCeCR96AJFU6MqZo6L/image.png" title="image.png"><img src="/user_uploads/4715/FzxyPnMCeCR96AJFU6MqZo6L/image.png"></a></div>



<a name="267620023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Moving%20the%20playground%20to%20aarch64/near/267620023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64.html#267620023">(Jan 11 2022 at 17:55)</a>:</h4>
<p>Of note is that it's not cross compilation. Just compiling on aarch64 (inside Docker)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Running tests with pristine current LLVM · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html">Running tests with pristine current LLVM</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="236206090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236206090" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236206090">(Apr 26 2021 at 16:43)</a>:</h4>
<p>We run our test suite with our fork of LLVM 12 as well as our minimum supported LLVM version. How feasible is it for us to also run some minimal checks with the current release of LLVM but pristine (i.e. not patched by us?)</p>



<a name="236206210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236206210" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236206210">(Apr 26 2021 at 16:44)</a>:</h4>
<p>Would have a couple of benefits, among them: it'd be always clear what kind of impact a change would have in terms of distro support who are not as likely to backport the patches we do.</p>



<a name="236206417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236206417" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236206417">(Apr 26 2021 at 16:46)</a>:</h4>
<p>Hm, I think we recently closed out a few builders, so capacity wise it seems feasible for a single (linux) builder. Is there a distro with an up to date LLVM we could use? That might be even better than building ourselves.</p>



<a name="236207498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236207498" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236207498">(Apr 26 2021 at 16:54)</a>:</h4>
<p>We could download LLVM from the upstream. They also have apt repositories: <a href="https://apt.llvm.org/">https://apt.llvm.org/</a></p>



<a name="236207628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236207628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236207628">(Apr 26 2021 at 16:55)</a>:</h4>
<p>hm, those are only temporarily hosted I think, right? I guess if we continuously upgrade might not be a big deal. I'm interested if <span class="user-mention" data-user-id="138448">@cuviper</span> has thoughts here</p>



<a name="236207879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236207879" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236207879">(Apr 26 2021 at 16:57)</a>:</h4>
<p>my thought is that I would love to have this <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="236207961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236207961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236207961">(Apr 26 2021 at 16:58)</a>:</h4>
<p>as for <em>how</em> we do it -- I'll give it some thought</p>



<a name="236208032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236208032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236208032">(Apr 26 2021 at 16:59)</a>:</h4>
<p>I think a (short) proposal on what schedule we'd need to bump, and in particular what that looks like for when llvm-next rolls out while we have a stable or w/e with an older copy of the dockerfile, etc.</p>



<a name="236221407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236221407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236221407">(Apr 26 2021 at 18:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'm curious, which builders were recently closed out?</p>



<a name="236221448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236221448" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236221448">(Apr 26 2021 at 18:28)</a>:</h4>
<p>hm I don't know if we actually <em>did</em> it, I just know we agreed in some infra meeting to do so and then didn't agree to repurpose IIRC</p>



<a name="236221546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236221546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236221546">(Apr 26 2021 at 18:29)</a>:</h4>
<p>iirc, it was some noop builders - I seem to recall one which was just broken for a long time and we didn't know (something like distcheck? not sure) - it wasn't running any tests</p>



<a name="236221567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Running%20tests%20with%20pristine%20current%20LLVM/near/236221567" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/242791-t-infra/topic/Running.20tests.20with.20pristine.20current.20LLVM.html#236221567">(Apr 26 2021 at 18:29)</a>:</h4>
<p>another might be some tier-2 target getting removed, I forget</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>no new nightly · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html">no new nightly</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="208609896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208609896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208609896">(Aug 31 2020 at 20:17)</a>:</h4>
<p>It appears that nightly hasn't been published in the past 2 days. Is this a known issue? Anything that I can help with?<br>
Sorry if has been brought up, but I couldn't find any issues or threads.</p>



<a name="208611402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208611402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208611402">(Aug 31 2020 at 20:30)</a>:</h4>
<p>Maybe some PR changing manifest generation was merged recently?</p>



<a name="208614773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208614773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208614773">(Aug 31 2020 at 21:02)</a>:</h4>
<p>I don't see anything particularly suspicious in the diff since d006f5734.  Will need to wait for someone to look at the logs.</p>



<a name="208669214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208669214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208669214">(Sep 01 2020 at 10:31)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Sep  1 00:08:16 localhost release-nightly:
Sep  1 00:08:16 localhost release-nightly: Couldn&#39;t find required command: ninja
Sep  1 00:08:16 localhost release-nightly: You should install ninja, or set ninja=false in config.toml
Sep  1 00:08:16 localhost release-nightly:
Sep  1 00:08:16 localhost release-nightly: failed to run: /tmp/nightly/build/build/bootstrap/debug/bootstrap dist hash-and-sign
Sep  1 00:08:16 localhost release-nightly: Build completed unsuccessfully in 0:02:37
Sep  1 00:08:16 localhost release-nightly: thread &#39;main&#39; panicked at &#39;failed command:&quot;/tmp/nightly/rust/x.py&quot; &quot;dist&quot; &quot;hash-and-sign&quot;
Sep  1 00:08:16 localhost release-nightly: :exit code: 1&#39;, src/main.rs:587:9
Sep  1 00:08:16 localhost release-nightly: note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="208669215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208669215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208669215">(Sep 01 2020 at 10:31)</a>:</h4>
<p>whelp</p>



<a name="208669712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208669712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208669712">(Sep 01 2020 at 10:37)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> ok it appears something wrong is going on with rustbuild</p>



<a name="208669793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208669793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208669793">(Sep 01 2020 at 10:38)</a>:</h4>
<p>it's requiring ninja, and <a href="https://github.com/rust-lang/rust/blob/6f1bbf5ee014cdad5d95f13266b177d89cc40d89/src/bootstrap/sanity.rs#L98-L114">it appears that's only required when building llvm</a></p>



<a name="208670259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208670259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208670259">(Sep 01 2020 at 10:44)</a>:</h4>
<p>but we shouldn't build llvm during a release :/</p>



<a name="208675812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208675812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208675812">(Sep 01 2020 at 11:48)</a>:</h4>
<p>Hm I thought we handled that case.. I guess not</p>



<a name="208675841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208675841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208675841">(Sep 01 2020 at 11:49)</a>:</h4>
<p>I will fix first thing today</p>



<a name="208679121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208679121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208679121">(Sep 01 2020 at 12:21)</a>:</h4>
<p>good thing this happened at the <em>start</em> of a release cycle <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="208683111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208683111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208683111">(Sep 01 2020 at 13:00)</a>:</h4>
<p>eh, doesn't really matter, it's always an easy fix</p>



<a name="208703563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208703563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208703563">(Sep 01 2020 at 15:25)</a>:</h4>
<p>thanks for the fix!</p>



<a name="208704528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208704528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208704528">(Sep 01 2020 at 15:31)</a>:</h4>
<p>What <em>was</em> going wrong here, that we couldn't know early on that we weren't building LLVM?</p>



<a name="208705467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208705467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208705467">(Sep 01 2020 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span>  The RCS cron job that promotes nightly runs <code>x.py dist hash-and-sign</code>.  This was failing because <code>x.py</code> was thinking ninja needed to be installed, but it wasn't installed on RCS (RCS doesn't do rustc builds).  x.py was a little over-eager to check if ninja was installed because that command (<code>hash-and-sign</code>) doesn't need ninja.</p>



<a name="208705636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/no%20new%20nightly/near/208705636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/no.20new.20nightly.html#208705636">(Sep 01 2020 at 15:38)</a>:</h4>
<p>Ah, I see.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>2020-09-30 meeting · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html">2020-09-30 meeting</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="211763649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211763649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211763649">(Sep 30 2020 at 13:58)</a>:</h4>
<p>​</p>



<a name="211763857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211763857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211763857">(Sep 30 2020 at 14:00)</a>:</h4>
<p>o/</p>



<a name="211763925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211763925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211763925">(Sep 30 2020 at 14:00)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2943">@T-infra</span> meeting time!</p>



<a name="211764277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764277">(Sep 30 2020 at 14:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> welll</p>



<a name="211764287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764287">(Sep 30 2020 at 14:03)</a>:</h4>
<p>o/</p>



<a name="211764372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764372">(Sep 30 2020 at 14:03)</a>:</h4>
<p>ok, we're a bit short of people today but let's start :)</p>



<a name="211764459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764459">(Sep 30 2020 at 14:04)</a>:</h4>
<p>there are no nominated issues for us</p>



<a name="211764479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764479">(Sep 30 2020 at 14:04)</a>:</h4>
<p>nor other issues to look at</p>



<a name="211764536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764536">(Sep 30 2020 at 14:04)</a>:</h4>
<p>on the agenda, <a href="https://github.com/rust-lang/rustc-perf/issues/773">https://github.com/rust-lang/rustc-perf/issues/773</a> is <span class="user-mention" data-user-id="116122">@simulacrum</span>'s</p>



<a name="211764571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764571">(Sep 30 2020 at 14:05)</a>:</h4>
<p>but he's not here at the moment, so let's defer it to next week</p>



<a name="211764580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764580">(Sep 30 2020 at 14:05)</a>:</h4>
<p>(I also see carol replied there!)</p>



<a name="211764628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764628">(Sep 30 2020 at 14:05)</a>:</h4>
<p>o/</p>



<a name="211764639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764639">(Sep 30 2020 at 14:05)</a>:</h4>
<p>well</p>



<a name="211764645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764645">(Sep 30 2020 at 14:05)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> anything you want to add to it? :)</p>



<a name="211764649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764649">(Sep 30 2020 at 14:05)</a>:</h4>
<p>didn't get initial ping for whatever reason</p>



<a name="211764765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764765">(Sep 30 2020 at 14:06)</a>:</h4>
<p>nothing to add I think</p>



<a name="211764782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764782">(Sep 30 2020 at 14:06)</a>:</h4>
<p>I'll look at Carol's response in more detail later</p>



<a name="211764792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764792">(Sep 30 2020 at 14:06)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="211764842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764842">(Sep 30 2020 at 14:07)</a>:</h4>
<p>moving on to the next item, switching macOS to GHA-only</p>



<a name="211764899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764899" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764899">(Sep 30 2020 at 14:07)</a>:</h4>
<p>I didn't hear any ping from people complaining macOS on GHA was broken, so it might be time to actually move everything to GHA</p>



<a name="211764913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211764913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211764913">(Sep 30 2020 at 14:07)</a>:</h4>
<p>any comment/blocker?</p>



<a name="211765072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765072">(Sep 30 2020 at 14:08)</a>:</h4>
<p>brief comment - when's the next release? might we want to wait until after that if it's soon?</p>



<a name="211765102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765102">(Sep 30 2020 at 14:09)</a>:</h4>
<p>oct 8th</p>



<a name="211765161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765161">(Sep 30 2020 at 14:09)</a>:</h4>
<p>I'd actually like to land it before the release happens -- 1.47 is going to use azure anyway, as the CI change will have to ride the trains</p>



<a name="211765369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765369">(Sep 30 2020 at 14:11)</a>:</h4>
<p>aha right, then yeah let's merge it</p>



<a name="211765449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765449">(Sep 30 2020 at 14:11)</a>:</h4>
<p><span class="user-mention" data-user-id="261224">@triagebot</span> await</p>



<a name="211765452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765452">(Sep 30 2020 at 14:11)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="211765651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765651">(Sep 30 2020 at 14:12)</a>:</h4>
<p>ok! let's move on!</p>



<a name="211765705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765705">(Sep 30 2020 at 14:13)</a>:</h4>
<p>the next item is an update on what I've been working on this week: a refactoring and improvement of our release process</p>



<a name="211765872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765872">(Sep 30 2020 at 14:14)</a>:</h4>
<p>my goals are:</p>
<ul>
<li>run the release process ouside of RCS (to hopefully retire that oversized instance in the future)</li>
<li>make it easier to test the release process locally</li>
<li>do random refactorings and improvements to it as they come up</li>
</ul>



<a name="211765991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211765991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211765991">(Sep 30 2020 at 14:15)</a>:</h4>
<p>I'm already done with making the release process easier to run locally: it's now in a separate repo with CI, and you can do a full working release (on a subset of tarballs) locally by just running:</p>
<div class="codehilite"><pre><span></span><code>docker-compose up
./run.sh &lt;channel&gt;
</code></pre></div>



<a name="211766062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766062">(Sep 30 2020 at 14:15)</a>:</h4>
<p>(the new repo is available at <a href="https://github.com/rust-lang/promote-release">https://github.com/rust-lang/promote-release</a>)</p>



<a name="211766304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766304">(Sep 30 2020 at 14:17)</a>:</h4>
<p>I'm also almost done making sure the release process works on AWS CodeBuild: today I did a nightly release to dev-static and it worked, I just need to hook it up to cron and polish some things</p>



<a name="211766333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766333">(Sep 30 2020 at 14:17)</a>:</h4>
<p>(I'll only setup crons for dev-static, I'll check back with y'all before turning it on for prod)</p>



<a name="211766475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766475">(Sep 30 2020 at 14:18)</a>:</h4>
<p>sounds very cool!</p>



<a name="211766482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766482">(Sep 30 2020 at 14:18)</a>:</h4>
<p>finally I'm doing a lot of improvements both to promote-release and build-manifest (located in rust-lang/rust) to make the whole process either easier to maintain or faster to run</p>



<a name="211766563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766563">(Sep 30 2020 at 14:19)</a>:</h4>
<p>so, this agenda item had two purposes</p>



<a name="211766602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766602">(Sep 30 2020 at 14:19)</a>:</h4>
<p>one was to probe if any of you had ideas or comments on this effort :)</p>



<a name="211766665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766665">(Sep 30 2020 at 14:19)</a>:</h4>
<p>but the other was a doubt of me on how to actually make sure the release process works across all channels</p>



<a name="211766825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766825">(Sep 30 2020 at 14:20)</a>:</h4>
<p>dev-static releases for all channels for a bit? and verify identical sha256 of tarballs?</p>



<a name="211766830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766830">(Sep 30 2020 at 14:20)</a>:</h4>
<p>a lot of the changes I'm making to rust-lang/rust related to this effort are making the promote-release code either more maintainable or faster</p>



<a name="211766864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766864">(Sep 30 2020 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> that's a great idea!</p>



<a name="211766883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766883">(Sep 30 2020 at 14:21)</a>:</h4>
<p>how fast is promote-release today?</p>



<a name="211766918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211766918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211766918">(Sep 30 2020 at 14:21)</a>:</h4>
<p>35 minutes to 50 minutes</p>



<a name="211767212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767212">(Sep 30 2020 at 14:23)</a>:</h4>
<p>ok, sounds worthwhile then!</p>



<a name="211767335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767335">(Sep 30 2020 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/2020-09-30.20meeting/near/211766830">said</a>:</p>
<blockquote>
<p>a lot of the changes I'm making to rust-lang/rust related to this effort are making the promote-release code either more maintainable or faster</p>
</blockquote>
<p>for example, I recently moved the version from being embedded in <code>src/bootstrap/channel.rs</code> to a standalone <code>src/version</code> file, making it easier to parse, and I'm planning other changes such as:</p>
<ul>
<li>move generating <code>.sha256</code>s and signatures out of <code>build-manifest</code> and into <code>promote-release</code>, so we can improve or change them across all channels and with less friction than the monorepo</li>
<li>ship a pre-built <code>build-manifest</code> in a component somewhere (dunno, <code>rust-dev</code>?), to avoid the need to clone the repository, its submodules and build the rust code (that should remove like 8/9 minutes on CodeBuild)</li>
</ul>



<a name="211767438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767438">(Sep 30 2020 at 14:25)</a>:</h4>
<p>but if I make those changes on master, promoting beta or stable will break :(</p>



<a name="211767511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767511">(Sep 30 2020 at 14:25)</a>:</h4>
<p>my current approach is to add a bunch of <code>if</code>s around, but that's far from ideal</p>



<a name="211767542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767542">(Sep 30 2020 at 14:25)</a>:</h4>
<p>the other option would be to backport like everything I'm doing</p>



<a name="211767551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767551">(Sep 30 2020 at 14:25)</a>:</h4>
<p>I am personally not opposed to some amount of testing on master (e.g., we land major things next cycle) and then backporting everything, yeah</p>



<a name="211767668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767668">(Sep 30 2020 at 14:26)</a>:</h4>
<p>the ifs would only last for a version or two right?</p>



<a name="211767679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767679">(Sep 30 2020 at 14:26)</a>:</h4>
<p>yeah</p>



<a name="211767870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211767870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211767870">(Sep 30 2020 at 14:27)</a>:</h4>
<p><code>#[cfg(promote-release-bootstrap)]</code> :-)</p>



<a name="211768026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768026">(Sep 30 2020 at 14:28)</a>:</h4>
<p>hmm</p>



<a name="211768095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768095">(Sep 30 2020 at 14:29)</a>:</h4>
<p>I'm kinda tempted to go with the ifs rather than making sure every change is synchronized</p>



<a name="211768122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768122">(Sep 30 2020 at 14:29)</a>:</h4>
<p>now that I think more about it</p>



<a name="211768324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768324">(Sep 30 2020 at 14:30)</a>:</h4>
<p>I think there are two approaches with ifs - ifs that will do the new thing when they can, or ifs that generate/validate the new thing, but don't use it yet</p>



<a name="211768331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768331">(Sep 30 2020 at 14:30)</a>:</h4>
<p>which were you thinking? (does what I say make sense)</p>



<a name="211768344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768344">(Sep 30 2020 at 14:30)</a>:</h4>
<p>the first ones (yes <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>)</p>



<a name="211768494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768494">(Sep 30 2020 at 14:31)</a>:</h4>
<p>ok, there is a caveat with that in that you need to be aware of when they'll start firing 'just in case'. whereas if you synchronise then you know you're immediately on hand</p>



<a name="211768570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768570">(Sep 30 2020 at 14:32)</a>:</h4>
<p>yes, the firing will go ahead with the trains</p>



<a name="211768605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211768605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211768605">(Sep 30 2020 at 14:32)</a>:</h4>
<p>not necessarily a problem given your consistent presence! but worth being aware of</p>



<a name="211769120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769120">(Sep 30 2020 at 14:35)</a>:</h4>
<p>yep! and just as a fyi, the major changes I'm planning to make for now:</p>
<ul>
<li>have the release process run on AWS CodeBuild</li>
<li>parallelize generating signatures and checksums over multiple threads</li>
<li>use a prebuilt binary of build-manifest</li>
<li>stop shipping CI implementation details (<code>cpu-{job}.csv</code>, <code>image-{job}.txt</code>...)</li>
<li>only upload <code>.tar.xz</code>s during CI, and recompress them to <code>.tar.gz</code> during release promotion -- this will save something like 30TB of artifacts storage, and with codebuild we can just spin up a machine with a bunch of cores if needed (to keep release times manageable) while we're doing a release</li>
</ul>



<a name="211769256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769256">(Sep 30 2020 at 14:36)</a>:</h4>
<p><span class="user-mention" data-user-id="261224">@triagebot</span> await</p>



<a name="211769259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769259">(Sep 30 2020 at 14:36)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="211769447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769447">(Sep 30 2020 at 14:38)</a>:</h4>
<p>er, actually</p>



<a name="211769494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769494">(Sep 30 2020 at 14:38)</a>:</h4>
<blockquote>
<p>stop shipping CI implementation details (cpu-{job}.csv, image-{job}.txt...)</p>
</blockquote>
<p>we need to be careful with</p>



<a name="211769511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769511">(Sep 30 2020 at 14:38)</a>:</h4>
<p>because rustup e.g. uses the docker images iirc</p>



<a name="211769527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769527">(Sep 30 2020 at 14:38)</a>:</h4>
<p>but nothing further</p>



<a name="211769570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769570">(Sep 30 2020 at 14:38)</a>:</h4>
<p>yes, but they fetch them from ci-artifacts.rlo</p>



<a name="211769584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769584">(Sep 30 2020 at 14:39)</a>:</h4>
<p>ah okay, great</p>



<a name="211769591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769591">(Sep 30 2020 at 14:39)</a>:</h4>
<p>not from static.rlo</p>



<a name="211769727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769727">(Sep 30 2020 at 14:40)</a>:</h4>
<p>ok then!</p>



<a name="211769843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769843">(Sep 30 2020 at 14:40)</a>:</h4>
<p>that's all from the agenda</p>



<a name="211769890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769890">(Sep 30 2020 at 14:40)</a>:</h4>
<p>infra team members, please remember to fill out <a href="https://paper.dropbox.com/doc/A8k2Xukjq~zJwDLIgwoHp_I~Ag-gnHYxUQXgvtKK2eWxgbKq">https://paper.dropbox.com/doc/A8k2Xukjq~zJwDLIgwoHp_I~Ag-gnHYxUQXgvtKK2eWxgbKq</a> :)</p>



<a name="211769898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769898">(Sep 30 2020 at 14:40)</a>:</h4>
<p>(that doc is private)</p>



<a name="211769982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769982">(Sep 30 2020 at 14:41)</a>:</h4>
<p>whelp</p>



<a name="211769996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211769996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211769996">(Sep 30 2020 at 14:41)</a>:</h4>
<p><a href="https://paper.dropbox.com/doc/A8k2Xukjq~zJwDLIgwoHp_I~Ag-gnHYxUQXgvtKK2eWxgbKq">https://paper.dropbox.com/doc/A8k2Xukjq~zJwDLIgwoHp_I~Ag-gnHYxUQXgvtKK2eWxgbKq</a></p>



<a name="211770011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770011">(Sep 30 2020 at 14:41)</a>:</h4>
<p>L O L</p>



<a name="211770043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770043">(Sep 30 2020 at 14:41)</a>:</h4>
<p><code>s/is/was/</code></p>



<a name="211770120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770120">(Sep 30 2020 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> well I linked to the wrong document <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="211770145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770145">(Sep 30 2020 at 14:42)</a>:</h4>
<p>the new one I linked is actually private, and the right one</p>



<a name="211770147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770147">(Sep 30 2020 at 14:42)</a>:</h4>
<p><em>whew</em></p>



<a name="211770163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770163">(Sep 30 2020 at 14:42)</a>:</h4>
<p>after that woops, <span class="user-mention" data-user-id="261224">@triagebot</span> end-meeting</p>



<a name="211770166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770166">(Sep 30 2020 at 14:42)</a>:</h4>
<p>Does anyone have something to bring up?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if you're ready to end the meeting.</p>



<a name="211770270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770270">(Sep 30 2020 at 14:43)</a>:</h4>
<p>can triagebot add the emojis in a fixed order? or is it to keep me on my toes <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="211770308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770308">(Sep 30 2020 at 14:43)</a>:</h4>
<p>Mine are fixed <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="211770340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770340">(Sep 30 2020 at 14:43)</a>:</h4>
<p>Sometimes they don't appear for some people too.</p>



<a name="211770350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770350">(Sep 30 2020 at 14:43)</a>:</h4>
<p>Computers.</p>



<a name="211770379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770379">(Sep 30 2020 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you have something?</p>



<a name="211770495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770495">(Sep 30 2020 at 14:44)</a>:</h4>
<p>no</p>



<a name="211770544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770544">(Sep 30 2020 at 14:45)</a>:</h4>
<p>that's it then!</p>



<a name="211770558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770558">(Sep 30 2020 at 14:45)</a>:</h4>
<p>thanks everyone for attending</p>



<a name="211770560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770560" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770560">(Sep 30 2020 at 14:45)</a>:</h4>
<p>\o</p>



<a name="211770630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770630">(Sep 30 2020 at 14:45)</a>:</h4>
<p>\o</p>



<a name="211770642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/211770642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#211770642">(Sep 30 2020 at 14:45)</a>:</h4>
<p>\o</p>



<a name="212005689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212005689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212005689">(Oct 02 2020 at 05:15)</a>:</h4>
<p>Hey was reading over this the other day, and had a thought just now about the release rework. First off making it not a 1hr process would be awesome and it's great to hear about the refactorings! I'm glad you actually understand aws pietro lol</p>



<a name="212005751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212005751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212005751">(Oct 02 2020 at 05:16)</a>:</h4>
<p>But my thought was that if you're recompressing it might be prudent to switch ci builders to zstd, iirc they burn upwards of 15 minutes producing xz tarballs because compression is so slow</p>



<a name="212005774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212005774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212005774">(Oct 02 2020 at 05:16)</a>:</h4>
<p>I suspect zstd might be able to shave ~10 minutes off dist builder times, although that may also not be the biggest worry nowadays with the larger machines</p>



<a name="212005795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212005795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212005795">(Oct 02 2020 at 05:17)</a>:</h4>
<p>Anyway, just a thought I had today! Xz is likely still smallest for long term storage but wanted to throw out the zstd idea for saving compression time on the builders</p>



<a name="212042168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212042168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212042168">(Oct 02 2020 at 07:44)</a>:</h4>
<p>Does Github Actions provide Rust 8 threads for each job?<br>
I'm asking because <code>rust-installer</code> limits xz compression to 8 threads.</p>



<a name="212042755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212042755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212042755">(Oct 02 2020 at 07:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> thanks for the insights!</p>



<a name="212042853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212042853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212042853">(Oct 02 2020 at 07:52)</a>:</h4>
<p>the biggest thing I wanted to fix with recompression was the ~30tb of duplicate tarballs we store on rust-lang-ci2</p>



<a name="212042931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212042931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212042931">(Oct 02 2020 at 07:53)</a>:</h4>
<p>but saving dist builders' time didn't actually come to mind <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="212042940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212042940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212042940">(Oct 02 2020 at 07:53)</a>:</h4>
<p>I'll gather some numbers</p>



<a name="212230580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/2020-09-30%20meeting/near/212230580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/2020-09-30.20meeting.html#212230580">(Oct 04 2020 at 16:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> zstd can actually be smallest for long-term storage as well, depending on the options you use and the amount of time you're willing to spend compressing.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
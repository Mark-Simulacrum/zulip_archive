<html>
<head><meta charset="utf-8"><title>terraform update? · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html">terraform update?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254060544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254060544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254060544">(Sep 20 2021 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> just noticed i'm locally using terraform v0.13 but it looks like .14, .15 and 1.0 are also out</p>



<a name="254060614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254060614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254060614">(Sep 20 2021 at 14:40)</a>:</h4>
<p>any objections to me running the appropriate steps / editing files to get us up to 1.0?</p>



<a name="254060619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254060619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254060619">(Sep 20 2021 at 14:40)</a>:</h4>
<p>yeah same</p>



<a name="254060649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254060649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254060649">(Sep 20 2021 at 14:40)</a>:</h4>
<p>if you have the time go for it!</p>



<a name="254061062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254061062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254061062">(Sep 20 2021 at 14:42)</a>:</h4>
<p>didn't bring it up because at least I don't have bandwidth to do the upgrade</p>



<a name="254196684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254196684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254196684">(Sep 21 2021 at 12:15)</a>:</h4>
<p>fyi, continuing to do this and sync resources, so please ping actively if anything goes down (I think it should be fine, most of these seem like routine syncs, but we should keep checking)</p>



<a name="254200247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254200247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254200247">(Sep 21 2021 at 12:42)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> .</p>



<a name="254330448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254330448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254330448">(Sep 22 2021 at 08:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> did you push the changes?</p>



<a name="254349578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254349578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254349578">(Sep 22 2021 at 11:08)</a>:</h4>
<p>For context: avoiding pushing until I'm done updating, since each of the N directories needs a terraform apply to check after each version bump, which just takes a while</p>



<a name="254349645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254349645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254349645">(Sep 22 2021 at 11:09)</a>:</h4>
<p>(particularly because there are often small changes that need making)</p>



<a name="254558542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254558542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254558542">(Sep 23 2021 at 15:52)</a>:</h4>
<p>terraform is done, I think!</p>



<a name="254558548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254558548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254558548">(Sep 23 2021 at 15:52)</a>:</h4>
<p>we're now on 1.0</p>



<a name="254558657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254558657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254558657">(Sep 23 2021 at 15:53)</a>:</h4>
<p>we did lose the "auto-ssh proxy" script you wrote, Pietro, but I couldn't get it to work or debug it, and it seems like a somewhat small loss for now</p>



<a name="254559038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254559038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254559038">(Sep 23 2021 at 15:55)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> .</p>



<a name="254559062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254559062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254559062">(Sep 23 2021 at 15:55)</a>:</h4>
<p>and ugh, not having the SSH proxy is annoying, I'll look into it</p>



<a name="254559150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254559150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254559150">(Sep 23 2021 at 15:56)</a>:</h4>
<p>(in general it's so unfortunate the experience is so poor there)</p>



<a name="254559516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254559516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254559516">(Sep 23 2021 at 15:58)</a>:</h4>
<p>yeah I read a bunch of issues</p>



<a name="254559572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254559572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254559572">(Sep 23 2021 at 15:58)</a>:</h4>
<p>but I honestly think the solution is to just run terraform from the bastion, or something like that, probably</p>



<a name="254559942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254559942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254559942">(Sep 23 2021 at 16:00)</a>:</h4>
<p>kinda wish the cloud console came to us-west-1</p>



<a name="254560559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254560559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254560559">(Sep 23 2021 at 16:04)</a>:</h4>
<p>do you have a link? is that like ssh?</p>



<a name="254561200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254561200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254561200">(Sep 23 2021 at 16:08)</a>:</h4>
<p>sorry, cloudshell, <a href="https://aws.amazon.com/cloudshell/">https://aws.amazon.com/cloudshell/</a></p>



<a name="254561229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254561229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254561229">(Sep 23 2021 at 16:09)</a>:</h4>
<p>the advantage of it is you'd already have your credentials in there</p>



<a name="254561443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254561443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254561443">(Sep 23 2021 at 16:10)</a>:</h4>
<p>oh yeah, and the ability to start the cloudshell inside the vpc</p>



<a name="254564031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254564031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254564031">(Sep 23 2021 at 16:27)</a>:</h4>
<p>Hm, yeah seems interesting. Though not fundamentally different from ssh into bastion, I think? And the ssh might be even easier since you can use local editing rather than (for example) attempting to use vim in a browser... maybe it's ok though</p>



<a name="254564076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/terraform%20update%3F/near/254564076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/terraform.20update.3F.html#254564076">(Sep 23 2021 at 16:27)</a>:</h4>
<p>I guess I can probably just do this in bastion myself, right? Everyone can do their own thing</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
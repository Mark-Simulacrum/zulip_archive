<html>
<head><meta charset="utf-8"><title>CDN problems for static.rlo causing install failures · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html">CDN problems for static.rlo causing install failures</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="255402060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Silverstone <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402060">(Sep 29 2021 at 13:49)</a>:</h4>
<p>Hi all, I am getting reports that people are unable to install some parts of recent toolchains -- <a href="https://github.com/rust-lang/rustup/issues/2855">https://github.com/rust-lang/rustup/issues/2855</a></p>
<p>Is there something we need to tweak on the CDN?</p>



<a name="255402195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402195">(Sep 29 2021 at 13:50)</a>:</h4>
<p>hm</p>



<a name="255402235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402235" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402235">(Sep 29 2021 at 13:50)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="121055">@Pietro Albini</span></p>



<a name="255402259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402259">(Sep 29 2021 at 13:50)</a>:</h4>
<p>I suspect this is probably a missing invalidation, but it is a bit weird</p>



<a name="255402289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402289">(Sep 29 2021 at 13:50)</a>:</h4>
<p>(in particular browser vs. curl behavior being different is surprising)</p>



<a name="255402379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402379">(Sep 29 2021 at 13:51)</a>:</h4>
<p>I am a little hesitant to just run an invalidation; seems like that could just hide a problem we have, but it's probably the right thing to do</p>



<a name="255402465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402465">(Sep 29 2021 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> so, I would run an invalidation right now as that would likely fix the problem</p>



<a name="255402528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402528">(Sep 29 2021 at 13:51)</a>:</h4>
<p>what I'm worried is, this could be something like what happened last year with cloudfront having broken caches for a subset of users</p>



<a name="255402543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402543">(Sep 29 2021 at 13:51)</a>:</h4>
<p>I can run the invalidation now if you confirm</p>



<a name="255402705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402705">(Sep 29 2021 at 13:52)</a>:</h4>
<p>hm</p>



<a name="255402730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402730">(Sep 29 2021 at 13:53)</a>:</h4>
<p>invalidation seems good</p>



<a name="255402746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402746">(Sep 29 2021 at 13:53)</a>:</h4>
<p>the alternative is to file a support ticket and wait, I guess</p>



<a name="255402832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402832">(Sep 29 2021 at 13:53)</a>:</h4>
<p>I tested the commands in <a href="https://github.com/rust-lang/rustup/issues/2855#issuecomment-929982924">https://github.com/rust-lang/rustup/issues/2855#issuecomment-929982924</a>, and they are returning the same sha to me</p>



<a name="255402860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255402860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255402860">(Sep 29 2021 at 13:54)</a>:</h4>
<p>which leads me to believe it's a problem with a regional pop</p>



<a name="255403003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255403003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255403003">(Sep 29 2021 at 13:54)</a>:</h4>
<p>if it happens again we need people to give us the <code>X-Amz-Cf-Id</code> header responses, as that's what aws support needs (given what they asked the last time)</p>



<a name="255403011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255403011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255403011">(Sep 29 2021 at 13:54)</a>:</h4>
<p>ok doing an invalidation</p>



<a name="255403106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255403106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255403106">(Sep 29 2021 at 13:55)</a>:</h4>
<p>yeah, sounds good</p>



<a name="255403454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255403454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255403454">(Sep 29 2021 at 13:57)</a>:</h4>
<p>running the invalidation</p>



<a name="255403753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255403753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255403753">(Sep 29 2021 at 13:59)</a>:</h4>
<p>we can also turn off the auto-compression, which might patch over the cause. static.r-l.o doesn't contain much compressible data I'd guess (manifests only?)</p>



<a name="255404857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/CDN%20problems%20for%20static.rlo%20causing%20install%20failures/near/255404857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Silverstone <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/CDN.20problems.20for.20static.2Erlo.20causing.20install.20failures.html#255404857">(Sep 29 2021 at 14:04)</a>:</h4>
<p>Thanks for jumping on this -- I imagine it has been screwing with a bunch of people on that pop <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
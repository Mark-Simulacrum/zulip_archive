<html>
<head><meta charset="utf-8"><title>automatic libs publishing · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/automatic.20libs.20publishing.html">automatic libs publishing</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278249948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/automatic%20libs%20publishing/near/278249948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/automatic.20libs.20publishing.html#278249948">(Apr 08 2022 at 02:19)</a>:</h4>
<p>Hey all <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Are there any opinions in here about automatically publishing releases for some rust-lang libs crates (log, getopts etc) to <a href="http://crates.io">crates.io</a>? Fiddling with local publishing is a bit of a barrier to keeping code flowing on those rarely touched libs and causes big risky releases to build up over years. This could be more of a t-libs thing, but wanted to see what you all thought about automatic publishing</p>



<a name="278416635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/automatic%20libs%20publishing/near/278416635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/automatic.20libs.20publishing.html#278416635">(Apr 09 2022 at 15:59)</a>:</h4>
<p>I'm not opposed to publishing crates from CI!</p>



<a name="278416680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/automatic%20libs%20publishing/near/278416680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/automatic.20libs.20publishing.html#278416680">(Apr 09 2022 at 16:00)</a>:</h4>
<p>the only open question would be which token to use in CIs, and with <a href="http://crates.io">crates.io</a> not supporting token scopes that'd likely mean creating a github account for each crate we want to publish, which is annoying</p>



<a name="278421187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/automatic%20libs%20publishing/near/278421187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/automatic.20libs.20publishing.html#278421187">(Apr 09 2022 at 17:33)</a>:</h4>
<p>I don't think we need token scopes, we just need to have a centralized job (either on GHA or AWS) that pulls and cargo publishes a bunch of repositories nightly or so.</p>



<a name="278679150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/automatic%20libs%20publishing/near/278679150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/automatic.20libs.20publishing.html#278679150">(Apr 12 2022 at 11:29)</a>:</h4>
<p>Nightly publishing would probably work too <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> And centralizing/simplifying token management sounds nice (realistically the scope of most libs team member’s tokens would cover the same set of repositories anyways so it doesn’t seem like a bigger risk to me). One pain I have in publishing within larger orgs in other package managers with CI is that there’s _always_ an expired token in use somewhere that needs updating</p>



<a name="278680364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/automatic%20libs%20publishing/near/278680364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/automatic.20libs.20publishing.html#278680364">(Apr 12 2022 at 11:42)</a>:</h4>
<p>I think <a href="http://crates.io">crates.io</a> tokens don't expire, and part of my goal here would probably be to see about removing libs (and in general humans) from having default access to <a href="http://crates.io">crates.io</a>, to prevent those accounts having immediate publish rights to critical packages that the whole world depends on.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
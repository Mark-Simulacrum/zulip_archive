<html>
<head><meta charset="utf-8"><title>Question about &quot;doc.rust-lang.org/std&quot; · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html">Question about &quot;doc.rust-lang.org/std&quot;</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="227914246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227914246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227914246">(Feb 26 2021 at 11:27)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="121055">@Pietro Albini</span> <span class="user-mention" data-user-id="116122">@simulacrum</span> I have a question about the website "<a href="http://doc.rust-lang.org/std">doc.rust-lang.org/std</a>": how are the static assets deployed?<br>
I'd like to understand the workflow that generates and deploy those files on the CDN. I was thinking about adding a small feature to the rust documentation (feature open to discussion, of course), a <a href="#narrow/stream/266220-rustdoc/topic/Adding.20API.20for.20OpenSearch">custom search</a></p>
<p>(I guess this is more a <code>T-infra</code> question, but I believe that stream is not public)</p>



<a name="227914592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227914592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> XAMPPRocky <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227914592">(Feb 26 2021 at 11:30)</a>:</h4>
<p><span class="user-mention" data-user-id="250987">@apiraino</span> <code>t-infra</code> is public. <a href="#narrow/stream/242791-t-infra">https://rust-lang.zulipchat.com/#narrow/stream/242791-t-infra</a></p>



<a name="227915206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227915206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227915206">(Feb 26 2021 at 11:36)</a>:</h4>
<p>oh that's funny. I couldn't filter it from the zulip stream search :)<br>
thanks</p>



<a name="227915410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227915410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227915410">(Feb 26 2021 at 11:38)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="241545" href="/#narrow/stream/241545-t-release/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22">#t-release &gt; Question about "doc.rust-lang.org/std"</a> by <span class="user-mention silent" data-user-id="121055">Pietro Albini</span></p>



<a name="227915450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227915450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227915450">(Feb 26 2021 at 11:39)</a>:</h4>
<p><span class="user-mention" data-user-id="250987">@apiraino</span> the deployment is a <code>tar xf</code> followed by a <code>aws s3 cp --recursive</code> of the <code>rust-docs</code> tarball</p>



<a name="227915474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227915474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227915474">(Feb 26 2021 at 11:39)</a>:</h4>
<p>so if you change the contents of the tarball to include what you want they'll get deployed</p>



<a name="227915907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227915907" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227915907">(Feb 26 2021 at 11:43)</a>:</h4>
<p>ah thanks <span class="user-mention" data-user-id="121055">@Pietro Albini</span>, now <a href="https://static.rust-lang.org/dist/2021-02-26">I see the tarballs</a>. How are the assets of <a href="http://doc.rust-lang.org">doc.rust-lang.org</a> generated? How is that tarball generated? By the nightly CD run, right?</p>



<a name="227915940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227915940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227915940">(Feb 26 2021 at 11:43)</a>:</h4>
<p>in general the release process is a glorified copy/paste</p>



<a name="227916005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916005">(Feb 26 2021 at 11:44)</a>:</h4>
<p>the tarballs are generated by rust-lang/rust's bors CI</p>



<a name="227916042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916042">(Feb 26 2021 at 11:44)</a>:</h4>
<p>and all the tarballs for all the commits are uploaded to <a href="http://ci-artifacts.rust-lang.org/rustc-builds/{hash}">ci-artifacts.rust-lang.org/rustc-builds/{hash}</a></p>



<a name="227916046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916046">(Feb 26 2021 at 11:44)</a>:</h4>
<p>so IIUC if I wanted to add a new static asset <em>and</em> a parameter when running the rustdoc generation that should be the place</p>



<a name="227916083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916083">(Feb 26 2021 at 11:45)</a>:</h4>
<p>then the release process grabs the last commit available on <a href="http://ci-artifacts.rust-lang.org">ci-artifacts.rust-lang.org</a>, signs it and uploads it to <a href="http://static.rust-lang.org">static.rust-lang.org</a></p>



<a name="227916111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916111">(Feb 26 2021 at 11:45)</a>:</h4>
<p>so you need to tweak stuff in the rust-lang/rust repo</p>



<a name="227916118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916118">(Feb 26 2021 at 11:45)</a>:</h4>
<p>(exactly where depends on what you wanna change)</p>



<a name="227916243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916243">(Feb 26 2021 at 11:46)</a>:</h4>
<p>I see. thanks a lot for the overview. I'll check more closely the bits that you  mentioned and be back with more questions :)</p>



<a name="227916346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/Question%20about%20%22doc.rust-lang.org/std%22/near/227916346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/Question.20about.20.22doc.2Erust-lang.2Eorg.2Fstd.22.html#227916346">(Feb 26 2021 at 11:47)</a>:</h4>
<p>just to be clear the idea was to add two static files to the root of <a href="http://doc.rust-lang.org">doc.rust-lang.org</a> and patch the <code>index.html</code> of the rustdoc documentation and I wanted to figure out 1) the process to do that and 2) submit a patch for evaluation</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
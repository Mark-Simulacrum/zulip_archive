<html>
<head><meta charset="utf-8"><title>bors on ecs · t-infra · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/index.html">t-infra</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html">bors on ecs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="213423455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213423455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213423455">(Oct 15 2020 at 13:20)</a>:</h4>
<p>so, I was thinking about the best way to deploy bors on ecs</p>



<a name="213423517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213423517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213423517">(Oct 15 2020 at 13:20)</a>:</h4>
<p>and I have a rough plan on how to do the migration</p>



<a name="213423563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213423563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213423563">(Oct 15 2020 at 13:21)</a>:</h4>
<p>we change the current homu <em>not</em> to listen on <a href="http://bors.rust-lang.org">bors.rust-lang.org</a></p>



<a name="213423647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213423647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213423647">(Oct 15 2020 at 13:21)</a>:</h4>
<p>we setup the instance on ecs listening on <a href="http://bors.rust-lang.org">bors.rust-lang.org</a></p>



<a name="213423673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213423673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213423673">(Oct 15 2020 at 13:21)</a>:</h4>
<p>and then we try migrating a couple less trafficked repositories</p>



<a name="213423981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213423981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213423981">(Oct 15 2020 at 13:23)</a>:</h4>
<p>this is because I kinda want to also move managing the webhooks to terraform, so that adding a new repository in a list in terraform:</p>
<ul>
<li>generates a new secret value</li>
<li>stores the secret value on parameter store</li>
<li>add the environment variable with the secret value to the container</li>
<li>creates the github webhook</li>
</ul>



<a name="213424552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213424552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213424552">(Oct 15 2020 at 13:26)</a>:</h4>
<p>(also created <a href="https://github.com/rust-lang/homu/pull/106">https://github.com/rust-lang/homu/pull/106</a>)</p>



<a name="213424578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213424578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213424578">(Oct 15 2020 at 13:26)</a>:</h4>
<p>how does the plan sound <span class="user-mention" data-user-id="116122">@simulacrum</span>?</p>



<a name="213425928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213425928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213425928">(Oct 15 2020 at 13:35)</a>:</h4>
<p>hm</p>



<a name="213425939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213425939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213425939">(Oct 15 2020 at 13:35)</a>:</h4>
<p>so I am a bit hesitant to break people using <a href="http://bors.rust-lang.org">bors.rust-lang.org</a> today</p>



<a name="213425969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213425969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213425969">(Oct 15 2020 at 13:35)</a>:</h4>
<p>other than that, it seems fine, and I'm not too worried about it</p>



<a name="213426043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213426043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213426043">(Oct 15 2020 at 13:36)</a>:</h4>
<p>Would be good to use the banner support you added to have a "click here for the rust-lang/rust bors" or something like that</p>



<a name="213426794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213426794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213426794">(Oct 15 2020 at 13:42)</a>:</h4>
<p>that's a great idea</p>



<a name="213426809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213426809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213426809">(Oct 15 2020 at 13:42)</a>:</h4>
<p>uh</p>



<a name="213426860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213426860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213426860">(Oct 15 2020 at 13:42)</a>:</h4>
<p>I think it won't work, since if you visit the page of a repo that doesn't exist it throws an exception</p>



<a name="213426913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213426913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213426913">(Oct 15 2020 at 13:43)</a>:</h4>
<p>without showing the banner</p>



<a name="213426985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213426985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213426985">(Oct 15 2020 at 13:43)</a>:</h4>
<p>gah</p>



<a name="213426998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213426998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213426998">(Oct 15 2020 at 13:43)</a>:</h4>
<p>well, unfortunate</p>



<a name="213427060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427060">(Oct 15 2020 at 13:44)</a>:</h4>
<p>I guess we can add the repo perhaps? just leaving it empty?</p>



<a name="213427081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427081">(Oct 15 2020 at 13:44)</a>:</h4>
<p>i.e. not actually connect it</p>



<a name="213427105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427105">(Oct 15 2020 at 13:44)</a>:</h4>
<p>iirc the "homu name" of the repo doesn't need to match the github name</p>



<a name="213427624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427624">(Oct 15 2020 at 13:48)</a>:</h4>
<p>I guess yes</p>



<a name="213427666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427666">(Oct 15 2020 at 13:48)</a>:</h4>
<p>I'm not really worried too much about it so w/e though</p>



<a name="213427691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427691">(Oct 15 2020 at 13:48)</a>:</h4>
<p>we can also not use <a href="http://bors.rust-lang.org">bors.rust-lang.org</a> for now on ecs, just put it on bors2</p>



<a name="213427721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427721">(Oct 15 2020 at 13:49)</a>:</h4>
<p>and then when we actually migrate the db we can put that on bors</p>



<a name="213427817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427817">(Oct 15 2020 at 13:49)</a>:</h4>
<p>so, the main thing I'm worried about the ECS migration is that we're going to run homu on a network file system</p>



<a name="213427914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427914">(Oct 15 2020 at 13:50)</a>:</h4>
<p>so I could deploy it to another domain while we test stuff on a separate repo</p>



<a name="213427927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427927">(Oct 15 2020 at 13:50)</a>:</h4>
<p>restarting it and trying to break it</p>



<a name="213427931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427931">(Oct 15 2020 at 13:50)</a>:</h4>
<p>yeah, that's basically what I think would be good</p>



<a name="213427950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427950">(Oct 15 2020 at 13:50)</a>:</h4>
<p>I am a bit worried about sqlite locking fwiw</p>



<a name="213427955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427955">(Oct 15 2020 at 13:50)</a>:</h4>
<p>and then we do a migration of everything at once</p>



<a name="213427994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213427994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213427994">(Oct 15 2020 at 13:51)</a>:</h4>
<p><a href="https://aws.amazon.com/about-aws/whats-new/2017/03/amazon-elastic-file-system-amazon-efs-now-supports-nfsv4-lock-upgrading-and-downgrading/">https://aws.amazon.com/about-aws/whats-new/2017/03/amazon-elastic-file-system-amazon-efs-now-supports-nfsv4-lock-upgrading-and-downgrading/</a></p>



<a name="213428050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213428050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213428050">(Oct 15 2020 at 13:51)</a>:</h4>
<p>if they mention sqlite I expect it's going to work</p>



<a name="213428879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213428879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213428879">(Oct 15 2020 at 13:56)</a>:</h4>
<p>I am mostly worried about the ecs uptime checking which means you need a network port open in 30 or 60 seconds</p>



<a name="213428935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213428935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213428935">(Oct 15 2020 at 13:57)</a>:</h4>
<p>so if bors is taking a lock on the sqlite db and the other one then can't open it that'll be a problem</p>



<a name="213428940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213428940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213428940">(Oct 15 2020 at 13:57)</a>:</h4>
<p>should be solveable though</p>



<a name="213429268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213429268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213429268">(Oct 15 2020 at 13:59)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> we can add a <code>/health</code> endpoint that doesn't touch sqlite</p>



<a name="213429281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213429281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213429281">(Oct 15 2020 at 13:59)</a>:</h4>
<p>Sure</p>



<a name="213429405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213429405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213429405">(Oct 15 2020 at 14:00)</a>:</h4>
<p>though you'd want some kind of queueing then so that new requests that are hitting the new instance don't get dropped (since they could contain bors r+ hits)</p>



<a name="213429463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213429463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213429463">(Oct 15 2020 at 14:00)</a>:</h4>
<p>but I think we should just not have it open for exclusive access so it should be fine</p>



<a name="213435286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213435286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213435286">(Oct 15 2020 at 14:37)</a>:</h4>
<p>the new bors token was me</p>



<a name="213481615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213481615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213481615">(Oct 15 2020 at 20:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/242791-t-infra/topic/bors.20on.20ecs/near/213427817">said</a>:</p>
<blockquote>
<p>so, the main thing I'm worried about the ECS migration is that we're going to run homu on a network file system</p>
</blockquote>
<p>Does that include builds, or just the bot's own data?</p>



<a name="213487163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213487163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213487163">(Oct 15 2020 at 21:00)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> just bors's internal database</p>



<a name="213487172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213487172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213487172">(Oct 15 2020 at 21:00)</a>:</h4>
<p>which is mostly a cache tbh</p>



<a name="213487193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213487193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213487193">(Oct 15 2020 at 21:00)</a>:</h4>
<p>Ah, OK. So builds would still take place on a non-network filesystem?</p>



<a name="213490191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213490191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213490191">(Oct 15 2020 at 21:28)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> yep!</p>



<a name="213542219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213542219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213542219">(Oct 16 2020 at 10:25)</a>:</h4>
<p>and the test instance is up <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="213542221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213542221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213542221">(Oct 16 2020 at 10:25)</a>:</h4>
<p><a href="https://bors.rust-lang.net/">https://bors.rust-lang.net/</a></p>



<a name="213542238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213542238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213542238">(Oct 16 2020 at 10:25)</a>:</h4>
<p>(I know it's on <code>.net</code>, I'll remove it once we switch everything to bors on ECS)</p>



<a name="213567537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567537">(Oct 16 2020 at 14:30)</a>:</h4>
<p>ok bors seems to survive restarts on ECS without losing state</p>



<a name="213567587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567587">(Oct 16 2020 at 14:30)</a>:</h4>
<p>restarts if we only have one instance at the time are a bit painful though</p>



<a name="213567682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567682">(Oct 16 2020 at 14:31)</a>:</h4>
<p>as the load balancer starts giving 503s to users, it waits 30 seconds for the instance to deregister, then it's shut down, then it's restarted, then the health check needs to pass</p>



<a name="213567705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567705">(Oct 16 2020 at 14:31)</a>:</h4>
<p>if I counted time right it goes down for like 2 minutes for a deploy</p>



<a name="213567732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567732">(Oct 16 2020 at 14:31)</a>:</h4>
<p>I'm tempted to try and run parallel homu instances when redeploying</p>



<a name="213567736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567736">(Oct 16 2020 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> ^</p>



<a name="213567967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567967">(Oct 16 2020 at 14:33)</a>:</h4>
<p>oh, I expected we would</p>



<a name="213567985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213567985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213567985">(Oct 16 2020 at 14:33)</a>:</h4>
<p>I think 2 minute downtime is a non-starter, tbh</p>



<a name="213568026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213568026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213568026">(Oct 16 2020 at 14:33)</a>:</h4>
<p>that means we lose webhooks that whole time too, right?</p>



<a name="213568794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213568794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213568794">(Oct 16 2020 at 14:38)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> yes</p>



<a name="213571368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213571368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213571368">(Oct 16 2020 at 14:57)</a>:</h4>
<p>ok changed the configuration to revert the "run at most one instance at the time"</p>



<a name="213571453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213571453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213571453">(Oct 16 2020 at 14:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/242791-t-infra/topic/bors.20on.20ecs/near/213567967">said</a>:</p>
<blockquote>
<p>oh, I expected we would</p>
</blockquote>
<p>I think that's because we're doing the shutdown more cleanly than <code>docker rm -f</code></p>



<a name="213763531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213763531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213763531">(Oct 19 2020 at 09:55)</a>:</h4>
<p><span aria-label="warning" class="emoji emoji-26a0" role="img" title="warning">:warning:</span> <strong>Starting the work to migrate bors to the new host</strong> <span aria-label="warning" class="emoji emoji-26a0" role="img" title="warning">:warning:</span></p>



<a name="213765834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213765834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213765834">(Oct 19 2020 at 10:21)</a>:</h4>
<p>pulling the switch</p>



<a name="213767061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213767061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213767061">(Oct 19 2020 at 10:35)</a>:</h4>
<p>ok I found a problem with the setup, around health checks</p>



<a name="213767074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213767074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213767074">(Oct 19 2020 at 10:35)</a>:</h4>
<p>pushing a hotfix to homu</p>



<a name="213767833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213767833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213767833">(Oct 19 2020 at 10:43)</a>:</h4>
<p>running synchronize for rustc</p>



<a name="213769087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213769087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213769087">(Oct 19 2020 at 10:58)</a>:</h4>
<p>ok synchronized rust, r-'d the wrongly categorized PRs</p>



<a name="213769094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213769094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213769094">(Oct 19 2020 at 10:58)</a>:</h4>
<p>now trying to re-enable redirects</p>



<a name="213769346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213769346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213769346">(Oct 19 2020 at 11:01)</a>:</h4>
<p>redirects are now working <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="213769387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213769387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213769387">(Oct 19 2020 at 11:02)</a>:</h4>
<p>reopening the tree on rustc</p>



<a name="213772771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213772771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213772771">(Oct 19 2020 at 11:41)</a>:</h4>
<p>Things that I still need to do:</p>
<ul>
<li>Store the git repositories on EFS: cloning rustc takes a couple minutes, and we don't want that to happen every time we deploy a new version</li>
<li>Remove <code>compiler-builtins</code>, <code>rustup</code> and <code>rustlings</code>, as they don't use bors aymore</li>
</ul>



<a name="213775250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213775250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213775250">(Oct 19 2020 at 12:07)</a>:</h4>
<p>done both!</p>



<a name="213796365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213796365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213796365">(Oct 19 2020 at 14:47)</a>:</h4>
<p>whelp, I figured out why the current build was not merged by bors even though CI finished</p>



<a name="213796383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213796383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213796383">(Oct 19 2020 at 14:47)</a>:</h4>
<p>forgot to update the webhook in rust-lang-ci/rust</p>



<a name="213800252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213800252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213800252">(Oct 19 2020 at 15:10)</a>:</h4>
<p>gah terraform's github provider is... not great</p>



<a name="213800845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213800845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213800845">(Oct 19 2020 at 15:14)</a>:</h4>
<p>ok this should be fixed now</p>



<a name="213800890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213800890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213800890">(Oct 19 2020 at 15:14)</a>:</h4>
<p>I'll monitor</p>



<a name="213801746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213801746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213801746">(Oct 19 2020 at 15:18)</a>:</h4>
<p>yay it picked up builds!</p>



<a name="213811351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213811351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213811351">(Oct 19 2020 at 16:29)</a>:</h4>
<p>wow bors autodeploy is <em>so nice</em></p>



<a name="213815640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213815640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213815640">(Oct 19 2020 at 17:02)</a>:</h4>
<p>ok <span class="user-group-mention" data-user-group-id="2943">@T-infra</span> I think I'm done with the bors changes <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="213815697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213815697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213815697">(Oct 19 2020 at 17:03)</a>:</h4>
<p>bors is now fully running on ECS, and there is a dummy instance running on RCS with an empty configuration</p>



<a name="213815714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213815714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213815714">(Oct 19 2020 at 17:03)</a>:</h4>
<p>(to avoid disrupting the fragile RCS)</p>



<a name="213815736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213815736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213815736">(Oct 19 2020 at 17:03)</a>:</h4>
<p>and I wrote some docs @ <a href="https://github.com/rust-lang/rust-forge/pull/462">https://github.com/rust-lang/rust-forge/pull/462</a></p>



<a name="213816009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213816009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213816009">(Oct 19 2020 at 17:05)</a>:</h4>
<p>oh, right, the <a href="http://bors.rust-lang.org">bors.rust-lang.org</a> domain name is now the primary one</p>



<a name="213816023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242791-t-infra/topic/bors%20on%20ecs/near/213816023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/242791-t-infra/topic/bors.20on.20ecs.html#213816023">(Oct 19 2020 at 17:05)</a>:</h4>
<p>and the webhooks are managed by terraform <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
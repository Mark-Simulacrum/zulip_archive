<html>
<head><meta charset="utf-8"><title>Optimizing datalog execution · t-compiler/wg-polonius · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/index.html">t-compiler/wg-polonius</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html">Optimizing datalog execution</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259533367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259533367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259533367">(Oct 29 2021 at 14:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/Sprint.202021-10-29/near/259532226">said</a>:</p>
<blockquote>
<p>side note: I haven't thought at all about this, but I could imagine us wanting to "collapse" the effects of statements within basic blocks. Have we thought about how possible that is? <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
</blockquote>
<p>As an optimization? I think it's possible for some relations. We do this in the dataflow framework for gen/kill problems. Another benefit is processing nodes within a single basic block in order when the entry state changes.</p>



<a name="259535100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535100">(Oct 29 2021 at 14:49)</a>:</h4>
<p>Yes, as an optimization, <span class="user-mention" data-user-id="118594">@Dylan MacKenzie (ecstatic-morse)</span></p>



<a name="259535189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535189">(Oct 29 2021 at 14:50)</a>:</h4>
<p>I think we should be able to do this</p>



<a name="259535202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535202">(Oct 29 2021 at 14:50)</a>:</h4>
<p>We are basically just doing gen/kill sets</p>



<a name="259535227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535227">(Oct 29 2021 at 14:50)</a>:</h4>
<p>In a way, we're already kind of "hardcoding" a bunch of micro-stages and collapsing them into a single statement</p>



<a name="259535247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535247">(Oct 29 2021 at 14:50)</a>:</h4>
<p>so it feels like it <em>should</em> be summarize over several statements that execute in sequence</p>



<a name="259535565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535565">(Oct 29 2021 at 14:52)</a>:</h4>
<p>It does depend on the nature of the transfer function at each node. During dataflow, if you are copying bits between variables you can't coalesce transfer functions, for example.</p>



<a name="259535645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535645">(Oct 29 2021 at 14:53)</a>:</h4>
<p>I'd have to think about whether our relations can be combined.</p>



<a name="259535921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535921">(Oct 29 2021 at 14:55)</a>:</h4>
<p>right</p>



<a name="259535951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Optimizing%20datalog%20execution/near/259535951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Optimizing.20datalog.20execution.html#259535951">(Oct 29 2021 at 14:55)</a>:</h4>
<p>I think it should work, but maybe not</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
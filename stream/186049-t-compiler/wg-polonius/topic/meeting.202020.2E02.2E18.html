<html>
<head><meta charset="utf-8"><title>meeting 2020.02.18 · t-compiler/wg-polonius · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/index.html">t-compiler/wg-polonius</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html">meeting 2020.02.18</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="188402351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188402351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188402351">(Feb 17 2020 at 19:39)</a>:</h4>
<p>Hi! I'm busy tomorrow but I'll report early: I have fixed the errors that CI and <span class="user-mention" data-user-id="116113">@lqd</span> helped alerting me to, and I think the Polonius PR is ready to merge. I have documented all caveats I can think of in <a href="https://github.com/rust-lang-nursery/polonius/issues/135" target="_blank" title="https://github.com/rust-lang-nursery/polonius/issues/135">polonius#135</a>. My plan is to document everything in the Book in a separate PR, because this one is blocking the outstanding <a href="https://github.com/rust-lang/rust/issues/68993" target="_blank" title="https://github.com/rust-lang/rust/issues/68993">rust#68993</a>.</p>



<a name="188402663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188402663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188402663">(Feb 17 2020 at 19:45)</a>:</h4>
<p><span class="user-mention" data-user-id="204115">@Albin Stjerna</span> awesome <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="188402746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188402746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188402746">(Feb 17 2020 at 19:47)</a>:</h4>
<p>I looked at it back in november and once again earlier quickly, but it did look good to me</p>



<a name="188402927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188402927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188402927">(Feb 17 2020 at 19:50)</a>:</h4>
<p><span class="user-mention" data-user-id="204115">@Albin Stjerna</span> I know niko looked it over already but did you happen to add some smoke tests in the rustc PR btw ? just a few that will be always run (so they have to be fast and not OOM ;) to make sure move errors don't randomly break when some other unrelated code is changed (there are some of those smoke tests for other -Z polonius features in a nll/polonius test subfolder)</p>



<a name="188402946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188402946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188402946">(Feb 17 2020 at 19:51)</a>:</h4>
<p>I did add a few but I’m not sure I actually test them</p>



<a name="188402954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188402954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188402954">(Feb 17 2020 at 19:51)</a>:</h4>
<p>It’s probably a good idea to add some :)</p>



<a name="188403011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188403011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188403011">(Feb 17 2020 at 19:52)</a>:</h4>
<p>This is for the compiletests right?</p>



<a name="188403013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188403013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188403013">(Feb 17 2020 at 19:52)</a>:</h4>
<p>yeah</p>



<a name="188403019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188403019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188403019">(Feb 17 2020 at 19:52)</a>:</h4>
<p>let me link you to the folder it'll be easier</p>



<a name="188403023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188403023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188403023">(Feb 17 2020 at 19:52)</a>:</h4>
<p>so that you see the compile flags dance</p>



<a name="188403055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188403055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188403055">(Feb 17 2020 at 19:53)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/tree/master/src/test/ui/nll/polonius" target="_blank" title="https://github.com/rust-lang/rust/tree/master/src/test/ui/nll/polonius">https://github.com/rust-lang/rust/tree/master/src/test/ui/nll/polonius</a></p>



<a name="188403177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188403177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188403177">(Feb 17 2020 at 19:55)</a>:</h4>
<p>any one of those  tests (move errors could be another failing test) asks to be run under polonius (with or without using the polonius compare mode) to ensure it will succeed/fail even if the compare-mode itself isn't used (which it can't really be, because of the OOMs but that's a different issue :)</p>



<a name="188410051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188410051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188410051">(Feb 17 2020 at 22:17)</a>:</h4>
<p><span class="user-mention" data-user-id="204115">@Albin Stjerna</span> <a href="https://github.com/rust-lang-nursery/polonius/issues/135" target="_blank" title="https://github.com/rust-lang-nursery/polonius/issues/135">polonius#135</a> looks good to me — in any case, whatever nits I may have (and I don't have any) are less important than the fact that the rustc polonius compare-mode tests (minus the ones OOM-ing) pass, and there are <em>some</em> new tests exercizing these awesome new polonius move errors :) since you've designed the rules with niko last time, and this matches closely, I say let's merge now, wdyt ?</p>



<a name="188410157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188410157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188410157">(Feb 17 2020 at 22:20)</a>:</h4>
<p>then I can try to publish (it didn't work last time, but maybe it will this time :) so that the rustc PR is unblocked</p>



<a name="188410331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188410331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188410331">(Feb 17 2020 at 22:22)</a>:</h4>
<p>(when you do update that PR to the future new polonius-engine version and a couple of move errors smoke tests, don't forget to rustfmt that one failing file — and you can then at your leisure <code>@bors r=nikomatsakis,lqd</code> <span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span>)</p>



<a name="188411825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188411825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188411825">(Feb 17 2020 at 22:56)</a>:</h4>
<p>merged, will work on removing the lalrpop warnings now</p>



<a name="188412082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188412082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188412082">(Feb 17 2020 at 23:02)</a>:</h4>
<p>it's only in test code (since the warnings are in the lalrpop generated code from <code>polonius-parser</code>) but still, <a href="https://github.com/rust-lang/polonius/pull/142" target="_blank" title="https://github.com/rust-lang/polonius/pull/142">https://github.com/rust-lang/polonius/pull/142</a> – I'll merge that once CI passes, to try and publish the new release (hopefully it'll work this time)</p>



<a name="188414274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188414274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188414274">(Feb 18 2020 at 00:01)</a>:</h4>
<p>it did work this time, <code>polonius-engine</code> 0.12 published</p>



<a name="188458446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188458446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188458446">(Feb 18 2020 at 15:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="204115">Albin Stjerna</span> <a href="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/meeting.202020.2E02.2E18/near/188402946" title="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/meeting.202020.2E02.2E18/near/188402946">said</a>:</p>
<blockquote>
<p>I did add a few but I’m not sure I actually test them</p>
</blockquote>
<p>where are those btw ? I don't think I saw them in <a href="https://github.com/rust-lang/rust/issues/68993" target="_blank" title="https://github.com/rust-lang/rust/issues/68993">#68993</a></p>



<a name="188458722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188458722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188458722">(Feb 18 2020 at 15:12)</a>:</h4>
<p>I didn't see either the places where rustc would read the polonius move errors and emit them ? (maybe this PR is solely dedicated to fact renaming ? if that's the case, disregard what I've said about adding compiletests to check the emitted move errors of course; I probably misunderstood that this PR was the rustc side of your polonius move error work)</p>



<a name="188558562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188558562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188558562">(Feb 19 2020 at 16:14)</a>:</h4>
<blockquote>
<p>I didn't see either the places where rustc would read the polonius move errors and emit them ? (maybe this PR is solely dedicated to fact renaming ? if that's the case, disregard what I've said about adding compiletests to check the emitted move errors of course; I probably misunderstood that this PR was the rustc side of your polonius move error work)</p>
</blockquote>
<p>No that’s correct and you’re right; I should add some smoke tests to the Rust PR!</p>



<a name="188566170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188566170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188566170">(Feb 19 2020 at 17:36)</a>:</h4>
<p><span class="user-mention" data-user-id="204115">@Albin Stjerna</span> what would they test if move errors are not emitted yet ? the existing smoke tests under <code>x.py test</code> will test that "rustc master + polonius 0.11" has the same behaviour as "rustc + your PR + polonius 0.12", and you'd check that the tests under the polonius compare-mode (minus OOMs) behave similarly (as you've already been doing)</p>



<a name="188567262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188567262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188567262">(Feb 19 2020 at 17:49)</a>:</h4>
<p><span class="user-mention" data-user-id="204115">@Albin Stjerna</span> however, if your PR <em>does</em> make rustc emit the move errors that polonius 0.12 computes -- which is what I'm not sure about, hence the confusion :) the PR description only mentions the fact format, and fact generation to compute move errors -- then yeah for sure we need smoke tests :)</p>



<a name="188567382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188567382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188567382">(Feb 19 2020 at 17:50)</a>:</h4>
<p>(I mean, the move errors <em>could be</em> emitted using the same codepath as other polonius errors; which is something that wasn't possible with subset errors for example)</p>



<a name="188567561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188567561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188567561">(Feb 19 2020 at 17:52)</a>:</h4>
<p>Err, I think the new errors are a proper subset of the old errors and that they are emitted using the same code path, which means that the tests as they currently are wouldn’t pass</p>



<a name="188567624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188567624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188567624">(Feb 19 2020 at 17:53)</a>:</h4>
<p>Because some now fixed errors are expected</p>



<a name="188567779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188567779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188567779">(Feb 19 2020 at 17:54)</a>:</h4>
<p>yeah I don't know, I can't easily tell for sure as I'm less familiar about them than you are, if they are perfectly matching what is expected or somehow ignored and the existing old codepath emits them equally well :)</p>



<a name="188569032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188569032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188569032">(Feb 19 2020 at 18:08)</a>:</h4>
<p><span class="user-mention" data-user-id="204115">@Albin Stjerna</span> a possible way to test could be to temporarily disable computing move errors in polonius -- if a given move error test then fails under -Zpolonius, we'll know it works :)</p>



<a name="188570430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188570430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188570430">(Feb 19 2020 at 18:23)</a>:</h4>
<p>No wait, now I remember. Move errors should <em>not</em> be reported in Rust, the situation should be identical to subset errors; as far as I remember the responses from Polonius aren’t “connected” to anything</p>



<a name="188570481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188570481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188570481">(Feb 19 2020 at 18:24)</a>:</h4>
<p>But I’ll check because I don’t remember clearly</p>



<a name="188570521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188570521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188570521">(Feb 19 2020 at 18:24)</a>:</h4>
<p>polonius sends them to rustc here <a href="https://github.com/rust-lang/polonius/blob/master/polonius-engine/src/output/mod.rs#L172-L174" target="_blank" title="https://github.com/rust-lang/polonius/blob/master/polonius-engine/src/output/mod.rs#L172-L174">https://github.com/rust-lang/polonius/blob/master/polonius-engine/src/output/mod.rs#L172-L174</a>, but I don't see rustc reading that <code>move_errors</code> field, hence my confusion :)</p>



<a name="188570617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188570617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188570617">(Feb 19 2020 at 18:25)</a>:</h4>
<p>(and that subset errors needed to be specifically emitted under -Zpolonius, if the situation is identical)</p>



<a name="188627796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188627796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188627796">(Feb 20 2020 at 10:58)</a>:</h4>
<p>to clear things up I built the PR locally:</p>



<a name="188627898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188627898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188627898">(Feb 20 2020 at 11:00)</a>:</h4>
<ul>
<li>if I comment the lines above (storing the move errors in the polonius output), no polonius unit test fail but the dedicated inputs change behaviour, eg the smoke test <code>basic_move_error()</code></li>
</ul>



<a name="188627956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188627956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188627956">(Feb 20 2020 at 11:01)</a>:</h4>
<ul>
<li>extracting those 3 smoke tests to a dedicated file, and trying it out with this locally built version of the PR using this polonius without move-errors, it still fails to compile</li>
</ul>



<a name="188628025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188628025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188628025">(Feb 20 2020 at 11:02)</a>:</h4>
<p>the errors are indeed move/init errors</p>



<a name="188628138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188628138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188628138">(Feb 20 2020 at 11:04)</a>:</h4>
<p>this seems to match what I was saying, that rustc wouldn't emit the move errors that polonius computes ?</p>



<a name="188628474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188628474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188628474">(Feb 20 2020 at 11:11)</a>:</h4>
<p><span class="user-mention" data-user-id="204115">@Albin Stjerna</span> does that match your understanding as well ?</p>



<a name="188745416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202020.02.18/near/188745416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202020.2E02.2E18.html#188745416">(Feb 21 2020 at 16:00)</a>:</h4>
<p>Yes!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
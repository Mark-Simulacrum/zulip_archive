<html>
<head><meta charset="utf-8"><title>datafrog#38 notes · t-compiler/wg-polonius · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/index.html">t-compiler/wg-polonius</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html">datafrog#38 notes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="253124035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253124035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253124035">(Sep 13 2021 at 16:59)</a>:</h4>
<p><span class="user-mention" data-user-id="320917">@regexident</span> there's a trivial way to express the <a href="https://github.com/rust-lang/datafrog/issues/38#issuecomment-904060973">motivating example</a> from <a href="https://github.com/rust-lang/datafrog/issues/38">datafrog#38</a> in datafrog. Basically, a <code>ValueFilter</code> can remove tuples from the output of a join (in contrast to a <code>PrefixFilter</code>, which can remove certain <em>keys</em> from the <em>input</em> of a join, sometimes eliminating the need to do the join at all). So to express that placeholder origins are live everywhere, all you to do is write a <code>ValueFilter</code> that returns <code>true</code> iff the origin is in <code>placeholder_origin</code> <strong>or</strong> is in <code>origin_live_at</code> at the relevant point in the CFG.</p>
<p>This is a bit unsatisfying to me, since it becomes the user's responsibility to do caching. Due to the ordering of fields in <code>subset</code>, we will generate a lot of intermediate results with the same <code>origin</code> all in a row, and it would be nice to take advantage of that somehow. I'm not sure what the best way would be to expose a <code>ValueFilter</code> that is backed by a relation (or multiple relations), however.</p>



<a name="253124109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253124109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253124109">(Sep 13 2021 at 17:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">Dylan MacKenzie (ecstatic-morse)</span> has marked this topic as resolved.</p>



<a name="253124132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253124132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253124132">(Sep 13 2021 at 17:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">Dylan MacKenzie (ecstatic-morse)</span> has marked this topic as unresolved.</p>



<a name="253135635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253135635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253135635">(Sep 13 2021 at 18:19)</a>:</h4>
<p>I would probably start by making a new <code>ValueFilterWith</code> leaper that wraps a <code>Relation</code> and takes a function to map from the <code>(Key, Value)</code> of the leapjoin to the element type of the underlying <code>Relation</code>. It's easy to write a cached implementation of <code>Leaper</code> for such a type, and also pretty easy to write a new leaper that wraps two <code>ValueFilterWith</code>s and allows for disjunction.</p>



<a name="253135825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253135825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253135825">(Sep 13 2021 at 18:20)</a>:</h4>
<p>That does seem a bit heavyweight though. I wonder if there's a more elegant solution?</p>



<a name="253136134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253136134" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253136134">(Sep 13 2021 at 18:22)</a>:</h4>
<p>This is the problem with modifying a Godel award winner's code: it always feels like you're messing up some beautiful underlying idea. I had the same problem when working on with Peter Shor's emacs plugins <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="253136540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253136540" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253136540">(Sep 13 2021 at 18:25)</a>:</h4>
<p>BTW <span class="user-mention" data-user-id="320917">@regexident</span>, you should read Frank's <a href="https://github.com/frankmcsherry/blog/blob/master/posts/2018-05-19.md">blog post</a> on what became datafrog if you haven't already. It helps clarify the <code>Leaper</code> interface.</p>



<a name="253138268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253138268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253138268">(Sep 13 2021 at 18:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">Dylan MacKenzie (ecstatic-morse)</span> <a href="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/datafrog.2338.20notes/near/253136134">said</a>:</p>
<blockquote>
<p>This is the problem with modifying a Godel award winner's code: it always feels like you're messing up some beautiful underlying idea. I had the same problem when working on with Peter Shor's emacs plugins <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>
</blockquote>
<p><span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="253139367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253139367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253139367">(Sep 13 2021 at 18:44)</a>:</h4>
<p>(I remember Frank completing datafrog over a weekend, though you could feel the timely/differential dataflow influence in its API. And the <code>Leaper</code>s were added the next weekend :)</p>



<a name="253143569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/datafrog%2338%20notes/near/253143569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> regexident <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/datafrog.2338.20notes.html#253143569">(Sep 13 2021 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="118594">@Dylan MacKenzie (ecstatic-morse)</span>  I read the blog post a couple of years ago (and even had the pleasure of attending a talk on differential privacy by Frank here in Berlin <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span>), but definitely will give it another thorough read now!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
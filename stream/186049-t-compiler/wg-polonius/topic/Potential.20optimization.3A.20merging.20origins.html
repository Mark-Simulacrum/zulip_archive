<html>
<head><meta charset="utf-8"><title>Potential optimization: merging origins · t-compiler/wg-polonius · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/index.html">t-compiler/wg-polonius</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html">Potential optimization: merging origins</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250394999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250394999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250394999">(Aug 23 2021 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116113">@lqd</span> A (potentially) quick question: has anybody tried optimization that merges origins? To my understanding, this is always sound (modulo universal regions) because it only expands origins, which should be fine.</p>



<a name="250395274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250395274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250395274">(Aug 23 2021 at 18:52)</a>:</h4>
<p>not necessarily in so clear terms :)</p>



<a name="250395388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250395388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250395388">(Aug 23 2021 at 18:53)</a>:</h4>
<p>but I think we could say that the whole journey of the equality prototype resulting from <a href="https://github.com/rust-lang/polonius/issues/107">https://github.com/rust-lang/polonius/issues/107</a> also dealt with merging equal origins</p>



<a name="250395524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250395524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250395524">(Aug 23 2021 at 18:54)</a>:</h4>
<p>Thanks! I will check it out.</p>



<a name="250395564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250395564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250395564">(Aug 23 2021 at 18:55)</a>:</h4>
<p>there are a few threads here on zulip as well about it</p>



<a name="250396065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250396065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250396065">(Aug 23 2021 at 18:59)</a>:</h4>
<p>niko will surely be able to describe this better than I can, but I do remember that one of its points (maybe not in the OP there, but the later prototypes that evolved from it, and ultimately failed but still contained interesting grains of truth worth analyzing IMO) was about producing loans in parent equal origins rather than the usual one</p>



<a name="250396938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250396938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250396938">(Aug 23 2021 at 19:05)</a>:</h4>
<p>Thanks for the pointers! I will read up a bit and come back if my idea still seems to be unexplored/viable.</p>



<a name="250397129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250397129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250397129">(Aug 23 2021 at 19:06)</a>:</h4>
<p>awesome, looking forward to it :)</p>



<a name="250464536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Potential%20optimization%3A%20merging%20origins/near/250464536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Potential.20optimization.3A.20merging.20origins.html#250464536">(Aug 24 2021 at 10:09)</a>:</h4>
<p>you could also probably argue that arielb's NLL Graph SSA proposal could achieve some of this via dominance in the subset graph (even though, as described, I imagine it was really more about loan propagation in the CFG), and what I mentioned for <a href="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/Polonius.20Hackathon.202021-07-30/near/246830005">potential sprint ideas</a> as "- subset graph compression: computing subsets/loans over subset SCCs"</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Tests with souffle · t-compiler/wg-polonius · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/index.html">t-compiler/wg-polonius</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html">Tests with souffle</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259713814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Tests%20with%20souffle/near/259713814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Domenic Quirl <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html#259713814">(Oct 30 2021 at 06:25)</a>:</h4>
<p>Re: CI with souffle, I've noticed a few times now that it we change the rules and they contain an error (for souffle, not logically), then the tests still pass because there is no successful run of souffle, the outputs are not updated and the fact that souffle fails goes unnoticed. We should probably address that (which I can do myself, right now I am on mobile and wanted to make sure to have this written down somewhere)</p>



<a name="259718121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Tests%20with%20souffle/near/259718121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html#259718121">(Oct 30 2021 at 08:22)</a>:</h4>
<p>ah yes I wanted to look at that, however on CI it shouldn’t matter, the runners are spawned from scratch each time</p>



<a name="259719181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Tests%20with%20souffle/near/259719181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html#259719181">(Oct 30 2021 at 08:48)</a>:</h4>
<p><span class="user-mention" data-user-id="337115">@Domenic Quirl</span> should be good now <a href="https://github.com/nikomatsakis/polonius.next/pull/4/commits/acfec4562ad1023e2966e7cbee2664068b1db6ac">https://github.com/nikomatsakis/polonius.next/pull/4/commits/acfec4562ad1023e2966e7cbee2664068b1db6ac</a></p>



<a name="259719318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Tests%20with%20souffle/near/259719318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html#259719318">(Oct 30 2021 at 08:52)</a>:</h4>
<p>I'm not sure the "fact collection" part can fail and things would keep running, but if we notice that we can just recreate the output folder each time and be done with it</p>



<a name="259719358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Tests%20with%20souffle/near/259719358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html#259719358">(Oct 30 2021 at 08:53)</a>:</h4>
<p>(it doesn't look like it would continue to run but I've not read that code closely)</p>



<a name="259873637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Tests%20with%20souffle/near/259873637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html#259873637">(Nov 01 2021 at 14:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="337115">Domenic Quirl</span> <a href="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/Tests.20with.20souffle/near/259713814">said</a>:</p>
<blockquote>
<p>Re: CI with souffle, I've noticed a few times now that it we change the rules and they contain an error (for souffle, not logically), then the tests still pass because there is no successful run of souffle, the outputs are not updated and the fact that souffle fails goes unnoticed. We should probably address that (which I can do myself, right now I am on mobile and wanted to make sure to have this written down somewhere)</p>
</blockquote>
<p>This is super annoying</p>



<a name="259875228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/Tests%20with%20souffle/near/259875228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/Tests.20with.20souffle.html#259875228">(Nov 01 2021 at 15:07)</a>:</h4>
<p>I’ve fixed it in the fact gen PR</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>meeting 2019.10.15 · t-compiler/wg-polonius · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/index.html">t-compiler/wg-polonius</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html">meeting 2019.10.15</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="178171613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178171613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178171613">(Oct 15 2019 at 08:30)</a>:</h4>
<p>Hi! <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> I slept perhaps three hours tonight and will probably have gone to bed (or at least, need to wind down) during tonight's (your today's) meeting, so I'll report on what I have been doing now instead. I have worked on initialisation, including cleaning it up and implementing move error reporting in Polonius. I opened a PR (<a href="https://github.com/rust-lang-nursery/polonius/issues/135" target="_blank" title="https://github.com/rust-lang-nursery/polonius/issues/135">polonius#135</a>), which contains  both a list of things left to do and a high-level description of what I did.</p>



<a name="178171912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178171912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178171912">(Oct 15 2019 at 08:35)</a>:</h4>
<p>I guess the thing I'd want some feedback on is: a) is this completely out of whack, and b) how should we proceed to implement move error reporting in Polonius?</p>



<a name="178172510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178172510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178172510">(Oct 15 2019 at 08:45)</a>:</h4>
<p>cool !</p>



<a name="178223828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178223828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178223828">(Oct 15 2019 at 19:02)</a>:</h4>
<p>hello <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> :)</p>



<a name="178223961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178223961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178223961">(Oct 15 2019 at 19:04)</a>:</h4>
<p>(Albin mentioned at the top of the topic they probably wouldn't be here tonight)</p>



<a name="178224001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224001">(Oct 15 2019 at 19:04)</a>:</h4>
<p>a lot of things have happened since last week and I fear I don't remember them all :)</p>



<a name="178224087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224087">(Oct 15 2019 at 19:05)</a>:</h4>
<p>in bulk: I've opened a couple PRs, one to fix clap, one as a proposal we might have discussed tonight, or later</p>



<a name="178224136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224136">(Oct 15 2019 at 19:06)</a>:</h4>
<p>I've "fixed" the equality prototype</p>



<a name="178224167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224167">(Oct 15 2019 at 19:06)</a>:</h4>
<p>a couple of weird things remained in the rustc tests tho</p>



<a name="178224184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224184">(Oct 15 2019 at 19:06)</a>:</h4>
<p>one of which I could use your opinion on Matthew, but maybe only Niko knows</p>



<a name="178224262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224262">(Oct 15 2019 at 19:07)</a>:</h4>
<p>Do you have a link?</p>



<a name="178224264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224264">(Oct 15 2019 at 19:08)</a>:</h4>
<p>(all this is in the <a href="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/equality.20regions" title="#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/equality.20regions">dedicated thread</a> and I was wondering if the infinite loops should compile or not)</p>



<a name="178224344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224344">(Oct 15 2019 at 19:08)</a>:</h4>
<p>in the <a href="https://github.com/rust-lang/rust/blob/master/src/test/ui/borrowck/mut-borrow-in-loop.rs" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/test/ui/borrowck/mut-borrow-in-loop.rs">https://github.com/rust-lang/rust/blob/master/src/test/ui/borrowck/mut-borrow-in-loop.rs</a> case</p>



<a name="178224494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224494">(Oct 15 2019 at 19:10)</a>:</h4>
<p>I wondered about the FactTypes thing as well, I'm a bit unsure it's worth it in the end</p>



<a name="178224537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224537">(Oct 15 2019 at 19:10)</a>:</h4>
<p>but all this can be discussed at a later occasion nbd</p>



<a name="178224642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224642">(Oct 15 2019 at 19:11)</a>:</h4>
<p>I also wondered about the plan about move/initialization errors, which is also the focus of Albin's work (and has opened a WIP PR)</p>



<a name="178224750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224750">(Oct 15 2019 at 19:12)</a>:</h4>
<p>how to architect it wrt rustc, especially seeing its impacts on the rest of the analysis</p>



<a name="178224815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224815">(Oct 15 2019 at 19:13)</a>:</h4>
<p>eg initialization and liveness greatly dominated the other analyses in a lot of examples I've tried</p>



<a name="178224874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178224874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178224874">(Oct 15 2019 at 19:13)</a>:</h4>
<p>as mentioned in another thread I do have a way to make those 20-30x faster, but that would prevent computing all move errors for example, so depending on the plan, that's not going to be acceptable</p>



<a name="178225156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225156">(Oct 15 2019 at 19:16)</a>:</h4>
<p>so this week I'll probably look at the couple cases about the equality prototype and see where are the errors missed</p>



<a name="178225348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225348">(Oct 15 2019 at 19:18)</a>:</h4>
<p>argh sorry</p>



<a name="178225368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225368">(Oct 15 2019 at 19:18)</a>:</h4>
<p>maybe look at parsing, eg adding some of  the missing relations or trying to figure something out about lalrpop, just to refresh my mind on them</p>



<a name="178225406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225406">(Oct 15 2019 at 19:18)</a>:</h4>
<p>man there's a lot to catch up here!</p>



<a name="178225413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225413">(Oct 15 2019 at 19:18)</a>:</h4>
<p>I probably won't be able to do that today</p>



<a name="178225420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225420">(Oct 15 2019 at 19:18)</a>:</h4>
<p>it's been a crazy day</p>



<a name="178225429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225429" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225429">(Oct 15 2019 at 19:18)</a>:</h4>
<p>not really don't worry about it :)</p>



<a name="178225466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225466">(Oct 15 2019 at 19:19)</a>:</h4>
<p>still about <code>!</code> ?</p>



<a name="178225617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225617">(Oct 15 2019 at 19:21)</a>:</h4>
<p>if you find a couple minutes, Albin had questions about initialization IIUC, and since it might involve their thesis, it's probably more important than the rest</p>



<a name="178225801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225801">(Oct 15 2019 at 19:22)</a>:</h4>
<p>(I was also thinking about looking at illegal subset relations again, especially the placeholder loans strat, so we'll see if I can :)</p>



<a name="178225881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225881">(Oct 15 2019 at 19:22)</a>:</h4>
<p>if anyone has something to mention</p>



<a name="178225928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225928">(Oct 15 2019 at 19:23)</a>:</h4>
<p>otherwise good evening/afternoon everyone, ttyl <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="178225967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178225967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178225967">(Oct 15 2019 at 19:23)</a>:</h4>
<p>(thanks again for the answer <span class="user-mention" data-user-id="116118">@Matthew Jasper</span> I'll look into it more)</p>



<a name="178263523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178263523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178263523">(Oct 16 2019 at 06:51)</a>:</h4>
<blockquote>
<p>if you find a couple minutes, Albin had questions about initialization IIUC, and since it might involve their thesis, it's probably more important than the rest</p>
</blockquote>
<p>Nope! I mean, it would be nice if I could add move errors to the thesis, but that's not my plan. :)</p>



<a name="178264462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/186049-t-compiler/wg-polonius/topic/meeting%202019.10.15/near/178264462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanda Stjerna <a href="https://zulip-archive.rust-lang.org/stream/186049-t-compiler/wg-polonius/topic/meeting.202019.2E10.2E15.html#178264462">(Oct 16 2019 at 07:11)</a>:</h4>
<blockquote>
<p>maybe look at parsing, eg adding some of  the missing relations or trying to figure something out about lalrpop, just to refresh my mind on them</p>
</blockquote>
<p>I left a...lot of things to be done in polonius-parser, given that it's basically pre-liveness/initialisation. This is also scary because it makes testing my stuff harder.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
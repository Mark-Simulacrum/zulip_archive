<html>
<head><meta charset="utf-8"><title>meeting 2020-oct-29 · t-lang/project-never-type · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/index.html">t-lang/project-never-type</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html">meeting 2020-oct-29</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="215013037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013037" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013037">(Oct 29 2020 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="215013087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013087">(Oct 29 2020 at 19:03)</a>:</h4>
<p>hey</p>



<a name="215013089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013089" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013089">(Oct 29 2020 at 19:03)</a>:</h4>
<p>so</p>



<a name="215013099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013099" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013099">(Oct 29 2020 at 19:03)</a>:</h4>
<p>I am trying to page back in</p>



<a name="215013124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013124">(Oct 29 2020 at 19:03)</a>:</h4>
<p>I think we were stuck trying to isolate the problem, basically?</p>



<a name="215013186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013186">(Oct 29 2020 at 19:04)</a>:</h4>
<p>Ya, we example we constructed wasn't issuing warning</p>



<a name="215013274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013274">(Oct 29 2020 at 19:04)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/78051">https://github.com/rust-lang/rust/pull/78051</a> -&gt; initial PR</p>



<a name="215013629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013629" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013629">(Oct 29 2020 at 19:07)</a>:</h4>
<p>so</p>



<a name="215013647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013647" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013647">(Oct 29 2020 at 19:07)</a>:</h4>
<p>one option is to try and debug it from without extracting to an example</p>



<a name="215013722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013722">(Oct 29 2020 at 19:08)</a>:</h4>
<p>Did you by any chance push the changes you made to the example ?</p>



<a name="215013725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013725">(Oct 29 2020 at 19:08)</a>:</h4>
<p>but also</p>



<a name="215013756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013756" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013756">(Oct 29 2020 at 19:08)</a>:</h4>
<p>weren't we having problems with librustc</p>



<a name="215013782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013782" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013782">(Oct 29 2020 at 19:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="128294">blitzerr</span> <a href="#narrow/stream/259160-t-lang.2Fproject-never-type/topic/meeting.202020-oct-29/near/215013722">said</a>:</p>
<blockquote>
<p>Did you by any chance push the changes you made to the example ?</p>
</blockquote>
<p>uh...</p>



<a name="215013839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013839">(Oct 29 2020 at 19:08)</a>:</h4>
<p>I don't think I have any "unpushed" changes</p>



<a name="215013843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013843">(Oct 29 2020 at 19:08)</a>:</h4>
<p>which is the example file?</p>



<a name="215013930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013930">(Oct 29 2020 at 19:09)</a>:</h4>
<p><a href="http://panic_macro_fallback.rs">panic_macro_fallback.rs</a></p>



<a name="215013974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215013974" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215013974">(Oct 29 2020 at 19:09)</a>:</h4>
<p>I can share the screen on how far we got ..</p>



<a name="215014101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014101">(Oct 29 2020 at 19:10)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#![feature(never_type_fallback)]</span><span class="w"></span>
<span class="cp">#![deny(fall_back_to_never_type)]</span><span class="w"></span>

<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">io</span>::<span class="n">Error</span><span class="p">;</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">bool</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">_x</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">4</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">44</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">panic</span><span class="o">!</span><span class="p">(</span><span class="s">"unexpected getentropy error: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span>::<span class="n">last_os_error</span><span class="p">());</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="kc">true</span><span class="w"></span>
<span class="w">        </span><span class="p">})</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">foo</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="215014119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014119">(Oct 29 2020 at 19:10)</a>:</h4>
<p>yeah ok I remember this didn't work</p>



<a name="215014151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014151">(Oct 29 2020 at 19:10)</a>:</h4>
<p>right <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="215014195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014195">(Oct 29 2020 at 19:11)</a>:</h4>
<p>I don't seem to even have that file locally</p>



<a name="215014235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014235" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014235">(Oct 29 2020 at 19:11)</a>:</h4>
<p>/me confused</p>



<a name="215014242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014242">(Oct 29 2020 at 19:11)</a>:</h4>
<p>well no matter</p>



<a name="215014267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014267">(Oct 29 2020 at 19:11)</a>:</h4>
<p>no worries !</p>



<a name="215014375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014375">(Oct 29 2020 at 19:12)</a>:</h4>
<p>so what I rthink we can do</p>



<a name="215014389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014389" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014389">(Oct 29 2020 at 19:12)</a>:</h4>
<p>I'm trying to reproduce the error from CI</p>



<a name="215014403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014403">(Oct 29 2020 at 19:12)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/78051/checks?check_run_id=1268608116#step:24:1348">this one</a></p>



<a name="215014422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014422" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014422">(Oct 29 2020 at 19:12)</a>:</h4>
<p>ok, I can</p>



<a name="215014430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014430">(Oct 29 2020 at 19:12)</a>:</h4>
<p>have you done so?</p>



<a name="215014447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014447" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014447">(Oct 29 2020 at 19:12)</a>:</h4>
<p>if you run <code>x.py build --stage 2</code> you will see it</p>



<a name="215014456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014456" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014456">(Oct 29 2020 at 19:12)</a>:</h4>
<p>also, if you prefer, we could use Zoom</p>



<a name="215014485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014485">(Oct 29 2020 at 19:13)</a>:</h4>
<p>though I've been on zoom all day so I don't mind zulip a bit )</p>



<a name="215014575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014575">(Oct 29 2020 at 19:14)</a>:</h4>
<p>I am on zoom</p>



<a name="215014635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215014635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215014635">(Oct 29 2020 at 19:14)</a>:</h4>
<p>oh ok lemme join</p>



<a name="215019264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215019264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215019264">(Oct 29 2020 at 19:54)</a>:</h4>
<p>so <span class="user-mention" data-user-id="128294">@blitzerr</span> before I push these edits</p>



<a name="215019303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215019303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215019303">(Oct 29 2020 at 19:54)</a>:</h4>
<p>I'm .. huh -- I'm actually a bit surprised our micro test didn't work but</p>



<a name="215019322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215019322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215019322">(Oct 29 2020 at 19:54)</a>:</h4>
<p>maybe we can play around with it a bit more now and see if we can get the standalone example</p>



<a name="215019384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215019384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215019384">(Oct 29 2020 at 19:55)</a>:</h4>
<p>for those following along (e.g., <span class="user-mention" data-user-id="125270">@scottmcm</span> I know you were curious), we kind of got the lint "working as expected" but we are now finding some amount of false warnings that we may or may not be able to figure out a way to fix</p>



<a name="215035747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215035747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215035747">(Oct 29 2020 at 22:19)</a>:</h4>
<p><span class="user-mention" data-user-id="128294">@blitzerr</span> I think I found a test</p>



<a name="215035753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215035753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215035753">(Oct 29 2020 at 22:19)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#![deny(fall_back_to_never_type)]</span><span class="w"></span>
<span class="cp">#![allow(unreachable_code)]</span><span class="w"></span>

<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">io</span>::<span class="n">Error</span><span class="p">;</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">_x</span>: <span class="nc">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">panic</span><span class="o">!</span><span class="p">(</span><span class="s">"unexpected getentropy error: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span>::<span class="n">last_os_error</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">foo</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="215037509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215037509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215037509">(Oct 29 2020 at 22:39)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  ohh wow ! Its simpler that what we had the other day</p>



<a name="215037546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215037546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215037546">(Oct 29 2020 at 22:39)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#![feature(never_type_fallback)]</span><span class="w"></span>
<span class="cp">#![deny(fall_back_to_never_type)]</span><span class="w"></span>

<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">io</span>::<span class="n">Error</span><span class="p">;</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">bool</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">_x</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">4</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">44</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">panic</span><span class="o">!</span><span class="p">(</span><span class="s">"unexpected getentropy error: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span>::<span class="n">last_os_error</span><span class="p">());</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="kc">true</span><span class="w"></span>
<span class="w">        </span><span class="p">})</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">foo</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="215037655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215037655" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215037655">(Oct 29 2020 at 22:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  The difference would be we were not assigning the return of lambda to a variable ?</p>



<a name="215096082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215096082" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215096082">(Oct 30 2020 at 13:47)</a>:</h4>
<p><span class="user-mention" data-user-id="128294">@blitzerr</span> yes I can explain why...</p>



<a name="215149379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215149379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215149379">(Oct 30 2020 at 20:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I am listening .. <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="215178402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215178402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215178402">(Oct 31 2020 at 07:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  I have updated the <a href="https://github.com/rust-lang/rust/pull/78051">PR</a>.</p>



<a name="215199966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215199966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215199966">(Oct 31 2020 at 16:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  There are some <a href="https://github.com/rust-lang/rust/pull/78051/checks?check_run_id=1336169292">test failures</a>, but I didn't want to fix them as in all likelihood, we may not be checking in this lint.</p>



<a name="215325572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215325572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215325572">(Nov 02 2020 at 14:32)</a>:</h4>
<p>I guess <span class="user-mention" data-user-id="128294">@blitzerr</span> that I will take a stab at writing up some of the problems we encountered</p>



<a name="215344508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215344508" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215344508">(Nov 02 2020 at 16:42)</a>:</h4>
<p>I saw your notes. It is great.</p>



<a name="215344615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215344615" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215344615">(Nov 02 2020 at 16:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  now that we have std and core compiling, we need to do the crater check and that will be the end of it ?</p>



<a name="215349333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215349333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215349333">(Nov 02 2020 at 17:15)</a>:</h4>
<p><span class="user-mention" data-user-id="128294">@blitzerr</span> that would certainly be useful data</p>



<a name="215349370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215349370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215349370">(Nov 02 2020 at 17:15)</a>:</h4>
<p>we probably should fix those two cases in rustc</p>



<a name="215349379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215349379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215349379">(Nov 02 2020 at 17:16)</a>:</h4>
<p>which we can do readily enough</p>



<a name="215349454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215349454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215349454">(Nov 02 2020 at 17:16)</a>:</h4>
<p>er, by "fix" I mean</p>



<a name="215349464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215349464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215349464">(Nov 02 2020 at 17:16)</a>:</h4>
<p>edit the source to not get warnings anymore</p>



<a name="215349478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215349478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215349478">(Nov 02 2020 at 17:16)</a>:</h4>
<p>so that it builds :)</p>



<a name="215349495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215349495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215349495">(Nov 02 2020 at 17:16)</a>:</h4>
<p>I'd separate that into a WIP commit or something though</p>



<a name="215369327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215369327" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215369327">(Nov 02 2020 at 19:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/259160-t-lang.2Fproject-never-type/topic/meeting.202020-oct-29/near/215349370">said</a>:</p>
<blockquote>
<p>we probably should fix those two cases in rustc</p>
</blockquote>
<p>That's already been taken care of last week. <a href="https://github.com/rust-lang/rust/pull/78051/commits/d95cc41f806aae86b4d2dbed7e91f29c9a6d2a3f">This Pr</a> has it.</p>



<a name="215369335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215369335" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215369335">(Nov 02 2020 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span aria-label="point of information" class="emoji emoji-261d" role="img" title="point of information">:point_of_information:</span></p>



<a name="215369618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215369618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215369618">(Nov 02 2020 at 19:51)</a>:</h4>
<p><span class="user-mention" data-user-id="128294">@blitzerr</span> ok I might push a slightly different version but seems good</p>



<a name="215370087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259160-t-lang/project-never-type/topic/meeting%202020-oct-29/near/215370087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://rust-lang.github.io/zulip_archive/stream/259160-t-lang/project-never-type/topic/meeting.202020-oct-29.html#215370087">(Nov 02 2020 at 19:55)</a>:</h4>
<p>sounds good <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>`Self` and `&#x27;static` #61949 · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html">`Self` and `&#x27;static` #61949</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="170471726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170471726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170471726">(Jul 09 2019 at 17:13)</a>:</h4>
<p>OK, I'll leave some notes here in a bit =)</p>



<a name="170472698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170472698" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> boats <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170472698">(Jul 09 2019 at 17:25)</a>:</h4>
<p>I'm not understanding the forward compatibility hazard here. Could you show an example of code that compiles, and a change that doesn't (or shouldn't) change the signature but stops compiling because the lifetime has changed?</p>



<a name="170472869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170472869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170472869">(Jul 09 2019 at 17:27)</a>:</h4>
<p>it's a bit stretched, but if you have some thing like</p>
<div class="codehilite"><pre><span></span>impl Foo&lt;&#39;a&gt; {
  async fn method(&amp;self) -&gt; Self { /* return some data that actually has type `Foo&lt;&#39;static&gt;` */ }
}
</pre></div>


<p>then you can do</p>
<div class="codehilite"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="n">foo</span><span class="p">.</span><span class="n">method</span><span class="p">()</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>


<p>without an error, even though it outlives the receiver <code>foo</code></p>



<a name="170473030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170473030" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> boats <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170473030">(Jul 09 2019 at 17:29)</a>:</h4>
<p>Got it. So its not to do with the projections in particular</p>



<a name="170474901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170474901" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170474901">(Jul 09 2019 at 17:49)</a>:</h4>
<p>that example may not be quite right</p>



<a name="170474902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170474902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170474902">(Jul 09 2019 at 17:49)</a>:</h4>
<p>you may need to await the returned future</p>



<a name="170474964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170474964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170474964">(Jul 09 2019 at 17:50)</a>:</h4>
<p>actually it's worth trying to create a real example</p>



<a name="170474979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170474979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170474979">(Jul 09 2019 at 17:50)</a>:</h4>
<p>with <code>-&gt; impl Trait</code> (which is already stable) I think it's pretty clearly wrong</p>



<a name="170474994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170474994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170474994">(Jul 09 2019 at 17:50)</a>:</h4>
<p>but the cat is out of the doggy door or whatever on that :)</p>



<a name="170475121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170475121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170475121">(Jul 09 2019 at 17:52)</a>:</h4>
<p>OK yes this compiles but I think it should not:</p>
<div class="codehilite"><pre><span></span><span class="cp">#![feature(async_await)]</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Foo</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">bar</span>: <span class="kp">&amp;</span><span class="na">&#39;a</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Foo</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">_bar</span>: <span class="kp">&amp;</span><span class="na">&#39;a</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">bar</span>: <span class="kp">&amp;</span><span class="mi">22</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">22</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">Foo</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bar</span><span class="p">).</span><span class="n">await</span><span class="w"></span>
<span class="w">  </span><span class="p">};</span><span class="w"></span>
<span class="w">  </span><span class="n">drop</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</pre></div>



<a name="170475855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170475855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170475855">(Jul 09 2019 at 17:59)</a>:</h4>
<p>So I mean the major fix here would be to modify how lowering works</p>



<a name="170476808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170476808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170476808">(Jul 09 2019 at 18:09)</a>:</h4>
<p>currently, we figure out which set of lifetimes are captured by a given <code>impl Trait</code> type using the <a href="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L1814-L1819" target="_blank" title="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L1814-L1819"><code>lifetimes_from_impl_trait_bounds</code></a> function</p>



<a name="170476866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170476866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170476866">(Jul 09 2019 at 18:09)</a>:</h4>
<p>the "problem" is basically in <a href="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L1853-L1869" target="_blank" title="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L1853-L1869"><code>visit_ty</code></a>, which considers a type like <code>Self</code> to reference no lifetimes at all</p>



<a name="170477027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477027" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477027">(Jul 09 2019 at 18:10)</a>:</h4>
<p>I guess that <code>Self</code> is considered a <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/hir/enum.TyKind.html#variant.Path" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/hir/enum.TyKind.html#variant.Path"><code>Path</code></a></p>



<a name="170477336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477336">(Jul 09 2019 at 18:14)</a>:</h4>
<p>yeah, it looks like in <a href="http://astconv.rs" target="_blank" title="http://astconv.rs">astconv.rs</a> we <a href="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc_typeck/astconv.rs#L2007-L2019" target="_blank" title="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc_typeck/astconv.rs#L2007-L2019">match against the name resolution result of <code>Res::SelfTy(_, Some(impl_def_id))</code></a></p>



<a name="170477654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477654" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477654">(Jul 09 2019 at 18:18)</a>:</h4>
<p>during lowering, we <a href="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L3490" target="_blank" title="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L3490">start by lowering the impl header</a>, and in particular we extract the self-type there</p>



<a name="170477692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477692">(Jul 09 2019 at 18:19)</a>:</h4>
<p>so I guess what we want to do is to have some kind of list of in-scope self types, similar to the list of in-scope regions</p>



<a name="170477716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477716" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477716">(Jul 09 2019 at 18:19)</a>:</h4>
<p>when we visit the impl items, at the <a href="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L3512" target="_blank" title="https://github.com/rust-lang/rust/blob/b8ec4c4d11ede0fba333a0474ed473dbe82aacf1/src/librustc/hir/lowering.rs#L3512">same time as we push the impl header details</a>, we would push the lowered self type (perhaps paired with the def-id of the impl) onto the list</p>



<a name="170477805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477805">(Jul 09 2019 at 18:20)</a>:</h4>
<p>then, in the <code>lifetimes_from_impl_trait_bounds</code> function above, if we encounter a <code>HirTy::Path</code> and it resolves to a <code>Res::SelfTy(_, Some(def_id))</code>, we would look for that <code>def_id</code> on this list. This would give us the self type. We could then just visit that self-type with the same visitor we have.</p>



<a name="170477810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477810" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477810">(Jul 09 2019 at 18:20)</a>:</h4>
<p>This is..not too horrible.</p>



<a name="170477816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477816" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477816">(Jul 09 2019 at 18:20)</a>:</h4>
<p><span class="user-mention" data-user-id="127859">@Taylor Cramer</span> does that look roughly like what you would expect <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span> ?</p>



<a name="170477849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170477849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170477849">(Jul 09 2019 at 18:21)</a>:</h4>
<p>I'm not entirely sure where the "async fn to something using impl trait" lowering takes place -- but I presume it's going to work out.</p>



<a name="170478251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478251">(Jul 09 2019 at 18:26)</a>:</h4>
<p>Er wait!</p>



<a name="170478256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478256" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478256">(Jul 09 2019 at 18:26)</a>:</h4>
<p>Maybe I'm just...wrong here.</p>



<a name="170478303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478303">(Jul 09 2019 at 18:27)</a>:</h4>
<p>Well, I think this fix I mention above is probably necessary for <em>ordinary</em> impl Trait, but there is a <em>second</em> problem, and that second problem is the reason that this afflicts <code>async fn</code>.</p>



<a name="170478377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478377">(Jul 09 2019 at 18:28)</a>:</h4>
<p>And this has to do with the "original hack" whereby a <code>-&gt; impl Trait</code> inherits the lifetimes from its parent but substitutes <code>'static</code> for them (because they are not meant to be observed). I am guessing we expand <code>Self</code> to <code>Foo&lt;'a&gt;</code> but then we substitute <code>'static</code> somewhere.</p>



<a name="170478386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478386" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478386">(Jul 09 2019 at 18:28)</a>:</h4>
<blockquote>
<p>Well, I think this fix I mention above is probably necessary for <em>ordinary</em> impl Trait, but there is a <em>second</em> problem, and that second problem is the reason that this afflicts <code>async fn</code>.</p>
</blockquote>
<p>(In particular, doesn't async fn already capture all lifetimes in scope?)</p>



<a name="170478563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478563" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478563">(Jul 09 2019 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> do you still want me to take this or leave it for new folks since it’s tagged as <code>E-mentor</code>?</p>



<a name="170478797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478797" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478797">(Jul 09 2019 at 18:34)</a>:</h4>
<p>Let's remove that tag since now I'm not sure the best fix</p>



<a name="170478844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478844" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478844">(Jul 09 2019 at 18:35)</a>:</h4>
<p>Sure, should I assign myself?</p>



<a name="170478848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170478848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170478848">(Jul 09 2019 at 18:35)</a>:</h4>
<p>Sure</p>



<a name="170479452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479452" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479452">(Jul 09 2019 at 18:43)</a>:</h4>
<p>I'm debating how to fix this, I'm not quite sure</p>



<a name="170479602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479602" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479602">(Jul 09 2019 at 18:44)</a>:</h4>
<p>I'm also not sure where this current setup is documented, though I feel like we wrote some big comments on it somewhere</p>



<a name="170479794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479794">(Jul 09 2019 at 18:46)</a>:</h4>
<p>Basically if you have </p>
<div class="codehilite"><pre><span></span><span class="k">impl</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Foo</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">fn</span> <span class="nf">bar</span><span class="o">&lt;</span><span class="na">&#39;b</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">impl</span><span class="w"> </span><span class="n">Trait</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="p">,</span><span class="w"> </span><span class="na">&#39;b</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<p>you wind up with an "existential type" that <em>inherits</em> the type+lifetime parameters from its surrounding scope, but then adds some more</p>



<a name="170479795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479795">(Jul 09 2019 at 18:46)</a>:</h4>
<p>so it's kind of like</p>



<a name="170479822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479822">(Jul 09 2019 at 18:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="k">impl</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Foo</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">fn</span> <span class="nf">bar</span><span class="o">&lt;</span><span class="na">&#39;b</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">impl</span><span class="w"> </span><span class="n">Trait</span><span class="o">&lt;</span><span class="na">&#39;a</span><span class="p">,</span><span class="w"> </span><span class="na">&#39;b</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">existential</span><span class="w"> </span><span class="n">Type</span><span class="o">&lt;</span><span class="na">&#39;a1</span><span class="p">,</span><span class="w"> </span><span class="na">&#39;b1</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<p>except not like that, because in Rust syntax, existential types (and other items in fns) don't inherit the scope from the fn they are within</p>



<a name="170479846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479846">(Jul 09 2019 at 18:47)</a>:</h4>
<p>but it means that the set of lifetime parameters on the <code>existential type</code> is <em>actually</em> <code>'a, 'b, 'a1, 'b1</code></p>



<a name="170479879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479879" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479879">(Jul 09 2019 at 18:48)</a>:</h4>
<p>and then any <em>reference</em> to that existential type uses <code>'static</code> for the lifetimes taken from the parent, so e.g. you get</p>
<div class="codehilite"><pre><span></span><span class="k">fn</span> <span class="nf">bar</span><span class="o">&lt;</span><span class="na">&#39;b</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ExistentialType</span><span class="o">&lt;</span><span class="nb">&#39;static</span><span class="p">,</span><span class="w"> </span><span class="nb">&#39;static</span><span class="p">,</span><span class="w"> </span><span class="na">&#39;a</span><span class="p">,</span><span class="w"> </span><span class="na">&#39;b</span><span class="o">&gt;</span><span class="w"></span>
</pre></div>



<a name="170479924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479924">(Jul 09 2019 at 18:48)</a>:</h4>
<p>this may seem totally bonkers, and in a way it is :)</p>



<a name="170479932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479932">(Jul 09 2019 at 18:48)</a>:</h4>
<p>but the reason is that we <em>also</em> inherit the types, and we want those.</p>



<a name="170479982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170479982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170479982">(Jul 09 2019 at 18:49)</a>:</h4>
<p>anyway any place the user <em>wrote</em> <code>'a</code> (say) will wind up being resolved to the <code>'a1</code> declared on the <code>existential type</code></p>



<a name="170480000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480000">(Jul 09 2019 at 18:49)</a>:</h4>
<p>but, in this case, the user wrote <code>Self</code></p>



<a name="170480012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480012">(Jul 09 2019 at 18:49)</a>:</h4>
<p>which we are internally expanding to a type that includes the <code>'a</code></p>



<a name="170480032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480032">(Jul 09 2019 at 18:49)</a>:</h4>
<p>We could certainly just make this an error for now -- as I intended to do w/ projections</p>



<a name="170480038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480038">(Jul 09 2019 at 18:49)</a>:</h4>
<p>Maybe that's the right thing to do</p>



<a name="170480095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480095" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480095">(Jul 09 2019 at 18:50)</a>:</h4>
<p>Not great but at least we don't do the <em>wrong</em> thing and we give room for a proper fix</p>



<a name="170480160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480160" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480160">(Jul 09 2019 at 18:50)</a>:</h4>
<p>We don't have to ban <code>Self</code> all together, we can just report errors when you have an async fn that references <code>Self</code> <em>and</em> <code>Self</code> contains lifetime parameters</p>



<a name="170480166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480166" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480166">(Jul 09 2019 at 18:50)</a>:</h4>
<p>same with <code>T::Foo</code></p>



<a name="170480261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170480261" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170480261">(Jul 09 2019 at 18:51)</a>:</h4>
<p>OK, I'm convinced, I can write up some mentoring instructions for how to do that and we can leave a proper fix for future work :P</p>



<a name="170482879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170482879" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170482879">(Jul 09 2019 at 19:22)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="170488443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170488443" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170488443">(Jul 09 2019 at 20:37)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> <a href="https://github.com/rust-lang/rust/issues/61949#issuecomment-509797784" target="_blank" title="https://github.com/rust-lang/rust/issues/61949#issuecomment-509797784">left some notes here</a> -- let me know if they make sense!</p>



<a name="170488452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170488452" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170488452">(Jul 09 2019 at 20:37)</a>:</h4>
<p>Not sure how familiar you are with how the generics etc are setup</p>



<a name="170493786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170493786" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170493786">(Jul 09 2019 at 21:56)</a>:</h4>
<p>Thanks, I’ll take a look.</p>



<a name="170543563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170543563" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170543563">(Jul 10 2019 at 13:57)</a>:</h4>
<blockquote>
<p>Not sure how familiar you are with how the generics etc are setup</p>
</blockquote>
<p>I think this was roughly the topic of my last rustc lecture series, as an aside, don't remember exactly what I covered here though</p>



<a name="170545057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/%60Self%60%20and%20%60%27static%60%20%2361949/near/170545057" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/.60Self.60.20and.20.60&#x27;static.60.20.2361949.html#170545057">(Jul 10 2019 at 14:16)</a>:</h4>
<p>I think those instructions make sense.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
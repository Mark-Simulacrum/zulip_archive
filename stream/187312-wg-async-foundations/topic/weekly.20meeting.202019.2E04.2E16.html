<html>
<head><meta charset="utf-8"><title>weekly meeting 2019.04.16 · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html">weekly meeting 2019.04.16</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="163487458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487458" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487458">(Apr 16 2019 at 17:10)</a>:</h4>
<p>ping <span class="user-mention" data-user-id="127859">@Taylor Cramer</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span>, do we have a meeting today?</p>



<a name="163487539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487539">(Apr 16 2019 at 17:10)</a>:</h4>
<p>I don't have any updates to give, but I'd be happy to chat if you have things</p>



<a name="163487592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487592" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487592">(Apr 16 2019 at 17:11)</a>:</h4>
<p>I was just going to come in and ask the same thing :) cc <span class="user-group-mention" data-user-group-id="1172">@WG-async-await</span>  -- brief meeting?</p>



<a name="163487595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487595">(Apr 16 2019 at 17:11)</a>:</h4>
<p>I'm running a bit late today :)</p>



<a name="163487612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487612">(Apr 16 2019 at 17:11)</a>:</h4>
<p>I did do a quick review of <span class="user-mention" data-user-id="120134">@Giles Cope</span>'s PR -- I haven't had time to check if they had responses to my questions</p>



<a name="163487690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487690">(Apr 16 2019 at 17:12)</a>:</h4>
<p>I forget, is there a centralized list of tasks?</p>



<a name="163487829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487829">(Apr 16 2019 at 17:14)</a>:</h4>
<p>I guess we might as well start with a quick triage of <a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+is%3Aissue+label%3AA-async-await+-label%3AAsyncAwait-Blocking+-label%3AAsyncAwait-Deferred" target="_blank" title="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+is%3Aissue+label%3AA-async-await+-label%3AAsyncAwait-Blocking+-label%3AAsyncAwait-Deferred">"uncategorized issues"</a> -- i.e., not marked as deferred or blocking</p>



<a name="163487855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487855">(Apr 16 2019 at 17:14)</a>:</h4>
<p>async/await assertion failed: unbounded recursion <a href="https://github.com/rust-lang/rust/issues/53249" target="_blank" title="https://github.com/rust-lang/rust/issues/53249">#53249</a></p>



<a name="163487887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487887">(Apr 16 2019 at 17:15)</a>:</h4>
<p>any idea what's going on here, <span class="user-mention" data-user-id="127859">@Taylor Cramer</span> ?</p>



<a name="163487911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163487911" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163487911">(Apr 16 2019 at 17:15)</a>:</h4>
<p>nope</p>



<a name="163488050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488050" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488050">(Apr 16 2019 at 17:16)</a>:</h4>
<p>seems like we should at least try to investigate?</p>



<a name="163488126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488126" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488126">(Apr 16 2019 at 17:17)</a>:</h4>
<p>right, it seems like this should be considered a blocker</p>



<a name="163488242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488242">(Apr 16 2019 at 17:18)</a>:</h4>
<p>so marked</p>



<a name="163488244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488244" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488244">(Apr 16 2019 at 17:18)</a>:</h4>
<blockquote>
<p>Inconsistency in Send/Sync requirements for async/await <a href="https://github.com/rust-lang/rust/issues/59245" target="_blank" title="https://github.com/rust-lang/rust/issues/59245">#59245</a></p>
</blockquote>



<a name="163488258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488258">(Apr 16 2019 at 17:19)</a>:</h4>
<p>this is that long-standing problem of getting (more) precise about what we capture</p>



<a name="163488278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488278" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488278">(Apr 16 2019 at 17:19)</a>:</h4>
<p>I forget if there's another issue for this too?</p>



<a name="163488316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488316">(Apr 16 2019 at 17:19)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/57017" target="_blank" title="https://github.com/rust-lang/rust/issues/57017">https://github.com/rust-lang/rust/issues/57017</a></p>



<a name="163488322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488322">(Apr 16 2019 at 17:20)</a>:</h4>
<p>maybe mark as a dup?</p>



<a name="163488459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488459" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488459">(Apr 16 2019 at 17:21)</a>:</h4>
<p>(I personally think we should try to do <em>something</em> here -- maybe it's not a <em>blocker</em> but I'm not happy with deferring it entirely)</p>



<a name="163488474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488474">(Apr 16 2019 at 17:21)</a>:</h4>
<p>but for now I'll mark it as deferred</p>



<a name="163488548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488548">(Apr 16 2019 at 17:22)</a>:</h4>
<p>agreed, it's definitely not nice</p>



<a name="163488706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488706" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488706">(Apr 16 2019 at 17:24)</a>:</h4>
<p>I wonder if I should make an AsyncAwait-Nominated label or something</p>



<a name="163488711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488711">(Apr 16 2019 at 17:24)</a>:</h4>
<p>to tag things for future discussion</p>



<a name="163488715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488715">(Apr 16 2019 at 17:24)</a>:</h4>
<p>otoh it's not like there are <em>so</em> many</p>



<a name="163488724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488724" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488724">(Apr 16 2019 at 17:24)</a>:</h4>
<p>anyway let's keep moving for the moment</p>



<a name="163488726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488726">(Apr 16 2019 at 17:24)</a>:</h4>
<blockquote>
<p><code>async move</code> breaks doc tests <a href="https://github.com/rust-lang/rust/issues/59313" target="_blank" title="https://github.com/rust-lang/rust/issues/59313">#59313</a></p>
</blockquote>



<a name="163488727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488727">(Apr 16 2019 at 17:24)</a>:</h4>
<p>that...is strange</p>



<a name="163488810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488810" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488810">(Apr 16 2019 at 17:25)</a>:</h4>
<p>marked as blocking pending investigation and cc'd <span class="user-mention" data-user-id="133692">@QuietMisdreavus</span> and <span class="user-mention" data-user-id="210316">@Guillaume</span> =)</p>



<a name="163488821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488821">(Apr 16 2019 at 17:25)</a>:</h4>
<p>(to help in diagnosing)</p>



<a name="163488822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488822">(Apr 16 2019 at 17:25)</a>:</h4>
<blockquote>
<p>async/await: cannot move out of captured variable in an <code>Fn</code> closure <a href="https://github.com/rust-lang/rust/issues/59971" target="_blank" title="https://github.com/rust-lang/rust/issues/59971">#59971</a></p>
</blockquote>



<a name="163488884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488884">(Apr 16 2019 at 17:26)</a>:</h4>
<p>seems...expected</p>



<a name="163488892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488892">(Apr 16 2019 at 17:26)</a>:</h4>
<p>but let me dig a bit more into the example</p>



<a name="163488936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163488936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163488936">(Apr 16 2019 at 17:26)</a>:</h4>
<p>er, no, no it doesn't</p>



<a name="163489000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489000">(Apr 16 2019 at 17:27)</a>:</h4>
<p>ah, but these are async closures...</p>



<a name="163489028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489028" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489028">(Apr 16 2019 at 17:27)</a>:</h4>
<p><span class="user-mention" data-user-id="127859">@Taylor Cramer</span> I feel like async closures aren't really expected to work right, correct?</p>



<a name="163489038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489038">(Apr 16 2019 at 17:27)</a>:</h4>
<p>whatever right exactly means anyway?</p>



<a name="163489102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489102" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489102">(Apr 16 2019 at 17:28)</a>:</h4>
<p>Yes</p>



<a name="163489113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489113">(Apr 16 2019 at 17:28)</a>:</h4>
<p>async closures are not a candidate for stabilization</p>



<a name="163489134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489134">(Apr 16 2019 at 17:28)</a>:</h4>
<p>async blocks, however, do work</p>



<a name="163489150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489150">(Apr 16 2019 at 17:28)</a>:</h4>
<p>ok I'll mark as deferred</p>



<a name="163489211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489211" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489211">(Apr 16 2019 at 17:29)</a>:</h4>
<p>I think we skipped <a href="https://github.com/rust-lang/rust/issues/59337" target="_blank" title="https://github.com/rust-lang/rust/issues/59337">#59337</a> async closures have concrete argument lifetimes</p>



<a name="163489219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489219" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489219">(Apr 16 2019 at 17:29)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="116009">@nikomatsakis</span>  I needed that. Will do my best.</p>



<a name="163489269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489269">(Apr 16 2019 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="120134">@Giles Cope</span> let me know if anything is tricky!</p>



<a name="163489331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489331">(Apr 16 2019 at 17:30)</a>:</h4>
<blockquote>
<p>async closures have concrete argument lifetimes <a href="https://github.com/rust-lang/rust/issues/59337" target="_blank" title="https://github.com/rust-lang/rust/issues/59337">#59337</a> </p>
</blockquote>
<p>(yes, you're right <span class="user-mention" data-user-id="116883">@tmandry</span> )</p>



<a name="163489352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489352" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489352">(Apr 16 2019 at 17:30)</a>:</h4>
<p>however, I guess this is deferred for the same reason, right?</p>



<a name="163489640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489640" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489640">(Apr 16 2019 at 17:34)</a>:</h4>
<p>OK, initial triage is done, shall we review the <a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+is%3Aissue+label%3AA-async-await+label%3AAsyncAwait-Blocking+-label%3AAsyncAwait-Deferred+" target="_blank" title="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+is%3Aissue+label%3AA-async-await+label%3AAsyncAwait-Blocking+-label%3AAsyncAwait-Deferred+">blocking issues</a>?</p>



<a name="163489708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489708" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489708">(Apr 16 2019 at 17:35)</a>:</h4>
<p>Ps, I created a <a href="https://paper.dropbox.com/doc/WG-AsyncAwait-Weekly-Meeting-Links--AbU7f1eJ5fAzZ~TAmMyxtOmLAg-KSR6QQ4qI84z7CrRAPDKu" target="_blank" title="https://paper.dropbox.com/doc/WG-AsyncAwait-Weekly-Meeting-Links--AbU7f1eJ5fAzZ~TAmMyxtOmLAg-KSR6QQ4qI84z7CrRAPDKu">dropbox paper</a> to record the steps here</p>



<a name="163489734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489734">(Apr 16 2019 at 17:35)</a>:</h4>
<p><span class="user-mention" data-user-id="116883">@tmandry</span> looks like we can assign this to you?</p>
<blockquote>
<p>Futures involving uninhabited variables are incorrectly considered uninhabited. <a href="https://github.com/rust-lang/rust/issues/59972" target="_blank" title="https://github.com/rust-lang/rust/issues/59972">#59972</a></p>
</blockquote>



<a name="163489794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489794">(Apr 16 2019 at 17:36)</a>:</h4>
<p>Yep that should be closed in <a href="https://github.com/rust-lang/rust/issues/59897" target="_blank" title="https://github.com/rust-lang/rust/issues/59897">#59897</a></p>



<a name="163489814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489814" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489814">(Apr 16 2019 at 17:36)</a>:</h4>
<p><span class="user-mention" data-user-id="127859">@Taylor Cramer</span> I guess we can't quite close this until we fix the region inference stuff?</p>
<blockquote>
<p>async fn should support multiple lifetimes <a href="https://github.com/rust-lang/rust/issues/56238" target="_blank" title="https://github.com/rust-lang/rust/issues/56238">#56238</a></p>
</blockquote>



<a name="163489826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489826" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489826">(Apr 16 2019 at 17:36)</a>:</h4>
<p>Indeed, it does not support multiple lifetimes today</p>



<a name="163489829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489829">(Apr 16 2019 at 17:36)</a>:</h4>
<blockquote>
<p>Yep that should be closed in <a href="https://github.com/rust-lang/rust/issues/59897" target="_blank" title="https://github.com/rust-lang/rust/issues/59897">#59897</a></p>
</blockquote>
<p>how is that going, <span class="user-mention" data-user-id="116883">@tmandry</span>?</p>



<a name="163489864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489864">(Apr 16 2019 at 17:37)</a>:</h4>
<p>so, variantful generators are going well, I have some polish steps left to do for debuginfo and cleaning up the code</p>



<a name="163489879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489879" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489879">(Apr 16 2019 at 17:37)</a>:</h4>
<p>I guess one question <span class="user-mention" data-user-id="127859">@Taylor Cramer</span> is whether we should make an issue for feature-gating the tricky cases here:</p>
<blockquote>
<p>Unused arguments to async fn are dropped too early <a href="https://github.com/rust-lang/rust/issues/54716" target="_blank" title="https://github.com/rust-lang/rust/issues/54716">#54716</a> </p>
</blockquote>
<p>or if we should hold off until we have a chance to discuss this a bit more?</p>



<a name="163489950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489950" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489950">(Apr 16 2019 at 17:38)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I think we should discuss again if we can find a moment in the next lang mtg</p>



<a name="163489957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489957" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489957">(Apr 16 2019 at 17:38)</a>:</h4>
<p>but I think that was the most promising proposal</p>



<a name="163489975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489975" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489975">(Apr 16 2019 at 17:38)</a>:</h4>
<p>(in terms of group consensus)</p>



<a name="163489982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163489982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163489982">(Apr 16 2019 at 17:38)</a>:</h4>
<p>OK</p>



<a name="163490022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490022">(Apr 16 2019 at 17:39)</a>:</h4>
<p>Similarly, we were talking about taking the initial steps for "Resolve <code>await</code> syntax" <a href="https://github.com/rust-lang/rust/issues/57640" target="_blank" title="https://github.com/rust-lang/rust/issues/57640">#57640</a> -- most of which are independent from the actual syntax anyway -- maybe we should open an issue on that? (i.e., "implement built-in syntax") and assign it to someone?</p>



<a name="163490032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490032">(Apr 16 2019 at 17:39)</a>:</h4>
<p>I mention a new issue because I'd want one that's just focused on the implementation questions</p>



<a name="163490036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490036" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490036">(Apr 16 2019 at 17:39)</a>:</h4>
<p>and not the choice of syntax</p>



<a name="163490041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490041">(Apr 16 2019 at 17:39)</a>:</h4>
<p>the existing one's comment thread is...a bit polluted :)</p>



<a name="163490132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490132">(Apr 16 2019 at 17:40)</a>:</h4>
<p>Re: <a href="https://github.com/rust-lang/rust/issues/52924" target="_blank" title="https://github.com/rust-lang/rust/issues/52924">#52924</a> (which variantful generators are a part of),<br>
I went ahead and implemented the optimization that <span class="user-mention" data-user-id="119009">@eddyb</span> and I discussed<br>
it uses the <code>MaybeLiveAt</code> dataflow analysis to check for vars that might be <code>StorageLive</code> simultaneously, and prevent them from overlapping</p>



<a name="163490135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490135" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490135">(Apr 16 2019 at 17:40)</a>:</h4>
<p>but there's one problem</p>



<a name="163490192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490192">(Apr 16 2019 at 17:41)</a>:</h4>
<p>which is that, even for locals that don't have overlapping scopes (as in the await case), the drop and unwind paths make them appear to be StorageLive at the same time</p>



<a name="163490221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490221" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490221">(Apr 16 2019 at 17:41)</a>:</h4>
<p>so we have to deal with that somehow</p>



<a name="163490228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490228">(Apr 16 2019 at 17:41)</a>:</h4>
<p>can you give an example?</p>



<a name="163490317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490317">(Apr 16 2019 at 17:42)</a>:</h4>
<p>What do we have to do?</p>



<a name="163490338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490338" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490338">(Apr 16 2019 at 17:42)</a>:</h4>
<blockquote>
<p>can you give an example?</p>
</blockquote>
<p>yeah, here's <a href="https://gist.github.com/tmandry/38706b422ef52cae9c4c85b1a89b0825" target="_blank" title="https://gist.github.com/tmandry/38706b422ef52cae9c4c85b1a89b0825">a gist</a></p>



<a name="163490390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490390" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490390">(Apr 16 2019 at 17:43)</a>:</h4>
<p>just updated to make it slightly less confusing</p>



<a name="163490476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490476">(Apr 16 2019 at 17:44)</a>:</h4>
<blockquote>
<p>What do we have to do?</p>
</blockquote>
<p>I'd like to know <span class="user-mention" data-user-id="210316">@Guillaume</span> if you have any insight into this issue: " async move breaks doc tests <a href="https://github.com/rust-lang/rust/issues/59313" target="_blank" title="https://github.com/rust-lang/rust/issues/59313">#59313</a> "</p>
<p>like, what is causing that error? are there some switches I can give to get more information?</p>



<a name="163490512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490512">(Apr 16 2019 at 17:45)</a>:</h4>
<p>anyway, <code>x</code> and <code>y</code> never "really" have storagelive simulataneously, but if you follow the drop and unwind branches to the beginning of <code>bb1</code>, <code>bb3</code>, <code>bb4</code>, or <code>bb6</code>, you will see that we have declared storagelive on both of them at some points</p>



<a name="163490545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490545" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490545">(Apr 16 2019 at 17:45)</a>:</h4>
<blockquote>
<p>just updated to make it slightly less confusing</p>
</blockquote>
<p><span class="user-mention" data-user-id="116883">@tmandry</span> this should probably be <code>y</code> in the <code>println!</code>, right?</p>
<div class="codehilite"><pre><span></span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span>: <span class="kt">i32</span> <span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="kr">yield</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;{:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>



<a name="163490556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490556">(Apr 16 2019 at 17:45)</a>:</h4>
<p>lol, yes, sorry</p>



<a name="163490565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490565">(Apr 16 2019 at 17:45)</a>:</h4>
<blockquote>
<p>anyway, <code>x</code> and <code>y</code> never "really" have storagelive simulataneously, but if you follow the drop and unwind branches to the beginning of <code>bb1</code>, <code>bb3</code>, <code>bb4</code>, or <code>bb6</code>, you will see that we have declared storagelive on both of them at some points</p>
</blockquote>
<p>yeah so I think in prticular we don't emit storage-end on unwind paths</p>



<a name="163490575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490575">(Apr 16 2019 at 17:45)</a>:</h4>
<p>this is the problem, right?</p>



<a name="163490584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490584" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490584">(Apr 16 2019 at 17:45)</a>:</h4>
<p>yes I believe so</p>



<a name="163490656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490656" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490656">(Apr 16 2019 at 17:46)</a>:</h4>
<p>I'm not sure why we don't, I think it's an optimization (less IR) and a simplification (it was annoying to do so)</p>



<a name="163490695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490695">(Apr 16 2019 at 17:47)</a>:</h4>
<p>yeah, I'm thinking changing that may be the way to go</p>



<a name="163490700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490700" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490700">(Apr 16 2019 at 17:47)</a>:</h4>
<p>I haven't looked at the relevant code yet though</p>



<a name="163490794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490794">(Apr 16 2019 at 17:48)</a>:</h4>
<p>I guess a more complex analysis might be able to decide it doesn't matter</p>



<a name="163490800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490800" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490800">(Apr 16 2019 at 17:48)</a>:</h4>
<p>not sure if that'd be worth the trouble</p>



<a name="163490822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490822">(Apr 16 2019 at 17:48)</a>:</h4>
<p>the reasoning would be something like "we didn't storage-dead, <em>but</em> we never touch that slot again..."</p>



<a name="163490845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490845">(Apr 16 2019 at 17:49)</a>:</h4>
<p>I didn't quite follow how you setup the analysis in the first place</p>



<a name="163490851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490851">(Apr 16 2019 at 17:49)</a>:</h4>
<p>anyway, we can dig into that elsewhere</p>



<a name="163490867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490867">(Apr 16 2019 at 17:49)</a>:</h4>
<p>ok, I can go into more detail in the topic for this issue</p>



<a name="163490884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490884">(Apr 16 2019 at 17:49)</a>:</h4>
<p>ok, I probably got to run, this meeting is running over for me :) I guess .. people mostly have stuff to do? we didn't discuss the syntax question, and <span class="user-mention" data-user-id="127859">@Taylor Cramer</span> I don't know if you've done any investigation into the region solver?</p>



<a name="163490943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490943">(Apr 16 2019 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116883">@tmandry</span> cool, maybe ping me? :)</p>



<a name="163490951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490951" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490951">(Apr 16 2019 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> no, I have not</p>



<a name="163490967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490967">(Apr 16 2019 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I was planning to work on the syntax implementation here soon</p>



<a name="163490974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163490974" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163490974">(Apr 16 2019 at 17:50)</a>:</h4>
<p>I don't anticipate it being particularly difficult</p>



<a name="163491018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163491018" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163491018">(Apr 16 2019 at 17:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> WRT the regions stuff, I can do some poking around-- I thought you had indicated you wanted to do some investigation yourself first, but maybe I misunderstood</p>



<a name="163491034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163491034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163491034">(Apr 16 2019 at 17:51)</a>:</h4>
<p>(In any case, I wouldn't have had time until now :) )</p>



<a name="163491114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163491114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163491114">(Apr 16 2019 at 17:52)</a>:</h4>
<p><span class="user-mention" data-user-id="127859">@Taylor Cramer</span> created <a href="https://github.com/rust-lang/rust/issues/60016" target="_blank" title="https://github.com/rust-lang/rust/issues/60016">https://github.com/rust-lang/rust/issues/60016</a> and assigned to you :)</p>



<a name="163491119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163491119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163491119">(Apr 16 2019 at 17:52)</a>:</h4>
<p>sg, thanks</p>



<a name="163491123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163491123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163491123">(Apr 16 2019 at 17:52)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> WRT the regions stuff, I can do some poking around-- I thought you had indicated you wanted to do some investigation yourself first, but maybe I misunderstood</p>
</blockquote>
<p>no, you're not wrong, I just wanted to check. I thikn I will do that later today</p>



<a name="163491128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163491128" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163491128">(Apr 16 2019 at 17:52)</a>:</h4>
<p>I am adding something to my calendar so I don't forget</p>



<a name="163491132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163491132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163491132">(Apr 16 2019 at 17:52)</a>:</h4>
<p>I'll leave some notes on the issue</p>



<a name="163601813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.16/near/163601813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E16.html#163601813">(Apr 17 2019 at 21:20)</a>:</h4>
<p>Answered on the issue, it's simpler to follow this way. :)</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
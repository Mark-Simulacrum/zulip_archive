<html>
<head><meta charset="utf-8"><title>meeting 2019.10.15 · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html">meeting 2019.10.15</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="178213565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213565">(Oct 15 2019 at 17:08)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="1172">@WG-async-foundations</span> =) I'm running late today, but meeting?</p>



<a name="178213611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213611">(Oct 15 2019 at 17:09)</a>:</h4>
<p>First, review <a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues" target="_blank" title="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">uncategorized issues</a></p>



<a name="178213620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213620">(Oct 15 2019 at 17:09)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/64603" target="_blank" title="https://github.com/rust-lang/rust/pull/64603">https://github.com/rust-lang/rust/pull/64603</a> is reviewed so that should be closed out tonight. :-)</p>



<a name="178213640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213640">(Oct 15 2019 at 17:09)</a>:</h4>
<blockquote>
<p>Attempting to run an async fn after completion mentions generators <a href="https://github.com/rust-lang/rust/issues/65419" target="_blank" title="https://github.com/rust-lang/rust/issues/65419">#65419</a></p>
</blockquote>



<a name="178213644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213644">(Oct 15 2019 at 17:09)</a>:</h4>
<blockquote>
<p>thread 'main' panicked at 'generator resumed after completion', src/main.rs:1:16</p>
</blockquote>



<a name="178213661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213661">(Oct 15 2019 at 17:10)</a>:</h4>
<p>seems suboptimal but also kind of "meh" to me</p>



<a name="178213707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213707">(Oct 15 2019 at 17:10)</a>:</h4>
<p>otoh maybe very easy to fix</p>



<a name="178213713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213713">(Oct 15 2019 at 17:10)</a>:</h4>
<p>worth putting as "on deck"?</p>



<a name="178213738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213738">(Oct 15 2019 at 17:10)</a>:</h4>
<p>(that's the only untriaged issue)</p>



<a name="178213779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213779">(Oct 15 2019 at 17:11)</a>:</h4>
<blockquote>
<p>worth putting as "on deck"?</p>
</blockquote>
<p>I'm going to leave it</p>



<a name="178213785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213785">(Oct 15 2019 at 17:11)</a>:</h4>
<p><span class="user-mention" data-user-id="120134">@Giles Cope</span> retried that PR cause spurious network stuff</p>



<a name="178213851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213851">(Oct 15 2019 at 17:12)</a>:</h4>
<p>actually I wonder where that error message comes from</p>



<a name="178213853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213853">(Oct 15 2019 at 17:12)</a>:</h4>
<p>a quick ripgrep didn't find it</p>



<a name="178213858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213858">(Oct 15 2019 at 17:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> feels like a good thing to fix I think</p>



<a name="178213884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213884">(Oct 15 2019 at 17:12)</a>:</h4>
<p>feels like polish-worthy and possible to hit</p>



<a name="178213910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213910">(Oct 15 2019 at 17:13)</a>:</h4>
<p>ok, I nominated it for on on-deck</p>



<a name="178213911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213911">(Oct 15 2019 at 17:13)</a>:</h4>
<p>maybe label with good first issue?</p>



<a name="178213913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213913">(Oct 15 2019 at 17:13)</a>:</h4>
<p>I also pinged zoxc</p>



<a name="178213915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nemo157 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213915">(Oct 15 2019 at 17:13)</a>:</h4>
<p>it's part of the generator transform</p>



<a name="178213916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213916">(Oct 15 2019 at 17:13)</a>:</h4>
<p>to get feedback on where the error comes from</p>



<a name="178213937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213937">(Oct 15 2019 at 17:13)</a>:</h4>
<p>I grepped in <code>src/lib*</code> for "after completion" and I cannot find it either</p>



<a name="178213938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213938">(Oct 15 2019 at 17:13)</a>:</h4>
<p>oh, I guess the <code>Display</code> impl must be it</p>



<a name="178213939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213939">(Oct 15 2019 at 17:13)</a>:</h4>
<p>super weird</p>



<a name="178213981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178213981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nemo157 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178213981">(Oct 15 2019 at 17:14)</a>:</h4>
<p>I think it's actually very difficult to hit, I only opened it because someone implementing a custom executor somehow managed to hit it</p>



<a name="178214014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nemo157 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214014">(Oct 15 2019 at 17:14)</a>:</h4>
<p>that's the only time I've heard of it being reached</p>



<a name="178214042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214042">(Oct 15 2019 at 17:14)</a>:</h4>
<p>Can you "await" a <em>ref</em> to a future</p>



<a name="178214057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214057">(Oct 15 2019 at 17:15)</a>:</h4>
<p>(similar to the <code>by_ref</code> adapter for iterators)</p>



<a name="178214068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214068">(Oct 15 2019 at 17:15)</a>:</h4>
<p>if so, presumably that'd make it .. oh, I guess not</p>



<a name="178214088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214088">(Oct 15 2019 at 17:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/mir/interpret/enum.PanicInfo.html#method.description" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/mir/interpret/enum.PanicInfo.html#method.description">https://doc.rust-lang.org/nightly/nightly-rustc/rustc/mir/interpret/enum.PanicInfo.html#method.description</a></p>



<a name="178214095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214095">(Oct 15 2019 at 17:15)</a>:</h4>
<p>I was going to say that'd make it relatively easy to hit, but maybe not</p>



<a name="178214109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214109">(Oct 15 2019 at 17:15)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/65180" target="_blank" title="https://github.com/rust-lang/rust/issues/65180">https://github.com/rust-lang/rust/issues/65180</a> update: I found the cause of the error, trying to improve the error reporting.</p>



<a name="178214125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214125">(Oct 15 2019 at 17:15)</a>:</h4>
<p>anyway, yeah, focus issues</p>



<a name="178214186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214186">(Oct 15 2019 at 17:16)</a>:</h4>
<p>so <a href="https://github.com/rust-lang/rust/issues/65159" target="_blank" title="https://github.com/rust-lang/rust/issues/65159">https://github.com/rust-lang/rust/issues/65159</a> ...</p>



<a name="178214191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214191">(Oct 15 2019 at 17:16)</a>:</h4>
<p>I opened a PR</p>



<a name="178214204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214204">(Oct 15 2019 at 17:16)</a>:</h4>
<p>I guess it just needs r+</p>



<a name="178214210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214210">(Oct 15 2019 at 17:16)</a>:</h4>
<p>it bouned in some weird way</p>



<a name="178214242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214242">(Oct 15 2019 at 17:17)</a>:</h4>
<blockquote>
<p>non-send futures error at point of use, but could cite point of definition in some cases <a href="https://github.com/rust-lang/rust/issues/64130" target="_blank" title="https://github.com/rust-lang/rust/issues/64130">#64130</a> </p>
</blockquote>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> opened a <a href="https://github.com/rust-lang/rust/pull/65345" target="_blank" title="https://github.com/rust-lang/rust/pull/65345">WIP PR</a> for follow-up work I think</p>



<a name="178214268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214268">(Oct 15 2019 at 17:17)</a>:</h4>
<blockquote>
<p>Async blocks are leaky about wording wrt. <code>?</code> in diagnostics <a href="https://github.com/rust-lang/rust/issues/62570" target="_blank" title="https://github.com/rust-lang/rust/issues/62570">#62570</a> </p>
</blockquote>
<p>any update on this <span class="user-mention" data-user-id="120134">@Giles Cope</span>? I see some comments there</p>



<a name="178214284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214284">(Oct 15 2019 at 17:17)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <code>r=cramertj</code> ^^</p>



<a name="178214329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214329">(Oct 15 2019 at 17:18)</a>:</h4>
<p>thanks :)</p>



<a name="178214333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214333">(Oct 15 2019 at 17:18)</a>:</h4>
<p>getting there - realised I needed to switch out the stage 0 compiler to achieve it</p>



<a name="178214343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214343">(Oct 15 2019 at 17:18)</a>:</h4>
<p>oh?</p>



<a name="178214408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214408">(Oct 15 2019 at 17:19)</a>:</h4>
<p>bootstrap tricks... fun :D</p>



<a name="178214434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214434">(Oct 15 2019 at 17:19)</a>:</h4>
<p>otherwise it instantly complains it can't parse the {ItemContext} even if I've changed the parsing code to show a different message</p>



<a name="178214532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214532">(Oct 15 2019 at 17:20)</a>:</h4>
<p>Makes sense</p>



<a name="178214538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214538">(Oct 15 2019 at 17:20)</a>:</h4>
<p>I think I need to commit the addition of ItemContext as a symbol as one PR and then reference it with another</p>



<a name="178214582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214582">(Oct 15 2019 at 17:21)</a>:</h4>
<p>I'm not sure what the <code>ItemContext</code> is referring to</p>



<a name="178214596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214596">(Oct 15 2019 at 17:21)</a>:</h4>
<p>is this part of the <code>rustc_on_unimplemented</code> attribute?</p>



<a name="178214606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214606">(Oct 15 2019 at 17:21)</a>:</h4>
<p>not yet :P</p>



<a name="178214617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214617">(Oct 15 2019 at 17:21)</a>:</h4>
<p>If so, you can also do <code>#[cfg_attr(stage0, ...)]</code> and <code>#[cfg_attr(not(stage0), ...)]</code></p>



<a name="178214624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214624">(Oct 15 2019 at 17:21)</a>:</h4>
<p>usually less annoying than bootstrapping :)</p>



<a name="178214631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214631">(Oct 15 2019 at 17:21)</a>:</h4>
<p>ah neat</p>



<a name="178214635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214635">(Oct 15 2019 at 17:21)</a>:</h4>
<p>maybe we don't do that anymore</p>



<a name="178214637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214637">(Oct 15 2019 at 17:21)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> there's no <code>stage0</code></p>



<a name="178214639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214639">(Oct 15 2019 at 17:22)</a>:</h4>
<p>we used to do it all the time :P</p>



<a name="178214683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214683">(Oct 15 2019 at 17:22)</a>:</h4>
<p>yeah ok that's dated I guess</p>



<a name="178214686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214686">(Oct 15 2019 at 17:22)</a>:</h4>
<p>it's called <code>cfg_attr(bootstrap, ...)</code> now</p>



<a name="178214700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214700">(Oct 15 2019 at 17:22)</a>:</h4>
<p>ah, ok, same idea though</p>



<a name="178214705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214705">(Oct 15 2019 at 17:22)</a>:</h4>
<p>basically s/stage0/bootstrap</p>



<a name="178214712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214712">(Oct 15 2019 at 17:22)</a>:</h4>
<p>yep</p>



<a name="178214723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214723">(Oct 15 2019 at 17:22)</a>:</h4>
<p>cool - that's handy.</p>



<a name="178214735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214735">(Oct 15 2019 at 17:22)</a>:</h4>
<p>I'm not sure if the release team cleans those up periodically anymore?</p>



<a name="178214749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214749">(Oct 15 2019 at 17:23)</a>:</h4>
<p>if not, maybe we want a FIXME issue to track it</p>



<a name="178214751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214751">(Oct 15 2019 at 17:23)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  we do</p>



<a name="178214767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214767">(Oct 15 2019 at 17:23)</a>:</h4>
<p>OK, so, last update I guess:</p>



<a name="178214776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214776">(Oct 15 2019 at 17:23)</a>:</h4>
<blockquote>
<p>async/await: awaiting inside a match block captures borrow too eagerly <a href="https://github.com/rust-lang/rust/issues/57017" target="_blank" title="https://github.com/rust-lang/rust/issues/57017">#57017</a></p>
</blockquote>



<a name="178214795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214795">(Oct 15 2019 at 17:23)</a>:</h4>
<p>I did do some investigation here into what it would take to build MIR in order to figure out what's live</p>



<a name="178214846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214846">(Oct 15 2019 at 17:24)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/57017#issuecomment-540023781" target="_blank" title="https://github.com/rust-lang/rust/issues/57017#issuecomment-540023781">long comment here</a></p>



<a name="178214848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214848">(Oct 15 2019 at 17:24)</a>:</h4>
<p>my initial conclusion was "it's hard"</p>



<a name="178214858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214858">(Oct 15 2019 at 17:24)</a>:</h4>
<p>but I plan to do some more digging</p>



<a name="178214931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178214931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178214931">(Oct 15 2019 at 17:25)</a>:</h4>
<p>another, interim alternative might be to be just have a <em>better</em> approximation than we currently do</p>



<a name="178215010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215010">(Oct 15 2019 at 17:26)</a>:</h4>
<h1>Last five minutes -- anybody looking for something to do?</h1>



<a name="178215020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215020">(Oct 15 2019 at 17:26)</a>:</h4>
<p>Any final comments?</p>



<a name="178215055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215055">(Oct 15 2019 at 17:26)</a>:</h4>
<p>(I'm a bit wary of hacks in MIR tho -- I'd like us to be more principled like GHC is with System FC... and MIR isn't even sound by construction <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span> -- maybe <span class="user-mention" data-user-id="119009">@eddyb</span>'s RVSDG would help... -- and I hear swiftc with SIL?)</p>



<a name="178215211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215211">(Oct 15 2019 at 17:28)</a>:</h4>
<p>Well, I'm not really talking about introducing hacks into <em>MIR</em>.</p>



<a name="178215226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215226">(Oct 15 2019 at 17:28)</a>:</h4>
<p>Just want to say how nice debugging async/await is compared to in c# - it's much easier with 'truthful' stacks.</p>



<a name="178215239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215239">(Oct 15 2019 at 17:29)</a>:</h4>
<p>that's a cool benefit of the design, yeah</p>



<a name="178215277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215277">(Oct 15 2019 at 17:29)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> Where are we adding the hacks instead? :D</p>



<a name="178215322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215322">(Oct 15 2019 at 17:30)</a>:</h4>
<p>Well it's more like replacing the hack we already have with a better hack :P</p>



<a name="178215386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215386">(Oct 15 2019 at 17:30)</a>:</h4>
<p>basically there is code that "overapproximates" what might be live across awaits in the generator</p>



<a name="178215421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215421">(Oct 15 2019 at 17:30)</a>:</h4>
<p>Ah I see; well, a principled hack is better than a less principled one</p>



<a name="178215463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215463">(Oct 15 2019 at 17:31)</a>:</h4>
<p>in principle...</p>



<a name="178215468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215468">(Oct 15 2019 at 17:31)</a>:</h4>
<p>An interesting observation is that if we succeed with polonius (and  in particular the datalog definition thereof)</p>



<a name="178215629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215629">(Oct 15 2019 at 17:32)</a>:</h4>
<p>that maybe it makes to build the analysis data direct from HAIR or something. I've long wanted rustc_typeck to be a function that takes in "HIR" and produces something more like "HAIR". Anyway, sort of neither here nor there -- if you read the comment, one of the key problems is that MIR <em>right now</em> requires "all types" to be known. But some of the types in the generator can be influenced by what comes later. So we have to infer the whole function as a unit. It's kind of a sticky thing to untangle.</p>



<a name="178215683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215683">(Oct 15 2019 at 17:33)</a>:</h4>
<p>Already true for closures</p>



<a name="178215705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215705">(Oct 15 2019 at 17:33)</a>:</h4>
<p>but of course closure types don't depend on their bodies in quite the same way</p>



<a name="178215756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215756">(Oct 15 2019 at 17:34)</a>:</h4>
<p>anyway gotta go grab lunch, ttyl</p>



<a name="178215790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215790">(Oct 15 2019 at 17:34)</a>:</h4>
<p>oh btw I start a new job next week. Going to be coding rust for a living.</p>



<a name="178215844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215844">(Oct 15 2019 at 17:35)</a>:</h4>
<p>that's great!</p>



<a name="178215846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215846">(Oct 15 2019 at 17:35)</a>:</h4>
<p>congratulations</p>



<a name="178215895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202019.10.15/near/178215895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202019.2E10.2E15.html#178215895">(Oct 15 2019 at 17:35)</a>:</h4>
<p>thanks - rust in finance in london is starting to be a thing.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
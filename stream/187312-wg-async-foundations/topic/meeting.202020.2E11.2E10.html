<html>
<head><meta charset="utf-8"><title>meeting 2020.11.10 · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html">meeting 2020.11.10</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="216247566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216247566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216247566">(Nov 10 2020 at 17:51)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1172">@WG-async-foundations</span> meeting in 9 minutes</p>



<a name="216249271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216249271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216249271">(Nov 10 2020 at 18:02)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1172">@WG-async-foundations</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span>  okay let's get started</p>



<a name="216249381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216249381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216249381">(Nov 10 2020 at 18:02)</a>:</h4>
<p><a href="https://github.com/orgs/rust-lang/projects/2">Project board</a></p>



<a name="216249521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216249521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216249521">(Nov 10 2020 at 18:03)</a>:</h4>
<p>Two things were fixed this week:</p>
<ul>
<li>Increasingly slow compilation as more levels of <code>async</code> are added in Rust 1.46 <a href="https://github.com/rust-lang/rust/issues/75992">#75992</a></li>
<li>ICE: compiler/rustc_typeck/src/check/closure.rs:608:18: async fn generator return type not an inference variable <a href="https://github.com/rust-lang/rust/issues/78654">#78654</a></li>
</ul>



<a name="216249729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216249729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216249729">(Nov 10 2020 at 18:04)</a>:</h4>
<p>hmm. I think there was another that wasn't on the board</p>



<a name="216249825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216249825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216249825">(Nov 10 2020 at 18:05)</a>:</h4>
<ul>
<li>Improve lifetime name annotations for closures &amp; async functions <a href="https://github.com/rust-lang/rust/issues/76468">#76468</a></li>
<li>(not merged yet) Make it more clear what an about async fn's returns when referring to what it returns <a href="https://github.com/rust-lang/rust/issues/76765">#76765</a></li>
</ul>



<a name="216250053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250053">(Nov 10 2020 at 18:06)</a>:</h4>
<p>Any other updates for ongoing work?</p>



<a name="216250123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bhargav Voleti <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250123">(Nov 10 2020 at 18:07)</a>:</h4>
<p>I opened the <code>must_not_await_lint</code> RFC proper: <a href="https://github.com/rust-lang/rfcs/pull/3014">https://github.com/rust-lang/rfcs/pull/3014</a></p>



<a name="216250174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250174">(Nov 10 2020 at 18:07)</a>:</h4>
<p>the libs team has provided some feedback on the Streams RFC -- mostly an ask to clarify the rationale behind a few decisions more sharply</p>



<a name="216250236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250236">(Nov 10 2020 at 18:08)</a>:</h4>
<p>well, members from the libs team -- not yet down to <del>a vote yet</del> the thing with the checkboxes?</p>



<a name="216250474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250474">(Nov 10 2020 at 18:09)</a>:</h4>
<p>Yeah, Niko and I both responded to some of the feedback, waiting to hear back</p>



<a name="216250580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250580">(Nov 10 2020 at 18:10)</a>:</h4>
<p>Okay, let's move on to triage</p>



<a name="216250606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250606">(Nov 10 2020 at 18:10)</a>:</h4>
<p><a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">Uncategorized issues</a></p>



<a name="216250676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250676" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250676">(Nov 10 2020 at 18:10)</a>:</h4>
<p>Pretty big backlog and we didn't get through it last week either</p>



<a name="216250695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250695">(Nov 10 2020 at 18:11)</a>:</h4>
<p>I'm going to start from the bottom (oldest issues) this time</p>



<a name="216250727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250727">(Nov 10 2020 at 18:11)</a>:</h4>
<h2>Backtraces shouldn't show stack frames generated by the implementation of async-await <a href="https://github.com/rust-lang/rust/issues/74779">#74779</a></h2>



<a name="216250789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216250789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216250789">(Nov 10 2020 at 18:11)</a>:</h4>
<p>I think this duplicates another issue</p>



<a name="216251023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251023">(Nov 10 2020 at 18:13)</a>:</h4>
<p><code>#[rustc_backtrace_skip]</code> seems like a pretty cool proposal -- would def be nice if the generated stack traces could be collapsed</p>



<a name="216251042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251042">(Nov 10 2020 at 18:13)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/65978">#65978</a> is the one I'm thinking of</p>



<a name="216251311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251311">(Nov 10 2020 at 18:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211722">Yoshua Wuyts</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10/near/216251023">said</a>:</p>
<blockquote>
<p><code>#[rustc_backtrace_skip]</code> seems like a pretty cool proposal -- would def be nice if the generated stack traces could be collapsed</p>
</blockquote>
<p>Yeah, though I'm not sure how you'd implement it. We use external libraries to produce backtraces, not sure if they support something like this</p>



<a name="216251403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251403">(Nov 10 2020 at 18:16)</a>:</h4>
<p>This is something we're also looking at in Fuchsia, but our thinking so far has been that we'd make it nicer after the backtrace was produced by pattern matching on function names</p>



<a name="216251481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251481">(Nov 10 2020 at 18:17)</a>:</h4>
<p>Would that change once we move from libbacktrace -&gt; gimli?</p>



<a name="216251586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251586">(Nov 10 2020 at 18:18)</a>:</h4>
<p>(not that we need to figure that out right now, haha -- mostly curious)</p>



<a name="216251661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251661">(Nov 10 2020 at 18:18)</a>:</h4>
<p>I might be mistaken but I think gimli is only for parsing debuginfo, which is useful for symbolizing, not actually getting the stack of function calls</p>



<a name="216251734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251734">(Nov 10 2020 at 18:19)</a>:</h4>
<p>hmmm interesting; I remembered something about replacing libbacktrace for backtrace generation, but I might be mistaken too -- ah well</p>



<a name="216251876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251876">(Nov 10 2020 at 18:20)</a>:</h4>
<p>Yeah.. <code>libunwind</code> is the piece I'm thinking of</p>



<a name="216251887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251887">(Nov 10 2020 at 18:20)</a>:</h4>
<p>but.. you could do it at the symbolization point</p>



<a name="216251910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251910">(Nov 10 2020 at 18:20)</a>:</h4>
<p>that's essentially what we're thinking of for Fuchsia</p>



<a name="216251953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251953">(Nov 10 2020 at 18:20)</a>:</h4>
<p>ahh, yes that's it! -- gotcha</p>



<a name="216251961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216251961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216251961">(Nov 10 2020 at 18:20)</a>:</h4>
<p>and if there were a way to mark a symbol for skipping in debuginfo that'd work</p>



<a name="216252004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252004">(Nov 10 2020 at 18:21)</a>:</h4>
<p>anyway, I think this issue is probably a duplicate but it has some useful ideas that I'll comment on</p>



<a name="216252045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252045">(Nov 10 2020 at 18:21)</a>:</h4>
<p>next issue is</p>
<h2><del>Support hiding specific stackframes from backtrace by marking on the original functions. <a href="https://github.com/rust-lang/rust/issues/68336">#68336</a></del></h2>



<a name="216252407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252407">(Nov 10 2020 at 18:24)</a>:</h4>
<p>hmm, it doesn't seem tagged for us though? -- not quite seeing how it's related to async/await?</p>



<a name="216252411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252411">(Nov 10 2020 at 18:24)</a>:</h4>
<p>oops</p>



<a name="216252421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252421">(Nov 10 2020 at 18:24)</a>:</h4>
<p>no, I mixed up my tabs :)</p>



<a name="216252449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252449">(Nov 10 2020 at 18:24)</a>:</h4>
<h2>Incomprehensible type error when defining getter and setter <a href="https://github.com/rust-lang/rust/issues/78337">#78337</a></h2>



<a name="216252453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252453">(Nov 10 2020 at 18:24)</a>:</h4>
<p>that's the one</p>



<a name="216252512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252512">(Nov 10 2020 at 18:24)</a>:</h4>
<p>haha</p>



<a name="216252734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252734">(Nov 10 2020 at 18:26)</a>:</h4>
<p>I uhh, wonder if this has something to do with it: <a href="https://docs.rs/async-raft/0.5.5/async_raft/raft/struct.Raft.html">https://docs.rs/async-raft/0.5.5/async_raft/raft/struct.Raft.html</a></p>



<a name="216252751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252751">(Nov 10 2020 at 18:26)</a>:</h4>
<p>that's 4 generic type parameters</p>



<a name="216252774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252774">(Nov 10 2020 at 18:26)</a>:</h4>
<p>hmm</p>



<a name="216252782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252782">(Nov 10 2020 at 18:26)</a>:</h4>
<p>yeah without an MVCE it's hard to see what's going on</p>



<a name="216252862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252862">(Nov 10 2020 at 18:27)</a>:</h4>
<p>looking at the error it's about what I'd expect to see imo; mostly the layers and layers of generics make it hard to decipher</p>



<a name="216252920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252920">(Nov 10 2020 at 18:28)</a>:</h4>
<p>well</p>



<a name="216252988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252988">(Nov 10 2020 at 18:28)</a>:</h4>
<p>or well, perhaps worth clarifying: is the bug that the error message is hard to read, or that it doesn't compile?</p>



<a name="216252996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216252996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216252996">(Nov 10 2020 at 18:28)</a>:</h4>
<p>we have code that's supposed to produce better looking errors, but it only works in certain cases</p>



<a name="216253041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253041">(Nov 10 2020 at 18:28)</a>:</h4>
<p>I think it was filed for the latter reason</p>



<a name="216253071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253071">(Nov 10 2020 at 18:29)</a>:</h4>
<p>but the issue may actually be that the error message is hard to read :)</p>



<a name="216253258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253258">(Nov 10 2020 at 18:30)</a>:</h4>
<p>I'm actually wondering if first-class async traits will solve this</p>



<a name="216253282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253282">(Nov 10 2020 at 18:30)</a>:</h4>
<p>one of the issues of the error is that there are up to 25 lifetimes per trace</p>



<a name="216253305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253305">(Nov 10 2020 at 18:30)</a>:</h4>
<p>which are added by the <code>async_trait</code> crate</p>



<a name="216253342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253342">(Nov 10 2020 at 18:31)</a>:</h4>
<p>if it was part of the lang, then that would no longer be an issue</p>



<a name="216253480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253480">(Nov 10 2020 at 18:32)</a>:</h4>
<p>I see a lot of lifetimes on types that look like generator objects</p>



<a name="216253525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253525">(Nov 10 2020 at 18:32)</a>:</h4>
<p>so I think many of them would be there in any case</p>



<a name="216253543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253543">(Nov 10 2020 at 18:32)</a>:</h4>
<p>but yeah we should generate a better error message</p>



<a name="216253594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253594">(Nov 10 2020 at 18:33)</a>:</h4>
<p>I can't prioritize this until we have a more minimal example to work with, though :/</p>



<a name="216253623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253623">(Nov 10 2020 at 18:33)</a>:</h4>
<p>unless someone wants to minimize it</p>



<a name="216253700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253700">(Nov 10 2020 at 18:33)</a>:</h4>
<p>..okay, we're at time</p>



<a name="216253775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253775">(Nov 10 2020 at 18:34)</a>:</h4>
<p>I'll try to do some further triage in this stream later today</p>



<a name="216253815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253815">(Nov 10 2020 at 18:34)</a>:</h4>
<p>though I said that last week and didn't get to it =)</p>



<a name="216253829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253829">(Nov 10 2020 at 18:34)</a>:</h4>
<p>Thanks for coming, everyone! <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="216253860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/meeting%202020.11.10/near/216253860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/meeting.202020.2E11.2E10.html#216253860">(Nov 10 2020 at 18:34)</a>:</h4>
<p>thanks for the meeting! ^^</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Triage meeting 2021-11-15 · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html">Triage meeting 2021-11-15</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261522764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261522764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261522764">(Nov 15 2021 at 16:34)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1172">@WG-async-foundations</span>! It's time for our weekly triage meeting.</p>



<a name="261522784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261522784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261522784">(Nov 15 2021 at 16:34)</a>:</h4>
<p>(Sorry for running a few minutes late today)</p>



<a name="261522860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261522860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261522860">(Nov 15 2021 at 16:35)</a>:</h4>
<p>Howdy</p>



<a name="261522903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261522903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261522903">(Nov 15 2021 at 16:35)</a>:</h4>
<p>We have our usual agenda today:</p>
<ul>
<li>Announcements<br>
    - (add items)</li>
<li>[eholk] New issue <a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">triage</a></li>
<li>Discussion on progress/blockers around sprint bugs</li>
</ul>



<a name="261522940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261522940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261522940">(Nov 15 2021 at 16:35)</a>:</h4>
<p>Let's start with announcements. Does anyone have anything to announce?</p>



<a name="261523052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523052">(Nov 15 2021 at 16:36)</a>:</h4>
<p>Lots of feedback on generators blogpost, lots of bikeshedding as well :)</p>



<a name="261523105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523105">(Nov 15 2021 at 16:36)</a>:</h4>
<p>Great!</p>



<a name="261523108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523108">(Nov 15 2021 at 16:36)</a>:</h4>
<ul>
<li><a href="https://smallcultfollowing.com/babysteps//blog/2021/11/15/ctcft-2021-11-22-agenda/">CTCFT on 2021-11-22</a> will have some Rust For Linux folks talking about their challenges. Not directly async related, but perhaps of interest to people here.</li>
</ul>



<a name="261523154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523154">(Nov 15 2021 at 16:37)</a>:</h4>
<p>Finally managed to publish my async cancellation blog post; response has been pretty good overall and has sparked some interesting discussion</p>



<a name="261523157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523157">(Nov 15 2021 at 16:37)</a>:</h4>
<p>made good progress on the polish ticket of unnecessary <code>.await</code> that will also let us potentially pay up some tech debt for diagnostics coming from for loop expressions</p>



<a name="261523198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523198">(Nov 15 2021 at 16:37)</a>:</h4>
<p><span class="user-mention" data-user-id="211722">@Yoshua Wuyts [he/they]</span> nice; that's on my list to read</p>



<a name="261523303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523303">(Nov 15 2021 at 16:38)</a>:</h4>
<p>Also Eric and I managed to implement <code>IntoFuture</code> semantics in the compiler; not sure if that's on the new issues for today, but would be great if we could get that reviewed: <a href="https://github.com/rust-lang/rust/pull/90737">https://github.com/rust-lang/rust/pull/90737</a></p>



<a name="261523418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523418">(Nov 15 2021 at 16:38)</a>:</h4>
<p>did some good progress on impl traits in traits</p>



<a name="261523618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523618">(Nov 15 2021 at 16:40)</a>:</h4>
<p>One thing to point out about <code>IntoFuture</code> is the rust-perf run showed a 9% regression on one of the benchmarks. That's much better than the 700% or whatever it was we saw before, but still significant. I'm inclined to take the regression to get the extra functionality, but it'd be great to have others weigh in as well.</p>



<a name="261523620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523620">(Nov 15 2021 at 16:40)</a>:</h4>
<p>I guess there is this, too:</p>
<p><a href="https://github.com/rust-lang/rfcs/pull/3193">return position impl trait in traits RFC</a></p>



<a name="261523783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523783">(Nov 15 2021 at 16:41)</a>:</h4>
<p>That's awesome to see so much progress this week! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="261523921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523921">(Nov 15 2021 at 16:42)</a>:</h4>
<p>+1 to that. So much is happening!</p>



<a name="261523937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523937">(Nov 15 2021 at 16:42)</a>:</h4>
<p>Let's move on to the next topic.<br>
<span class="user-mention" data-user-id="261224">@triagebot</span> end-topic</p>



<a name="261523943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261523943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261523943">(Nov 15 2021 at 16:42)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="261524078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524078">(Nov 15 2021 at 16:43)</a>:</h4>
<p>Next up is new issue <a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">triage</a>. We have one new issue this week.</p>



<a name="261524121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524121">(Nov 15 2021 at 16:44)</a>:</h4>
<p><strong>async fn can't handle multiple lifetimes in a slice of slices <a href="https://github.com/rust-lang/rust/issues/76547">#76547</a></strong></p>



<a name="261524181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524181">(Nov 15 2021 at 16:44)</a>:</h4>
<p>it's actually an old issue that I re-nominated for triage because of.. some reason</p>



<a name="261524213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524213">(Nov 15 2021 at 16:45)</a>:</h4>
<p>Ah, that's why it sounds familiar :)</p>



<a name="261524262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524262">(Nov 15 2021 at 16:45)</a>:</h4>
<p>this comment has the current status: <a href="https://github.com/rust-lang/rust/issues/76547#issuecomment-962440195">https://github.com/rust-lang/rust/issues/76547#issuecomment-962440195</a></p>



<a name="261524304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524304">(Nov 15 2021 at 16:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116883">@tmandry</span>  - is it related to the polish bug you're working on?</p>



<a name="261524402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524402">(Nov 15 2021 at 16:46)</a>:</h4>
<p>I think I just wanted to re-evaluate whether this should go on-deck with the other polish issues we're looking at</p>



<a name="261524414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524414">(Nov 15 2021 at 16:46)</a>:</h4>
<p>The error message <code>this parameter and the return type are declared with different lifetimes</code> looks familiar to me</p>



<a name="261524425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524425">(Nov 15 2021 at 16:46)</a>:</h4>
<p>is this basically a diagnostic fail?</p>



<a name="261524478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524478">(Nov 15 2021 at 16:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="421986">eholk</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15/near/261524304">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116883">tmandry</span>  - is it related to the polish bug you're working on?</p>
</blockquote>
<p>possibly</p>



<a name="261524524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524524">(Nov 15 2021 at 16:47)</a>:</h4>
<p>to be honest I don't remember how I came across it. 6 days ago might as well be an eternity</p>



<a name="261524627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524627">(Nov 15 2021 at 16:48)</a>:</h4>
<p>Well, regardless, I think it makes sense to have this on our on-deck queue if it's not already.</p>



<a name="261524791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524791">(Nov 15 2021 at 16:49)</a>:</h4>
<p>I think there's another thing beyond just the error: we have no affordance to explicitly set the return type's lifetime</p>



<a name="261524819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524819">(Nov 15 2021 at 16:49)</a>:</h4>
<p>which precludes the current suggestion machinery from working</p>



<a name="261524839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524839">(Nov 15 2021 at 16:49)</a>:</h4>
<p>Ah, interesting</p>



<a name="261524974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524974">(Nov 15 2021 at 16:50)</a>:</h4>
<p>I don't understand you mean, <span class="user-mention" data-user-id="119031">@Esteban Küber</span></p>



<a name="261524975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261524975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261524975">(Nov 15 2021 at 16:50)</a>:</h4>
<p>IIRC, on sync fns it would say something like "you have <code>-&gt; impl Trait</code>, try adding a lifetime <code>'a</code> and change the return type to <code>-&gt; impl Trait + 'a</code>", with a bunch of permutations</p>



<a name="261525017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525017">(Nov 15 2021 at 16:50)</a>:</h4>
<p>you can't do that on async fns, because the lifetime is only inferred from the arguments, always</p>



<a name="261525041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525041">(Nov 15 2021 at 16:51)</a>:</h4>
<p>hmm</p>



<a name="261525096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525096">(Nov 15 2021 at 16:51)</a>:</h4>
<p>this seems like a genuine bug, not a diagnostic error</p>



<a name="261525099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525099">(Nov 15 2021 at 16:51)</a>:</h4>
<p>so my point is that this is both a diagnostics <em>and</em> ergonomic affordances fail, that we might want to approach</p>



<a name="261525104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525104">(Nov 15 2021 at 16:51)</a>:</h4>
<p>why doesn't the return type capture all the lifetimes?</p>



<a name="261525120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525120">(Nov 15 2021 at 16:51)</a>:</h4>
<p>oh, well, never mind</p>



<a name="261525128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525128">(Nov 15 2021 at 16:51)</a>:</h4>
<p>so</p>



<a name="261525156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525156">(Nov 15 2021 at 16:51)</a>:</h4>
<p>I think the return type thing is a red herring</p>



<a name="261525213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525213">(Nov 15 2021 at 16:52)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">ListFut</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">]]);</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">readv_at</span><span class="p">(</span><span class="n">bufs</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">]])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">ListFut</span><span class="p">(</span><span class="n">bufs</span><span class="p">).</span><span class="k">await</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="261525253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525253">(Nov 15 2021 at 16:52)</a>:</h4>
<p>I mean, those two types are distinct</p>



<a name="261525258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525258">(Nov 15 2021 at 16:52)</a>:</h4>
<p>and <code>&amp;mut</code> is invariant</p>



<a name="261525374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525374">(Nov 15 2021 at 16:53)</a>:</h4>
<p>Oh... it's also likely that the suggestions only account for "flat" types when it comes to lifetimes. <code>&amp;mut &amp;mut T</code> is likely not properly handled in sync fns either.</p>



<a name="261525375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525375">(Nov 15 2021 at 16:53)</a>:</h4>
<p>you don't even need the await (<a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=cff527fdd17208a0399f264b52310df4">playground</a>)</p>



<a name="261525552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525552">(Nov 15 2021 at 16:55)</a>:</h4>
<p>taking away the <code>async fn</code>...</p>



<a name="261525568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525568">(Nov 15 2021 at 16:55)</a>:</h4>
<p>(ugh, playground is slow?)</p>



<a name="261525593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525593">(Nov 15 2021 at 16:55)</a>:</h4>
<p>(yeah, it's struggling for me)</p>



<a name="261525629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525629">(Nov 15 2021 at 16:55)</a>:</h4>
<p>yes</p>



<a name="261525648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525648">(Nov 15 2021 at 16:55)</a>:</h4>
<p>is our wg enough to bring the playground to its knees?</p>



<a name="261525715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525715">(Nov 15 2021 at 16:56)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0623</span><span class="p">]</span>: <span class="nc">lifetime</span><span class="w"> </span><span class="n">mismatch</span><span class="w"></span>
<span class="w"> </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nmatsakis</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">foo</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">5</span>:<span class="mi">13</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">readv_at2</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="o">'</span><span class="na">b</span><span class="o">&gt;</span><span class="p">(</span><span class="n">bufs</span>: <span class="kp">&amp;</span><span class="o">'</span><span class="na">a</span> <span class="nc">mut</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;'</span><span class="na">b</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">]])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w">                                </span><span class="o">----------------------</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">declared</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">lifetimes</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="n">ListFut</span><span class="p">(</span><span class="n">bufs</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w">             </span><span class="o">^^^^</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="n">but</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="err">`</span><span class="n">bufs</span><span class="err">`</span><span class="w"> </span><span class="n">flows</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="err">`</span><span class="n">bufs</span><span class="err">`</span><span class="w"> </span><span class="n">here</span><span class="w"></span>

<span class="n">error</span>: <span class="nc">aborting</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">errors</span><span class="w"></span>
</code></pre></div>



<a name="261525728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525728">(Nov 15 2021 at 16:56)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=74388bdf679c7f080303a2014ee75eda">source</a></p>



<a name="261525751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525751">(Nov 15 2021 at 16:56)</a>:</h4>
<p>I think this probably is not particularly async specific</p>



<a name="261525767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525767">(Nov 15 2021 at 16:56)</a>:</h4>
<p>definitely a case of "diagnostic fail"</p>



<a name="261525773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525773">(Nov 15 2021 at 16:56)</a>:</h4>
<p>they're targeting a simpler scenario</p>



<a name="261525801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525801">(Nov 15 2021 at 16:57)</a>:</h4>
<p>yeah. ideally we should suggest the user write  <code>[async] fn readv_at&lt;'a&gt;(bufs: &amp;'a mut [&amp;'a mut [u8]])</code></p>



<a name="261525846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525846">(Nov 15 2021 at 16:57)</a>:</h4>
<p>right, and highlight that this is required by the structure definition</p>



<a name="261525865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525865">(Nov 15 2021 at 16:57)</a>:</h4>
<p>(which perhaps hints they could change that, too)</p>



<a name="261525881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525881">(Nov 15 2021 at 16:57)</a>:</h4>
<p>in this instance the structure seems wrong to me</p>



<a name="261525901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525901">(Nov 15 2021 at 16:57)</a>:</h4>
<p>one other thing that seems worth noting is that this <em>would</em> work with <code>&amp;[&amp;[u8]]</code></p>



<a name="261525912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525912">(Nov 15 2021 at 16:57)</a>:</h4>
<p>it's the <code>mut</code> that messes with it</p>



<a name="261525954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261525954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261525954">(Nov 15 2021 at 16:58)</a>:</h4>
<p>it would even work with <code>&amp;[&amp;mut [u8]</code></p>



<a name="261526099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526099">(Nov 15 2021 at 16:59)</a>:</h4>
<p>So we're running towards the end of time, so let's go ahead and move on to the next topic.</p>



<a name="261526170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526170">(Nov 15 2021 at 16:59)</a>:</h4>
<p>Thanks for raising the issue again, <span class="user-mention" data-user-id="116883">@tmandry</span>, and it was great seeing a lot of discussion about it. This definitely seems like it's worth looking into more.</p>



<a name="261526173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526173">(Nov 15 2021 at 16:59)</a>:</h4>
<p><span class="user-mention" data-user-id="261224">@triagebot</span> end-topic</p>



<a name="261526175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526175">(Nov 15 2021 at 16:59)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="261526290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526290">(Nov 15 2021 at 17:00)</a>:</h4>
<p>I guess before we end triage, I wanted to ask whether we could get eyes on <a href="https://github.com/rust-lang/rust/pull/90737">https://github.com/rust-lang/rust/pull/90737</a></p>



<a name="261526348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526348">(Nov 15 2021 at 17:00)</a>:</h4>
<p>Our last topic is for general discussion about sprint bugs. Progress, blockers, etc.</p>



<a name="261526420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526420">(Nov 15 2021 at 17:01)</a>:</h4>
<p>It doesn't need to happen sync now, but it does require input from the WG whether the regression is acceptable</p>



<a name="261526435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526435">(Nov 15 2021 at 17:01)</a>:</h4>
<p>/me throws that PR on the reading list of cool things the WG is doing</p>



<a name="261526569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526569">(Nov 15 2021 at 17:02)</a>:</h4>
<p>Thanks!</p>



<a name="261526577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526577">(Nov 15 2021 at 17:02)</a>:</h4>
<p>I plan to do a review in the next couple days</p>



<a name="261526622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526622" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526622">(Nov 15 2021 at 17:02)</a>:</h4>
<p>fantastic, thank you!</p>



<a name="261526638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526638">(Nov 15 2021 at 17:02)</a>:</h4>
<p>I'm still plugging away at the generator capture issue. I think all I have left is handling <code>break</code> and <code>continue</code>, which hopefully won't take too long.</p>



<a name="261526678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526678">(Nov 15 2021 at 17:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211722">Yoshua Wuyts [he/they]</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15/near/261526420">said</a>:</p>
<blockquote>
<p>It doesn't need to happen sync now, but it does require input from the WG whether the regression is acceptable</p>
</blockquote>
<p><a href="https://perf.rust-lang.org/compare.html?start=d6082292a6f3207cbdacd6633a5b9d1476bb6772&amp;end=63f6208b5cec7496fd972de8245a4ff9d4da9e8b">perf results</a></p>



<a name="261526732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526732">(Nov 15 2021 at 17:03)</a>:</h4>
<p>it's much better than last time :)</p>



<a name="261526933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261526933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261526933">(Nov 15 2021 at 17:04)</a>:</h4>
<p>even with this patch, the case that's regressing now is 20x as fast as we were in early 2020 - if I'm reading the numbers right</p>



<a name="261527349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261527349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261527349">(Nov 15 2021 at 17:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211722">Yoshua Wuyts [he/they]</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15/near/261526933">said</a>:</p>
<blockquote>
<p>even with this patch, the case that's regressing now is 20x as fast as we were in early 2020 - if I'm reading the numbers right</p>
</blockquote>
<p>That's impressive!</p>



<a name="261527480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261527480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261527480">(Nov 15 2021 at 17:08)</a>:</h4>
<p>Does anyone have anything else they want to discuss in this meeting? If not we can go ahead and wrap up. As always, the chat room is open if people want to continue discussing other topics.</p>



<a name="261527801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261527801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261527801">(Nov 15 2021 at 17:10)</a>:</h4>
<p>Alright, let's go ahead officially end the meeting<br>
<span class="user-mention" data-user-id="261224">@triagebot</span> end-meeting</p>



<a name="261527803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261527803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261527803">(Nov 15 2021 at 17:10)</a>:</h4>
<p>Does anyone have something to bring up?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if you're ready to end the meeting.</p>



<a name="261527815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-11-15/near/261527815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-11-15.html#261527815">(Nov 15 2021 at 17:10)</a>:</h4>
<p>Thanks, everyone!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
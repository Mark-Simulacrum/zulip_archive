<html>
<head><meta charset="utf-8"><title>mdbook test · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html">mdbook test</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="233243547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233243547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233243547">(Apr 05 2021 at 23:08)</a>:</h4>
<p>My reading of the mdbook <a href="https://github.com/rust-lang/mdBook/blob/master/guide/src/cli/test.md">manual</a> suggests that the only thing that <code>mkbook test</code> does right now is run codeblocks as rustdoc tests.   Are you aware if it does anything else?  If not, let's just remove the call to <code>mdbook test</code> in the CI scripts</p>



<a name="233245711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233245711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233245711">(Apr 05 2021 at 23:36)</a>:</h4>
<p>yeah we could do that :)</p>



<a name="233245717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233245717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233245717">(Apr 05 2021 at 23:37)</a>:</h4>
<p>in other repos, I had link checkers and other things in there</p>



<a name="233245725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233245725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233245725">(Apr 05 2021 at 23:37)</a>:</h4>
<p>but I guess we don't have those</p>



<a name="233245731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233245731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233245731">(Apr 05 2021 at 23:37)</a>:</h4>
<p>I wouldn't object</p>



<a name="233245852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233245852" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233245852">(Apr 05 2021 at 23:38)</a>:</h4>
<p>ok.  let me spend a few minutes reading the mdbook source to confirm that all it does is run doctests, then i'll open a PR</p>



<a name="233246188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233246188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233246188">(Apr 05 2021 at 23:42)</a>:</h4>
<p>(a link checker would be nice, though, i know we have a few dead/malformed links at the moment)</p>



<a name="233246890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233246890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233246890">(Apr 05 2021 at 23:51)</a>:</h4>
<p>(co-maintainer here if you need anything)</p>



<a name="233289672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233289672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233289672">(Apr 06 2021 at 09:21)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="120823">@DPC</span> -- how would you feel if I opened a PR integrating mdbook-mermaid into the main distribution?</p>



<a name="233289753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233289753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233289753">(Apr 06 2021 at 09:22)</a>:</h4>
<p>I would love it if mermaid graphs "just worked"</p>



<a name="233289788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233289788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233289788">(Apr 06 2021 at 09:22)</a>:</h4>
<p>Also, can you confirm whether <code>mdbook test</code> does anything apart from running Rust tests? Is there a way to configure those off?</p>



<a name="233308309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233308309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233308309">(Apr 06 2021 at 12:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/mdbook.20test/near/233289788">said</a>:</p>
<blockquote>
<p>Also, can you confirm whether <code>mdbook test</code> does anything apart from running Rust tests? Is there a way to configure those off?</p>
</blockquote>
<p>yes, Just checked the <a href="https://github.com/rust-lang/mdBook/blob/master/src/book/mod.rs#L233">code</a> and it runs only the rustdoc tests.</p>



<a name="233308496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233308496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233308496">(Apr 06 2021 at 12:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/mdbook.20test/near/233289672">said</a>:</p>
<blockquote>
<p>Hey <span class="user-mention silent" data-user-id="120823">DPC</span> -- how would you feel if I opened a PR integrating mdbook-mermaid into the main distribution?</p>
</blockquote>
<p>sounds good to me,  <span class="user-mention" data-user-id="120518">@Eric Huss</span> maintains mdbook as well, so let's get their opinion on this</p>



<a name="233325813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233325813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233325813">(Apr 06 2021 at 14:15)</a>:</h4>
<p>I'd be concerned about adding mermaid. The primary issue is that I do not have the time to maintain the code that is already there. Adding more means it will likely go unmaintained. I've also been saying "no" to adding other plugins for the same reason. If we add mermaid, that would encourage others to want to bundle additional plugins. I'd actually like to <em>remove</em> some plugins, like mathjax, since it is somewhat broken and unmaintained.</p>
<p>Also, have you discussed this with the author?</p>
<p>I would maybe entertain making it easier to install/bootstrap plugins, but that would likely be yet another big addition that I don't have time for.</p>



<a name="233329955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233329955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan-Erik (badboy) <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233329955">(Apr 06 2021 at 14:40)</a>:</h4>
<p>Author here. I wouldn't mind either way. <br>
We rely on mdbook-mermaid ourselves at work, but we also bundle it as part of several preprocessors to make usage by users either (only have to install one tool, that wraps mdbook &amp; preprocessors, instead of installing each one individually).<br>
The whole preprocessor thing was introduced exactly so that mdbook doesn't need to bring them all along, so I absolutely understand Eric's reasoning here</p>



<a name="233330041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233330041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan-Erik (badboy) <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233330041">(Apr 06 2021 at 14:41)</a>:</h4>
<p>(and if there's a general lack in people able to maintain mdbook, then ... uhm ... maybe I should step up and help out there I guess)</p>



<a name="233339873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233339873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233339873">(Apr 06 2021 at 15:24)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> certainly fair :) I want to say "I'll help you maintain!" but of course I don't have time for all the projects I'm already involved in</p>



<a name="233339900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233339900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233339900">(Apr 06 2021 at 15:25)</a>:</h4>
<p>that said... hmm</p>



<a name="233339920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233339920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233339920">(Apr 06 2021 at 15:25)</a>:</h4>
<p>well anyway we can take this somewhere else</p>



<a name="233339998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233339998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233339998">(Apr 06 2021 at 15:25)</a>:</h4>
<p>honestly my main concern is I want to make enabling things in GH actions etc as 1000% easy as possible; beyond that, preprocessors are fine</p>



<a name="233395074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233395074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233395074">(Apr 06 2021 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="143300">jer</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/mdbook.20test/near/233330041">said</a>:</p>
<blockquote>
<p>(and if there's a general lack in people able to maintain mdbook, then ... uhm ... maybe I should step up and help out there I guess)</p>
</blockquote>
<p>yeah sure, you are welcome to join us <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="233398897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233398897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233398897">(Apr 06 2021 at 22:11)</a>:</h4>
<p>mdbook is one of my favorite things ever</p>



<a name="233398904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/mdbook%20test/near/233398904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/mdbook.20test.html#233398904">(Apr 06 2021 at 22:11)</a>:</h4>
<p>maybe I will actually try to carve at least a little time to contribute :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>weekly meeting 2019.04.09 · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html">weekly meeting 2019.04.09</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="162928735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162928735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162928735">(Apr 09 2019 at 17:00)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1172">@WG-async-await</span> o/</p>



<a name="162928901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162928901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162928901">(Apr 09 2019 at 17:02)</a>:</h4>
<p>remaining blockers: <a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AAsyncAwait-Blocking" target="_blank" title="https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AAsyncAwait-Blocking">https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AAsyncAwait-Blocking</a></p>



<a name="162928949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162928949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162928949">(Apr 09 2019 at 17:03)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I think <a href="https://github.com/rust-lang/rust/issues/58930" target="_blank" title="https://github.com/rust-lang/rust/issues/58930">https://github.com/rust-lang/rust/issues/58930</a> is just waiting on you to review <a href="https://github.com/rust-lang/rust/pull/59111" target="_blank" title="https://github.com/rust-lang/rust/pull/59111">https://github.com/rust-lang/rust/pull/59111</a></p>



<a name="162928957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162928957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162928957">(Apr 09 2019 at 17:03)</a>:</h4>
<p>(cc <span class="user-mention" data-user-id="120134">@Giles Cope</span> )</p>



<a name="162929033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929033">(Apr 09 2019 at 17:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> and I were going to try and meet some time this week to discuss <a href="https://github.com/rust-lang/rust/issues/56238" target="_blank" title="https://github.com/rust-lang/rust/issues/56238">https://github.com/rust-lang/rust/issues/56238</a> (multiple lifetimes)</p>



<a name="162929061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929061">(Apr 09 2019 at 17:04)</a>:</h4>
<p>We haven't yet scheduled a time, but when we do I'll make sure it gets announced on the stream.</p>



<a name="162929082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929082">(Apr 09 2019 at 17:05)</a>:</h4>
<p>I think the plan was to record it as well so we'll have a record</p>



<a name="162929101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929101">(Apr 09 2019 at 17:05)</a>:</h4>
<p>That work would also unblock some features of existential types</p>



<a name="162929177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929177">(Apr 09 2019 at 17:06)</a>:</h4>
<p>On <a href="https://github.com/rust-lang/rust/issues/54716" target="_blank" title="https://github.com/rust-lang/rust/issues/54716">https://github.com/rust-lang/rust/issues/54716</a> (arguments are dropped early)</p>



<a name="162929190"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929190" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929190">(Apr 09 2019 at 17:06)</a>:</h4>
<p>there's been some lang team discussion at the last meeting and on the thread around whether or not we want to consider this a bug, and whether or not we should leave the current behavior</p>



<a name="162929214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929214">(Apr 09 2019 at 17:07)</a>:</h4>
<p>still, I think we should take an optimistic-concurrency route and continue working towards a compiler-team solution</p>



<a name="162929241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929241">(Apr 09 2019 at 17:07)</a>:</h4>
<blockquote>
<p>still, I think we should take an optimistic-concurrency route and continue working towards a compiler-team solution</p>
</blockquote>
<p>I'm not familiar with what you mean by an optimistic-concurrency route?</p>



<a name="162929243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929243">(Apr 09 2019 at 17:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> you had opened <a href="https://github.com/rust-lang/rust/pull/59135" target="_blank" title="https://github.com/rust-lang/rust/pull/59135">https://github.com/rust-lang/rust/pull/59135</a> which included a fix, but I know you were concerned that the implementation was a bit wonky</p>



<a name="162929304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929304">(Apr 09 2019 at 17:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> ah, sorry, I was just referring to "work towards a solution on our end while the lang team also works towards a solution on theirs"</p>



<a name="162929367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929367">(Apr 09 2019 at 17:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> did you have unresolved questions around how the implementation should work? is there something that needs to happen to unblock further work here?</p>



<a name="162929388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929388">(Apr 09 2019 at 17:09)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="116107">davidtwco</span> you had opened <a href="https://github.com/rust-lang/rust/pull/59135" target="_blank" title="https://github.com/rust-lang/rust/pull/59135">https://github.com/rust-lang/rust/pull/59135</a> which included a fix, but I know you were concerned that the implementation was a bit wonky</p>
</blockquote>
<p>It was 95% of the way there, but it wasn't as clean as I'd have liked as the change leaked into the AST a little to simplify the changes to the HIR, name resolution and (def) collection.</p>



<a name="162929403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929403">(Apr 09 2019 at 17:09)</a>:</h4>
<p>There was an unresolved bug with type inference of the <code>let &lt;pat&gt; = __arg0</code> statement.</p>



<a name="162929475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929475">(Apr 09 2019 at 17:10)</a>:</h4>
<p>And when that was fixed temporarily there was a change in some test output that looked fine but I wasn't too sure.</p>



<a name="162929507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929507">(Apr 09 2019 at 17:10)</a>:</h4>
<p>(Hi all, sorry I'm late)</p>



<a name="162929524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929524">(Apr 09 2019 at 17:10)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> I think <a href="https://github.com/rust-lang/rust/issues/58930" target="_blank" title="https://github.com/rust-lang/rust/issues/58930">https://github.com/rust-lang/rust/issues/58930</a> is just waiting on you to review <a href="https://github.com/rust-lang/rust/pull/59111" target="_blank" title="https://github.com/rust-lang/rust/pull/59111">https://github.com/rust-lang/rust/pull/59111</a></p>
</blockquote>
<p>ok</p>



<a name="162929563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929563">(Apr 09 2019 at 17:11)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> and I were going to try and meet some time this week to discuss <a href="https://github.com/rust-lang/rust/issues/56238" target="_blank" title="https://github.com/rust-lang/rust/issues/56238">https://github.com/rust-lang/rust/issues/56238</a> (multiple lifetimes)</p>
</blockquote>
<p>I was meaning to get back to you on that. I think we should schedule a time a bit later in the week (maybe Friday?) and I'll try to also add some time for me to do a bit of exploratory work before that. But I'll ping you in the other thread.</p>



<a name="162929623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929623">(Apr 09 2019 at 17:12)</a>:</h4>
<blockquote>
<p>there's been some lang team discussion at the last meeting and on the thread around whether or not we want to consider this a bug, and whether or not we should leave the current behavior</p>
</blockquote>
<p>I still think this should be considered a bug -- however I was thinking</p>



<a name="162929658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929658">(Apr 09 2019 at 17:12)</a>:</h4>
<p>in the short term, one very simple thing we could do is just limit async fns to only have simple patterns for their parameters, or something like that?</p>



<a name="162929660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929660">(Apr 09 2019 at 17:12)</a>:</h4>
<p>maybe that's too horrible</p>



<a name="162929667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929667">(Apr 09 2019 at 17:12)</a>:</h4>
<p>(also require, I guess, that all parameters are used)</p>



<a name="162929706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929706">(Apr 09 2019 at 17:13)</a>:</h4>
<p>obviously not a good long term sol'n, and maybe not worth the effort</p>



<a name="162929724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929724">(Apr 09 2019 at 17:13)</a>:</h4>
<blockquote>
<p>It was 95% of the way there, but it wasn't as clean as I'd have liked as the change leaked into the AST a little to simplify the changes to the HIR, name resolution and (def) collection.</p>
</blockquote>
<p>Elaborating slightly, inserting statements during lowering wasn't particularly easy and required similar changes to other parts of the compiler, which meant that constructing those statements in the AST so they were available in these other places proved easier.</p>



<a name="162929821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929821">(Apr 09 2019 at 17:14)</a>:</h4>
<blockquote>
<p>obviously not a good long term sol'n, and maybe not worth the effort</p>
</blockquote>
<p>Unless we don't want an approach as yucky as my previous PR took, I don't think it would be too hard to polish that up and fix the issue. (I'd need some help w/ the type inference issue, but otherwise the bulk is done).</p>



<a name="162929997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162929997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162929997">(Apr 09 2019 at 17:16)</a>:</h4>
<p>It wasn't really clear to me how yucky that was</p>



<a name="162930003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930003">(Apr 09 2019 at 17:16)</a>:</h4>
<p>I get that it felt more complex than you would like though</p>



<a name="162930010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930010">(Apr 09 2019 at 17:16)</a>:</h4>
<p>(I didn't really read it that closely)</p>



<a name="162930033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930033">(Apr 09 2019 at 17:17)</a>:</h4>
<p>I guess I would say that I am inclined to say I'd rather land the PR you were working on, presuming we can close up the remaining holes</p>



<a name="162930043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930043">(Apr 09 2019 at 17:17)</a>:</h4>
<p>and then refactor to make it nicer</p>



<a name="162930047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930047">(Apr 09 2019 at 17:17)</a>:</h4>
<p>but that depends on <em>how</em> yucky it was :)</p>



<a name="162930059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930059">(Apr 09 2019 at 17:17)</a>:</h4>
<p>also, I think I heard somewhere something about performance implications?</p>



<a name="162930075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930075">(Apr 09 2019 at 17:17)</a>:</h4>
<p>(though that mildly surprises me)</p>



<a name="162930077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930077">(Apr 09 2019 at 17:17)</a>:</h4>
<p>It definitely felt like a yucky solution, but that might just be me. I can’t think of a better way.</p>



<a name="162930103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930103">(Apr 09 2019 at 17:18)</a>:</h4>
<blockquote>
<p>also, I think I heard somewhere something about performance implications?</p>
</blockquote>
<p><del>I don't remember anything like that, but I could just be being forgetful.</del> I read that from the perspective of the PR impacting compiler performance.</p>



<a name="162930390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930390">(Apr 09 2019 at 17:20)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> we were discussing <em>runtime</em> performance implications in the issue (due to the generator size change and the delay before <code>drop</code>ping)</p>



<a name="162930527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930527">(Apr 09 2019 at 17:22)</a>:</h4>
<p><span class="user-mention" data-user-id="127859">@Taylor Cramer</span> why did the generator get bigger? is that beacuse of the issue that <span class="user-mention" data-user-id="116883">@tmandry</span> was working on?</p>



<a name="162930532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930532">(Apr 09 2019 at 17:22)</a>:</h4>
<p>i.e., just being inefficient in our layout?</p>



<a name="162930546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930546">(Apr 09 2019 at 17:22)</a>:</h4>
<p>The generator will capture the arguments that it previously didn't.</p>



<a name="162930551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930551">(Apr 09 2019 at 17:22)</a>:</h4>
<p>No, because we have to actually store the arguments in the future in order to drop them</p>



<a name="162930560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930560" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930560">(Apr 09 2019 at 17:22)</a>:</h4>
<p>Yeah, but .. how many arguments do you have that are unused?</p>



<a name="162930566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930566">(Apr 09 2019 at 17:22)</a>:</h4>
<p>I guess you're saying this is a frequent occurrence?</p>



<a name="162930582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930582">(Apr 09 2019 at 17:23)</a>:</h4>
<p>It will certainly happen when we have <code>async fn</code> in traits</p>



<a name="162930601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930601">(Apr 09 2019 at 17:23)</a>:</h4>
<p>Put another way, I would have expected that -- most of the time -- we would be capturing most of the arguments anyway.</p>



<a name="162930620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930620">(Apr 09 2019 at 17:23)</a>:</h4>
<p>Sure. I don't doubt it can happen.</p>



<a name="162930626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930626">(Apr 09 2019 at 17:23)</a>:</h4>
<p>Today we only have free and inherent <code>async fn</code> so it makes no difference because we have no unused args</p>



<a name="162930635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930635">(Apr 09 2019 at 17:23)</a>:</h4>
<p>but in the case where you don't have unused args this doesn't matter anyways :)</p>



<a name="162930711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930711">(Apr 09 2019 at 17:24)</a>:</h4>
<p>Put another way: I was operating under the assumption that this was a corner case. =) That doesn't make it unimportant per se.</p>



<a name="162930720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930720">(Apr 09 2019 at 17:24)</a>:</h4>
<p>Anyway, ok, I get it.</p>



<a name="162930735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930735">(Apr 09 2019 at 17:24)</a>:</h4>
<p>So, it's not that you measured this against existing code and found a large impact</p>



<a name="162930756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930756">(Apr 09 2019 at 17:24)</a>:</h4>
<p>But rather that you hypothesize the impact might be noticeable when we have traits and more frequently have unused parameters</p>



<a name="162930764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930764">(Apr 09 2019 at 17:24)</a>:</h4>
<p>Yes.</p>



<a name="162930772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930772">(Apr 09 2019 at 17:24)</a>:</h4>
<p>(It's certainly true that -- most of the time -- drop has no side-effects, and we'd rather drop early)</p>



<a name="162930822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930822">(Apr 09 2019 at 17:25)</a>:</h4>
<p>And where it does have side-effects, you'd often want them to happen before returning the future if you don't need the arg</p>



<a name="162930826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930826">(Apr 09 2019 at 17:25)</a>:</h4>
<p>As a random aside, I sometimes question whether it was wise to carry over the C++ design of "side-effectful destructors"</p>



<a name="162930827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930827">(Apr 09 2019 at 17:25)</a>:</h4>
<p>but oh well</p>



<a name="162930833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930833">(Apr 09 2019 at 17:25)</a>:</h4>
<p>a little late now!</p>



<a name="162930849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930849">(Apr 09 2019 at 17:25)</a>:</h4>
<p>yeah, we've discussed that before</p>



<a name="162930868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930868">(Apr 09 2019 at 17:25)</a>:</h4>
<blockquote>
<p>And where it does have side-effects, you'd often want them to happen before returning the future if you don't need the arg</p>
</blockquote>
<p>this...seems unclear to me</p>



<a name="162930934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930934">(Apr 09 2019 at 17:26)</a>:</h4>
<p>but maybe</p>



<a name="162930940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930940">(Apr 09 2019 at 17:26)</a>:</h4>
<p>There're a couple particular examples I could show, like closing the end of a channel etc.</p>



<a name="162930967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930967">(Apr 09 2019 at 17:26)</a>:</h4>
<p>where it forces an extra round-trip through the kernel</p>



<a name="162930973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930973">(Apr 09 2019 at 17:26)</a>:</h4>
<p>Yeah, so this uncertainty sort of argues for the "don't stabilize a drop order yet" I was proposing earlier</p>



<a name="162930986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930986">(Apr 09 2019 at 17:26)</a>:</h4>
<p>I don't know what that would mean in practice</p>



<a name="162930995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162930995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162930995">(Apr 09 2019 at 17:27)</a>:</h4>
<p>once we introduce something, it will be stabilized</p>



<a name="162931000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931000">(Apr 09 2019 at 17:27)</a>:</h4>
<p>it would mean that we check that all the arguments are used and captured</p>



<a name="162931006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931006">(Apr 09 2019 at 17:27)</a>:</h4>
<p>and we give a feature gate</p>



<a name="162931007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931007">(Apr 09 2019 at 17:27)</a>:</h4>
<p>This may be a little out there, but I wonder if it's really the <em>type</em> implementing <code>Drop</code> that can tell us more about whether it can be dropped early</p>



<a name="162931009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931009">(Apr 09 2019 at 17:27)</a>:</h4>
<p>if any of them are not</p>



<a name="162931017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931017">(Apr 09 2019 at 17:27)</a>:</h4>
<p>huh</p>



<a name="162931020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931020">(Apr 09 2019 at 17:27)</a>:</h4>
<p>I actually don't hate that</p>



<a name="162931023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931023">(Apr 09 2019 at 17:27)</a>:</h4>
<blockquote>
<p>This may be a little out there, but I wonder if it's really the <em>type</em> implementing <code>Drop</code> that can tell us more about whether it can be dropped early</p>
</blockquote>
<p>(yes, we've considered this in the past)</p>



<a name="162931043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931043">(Apr 09 2019 at 17:27)</a>:</h4>
<p>(the feature gate thing)</p>



<a name="162931045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931045">(Apr 09 2019 at 17:27)</a>:</h4>
<blockquote>
<p>I actually don't hate that</p>
</blockquote>
<p>I think that if the motivation is "we'd like more time to look at what happens in practice", it may make sense</p>



<a name="162931054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931054">(Apr 09 2019 at 17:27)</a>:</h4>
<p>mhm</p>



<a name="162931058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931058">(Apr 09 2019 at 17:27)</a>:</h4>
<p>And certainly there's no reason to do it today</p>



<a name="162931136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931136">(Apr 09 2019 at 17:28)</a>:</h4>
<p>it's a bit of a shame for <code>unimplemented!()</code> functions</p>



<a name="162931155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931155">(Apr 09 2019 at 17:28)</a>:</h4>
<p>I would usually do something like</p>



<a name="162931167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931167">(Apr 09 2019 at 17:28)</a>:</h4>
<p>panic!("unimplemented {:?}", (arg0, arg1, arg2));</p>



<a name="162931171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931171">(Apr 09 2019 at 17:28)</a>:</h4>
<p>but yes :)</p>



<a name="162931205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931205">(Apr 09 2019 at 17:29)</a>:</h4>
<p>we wouldn't want this state of affairs permanently</p>



<a name="162931212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931212">(Apr 09 2019 at 17:29)</a>:</h4>
<p>I guess it depends on how much we really wonder what the best order is</p>



<a name="162931302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931302">(Apr 09 2019 at 17:30)</a>:</h4>
<p>It was certainly unresolved at the conclusion of the last lang mtg</p>



<a name="162931528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931528">(Apr 09 2019 at 17:32)</a>:</h4>
<p>Yeah. I can see why.</p>



<a name="162931543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931543">(Apr 09 2019 at 17:32)</a>:</h4>
<p>A bit more complex than I initially thought.</p>



<a name="162931628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931628">(Apr 09 2019 at 17:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I feel like it'd be easy to reach agreement on the feature-gate solution</p>



<a name="162931709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931709">(Apr 09 2019 at 17:34)</a>:</h4>
<p>Maybe so. I'm not sure, but it's worth talking ove.</p>



<a name="162931720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931720">(Apr 09 2019 at 17:34)</a>:</h4>
<p>although I could see an argument that it contributes to the "unpolished" impression</p>



<a name="162931729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931729">(Apr 09 2019 at 17:34)</a>:</h4>
<p>mhm</p>



<a name="162931738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931738">(Apr 09 2019 at 17:34)</a>:</h4>
<p>I think the question is whether this is something where empirical evidence / experience might be useful in resolving it.</p>



<a name="162931749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931749">(Apr 09 2019 at 17:34)</a>:</h4>
<blockquote>
<p>although I could see an argument that it contributes to the "unpolished" impression</p>
</blockquote>
<p>yes, this is the downside</p>



<a name="162931762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931762">(Apr 09 2019 at 17:34)</a>:</h4>
<p>on the other hand, I think that if it is not because "impl is hard" but beacuse "we want feedback", that's a different thing</p>



<a name="162931790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931790">(Apr 09 2019 at 17:35)</a>:</h4>
<p>(also, making an arbitrary decision in the name of polish would not be a good answer to that :) )</p>



<a name="162931921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162931921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162931921">(Apr 09 2019 at 17:36)</a>:</h4>
<p>it might be worth investigating how hard it would be to <em>do</em> the feature gate</p>



<a name="162932037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162932037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162932037">(Apr 09 2019 at 17:38)</a>:</h4>
<p>Quick update on <a href="https://github.com/rust-lang/rust/issues/52924" target="_blank" title="https://github.com/rust-lang/rust/issues/52924">#52924</a> before I have to run: Before we revised the optimization strategy I had changed a bunch of things to get codegen working with variant-ful generators. I'm now pulling these changes out before redoing the optimization itself. More info available in the thread</p>



<a name="162932160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162932160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162932160">(Apr 09 2019 at 17:39)</a>:</h4>
<p>Cool-- apart from that the remaining issues are all tied to surface syntax</p>



<a name="162932237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162932237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162932237">(Apr 09 2019 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> do you know what you want the next steps to be regarding resolving that issue?</p>



<a name="162932254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162932254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162932254">(Apr 09 2019 at 17:40)</a>:</h4>
<p>I feel like there hasn't been progress on it in a while, but maybe I haven't been following the right discussions</p>



<a name="162932298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162932298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162932298">(Apr 09 2019 at 17:41)</a>:</h4>
<p>Do you think it's worthwhile for me to go ahead and write up a PR implementing the "most likely" syntax?</p>



<a name="162932329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162932329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162932329">(Apr 09 2019 at 17:41)</a>:</h4>
<p>That would at least put the cat among the pigeons....</p>



<a name="162933384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162933384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162933384">(Apr 09 2019 at 17:51)</a>:</h4>
<p><span class="user-mention" data-user-id="120134">@Giles Cope</span> yeah, I don't think I would open a PR, but it seems possibly worthwhile to prepare</p>



<a name="162933459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162933459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162933459">(Apr 09 2019 at 17:52)</a>:</h4>
<p>ping <span class="user-mention" data-user-id="116009">@nikomatsakis</span> thoughts on next steps here?</p>



<a name="162933703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162933703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162933703">(Apr 09 2019 at 17:54)</a>:</h4>
<p>(Have been lurking here for a bit) Can you elaborate what the “most likely” syntax would be? the postfix await?</p>
<p>(I liked that one the most, but that's not important to the question.)</p>



<a name="162934059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162934059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162934059">(Apr 09 2019 at 17:58)</a>:</h4>
<p><span class="user-mention" data-user-id="198819">@David Barsky</span> no, I can't.</p>



<a name="162934078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162934078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Taylor Cramer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162934078">(Apr 09 2019 at 17:58)</a>:</h4>
<p>I don't think that's appropriate to speculate on publicly, for the same reasons I said I wouldn't open a PR.</p>



<a name="162934133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162934133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Barsky <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162934133">(Apr 09 2019 at 17:59)</a>:</h4>
<p><span class="user-mention" data-user-id="127859">@Taylor Cramer</span> No worries, I completely understand! I drafted that message before I saw “I don't think I would open a PR”, so my bad on missing that.</p>



<a name="162934611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162934611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162934611">(Apr 09 2019 at 18:04)</a>:</h4>
<p>Hopefully they will decide something soon. I had an async await question my mate posed me. He said async await in C# was terrible as you would by default re-join the same thread which very often leads them to deadlocks in the code. Is this something we need to worry about?</p>



<a name="162935757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162935757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikon the Third <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162935757">(Apr 09 2019 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-id="120134">@Giles Cope</span> I hope it is ok if I chime in here, but in .NET the behaviour that a task tries to resume on the same thread the await was called is a conscious decision made by Microsoft. You explicitly have to call <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.configureawait?view=netframework-4.7.2" target="_blank" title="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.configureawait?view=netframework-4.7.2"><code>ConfigureAwait(false)</code></a> to allow the task to resume on a different thread. As long as Rust does not take the same road, these kind of deadlocks will not happen.</p>



<a name="162939635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162939635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162939635">(Apr 09 2019 at 18:56)</a>:</h4>
<p>Yeah, he said the clean async await codebases are now littered with .ConfigureAwait(false) everywhere. And the one or two places you forget are where the deadlock probably is. I was a little disheartened to hear of his experience.</p>



<a name="162948882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/weekly%20meeting%202019.04.09/near/162948882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/weekly.20meeting.202019.2E04.2E09.html#162948882">(Apr 09 2019 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="127859">@Taylor Cramer</span> whoops, sorry, got stuck on another call and missed your pings -- I'll privmsg you</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
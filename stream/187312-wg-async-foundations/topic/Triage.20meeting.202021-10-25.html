<html>
<head><meta charset="utf-8"><title>Triage meeting 2021-10-25 · wg-async-foundations · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/index.html">wg-async-foundations</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html">Triage meeting 2021-10-25</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="258975682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258975682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258975682">(Oct 25 2021 at 15:26)</a>:</h4>
<p>Hi <span class="user-group-mention" data-user-group-id="1172">@WG-async-foundations</span> - Our weekly triage meeting still be starting in about four minutes.</p>



<a name="258976362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976362">(Oct 25 2021 at 15:30)</a>:</h4>
<p>Okay, it's 8:30 my time, so let's begin</p>



<a name="258976447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976447">(Oct 25 2021 at 15:31)</a>:</h4>
<p>Our agenda for today:</p>
<ul>
<li>Announcements<br>
    - (add items)</li>
<li>[eholk] New issue <a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">triage</a></li>
<li>Discussion on progress/blockers around sprint bugs</li>
</ul>



<a name="258976522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976522">(Oct 25 2021 at 15:31)</a>:</h4>
<p>Let's start with announcements. I don't have anything to announce here, but I'll pause for a moment in case anyone else has anything to announce.</p>



<a name="258976834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976834">(Oct 25 2021 at 15:33)</a>:</h4>
<p>Okay, it sounds like no one else has announcements either. Let's move on.</p>



<a name="258976838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976838">(Oct 25 2021 at 15:33)</a>:</h4>
<p><span class="user-mention" data-user-id="261224">@triagebot</span> end-topic</p>



<a name="258976842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976842">(Oct 25 2021 at 15:33)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="258976949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976949">(Oct 25 2021 at 15:34)</a>:</h4>
<p>Okay, next up is new issue triage</p>



<a name="258976975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258976975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258976975">(Oct 25 2021 at 15:34)</a>:</h4>
<p>We have <a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">no new issues</a>!</p>



<a name="258977050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977050">(Oct 25 2021 at 15:35)</a>:</h4>
<p>So I guess this will be a short topic. Let's move on<br>
<span class="user-mention" data-user-id="261224">@triagebot</span> end-topic</p>



<a name="258977052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977052">(Oct 25 2021 at 15:35)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="258977122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977122">(Oct 25 2021 at 15:35)</a>:</h4>
<p>The last item is discussing progress/blockers on bugs we're working on for this sprint.</p>



<a name="258977239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977239">(Oct 25 2021 at 15:36)</a>:</h4>
<p>I got some time to work on <a href="https://github.com/rust-lang/rust/issues/57478">#57478</a> last week, implementing the new drop tracking algorithm <span class="user-mention" data-user-id="116009">@nikomatsakis</span> and I worked out.</p>



<a name="258977328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977328">(Oct 25 2021 at 15:37)</a>:</h4>
<p>ah, nice</p>



<a name="258977331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977331">(Oct 25 2021 at 15:37)</a>:</h4>
<p>Progress is going well. I've got all but one of the generator/async-await tests passing, including a new test case for <a href="https://github.com/rust-lang/rust/issues/57478">#57478</a>. <code>addassign-yield.rs</code> still fails, but I'll look into that more today</p>



<a name="258977333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977333">(Oct 25 2021 at 15:37)</a>:</h4>
<p>how'd it go?</p>



<a name="258977382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977382">(Oct 25 2021 at 15:37)</a>:</h4>
<p>did you try any of examples from issues?</p>



<a name="258977402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977402">(Oct 25 2021 at 15:37)</a>:</h4>
<p>oh, I guess <a href="https://github.com/rust-lang/rust/issues/57478">#57478</a> is that</p>



<a name="258977461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977461">(Oct 25 2021 at 15:38)</a>:</h4>
<p>so far it only supports straight line control flow, but I think the approach is structured in a way that will make it a lot easier to handle other things</p>



<a name="258977466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977466">(Oct 25 2021 at 15:38)</a>:</h4>
<p>I'm connecting something here, actually</p>



<a name="258977486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977486">(Oct 25 2021 at 15:38)</a>:</h4>
<p>Yes, this case passes now too:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span> <span class="nc">Foo</span><span class="p">;</span><span class="w"></span>
<span class="k">impl</span><span class="w"> </span><span class="o">!</span><span class="nb">Send</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="kd">let</span><span class="w"> </span><span class="n">_</span>: <span class="nc">impl</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">guard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nb">drop</span><span class="p">(</span><span class="n">guard</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kr">yield</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>



<a name="258977504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977504">(Oct 25 2021 at 15:38)</a>:</h4>
<p>We've been working a new version of the polonius algorithm we call <a href="http://polonius.next">polonius.next</a></p>



<a name="258977510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977510">(Oct 25 2021 at 15:38)</a>:</h4>
<p>nice!</p>



<a name="258977518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977518">(Oct 25 2021 at 15:38)</a>:</h4>
<p>one of the things we found the last time we were digging into it is that it probably needs a notion of "value goes dead"</p>



<a name="258977524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977524">(Oct 25 2021 at 15:38)</a>:</h4>
<p>which we were hoping to avoid :)</p>



<a name="258977536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977536">(Oct 25 2021 at 15:38)</a>:</h4>
<p>ah, I guess it's not <em>quite</em> the same</p>



<a name="258977578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977578">(Oct 25 2021 at 15:39)</a>:</h4>
<p>feels "related" though</p>



<a name="258977581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977581">(Oct 25 2021 at 15:39)</a>:</h4>
<p>That sounds related...</p>



<a name="258977627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977627">(Oct 25 2021 at 15:39)</a>:</h4>
<p>I've been imprecise with my wording around variables, values, temporaries, places, etc.</p>



<a name="258977628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977628">(Oct 25 2021 at 15:39)</a>:</h4>
<p>yeah, it's related, but going dead is more general</p>



<a name="258977687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977687">(Oct 25 2021 at 15:40)</a>:</h4>
<p>i.e., it happens after the last use of any variable</p>



<a name="258977719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977719">(Oct 25 2021 at 15:40)</a>:</h4>
<p>last week was a short week for me and I haven’t had time to dig into <a href="https://github.com/rust-lang/rust/issues/74256">#74256</a>, so nothing to report from me</p>



<a name="258977723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977723">(Oct 25 2021 at 15:40)</a>:</h4>
<p>still, there is a distinct notion of being "live" (may be actively used) and "drop-live" (may be dropped)</p>



<a name="258977763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977763">(Oct 25 2021 at 15:40)</a>:</h4>
<p>I do wonder if ultimately these will want to be the foundation for the generator analysis</p>



<a name="258977815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977815">(Oct 25 2021 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> - do you mean something like using <a href="http://polonius.next">polonius.next</a> to do the generator type analysis?</p>



<a name="258977817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977817">(Oct 25 2021 at 15:41)</a>:</h4>
<p>(I haven't done anything on my issue, but I do hope to carve out some time for that)</p>



<a name="258977840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977840">(Oct 25 2021 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="421986">@eholk</span> not entirely sure what I mean; I meant more like "there might be some common inputs to both"</p>



<a name="258977854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977854">(Oct 25 2021 at 15:41)</a>:</h4>
<p>Ah, makes sense</p>



<a name="258977857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977857">(Oct 25 2021 at 15:41)</a>:</h4>
<p>One thing I <em>have</em> wondered is whether moving polonius to occur on THIR</p>



<a name="258977874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977874">(Oct 25 2021 at 15:41)</a>:</h4>
<p>might actually be better than MIR</p>



<a name="258977928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977928">(Oct 25 2021 at 15:42)</a>:</h4>
<p>anyway, that's a bit down the way</p>



<a name="258977963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977963">(Oct 25 2021 at 15:42)</a>:</h4>
<p>it's just that MIR plays double duty as an analysis IR + an optimization IR, and I think as a result it does neither job perfectly</p>



<a name="258977990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258977990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258977990">(Oct 25 2021 at 15:42)</a>:</h4>
<p>on the other hand, that is its beauty :)</p>



<a name="258978005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978005">(Oct 25 2021 at 15:42)</a>:</h4>
<p>:)</p>



<a name="258978024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978024">(Oct 25 2021 at 15:42)</a>:</h4>
<p>I'll stop now, just musings for now</p>



<a name="258978031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978031">(Oct 25 2021 at 15:42)</a>:</h4>
<p>but maybe we'll wind up connecting things down the road</p>



<a name="258978051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978051">(Oct 25 2021 at 15:43)</a>:</h4>
<p>makes me feel good about this overall direction, in any case</p>



<a name="258978094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978094">(Oct 25 2021 at 15:43)</a>:</h4>
<p>It does feel like we have a lot of circularities in the compiler. It'd be nice to eliminate them, but I suspect the way that works is by merging three or four distinct components/phases into one mega phase, so I'm not sure that's better.</p>



<a name="258978275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978275">(Oct 25 2021 at 15:44)</a>:</h4>
<p>The drop tracking stuff I'm doing ends up making three passes over the IR, which is a little sad. The first is <code>ExprUseVisitor</code> to find things that are dropped. Then there's another pass that uses the results of <code>ExprUseVisitor</code> to figure out ranges where things are dropped, and finally there's the existing pass which now consults the drop ranges found in the previous phase.</p>



<a name="258978413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978413">(Oct 25 2021 at 15:45)</a>:</h4>
<p>I've tried a few different ways of factoring that though and this one seems to work the best. Sticking with it at least until I get the whole algorithm working seems like a good idea.</p>



<a name="258978581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978581">(Oct 25 2021 at 15:47)</a>:</h4>
<p>Anyway, I'm optimistic that by later this week I can have something pretty close to being ready for review.</p>



<a name="258978612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978612">(Oct 25 2021 at 15:47)</a>:</h4>
<p>great!</p>



<a name="258978633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978633">(Oct 25 2021 at 15:47)</a>:</h4>
<p>3 walks of the generator source is probably not a big deal</p>



<a name="258978655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978655">(Oct 25 2021 at 15:47)</a>:</h4>
<p>(perf wise)</p>



<a name="258978684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978684">(Oct 25 2021 at 15:47)</a>:</h4>
<p>Yeah.. It doesn't seem like there are many generators (yet)</p>



<a name="258978747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978747">(Oct 25 2021 at 15:48)</a>:</h4>
<p>Although async programs probably have a lot more</p>



<a name="258978814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978814">(Oct 25 2021 at 15:48)</a>:</h4>
<p>Anyway, that's all I have to update.</p>



<a name="258978827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978827">(Oct 25 2021 at 15:48)</a>:</h4>
<p>Does anyone else have anything to discuss?</p>



<a name="258978959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978959">(Oct 25 2021 at 15:49)</a>:</h4>
<p>If not, we can wrap up early</p>



<a name="258978960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978960">(Oct 25 2021 at 15:49)</a>:</h4>
<p>Not me</p>



<a name="258978973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978973">(Oct 25 2021 at 15:49)</a>:</h4>
<p>I plan to dig into my item later on</p>



<a name="258978981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978981">(Oct 25 2021 at 15:49)</a>:</h4>
<p>But I haven't gotten to it yet</p>



<a name="258978996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258978996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258978996">(Oct 25 2021 at 15:50)</a>:</h4>
<p>(neither)</p>



<a name="258979068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258979068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258979068">(Oct 25 2021 at 15:50)</a>:</h4>
<p>Alright, thanks everyone!</p>



<a name="258979077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258979077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258979077">(Oct 25 2021 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="261224">@triagebot</span> end-meeting</p>



<a name="258979078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async-foundations/topic/Triage%20meeting%202021-10-25/near/258979078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async-foundations/topic/Triage.20meeting.202021-10-25.html#258979078">(Oct 25 2021 at 15:50)</a>:</h4>
<p>Does anyone have something to bring up?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if you're ready to end the meeting.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
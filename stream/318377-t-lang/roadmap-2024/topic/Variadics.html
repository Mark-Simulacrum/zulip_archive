<html>
<head><meta charset="utf-8"><title>Variadics · t-lang/roadmap-2024 · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/index.html">t-lang/roadmap-2024</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html">Variadics</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277913132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277913132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277913132">(Apr 05 2022 at 17:16)</a>:</h4>
<p>Hi! The Bevy team is deeply interested in getting variadics into Rust, and have a number of technical and motivated folks who should be able to own the design process.</p>



<a name="277935678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277935678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277935678">(Apr 05 2022 at 20:00)</a>:</h4>
<p>Chatting with the team: I'll take variadics. <span class="user-mention" data-user-id="239881">@Josh Triplett</span>,  when you get a chance, let me know where to begin / what to read / who to talk to.</p>



<a name="277948394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277948394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277948394">(Apr 05 2022 at 21:51)</a>:</h4>
<p>Been thinking about this, I think there's a lot you could do with a <code>Tuple</code> trait with some GATs for appending/manipulating the types, and a tuple for_each macro or the like. Be interesting to start there and see where the feature gap is.</p>



<a name="277948646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277948646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277948646">(Apr 05 2022 at 21:54)</a>:</h4>
<p>I actually wrote up an API and was working on extensions to the compiler to support PartialEq/Debug/etc. for tuples with the same idea</p>



<a name="277949034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277949034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Goulet (compiler-errors) <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277949034">(Apr 05 2022 at 21:58)</a>:</h4>
<p>maybe I can dig it up..</p>



<a name="277949179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277949179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277949179">(Apr 05 2022 at 21:59)</a>:</h4>
<p>Something like <code>&amp;(T1, T2, T3, ..., TN)</code> -&gt; <code>[&amp;dyn Trait; N]</code> might be a really nice primitive to experiment with.  It'd certainly work for things like <code>Debug</code>, since the derive for tuple-structs uses <code>dyn Debug</code> anyway.  And if unrolled it might well get devirtualized, solving the perf hit.</p>



<a name="277949598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277949598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277949598">(Apr 05 2022 at 22:03)</a>:</h4>
<p>it's possible to use the existing unstable <code>call</code> function of <code>Fn</code> to uncurry, which is nice</p>



<a name="277950906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277950906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277950906">(Apr 05 2022 at 22:17)</a>:</h4>
<p>If variadic generics were to be introduced that should allow removing the rust-call call conv in which case using the call function for that would be circular.</p>



<a name="277953036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277953036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277953036">(Apr 05 2022 at 22:37)</a>:</h4>
<p>Yeah but I think it'd be more useful to look at what we have and see if we can get all the useful functionality without true variadic generics.</p>



<a name="277975418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975418">(Apr 06 2022 at 04:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/277949179">said</a>:</p>
<blockquote>
<p>Something like <code>&amp;(T1, T2, T3, ..., TN)</code> -&gt; <code>[&amp;dyn Trait; N]</code> might be a really nice primitive to experiment with.  It'd certainly work for things like <code>Debug</code>, since the derive for tuple-structs uses <code>dyn Debug</code> anyway.  And if unrolled it might well get devirtualized, solving the perf hit.</p>
</blockquote>
<p>I'd rather have that as a function people can write in a couple of lines, rather than as a primitive.</p>



<a name="277975436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975436">(Apr 06 2022 at 04:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/277950906">said</a>:</p>
<blockquote>
<p>If variadic generics were to be introduced that should allow removing the rust-call call conv in which case using the call function for that would be circular.</p>
</blockquote>
<p>rust-call and Fn is close to half of the reason I want variadic generics and variadic tuples in the first place. :)</p>



<a name="277975624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975624">(Apr 06 2022 at 04:54)</a>:</h4>
<p>an <code>&amp;(T1, T2, T3, ..., TN)</code> -&gt; <code>&amp;[dyn Trait; N]</code> API wouldnt help for bevy since what we need is to implement a trait for tuples of any length where each element implements a trait (additionally I dont think there is genreally a<code>dyn Trait</code> to even use as there are _lots_ of assoc types in our code and dyn trait requires those to be written)</p>



<a name="277975645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975645">(Apr 06 2022 at 04:55)</a>:</h4>
<p>Yep, Boxy is completely right here</p>



<a name="277975662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975662">(Apr 06 2022 at 04:56)</a>:</h4>
<p>also I think that would basically stabilize the layout of tuples?</p>



<a name="277975707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975707">(Apr 06 2022 at 04:56)</a>:</h4>
<p>ah i guess not i missed the fact that it was <code>&amp;dyn Trait</code> element type</p>



<a name="277975718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975718">(Apr 06 2022 at 04:56)</a>:</h4>
<p>(not sure why I read that as <code>&amp;[dyn Trait; N]</code> doesnt make any sense lol)</p>



<a name="277975838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277975838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277975838">(Apr 06 2022 at 04:59)</a>:</h4>
<p>in ecs-land/gamedev-land there is just a _lot_ of implementing <code>Trait</code> for <code>(T: Trait, U: Trait)</code> and setting all assoc types to <code>(T::Assoc, U::Assoc)</code> any variadics proposal that doesnt support this would largely be useless to us <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="277993529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277993529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277993529">(Apr 06 2022 at 08:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/277975418">said</a>:</p>
<blockquote>
<p>I'd rather have that as a function people can write in a couple of lines, rather than as a primitive.</p>
</blockquote>
<p>Oh, me too.  But that means figuring out ≈everything.  Whereas "hey, I just want to consume a tuple" could be unblocked much faster.  (Though your comment implies that if it were to be exposed early, it should probably look like a library function, not like a coercion or something, which I agree with.)</p>



<a name="277993763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/277993763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#277993763">(Apr 06 2022 at 08:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/277975707">said</a>:</p>
<blockquote>
<p>ah i guess not i missed the fact that it was <code>&amp;dyn Trait</code> element type</p>
</blockquote>
<p>Yeah, it's like <code>Option::as_ref</code> but for tuples and also unsizing.</p>
<p>I've so far not been convinced by any of the variadic plans that amounted to "just use tuples, and in doing so pessimize tuple layout for everyone".</p>



<a name="278259520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278259520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278259520">(Apr 08 2022 at 05:46)</a>:</h4>
<p>I don't think anything that involves pessimizing tuple layout would be good. It should be monomorphized.</p>



<a name="278351454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278351454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278351454">(Apr 08 2022 at 19:29)</a>:</h4>
<p>I'm working on preparing a collection of notes on variadics, and I'm looking for background reading to link.</p>
<p>I've already found <a href="https://github.com/rust-lang/rfcs/issues/376">https://github.com/rust-lang/rfcs/issues/376</a>: is there anything else essential I should know about?</p>



<a name="278353265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278353265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278353265">(Apr 08 2022 at 19:43)</a>:</h4>
<p>Aha: <a href="https://github.com/rust-lang/rfcs/issues/376#issuecomment-560184417">https://github.com/rust-lang/rfcs/issues/376#issuecomment-560184417</a></p>



<a name="278378856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278378856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278378856">(Apr 09 2022 at 01:02)</a>:</h4>
<p>There's also <a href="https://github.com/rust-lang/lang-team/blob/master/src/design_notes/variadic_generics_design.md">https://github.com/rust-lang/lang-team/blob/master/src/design_notes/variadic_generics_design.md</a></p>



<a name="278380623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278380623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278380623">(Apr 09 2022 at 01:43)</a>:</h4>
<p>Ah thanks: I hadn't seen that one :) It's a very nice concise summary</p>



<a name="278381877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278381877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278381877">(Apr 09 2022 at 02:10)</a>:</h4>
<p>Maybe scope creep, but I think it could be cool if whatever is used for variadics also works for things like arrays or tuples.  Like if <code>[...a, b, ...c]</code> can merge <code>a: [T; 4], b: T, c: [T; 10]</code> into one array.</p>



<a name="278381910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278381910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278381910">(Apr 09 2022 at 02:12)</a>:</h4>
<p>Yeah <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> Having looked at use cases, I actually think that sort of type manipulation is not super critical for an MVP. But it makes sense as a arbitrary tool to concatenate types IMO</p>



<a name="278381965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278381965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278381965">(Apr 09 2022 at 02:13)</a>:</h4>
<p>FYI, I'm starting to collect my very early thoughts here: <a href="https://github.com/alice-i-cecile/rust-variadics-background">https://github.com/alice-i-cecile/rust-variadics-background</a></p>
<p>Please don't share widely yet, but if y'all would like to help fill it out or make corrections I'd be happy to merge them in.</p>



<a name="278382204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382204">(Apr 09 2022 at 02:18)</a>:</h4>
<p>It's deliberately expansive: I want to get a sense of the broad landscape and chart a path, then propose a few targeted changes that we can move forward on independently</p>



<a name="278382228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382228">(Apr 09 2022 at 02:19)</a>:</h4>
<p>Yeah, definitely good to have both a long-term vision and the <code>min_variadic_generics</code> thing that can be carved out initially</p>



<a name="278382277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382277">(Apr 09 2022 at 02:20)</a>:</h4>
<p>My current thinking is that we could move forward on a <code>Tuple</code> trait pretty much immediately without controversy, and it would both be immediately useful and likely to lay the foundations for any future variadics work</p>



<a name="278382340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382340">(Apr 09 2022 at 02:22)</a>:</h4>
<p>What would you expect on the trait?  I'll note that we don't have an <code>Array</code> trait...</p>



<a name="278382426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382426">(Apr 09 2022 at 02:24)</a>:</h4>
<p>But I definitely agree that "implement traits on tuples" is the first thing that people definitely want to do with this.</p>



<a name="278382458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382458">(Apr 09 2022 at 02:25)</a>:</h4>
<p>There are a few things:</p>
<ol>
<li>LEN</li>
<li>next(), or some other form of iteration (non-trivial due to heterogenous types)</li>
<li>Eventually, the ability to specify "tuple item trait bounds". This pattern comes up again and again: you need to be able to guarantee that all types within the tuple impl some trait. It's essential to "implement traits on tuples"), but it's not easily expressible right now</li>
<li>Other convenience methods for tuple type transformation, into_ref, into_ref_mut can be added later. frunk has quite a few good candidate methods.</li>
</ol>



<a name="278382525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382525">(Apr 09 2022 at 02:27)</a>:</h4>
<p>Hmm, I wonder if this will want generic closures first.</p>



<a name="278382528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382528">(Apr 09 2022 at 02:27)</a>:</h4>
<p>Yeah? What's the connection?</p>



<a name="278382543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382543">(Apr 09 2022 at 02:28)</a>:</h4>
<p><code>&lt;(A, B) as Tuple&gt;::for_each</code> wants an argument that's <code>Fn(A) + Fn(B)</code>.</p>



<a name="278382590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382590">(Apr 09 2022 at 02:28)</a>:</h4>
<p>Ah, yeah. I was thinking that for most uses of iteration you actually want to use tuple item trait bounds.</p>
<p>Effectively, treat the item type as a dyn Trait :)</p>



<a name="278382592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382592">(Apr 09 2022 at 02:28)</a>:</h4>
<p>And the easiest way to satisfy that would be if you could pass a generic that accepted <code>impl Trait</code> for some <code>Trait</code> that both <code>A</code> and <code>B</code> implement</p>



<a name="278382755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382755">(Apr 09 2022 at 02:32)</a>:</h4>
<p>I assume people will want to be able to use them not via <code>dyn</code>, though.  Because otherwise the "convert tuple to array of dyn" is enough.</p>



<a name="278382768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382768">(Apr 09 2022 at 02:32)</a>:</h4>
<p>Yeah, dyn forces indirection right?</p>



<a name="278382786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382786">(Apr 09 2022 at 02:33)</a>:</h4>
<p>The ECS folks would be unhappy with that for example, and they're currently jumping through the hoops of fake-variadics in order to avoid ever having to go through dynamic dispatch</p>



<a name="278382803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278382803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278382803">(Apr 09 2022 at 02:33)</a>:</h4>
<p>Well, it compiles to indirection in LLVM-IR -- LLVM can often remove it again, but not always.</p>



<a name="278445145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278445145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278445145">(Apr 10 2022 at 03:17)</a>:</h4>
<p>I think you have to be pretty clear here about what behaviour you actually want to expose, for risk of accidentally introducing specialization.</p>



<a name="278445149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278445149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278445149">(Apr 10 2022 at 03:17)</a>:</h4>
<p>But I would think the MVP version of tuple iteration would just be a built-in macro</p>



<a name="278445208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278445208" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278445208">(Apr 10 2022 at 03:19)</a>:</h4>
<p>I guess that depends on exactly whether this can be implemented as an intrinsic though</p>



<a name="278445300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278445300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278445300">(Apr 10 2022 at 03:21)</a>:</h4>
<p>I do agree with a built-in tuple trait being a valuable thing, though.</p>



<a name="278445401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278445401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278445401">(Apr 10 2022 at 03:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/278382340">said</a>:</p>
<blockquote>
<p>What would you expect on the trait?  I'll note that we don't have an <code>Array</code> trait...</p>
</blockquote>
<p><code>Array</code> doesn't need a trait because you can bind generically to any array already:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">on_array</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span>: <span class="p">[</span><span class="n">T</span><span class="p">;</span><span class="n">N</span><span class="p">]);</span><span class="w"></span>
</code></pre></div>



<a name="278445424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278445424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278445424">(Apr 10 2022 at 03:25)</a>:</h4>
<p>It's actually quite interesting that std uses the "implement this trait for all tuples &lt;= 12 using macros" pattern internally. It means we could get serious users of any solution before stabilization</p>



<a name="278445597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278445597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278445597">(Apr 10 2022 at 03:30)</a>:</h4>
<p>Also if there's going to be any kind of iteration, start with fold, because it's critical for a number of use cases but subsumes most others.</p>



<a name="278451586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278451586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278451586">(Apr 10 2022 at 06:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123893">alercah</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/278445401">said</a>:</p>
<blockquote>
<p><code>Array</code> doesn't need a trait because you can bind generically to any array already:</p>
</blockquote>
<p>Sure, but that's because of const generics.  If we have variadic generics, then the same applies to tuples:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">on_tuple</span><span class="o">&lt;</span><span class="n">T</span><span class="o">..</span><span class="p">.</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span>: <span class="p">(</span><span class="o">..</span><span class="p">.</span><span class="n">T</span><span class="p">));</span><span class="w"></span>
</code></pre></div>



<a name="278451595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278451595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278451595">(Apr 10 2022 at 06:33)</a>:</h4>
<p>im not convinced we need a tuple trait because if variadics doesnt give us an easy way to be generic over all tuples then I think we have hugely failed :D</p>



<a name="278519643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278519643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278519643">(Apr 11 2022 at 08:04)</a>:</h4>
<p>Assuming variadics aren't implemented in terms of tuples, which is IMO a big assumption.</p>



<a name="278525430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278525430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278525430">(Apr 11 2022 at 09:01)</a>:</h4>
<p>While I think it is good to think of the implementation of language features in terms of lowering to more fundamental features (e.g., variadics to tuples or async methods to GATs), I think it is a mistake to think we must expose that lowering in any way to users, either by making the translation possible in user code or even exposing the underlying features. So even if internally we use tuples here, I think that doesn't mean we should have or need a tuple trait</p>



<a name="278525662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278525662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278525662">(Apr 11 2022 at 09:04)</a>:</h4>
<p>We dumped collections traits and similar things pre-1.0 and it was a great move, I think this kind of abstraction does not work well in Rust programs and I would be sad to have a tuple trait</p>



<a name="278532011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278532011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278532011">(Apr 11 2022 at 10:07)</a>:</h4>
<p>I dont see how variadics _could_ be implemented in terms of tuples</p>



<a name="278532040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278532040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278532040">(Apr 11 2022 at 10:07)</a>:</h4>
<p>how would you implement a trait for tuples of any length where all elements implement a trait?</p>



<a name="278532406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278532406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278532406">(Apr 11 2022 at 10:11)</a>:</h4>
<p>if rust had trait generics i could somehow s ee that working... <code>impl&lt;T: Tuple&lt;Trait&gt;&gt; Trait for T</code></p>



<a name="278533210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278533210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278533210">(Apr 11 2022 at 10:19)</a>:</h4>
<p>actually I guess with generic_const_exprs + <code>for&lt;N&gt; &lt;T as Tuple&gt;::Element&lt;N&gt;: Trait</code> bounds you could get it to work</p>



<a name="278582339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278582339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278582339">(Apr 11 2022 at 16:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/278532040">said</a>:</p>
<blockquote>
<p>how would you implement a trait for tuples of any length where all elements implement a trait?</p>
</blockquote>
<p>Magically, obviosuly.</p>



<a name="278582393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278582393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278582393">(Apr 11 2022 at 16:46)</a>:</h4>
<p>It depends on the trait :P</p>



<a name="278582657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278582657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278582657">(Apr 11 2022 at 16:48)</a>:</h4>
<p>more helpfully: Step 1 is to treat the tuple as an array (field 0 is index 0, field 1 is index 1, etc), step 2 depends on the trait</p>



<a name="278583077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278583077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alice Cecile <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278583077">(Apr 11 2022 at 16:51)</a>:</h4>
<p>So, suppose we wanted to do this for <code>PartialEq</code>. What would this look like?</p>



<a name="278585239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278585239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278585239">(Apr 11 2022 at 17:05)</a>:</h4>
<p>You just PartialEq for a.0 and b.0, then a.1 and b.1, etc</p>



<a name="278585249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278585249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278585249">(Apr 11 2022 at 17:05)</a>:</h4>
<p>just like how arrays do it</p>



<a name="278585341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278585341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278585341">(Apr 11 2022 at 17:06)</a>:</h4>
<p>arrays implement iterator tuples dont :P</p>



<a name="278585354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278585354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278585354">(Apr 11 2022 at 17:06)</a>:</h4>
<p>so the problem is easier there</p>



<a name="278585393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278585393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278585393">(Apr 11 2022 at 17:06)</a>:</h4>
<p>like.. doing a.0 and b.0 then a.1 and b.1 is like the thing that is not clear how to actually _do_</p>



<a name="278585551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278585551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278585551">(Apr 11 2022 at 17:07)</a>:</h4>
<p>I don't understand the concern, the compiler would generate the impl as if you'd written</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="mi">3</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="mi">3</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="c1">// magically however many are necessary</span>
<span class="kc">true</span><span class="w"></span>
</code></pre></div>



<a name="278585592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278585592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278585592">(Apr 11 2022 at 17:08)</a>:</h4>
<p>like i'm not proposing that code be written, i'm proposing that the compiler just do it internally</p>



<a name="278586042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278586042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278586042">(Apr 11 2022 at 17:11)</a>:</h4>
<p>you're saying that the impls for partialeq on tuple should be a compiler generated thing?</p>



<a name="278586052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278586052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278586052">(Apr 11 2022 at 17:11)</a>:</h4>
<p>we dont need variadics for that :P</p>



<a name="278586083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278586083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278586083">(Apr 11 2022 at 17:11)</a>:</h4>
<p>No, we don't :3</p>



<a name="278608455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278608455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278608455">(Apr 11 2022 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span>  Pardon, I'm a bit confused. How would a user implement a non-standard library trait for tuples under your model?</p>



<a name="278608614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278608614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278608614">(Apr 11 2022 at 20:02)</a>:</h4>
<p>Oh, they wouldn't be able to. That's why magical things aren't so great and should be moved away from in the long term.</p>



<a name="278648667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278648667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278648667">(Apr 12 2022 at 05:02)</a>:</h4>
<p>That's a fair point.</p>
<p>I think my personal take would be that it'd still be valuable to go that direction early on, though, with an intent never to stabilize, because I imagine the syntax and its meaning is going to be a long and arduous bikeshed here.</p>
<p>I think there's probably a lot of value out of something that works but ain't pretty to start with, to explore the space, eventually figure out whether more language support is necessary on top of that bare minimum, and then finally to paper over it all (and possibly make the implementation something more direct) at the end.</p>



<a name="278648689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278648689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278648689">(Apr 12 2022 at 05:02)</a>:</h4>
<p>Oops, I got stuck scrolled up. That was continuing what <span class="user-mention" data-user-id="256841">@Nick Cameron</span> said above.</p>



<a name="278648722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278648722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278648722">(Apr 12 2022 at 05:03)</a>:</h4>
<p>(given that this project has apparently been blessed in some capacity, should it get its own stream so we aren't cramming everything into one thread?)</p>



<a name="278649664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278649664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278649664">(Apr 12 2022 at 05:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/318377-t-lang.2Froadmap-2024/topic/Variadics/near/278582657">said</a>:</p>
<blockquote>
<p>more helpfully: Step 1 is to treat the tuple as an array (field 0 is index 0, field 1 is index 1, etc), step 2 depends on the trait</p>
</blockquote>
<p>If you do this then the element type is "dependent pair" and we don't want to go there.</p>



<a name="278650143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/318377-t-lang/roadmap-2024/topic/Variadics/near/278650143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alercah <a href="https://zulip-archive.rust-lang.org/stream/318377-t-lang/roadmap-2024/topic/Variadics.html#278650143">(Apr 12 2022 at 05:36)</a>:</h4>
<p>or at least, that's the naive way to end up... the more enlightened way would be to treat the interior type as existential. and perhaps that works.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
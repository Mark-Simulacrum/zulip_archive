<html>
<head><meta charset="utf-8"><title>seedable RNGs and risks????????? · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html">seedable RNGs and risks?????????</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272457323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457323">(Feb 18 2022 at 21:05)</a>:</h4>
<p>...can you elaborate any on "misused RNGs in tests and blessed the results"?</p>



<a name="272457327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457327">(Feb 18 2022 at 21:05)</a>:</h4>
<p>I think whatever we put into core/std should focus exclusively on the former.</p>



<a name="272457441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hickey <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457441">(Feb 18 2022 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="281757">@Jubilee</span> Folks would write change detection tests rather than verify behavior. Think "shuffle this vector and make sure the first item is the thing I expected it to be when I wrote the test"</p>



<a name="272457444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457444">(Feb 18 2022 at 21:06)</a>:</h4>
<p>I think anything seedable is a de facto guarantee of the algorithm, which makes it something that might not belong in std since if it turns out to be insecure we can't get rid of it.</p>
<p>If it's not seedable, then it's different every time, and thus we could change it to a different algorithm whenever just fine.</p>



<a name="272457534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457534">(Feb 18 2022 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="281757">@Jubilee</span> I was too slow :-( <a href="#narrow/stream/122651-general/topic/RNGs.20in.20tests.20are.20misuses">https://rust-lang.zulipchat.com/#narrow/stream/122651-general/topic/RNGs.20in.20tests.20are.20misuses</a></p>



<a name="272457602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457602">(Feb 18 2022 at 21:07)</a>:</h4>
<p>Ah, lemme reshuffle these messages...</p>



<a name="272457607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457607">(Feb 18 2022 at 21:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/219381-t-libs/topic/possible.20getrandom.20interface/near/272457444">said</a>:</p>
<blockquote>
<p>I think anything seedable is a de facto guarantee of the algorithm, which makes it something that might not belong in std since if it turns out to be insecure we can't get rid of it.</p>
<p>If it's not seedable, then it's different every time, and thus we could change it to a different algorithm whenever just fine.</p>
</blockquote>
<p>Ah, that's a valid point.</p>



<a name="272457697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hickey <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457697">(Feb 18 2022 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> agree wholeheartedly, it goes beyond just the bit generator implementation but all of the algorithms we build around them. If you promise some particular implementation people will come to rely on it and then you're committed</p>



<a name="272457759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272457759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272457759">(Feb 18 2022 at 21:09)</a>:</h4>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> Though, I can imagine a world in which we say that we can deprecate old algorithms for the unseeded case, and only keep them for the seeded case, so that people can replay old seeds.</p>



<a name="272458008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458008" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458008">(Feb 18 2022 at 21:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/219381-t-libs/topic/RNGs.20in.20tests.20are.20misuses/near/272457444">said</a>:</p>
<blockquote>
<p>I think anything seedable is a de facto guarantee of the algorithm, which makes it something that might not belong in std since if it turns out to be insecure we can't get rid of it.</p>
<p>If it's not seedable, then it's different every time, and thus we could change it to a different algorithm whenever just fine.</p>
</blockquote>
<p>We have a history of carving out behavior that we would like to be able to break in the future, is there any value to making something seedable but not guaranteeing that the specific resulting values will be stable between compiler versions?</p>



<a name="272458100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458100">(Feb 18 2022 at 21:12)</a>:</h4>
<p>we did have this problem with <code>SipHasher</code>, which is now deprecated in favor of <code>DefaultHasher</code></p>



<a name="272458226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458226">(Feb 18 2022 at 21:13)</a>:</h4>
<p>i guess if you wanted to write tests that only pass because of a specific seed then that would break if the behavior changed. Is the topic of this thread insinuating that such tests are fundamentally a misuse of rng APIs?</p>



<a name="272458313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hickey <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458313">(Feb 18 2022 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby [she/her]</span> it's very handy when debugging and doesn't commit you to a long term stability guarantee</p>



<a name="272458317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458317">(Feb 18 2022 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> I can't actually seem to move this into #general sadly.</p>



<a name="272458377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458377">(Feb 18 2022 at 21:14)</a>:</h4>
<p>I think it depends on what the API is called.</p>
<p>If you're getting things from something called <code>Shake256</code>, say, then it's fine because the name says that you can't change the API anyway.</p>
<p>If it's called <code>std::randomess::SeedableSource</code>, then it's a misuse.</p>



<a name="272458392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458392">(Feb 18 2022 at 21:15)</a>:</h4>
<p>if so we could not just reserve the right to change the behavior between compiler versions, but intentionally change the rng seed salt(?) on every compiler versino</p>



<a name="272458405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458405">(Feb 18 2022 at 21:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby [she/her]</span> <a href="#narrow/stream/219381-t-libs/topic/RNGs.20in.20tests.20are.20misuses.3F/near/272458226">said</a>:</p>
<blockquote>
<p>i guess if you wanted to write tests that only pass because of a specific seed then that would break if the behavior changed. Is the topic of this thread insinuating that such tests are fundamentally a misuse of rng APIs?</p>
</blockquote>
<p>I added a question mark because it was about questioning that statement. ^^;</p>



<a name="272458445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458445">(Feb 18 2022 at 21:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby [she/her]</span> <a href="#narrow/stream/219381-t-libs/topic/RNGs.20in.20tests.20are.20misuses.3F/near/272458392">said</a>:</p>
<blockquote>
<p>if so we could not just reserve the right to change the behavior between compiler versions, but intentionally change the rng seed salt(?) on every compiler versino</p>
</blockquote>
<p>We could, but also, that'd break most of the reason to be seedable.</p>



<a name="272458581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458581">(Feb 18 2022 at 21:16)</a>:</h4>
<p>Also, I feel like there's a whole discussion here about seeding and algorithmic stability that doesn't go under "seedable RNGs in tests".</p>



<a name="272458738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458738">(Feb 18 2022 at 21:18)</a>:</h4>
<p>/me adds more question marks to the topic.</p>



<a name="272458763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458763">(Feb 18 2022 at 21:18)</a>:</h4>
<p>(that works :) )</p>



<a name="272458797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458797">(Feb 18 2022 at 21:18)</a>:</h4>
<p>seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F</p>



<a name="272458835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458835">(Feb 18 2022 at 21:19)</a>:</h4>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> One common use case for seedable RNGs is replayability. For instance, you have some randomly seeded search process and want to reproduce the result. Or you have a game that saves replays, and it has random elements so you also save the seed.</p>



<a name="272458845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hickey <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458845">(Feb 18 2022 at 21:19)</a>:</h4>
<p>Most people aren't dealing with an environment where refactoring some minor RNG library will break 20,000 targets. Still, I'm glad y'all are considering the downsides of allowing seedability and what it implies for reproducibility</p>



<a name="272458876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458876">(Feb 18 2022 at 21:19)</a>:</h4>
<p>If the algorithm changes, or if the seed changes on every compiler version, that defeats all those use cases.</p>



<a name="272458897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272458897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272458897">(Feb 18 2022 at 21:19)</a>:</h4>
<p>At which point, I don't think the seedable interface carries enough remaining weight of use cases to provide or stabilize.</p>



<a name="272459021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459021">(Feb 18 2022 at 21:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272458445">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby [she/her]</span> <a href="#narrow/stream/219381-t-libs/topic/RNGs.20in.20tests.20are.20misuses.3F/near/272458392">said</a>:</p>
<blockquote>
<p>if so we could not just reserve the right to change the behavior between compiler versions, but intentionally change the rng seed salt(?) on every compiler versino</p>
</blockquote>
<p>We could, but also, that'd break most of the reason to be seedable.</p>
</blockquote>
<p>If it's in core it can't seed itself. Someone has to provide entropy. That's separate from being seedable for reproducibility reasons.</p>



<a name="272459065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459065">(Feb 18 2022 at 21:21)</a>:</h4>
<p>Perhaps most cases would be better served by accepting <code>R: Rng</code> and then using <code>fn test_rng() -&gt; impl Rng { 4 }</code></p>



<a name="272459081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459081">(Feb 18 2022 at 21:21)</a>:</h4>
<p>x86 apparently has the RDRAND instruction.</p>



<a name="272459094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459094">(Feb 18 2022 at 21:21)</a>:</h4>
<p><span class="user-mention" data-user-id="281757">@Jubilee</span> And rdseed.</p>



<a name="272459141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459141">(Feb 18 2022 at 21:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116155">Jake Goulding</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272459065">said</a>:</p>
<blockquote>
<p>Perhaps most cases would be better served by accepting <code>R: Rng</code> and then using <code>fn test_rng() -&gt; impl Rng { 4 }</code></p>
</blockquote>
<p>randomly selected via libs team FCP</p>



<a name="272459152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459152">(Feb 18 2022 at 21:22)</a>:</h4>
<p>no idea if that's acceptable.</p>



<a name="272459156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459156">(Feb 18 2022 at 21:22)</a>:</h4>
<p><span class="user-mention" data-user-id="330154">@The 8472</span> Agreed, but there's nothing requiring us to make the components available rather than the seeded RNG interface, if the seedable component doesn't carry enough weight.</p>



<a name="272459197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459197">(Feb 18 2022 at 21:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272459152">said</a>:</p>
<blockquote>
<p>no idea if that's acceptable.</p>
</blockquote>
<p>It's absolutely a viable interface for reading random bytes, though if not available we'd still want to fall back to <code>getrandom</code>.</p>



<a name="272459233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459233" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hickey <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459233">(Feb 18 2022 at 21:22)</a>:</h4>
<p>I still don't trust RDRAND, but I think that ship sailed years ago.</p>



<a name="272459271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272459271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272459271">(Feb 18 2022 at 21:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="463851">Brendan Hickey</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272459233">said</a>:</p>
<blockquote>
<p>I still don't trust RDRAND, but I think that ship sailed years ago.</p>
</blockquote>
<p>I'm very much on the ship of "if you don't trust your hardware then RDRAND/RDSEED is the <em>least</em> of your concerns".</p>



<a name="272460079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272460079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272460079">(Feb 18 2022 at 21:30)</a>:</h4>
<p>There are reasons to not trust it other than malicious vendors. E.g. there was that AMD bug.</p>



<a name="272460131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272460131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272460131">(Feb 18 2022 at 21:30)</a>:</h4>
<p>The linux kernel doesn't trust it either unless you opt-in afaik.</p>



<a name="272460300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272460300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272460300">(Feb 18 2022 at 21:32)</a>:</h4>
<p>True, but distros turn that flag on.</p>



<a name="272460617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272460617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272460617">(Feb 18 2022 at 21:35)</a>:</h4>
<p>#notalldistros<br>
<a href="https://github.com/archlinux/svntogit-packages/blob/911bc6d5451dea81cf8aa6a5f170188e330b4406/trunk/config#L4429">https://github.com/archlinux/svntogit-packages/blob/911bc6d5451dea81cf8aa6a5f170188e330b4406/trunk/config#L4429</a></p>



<a name="272460869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272460869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272460869">(Feb 18 2022 at 21:37)</a>:</h4>
<p><a href="https://www.theregister.com/2013/12/09/freebsd_abandoning_hardware_randomness/">https://www.theregister.com/2013/12/09/freebsd_abandoning_hardware_randomness/</a></p>



<a name="272461154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272461154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272461154">(Feb 18 2022 at 21:40)</a>:</h4>
<p>Well RDRAND is still used as one way among several to seed the pool that feeds the CSPRNG. It's just not used for entropy accounting purposes or passed through raw.</p>



<a name="272461224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272461224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272461224">(Feb 18 2022 at 21:41)</a>:</h4>
<p>Yes, it seems so.</p>



<a name="272461258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272461258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272461258">(Feb 18 2022 at 21:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272458835">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> One common use case for seedable RNGs is replayability. For instance, you have some randomly seeded search process and want to reproduce the result. Or you have a game that saves replays, and it has random elements so you also save the seed.</p>
</blockquote>
<p>Oh, yes, I fully agree that replayability is useful.  But scenarios like that also make the "change a salt every release" from <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272458392">https://rust-lang.zulipchat.com/#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272458392</a> not acceptable either.</p>
<p>When their very nature is "this algorithm must remain around unchanged forever", I'm not convinced we can reasonably pick <em>exactly one</em> of those for <code>std</code>, and accepting multiple isn't good either.  A crate that just does exactly that, with very precise pinning tests, seems like a great solution for it.</p>
<p>And then people can use the maybe-slow OS's CS-XOF we expose in std to pick the seed to start that process per simulation or match or whatever.</p>



<a name="272461579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272461579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272461579">(Feb 18 2022 at 21:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272461154">said</a>:</p>
<blockquote>
<p>Well RDRAND is still used as one way among several to seed the pool that feeds the CSPRNG. It's just not used for entropy accounting purposes or passed through raw.</p>
</blockquote>
<p>Which, now that hardware randomness is used differently and fed in as an input, I'm wondering if the config option to disable it is still needed.</p>



<a name="272461684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272461684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272461684">(Feb 18 2022 at 21:45)</a>:</h4>
<p>Doesn't linux do the same as freebsd?</p>



<a name="272461868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272461868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272461868">(Feb 18 2022 at 21:47)</a>:</h4>
<p>I mean, doesn't the flag only affect the accounting, not the use?</p>



<a name="272462259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272462259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272462259">(Feb 18 2022 at 21:50)</a>:</h4>
<p>Ah, I see. Yeah, I can imagine that people might still treat it as a point of desired configuration whether Linux considers the output of <code>rdseed</code> sufficient to call the CSPRNG seeded.</p>



<a name="272462466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272462466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272462466">(Feb 18 2022 at 21:52)</a>:</h4>
<p>Using it as sole source is iffy since it's inauditable, that's why the flag exists.</p>



<a name="272462559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272462559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272462559">(Feb 18 2022 at 21:53)</a>:</h4>
<p>It was <em>more</em> iffy when it was applied "after" the entropy pool, rather than as an input to it.</p>



<a name="272462675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272462675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272462675">(Feb 18 2022 at 21:54)</a>:</h4>
<p>Previously, the output of the RNG was just non-cryptographically combined (XOR I think) with the output of RDRAND, which was neither necessary nor desirable.</p>



<a name="272462692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272462692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272462692">(Feb 18 2022 at 21:54)</a>:</h4>
<p>Now, it's just one more input to the pool.</p>



<a name="272462763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272462763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272462763">(Feb 18 2022 at 21:55)</a>:</h4>
<p>Yeah, but... the AMD bug. Also, is it an interceptable instruction for virtualization?</p>



<a name="272463113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272463113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272463113">(Feb 18 2022 at 21:57)</a>:</h4>
<p>Anyway, we were talking about using it as entropy source in userspace, I think? That would suffer from all the problems.</p>



<a name="272463249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272463249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272463249">(Feb 18 2022 at 21:58)</a>:</h4>
<p>If it's just an input to the entropy pool then bugs don't matter. It could output anything and it wouldn't make things less secure then if it didn't exist at all. After all, if the pool is vulnerable to non-random input then it's broken.</p>



<a name="272463363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272463363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272463363">(Feb 18 2022 at 21:59)</a>:</h4>
<p>It still matters of entropy accounting. If you trust every bit from it then the pool may become fully initialized from the instruction alone.</p>



<a name="272463694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272463694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272463694">(Feb 18 2022 at 22:01)</a>:</h4>
<p>e.g. the AMD bug did output all zeroes. Which means in the worst case you'd initialize the pool to the same value every time.</p>



<a name="272464047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272464047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272464047">(Feb 18 2022 at 22:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272461258">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272458835">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> One common use case for seedable RNGs is replayability. For instance, you have some randomly seeded search process and want to reproduce the result. Or you have a game that saves replays, and it has random elements so you also save the seed.</p>
</blockquote>
<p>Oh, yes, I fully agree that replayability is useful.  But scenarios like that also make the "change a salt every release" from <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272458392">https://rust-lang.zulipchat.com/#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272458392</a> not acceptable either.</p>
<p>When their very nature is "this algorithm must remain around unchanged forever", I'm not convinced we can reasonably pick <em>exactly one</em> of those for <code>std</code>, and accepting multiple isn't good either.  A crate that just does exactly that, with very precise pinning tests, seems like a great solution for it.</p>
<p>And then people can use the maybe-slow OS's CS-XOF we expose in std to pick the seed to start that process per simulation or match or whatever.</p>
</blockquote>
<p>this leads strongly back into the other discussion we've been having around the <code>mpsc</code> PR about improving discoverability of 3rd party crates / making official libs team crate recommendations</p>



<a name="272464087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272464087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272464087">(Feb 18 2022 at 22:04)</a>:</h4>
<p>gonna add a note to the 2022 roadmap scratch doc</p>



<a name="272464120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272464120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lyinch <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272464120">(Feb 18 2022 at 22:05)</a>:</h4>
<p>we would only consider the hardware primitives for <code>no_std</code>, right? I don't see a reason to move away from entropy provided by the kernel</p>



<a name="272464904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272464904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272464904">(Feb 18 2022 at 22:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272463694">said</a>:</p>
<blockquote>
<p>e.g. the AMD bug did output all zeroes. Which means in the worst case you'd initialize the pool to the same value every time.</p>
</blockquote>
<p>Sure, if the pool is reliant on a single source of entropy. IIRC Linux includes CPU jitter which is better than nothing even if other sources are non-random.</p>



<a name="272464910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272464910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272464910">(Feb 18 2022 at 22:12)</a>:</h4>
<p>We don't have a mechanism for "use A in no_std crates, use B if we have an OS".</p>



<a name="272465207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272465207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272465207">(Feb 18 2022 at 22:15)</a>:</h4>
<p><span class="user-mention" data-user-id="260325">@Chris Denton</span> my understanding is that scheduler noise gets fed in eventually, but during early boot and with TRUST_CPU there could be a window where the pool is solely initialized from the instructions. And userspace doesn't have that luxury anyway.</p>



<a name="272467122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272467122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272467122">(Feb 18 2022 at 22:30)</a>:</h4>
<blockquote>
<p>We don't have a mechanism for "use A in no_std crates, use B if we have an OS".</p>
</blockquote>
<p>Isn't this exactly what <code>cfg</code> does?</p>



<a name="272467201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272467201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272467201">(Feb 18 2022 at 22:31)</a>:</h4>
<p>If you add an extra feature to that crate and opt-in. But someone might just use the no_std crate as-is.</p>



<a name="272467300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272467300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272467300">(Feb 18 2022 at 22:32)</a>:</h4>
<p>Wouldn't one cfg based on the target?</p>



<a name="272467930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272467930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272467930">(Feb 18 2022 at 22:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F/near/272464910">said</a>:</p>
<blockquote>
<p>We don't have a mechanism for "use A in no_std crates, use B if we have an OS".</p>
</blockquote>
<p>You can define it in core, then use symbol shenanighans to override it in std.</p>



<a name="272467978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272467978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272467978">(Feb 18 2022 at 22:38)</a>:</h4>
<p>I may have lost track of the discussion. If we wanted something in <code>core</code> (at least for x86/arm) then we woldn't have a mechanism to replace the RDRAND use in core with a syscall when you're using std.<br>
If it's a no_std crate on crates IO then it'd have to pull in libc on those platforms.</p>



<a name="272468052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272468052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272468052">(Feb 18 2022 at 22:39)</a>:</h4>
<p>Yeah, I don't think we have anything doing the symbol stuff so far, do we? There was some discussion about pluggable existential traits or something in the libs wishlist for lang that might do it.</p>



<a name="272468125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272468125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272468125">(Feb 18 2022 at 22:40)</a>:</h4>
<blockquote>
<p>Existential types with external definitions</p>
</blockquote>



<a name="272468766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272468766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272468766">(Feb 18 2022 at 22:46)</a>:</h4>
<p>we have lang items, but those are a brutal hack.</p>



<a name="272470661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272470661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272470661">(Feb 18 2022 at 23:06)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span> People use the same target for std and no_std code. With the benefit of hindsight, that may not have been the right approach.</p>



<a name="272470752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272470752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272470752">(Feb 18 2022 at 23:06)</a>:</h4>
<p>I'm hopeful that targets like x86_64-unknown-none will help with that differentiation.</p>



<a name="272470987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272470987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272470987">(Feb 18 2022 at 23:08)</a>:</h4>
<p>really this sounds like that thing you talked about in the interview the other day, that there be some sort of "i will need this" thing a lib does, and then the top level bin will provide it "somehow" but the lib using it doesn't know or care how</p>



<a name="272471058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272471058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272471058">(Feb 18 2022 at 23:09)</a>:</h4>
<p>And you need an impl but also want a default impl if possible.</p>



<a name="272471065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272471065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272471065">(Feb 18 2022 at 23:09)</a>:</h4>
<p>Yeah.</p>



<a name="272471167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272471167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272471167">(Feb 18 2022 at 23:10)</a>:</h4>
<p>Rolling std and core into one crate and using build-std by default would also solve the problem since then we could use cfg flags.</p>



<a name="272471456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272471456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272471456">(Feb 18 2022 at 23:12)</a>:</h4>
<p>build-std can't be used by non-cargo build systems.</p>



<a name="272472090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272472090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272472090">(Feb 18 2022 at 23:18)</a>:</h4>
<p>Whatever mechanism it invokes certainly could be; stable cargo features don't use unstable rustc features.</p>



<a name="272472286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272472286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272472286">(Feb 18 2022 at 23:20)</a>:</h4>
<p>Well, the question is whether building the standard library is available to $BUILD_SYSTEM without specific knowledge (other than trampolining into cargo, which adds deps and is <em>fun</em>)</p>



<a name="272473047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272473047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272473047">(Feb 18 2022 at 23:29)</a>:</h4>
<p>Any system that wants to do the same thing cargo is doing either needs to call cargo (ideally) or duplicate what cargo is doing. But in general it should be <em>possible</em>, whether or not it's convenient.</p>



<a name="272473085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272473085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272473085">(Feb 18 2022 at 23:29)</a>:</h4>
<p>In general, we don't treat "easy and comfortable to do without cargo" as a design criteria.</p>



<a name="272473605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272473605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272473605">(Feb 18 2022 at 23:35)</a>:</h4>
<p>Yeah, I can just make all my --enable-build-std do the cargo trampoline <del>except on lccc <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span> where it can $libsrcdir/configure</del> (getting off topic, though).</p>



<a name="272500758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272500758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272500758">(Feb 19 2022 at 07:35)</a>:</h4>
<p>I don't think <code>-Zbuild-std</code> will work in the near to intermediate future without having cargo enable nightly features of rustc and having to adopt to changes in rustc every once in a while.</p>



<a name="272501300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/seedable%20RNGs%20and%20risks%3F%3F%3F%3F%3F%3F%3F%3F%3F/near/272501300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/seedable.20RNGs.20and.20risks.3F.3F.3F.3F.3F.3F.3F.3F.3F.html#272501300">(Feb 19 2022 at 07:47)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> That's one major reason it'll be hard to stabilize in Cargo, because as long as it uses nightly rustc features it'll need to stay a nightly cargo feature.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
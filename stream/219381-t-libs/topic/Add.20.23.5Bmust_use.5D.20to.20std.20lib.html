<html>
<head><meta charset="utf-8"><title>Add #[must_use] to std lib · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Add.20.23.5Bmust_use.5D.20to.20std.20lib.html">Add #[must_use] to std lib</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="257145154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Add%20%23%5Bmust_use%5D%20to%20std%20lib/near/257145154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Add.20.23.5Bmust_use.5D.20to.20std.20lib.html#257145154">(Oct 12 2021 at 03:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="449326">John Kugelman</span> <a href="#narrow/stream/219381-t-libs/topic/.E2.9C.94.20Add.20.23.5Bmust_use.5D.20to.20str.20methods/near/256509106">said</a>:</p>
<blockquote>
<p>I've been looking through and there's a lot of gray area, I can already see it getting muddy</p>
</blockquote>
<p>Might as well start with a PR for the obvious ones; can always do more PRs later.</p>
<p>Like maybe start with the ones where the message can point to an in-place method for if that's what they wanted -- like <code>.to_ascii_lowercase()</code> could point them to <code>.make_ascii_lowercase()</code>.</p>



<a name="257145346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Add%20%23%5Bmust_use%5D%20to%20std%20lib/near/257145346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Add.20.23.5Bmust_use.5D.20to.20std.20lib.html#257145346">(Oct 12 2021 at 03:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span> <a href="#narrow/stream/219381-t-libs/topic/.E2.9C.94.20Add.20.23.5Bmust_use.5D.20to.20str.20methods/near/256511050">said</a>:</p>
<blockquote>
<p>I wonder if we can have the compiler mark all const fns that have no mutable/interior mutable args as <code>#[must_use]</code> automatically.</p>
</blockquote>
<p>We have <a href="https://doc.rust-lang.org/rustc/lints/listing/allowed-by-default.html#unused-results">https://doc.rust-lang.org/rustc/lints/listing/allowed-by-default.html#unused-results</a> ; it'd be great for someone to start on a copy of that which would slowly get smarter to not have so many false positives, to the point where it could potentially be on-by-default one day, and thus not need <code>must_use</code> on everything.</p>



<a name="257296377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Add%20%23%5Bmust_use%5D%20to%20std%20lib/near/257296377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Add.20.23.5Bmust_use.5D.20to.20std.20lib.html#257296377">(Oct 13 2021 at 01:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="449326">John Kugelman</span> has marked this topic as unresolved.</p>



<a name="257296402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Add%20%23%5Bmust_use%5D%20to%20std%20lib/near/257296402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Kugelman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Add.20.23.5Bmust_use.5D.20to.20std.20lib.html#257296402">(Oct 13 2021 at 01:25)</a>:</h4>
<p>MCP: <a href="https://github.com/rust-lang/libs-team/issues/35">https://github.com/rust-lang/libs-team/issues/35</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
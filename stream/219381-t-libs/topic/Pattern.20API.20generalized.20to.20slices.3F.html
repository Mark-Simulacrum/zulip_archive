<html>
<head><meta charset="utf-8"><title>Pattern API generalized to slices? · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Pattern.20API.20generalized.20to.20slices.3F.html">Pattern API generalized to slices?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261113348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Pattern%20API%20generalized%20to%20slices%3F/near/261113348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> orlp <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Pattern.20API.20generalized.20to.20slices.3F.html#261113348">(Nov 11 2021 at 10:02)</a>:</h4>
<p>I am aware that there used to be an RFC that would have included this change, but got retracted: <a href="https://github.com/rust-lang/rust/pull/76901#issuecomment-880169952">https://github.com/rust-lang/rust/pull/76901#issuecomment-880169952</a></p>
<p>I understand not wanting to expand the Pattern API to beyond what it is now, and sealing the trait. But I also see no reason to limit this trait to just <code>&amp;str</code> instead of any <code>&amp;[T]</code>. The lack of a simple efficient substring search for slices really hurts the standard library IMO. Are there any plans for generalizing the <code>Pattern</code> trait to any slice and moving the <code>find</code> method to slice rather than on <code>str</code>?</p>



<a name="261124328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Pattern%20API%20generalized%20to%20slices%3F/near/261124328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Pattern.20API.20generalized.20to.20slices.3F.html#261124328">(Nov 11 2021 at 12:01)</a>:</h4>
<p><span class="user-mention" data-user-id="393382">@orlp</span> Last time we discussed Pattern, nobody had any objections to adding more instances in the standard library, just to stabilizing it.</p>



<a name="261124405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Pattern%20API%20generalized%20to%20slices%3F/near/261124405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Pattern.20API.20generalized.20to.20slices.3F.html#261124405">(Nov 11 2021 at 12:02)</a>:</h4>
<p>That said, I don't know how invasive it would be to rework it to support slices, or if that could be done compatibly (if it would affect the set of existing instances), or if it needs one trait or two.</p>



<a name="261135390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Pattern%20API%20generalized%20to%20slices%3F/near/261135390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Pattern.20API.20generalized.20to.20slices.3F.html#261135390">(Nov 11 2021 at 13:44)</a>:</h4>
<p>Trait implementations are insta-stable.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
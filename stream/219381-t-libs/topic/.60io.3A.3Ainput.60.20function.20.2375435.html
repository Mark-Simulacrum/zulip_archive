<html>
<head><meta charset="utf-8"><title>`io::input` function #75435 · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html">`io::input` function #75435</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="209861507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/209861507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#209861507">(Sep 12 2020 at 03:08)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/75435">#75435</a> is S-waiting-on-team, so i created a topic here.</p>



<a name="209913347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/209913347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pickfire <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#209913347">(Sep 13 2020 at 04:34)</a>:</h4>
<p>The libs team is still sorta checking out the design space.</p>



<a name="209920181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/209920181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#209920181">(Sep 13 2020 at 08:23)</a>:</h4>
<p>Personally i feel it is more "smooth" if there's a set of stable <code>term</code> api, and this one part of it.</p>



<a name="209924281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/209924281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pickfire <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#209924281">(Sep 13 2020 at 10:31)</a>:</h4>
<p>But I think that is a lot more.</p>



<a name="209932750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/209932750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#209932750">(Sep 13 2020 at 13:56)</a>:</h4>
<p>I feel that we probably need a full RFC for this.</p>



<a name="209932766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/209932766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#209932766">(Sep 13 2020 at 13:56)</a>:</h4>
<p>Possibly with an internals post first to flesh out the design possibilities.</p>



<a name="209932783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/209932783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#209932783">(Sep 13 2020 at 13:57)</a>:</h4>
<p>I think that we probably want some sort of API like this, but we're just stuck on the API design.</p>



<a name="210088621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210088621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tinaun <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210088621">(Sep 15 2020 at 04:05)</a>:</h4>
<p>I don't want io::input to be a part of a larger api, i want it to be a quick and easy function useful for small programs and learning rust, much like the differences between an external logging crate and the dbg! macro</p>



<a name="210088767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210088767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tinaun <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210088767">(Sep 15 2020 at 04:08)</a>:</h4>
<p>its easy to get caught up in the search for a perfect api and prevent useful but not 100% needs-suiting for all use cases api's from landing</p>



<a name="210088931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210088931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210088931">(Sep 15 2020 at 04:13)</a>:</h4>
<p>Yeah, even if a full input system is made, we still <em>also</em> need this "useful default" system</p>



<a name="210094200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210094200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210094200">(Sep 15 2020 at 06:26)</a>:</h4>
<p><span class="user-mention" data-user-id="119491">@tinaun</span> If we're going to have the "quick and simple but doesn't cover all use cases" system, that's fine, but then I don't think we should give it a name like <code>input</code>.</p>



<a name="210094289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210094289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210094289">(Sep 15 2020 at 06:28)</a>:</h4>
<p>Having functions like <code>std::io::input_one_line()</code> seems preferable to just <code>input()</code>.</p>



<a name="210094306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210094306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210094306">(Sep 15 2020 at 06:29)</a>:</h4>
<p>Or, if you want it to include prompting, then <code>std::io::prompt()</code>.</p>



<a name="210094318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210094318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210094318">(Sep 15 2020 at 06:29)</a>:</h4>
<p>(And perhaps one day <code>std::io::prompt()</code> will incorporate line-editing.)</p>



<a name="210094687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210094687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tinaun <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210094687">(Sep 15 2020 at 06:37)</a>:</h4>
<p>yes i can agree with that - but i think any question besides</p>
<ul>
<li>what should we name this function?</li>
<li>should there be two functions, with one taking a prompt? (or even a readln!() macro so we can have optional arguments??)</li>
</ul>
<p>is out of scope for the pr as it stands</p>



<a name="210120950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210120950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210120950">(Sep 15 2020 at 12:21)</a>:</h4>
<p>Yes, this could be a macro_rules! macro if people want a Pythonesque "one simple function to emit text and then await input" so that it can have a variadic arg count, I don't like printing zero text being <code>""</code> for the reasons that pickfire mentioned. There's probably a disadvantage to making it a macro, though.</p>



<a name="210122878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210122878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210122878">(Sep 15 2020 at 12:38)</a>:</h4>
<p>I think it's indeed convenient to have a <code>std::io::Stdin::read_trimmed_line</code> or <code>std::io::Stdin::with_trimmed_line</code>(this might save one memory allocation comparing to the previous one).</p>
<p>For <code>prompt</code> i feel it's a more chatty API... It doesn't really make sense unless there's a terminal... (For example, when <code>#[windows_subsystem = "windows"]</code>) That's why i feel it's better if  it is added as a <code>term::prompt</code> or <code>std::term::prompt</code> unstable API.</p>



<a name="210124530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210124530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210124530">(Sep 15 2020 at 12:54)</a>:</h4>
<p><del>Is the FromStr version in the PR now a minimum allocation version?</del><br>
Wait, no, it won't be in the case where you want to do something that isn't just FromStr parsing it.</p>



<a name="210219336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210219336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pickfire <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210219336">(Sep 16 2020 at 03:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116458">@Charles Lew</span> That is still good, helper function suggested here I think is also an option but I don't quite agree on mixing <code>FromStr</code> for this. <code>parse</code> is simple enough and we don't need to specify type if we split it.</p>



<a name="210674215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210674215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210674215">(Sep 20 2020 at 16:38)</a>:</h4>
<p>Wrote a fairly long reply on GitHub <a href="https://github.com/rust-lang/rust/pull/75435#issuecomment-695805123">https://github.com/rust-lang/rust/pull/75435#issuecomment-695805123</a> — hope it's not too much 😅</p>



<a name="210674676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210674676" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210674676">(Sep 20 2020 at 16:50)</a>:</h4>
<p>Thanks a bunch! While I'm not fully convinced that that's the API we want, it feels like a good reasoning. And I like it more than the current proposed change. I think I agree that the prompt part is not really useful.</p>



<a name="210674742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210674742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210674742">(Sep 20 2020 at 16:52)</a>:</h4>
<p>Since the original PR first popped up, I considered writing an RFC. But I haven't gotten around to it, because, you know, time. <span class="user-mention" data-user-id="211722">@Yoshua Wuyts</span> Would you be interested in helping out with/co-author the RFC? Especially your <code>read_to_string</code> prior art section should be included in the RFC.</p>



<a name="210674918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210674918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210674918">(Sep 20 2020 at 16:57)</a>:</h4>
<p>Haha, I'm procrastinating on other work — probably shouldn't commit to writing an RFC 😅</p>



<a name="210674994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210674994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210674994">(Sep 20 2020 at 16:59)</a>:</h4>
<p>Makes sense :P But if I get to it, I will ping you, in case you wanna proof read or so :)</p>



<a name="210675092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60io%3A%3Ainput%60%20function%20%2375435/near/210675092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60io.3A.3Ainput.60.20function.20.2375435.html#210675092">(Sep 20 2020 at 17:01)</a>:</h4>
<p>Please do; would be happy to!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
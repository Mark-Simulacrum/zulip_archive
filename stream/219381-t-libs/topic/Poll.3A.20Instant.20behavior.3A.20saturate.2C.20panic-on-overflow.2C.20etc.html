<html>
<head><meta charset="utf-8"><title>Poll: Instant behavior: saturate, panic-on-overflow, etc · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html">Poll: Instant behavior: saturate, panic-on-overflow, etc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265071760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265071760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265071760">(Dec 15 2021 at 20:36)</a>:</h4>
<p>This thread is related to <a href="https://github.com/rust-lang/rust/pull/89926">https://github.com/rust-lang/rust/pull/89926</a> .</p>



<a name="265075237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265075237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265075237">(Dec 15 2021 at 21:08)</a>:</h4>
<p>/poll How should <code>Instant::duration_since</code> and <code>-</code> on <code>Instant</code>s behave when time appears to go backwards or people pass the <code>Instant</code> arguments in the wrong order?<br>
Always saturate and return 0 if the "later" time is earlier than the "earlier" time.<br>
Panic if overflow checks are enabled (so by default, saturate in release, panic in debug).<br>
Add new codegen flag for this analogous to overflow, saturate in release, enable this flag for panics in debug.<br>
Add new codegen flag for this analogous to overflow, saturate in all profiles by default, only panic if people opt-in</p>



<a name="265075313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265075313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265075313">(Dec 15 2021 at 21:09)</a>:</h4>
<p>/poll Which options would you object to?<br>
Always saturate and return 0 if the "later" time is earlier than the "earlier" time.<br>
Panic if overflow checks are enabled (so by default, saturate in release, panic in debug).<br>
Add new codegen flag for this analogous to overflow, saturate in release, enable this flag for panics in debug.<br>
Add new codegen flag for this analogous to overflow, saturate in all profiles by default, only panic if people opt-in</p>



<a name="265075339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265075339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265075339">(Dec 15 2021 at 21:09)</a>:</h4>
<p>cc <span class="user-group-mention" data-user-group-id="4493">@T-libs</span> <span class="user-group-mention" data-user-group-id="2645">@T-libs-api</span></p>



<a name="265075536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265075536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265075536">(Dec 15 2021 at 21:11)</a>:</h4>
<p>(did you want non-libs participation, e.g., me?) I think there was discussion indicating no in the meeting, but not sure)</p>



<a name="265075680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265075680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265075680">(Dec 15 2021 at 21:12)</a>:</h4>
<p>The votes aren't secret, so they could be tallied for just libs members if needed.</p>



<a name="265075928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265075928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265075928">(Dec 15 2021 at 21:15)</a>:</h4>
<p><span class="user-mention" data-user-id="330154">@The 8472</span> Can you please clarify your objection to the "add new codegen flag" option, and why you object to that one but not the other options that can panic? I think I didn't understand your objection in the meeting, and I'd like to.</p>



<a name="265076186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265076186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265076186">(Dec 15 2021 at 21:17)</a>:</h4>
<p>I generally object to the codegen flags because I think the added complexity to the compiler is not worth it for such a niche issue.</p>



<a name="265076531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265076531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265076531">(Dec 15 2021 at 21:20)</a>:</h4>
<p>Well, specifically for the flag that's always disabled doesn't help anyone. The panic is mostly meant to catch misuse and people wouldn't even know that it's something they could turn on for tests. Panic on clocks going backwards... I don't think anyone has  ever asked for it, although I can imagine some highly paranoid use-cases that might want, hypothetically... but still not really a good motivator considering you don't have control about the current situation either.</p>
<p>And it's also a very specific flag that I don't think it's worth it on its own. This panic <em>should</em> just be another debug_assert. So if there is compiler-work being done then it should be getting debug asserts to work generally, not for this one case.</p>



<a name="265078618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265078618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265078618">(Dec 15 2021 at 21:37)</a>:</h4>
<p>imo Instant should be deprecated, functionally.</p>



<a name="265078737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265078737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265078737">(Dec 15 2021 at 21:38)</a>:</h4>
<p>Discussing adding epicycles to Instant's behavior via compiler flags, et cetera, is a good sign that it's just not the right type.</p>



<a name="265079890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265079890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265079890">(Dec 15 2021 at 21:45)</a>:</h4>
<p>That, or we carve it down to a deeply reduced subset of Meaning of what it currently is, and carve out the competing usecases into a new type.<br>
Duration is probably OK. It's a little oddball but eh.<br>
I realize this is proposing a lot of churn, and I have definitely accepted that certain things in Rust cannot be fixed because fixing them is seen as not-so-important and would require a v2 of the lang, basically, or at least of std, but getting time right is Slightly Important, and we should aim to have a correct, solid-for-at-least-another-69-years API by <em>checks notes</em> 2038 January 19.</p>



<a name="265080785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265080785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265080785">(Dec 15 2021 at 21:51)</a>:</h4>
<p>The obviously <em>correct</em> solution is to make time going backwards an <code>unreachable_unchecked()</code>, after all OS APIs guarantee it therefore it cannot happen.</p>



<a name="265080965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265080965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265080965">(Dec 15 2021 at 21:52)</a>:</h4>
<p>I stand corrected. By "correct" I seem to have meant "resilient".</p>



<a name="265085605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265085605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265085605">(Dec 15 2021 at 22:31)</a>:</h4>
<p>The main use I have for <code>Instant</code> is something like, "I want to make sure <em>at least</em> X long of a pause happens before the next loop, so I do an <code>Instant</code> for the before-work and after-work points of a loop and then sleep the difference if there's spare time."<br>
So in that sort of a context, I don't care about equality or whatever, I just need to know how long to call <code>sleep</code> for.<br>
That's why I <em>suspect</em> that "just saturate the value" is fine.</p>
<p>But really, in rust 3.0 let's have Duration just use a signed value already and dispense with this entire pile of fiddly nonsense.</p>



<a name="265087914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265087914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265087914">(Dec 15 2021 at 22:55)</a>:</h4>
<p>Why even was Duration unsigned in the first place? Every other good time api I've seen or used has signed values for durations, or allows them.</p>



<a name="265087948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265087948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265087948">(Dec 15 2021 at 22:55)</a>:</h4>
<p>(Disclaimer: "every other good time api I've seen or used" is java.time and std::chrono)</p>



<a name="265088666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265088666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265088666">(Dec 15 2021 at 23:01)</a>:</h4>
<p>it's totally unprepared for timey wimey stuff</p>



<a name="265089549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265089549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265089549">(Dec 15 2021 at 23:09)</a>:</h4>
<p>How many things would break if the underlying type was changed from unsigned to signed-but-x2-the-bytes?</p>



<a name="265089631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265089631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265089631">(Dec 15 2021 at 23:09)</a>:</h4>
<p>like a <code>u32</code> to <code>i64</code> type conversion. Other than the speed considerations, though this is probably still much faster than the previous overhead</p>



<a name="265089772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265089772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265089772">(Dec 15 2021 at 23:11)</a>:</h4>
<p>The problem is Duration::Zero exists (and could also be constructed) so someone might assume that d &lt; ZERO cannot be true.</p>



<a name="265091843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265091843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265091843">(Dec 15 2021 at 23:31)</a>:</h4>
<p>I nudged for Duration::ZERO as opposed to ::MIN and "::MAX is somewhat ambiguous and may change a little" specifically to allow changing the repr.</p>



<a name="265091867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265091867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265091867">(Dec 15 2021 at 23:31)</a>:</h4>
<p>IMO it's fine if a type has a ZERO constant that is not MIN.</p>



<a name="265092283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265092283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265092283">(Dec 15 2021 at 23:35)</a>:</h4>
<p>Most of the methods to get usable values out of a <code>Duration</code> are unsigned though (<code>as_{nanos,micros,millis,secs}</code>, ...). What are they supposed to return for negative durations?</p>



<a name="265092542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265092542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265092542">(Dec 15 2021 at 23:38)</a>:</h4>
<p><code>.unsigned_abs()</code></p>



<a name="265092870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265092870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265092870">(Dec 15 2021 at 23:42)</a>:</h4>
<p>That would maintain the status quo, while also adding space for <code>as_signed_nanos</code> (or equivalent formulation)</p>



<a name="265093665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265093665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265093665">(Dec 15 2021 at 23:50)</a>:</h4>
<p>This would also allow for two events whose order is undetermined to be processed without causing issues</p>



<a name="265098247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265098247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265098247">(Dec 16 2021 at 00:44)</a>:</h4>
<p>we could tuck a sign bit in <code>nanos</code> without increasing the <code>Duration</code> size</p>



<a name="265098406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265098406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265098406">(Dec 16 2021 at 00:45)</a>:</h4>
<p>(<code>{u64, u32}</code> has padding in 64-bit targets, but not 32-bit, otherwise we could just add a <code>sign: bool</code>)</p>



<a name="265098524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Poll%3A%20Instant%20behavior%3A%20saturate%2C%20panic-on-overflow%2C%20etc/near/265098524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Poll.3A.20Instant.20behavior.3A.20saturate.2C.20panic-on-overflow.2C.20etc.html#265098524">(Dec 16 2021 at 00:47)</a>:</h4>
<p>(probably not a big deal if we just bump to 16-bytes everywhere though)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Return type for T::{log,log2,log10} · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Return.20type.20for.20T.3A.3A.7Blog.2Clog2.2Clog10.7D.html">Return type for T::{log,log2,log10}</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252071357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Return%20type%20for%20T%3A%3A%7Blog%2Clog2%2Clog10%7D/near/252071357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Falk Hüffner <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Return.20type.20for.20T.3A.3A.7Blog.2Clog2.2Clog10.7D.html#252071357">(Sep 05 2021 at 11:52)</a>:</h4>
<p>I made a suggestion <a href="https://github.com/rust-lang/rust/issues/70887#issuecomment-894645141">here</a> to change the return type for <code>T::{log,log2,log10}</code> from <code>T</code> to <code>u32</code> to be consistent with <code>T::leading_zeros</code> etc. Some people seemed to like this but there was no follow-up. Should I just send a pull request with this change?</p>



<a name="252083269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Return%20type%20for%20T%3A%3A%7Blog%2Clog2%2Clog10%7D/near/252083269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Falk Hüffner <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Return.20type.20for.20T.3A.3A.7Blog.2Clog2.2Clog10.7D.html#252083269">(Sep 05 2021 at 15:26)</a>:</h4>
<p>OK, it's here <a href="https://github.com/rust-lang/rust/pull/88665">https://github.com/rust-lang/rust/pull/88665</a> :-D</p>



<a name="252085017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Return%20type%20for%20T%3A%3A%7Blog%2Clog2%2Clog10%7D/near/252085017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Return.20type.20for.20T.3A.3A.7Blog.2Clog2.2Clog10.7D.html#252085017">(Sep 05 2021 at 15:59)</a>:</h4>
<p>Off-topic, but why does these methods say</p>
<blockquote>
<p>When the number is negative or zero it panics in debug mode and the return value is wrapped to 0 in release mode (the only situation in which the method can return 0).</p>
</blockquote>
<p>? <code>1u32.log2()</code> returns zero.</p>



<a name="252086113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Return%20type%20for%20T%3A%3A%7Blog%2Clog2%2Clog10%7D/near/252086113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Falk Hüffner <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Return.20type.20for.20T.3A.3A.7Blog.2Clog2.2Clog10.7D.html#252086113">(Sep 05 2021 at 16:19)</a>:</h4>
<p>The docs seem wrong indeed, the log of 1 should be 0 for any base. I think I'll make another pull request for that, I also wanted to improve some other things (e.g. explicitly point out that this is rounded down).</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
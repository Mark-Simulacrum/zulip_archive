<html>
<head><meta charset="utf-8"><title>format {ident} usage in docs · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html">format {ident} usage in docs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271850208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271850208" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271850208">(Feb 14 2022 at 16:20)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/93950">https://github.com/rust-lang/rust/pull/93950</a> was filed to update a bunch of format strings to the new inline capture syntax (<code>{foo}</code>). One thought I had is that if users are copy/pasting to their own environments or similarly learning Rust, they may for whatever reason not be on the latest stable, the error message was not great:</p>
<div class="codehilite"><pre><span></span><code>fn foo(test: u8) -&gt; String {
    format!(&quot;bar {test}&quot;)
}
</code></pre></div>
<div class="codehilite"><pre><span></span><code>error: there is no argument named `test`
 --&gt; &lt;source&gt;:2:18
  |
2 |     format!(&quot;bar {test}&quot;)
  |                  ^^^^^^
</code></pre></div>
<p>So that might be pretty confusing for them.</p>



<a name="271850819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271850819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271850819">(Feb 14 2022 at 16:25)</a>:</h4>
<p>yeah, it might make sense to wait a bit until more people are on a version that supports it.</p>



<a name="271850920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271850920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271850920">(Feb 14 2022 at 16:26)</a>:</h4>
<p><del>and make rustc delete itself when it's older than six weeks, to prevent these things in the future ;)</del></p>



<a name="271858670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271858670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> T•Ø•R•Ü•S <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271858670">(Feb 14 2022 at 17:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs/near/271850208">said</a>:</p>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/pull/93950">https://github.com/rust-lang/rust/pull/93950</a> was filed to update a bunch of format strings to the new inline capture syntax (<code>{foo}</code>). One thought I had is that if users are copy/pasting to their own environments or similarly learning Rust, they may for whatever reason not be on the latest stable, the error message was not great:</p>
<div class="codehilite"><pre><span></span><code>fn foo(test: u8) -&gt; String {
    format!(&quot;bar {test}&quot;)
}
</code></pre></div>
<div class="codehilite"><pre><span></span><code>error: there is no argument named `test`
 --&gt; &lt;source&gt;:2:18
  |
2 |     format!(&quot;bar {test}&quot;)
  |                  ^^^^^^
</code></pre></div>
<p>So that might be pretty confusing for them.</p>
</blockquote>
<p>I honestly never thought about that! Though I thought it gave you a warning  about that? I believe if you were on an older release when the feature was first announced, stating that inline capture strings are not yet supported, but will be when Edition 2021 comes around.</p>
<p>As I've stated in the PR, willing to revert changes where need be :)</p>



<a name="271884837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271884837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271884837">(Feb 14 2022 at 20:36)</a>:</h4>
<p>I think the updates that <em>aren't</em> in doc-comments are clearly good.</p>
<p>I don't think it's worth waiting all that long to use new language features in the docs.  After all, if they're using latest docs (instead of versioned docs that match their toolchain) then they're also seeing a bunch of types and methods that they also can't use on their version.</p>
<p>Maybe we have precedent from using <code>[1, 2].into_iter()</code> instead of <code>IntoIterator::into_iter([1, 2])</code>?</p>



<a name="271895661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271895661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271895661">(Feb 14 2022 at 22:01)</a>:</h4>
<p>I think the latter is much lighter weight (and had a better diagnostic), personally</p>



<a name="271895697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271895697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271895697">(Feb 14 2022 at 22:01)</a>:</h4>
<p>I'm probably just not used to seeing it just yet - it was a little surprising to me in a few cases to see it written the new way</p>



<a name="271915759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271915759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271915759">(Feb 15 2022 at 01:45)</a>:</h4>
<p>I personally think we should use new features in doc comments as soon as they're stable. (We shouldn't use nightly only features in unrelated doc comments.)</p>



<a name="271915778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271915778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271915778">(Feb 15 2022 at 01:45)</a>:</h4>
<p>Documentation is for the current stable version, and it may also document functions that don't exist in previous versions.</p>



<a name="271917691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271917691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271917691">(Feb 15 2022 at 02:14)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="239881">@Josh Triplett</span>. If it's stable, it should be able to be used in docs. Users can always load older versions of the docs if they want.</p>



<a name="271918325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271918325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271918325">(Feb 15 2022 at 02:22)</a>:</h4>
<p>And it may be incentive to upgrade ;-)</p>



<a name="271932662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271932662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> T•Ø•R•Ü•S <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271932662">(Feb 15 2022 at 06:39)</a>:</h4>
<p>I think <code>rustc</code> should nag users to update in order to avoid any such confusions (and that nagging should also include a message on how to turn it off). It should be highlighted when something like an unexpected character pops up, which could be new syntax in use.</p>



<a name="271932674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271932674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> T•Ø•R•Ü•S <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271932674">(Feb 15 2022 at 06:39)</a>:</h4>
<p>** It, in this case being the message that nags the user.</p>



<a name="271985581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271985581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271985581">(Feb 15 2022 at 14:56)</a>:</h4>
<p>That doesn't really seem plausible in general. How would Rust 1.59 know what abilities Rust 1.99 has?</p>



<a name="271985692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/format%20%7Bident%7D%20usage%20in%20docs/near/271985692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/format.20.7Bident.7D.20usage.20in.20docs.html#271985692">(Feb 15 2022 at 14:57)</a>:</h4>
<p>Feels like every error would need to say "or upgrade, maybe?" and if every error says that, then there's not much value added.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>.collect_array() · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.2Ecollect_array().html">.collect_array()</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274716898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/.collect_array%28%29/near/274716898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.2Ecollect_array().html#274716898">(Mar 09 2022 at 16:55)</a>:</h4>
<p>(I imagine this has been discussed in some place before, but I'm not sure where.)</p>
<p>I think we should start working towards a <code>.collect_array()</code> on a (subset of) iterators, through a new trait. Something like <code>ExactSizeIterator</code>, except the size is (an associated) const. <code>ConstSizeIterator</code> witht <code>const SIZE: usize;</code> or something. Then we can easily implement that in pretty much all cases where we have an <code>ExactSizeIterator</code>, such as for arrays and for <code>Map</code> adapters over types that implement that trait, etc. Then when const generics get more advanced, we'll be able to use it for <code>chain</code> and <code>zip</code> in the future too to allow for generic array concatenation etc.</p>



<a name="274717550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/.collect_array%28%29/near/274717550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.2Ecollect_array().html#274717550">(Mar 09 2022 at 16:59)</a>:</h4>
<p>Oh, <span class="user-mention" data-user-id="326176">@Boxy [she/her]</span> is telling me this might not be possible yet, even for simple cases like <code>map</code></p>



<a name="274722310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/.collect_array%28%29/near/274722310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.2Ecollect_array().html#274722310">(Mar 09 2022 at 17:28)</a>:</h4>
<p>we can't use the current <code>Iterator</code> types for this as <code>next</code> changes the available length without changing the type. adding this to std right away doesn't feel like the best path forward to me. I think that working on fixed size iterators makes more sense outside of std rn</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
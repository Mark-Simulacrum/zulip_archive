<html>
<head><meta charset="utf-8"><title>Default for arbitrary array dimensions · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html">Default for arbitrary array dimensions</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265224054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Default%20for%20arbitrary%20array%20dimensions/near/265224054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Maurer <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html#265224054">(Dec 16 2021 at 21:46)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=7e34db2c84b77679c245c6ea20a14026">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=7e34db2c84b77679c245c6ea20a14026</a></p>
<p>This compiles today. Is there a reason we're still using the individual 0-&gt;32 specialized implementations in core, or is it just that nobody has sent a PR since const generics were stabilized?</p>



<a name="265224108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Default%20for%20arbitrary%20array%20dimensions/near/265224108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html#265224108">(Dec 16 2021 at 21:47)</a>:</h4>
<p>std has an impl for <code>[T; 0]: Default</code> even when <code>T</code> doesnt implement <code>Default</code></p>



<a name="265224414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Default%20for%20arbitrary%20array%20dimensions/near/265224414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Maurer <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html#265224414">(Dec 16 2021 at 21:49)</a>:</h4>
<p>Ah, so we'd need something like OverlappingInstances from haskell or something like !Default as a negative trait bound to prevent it from overlapping? Are there any RFCs for those sorts of features in the works?</p>



<a name="265225373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Default%20for%20arbitrary%20array%20dimensions/near/265225373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html#265225373">(Dec 16 2021 at 21:57)</a>:</h4>
<p>There have been some attempts.  I found <a href="https://github.com/rust-lang/rust/issues/74326">#74326</a> for example.</p>



<a name="265228216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Default%20for%20arbitrary%20array%20dimensions/near/265228216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Maurer <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html#265228216">(Dec 16 2021 at 22:21)</a>:</h4>
<p>I suppose another possibility to prevent it from overlapping would be if you could say <code>&lt;T: Default, const N: usize, N &gt; 0&gt;</code> but that opens another can of worms</p>



<a name="265228897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Default%20for%20arbitrary%20array%20dimensions/near/265228897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html#265228897">(Dec 16 2021 at 22:27)</a>:</h4>
<p><code>feature(generic_const_exprs)</code> permits this but it makes it so that <code>[T; N]: Default</code> doesnt hold</p>



<a name="265229099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Default%20for%20arbitrary%20array%20dimensions/near/265229099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Default.20for.20arbitrary.20array.20dimensions.html#265229099">(Dec 16 2021 at 22:29)</a>:</h4>
<p>would also need <code>impl Trait&lt;true&gt; for ()</code> <code>impl Trait&lt;false&gt; for ()</code> to cause <code>for&lt;const B: bool&gt; (): Trait&lt;B&gt;</code> to hold</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
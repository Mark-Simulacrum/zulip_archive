<html>
<head><meta charset="utf-8"><title>wasm32-unknown-unknown · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html">wasm32-unknown-unknown</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267792545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/wasm32-unknown-unknown/near/267792545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html#267792545">(Jan 12 2022 at 22:02)</a>:</h4>
<p>Just out of interest, do libs tests work for <code>wasm32-unknown-unknown</code> or are they expected to fail? I can't get them working locally but build seems fine.</p>



<a name="267797636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/wasm32-unknown-unknown/near/267797636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html#267797636">(Jan 12 2022 at 22:43)</a>:</h4>
<p>I don't know how they would run. With <code>wasm32-wasi</code>, we could possibly use a runner like <code>wasmtime</code>, but <code>wasm32-unknown-unknown</code> is usually loaded as a module in javascript AFAIK.</p>



<a name="267797864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/wasm32-unknown-unknown/near/267797864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html#267797864">(Jan 12 2022 at 22:45)</a>:</h4>
<p>Ah, thanks for the explanation. I was worried I might be missing something. I guess it's like how Windows UWP tests can't truly be run (because they require a special environment).</p>



<a name="267802910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/wasm32-unknown-unknown/near/267802910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html#267802910">(Jan 12 2022 at 23:32)</a>:</h4>
<p>The core tests get run for wasm32-unknown-unknown.</p>
<p>The exact tests are <a href="https://github.com/rust-lang/rust/blob/1bd4fdc943513e1004f498bbf289279c9784fc6f/src/ci/docker/host-x86_64/test-various/Dockerfile#L45-L51">here</a>.</p>
<p>To run the tests, it uses node.  There is a small wrapper <a href="https://github.com/rust-lang/rust/blob/master/src/etc/wasm32-shim.js"><code>wasm32-shim.js</code></a> for loading the wasm32 module.</p>
<p>Although I'm looking at CI and it appears to be broken.</p>



<a name="267803786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/wasm32-unknown-unknown/near/267803786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html#267803786">(Jan 12 2022 at 23:41)</a>:</h4>
<p>looks like it ran core tests <a href="https://github.com/rust-lang-ci/rust/runs/4793331016?check_suite_focus=true#step:25:21625">here</a> for 86 seconds, but no output</p>



<a name="267804099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/wasm32-unknown-unknown/near/267804099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html#267804099">(Jan 12 2022 at 23:44)</a>:</h4>
<p>hmm, or does that 86 include the 1m25s build time?</p>



<a name="267823309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/wasm32-unknown-unknown/near/267823309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/wasm32-unknown-unknown.html#267823309">(Jan 13 2022 at 04:41)</a>:</h4>
<p>Yea, the 86 includes the build time.</p>
<p>I tried debugging locally, but it seems to spawn a thread, and I don't know how to follow threads in the chrome debugger (when attached to node).  I filed <a href="https://github.com/rust-lang/rust/issues/92841">#92841</a> just to note this.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
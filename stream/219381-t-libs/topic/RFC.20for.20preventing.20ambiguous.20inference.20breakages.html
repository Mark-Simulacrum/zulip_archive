<html>
<head><meta charset="utf-8"><title>RFC for preventing ambiguous inference breakages · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html">RFC for preventing ambiguous inference breakages</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274195773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274195773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274195773">(Mar 04 2022 at 22:14)</a>:</h4>
<p>This has come up a lot recently so I finally went and wrote up an RFC for how I think we can solve this problem once and for all: <a href="https://github.com/rust-lang/rfcs/pull/3240">https://github.com/rust-lang/rfcs/pull/3240</a></p>



<a name="274208356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274208356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Quy Nguyen <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274208356">(Mar 05 2022 at 00:47)</a>:</h4>
<p>One idea I had floating around at one point was to gate these on compiler version and maybe even crate version for arbitrary crates, but I'm not sure if the trade-offs are worth it.</p>



<a name="274210170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274210170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274210170">(Mar 05 2022 at 01:16)</a>:</h4>
<p>By gate on compiler version do you mean determine the edition based on the stable since version?</p>



<a name="274211512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274211512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274211512">(Mar 05 2022 at 01:42)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby [she/her]</span> This looks great!</p>



<a name="274211521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274211521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274211521">(Mar 05 2022 at 01:42)</a>:</h4>
<p>Seems like the right balance.</p>



<a name="274249179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274249179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Quy Nguyen <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274249179">(Mar 05 2022 at 15:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby [she/her]</span> <a href="#narrow/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages/near/274210170">said</a>:</p>
<blockquote>
<p>By gate on compiler version do you mean determine the edition based on the stable since version?</p>
</blockquote>
<p>I meant gate not on edition, but on compiler version ala MSRV (filtering out all newer methods). Of course, that might have to be tied into an edition gate requiring crates to specify the compiler version.</p>



<a name="274258658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274258658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274258658">(Mar 05 2022 at 18:43)</a>:</h4>
<p>yeah, i've also suggested that a few times. treating things that were stabilized after the <code>rust-version</code> in the cargo.toml as unstable in name resolution</p>



<a name="274260807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/RFC%20for%20preventing%20ambiguous%20inference%20breakages/near/274260807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/RFC.20for.20preventing.20ambiguous.20inference.20breakages.html#274260807">(Mar 05 2022 at 19:30)</a>:</h4>
<p>I (and others) use build scripts (and <code>#[cfg(accessible)]</code> could be used the same way) to detect either rust versions or available functions/features in some cases for internals. This would be broken if the above was made the case (unless you could still use the <code>#[feature]</code> to enable it, even on stable channel).</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
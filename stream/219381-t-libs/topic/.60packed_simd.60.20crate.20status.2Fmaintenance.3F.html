<html>
<head><meta charset="utf-8"><title>`packed_simd` crate status/maintenance? Â· t-libs Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html">`packed_simd` crate status/maintenance?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="207785185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207785185" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gray Olson <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207785185">(Aug 23 2020 at 18:24)</a>:</h4>
<p>Hi! I've recently begun using <code>packed_simd</code> in one of my projects, <a href="https://github.com/termhn/ultraviolet">ultraviolet</a>. As part of that, I implemented some missing functionality that I needed in <a href="https://github.com/rust-lang/packed_simd/pull/286">packed_simd #286</a>. However, looking at the repo, it looks like there has been zero (code) activity since Oct 28, 2019. Has there been any discussion of how/when maintenance of this project will take place? I'd love to be able to get my PR merged and released as it's a pretty simple non-breaking change that adds wanted/missing functionality. Alternatively I might end up publishing my own version until the official one is maintained and can have another release again</p>



<a name="207787563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207787563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207787563">(Aug 23 2020 at 19:26)</a>:</h4>
<p>See <a href="https://github.com/rust-lang/lang-team/issues/29">https://github.com/rust-lang/lang-team/issues/29</a>.</p>



<a name="207787583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207787583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207787583">(Aug 23 2020 at 19:27)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="314350">@Henri Sivonen</span></p>



<a name="207794563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207794563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207794563">(Aug 23 2020 at 22:38)</a>:</h4>
<p>Also: <a href="https://github.com/rust-lang/rfcs/pull/2948#issuecomment-678743718">https://github.com/rust-lang/rfcs/pull/2948#issuecomment-678743718</a></p>



<a name="207794576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207794576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207794576">(Aug 23 2020 at 22:39)</a>:</h4>
<p>Weâ€™re working towards getting this stuff into the standard library ðŸ™‚</p>



<a name="207796904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207796904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207796904">(Aug 23 2020 at 23:41)</a>:</h4>
<p><span class="user-mention" data-user-id="332423">@Gray Olson</span> Would you be interested in helping out with that?</p>



<a name="207797325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207797325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gray Olson <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207797325">(Aug 23 2020 at 23:53)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> <span class="user-mention" data-user-id="204346">@Ashley Mannix</span> thanks for the discussion links. I might be interested in helping to some degree but I would not want to be a champion of sorts. My main motivation/interest in this is in how it can help <code>ultraviolet</code> (or generally math and games/graphics related crates in the rust ecosystem that want to use simd, like glam, nalgebra, rapier in general), not necessarily actually messing with intrinsics in and of themselves, which is more of where <span class="user-mention" data-user-id="224471">@Lokathor</span> comes in I think.</p>



<a name="207797839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207797839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207797839">(Aug 24 2020 at 00:07)</a>:</h4>
<p>I'm interested in working on a Nightly SIMD module within the standard library. Mostly copy-paste from <code>packed_simd</code>, but we could possibly adjust/improve some parts of it as we go.</p>
<p>I don't know anything at all about setting up feature gates or compilery things like that, so the way that I'd be able to help the most is if someone else set up that boilerplate stuff and then I was able to just add methods and tests.</p>



<a name="207797994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207797994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207797994">(Aug 24 2020 at 00:12)</a>:</h4>
<p>I've also had one person who has been assisting me with the development of the <code>wide</code> crate this past week or so, and if there's an obvious path for the work to end up in the standard library I bet they'd also be interested in contribution.</p>
<p>The biggest problem we've faced with <code>wide</code> so far is the <code>i586</code> code paths, where a longstanding bug in <code>f32::from_bits</code> has caused quite the trouble. Other than that, the work is generally quite straightforward.</p>



<a name="207798122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798122">(Aug 24 2020 at 00:14)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="224471">@Lokathor</span>! I'd be happy to get a boilerplate started up for you. Are you able to work on the standard library locally? You need a reasonably high-spec machine, but <code>x.py test library/core --stage 0 --no-doc</code> is your friend (sorry if you know all of this already)</p>



<a name="207798130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798130">(Aug 24 2020 at 00:14)</a>:</h4>
<p>I'll have to check out what the <code>wide</code> crate is all about</p>



<a name="207798140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798140">(Aug 24 2020 at 00:15)</a>:</h4>
<p><code>wide</code> is portable SIMD on stable</p>



<a name="207798144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798144">(Aug 24 2020 at 00:15)</a>:</h4>
<blockquote>
<p>A crate to help you go wide.</p>
</blockquote>
<p>Ah of course <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="207798147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798147">(Aug 24 2020 at 00:15)</a>:</h4>
<p>but, because of no compiler intrinsics support, it's a little "hope and pray" outside of x86/x64</p>



<a name="207798196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798196">(Aug 24 2020 at 00:16)</a>:</h4>
<p>I at least have a macbook that can build rustc. I haven't tried on my windows desktop. I know it has the power, but i'm always doubtful that <em>anything</em> open source builds properly on windows so by default i assume it won't.</p>



<a name="207798363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798363">(Aug 24 2020 at 00:21)</a>:</h4>
<p>My main machine is Windows and that's what I use to build <code>rustc</code> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> The main thing is getting the right Windows 10 SDK. I've currently got:</p>
<div class="spoiler-block"><div class="spoiler-header">

<p>VS Components</p>
</div><div class="spoiler-content" aria-hidden="true">

<p>"version": "1.0",<br>
  "components": [<br>
    "Microsoft.VisualStudio.Component.CoreEditor",<br>
    "Microsoft.VisualStudio.Workload.CoreEditor",<br>
    "Microsoft.NetCore.Component.Runtime.3.1",<br>
    "Microsoft.NetCore.Component.SDK",<br>
    "Microsoft.VisualStudio.Component.NuGet",<br>
    "Microsoft.Net.Component.4.6.1.TargetingPack",<br>
    "Microsoft.VisualStudio.Component.Roslyn.Compiler",<br>
    "Microsoft.VisualStudio.Component.Roslyn.LanguageServices",<br>
    "Microsoft.Net.Component.4.8.SDK",<br>
    "Microsoft.Net.Component.4.7.2.TargetingPack",<br>
    "Microsoft.Component.MSBuild",<br>
    "Microsoft.VisualStudio.Component.TextTemplating",<br>
    "Microsoft.VisualStudio.Component.SQL.ADAL",<br>
    "Microsoft.VisualStudio.Component.SQL.LocalDB.Runtime",<br>
    "Microsoft.VisualStudio.Component.Common.Azure.Tools",<br>
    "Microsoft.VisualStudio.Component.SQL.CLR",<br>
    "Microsoft.VisualStudio.Component.MSODBC.SQL",<br>
    "Microsoft.VisualStudio.Component.MSSQL.CMDLnUtils",<br>
    "Microsoft.Net.Component.4.5.2.TargetingPack",<br>
    "Microsoft.Net.Component.4.5.TargetingPack",<br>
    "Microsoft.VisualStudio.Component.SQL.SSDT",<br>
    "Microsoft.VisualStudio.Component.SQL.DataSources",<br>
    "Microsoft.VisualStudio.Component.IntelliCode",<br>
    "Microsoft.Net.Component.4.6.TargetingPack",<br>
    "Microsoft.VisualStudio.Component.DiagnosticTools",<br>
    "Microsoft.VisualStudio.Component.AppInsights.Tools",<br>
    "Component.Microsoft.VisualStudio.LiveShare",<br>
    "Microsoft.Net.Component.4.7.TargetingPack",<br>
    "Microsoft.Net.Component.4.8.TargetingPack",<br>
    "Microsoft.VisualStudio.Component.VC.CoreIde",<br>
    "Microsoft.VisualStudio.Component.VC.Tools.x86.x64",<br>
    "Microsoft.VisualStudio.Component.Graphics.Tools",<br>
    "Microsoft.VisualStudio.Component.VC.DiagnosticTools",<br>
    "Microsoft.VisualStudio.Component.Windows10SDK.18362",<br>
    "Microsoft.ComponentGroup.Blend",<br>
    "Microsoft.VisualStudio.Component.Debugger.JustInTime",<br>
    "Microsoft.VisualStudio.ComponentGroup.MSIX.Packaging",<br>
    "Microsoft.VisualStudio.Component.VC.Redist.14.Latest",<br>
    "Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Core",<br>
    "Microsoft.VisualStudio.ComponentGroup.WebToolsExtensions.CMake",<br>
    "Microsoft.VisualStudio.Component.VC.CMake.Project",<br>
    "Microsoft.VisualStudio.Component.VC.ATL",<br>
    "Microsoft.VisualStudio.Component.VC.TestAdapterForBoostTest",<br>
    "Microsoft.VisualStudio.Component.VC.TestAdapterForGoogleTest",<br>
    "Microsoft.VisualStudio.Component.VC.ASAN",<br>
    "Microsoft.VisualStudio.Workload.NativeDesktop",<br>
    "Microsoft.Component.NetFX.Native",<br>
    "Microsoft.VisualStudio.ComponentGroup.UWP.NetCoreAndStandard",<br>
    "Microsoft.VisualStudio.Component.Graphics",<br>
    "Microsoft.VisualStudio.ComponentGroup.UWP.Xamarin",<br>
    "Microsoft.VisualStudio.ComponentGroup.UWP.Support",<br>
    "Microsoft.VisualStudio.Workload.Universal",<br>
    "Component.MDD.Linux",<br>
    "Component.Linux.CMake",<br>
    "Microsoft.Component.ClickOnce",<br>
    "Microsoft.Net.Component.4.6.1.SDK",<br>
    "Microsoft.VisualStudio.Component.VC.14.23.CLI.Support"<br>
  ]<br>
}</p>
</div></div>



<a name="207798415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798415">(Aug 24 2020 at 00:22)</a>:</h4>
<p>Wow, ok that export was way less useful than I was expecting...</p>



<a name="207798490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798490">(Aug 24 2020 at 00:24)</a>:</h4>
<p>It's:</p>
<ul>
<li>MSVC v142 (v14.25)</li>
<li>Windows 10 SDK 10.0.18362.0</li>
<li>C++/CLI support for v142 build tools</li>
</ul>



<a name="207798563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798563">(Aug 24 2020 at 00:26)</a>:</h4>
<blockquote>
<p>wide is portable SIMD on stable</p>
</blockquote>
<p>Ahh ok. Based on <code>std::arch</code>?</p>



<a name="207798635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798635">(Aug 24 2020 at 00:28)</a>:</h4>
<p>basically. <code>core::arch</code> is wrapped by <code>safe_arch</code>, then that's wrapped by <code>wide</code>.</p>



<a name="207798644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207798644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207798644">(Aug 24 2020 at 00:29)</a>:</h4>
<p>I'd be quite happy if <code>safe_arch</code> also became part of <code>core</code> some day, but one thing at a time I guess.</p>



<a name="207801710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207801710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207801710">(Aug 24 2020 at 02:01)</a>:</h4>
<p>IIRC one of the blockers for <code>packed_simd</code> was the lack of const generics, but we some support for them now...</p>



<a name="207802692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207802692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207802692">(Aug 24 2020 at 02:33)</a>:</h4>
<p>Yes, that's primarily a difficulty with the shuffle operations, which aren't even critical to getting most math work done.</p>
<p>People could get a great deal of benefit even if the shuffle specific methods and select other difficult methods were held back from the initial stabilization goals.</p>



<a name="207809507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207809507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207809507">(Aug 24 2020 at 05:50)</a>:</h4>
<p>i think without stable shuffles it would be really frustrating to do most work tbh. you could do some stuff, but its hard to think of very much code that goes very long without doing any shuffling.</p>



<a name="207815297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207815297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henri Sivonen <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207815297">(Aug 24 2020 at 07:48)</a>:</h4>
<p><code>packed_simd</code> was considered blocked on const generics as a matter of elegance, but const generics are not truly essential for the functionality.</p>



<a name="207817776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207817776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207817776">(Aug 24 2020 at 08:22)</a>:</h4>
<p>So what would shuffle look like with const generics? Would it be used as a way to accept and return a <code>Simd&lt;[T; N]&gt;</code> from input indices <code>[usize; N]</code> by carrying <code>N</code> generically?</p>



<a name="207817811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207817811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207817811">(Aug 24 2020 at 08:23)</a>:</h4>
<p>Or does it need more than what would be covered by <code>min_const_generics</code>?</p>



<a name="207831390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207831390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207831390">(Aug 24 2020 at 11:18)</a>:</h4>
<p><code>min_const_generics</code> should be enough. <code>wasm32</code> intrinsics already use it: <a href="https://doc.rust-lang.org/nightly/core/arch/wasm32/fn.v32x4_shuffle.html">https://doc.rust-lang.org/nightly/core/arch/wasm32/fn.v32x4_shuffle.html</a></p>



<a name="207836059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207836059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207836059">(Aug 24 2020 at 12:20)</a>:</h4>
<p>Ahh ok I see. So the indices are const</p>



<a name="207838586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207838586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207838586">(Aug 24 2020 at 12:48)</a>:</h4>
<p>My understanding is that it would be Significantly Slower, if even possible, if you selected the indices at runtime.</p>



<a name="207864170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207864170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207864170">(Aug 24 2020 at 16:27)</a>:</h4>
<p><span class="user-mention" data-user-id="209168">@Thom Chiovoloni</span> <code>wide</code> doesn't support shuffles, and it still runs <code>ultraviolet</code>.</p>



<a name="207864526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207864526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207864526">(Aug 24 2020 at 16:30)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> Would <code>min_const_generics</code> would be enough to give a compiler error on bad inputs?</p>
<p>We strongly want to have a system where the compile time indexes will error out on you if you select bad values.</p>



<a name="207864922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207864922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207864922">(Aug 24 2020 at 16:33)</a>:</h4>
<p><span class="user-mention" data-user-id="204346">@Ashley Mannix</span> &lt;<a href="https://github.com/Lokathor/safe_arch/blob/main/src/x86_x64/sse.rs#L1080">https://github.com/Lokathor/safe_arch/blob/main/src/x86_x64/sse.rs#L1080</a>&gt; here is an example of the macro form of a simd shuffle. Other shuffles for other types follow the same theme of "convert several indexes to a bit packed shuffle magic number, and it's an immediate value encoded into the instruction."</p>



<a name="207865089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207865089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207865089">(Aug 24 2020 at 16:34)</a>:</h4>
<p>so with const generics we could presumably accept <code>&lt;A:usize, B:usize, C:usize, D:usize&gt;</code> as const args to the function and then pack the value that way.</p>



<a name="207865339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207865339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207865339">(Aug 24 2020 at 16:36)</a>:</h4>
<p>But again, I <em>genuinely</em> think that they're not needed for a minimum useful release. As evidenced by the fact that I left them out of <code>wide</code> and still had two separate people PRing the crate to add the special math functions they each wanted.</p>



<a name="207867816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207867816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gray Olson <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207867816">(Aug 24 2020 at 17:00)</a>:</h4>
<p>While I also agree that they're not necessarily needed for a "minimum useful release", they do become incredibly important pretty quick when trying to do anything that's not just perfectly vertical-pipelined operations like what ultraviolet is currently designed for.</p>



<a name="207868034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207868034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gray Olson <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207868034">(Aug 24 2020 at 17:02)</a>:</h4>
<p>And, is there a significant issue with a macro implementation like what Lokathor linked above? Perhaps even if shuffle doesn't go into the initial minimum std release, a crate could be made that implements shuffles on top of it as macros until const generics comes along enough to support the way we want to do it as functions?</p>



<a name="207868207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207868207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207868207">(Aug 24 2020 at 17:03)</a>:</h4>
<p>well there's already a crate with a macro for it, which i linked to above ;3c</p>



<a name="207872056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207872056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207872056">(Aug 24 2020 at 17:34)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span> Unfortunately const generics don't support bounds yet, so the bounds-checking will have to be done as a runtime panic.</p>



<a name="207874587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207874587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207874587">(Aug 24 2020 at 17:57)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="k">fn</span> <span class="nf">const_bound_check</span><span class="p">(</span><span class="n">index</span>: <span class="kt">usize</span><span class="p">,</span><span class="w"> </span><span class="n">bound</span>: <span class="kt">usize</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">usize</span> <span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">ARRAY</span>: <span class="p">[</span><span class="o">&amp;</span><span class="kt">str</span><span class="p">;</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;index out of bounds&quot;</span><span class="p">];</span><span class="w"></span>
<span class="w">  </span><span class="n">ARRAY</span><span class="p">[(</span><span class="n">index</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">bound</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="p">];</span><span class="w"></span>
<span class="w">  </span><span class="n">index</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>


<p>On the weekend I tested out this function, and it generates a const_err if you use it to build a an illegal const and then try to use that illegal const. Maybe this, or something similar works? I'm not totally clear on how well const fn and const generics interact</p>



<a name="207877263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207877263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207877263">(Aug 24 2020 at 18:17)</a>:</h4>
<p>I would suggest double-checking with the const-eval WG about this.</p>



<a name="207918892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207918892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207918892">(Aug 25 2020 at 02:14)</a>:</h4>
<p><a href="#narrow/stream/146212-t-compiler.2Fconst-eval/topic/Do.20the.20const.20SIMD-shuffle.3F/near/207918829">Double-checked over here</a>.</p>



<a name="207937902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/207937902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#207937902">(Aug 25 2020 at 08:50)</a>:</h4>
<p>lcnr said:</p>
<blockquote>
<p>"It looks to me like this needs <a href="https://github.com/rust-lang/compiler-team/issues/340">https://github.com/rust-lang/compiler-team/issues/340</a>, which I will hopefully implement in the next month(s).<br>
you can then write <code>fn simd_stuff&lt;const N: usize&gt;() where [u8;  BOUND - N]</code> which fails to compile if N is greater than BOUND"</p>
</blockquote>



<a name="208025046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208025046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208025046">(Aug 25 2020 at 21:18)</a>:</h4>
<p>So based on what const-eval said, it's probably best to get some code review for const generic APIs so they look nice, but by the time <code>core::simd</code> would belooking towards stabilization, it won't be at all hard to stabilize a const generic API for Simd Shuffle.</p>



<a name="208041042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208041042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208041042">(Aug 26 2020 at 00:28)</a>:</h4>
<p>oof, that means i might have to <em>actually do this thing</em> i've signed myself up for</p>



<a name="208043891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208043891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208043891">(Aug 26 2020 at 01:21)</a>:</h4>
<p>now we just need SingleInputMultipleDevelopers</p>



<a name="208166253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208166253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208166253">(Aug 27 2020 at 00:26)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span> I'm going to spend some time this afternoon stubbing out a branch for us and propose <span class="user-mention" data-user-id="314350">@Henri Sivonen</span>'s project group as a libs RFC so we could get a dedicated stream <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="208166512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208166512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208166512">(Aug 27 2020 at 00:30)</a>:</h4>
<p>I'm in favor of a project group that does some design work here and there and evaluates things while building it out.</p>
<p>I'm mostly just against the original proposal of "accept all of packed_simd in just as it happens to be right now".</p>



<a name="208166640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208166640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208166640">(Aug 27 2020 at 00:33)</a>:</h4>
<p>That's fair <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> I'll make sure to get your input on the scope so it lines up with what you're expecting</p>



<a name="208173585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208173585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208173585">(Aug 27 2020 at 02:51)</a>:</h4>
<p>I have the same concern.</p>



<a name="208173648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208173648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208173648">(Aug 27 2020 at 02:52)</a>:</h4>
<p>Not because of any specific problem with packed_simd, to be clear. Just because we should thoroughly consider the design decisions it's built on before in shrining anything into std.</p>



<a name="208319394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208319394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208319394">(Aug 28 2020 at 08:57)</a>:</h4>
<p>Got an RFC up! <a href="https://github.com/rust-lang/rfcs/pull/2977">https://github.com/rust-lang/rfcs/pull/2977</a></p>



<a name="208331946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208331946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pickfire <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208331946">(Aug 28 2020 at 11:44)</a>:</h4>
<p>I wonder why isn't <code>Licenser</code> part of the project group? I think he may be interested on this since he work on quite a bit of simd stuff IIRC.</p>



<a name="208333052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208333052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208333052">(Aug 28 2020 at 11:57)</a>:</h4>
<p>Iâ€™ll give them a ping!</p>



<a name="208335693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208335693" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208335693">(Aug 28 2020 at 12:26)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> Did you have any thoughts on how <code>stdarch</code> has been? Do you think the external crate approach worked out there?</p>



<a name="208335770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208335770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208335770">(Aug 28 2020 at 12:28)</a>:</h4>
<p>I was thinking weâ€™d take the same approach for <code>stdsimd</code>, but am actually not sure if there was some pressing reason to make <code>stdarch</code> external, or if we just wanted to try it</p>



<a name="208335858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208335858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208335858">(Aug 28 2020 at 12:28)</a>:</h4>
<p>I kind of like the idea of externalizing APIs as crates to be honest, but if itâ€™s clunky then maybe itâ€™s not something we want more of</p>



<a name="208347925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208347925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208347925">(Aug 28 2020 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="204346">@Ashley Mannix</span> <code>stdarch</code> is actually imported as submodule because the operations need to be available in <code>core::arch</code> and <code>core</code> can't have dependencies.</p>



<a name="208400968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208400968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208400968">(Aug 28 2020 at 22:21)</a>:</h4>
<p>Was there any reason we did it that way instead of just writing it directly in <code>libcore</code>? Just to make it easier to contribute to?</p>



<a name="208408383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208408383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208408383">(Aug 29 2020 at 00:41)</a>:</h4>
<p>I will say that I've actually been able to contribute to <code>stdarch</code> more than once without tearing my hair out</p>



<a name="208409506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208409506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208409506">(Aug 29 2020 at 01:11)</a>:</h4>
<p>I don't know the historical reasons, maybe it was intended to be a separate crate from the start.</p>



<a name="208409518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208409518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208409518">(Aug 29 2020 at 01:11)</a>:</h4>
<p>Also stdarch has multiple crates, only core_arch is embedded in libcore.</p>



<a name="208409525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208409525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208409525">(Aug 29 2020 at 01:11)</a>:</h4>
<p>The other crates deal with things like runtime feature detection (used by libstd) and test-related crates for stdarch's CI.</p>



<a name="208410634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208410634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208410634">(Aug 29 2020 at 01:36)</a>:</h4>
<p>If we donâ€™t want to create more submodules maybe we could look at adding a <code>core_simd</code> crate to that same repo?</p>



<a name="208413302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208413302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208413302">(Aug 29 2020 at 02:52)</a>:</h4>
<p>I have no objection to that.</p>



<a name="208413317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208413317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208413317">(Aug 29 2020 at 02:52)</a>:</h4>
<p>However it might be tricky to integrate all the CI.</p>



<a name="208413343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208413343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208413343">(Aug 29 2020 at 02:53)</a>:</h4>
<p>Honestly I don't think it's that much of a benefit to share the same submodule as stdarch. No matter what you'll need to bump a submodule after a change, it doesn't matter if it's one submodule or two.</p>



<a name="208414101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208414101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208414101">(Aug 29 2020 at 03:13)</a>:</h4>
<p>Yeh, I was mostly wondering whether it would be worthwhile having the code for <code>core::simd</code> together if we did want to try moving from LLVM intrinsics to <code>core::arch</code> to have fewer moving parts to filling the current gaps in <code>core::arch</code></p>



<a name="208414227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208414227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208414227">(Aug 29 2020 at 03:16)</a>:</h4>
<p>Iâ€™ve also been under the assumption that within the standard library it doesnâ€™t matter if we stabilize with LLVM intrinsics and could migrate off them to <code>core::arch</code> later, but it would be good to confirm or break that assumption ðŸ™‚</p>



<a name="208438734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208438734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pickfire <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208438734">(Aug 29 2020 at 15:17)</a>:</h4>
<p><code>stdarch</code> is definitely easier to contribute to since we don't need to compile arch, <del><code>library</code> needs to compile rust</del>. So one cannot just go to <code>library/alloc/</code> and <code>cargo +nightly c</code>, oh I didn't know it works now.</p>



<a name="208438943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208438943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pickfire <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208438943">(Aug 29 2020 at 15:21)</a>:</h4>
<p>I find <code>stdarch</code> still missing some SIMD instructions, last time I had to contribute a patch for another SIMD stuff. Maybe we might want to visit those first?</p>



<a name="208439445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/%60packed_simd%60%20crate%20status/maintenance%3F/near/208439445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/.60packed_simd.60.20crate.20status.2Fmaintenance.3F.html#208439445">(Aug 29 2020 at 15:32)</a>:</h4>
<p>There's literally thousands of missing intrinsics. Most people aren't interested in advancing that.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
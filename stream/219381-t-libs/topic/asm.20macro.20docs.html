<html>
<head><meta charset="utf-8"><title>asm macro docs · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html">asm macro docs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273550881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273550881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273550881">(Feb 28 2022 at 20:42)</a>:</h4>
<p>was just talking about the asm macro with a friend and they were surprised by the rustdoc output in <a href="https://doc.rust-lang.org/stable/core/arch/macro.asm.html">https://doc.rust-lang.org/stable/core/arch/macro.asm.html</a></p>



<a name="273550900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273550900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273550900">(Feb 28 2022 at 20:42)</a>:</h4>
<p>specifically the "assembly template" string</p>



<a name="273550918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273550918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273550918">(Feb 28 2022 at 20:42)</a>:</h4>
<p>and just generally I'm surprised by how empty the docs are, though they do at least link to some other docs that do document things well</p>



<a name="273551007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273551007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273551007">(Feb 28 2022 at 20:43)</a>:</h4>
<p>wondering if this is good and intentional or if we should put some effort into cleaning up the rustdoc output here for the macro and add more detail or some examples to our api docs themselves rather than relying entirely upon documentation hosted elsewhere</p>



<a name="273551440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273551440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273551440">(Feb 28 2022 at 20:47)</a>:</h4>
<p>I think separately from if it's intentional it's definitely not good. A short summary as well as basic safety guidance is probably advisable to have on page.</p>



<a name="273551903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273551903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273551903">(Feb 28 2022 at 20:52)</a>:</h4>
<p>definitely intentional (see <a href="https://github.com/rust-lang/rust/issues/72016#issuecomment-985134497">https://github.com/rust-lang/rust/issues/72016#issuecomment-985134497</a> ) but I think at the time Amanieu was probably more interested in finding anywhere else for the documentation to live other than the RFC book/unstable book and just happened to pick the reference and rust-by-example</p>



<a name="273552032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273552032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273552032">(Feb 28 2022 at 20:52)</a>:</h4>
<p>so that isn't to say that things can't be improved</p>



<a name="273552266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273552266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273552266">(Feb 28 2022 at 20:55)</a>:</h4>
<p>I'd be a fan of having the documentation directly on <code>asm</code>, rather than off in another doc, analogous to <a href="https://doc.rust-lang.org/std/fmt/index.html">https://doc.rust-lang.org/std/fmt/index.html</a> .</p>



<a name="273552290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273552290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273552290">(Feb 28 2022 at 20:55)</a>:</h4>
<p><code>std::fmt</code> doesn't just link to another doc, which seems like precedent.</p>



<a name="273552476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273552476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273552476">(Feb 28 2022 at 20:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby [she/her]</span> <a href="#narrow/stream/219381-t-libs/topic/asm.20macro.20docs/near/273550900">said</a>:</p>
<blockquote>
<p>specifically the "assembly template" string</p>
</blockquote>
<p>tell you friend to pay no attention to the <code>#[rustc_builtin_macro]</code> behind the curtain :P</p>



<a name="273552599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273552599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273552599">(Feb 28 2022 at 20:57)</a>:</h4>
<p>to that end, maybe it would be <em>less</em> confusing if the "signature" there were even more obviously bogus, rather than trying to halfway pretend to be a real macro</p>



<a name="273552828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273552828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273552828">(Feb 28 2022 at 20:59)</a>:</h4>
<p>I've been meaning to tackle the general idea of "improving the assembly docs" for a while now but not actually done it.</p>
<p>The major problem (as i see it) is that "teaching this the first time" and "referencing how it works later" are different use cases that each want somewhat separate organizations.</p>



<a name="273552927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273552927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273552927">(Feb 28 2022 at 20:59)</a>:</h4>
<p>yes, and I think that's what motivated the current rust-by-example/reference split for those separate concerns, but that leaves out anyone who <em>starts</em> from the stdlib docs :P</p>



<a name="273553017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273553017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273553017">(Feb 28 2022 at 21:00)</a>:</h4>
<p>So perhaps we teach how to use it on the item's docs, and we have the "just a list of facts" version live in the reference.</p>



<a name="273553568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273553568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273553568">(Feb 28 2022 at 21:03)</a>:</h4>
<p>I'll draft something tonight, this will be a good way to avoid writing fragment shader code today.</p>



<a name="273553931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273553931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273553931">(Feb 28 2022 at 21:05)</a>:</h4>
<p>indeed, I find the best way to get anything done is to have another, much more important thing that I need to get done :)</p>



<a name="273561199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273561199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273561199">(Feb 28 2022 at 22:06)</a>:</h4>
<p>I wonder if the actual specification should also live in the stdlib docs.<br>
As far as I can tell, the standard library documentation is the most normative thing describing any part of rust, so I'd actually expect that it doesn't just link out to a non-normative document.</p>



<a name="273563191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273563191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273563191">(Feb 28 2022 at 22:23)</a>:</h4>
<p>That seems like process abuse/scope creep.</p>



<a name="273564194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273564194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273564194">(Feb 28 2022 at 22:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/asm.20macro.20docs/near/273563191">said</a>:</p>
<blockquote>
<p>That seems like process abuse/scope creep.</p>
</blockquote>
<p>I mean, it's the only normative thing describing rust atm.</p>



<a name="273564287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273564287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273564287">(Feb 28 2022 at 22:34)</a>:</h4>
<p>It's the only thing you can reliably point to as "This is how x functions, and these are it's requirements, effects, constrains, preconditions, postconditions, and errors".</p>



<a name="273564378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273564378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273564378">(Feb 28 2022 at 22:35)</a>:</h4>
<p>The only better part is <a href="https://eel.is/c++latest/atomic.order">https://eel.is/c++latest/atomic.order</a></p>



<a name="273564979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273564979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273564979">(Feb 28 2022 at 22:41)</a>:</h4>
<p>I think the "fully precise description" should link to the reference</p>



<a name="273565104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273565104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273565104">(Feb 28 2022 at 22:42)</a>:</h4>
<p>The reference isn't normative, though.</p>



<a name="273565136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273565136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273565136">(Feb 28 2022 at 22:42)</a>:</h4>
<p>but the standard library docs aren't either so that doesn't solve your problem</p>



<a name="273584838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273584838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273584838">(Mar 01 2022 at 02:56)</a>:</h4>
<p>Alright, I wrote 1800 words, and I'll probably write some more tomorrow: <a href="https://hackmd.io/@Lokathor/SkEY3h5l9">https://hackmd.io/@Lokathor/SkEY3h5l9</a></p>



<a name="273593765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273593765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273593765">(Mar 01 2022 at 05:32)</a>:</h4>
<p>Those docs don't mention all the various non-obvious restrictions on the inline assembly you must follow to ensure that it works with other codegen backends and future llvm versions. I'm afraid that putting this in the lib docs will make people not read those in the reference.</p>



<a name="273594376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273594376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273594376">(Mar 01 2022 at 05:44)</a>:</h4>
<p>well it's currently quite incomplete, as indicated by several sections marked "TODO", and by the title that starts with "draft".</p>



<a name="273594395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273594395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273594395">(Mar 01 2022 at 05:45)</a>:</h4>
<p>Would you care to expand upon this non-obvious set of limitations <span class="user-mention" data-user-id="133247">@bjorn3</span> ?</p>



<a name="273596747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273596747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273596747">(Mar 01 2022 at 06:28)</a>:</h4>
<p><a href="https://doc.rust-lang.org/nightly/reference/inline-assembly.html#rules-for-inline-assembly">https://doc.rust-lang.org/nightly/reference/inline-assembly.html#rules-for-inline-assembly</a></p>



<a name="273596818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273596818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273596818">(Mar 01 2022 at 06:30)</a>:</h4>
<p>There was also some extra text about allowed inline asm directives added a couple of days ago. Doesn't seem to be part of the online version yet.</p>



<a name="273606154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273606154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273606154">(Mar 01 2022 at 08:42)</a>:</h4>
<p>Well, I mean I know about all the stuff that's already written down in the reference.</p>



<a name="273609593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273609593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273609593">(Mar 01 2022 at 09:11)</a>:</h4>
<p>I have seen violations of</p>
<blockquote>
<p>You cannot assume that two asm! blocks adjacent in source code, even without any other code between them, will end up in successive addresses in the binary without any other instructions between them.</p>
</blockquote>
<p>and</p>
<blockquote>
<p>You cannot assume that an asm! block will appear exactly once in the output binary. The compiler is allowed to instantiate multiple copies of the asm! block, for example when the function containing it is inlined in multiple places.</p>
</blockquote>



<a name="273609692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273609692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273609692">(Mar 01 2022 at 09:12)</a>:</h4>
<p>With the violation of the former causing the redox os kernel to fail to run when optimizations are disabled, but running fine with it enabled.</p>



<a name="273626954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273626954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273626954">(Mar 01 2022 at 11:36)</a>:</h4>
<p>Yep, redox's stack switching code is very broken.</p>



<a name="273627433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273627433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273627433">(Mar 01 2022 at 11:40)</a>:</h4>
<p>It was the kernel level syscall handling code that was broken. It is now fixed.</p>



<a name="273628063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273628063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273628063">(Mar 01 2022 at 11:48)</a>:</h4>
<p><a href="https://github.com/redox-os/kernel/blob/master/src/context/arch/aarch64.rs#L228">https://github.com/redox-os/kernel/blob/master/src/context/arch/aarch64.rs#L228</a></p>



<a name="273628260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273628260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273628260">(Mar 01 2022 at 11:51)</a>:</h4>
<p>That one is indeed broken. The x86_64 version should be fine: <a href="https://github.com/redox-os/kernel/blob/81e700708d901d6552c2cef242df505d93efbf4f/src/context/arch/x86_64.rs#L207">https://github.com/redox-os/kernel/blob/81e700708d901d6552c2cef242df505d93efbf4f/src/context/arch/x86_64.rs#L207</a></p>



<a name="273630065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/asm%20macro%20docs/near/273630065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/asm.20macro.20docs.html#273630065">(Mar 01 2022 at 12:06)</a>:</h4>
<p>Anyways, this is off-topic. <span class="user-mention" data-user-id="224471">@Lokathor</span> I'm glad you're working on improving the library docs for <code>asm!</code> and <code>global_asm!</code>. I'm adding some comments to the document.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
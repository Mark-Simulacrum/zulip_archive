<html>
<head><meta charset="utf-8"><title>rfc2700 · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html">rfc2700</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="185966266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185966266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185966266">(Jan 17 2020 at 23:01)</a>:</h4>
<p>There's been a little more activity on the proposed RFC for revamped numeric constants ( <a href="https://github.com/rust-lang/rfcs/pull/2700" target="_blank" title="https://github.com/rust-lang/rfcs/pull/2700">https://github.com/rust-lang/rfcs/pull/2700</a> ) , figured I'd make a thread here in case people find it easier to keep up with than on github. right now the question to be resolved seems to be whether or not to ever deprecate the constants that it proposes to replace; my stance is that I don't care if these constants get deprecated for a good long while, but I do want to guarantee that they will be deprecated <em>eventually</em>, though I'm not picky at how long that pre-deprecation period may be. cc <span class="user-mention" data-user-id="117909">@faern</span></p>



<a name="185966453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185966453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185966453">(Jan 17 2020 at 23:04)</a>:</h4>
<p>ultimately my motivation is that I really care that people searching the docs for "max" know which constant we expect them to use; I'm not especially concerned with making existing code throw warnings or feel pressured to update. this is intended to be an improvement to ergonomics and beginner ease. if there is some established solution to this <em>other</em> than deprecation, I would love to know about it!</p>



<a name="185966869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185966869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BurntSushi <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185966869">(Jan 17 2020 at 23:12)</a>:</h4>
<p>i think deprecating them eventually is probably fine, in accordance with whatever our normal procedures are. we've deprecated (what feels like) a lot of stuff at a fairly consistent pace, and i feel like not doing it for this would be a break from that norm.</p>
<p>i do still think it would be nice to stop being so deprecation happy, but can really appreciate the arguments in favor of doing it. a good middle road here might be to just make the period in which the replacement API exists without a corresponding deprecation be longer.</p>
<p>cc <span class="user-mention" data-user-id="219747">@Simon Sapin</span> since i know he was expressing opinions on this.</p>



<a name="185966997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185966997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185966997">(Jan 17 2020 at 23:15)</a>:</h4>
<p>Right, a good thing about <code>#[rustc_deprecated(since = "…")]</code> is that we can make the warnings start in releases arbitrarily far in the future</p>



<a name="185967320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185967320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185967320">(Jan 17 2020 at 23:20)</a>:</h4>
<p>I think there’s a whole spectrum of consequences to old code that keeps using something that has a better alternative. For example <code>std::mem::unitialized</code> is often UB. <code>str::trim_right</code> is named backwards if you’re doing Arabic text layout, so <code>trim_end</code> can make code easier to understand. But <code>i32::MAX</code> instead of <code>std::i32::MAX</code>… IMO the difference feels very marginal and supperficial</p>



<a name="185967344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185967344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185967344">(Jan 17 2020 at 23:21)</a>:</h4>
<p>How those various cases should translate exactly in terms of when to emit deprecation warnings, I don’t have a strong opinion</p>



<a name="185967410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185967410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185967410">(Jan 17 2020 at 23:22)</a>:</h4>
<p>Maybe we should add a mechanism to make something deprecated only in a new edition, for the very low-impact ones. Edition migration is typically when we’re already doing busywork</p>



<a name="185967727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185967727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185967727">(Jan 17 2020 at 23:29)</a>:</h4>
<p><span class="user-mention" data-user-id="256342">@bstrie</span> BTW when there’s only part of a proposal that has consensus (in this case the new constants) sending a first PR for that helps have it sooner and doesn’t mean rejecting the rest</p>



<a name="185968061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185968061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185968061">(Jan 17 2020 at 23:35)</a>:</h4>
<p><span class="user-mention" data-user-id="219747">@Simon Sapin</span> by "sending a PR" are you referring to having two separate RFCs, one for adding the new constants and another for deprecating them, or are you referring to rustc PRs? if the latter, then I believe @faern has already updated their rustc PR to add in these new constants without deprecating the old ones</p>



<a name="185968082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185968082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185968082">(Jan 17 2020 at 23:35)</a>:</h4>
<p>Implementation PR, not RFC</p>



<a name="185968086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185968086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185968086">(Jan 17 2020 at 23:35)</a>:</h4>
<p>I'm just about to push an update to the RFC which shuffles around the steps to imply that we could add the new constants and then decide upon deprecation sometime in the future</p>



<a name="185968331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185968331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185968331">(Jan 17 2020 at 23:39)</a>:</h4>
<p>I don't know if there currently exists a way to say "this item will only be seen as deprecated to users of an edition &gt;= $EDITION_X", but I'm also all for that if we're worried about churn</p>



<a name="185968345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185968345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185968345">(Jan 17 2020 at 23:39)</a>:</h4>
<p>after all, we're not <em>that</em> far out from a new edition... I can wait eighteen months :P</p>



<a name="185971996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185971996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BurntSushi <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185971996">(Jan 18 2020 at 00:48)</a>:</h4>
<p>i really like the idea of pushing some subset of deprecations to a new edition.</p>



<a name="185972219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/185972219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#185972219">(Jan 18 2020 at 00:52)</a>:</h4>
<p>would be good to keep that in mind as edition planning advances this year, although it might be out of scope to consider the exact mechanism for that right now :P</p>



<a name="186049500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186049500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186049500">(Jan 19 2020 at 18:10)</a>:</h4>
<p>Ping? did this topic become empty now after the split?</p>



<a name="186049520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186049520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186049520">(Jan 19 2020 at 18:11)</a>:</h4>
<p>The RFC2700 thread is now empty? Or I'm not understanding Zulip.</p>



<a name="186049678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186049678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186049678">(Jan 19 2020 at 18:15)</a>:</h4>
<p>I've moved messages around so that they're in the correct topics.</p>



<a name="186049740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186049740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186049740">(Jan 19 2020 at 18:16)</a>:</h4>
<p>When <a class="stream-topic" data-stream-id="219381" href="/#narrow/stream/219381-t-libs/topic/Deprecating.20compare_and_swap">#t-libs &gt; Deprecating compare_and_swap</a> was forked off, it appears that messages from before the discussion shifted to deprecating <code>compare_and_swap</code> were moved too, so I've moved those back.</p>



<a name="186049816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186049816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186049816">(Jan 19 2020 at 18:18)</a>:</h4>
<p>Ok. Copying my message over which was for this thread:</p>



<a name="186049817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186049817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186049817">(Jan 19 2020 at 18:18)</a>:</h4>
<p>I'm also fine with deprecating in the next edition. Just like <span class="user-mention" data-user-id="256342">@bstrie</span> I only care about that it will <em>eventually</em> be done. However, I think we should update the docs for the old ways of reaching the consts immediately upon stabilizing them. Something like a soft deprecation. So people can immediately see which ones they should pick if they are writing new code, without giving warnings to existing code.</p>



<a name="186051062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186051062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186051062">(Jan 19 2020 at 18:58)</a>:</h4>
<p>Yep, I agree that the docs should do so (nightly docs can essentially all point to the new locations)</p>



<a name="186051232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186051232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186051232">(Jan 19 2020 at 19:03)</a>:</h4>
<p>A question not very discussed is when to stabilize the new constants? In my first PR I just stabilized them instantly since I also deprecated the old ones instantly. But in the new smaller PR that just introduces the constants, they are introduced as unstable. I can adapt my PR either way. But I assume we want to get it merged as unstable for at least a while first to make sure it seems to work at all :)</p>



<a name="186052041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052041">(Jan 19 2020 at 19:28)</a>:</h4>
<p>hm, yes, though I imagine we'll want to move towards stabilization relatively quickly</p>



<a name="186052044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052044">(Jan 19 2020 at 19:28)</a>:</h4>
<p>certainly until they're stable I would feel odd even soft-deprecating the old ones</p>



<a name="186052118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052118">(Jan 19 2020 at 19:31)</a>:</h4>
<p>Certainly. We of course can't say that the old ones are not the recommended ones until there are usable replacements on stable. I agree to that. As I wrote above, clearly indicate to users to use the new ones when we stabilize them.</p>



<a name="186052226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052226">(Jan 19 2020 at 19:34)</a>:</h4>
<p>mhm</p>
<p>So if I understand correctly we do have a PR which just adds the new constants, not changing the old ones, in any way, right? <a href="https://github.com/rust-lang/rust/pull/68325" target="_blank" title="https://github.com/rust-lang/rust/pull/68325">https://github.com/rust-lang/rust/pull/68325</a></p>



<a name="186052284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052284">(Jan 19 2020 at 19:36)</a>:</h4>
<p>Exactly! Except they redefine the old ones to use the values from the new ones in order to keep a single source of truth.</p>



<a name="186052289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052289">(Jan 19 2020 at 19:36)</a>:</h4>
<p>sure yes</p>



<a name="186052301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052301">(Jan 19 2020 at 19:37)</a>:</h4>
<p>I imagine though that redefinition is at fault for the test failure (since rustdoc is plausibly not being recursive)</p>
<p>Maybe we can flip the "canonical" to be the old ones for now?</p>



<a name="186052343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052343">(Jan 19 2020 at 19:38)</a>:</h4>
<p>Or someone tell me how to fix the test? That feels more productive than doing work in this PR to reverse it and then having to fix the test anyway and reverse it once again further down the road.</p>



<a name="186052354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052354">(Jan 19 2020 at 19:39)</a>:</h4>
<p>hm, yeah, trying to investigate the test itself now</p>



<a name="186052360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052360">(Jan 19 2020 at 19:39)</a>:</h4>
<p>I can't seem to find <code>PI</code> at all in that test</p>



<a name="186052361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052361">(Jan 19 2020 at 19:39)</a>:</h4>
<p>I don't even know how to run it locally. So very slow to iterate towards the CI.</p>



<a name="186052409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052409">(Jan 19 2020 at 19:40)</a>:</h4>
<p><code>./x.py test --stage 1 src/test/rustdoc</code> should work</p>



<a name="186052417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052417">(Jan 19 2020 at 19:41)</a>:</h4>
<p>you did modify the test case which is surprising to me</p>



<a name="186052420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052420">(Jan 19 2020 at 19:41)</a>:</h4>
<p>Maybe to try to debug?</p>



<a name="186052465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052465">(Jan 19 2020 at 19:42)</a>:</h4>
<p>Well, yes. Currently in the PR I remove the test. I tried various ways to fix it before that.</p>



<a name="186052482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052482">(Jan 19 2020 at 19:43)</a>:</h4>
<p>Oh I see <a href="https://github.com/rust-lang/rust/commit/bd51e02c7ab5eb27787da407e95d5b37cd9ba0d2" target="_blank" title="https://github.com/rust-lang/rust/commit/bd51e02c7ab5eb27787da407e95d5b37cd9ba0d2">https://github.com/rust-lang/rust/commit/bd51e02c7ab5eb27787da407e95d5b37cd9ba0d2</a> was what CI comment is about</p>



<a name="186052531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052531">(Jan 19 2020 at 19:44)</a>:</h4>
<p>Yup. Tried to switch to some other constant which was not an associated one. Since I assume the test was just about re-exporting a constant. That it was EPSILON was irrelevant I guessed.</p>



<a name="186052533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052533">(Jan 19 2020 at 19:44)</a>:</h4>
<p>Yes, that's true looks like it should be irrelevant</p>



<a name="186052542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052542">(Jan 19 2020 at 19:45)</a>:</h4>
<p>I would run it locally, and look in <code>build/&lt;triple&gt;/test/rustdoc/show-const-contents/</code> in your web browser to try and figure out what should go there</p>



<a name="186052765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052765">(Jan 19 2020 at 19:52)</a>:</h4>
<p>Uhm. Ok. I got the @has test to work. But the @!has still fails. Not exactly sure what that tries to test for. That the documentation does not contain <code>; //</code>? Well, the one for PI does <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="186052880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052880">(Jan 19 2020 at 19:56)</a>:</h4>
<p>Probably worth looking at the master-generated docs to try and see what that is looking for</p>



<a name="186052882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052882">(Jan 19 2020 at 19:56)</a>:</h4>
<p>might be e.g. testing that we don't show a comment or something like that</p>



<a name="186052890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186052890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186052890">(Jan 19 2020 at 19:57)</a>:</h4>
<p>It would seem like that's what it tests for. However, it does show the comment in my generated html. Not sure why it would suddenly do that for PI if it did not for EPSILON before.</p>



<a name="186053003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186053003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186053003">(Jan 19 2020 at 20:01)</a>:</h4>
<p>I don't know either :)</p>
<p>I don't have a lot of time to dig into this question myself, but we would likely want to answer it before changing the test.</p>



<a name="186053012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186053012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186053012">(Jan 19 2020 at 20:01)</a>:</h4>
<p>I pushed a new fix. It does test that the output is the same as I can see on <a href="https://doc.rust-lang.org/nightly/std/f32/consts/constant.PI.html" target="_blank" title="https://doc.rust-lang.org/nightly/std/f32/consts/constant.PI.html">https://doc.rust-lang.org/nightly/std/f32/consts/constant.PI.html</a>. So I guess all is well then? If the rustdoc people don't want the docs to contain what it currently contains that's not a problem for this PR</p>



<a name="186053138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186053138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186053138">(Jan 19 2020 at 20:03)</a>:</h4>
<p>On nightly EPSILON does not generate a comment after the value, but PI does. I guess it's something about the definition of the value being short enough or something.</p>



<a name="186054048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186054048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186054048">(Jan 19 2020 at 20:19)</a>:</h4>
<p>hm, okay, let's just drop the !has test for epsilon</p>



<a name="186059150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186059150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186059150">(Jan 19 2020 at 22:15)</a>:</h4>
<p>I'm pretty happy with the PR. I think the only thing missing is an issue number for the unstable attribute. So we would need a tracking issue I assume. But I guess we should get the RFC merged first. Anything left there?</p>



<a name="186082523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186082523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186082523">(Jan 20 2020 at 08:38)</a>:</h4>
<blockquote>
<p>A question not very discussed is when to stabilize the new constants?</p>
</blockquote>
<p>Is it possible to write code that works on older Stable Rust (with the old constants), in such a way that the new constants would shadow the old ones after they’re added? (Maybe <code>use std::i32; i32::MAX</code>?) If adding <em>unstable</em> constant regress that code we may need to add them as insta-stable</p>



<a name="186098133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098133">(Jan 20 2020 at 12:42)</a>:</h4>
<p><span class="user-mention" data-user-id="219747">@Simon Sapin</span> is there a <code>#[rustc_deprecate(edition = "...")]</code> that deprecates only after a particular edition ?</p>



<a name="186098178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098178">(Jan 20 2020 at 12:43)</a>:</h4>
<p>that way people writing code using older editions won't have to deal with the warnings</p>



<a name="186098422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098422">(Jan 20 2020 at 12:46)</a>:</h4>
<p>There is not, that I know of</p>



<a name="186098430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098430">(Jan 20 2020 at 12:46)</a>:</h4>
<p>But I think it could be interesting to add</p>



<a name="186098493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098493">(Jan 20 2020 at 12:47)</a>:</h4>
<p>I suppose it can be added when it is needed</p>



<a name="186098611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098611">(Jan 20 2020 at 12:48)</a>:</h4>
<p>I personally don't mind that much about whether the churn of deprecating things for consistency purposes is worth it or not, since it shouldn't really impact old code unless it has a <code>deny(warnings)</code>, in which case the authors wanted that code to break when these things happen</p>



<a name="186098659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098659">(Jan 20 2020 at 12:49)</a>:</h4>
<p>what we could do in a future edition is make it an error to use those</p>



<a name="186098683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098683">(Jan 20 2020 at 12:49)</a>:</h4>
<p>that feels more consistent with what we have been doing until now (deprecate in current edition, turn that into an error in the next one)</p>



<a name="186098761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186098761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186098761">(Jan 20 2020 at 12:50)</a>:</h4>
<p>from that point-of-view, the deprecation warning "warns" that it will become an error in the next edition, and <code>cargo fix</code> can trivially fix these</p>



<a name="186197779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186197779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186197779">(Jan 21 2020 at 16:10)</a>:</h4>
<p><span class="user-mention" data-user-id="219747">@Simon Sapin</span> doesn't name resolution always prefer anything explicitly <code>use</code>d before checking in the prologue, which is where the new constants would be defined? in any case I don't see how even intermixing them would ever possibly be a problem, since not only are they the same type, the old constants would be changed to be just re-exports of the new ones</p>



<a name="186197863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186197863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186197863">(Jan 21 2020 at 16:10)</a>:</h4>
<p>I don’t know, but either way I’d feel better with a test.</p>



<a name="186198006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186198006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186198006">(Jan 21 2020 at 16:12)</a>:</h4>
<p>And yeah, previously-valid code starting to use the new constant is only a problem if the new ones are <code>#[unstable]</code>. Once they are stable it’s not a problem since they have the same respective types and values</p>



<a name="186421412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186421412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186421412">(Jan 23 2020 at 18:51)</a>:</h4>
<p><span class="user-mention" data-user-id="219747">@Simon Sapin</span> I tried what you suggested, and it seems to not be a problem. I used a build of the compiler/std from the branch in my PR and when I <code>use std::u16</code> and later access <code>u16::MAX</code> it compiles without any warning. But if I remove the <code>use</code> then I get an error that <code>u16::MAX</code> is unstable. So existing code should not get errors that they use unstable library items.</p>



<a name="186421590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186421590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186421590">(Jan 23 2020 at 18:53)</a>:</h4>
<p>Thanks for trying it out! It still sounds like a good test to add, if there isn’t one already :)</p>



<a name="186421737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186421737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186421737">(Jan 23 2020 at 18:54)</a>:</h4>
<p>Add a test that tries to use <code>std::u16::MAX</code> and make sure it works without unlocking a feature? Seems like a very temporary test to me. We will likely stabilize the constants very soon after adding them, they just need to reach nightly a little while so we see if it causes any problems or not.</p>



<a name="186423601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186423601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186423601">(Jan 23 2020 at 19:11)</a>:</h4>
<p><span class="user-mention" data-user-id="219747">@Simon Sapin</span> I added it. Is this what you had in mind, or did I misinterpret you? <a href="https://github.com/rust-lang/rust/pull/68325/commits/6438938d450fe3abdb5abbead3ad14823e4e75f6" target="_blank" title="https://github.com/rust-lang/rust/pull/68325/commits/6438938d450fe3abdb5abbead3ad14823e4e75f6">https://github.com/rust-lang/rust/pull/68325/commits/6438938d450fe3abdb5abbead3ad14823e4e75f6</a></p>



<a name="186423697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186423697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186423697">(Jan 23 2020 at 19:12)</a>:</h4>
<p>Yes exactly, thanks</p>



<a name="186424067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186424067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186424067">(Jan 23 2020 at 19:15)</a>:</h4>
<p>Great. Then I'm not sure what we are waiting for any longer. No one seems to oppose the RFC and we seem to agree approximately how to implement it. Could we have the RFC merged? If not is there anything I can do now to help unblock that?</p>



<a name="186425261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186425261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186425261">(Jan 23 2020 at 19:25)</a>:</h4>
<p>Yeah I'm a bit confused about why the RFC isn't merged yet. The FCP is finished and the discussion afterwards should happen on the tracking issue, right? <span class="user-mention" data-user-id="219747">@Simon Sapin</span> Should I simply merge it and create a tracking issue?</p>



<a name="186425335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186425335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186425335">(Jan 23 2020 at 19:26)</a>:</h4>
<p>(And sorry, forgot to check Zulip this week :&lt;)</p>



<a name="186425460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186425460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186425460">(Jan 23 2020 at 19:27)</a>:</h4>
<p>Yes, go ahead. Merging a creating a tracking issue is a manual process.</p>



<a name="186426335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186426335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186426335">(Jan 23 2020 at 19:34)</a>:</h4>
<p>Will do</p>



<a name="186426873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186426873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186426873">(Jan 23 2020 at 19:39)</a>:</h4>
<p><span class="user-mention" data-user-id="118772">@Lukas Kalbertodt</span> take a look at how I have merged RFCs in the past btw</p>



<a name="186427135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186427135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186427135">(Jan 23 2020 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> There is also <a href="https://forge.rust-lang.org/lang/rfc-merge-procedure.html" target="_blank" title="https://forge.rust-lang.org/lang/rfc-merge-procedure.html">this chapter in the Rust forge</a></p>



<a name="186427161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186427161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186427161">(Jan 23 2020 at 19:41)</a>:</h4>
<p>I guess you always did it pretty similarly to that?</p>



<a name="186427903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186427903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186427903">(Jan 23 2020 at 19:49)</a>:</h4>
<p><span class="user-mention" data-user-id="118772">@Lukas Kalbertodt</span> I think you linked to the wrong PR in the first bullet in the tracking issue.<br>
Anyway. I will go ahead and update the PR so the unstable attribute points to the correct issue.</p>



<a name="186428123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186428123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186428123">(Jan 23 2020 at 19:51)</a>:</h4>
<p>Yeah, I know, I will fix everything eventually. I am slow :D</p>



<a name="186429135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186429135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186429135">(Jan 23 2020 at 20:00)</a>:</h4>
<p><span class="user-mention" data-user-id="219747">@Simon Sapin</span> So I already adjusted the links in the PR, but i cannot merge it on GitHub. It says "at least one review required". Am I expected to merge it locally? Because it seems like the others always merged it via GitHub.</p>



<a name="186431553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186431553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186431553">(Jan 23 2020 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span>, do we need a github "review" to merge an RFC?</p>



<a name="186431565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186431565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186431565">(Jan 23 2020 at 20:24)</a>:</h4>
<p>dont think so</p>



<a name="186431904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186431904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186431904">(Jan 23 2020 at 20:28)</a>:</h4>
<p>I tried adding a review, but now I get "The base branch restricts merging to authorized users."</p>



<a name="186431915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186431915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186431915">(Jan 23 2020 at 20:28)</a>:</h4>
<p>Could I even push to <code>master</code>?</p>



<a name="186432452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186432452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186432452">(Jan 23 2020 at 20:34)</a>:</h4>
<p><span class="user-mention" data-user-id="219747">@Simon Sapin</span>  Sorry for ping again, but seems like I need a helping hand with this. Don't want to leave this PR in this half-merged state for so long. I didn't know I couldn't merge into <code>master</code> :&lt;</p>



<a name="186432649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186432649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186432649">(Jan 23 2020 at 20:37)</a>:</h4>
<p>Clicked the green button</p>



<a name="186432739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186432739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186432739">(Jan 23 2020 at 20:38)</a>:</h4>
<p>Thanks a bunch :)</p>



<a name="186432752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186432752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186432752">(Jan 23 2020 at 20:38)</a>:</h4>
<p>For the future: should I get the permission to also merge? Not sure if this is intended</p>



<a name="186433323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186433323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186433323">(Jan 23 2020 at 20:45)</a>:</h4>
<p>Maybe it’s tied to r+ permission?</p>



<a name="186433603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186433603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186433603">(Jan 23 2020 at 20:48)</a>:</h4>
<p>I think permissions on the rfc repository are currently ad-hoc, not tied to rust-lang/team</p>



<a name="186434755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186434755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186434755">(Jan 23 2020 at 21:02)</a>:</h4>
<p>yeah; I have write access to rust-lang/rfcs</p>



<a name="186439402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186439402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186439402">(Jan 23 2020 at 21:45)</a>:</h4>
<p>The PR adding the constants has been updated to point to the correct tracking issue. And the CI test is happy. I think the PR is ready for review/merge <span class="user-mention" data-user-id="118772">@Lukas Kalbertodt</span></p>



<a name="186439549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186439549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186439549">(Jan 23 2020 at 21:46)</a>:</h4>
<p><span class="user-mention" data-user-id="117909">@faern</span> Yip, saw that. But don't have any time today anymore. Will re-review it in the coming days, hopefully tomorrow.</p>



<a name="186439596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186439596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186439596">(Jan 23 2020 at 21:46)</a>:</h4>
<p>Ok, sweet. Great we made some progress today :)</p>



<a name="186523162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186523162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186523162">(Jan 24 2020 at 19:06)</a>:</h4>
<p>yes, thanks everyone for helping to work this through!</p>



<a name="186826122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186826122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186826122">(Jan 28 2020 at 20:38)</a>:</h4>
<p>The crater run seems to be stuck. It has been on 120832 completed jobs and 69% for quite a while now.</p>



<a name="186862027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186862027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186862027">(Jan 29 2020 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> Ping. Since you started the crater run. It's now been stuck at the same job for almost a day.</p>



<a name="186863736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186863736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186863736">(Jan 29 2020 at 08:02)</a>:</h4>
<p>fixed it</p>



<a name="186864449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/186864449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#186864449">(Jan 29 2020 at 08:18)</a>:</h4>
<p>Thanks! Oh, yeah. I see now that there was activity on the issue regarding this.</p>



<a name="187005196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187005196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187005196">(Jan 30 2020 at 16:42)</a>:</h4>
<p>Merged. Yay! Great work everyone. Hope shit does not hit the fan when the next nightly comes out :)</p>



<a name="187022605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187022605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187022605">(Jan 30 2020 at 19:39)</a>:</h4>
<p>I sure hope so too! =D</p>



<a name="187408613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187408613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187408613">(Feb 04 2020 at 22:47)</a>:</h4>
<p>I have now prepared a stabilization PR. I won't submit it tonight, but it's basically ready now at least. A bit more work than it sounds. Since I also had to update most examples to use the associated constants instead of the old ones. Plus add to the documentation of the old ones that they are outdated and the assoc consts should be used.</p>



<a name="187476420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187476420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187476420">(Feb 05 2020 at 17:42)</a>:</h4>
<p><span class="user-mention" data-user-id="118772">@Lukas Kalbertodt</span> What do you think is a suitable time to wait before stabilization? My take was that it's already decided that it will be stabilized unless we find any problems. And we have had a successful crater run plus it's been in nightly for a few days now without any complaints that I'm aware of. As such, we don't need to wait very long(?)</p>



<a name="187481890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187481890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187481890">(Feb 05 2020 at 18:42)</a>:</h4>
<p><span class="user-mention" data-user-id="117909">@faern</span>  I am not completely sure about the "minimum time to stabilization", but a few days are way too little I think. I usually expect features to cook on nightly for several release cycles at least before getting stabilized. I would advise you to push your stabilization commits to a branch of yours, to NOT create a PR and to link that branch in the tracking issue. Ala "I already did the code changes and am ready to create a PR. For anyone interested: &lt;branch&gt;".</p>



<a name="187481925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187481925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Kalbertodt <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187481925">(Feb 05 2020 at 18:42)</a>:</h4>
<p>But that's just my take on this ^_^</p>



<a name="187482157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187482157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187482157">(Feb 05 2020 at 18:45)</a>:</h4>
<p>I think it is not bad to stabilize soon -- I don't think we'll see much movement on use of these features before that happens since they're near-zero improvements on existing stable features. But I would personally give it a week or two to give it a little more time to bake.</p>



<a name="187482370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187482370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187482370">(Feb 05 2020 at 18:47)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="116122">@simulacrum</span>. It's a close to zero change basically. Very little impact. And no one will use it until we actually advise them to switch over.<br>
I'll push the code and link it in the tracking PR then and submit a PR when a bit over one week has passed.</p>



<a name="187482462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187482462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187482462">(Feb 05 2020 at 18:48)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> on that plan.</p>



<a name="187714515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/rfc2700/near/187714515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> faern <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/rfc2700.html#187714515">(Feb 08 2020 at 12:07)</a>:</h4>
<p>I have now published the PR stabilizing the constants.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
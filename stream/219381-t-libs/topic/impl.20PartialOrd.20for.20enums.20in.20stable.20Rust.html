<html>
<head><meta charset="utf-8"><title>impl PartialOrd for enums in stable Rust · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html">impl PartialOrd for enums in stable Rust</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="258006098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258006098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258006098">(Oct 18 2021 at 10:19)</a>:</h4>
<p>Hey, am I right that <code>PartialOrd</code> for enums cannot be implemented in stable Rust today? I was working on a <a href="https://github.com/rust-analyzer/rust-analyzer/pull/10529">codegen impl for Rust-Analyzer</a> last week, but it turns out the code we're generating is broken. Now that I'm looking closer into it, it seems like it may not be possible at all?</p>
<p>Here's a playground with what I'm referring to:  <a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=c7508bdba6f4bf0b20234dd54c93dfb0">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=c7508bdba6f4bf0b20234dd54c93dfb0</a></p>



<a name="258006490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258006490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258006490">(Oct 18 2021 at 10:22)</a>:</h4>
<p>It seems like the obvious fix would be to <code>impl PartialOrd for Discriminant</code> (<a href="https://doc.rust-lang.org/std/mem/struct.Discriminant.html">docs</a>). But <a href="https://doc.rust-lang.org/std/marker/trait.DiscriminantKind.html#associatedtype.Discriminant"><code>std::marker::Discriminant</code></a> (used via (<a href="https://doc.rust-lang.org/core/intrinsics/fn.discriminant_value.html"><code>intrinsics::discriminant_value</code></a>) does not guarantee <code>PartialOrd</code>, which makes me unsure about how viable that is.</p>



<a name="258007168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258007168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258007168">(Oct 18 2021 at 10:28)</a>:</h4>
<p>tldr of what I'm talking about:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// `x` implements `PartialOrd` here, but this only works on unstable Rust.</span>
<span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">core</span>::<span class="n">intrinsics</span>::<span class="n">discriminant_value</span><span class="p">(</span><span class="o">&amp;*</span><span class="bp">self</span><span class="p">);</span><span class="w"></span>

<span class="c1">// `y` does not implement `PartialOrd`, but this works on stable Rust.</span>
<span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">core</span>::<span class="n">mem</span>::<span class="n">discriminant</span><span class="p">(</span><span class="o">&amp;*</span><span class="bp">self</span><span class="p">);</span><span class="w"></span>
</code></pre></div>



<a name="258007367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258007367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Wagner-Hall <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258007367">(Oct 18 2021 at 10:30)</a>:</h4>
<p>As Discriminant is meant to be opaque, it seems strange to expose its ordering. It feels like <a href="https://github.com/rust-lang/rust/pull/81642">https://github.com/rust-lang/rust/pull/81642</a> would be something more firm to build on? Ordering explicitly by the explicit numeric discriminant</p>



<a name="258009491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258009491" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258009491">(Oct 18 2021 at 10:50)</a>:</h4>
<p>you can hash the discriminant and sort by that <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> . You can implement a "nop-hash" to make this a zero cost operation</p>



<a name="258009981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258009981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258009981">(Oct 18 2021 at 10:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust/near/258009491">said</a>:</p>
<blockquote>
<p>you can hash the discriminant and sort by that <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> . You can implement a "nop-hash" to make this a zero cost operation</p>
</blockquote>
<p>lmao; not sure if I'd want to codegen this directly into unsuspecting user's source code :P</p>



<a name="258010871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258010871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258010871">(Oct 18 2021 at 11:02)</a>:</h4>
<p>oooh, I see, sorry, I kind of assumed you were writing a custom derive crate XD</p>



<a name="258011066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258011066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258011066">(Oct 18 2021 at 11:04)</a>:</h4>
<p>is this only for enums with field-less variants?</p>



<a name="258013010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258013010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258013010">(Oct 18 2021 at 11:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust/near/258011066">said</a>:</p>
<blockquote>
<p>is this only for enums with field-less variants?</p>
</blockquote>
<p>yep, exactly</p>



<a name="258018571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258018571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258018571">(Oct 18 2021 at 12:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust/near/258009491">said</a>:</p>
<blockquote>
<p>you can hash the discriminant and sort by that <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> . You can implement a "nop-hash" to make this a zero cost operation</p>
</blockquote>
<p>I wouldn't rely on that.</p>



<a name="258024222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258024222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258024222">(Oct 18 2021 at 12:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211722">Yoshua Wuyts [he/they]</span> <a href="#narrow/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust/near/258013010">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust/near/258011066">said</a>:</p>
<blockquote>
<p>is this only for enums with field-less variants?</p>
</blockquote>
<p>yep, exactly</p>
</blockquote>
<p>in that case, can't we always use an <code>as</code> cast to get the integer value? Not necessarily as efficient as the discriminant fetching, but close</p>



<a name="258024374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258024374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258024374">(Oct 18 2021 at 12:59)</a>:</h4>
<p>ohhh, yes maybe? -- hadn't considered that.</p>



<a name="258024446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258024446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258024446">(Oct 18 2021 at 12:59)</a>:</h4>
<p>probably converting to usize should do the trick?</p>



<a name="258024788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258024788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258024788">(Oct 18 2021 at 13:01)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> hmm, not sure how to make that work tho. If I try to cast <code>Discriminant</code> I get "attempting to cast non-primitive". If I try and cast self/other I get:</p>
<div class="codehilite"><pre><span></span><code>   Compiling playground v0.0.1 (/playground)
error[E0606]: casting `&amp;Bar` as `usize` is invalid
  --&gt; src/lib.rs:55:29
   |
55 |             let __self_vi = self as usize;
   |                             ^^^^^^^^^^^^^
   |
   = help: cast through a raw pointer first
</code></pre></div>



<a name="258024893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258024893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258024893">(Oct 18 2021 at 13:02)</a>:</h4>
<p>you need to deref self, as you got a <code>&amp;Self</code></p>



<a name="258025037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025037">(Oct 18 2021 at 13:03)</a>:</h4>
<p>aaw</p>



<a name="258025042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025042">(Oct 18 2021 at 13:03)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>   Compiling playground v0.0.1 (/playground)
error[E0507]: cannot move out of `*self` which is behind a shared reference
  --&gt; src/lib.rs:55:29
   |
55 |             let __self_vi = (*self) as usize;
   |                             ^^^^^^^ move occurs because `*self` has type `Bar`, which does not implement the `Copy` trait
</code></pre></div>
<p>Feel like I'm still doing something wrong</p>



<a name="258025043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025043">(Oct 18 2021 at 13:03)</a>:</h4>
<p>can't move <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="258025051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025051">(Oct 18 2021 at 13:03)</a>:</h4>
<p>ya</p>



<a name="258025055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025055">(Oct 18 2021 at 13:03)</a>:</h4>
<p>yea</p>



<a name="258025214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025214">(Oct 18 2021 at 13:04)</a>:</h4>
<p>I hoped these casts were non-consuming</p>



<a name="258025529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts [he/they] <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025529">(Oct 18 2021 at 13:06)</a>:</h4>
<p>eep :(</p>



<a name="258025741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258025741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258025741">(Oct 18 2021 at 13:08)</a>:</h4>
<p>so... maybe suggest making the enum Copy at the same time?</p>



<a name="258035742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258035742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258035742">(Oct 18 2021 at 14:17)</a>:</h4>
<p>Why couldn't the generated code use match?</p>



<a name="258052820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258052820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258052820">(Oct 18 2021 at 16:02)</a>:</h4>
<p>that would give you a n^2 amount of match arms I think?</p>



<a name="258054470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258054470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258054470">(Oct 18 2021 at 16:12)</a>:</h4>
<p>you could use one match per enum to produce a numerical value and then compare those</p>



<a name="258056061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258056061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258056061">(Oct 18 2021 at 16:21)</a>:</h4>
<p>I think for a derive that would be ok, but for code that will end up committed... idk, feels kinda noisy</p>



<a name="258100375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258100375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258100375">(Oct 18 2021 at 21:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust/near/258025741">said</a>:</p>
<blockquote>
<p>so... maybe suggest making the enum Copy at the same time?</p>
</blockquote>
<p>Definitely seems weird for a field-less enum to not be <code>Copy</code>, yeah.</p>



<a name="258101506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258101506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258101506">(Oct 18 2021 at 21:14)</a>:</h4>
<p>(TBH, I wish that the normal <code>PartialOrd</code> was <code>None</code> for different variants.  It always seems so arbitrary that, say, <code>LlvmInlineAsm</code> &lt; <code>CopyNonOverlapping</code>.  And that would make the codegen way simpler, too.)</p>



<a name="258101677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/impl%20PartialOrd%20for%20enums%20in%20stable%20Rust/near/258101677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust.html#258101677">(Oct 18 2021 at 21:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="336670">Daniel Wagner-Hall</span> <a href="#narrow/stream/219381-t-libs/topic/impl.20PartialOrd.20for.20enums.20in.20stable.20Rust/near/258007367">said</a>:</p>
<blockquote>
<p>As Discriminant is meant to be opaque, it seems strange to expose its ordering.</p>
</blockquote>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> Especially since you can call it on other people's enums, and I wouldn't want to make it a breaking change for people to reorder their enums (if they haven't semi-explicitly exposed that order already somehow).</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
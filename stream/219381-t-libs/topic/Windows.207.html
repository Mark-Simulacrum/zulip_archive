<html>
<head><meta charset="utf-8"><title>Windows 7 · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html">Windows 7</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277412034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277412034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277412034">(Apr 01 2022 at 12:50)</a>:</h4>
<p>Let's talk about Windows 7! Well, maybe not immediately but I wanted to put this somewhere on the record (so to speak) so that it can hopefully be considered sometime this year.</p>
<p>Windows 7 left mainstream support in 2015 and extended support in 2020. Today it hangs on, only receiving security updates and then only for enterprise customers who are willing to pay a fair amount. Even that ends in January 2023 (or 2024 for Windows 7 POS).</p>
<p>On the Rust side of things, Windows 7 is not tested in CI. As far as I'm aware, there are not people actively working to maintain Rust's support on Windows 7 (though, generally speaking, important issues will be fixed eventually).</p>
<p>All this preamble is to say that I think it's overdue to list Windows 7 as a tier 2 platform for the std at least. This would not mean changing anything. Rather it's a statement of where we are at. Windows 7 would still receive the support it's currently getting. Maybe more if people notice and decide to contribute.</p>
<hr>
<p>Longer term I wonder if we could somehow ship more than one pre-built standard library? Like a fully tier 1 supported std and a "downlevel" library that aims for wider support for tier 2 and 3 OS versions (though potentially at a runtime cost). This might also allow for a smoother deprecation process when that time comes. I'm not looking to pursue this right now but I thought I'd put it out there.</p>



<a name="277413083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277413083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277413083">(Apr 01 2022 at 12:57)</a>:</h4>
<p>XP support was simply dropped, not demoted to a lower tier. Is there a reason to keep windows 7 around longer?</p>



<a name="277413461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277413461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277413461">(Apr 01 2022 at 13:00)</a>:</h4>
<p>Firefox has a long tail of Windows support, I expect they still see a not-insignificant number of Windows 7 users: <a href="https://www.mozilla.org/en-US/firefox/98.0.2/system-requirements/">https://www.mozilla.org/en-US/firefox/98.0.2/system-requirements/</a></p>



<a name="277413740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277413740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277413740">(Apr 01 2022 at 13:01)</a>:</h4>
<p>Yes. I'd not want to outright drop Windows 7 at this point. Mostly because it is used and I don't think it's too burdensome to offer at least some support. I do however feel that claiming tier 1 support is a bit misleading.</p>



<a name="277413827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277413827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277413827">(Apr 01 2022 at 13:02)</a>:</h4>
<p>sure, tier 2 sounds right</p>



<a name="277413879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277413879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277413879">(Apr 01 2022 at 13:02)</a>:</h4>
<p>but I think that's a t-compiler matter</p>



<a name="277414170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277414170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277414170">(Apr 01 2022 at 13:04)</a>:</h4>
<p>Hm, is it necessarily? It seems like there's a distinction between compiler support and std support?</p>



<a name="277415295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277415295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277415295">(Apr 01 2022 at 13:13)</a>:</h4>
<p>all I know is that when I want to <em>promote</em> targets to tier 2, I have to go through the compiler team :P</p>



<a name="277415950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277415950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277415950">(Apr 01 2022 at 13:18)</a>:</h4>
<p>For sure. But I mean, I'm not looking to demote the whole target. Hm, if I'm reading the <a href="https://doc.rust-lang.org/nightly/rustc/target-tier-policy.html#tier-1-target-policy">target tier policy</a> I guess the target could be split in two and then only one demoted. I'm not quite sure how that would work though? Requiring a whole new target triple seems heavy handed.</p>



<a name="277418097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277418097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277418097">(Apr 01 2022 at 13:33)</a>:</h4>
<p>Most likely the current windows target would be redefined to be "modern windows (old windows not tested)", and then a separate target made for "Windows, including as far back as Windows 7"</p>



<a name="277423613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277423613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277423613">(Apr 01 2022 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="330154">@The 8472</span> We do have XP at tier 3.</p>



<a name="277423629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277423629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277423629">(Apr 01 2022 at 14:09)</a>:</h4>
<p>It was demoted.</p>



<a name="277424066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277424066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277424066">(Apr 01 2022 at 14:12)</a>:</h4>
<p>There was a MCP to deprecate it. But you're right, it was demoted before that.</p>



<a name="277424108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277424108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277424108">(Apr 01 2022 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="260325">@Chris Denton</span> The main reason to split the std support would be if there are specific high-value things we could improve by assuming Windows 8.</p>



<a name="277424183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277424183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277424183">(Apr 01 2022 at 14:13)</a>:</h4>
<p>To make it worth having two targets, rather than just downgrading and deprecating Windows 7 support.</p>



<a name="277424287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277424287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277424287">(Apr 01 2022 at 14:14)</a>:</h4>
<p>Even then, I would ask if we should just remove Windows 7 support rather than split it.</p>



<a name="277424653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277424653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277424653">(Apr 01 2022 at 14:16)</a>:</h4>
<blockquote>
<p>the proposed target must document to the satisfaction of the approving teams why the specific difference in baseline expectations provides sufficient value to justify a separate target.<br>
requiring justification for a new target at a lower tier for the older OS versions</p>
</blockquote>



<a name="277424907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277424907" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277424907">(Apr 01 2022 at 14:18)</a>:</h4>
<p>Well I think completely removing Windows 7 support would be controversial. And jumping straight from tier 1 to unsupported feels unfair. Like there should be some interim period.</p>



<a name="277424971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277424971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277424971">(Apr 01 2022 at 14:19)</a>:</h4>
<p>(deleted)</p>



<a name="277425286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277425286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277425286">(Apr 01 2022 at 14:21)</a>:</h4>
<p>We could put out an announcement and then do it some time later.</p>



<a name="277426904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277426904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277426904">(Apr 01 2022 at 14:32)</a>:</h4>
<p>Hm, in that case I feel like an announcement should be made sooner rather than later. So people have as much notice as possible.</p>



<a name="277427908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277427908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277427908">(Apr 01 2022 at 14:39)</a>:</h4>
<p>I would prefer to just demote it rather than removing it, unless there's some concrete harm in leaving it</p>



<a name="277427964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277427964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277427964">(Apr 01 2022 at 14:39)</a>:</h4>
<p>I highly doubt that windows 7 is the most broken target that rust "supports" :P</p>



<a name="277428066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277428066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277428066">(Apr 01 2022 at 14:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="256342">bstrie</span> <a href="#narrow/stream/219381-t-libs/topic/Windows.207/near/277427908">said</a>:</p>
<blockquote>
<p>I would prefer to just demote it rather than removing it, unless there's some concrete harm in leaving it</p>
</blockquote>
<p>The question is when to do which. I'd rather not remove it with <em>zero</em> notice, but given appropriate notice, we get more benefit from removing it than deprecating it, because then we can use Windows 8 APIs.</p>



<a name="277428098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277428098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277428098">(Apr 01 2022 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="260325">@Chris Denton</span> Do you have a list of things we get to start depending on that became available in Windows 8?</p>



<a name="277428268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277428268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277428268">(Apr 01 2022 at 14:42)</a>:</h4>
<p>Not off hand. This is all moving a lot faster than I had anticipated.</p>



<a name="277428977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277428977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277428977">(Apr 01 2022 at 14:47)</a>:</h4>
<p>There could be argument for bumping the minimum support up to Windows 10. Windows 8.1 support ends in 2023 as well and its market share is tiny compared to 7.</p>



<a name="277431169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277431169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277431169">(Apr 01 2022 at 15:01)</a>:</h4>
<p>note that, according to my link above, firefox still supports windows 7 and 8</p>



<a name="277436348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277436348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277436348">(Apr 01 2022 at 15:36)</a>:</h4>
<p>As far as I can tell, we aren't building or running tests on Windows 7 in bors so isn't Windows 7 de facto Tier 3 anyway per the RFC?</p>



<a name="277437368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437368">(Apr 01 2022 at 15:43)</a>:</h4>
<p>tier 2 is the "we're running anything at all", tier 3 is just "this might work"</p>



<a name="277437387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437387">(Apr 01 2022 at 15:43)</a>:</h4>
<p>ah I see what you're saying</p>



<a name="277437423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437423">(Apr 01 2022 at 15:43)</a>:</h4>
<p>Right, afaik we're <em>not</em> running anything on Windows 7 <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="277437462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437462">(Apr 01 2022 at 15:44)</a>:</h4>
<p>tier 2 is <em>building</em> the target</p>



<a name="277437534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437534">(Apr 01 2022 at 15:44)</a>:</h4>
<p>we don't run anything for most of the tier-2 linux arches</p>



<a name="277437567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437567">(Apr 01 2022 at 15:44)</a>:</h4>
<p>(I'm not saying we should immediately announce Win 7 is Tier 3 but just that we probably need to re-evaluate our supported versions of Windows in light of the target tier RFC)</p>



<a name="277437610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437610">(Apr 01 2022 at 15:44)</a>:</h4>
<p>Do we build against a Win 7 SDK?</p>



<a name="277437880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277437880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277437880">(Apr 01 2022 at 15:46)</a>:</h4>
<p>I'd have to check but I'm pretty sure we don't.</p>



<a name="277438221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277438221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277438221">(Apr 01 2022 at 15:49)</a>:</h4>
<p>This was all I could find in <code>src/ci</code> so I think the MSVC targets at least use a pretty recent version of the Windows 10 SDK. <a href="https://github.com/rust-lang/rust/blob/44628f7273052d0bb8e8218518dacab210e1fe0d/src/ci/scripts/install-clang.sh#L41">https://github.com/rust-lang/rust/blob/44628f7273052d0bb8e8218518dacab210e1fe0d/src/ci/scripts/install-clang.sh#L41</a></p>



<a name="277439868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277439868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277439868">(Apr 01 2022 at 16:00)</a>:</h4>
<p>Following the trail from there it seems we used to use whatever the latest version was on the CI. But now it's locked to 19041 because of clang issues.</p>



<a name="277455026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277455026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277455026">(Apr 01 2022 at 17:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/219381-t-libs/topic/Windows.207/near/277436348">said</a>:</p>
<blockquote>
<p>As far as I can tell, we aren't building or running tests on Windows 7 in bors so isn't Windows 7 de facto Tier 3 anyway per the RFC?</p>
</blockquote>
<p>By that argument, if we run tests on Windows 10, then Windows 8 is de-facto tier 3.</p>



<a name="277455054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277455054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277455054">(Apr 01 2022 at 17:50)</a>:</h4>
<p>Not saying I disagree with that argument...</p>



<a name="277457176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277457176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277457176">(Apr 01 2022 at 18:04)</a>:</h4>
<p>If it can remain Tier 2 then we should aim to keep at least that much. Lots of places still do even go as far back as XP. Can't this be often handled with cfg and such?</p>



<a name="277458143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277458143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277458143">(Apr 01 2022 at 18:10)</a>:</h4>
<p>since <code>std</code> is pre-compiled, we can only meaningfully <code>cfg</code> it for distinct targets</p>



<a name="277458666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277458666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277458666">(Apr 01 2022 at 18:14)</a>:</h4>
<p>This is why in the OP I suggested some mechanism for selecting between two pre-built stdlibs for the same target. Not sure how possible that would be tho.</p>



<a name="277459091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277459091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277459091">(Apr 01 2022 at 18:17)</a>:</h4>
<p>are there changes that would be more significant than possible at runtime? (vs. <code>ENOSYS</code>-like fallbacks)</p>



<a name="277459147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277459147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277459147">(Apr 01 2022 at 18:17)</a>:</h4>
<blockquote>
<p>since <code>std</code> is pre-compiled, we can only meaningfully <code>cfg</code> it for distinct targets</p>
</blockquote>
<p>Yes, "old windows" would be a separate target.</p>



<a name="277461353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277461353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277461353">(Apr 01 2022 at 18:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/219381-t-libs/topic/Windows.207/near/277459091">said</a>:</p>
<blockquote>
<p>are there changes that would be more significant than possible at runtime? (vs. <code>ENOSYS</code>-like fallbacks)</p>
</blockquote>
<p>Hm, I <em>think</em> most everything can potentially be done at runtime.  Like with platform detection or fallbacks if things fail. It's why I kinda thought a separate target felt like overkill.</p>



<a name="277947235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/277947235" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#277947235">(Apr 05 2022 at 21:39)</a>:</h4>
<p>AFAIK tier 1 <code>windows-gnu</code> uses so old mingw-w64 it might default to something older then Win 7. This allows to use newer APIs directly however (without C headers).<br>
Unfortunately I'm away from home so cannot vieify it.</p>



<a name="278420864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/278420864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#278420864">(Apr 09 2022 at 17:26)</a>:</h4>
<p>After having thought some more about this I think if we're going to simply drop it when the time comes then we should make a statement saying that Windows 7 stdlib will be supported at least until 10th January 2023 (or something like that). And note that Windows 7 is not tested in CI and relies on the community to do testing and submit fixes. I do think it's currently too early to outright remove it but it makes sense to give people warning about the current situation.</p>
<p>And maybe the <a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html">platform support</a> page could have a note attached to the tier 1 Windows targets, mentioning the lack of CI tests for Windows 7.</p>



<a name="278421273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/278421273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#278421273">(Apr 09 2022 at 17:34)</a>:</h4>
<p>So the same target is in two tiers at once?</p>



<a name="278421385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/278421385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#278421385">(Apr 09 2022 at 17:37)</a>:</h4>
<p>I meant similar to how there's a note attached to <code>aarch64-unknown-linux-gnu</code>.</p>



<a name="278423887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/278423887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#278423887">(Apr 09 2022 at 18:30)</a>:</h4>
<p>I made a small PR (<a href="https://github.com/rust-lang/rust/issues/95861">#95861</a>) with some suggested wording.</p>



<a name="278473564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/278473564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luqman Aden <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#278473564">(Apr 10 2022 at 15:21)</a>:</h4>
<p>There was a pre-rfc that tried to add a way to talk about different versions of windows within the same target: <a href="#narrow/stream/242869-t-compiler.2Fwindows/topic/.28Pre-RFC.3F.29.20target-api.2Fos-version">https://rust-lang.zulipchat.com/#narrow/stream/242869-t-compiler.2Fwindows/topic/.28Pre-RFC.3F.29.20target-api.2Fos-version</a></p>



<a name="278474027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/Windows%207/near/278474027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/Windows.207.html#278474027">(Apr 10 2022 at 15:30)</a>:</h4>
<p>I'd really love that for a lot of reasons but stdlib is prebuilt so we'd still need two stdlibs.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>libtest changes · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html">libtest changes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="236809755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/236809755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#236809755">(Apr 30 2021 at 09:41)</a>:</h4>
<p>as discussed in <a href="https://github.com/rust-lang/rust/pull/83857">https://github.com/rust-lang/rust/pull/83857</a>, I would like to make a change to libtest to show <br>
<code>test test_dir - f (line n) ... checked</code><br>
for doctest which are not run (like for no_run or compile_fail).<br>
Is it Ok if implement that ? I prefer asking before working on something that is not wanted :)</p>



<a name="236978486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/236978486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#236978486">(May 01 2021 at 15:47)</a>:</h4>
<p>I am asking that in the right place ?</p>



<a name="236981011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/236981011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#236981011">(May 01 2021 at 16:26)</a>:</h4>
<p>I'm not on the libs team, but I'm not sure if that's more a libs team thing or a devtools team thing. Cargo and such fall under the devtools team, but there's not really a dedicated team just for the test runner...</p>



<a name="236981207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/236981207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#236981207">(May 01 2021 at 16:29)</a>:</h4>
<p>I don't think we should expand libtest to support even more states, but it seems reasonable to embed the 'kind' if possible into the name of the test, so you'd end up with <code> test test_dir - f (line n) - checked ... ok</code> or so</p>



<a name="237040961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237040961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237040961">(May 02 2021 at 09:37)</a>:</h4>
<p>yes, libtest technically falls under T-libs</p>



<a name="237041011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237041011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237041011">(May 02 2021 at 09:38)</a>:</h4>
<p>i personally think it'd be good if the lines still end in <code>... ok</code>. but maybe some other part of the line could clarify the type of test (run/panic/check/...)</p>



<a name="237041034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237041034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237041034">(May 02 2021 at 09:38)</a>:</h4>
<p><code>run ... ok</code>, <code>compile ... ok</code>, <code>compile fail ... ok</code>, etc.</p>



<a name="237059118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237059118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237059118">(May 02 2021 at 15:04)</a>:</h4>
<p>Would you like that I work on that, my main question is that would it be useful (and that I am not wasting my time <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> )</p>



<a name="237068682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237068682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237068682">(May 02 2021 at 17:43)</a>:</h4>
<p>It seems easy enough anyway. I will do a PR and I will see <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="237071341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237071341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237071341">(May 02 2021 at 18:23)</a>:</h4>
<p><span class="user-mention" data-user-id="404353">@Aliénore Bouttefeux</span> a publicly visible change like this will require approval from at least 5 of the 7 voting members of the libs team, and any single member can block it if they have a concern. so i can't promise you that it will be accepted. but i think it'd be a good addition that has a good chance of being accepted.</p>



<a name="237071371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237071371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237071371">(May 02 2021 at 18:23)</a>:</h4>
<p>ok thanks <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="237071458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237071458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237071458">(May 02 2021 at 18:25)</a>:</h4>
<p>you could also open an issue first with the exact change to the output you want to make, and then i can start the voting process there before you start the implementation. but having a concrete change (PR) to talk about might make things easier :)</p>



<a name="237071559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237071559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237071559">(May 02 2021 at 18:26)</a>:</h4>
<p>Sure I will open a issue</p>



<a name="237071872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237071872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237071872">(May 02 2021 at 18:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310399">Mara</span> <a href="#narrow/stream/219381-t-libs/topic/libtest.20changes/near/237071458">said</a>:</p>
<blockquote>
<p>you could also open an issue first with the exact change to the output you want to make, and then i can start the voting process there before you start the implementation. but having a concrete change (PR) to talk about might make things easier :)</p>
</blockquote>
<p>Should I open on rust-lang/rust and which template should I use ?</p>



<a name="237072543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237072543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237072543">(May 02 2021 at 18:43)</a>:</h4>
<p>or maybe it is more logical to do it on the internals forum</p>



<a name="237073212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237073212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237073212">(May 02 2021 at 18:55)</a>:</h4>
<p><span class="user-mention" data-user-id="404353">@Aliénore Bouttefeux</span> depends what your goal is. on the internals forum you can get feedback from the community with their ideas. if you are sure about the direction and just want approval from the libs team i'd just open a PR on rust-lang/rust. i was just saying that if you think such a PR is a lot of work and you rather have confirmation that the change is acceptable before implementing it, you can open an issue instead.</p>



<a name="237073320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237073320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237073320">(May 02 2021 at 18:56)</a>:</h4>
<p>It is not a lot of work I already have a proof of concept. I am currently waiting on the tests to finish</p>



<a name="237073335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237073335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237073335">(May 02 2021 at 18:56)</a>:</h4>
<p>okay. then just send the PR once it's ready :)</p>



<a name="237073375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237073375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237073375">(May 02 2021 at 18:57)</a>:</h4>
<p>ok <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> I just need to bless some tests. (and anyway the fmt check did not pass, I forgot to call x.py fmt)</p>



<a name="237157987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/libtest%20changes/near/237157987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aliénore Bouttefeux <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/libtest.20changes.html#237157987">(May 03 2021 at 13:09)</a>:</h4>
<p>opened <a href="https://github.com/rust-lang/rust/pull/84863">https://github.com/rust-lang/rust/pull/84863</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>upper/lower bound num trait · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html">upper/lower bound num trait</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278659054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278659054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278659054">(Apr 12 2022 at 07:54)</a>:</h4>
<p>(History: <a href="https://internals.rust-lang.org/t/please-can-we-add-a-basic-num-trait/16449/13">https://internals.rust-lang.org/t/please-can-we-add-a-basic-num-trait/16449/13</a> )</p>
<p>I would dearly like MIN and MAX to be usable across different numeric types in the std lib without having to bold on any other crate. Something like this would be great: <a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=d261da401ca62ea52837402c30265c5f">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=d261da401ca62ea52837402c30265c5f</a></p>
<p>It seems a small enough in scope that it could conceivably be doable without getting dragged down into years of debate. (I'm not getting any younger!). What's the best route forward? Scottmcm has mentioned that MIN and MAX on floats are not their upper bounds so maybe we should bike shed the traits names. Maybe UpperFiniteBound and LowerFiniteBound ? There is also the question as to whether you want an associated const or a function.</p>



<a name="278659436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278659436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278659436">(Apr 12 2022 at 07:59)</a>:</h4>
<p>What's the best way to proceed? should I do a PR? Is an RFC overkill? (I hope so)</p>



<a name="278659782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278659782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278659782">(Apr 12 2022 at 08:02)</a>:</h4>
<p>That thread covers a few different ideas with different use cases. I'm not clear on the precise use case for the lower bound/upper bound trait. So one thing would be to be clear about the use case since that would shed light on the float behaviour. But, stepping back, more important is to make a case why this is needed at all. Having such traits in a third party crate seems like a good solution for this sort of thing, could you elaborate on why they should be in std specifically? And second, why Ord::{min, max} are not good enough?</p>



<a name="278660927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278660927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278660927">(Apr 12 2022 at 08:15)</a>:</h4>
<p>I find working generically with rust numbers painful because there's not enough traits to make it pleasant. It took me a long while to construct a way to figure out if a type was signed. That would have been easier if I had access to MIN. I've just had a PR where we have a trait to work around there not being MIN: FromStrRadixHelper ( <a href="https://github.com/rust-lang/rust/pull/95399">https://github.com/rust-lang/rust/pull/95399</a> ). The absence of MIN and MAX is something that keeps popping up over the years and seems a rough edge to me that we can fix. It will make using rust easier.</p>



<a name="278661136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278661136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278661136">(Apr 12 2022 at 08:17)</a>:</h4>
<p>Again here I have to use it in another library: <a href="https://github.com/gilescope/atoi_radix10/blob/e0bc6511b397878f8d5988d064460f32183a0b35/src/parse.rs#L36">https://github.com/gilescope/atoi_radix10/blob/e0bc6511b397878f8d5988d064460f32183a0b35/src/parse.rs#L36</a><br>
(yes it's a similar domain of doing something numerical but isn't all computation just numbers as wasm shows)</p>



<a name="278662141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278662141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278662141">(Apr 12 2022 at 08:29)</a>:</h4>
<p>If we only had one number type in rust then maybe having a trait would not be so important; But we have _many_ number types in the std lib. When num-traits was moved out of std lib before 1.0 it was done so that they could be iterated on and then gradually reintroduced and stabilised where appropriate. The trait's area is so small that there's little likelihood of future changes.</p>



<a name="278662356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278662356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278662356">(Apr 12 2022 at 08:31)</a>:</h4>
<p>Our 3 year goal is to make learning rust easier. Being able to get the min and max on a number I would see as a step in the direction of making rust easier for people to use out of the box.</p>



<a name="278662920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278662920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278662920">(Apr 12 2022 at 08:37)</a>:</h4>
<p>I'm unclear now if you're asking for a <code>Number</code> trait or for a min/max trait?</p>



<a name="278663141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278663141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278663141">(Apr 12 2022 at 08:39)</a>:</h4>
<p>Does the num crate satisfy your needs? I believe it was extracted out of the standard library before 1.0.</p>



<a name="278663215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278663215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278663215">(Apr 12 2022 at 08:40)</a>:</h4>
<p>From the playground you posted, it looks like its duplicating Ord, so I'd like to understand exactly what is wanted and why</p>



<a name="278667272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278667272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278667272">(Apr 12 2022 at 09:19)</a>:</h4>
<p>A min trait and a max trait. It seems to me that there's expressiveness by saying that a function or type only needs one of the bounds (Some types like bigint do not have an upper bound).</p>



<a name="278667576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278667576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Cope <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278667576">(Apr 12 2022 at 09:22)</a>:</h4>
<p>Ord is about comparisons, where as this is about having a generic way to access a number's minimum and maximum numbers that they can hold without overflowing. There are traits in num-traits for bounds and the suggestion is to bring them into the std lib.</p>



<a name="278675644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278675644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chayim Refael Friedman <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278675644">(Apr 12 2022 at 10:51)</a>:</h4>
<blockquote>
<p>Our 3 year goal is to make learning rust easier. Being able to get the min and max on a number I would see as a step in the direction of making rust easier for people to use out of the box.</p>
</blockquote>
<p>Yes, but these already exist. You want this as a trait, for generics, and I'd argue this is not a common enough use case to be included in std, and certainly not common for beginners.</p>



<a name="278689722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278689722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mejrs <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278689722">(Apr 12 2022 at 13:09)</a>:</h4>
<p>being generic over numbers is actually not all that useful. Also, it comes with a huge amount of traits and methods</p>



<a name="278717901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278717901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278717901">(Apr 12 2022 at 16:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120134">Giles Cope</span> <a href="#narrow/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait/near/278660927">said</a>:</p>
<blockquote>
<p>I've just had a PR where we have a trait to work around there not being MIN: FromStrRadixHelper ( <a href="https://github.com/rust-lang/rust/pull/95399">https://github.com/rust-lang/rust/pull/95399</a> ).</p>
</blockquote>
<p>FWIW, I don't find this argument particularly persuasive, since it's using a custom trait for <code>from_u32</code> and <code>checked_{add|sub|mul}</code> anyway.  It could easily have an <code>IS_SIGNED</code> set by the macro that implements the trait.  (This gets to <span class="user-mention silent" data-user-id="433532">mejrs</span>'s point about the enormous number of traits that would be needed to do all the numeric things generically.)</p>



<a name="278725741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278725741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278725741">(Apr 12 2022 at 17:33)</a>:</h4>
<p>A common issue with designing a numeric tower is that everyone looks at the tower from different directions, which means that there's usually not one "right" abstraction.</p>



<a name="278725907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278725907" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278725907">(Apr 12 2022 at 17:34)</a>:</h4>
<p>Another aspect to consider is how you want to allow for custom numeric types to participate in the abstractions.</p>



<a name="278729878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/upper/lower%20bound%20num%20trait/near/278729878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/upper.2Flower.20bound.20num.20trait.html#278729878">(Apr 12 2022 at 18:01)</a>:</h4>
<blockquote>
<p>being generic over numbers is actually not all that useful. Also, it comes with a huge amount of traits and methods</p>
</blockquote>
<p>Giles <em>clearly</em> has a use for generic <code>min</code> and <code>max</code>, so please hold back from saying that such a thing is not useful. That you don't have the same use for such a thing doesn't mean no one does.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
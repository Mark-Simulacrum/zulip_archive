<html>
<head><meta charset="utf-8"><title>ErrorKind::Other · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html">ErrorKind::Other</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251732311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251732311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251732311">(Sep 02 2021 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> thank you for the write up for the release notes in <a href="https://github.com/rust-lang/rust/pull/85746#issuecomment-861776466">https://github.com/rust-lang/rust/pull/85746#issuecomment-861776466</a> --</p>
<p>I am wondering if you could clarify something for me. That write up says "only match <code>ErrorKind::Other</code> if you're catching a constructed <code>std::io::Error</code> that uses that error kind.", but this seems like a bad idea -- in general, shouldn't code <em>always</em> use <code>_</code> instead of ErrorKind::Other? That is, it feels like we should perhaps add a deprecation for matching on ErrorKind::Other (and perhaps comparison to it, but that's harder). Obviously, constructing it outside of std still makes sense, but it seems that code should not match on it, as that creates the same problem for other libraries that std had, where they can't re-categorize later</p>



<a name="251740405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251740405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251740405">(Sep 02 2021 at 16:08)</a>:</h4>
<p>I personally agree, but I think that would break too much code out there.</p>



<a name="251740623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251740623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251740623">(Sep 02 2021 at 16:10)</a>:</h4>
<p>Suppose you have a library crate that needs to emit an io::Error (perhaps because you have to supply a function to some <em>other</em> library that wants a <code>-&gt; io::Result</code>), and there's no existing error that fits.</p>



<a name="251740741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251740741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251740741">(Sep 02 2021 at 16:10)</a>:</h4>
<p>So it's more or less accurate to emit <code>ErrorKind::Other</code> there.</p>



<a name="251740770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251740770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251740770">(Sep 02 2021 at 16:10)</a>:</h4>
<p>Now, suppose you want to write a test for your library.</p>



<a name="251741019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251741019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251741019">(Sep 02 2021 at 16:12)</a>:</h4>
<p>I think in that case it's reasonable for you to match your own emitted error.</p>



<a name="251741070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251741070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251741070">(Sep 02 2021 at 16:12)</a>:</h4>
<p>I don't, on the other hand, think it's a good idea for any other code <em>invoking</em> your library to match on <code>Other</code>, though.</p>



<a name="251741122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251741122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251741122">(Sep 02 2021 at 16:12)</a>:</h4>
<p>So perhaps we can narrow the recommendation...</p>



<a name="251741539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251741539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251741539">(Sep 02 2021 at 16:15)</a>:</h4>
<p>Edited my comment. Thoughts on the new text?</p>



<a name="251748199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251748199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251748199">(Sep 02 2021 at 16:59)</a>:</h4>
<p>Yeah, tests are always a bit weird</p>



<a name="251748291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/ErrorKind%3A%3AOther/near/251748291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/ErrorKind.3A.3AOther.html#251748291">(Sep 02 2021 at 16:59)</a>:</h4>
<p>New comment looks good</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
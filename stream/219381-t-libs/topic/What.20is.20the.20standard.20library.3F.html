<html>
<head><meta charset="utf-8"><title>What is the standard library? · t-libs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/index.html">t-libs</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html">What is the standard library?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254442108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254442108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254442108">(Sep 22 2021 at 21:26)</a>:</h4>
<p>A question for all of <span class="user-group-mention" data-user-group-id="2645">@T-libs-api</span>, <span class="user-group-mention" data-user-group-id="4493">@T-libs</span>, and everyone else who has an opinion on this:</p>
<ul>
<li>What is the standard library, or what should it be? That is, what kind of things should be part of it, and what shouldn't? What purpose does it have, and what purpose should it not have?</li>
</ul>
<p>We talked a bit about it during the meetings today, but it seems everyone has their own slightly different view on this topic. I'm curious to hear all the perspectives in a bit more detail. Overall there seems to be some consensus that e.g. 'arrayvec' should be in std (or core), while e.g. http parsing should not be. But many things fall in the gray area inbetween; for example mpmc channels. I'm curious to find the line between those and maybe define it a bit more clearly, if we can.</p>
<p>→ Can y'all give examples of where this border is for you? Examples of things that should and should not be in the standard library, and examples of things where the line starts to get blurry?</p>



<a name="254442809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254442809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254442809">(Sep 22 2021 at 21:33)</a>:</h4>
<p>core/alloc should prioritize code that requires unsafe to implement. This means data structures, atomics, etc.</p>
<p>std should do that and also include as much as possible to not have to deal with the OS. This means the file system, a time source  a randomness source, etc.</p>



<a name="254442971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254442971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254442971">(Sep 22 2021 at 21:34)</a>:</h4>
<p>Not member of either team, but I consider <code>core</code> to be better at being a good <code>std</code> than libstd is. My benchmark for a good standard library is when people don't see a need to implement an alternative way to do something that the <code>std</code> provides. (this of course makes an implementation of <code>std</code> becoming bad inevitable over time, its only a question of what timescale we are talking about)</p>



<a name="254443054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443054">(Sep 22 2021 at 21:35)</a>:</h4>
<p>One sticking point for me is cap-std, for example.</p>



<a name="254443217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443217">(Sep 22 2021 at 21:36)</a>:</h4>
<p>I think it was Scott who once made the point that the prelude favors small modules/programs. The standard library is an extension of that. What's in the standard library is easier for small programs to do without having to look for the right dep and decide to trust it.</p>
<p>So I actually don't care at all if the std filesystem api is perfect, it should instead be easy to use (and it's not really). I don't care if the MPSC in std is the fastest, because it's already there and I can understand it in like 2 example code blocks.</p>



<a name="254443326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443326">(Sep 22 2021 at 21:37)</a>:</h4>
<p>My concern is reliable code first and easy to implement second, personally, which might be misguided in some way, but reliability is why I use Rust in the first place.</p>



<a name="254443394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443394">(Sep 22 2021 at 21:38)</a>:</h4>
<p>Socket APIs seem blurry. The parts that already are in std look obvious and yet they're not enough. We have socket2, the open PRs to get cmsg wrappers in std and various async libraries since the standard methods are only blocking and we don't even have an epoll wrapper in std.</p>



<a name="254443413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443413">(Sep 22 2021 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254442971">said</a>:</p>
<blockquote>
<p>Not member of either team, but I consider <code>core</code> to be better at being a good <code>std</code> than libstd is. My benchmark for a good standard library is when people don't see a need to implement an alternative way to do something that the <code>std</code> provides. (this of course makes an implementation of <code>std</code> becoming bad inevitable over time, its only a question of what timescale we are talking about)</p>
</blockquote>
<p>I do agree with this. I want to be sure the API doesn't have to make opinionated choices that people may disagree with; instead, I want to make sure that if std has an API it's the <em>obvious</em> choice.</p>



<a name="254443443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443443">(Sep 22 2021 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254443394">said</a>:</p>
<blockquote>
<p>Socket APIs seem blurry. The parts that already are in std look obvious and yet they're not enough. We have socket2, the open PRs to get cmsg wrappers in std and various async libraries since the standard methods are only blocking and we don't even have an epoll wrapper in std.</p>
</blockquote>
<p>I'm hoping that we add async APIs once we get the infrastructure and traits for those sorted.</p>



<a name="254443500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443500">(Sep 22 2021 at 21:38)</a>:</h4>
<p>I think "easy to implement" and "reliability" are not entirely opposed.<br>
I think a goal for Rust's std should be that code that relies on it does not feel <strong>brittle</strong>.</p>



<a name="254443681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443681">(Sep 22 2021 at 21:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254443500">said</a>:</p>
<blockquote>
<p>I think "easy to implement" and "reliability" are not entirely opposed.<br>
I think a goal for Rust's std should be that code that relies on it does not feel <strong>brittle</strong>.</p>
</blockquote>
<p>Good point, and what I was trying to say (poorly). I think there are a couple of APIs (the beforementioned filesystem API comes to mind, again) which I consider to be easy find brittle.</p>



<a name="254443731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443731">(Sep 22 2021 at 21:41)</a>:</h4>
<p>I think std should only contain things that most programs will use. Ideally things like async APIs would live in another crate (but ideally still in sysroot)</p>



<a name="254443742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254443742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254443742">(Sep 22 2021 at 21:41)</a>:</h4>
<p>what's the advantage of that?</p>



<a name="254444037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444037">(Sep 22 2021 at 21:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254443054">said</a>:</p>
<blockquote>
<p>One sticking point for me is cap-std, for example.</p>
</blockquote>
<p>Would adding openat&amp;co. on <code>ReadDir</code> solve that to some extent?</p>



<a name="254444096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444096">(Sep 22 2021 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="303710">@Gary Guo</span>  For example, arch intrinsics aren't used by most programs. In fact they're used by almost no programs as a percentage. But does having that sorted in an <code>arch_intrinsics</code> crate we ship not in <code>core</code> but along side <code>core</code> particularly help with anything? It seems simpler to just have things in fewer separate crates.</p>



<a name="254444160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444160">(Sep 22 2021 at 21:45)</a>:</h4>
<p>gonna make that percentage even smaller <span aria-label="smiling imp" class="emoji emoji-1f608" role="img" title="smiling imp">:smiling_imp:</span></p>



<a name="254444461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444461">(Sep 22 2021 at 21:48)</a>:</h4>
<p>The only reason I see for having other crates is if they'd have a slightly more relaxed versioning policy than std. major version bump when enough demand for breaking changes has accumulated and the old version goes into bugfix-only mode. But still rust-org blessed.</p>



<a name="254444478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444478">(Sep 22 2021 at 21:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254444096">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span>  For example, arch intrinsics aren't used by most programs. In fact they're used by almost no programs as a percentage. But does having that sorted in an <code>arch_intrinsics</code> crate we ship not in <code>core</code> but along side <code>core</code> particularly help with anything? It seems simpler to just have things in fewer separate crates.</p>
</blockquote>
<p>I think intrinsics are quite special since they require special handling of the compiler. But async IO are not that special.</p>



<a name="254444626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444626">(Sep 22 2021 at 21:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254444461">said</a>:</p>
<blockquote>
<p>The only reason I see for having other crates is if they'd have a slightly more relaxed versioning policy than std. major version bump when enough demand for breaking changes has accumulated and the old version goes into bugfix-only mode. But still rust-org blessed.</p>
</blockquote>
<p>I think this is a pretty big pro.</p>



<a name="254444719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444719">(Sep 22 2021 at 21:50)</a>:</h4>
<p>I'm not sure it is. We're fine with having no regex in std and know everyone will use the crate.</p>



<a name="254444956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254444956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254444956">(Sep 22 2021 at 21:52)</a>:</h4>
<p>regex doesn't require unsafe to implement or exist as an OS/Target abstraction, so i wouldn't propose it for the standard library, myself</p>



<a name="254445029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445029">(Sep 22 2021 at 21:53)</a>:</h4>
<p>Ah I am confused. Regex is an argument supporting a small std, isn't it?</p>



<a name="254445183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445183">(Sep 22 2021 at 21:54)</a>:</h4>
<p>yes. I'm not seeing that much turf that can be covered by official but slightly-less-stable crates. an async runtime maybe since that's complex and OS concepts change every decade or so.</p>



<a name="254445234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445234">(Sep 22 2021 at 21:54)</a>:</h4>
<p>fwiw shipping libstdc++ seems to make smaller distros unhappy and so does Rust's std.</p>



<a name="254445322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445322">(Sep 22 2021 at 21:55)</a>:</h4>
<p>in which way? keeping up with the release cycle?</p>



<a name="254445642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445642">(Sep 22 2021 at 21:58)</a>:</h4>
<p>Yes but also because of the tight coupling between std and rustc.</p>



<a name="254445805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445805">(Sep 22 2021 at 21:59)</a>:</h4>
<p>It makes managing std and rustc a lot harder when they are, for all intents and purposes, "the same thing", even though they kinda aren't.</p>



<a name="254445961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445961">(Sep 22 2021 at 22:00)</a>:</h4>
<p>should we prioritize this concern? well... maybe not? but it has been mentioned that the tight coupling is <strong>also</strong> off-putting to would-be contributors. it requires the specialized build system.</p>



<a name="254445971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254445971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254445971">(Sep 22 2021 at 22:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254444037">said</a>:</p>
<blockquote>
<p>Would adding openat&amp;co. on <code>ReadDir</code> solve that to some extent?</p>
</blockquote>
<p>I don't believe so. The existence of path-centric APIs in the first place is what makes the filesystem APIs provided by the standard library feel brittle, and either way this is just a single pet-peeve that I have. There are more problems such as allocation as recently pointed out by the linux kernel devs.</p>



<a name="254446443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254446443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254446443">(Sep 22 2021 at 22:03)</a>:</h4>
<p>Obviously, because e.g. libcore is <strong>very</strong> tightly coupled with rustc, we can't necessarily get away from this. Certainly not <strong>all</strong> the way away.</p>



<a name="254446464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254446464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254446464">(Sep 22 2021 at 22:03)</a>:</h4>
<p>Though I think we can agree that <em>some form</em> of allocation goes in the standard library. We just have a questionable convention about how it works.</p>



<a name="254446537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254446537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254446537">(Sep 22 2021 at 22:04)</a>:</h4>
<p>Of course.</p>



<a name="254446644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254446644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254446644">(Sep 22 2021 at 22:04)</a>:</h4>
<p><span class="user-mention" data-user-id="281757">@Jubilee</span> isn't the biggest problem generics?</p>



<a name="254446677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254446677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254446677">(Sep 22 2021 at 22:05)</a>:</h4>
<p>and ABI as well i suppose</p>



<a name="254446703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254446703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254446703">(Sep 22 2021 at 22:05)</a>:</h4>
<p>I am not 100% on that.</p>



<a name="254446732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254446732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254446732">(Sep 22 2021 at 22:05)</a>:</h4>
<p>I will have to pick Ariadne's brain at some time.</p>



<a name="254447188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254447188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254447188">(Sep 22 2021 at 22:09)</a>:</h4>
<p>To get back to the question: I think the phrase "Rust has a small standard library" has never once made me happy when I encounter it. My personal experience is that it's the reason to not have nice things.</p>



<a name="254447891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254447891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254447891">(Sep 22 2021 at 22:15)</a>:</h4>
<p>I think it's a good thing. It sends a clear signal to look elsewhere rather than trying to make do with whatever is there. Look at javascript, their core library is tiny and they still ended up with the ==, ===, <a href="http://Object.is">Object.is</a> mess or hacking the iterator-like stuff onto Array.prototype.</p>



<a name="254448042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254448042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254448042">(Sep 22 2021 at 22:16)</a>:</h4>
<p>Speaking as an ECMAScripter:<br>
That is because JS does not have a good way to introduce non-breaking forward compatibility.</p>



<a name="254448057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254448057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254448057">(Sep 22 2021 at 22:17)</a>:</h4>
<p>I think we have actually a lot of that problem already, though.</p>



<a name="254448210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254448210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254448210">(Sep 22 2021 at 22:18)</a>:</h4>
<p>The dreams of using UCFS and auto-UCFS-driven compatibility fixes never materialized to prevent situations like <a href="https://github.com/rust-lang/rust/issues/88967">https://github.com/rust-lang/rust/issues/88967</a> from emerging.</p>



<a name="254448407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254448407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254448407">(Sep 22 2021 at 22:20)</a>:</h4>
<p>That was actually brought up in the libs meeting again. There were some concerns about that approach. I'm not sure if I understood them correctly. I think it was about lots of stuff breaking on cargo update? Or people building from source rather from <a href="http://crates.io">crates.io</a> packages. Not sure.</p>



<a name="254448423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254448423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254448423">(Sep 22 2021 at 22:20)</a>:</h4>
<p>There are no "inherent traits" to allow the existing trait qualification syntaxes to fix situations like <a href="https://github.com/rust-lang/rust/issues/85667">https://github.com/rust-lang/rust/issues/85667</a></p>



<a name="254448619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254448619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254448619">(Sep 22 2021 at 22:22)</a>:</h4>
<p>And I am not saying we should not introduce these breakages, they are technically permitted, and we are currently at a stage w/r/t Rust where breaking half the ecosystem is still actually not the worst thing to do, heh.</p>



<a name="254449064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254449064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254449064">(Sep 22 2021 at 22:26)</a>:</h4>
<p>Anyways, those are actually issues, IMO, where std was <strong>too</strong> conservative, and so large swathes of the ecosystem picked a library rather than std, even though std would have been the obvious choice for a home for the constant.</p>



<a name="254449577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254449577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254449577">(Sep 22 2021 at 22:29)</a>:</h4>
<p>I don't think itertools is a good example here. It's a mix of niche functions and more commonly useful ones. And <code>Iterator</code> started small too, so as it grows some conflict is inevitable. Unless we want the types to spend a lot more time unstable until the API has grown.</p>



<a name="254452959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254452959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254452959">(Sep 22 2021 at 22:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254448210">said</a>:</p>
<blockquote>
<p>The dreams of using UCFS and auto-UCFS-driven compatibility fixes never materialized to prevent situations like <a href="https://github.com/rust-lang/rust/issues/88967">https://github.com/rust-lang/rust/issues/88967</a> from emerging.</p>
</blockquote>
<p>UCFS driven compatibility fixes?</p>



<a name="254453613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254453613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254453613">(Sep 22 2021 at 23:04)</a>:</h4>
<p>normalize function calls to their fully qualified form when publishing crates.</p>



<a name="254453774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254453774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254453774">(Sep 22 2021 at 23:05)</a>:</h4>
<p>aaah</p>



<a name="254453822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254453822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254453822">(Sep 22 2021 at 23:05)</a>:</h4>
<p>well, regarding the responsibility of std</p>



<a name="254453921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254453921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254453921">(Sep 22 2021 at 23:06)</a>:</h4>
<p>to me I think std is the place to export high quality, widely used, and completely stable APIs</p>



<a name="254454030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454030">(Sep 22 2021 at 23:07)</a>:</h4>
<p>to me that generally means that we should trend towards a smaller std since 3rd party crates have a lot more flexibility when it comes to API changes</p>



<a name="254454354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454354">(Sep 22 2021 at 23:10)</a>:</h4>
<p>well, wouldn't regex fit those criteria?</p>



<a name="254454460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454460">(Sep 22 2021 at 23:11)</a>:</h4>
<p>the first two absolutely, the last point I'm not 100% confident about</p>



<a name="254454580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454580">(Sep 22 2021 at 23:12)</a>:</h4>
<p>for example, does regex already handle precompiling regular expressions via const fn?</p>



<a name="254454617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454617">(Sep 22 2021 at 23:13)</a>:</h4>
<p>I expect as const fn becomes more powerful that will be introduced</p>



<a name="254454687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454687">(Sep 22 2021 at 23:13)</a>:</h4>
<p>i'm not clear what you mean, because going from not-const fn to const fn is compatible</p>



<a name="254454750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454750">(Sep 22 2021 at 23:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254453613">said</a>:</p>
<blockquote>
<p>normalize function calls to their fully qualified form when publishing crates.</p>
</blockquote>
<p>I don't think that's possible with macros</p>



<a name="254454865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454865">(Sep 22 2021 at 23:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254454687">said</a>:</p>
<blockquote>
<p>i'm not clear what you mean, because going from not-const fn to const fn is compatible</p>
</blockquote>
<p>I'm imagining something where the <code>new</code> method could return <code>Self</code> directly instead of a <code>Result&lt;Self, Error&gt;</code> and have invalid regular expressions produce compile time errors instead of runtime errors</p>



<a name="254454980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254454980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254454980">(Sep 22 2021 at 23:16)</a>:</h4>
<p>just <code>Regex::new("pattern").ok().unwrap()</code>, which will be totally stable by the time const trait impl stuff is stable, which is the major blocker</p>



<a name="254455165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254455165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254455165">(Sep 22 2021 at 23:18)</a>:</h4>
<p>regardless, I'm not saying regex couldn't be something we can include</p>



<a name="254455235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254455235" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254455235">(Sep 22 2021 at 23:19)</a>:</h4>
<p>I'm also not against the idea, though it doesn't strictly meet the criteria I gave</p>



<a name="254455367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254455367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254455367">(Sep 22 2021 at 23:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254442809">said</a>:</p>
<blockquote>
<p>core/alloc should prioritize code that requires unsafe to implement. This means data structures, atomics, etc.</p>
<p>std should do that and also include as much as possible to not have to deal with the OS. This means the file system, a time source  a randomness source, etc.</p>
</blockquote>
<p>Regarding this, I don't agree that the unsafety of an implementation should have any bearing on if it should be included in std/core</p>



<a name="254456094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254456094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254456094">(Sep 22 2021 at 23:28)</a>:</h4>
<p>I think that the ecosystem should not be called upon to use unsafe itself too often. I think that any individual crate gets a lot less eyeballs on it than the standard library.</p>



<a name="254456707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254456707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254456707">(Sep 22 2021 at 23:35)</a>:</h4>
<p>I don't think that alone is sufficient justification, but I do agree that any sort of fundamental abstractions that drastically reduce the amount of unsafe code needed in 3rd party libraries may be worth additional consideration, though even then I feel like these abstractions should generally start as 3rd party crates</p>



<a name="254458461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254458461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254458461">(Sep 22 2021 at 23:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254453921">said</a>:</p>
<blockquote>
<p>to me I think std is the place to export high quality, widely used, and completely stable APIs</p>
</blockquote>
<p>The second point here I think commonly manifests as types that generally end up being exposed in other libraries APIs</p>



<a name="254458577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254458577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254458577">(Sep 22 2021 at 23:58)</a>:</h4>
<p>Actually, regarding this question I think a good exercise might be to evaluate the APIs that are currently part of std and see if we can't identify how each API's inclusion was justified and identify patterns from that</p>



<a name="254458627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254458627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254458627">(Sep 22 2021 at 23:59)</a>:</h4>
<p>Error comes to mind for me, I think its inclusion is justified by the need to have a shared trait for representing errors so they can be composed and iterated over when reporting errors, via the <code>source</code> method</p>



<a name="254472092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254472092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254472092">(Sep 23 2021 at 02:46)</a>:</h4>
<p>That's much more your area than mine, and I don't want to tell you your business, but the fact that the <code>std::error::Error</code> trait has not one but two deprecated methods, and also has numerous ecosystem traits to improve the situation over the years, leads me to strongly think that "completely stable" is far from true.</p>



<a name="254472351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254472351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254472351">(Sep 23 2021 at 02:50)</a>:</h4>
<p>Also the fact that you can always downcast an error into a Box, thus making the entire system locked away from people doing no_alloc, is a daggin shame</p>



<a name="254473900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254473900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254473900">(Sep 23 2021 at 03:14)</a>:</h4>
<p>I think the deprecation is more because of the error trait being added to std too soon than a general pattern in the standard library</p>



<a name="254473944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254473944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254473944">(Sep 23 2021 at 03:14)</a>:</h4>
<p>And the box thing is completely resolvable</p>



<a name="254473949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254473949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254473949">(Sep 23 2021 at 03:14)</a>:</h4>
<p>And we're already moving the error trait into core</p>



<a name="254473994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254473994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254473994">(Sep 23 2021 at 03:15)</a>:</h4>
<p>The real issues at the moment are with from&lt;&amp;str&gt; for box dyn error</p>



<a name="254474028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254474028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254474028">(Sep 23 2021 at 03:15)</a>:</h4>
<p>Something like the error trait needs to exist and should be available from core as you say</p>



<a name="254478160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254478160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim McNamara <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254478160">(Sep 23 2021 at 04:18)</a>:</h4>
<p>Going back to the original question, "what is the standard library?", I would like to offer a slightly different view than a discussion between where the boundary between <code>core</code> and <code>std</code>.</p>
<p>To me, a language's standard library plays two main roles. Its primary role is to provide a dependable foundation to build one's own software. Secondly, I believe that a standard library demonstrates best practices within a language community. I look to Rust's standard library as a model for my own work.</p>
<p>I personally would feel comfortable with a larger standard library than what Rust currently offers. Coming from Python, with its very rich standard library makes Rust's feel rather austere. I know that this was intentional, and has the positive effects of creating a very vibrant 3rd party ecosystem. However, it would be nice if there was a workable base distribution of Rust to make it easier to work without connecting to <a href="http://crates.io">crates.io</a>.</p>



<a name="254485739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254485739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254485739">(Sep 23 2021 at 06:07)</a>:</h4>
<p>Seems like a question worth pondering… I’ll try collect my own thoughts into a gist. Maybe we should all try do something like a call for posts and collect them up?</p>



<a name="254563643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254563643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254563643">(Sep 23 2021 at 16:25)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/88989">#88989</a> is another unclear case imo. It's not needed since <code>nix</code> already covers it and the methods don't need much supporting infrastructure that std is especially positioned to provide. Otoh you can find those in the standard libraries of many other languages.</p>



<a name="254567549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254567549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254567549">(Sep 23 2021 at 16:53)</a>:</h4>
<p>Random thoughts: I personally think for OS-related things it's not very useful to re-litigate the argument that the std should be more minimalist (even though I have a lot of sympathy for that argument). It isn't so here we are. I wouldn't want it to expand <em>too</em> much but it does cover a range of "basic" OS things (e.g. <code>File</code>, <code>Path</code>, <code>Command</code>, <code>env::*</code>, etc). I think it makes sense to make these as good as they can be (within the constraints of std) even if that involves some amount of "feature creep", i.e. adding novel APIs but I'm not exactly sure where the line is.</p>
<p>This is just a knee-jerk reaction but I guess <a href="https://github.com/rust-lang/rust/issues/88989">#88989</a> is somewhere near the border for me but probably falls on std side of it. It "fits" in the sense that it feels like it's within the scope of things std does and it's limited enough that there doesn't (atm) look like stabilizing  the API would be a problem. So, for me, I think the only question is if it's going to get enough use to justify being in the std. [DISCLAIMER: I'm not arguing for or against it being stabilized <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> ]</p>



<a name="254568411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254568411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254568411">(Sep 23 2021 at 16:58)</a>:</h4>
<p>yeah if we're going to have File <em>at all</em>, it should have all the methods a person would want.</p>
<p>Particularly because methods are scoped to a type and you can't easily add additional method to a type in an external crate.</p>



<a name="254572671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254572671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254572671">(Sep 23 2021 at 17:26)</a>:</h4>
<p>Huh? But that's what extension traits do? For file this would work fine since it exposes the file descriptor.</p>



<a name="254652967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254652967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254652967">(Sep 24 2021 at 05:23)</a>:</h4>
<p>I'd say "easily" is a load bearing word there. You have to make up a trait that you implement for just the one type, and then anywhere you use the thing you have to be sure to add an extra import for the trait. Extension traits are a necessary evil, a bandaid, they're not actually a good thing.</p>



<a name="254693895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254693895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254693895">(Sep 24 2021 at 12:17)</a>:</h4>
<p>I think that (as with many other important things) there is no black and white answer and there are just a ton of difficult trade-offs. I'm sympathetic to the minimalist arguments, but I think that there is a huge advantage for beginners to have things like String, Vec, and Hashmap in std, even though it is difficult to justify that from first principals. If we accept those fundamental data structures (and similarly things like File and fs), then its hard to draw a principled line between those and more exotic data structures or IO primitives (including async ones). I'm somewhat sympathetic to the idea that things like Regex and Serde should be part of std, and I can even imagine a case for Tokio. I think there are many criteria one could apply (used by nearly all programs/programmers, only likely to have one implementation, stable implementation, part of the OS, ...) but at the end of the day there will always be a complex, multi-dimensional trade-off</p>



<a name="254701470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254701470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254701470">(Sep 24 2021 at 13:15)</a>:</h4>
<p>Tokio has too much of a design space yet unexplored. There is no common agreement about whether a tokio-like of async-std-like api makes more sense, there are many tradeoffs around the executor design AFAIK, ...</p>



<a name="254710196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254710196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254710196">(Sep 24 2021 at 14:10)</a>:</h4>
<p>Yeah, I’m not seriously proposing it, but saying an argument could be made</p>



<a name="254743810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254743810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254743810">(Sep 24 2021 at 17:43)</a>:</h4>
<p>I strongly agree with Eliza on this:  <a href="https://twitter.com/mycoliza/status/1441075025562374154">https://twitter.com/mycoliza/status/1441075025562374154</a><br>
I think the Rust standard library should be unquestionably bigger but remain reserved.</p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/mycoliza/status/1441075025562374154"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/850b7fef7fa746078748dc4a8a544f29fc9882f8/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313035373238343830343138303233383333372f4468777935756d705f6e6f726d616c2e6a7067"></a><p>the really critical point here, i think, is that a lot of people make the mistake of thinking that a standard lib is for stuff that's *important*. it's not. it's for stuff that *has to be standardized*: <a href="https://t.co/uYZtoAfwjh">https://twitter.com/mycoliza/status/1441069480847699970?s=20</a></p><span>- 𓃭𓇋𓊃𓄿𓁐 (@mycoliza)</span></div></div>



<a name="254744209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254744209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254744209">(Sep 24 2021 at 17:46)</a>:</h4>
<p>I think we should not standardize an executor, for instance, because that is sort of "beyond standardization". Instead we should standardize more interfaces to async stuff, so async stuff has cleaner interop between libraries.</p>



<a name="254744809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254744809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254744809">(Sep 24 2021 at 17:50)</a>:</h4>
<p>I think Rust makes a good choice in terms of exotic data structures: by keeping the list minimal, each can have a high-quality impl that receives tons of maintenance, relatively speaking.</p>



<a name="254744942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254744942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254744942">(Sep 24 2021 at 17:51)</a>:</h4>
<p>By having one LinkedList, no one has to write their own... and they're infamously more annoying to write in Rust. And it gets a lot less eyes on it than anything else. I would really fear to add another data structure, because then the whole "a thousand eyeballs" premise would fall apart entirely, IMO. That idea has largely been disproven: it doesn't scale, because there can simply be too much API surface, and the convention can point so strongly the other way, that people don't actually explore all the functions and structures available. Everyone starts at Vec and goes down the list and then... etc.</p>



<a name="254746967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254746967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254746967">(Sep 24 2021 at 18:04)</a>:</h4>
<blockquote>
<p>By having one LinkedList, no one has to write their own</p>
</blockquote>
<p>i feel like linked list is the one ive reimplemented the most in rust, tbh (the stdlib one isnt intrusive and i'm unsure any of the designes for a generic intrusive linked list are sound)</p>



<a name="254747198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254747198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254747198">(Sep 24 2021 at 18:06)</a>:</h4>
<p>(thats not to disagree with the rest of your point)</p>



<a name="254747672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254747672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254747672">(Sep 24 2021 at 18:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254744209">said</a>:</p>
<blockquote>
<p>I think we should not standardize an executor, for instance, because that is sort of "beyond standardization". Instead we should standardize more interfaces to async stuff, so async stuff has cleaner interop between libraries.</p>
</blockquote>
<p>I don't think we should standardize The One True Executor, but I think we should standardize a minimal interface to executors, and provide a Good Enough Executor.</p>



<a name="254747814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254747814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254747814">(Sep 24 2021 at 18:10)</a>:</h4>
<p>I think that'd be a key part of supporting <code>async fn main()</code> or <code>#[test] async fn test_xyz()</code>.</p>



<a name="254751764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254751764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254751764">(Sep 24 2021 at 18:37)</a>:</h4>
<p>Providing one with a test harness might be an idea.</p>



<a name="254753325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254753325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254753325">(Sep 24 2021 at 18:48)</a>:</h4>
<p>I do definitely want to leave room for other executors in the future, and not (for instance) close off the possibility of an <code>io_uring</code>-based executor.</p>



<a name="254753387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254753387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254753387">(Sep 24 2021 at 18:49)</a>:</h4>
<p>But I think a simple executor atop epoll or equivalent would be appropriate.</p>



<a name="254754205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254754205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254754205">(Sep 24 2021 at 18:54)</a>:</h4>
<p>this touches on one of the justifications we settled on for including scoped threads in the library</p>



<a name="254754292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254754292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254754292">(Sep 24 2021 at 18:55)</a>:</h4>
<p>in that we wanted to be able to use them in examples in our documentation / the book since they substantially simplify examples about multithreading in rust which is absolutely something we want to highlight</p>



<a name="254754385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254754385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254754385">(Sep 24 2021 at 18:55)</a>:</h4>
<p>I imagine a similar justification could apply to have a minimal executor available for demonstrating the power of async in examples</p>



<a name="254792824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254792824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254792824">(Sep 25 2021 at 00:37)</a>:</h4>
<p>I was under the impression that scoped threads are fairly "obvious" in a way that implementations will not differ radically so that you might as well include it since std has threads as an API.</p>



<a name="254793981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254793981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254793981">(Sep 25 2021 at 00:54)</a>:</h4>
<p>That's another reason</p>



<a name="254793998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254793998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254793998">(Sep 25 2021 at 00:54)</a>:</h4>
<p>But the usage in examples was the deciding factor for amanieu</p>



<a name="254798825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254798825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254798825">(Sep 25 2021 at 02:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209168">Thom Chiovoloni</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254746967">said</a>:</p>
<blockquote>
<blockquote>
<p>By having one LinkedList, no one has to write their own</p>
</blockquote>
<p>i feel like linked list is the one ive reimplemented the most in rust, tbh (the stdlib one isnt intrusive and i'm unsure any of the designes for a generic intrusive linked list are sound)</p>
</blockquote>
<p>this makes another subtle point. probably "we have the best <code>LinkedList&lt;T&gt;</code>" is indeed what we are going to have to settle for. std isn't for deeply specialized code in most cases.</p>



<a name="254977896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254977896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254977896">(Sep 27 2021 at 01:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby</span> <a href="#narrow/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F/near/254754292">said</a>:</p>
<blockquote>
<p>in that we wanted to be able to use them in examples in our documentation / the book since they substantially simplify examples about multithreading in rust which is absolutely something we want to highlight</p>
</blockquote>
<p>While I agree with that, I also think the "this is tricky nuanced unsafe code that should only be written once" applies particularly well for scope threads too.</p>



<a name="254977969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254977969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254977969">(Sep 27 2021 at 01:18)</a>:</h4>
<p>For sure</p>



<a name="254986279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254986279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254986279">(Sep 27 2021 at 03:24)</a>:</h4>
<p>but Jane you rejected that justification when I said it XD</p>



<a name="254988292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254988292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254988292">(Sep 27 2021 at 03:55)</a>:</h4>
<p>Errr, yes</p>



<a name="254990353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/254990353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#254990353">(Sep 27 2021 at 04:23)</a>:</h4>
<p>I finished writing up my thoughts on this: <a href="https://kodraus.github.io/rust/2021/09/27/what-is-std.html">https://kodraus.github.io/rust/2021/09/27/what-is-std.html</a></p>
<p>tl;dr: Basically in-line with Eliza's tweet</p>



<a name="255132249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/219381-t-libs/topic/What%20is%20the%20standard%20library%3F/near/255132249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/219381-t-libs/topic/What.20is.20the.20standard.20library.3F.html#255132249">(Sep 27 2021 at 22:44)</a>:</h4>
<p>I think we've got at least an intuitive sense of what belongs in or out of the standard library. What I think we don't really have yet are all the tools to cope with integrating changing paradigms and deprecations that are building up over time. The question for me is less about what goes in the standard library and more how the standard library is composed, delivered, and evolved going forward so it's still great and useful in another 7 years (and then 7 more after that)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
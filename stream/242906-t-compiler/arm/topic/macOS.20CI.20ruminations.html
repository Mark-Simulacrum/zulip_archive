<html>
<head><meta charset="utf-8"><title>macOS CI ruminations · t-compiler/arm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/index.html">t-compiler/arm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html">macOS CI ruminations</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204868316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204868316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204868316">(Jul 24 2020 at 00:25)</a>:</h4>
<p>Realistically, the biggest hurdles are the things outside of our control. </p>
<p>AFAIK, neither GitHub Actions nor Azure Pipelines have committed to having Arm CI machines available. That’s going to put a big damper on getting this to the same level as other targets. </p>
<p>Also, there’s no way to run Crater on macOS, so we can’t proactively try to test lots of crates from the ecosystem to try and fix things early.</p>



<a name="204868396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204868396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Misty De Méo <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204868396">(Jul 24 2020 at 00:26)</a>:</h4>
<p>Mhm. Realistically, I don't think CI providers are going to be able to commit until they know what retail hardware is going to look like.</p>



<a name="204868763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204868763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204868763">(Jul 24 2020 at 00:34)</a>:</h4>
<p>Certainly. I hope that Apple is working with them, but who knows.</p>



<a name="204869443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204869443" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204869443">(Jul 24 2020 at 00:47)</a>:</h4>
<p>fairly pessimistic outlook on CI. It was already difficult for x86_64 and with apple silicon its not even commodity hardware anymore.</p>



<a name="204869772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204869772" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204869772">(Jul 24 2020 at 00:53)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> What do you mean? There <em>will</em> be commodity hardware come the end of the year, the same as there is today. There isn't anything today, sure.</p>
<p>I'll be surprised if the first Arm hardware isn't Mac Minis and MacBook Airs.</p>



<a name="204869858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204869858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204869858">(Jul 24 2020 at 00:55)</a>:</h4>
<p>What I mean is that you can still run x86_64 macos on a typical VM running within a rack (and its how, I believe, most CI vendors approach macos)</p>



<a name="204869939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204869939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204869939">(Jul 24 2020 at 00:56)</a>:</h4>
<p>The most rack-like hardware apple made recently is the rack mounted mac pro which is not really… compact enough to make economic sense.</p>



<a name="204869946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204869946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Misty De Méo <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204869946">(Jul 24 2020 at 00:57)</a>:</h4>
<p>Unless I'm mistaken, several CI vendors have been using Mac Minis.</p>



<a name="204870013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870013" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870013">(Jul 24 2020 at 00:58)</a>:</h4>
<p>/me shrugs</p>



<a name="204870052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870052" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870052">(Jul 24 2020 at 00:59)</a>:</h4>
<p><a href="https://www.macstadium.com/">https://www.macstadium.com/</a></p>
<div class="message_inline_image"><a href="https://assets-global.website-files.com/5ac3c046c82724970fc60918/5ad6306c6363bf8a7743b879_macpros-wideshot.jpg"><img src="https://assets-global.website-files.com/5ac3c046c82724970fc60918/5ad6306c6363bf8a7743b879_macpros-wideshot.jpg"></a></div><div class="message_inline_image"><a href="https://assets-global.website-files.com/5ac3c046c82724970fc60918/5ad62fac9b5a951f39531dd4_macminis-lv.jpg"><img src="https://assets-global.website-files.com/5ac3c046c82724970fc60918/5ad62fac9b5a951f39531dd4_macminis-lv.jpg"></a></div>



<a name="204870056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870056" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870056">(Jul 24 2020 at 00:59)</a>:</h4>
<p>Looks like the "trashcan" Mac Pros as well.</p>



<a name="204870137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870137">(Jul 24 2020 at 01:00)</a>:</h4>
<p>I think any commercial service will be using actual Apple hardware. IIRC, it's against the TOS to run macOS on non-Apple hardware.</p>



<a name="204870139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870139" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870139">(Jul 24 2020 at 01:00)</a>:</h4>
<p>github actions documentation has a note that they use macstadium for their mac runners: <a href="https://docs.github.com/en/actions/reference/virtual-environments-for-github-hosted-runners">https://docs.github.com/en/actions/reference/virtual-environments-for-github-hosted-runners</a></p>



<a name="204870150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870150">(Jul 24 2020 at 01:00)</a>:</h4>
<p>guess I’m wrong then</p>



<a name="204870151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870151">(Jul 24 2020 at 01:00)</a>:</h4>
<p>yep, which is why I linked to them <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="204870167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204870167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Misty De Méo <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204870167">(Jul 24 2020 at 01:01)</a>:</h4>
<p>Yeah, it's definitely against Apple TOS to virtualize macOS on a non-Mac host, and I bet they'd be fast to sue anyone selling services on unlicensed VMs</p>



<a name="204888377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204888377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204888377">(Jul 24 2020 at 07:57)</a>:</h4>
<p>tier 2 shouldn't be a problem</p>



<a name="204888404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204888404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204888404">(Jul 24 2020 at 07:57)</a>:</h4>
<p>we can just throw another x86_64 macOS builder and cross-compile</p>



<a name="204888412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20CI%20ruminations/near/204888412" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20CI.20ruminations.html#204888412">(Jul 24 2020 at 07:57)</a>:</h4>
<p>but yeah tier 1 is going to be <em>fun</em></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
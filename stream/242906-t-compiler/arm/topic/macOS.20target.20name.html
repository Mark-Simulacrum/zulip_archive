<html>
<head><meta charset="utf-8"><title>macOS target name · t-compiler/arm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/index.html">t-compiler/arm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html">macOS target name</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="202540446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> XAMPPRocky <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540446">(Jul 01 2020 at 07:56)</a>:</h4>
<p>One bikeshed that needs to be figured out is the name of the target. <code>aarch64-apple-darwin</code>/<code>aarch64-apple-macos</code>? I feel continuing using <code>darwin</code> would be incorrect since we have separate targets for iOS and tvOS which I believe both run darwin under the hood and their naming scheme is <code>apple-&lt;platform&gt;</code>.</p>



<a name="202540503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540503" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540503">(Jul 01 2020 at 07:57)</a>:</h4>
<p>iOS and tvOS are both "descendants" of darwin already</p>



<a name="202540565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> XAMPPRocky <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540565">(Jul 01 2020 at 07:58)</a>:</h4>
<p>That's what I said is it not?</p>



<a name="202540597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540597">(Jul 01 2020 at 07:58)</a>:</h4>
<p>well, it's a little more complicated than that, there's an iOS target for x86_64 macOS, I assume to run in the iOS simulator</p>



<a name="202540618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540618">(Jul 01 2020 at 07:58)</a>:</h4>
<p>oh, sorry, I meant the _rust targets_ are descendants of the darwin target</p>



<a name="202540664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540664">(Jul 01 2020 at 07:59)</a>:</h4>
<p>there's already a hierarchy, so it doesn't seem weird to call "darwin" the default/base, and require you to specify if you want a config that inherits from that but adds more specific bits</p>



<a name="202540759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> XAMPPRocky <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540759">(Jul 01 2020 at 08:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="317220">André Arko</span> <a href="#narrow/stream/242906-t-compiler.2Farm/topic/macOS/near/202540597">said</a>:</p>
<blockquote>
<p>well, it's a little more complicated than that, there's an iOS target for x86_64 macOS, I assume to run in the iOS simulator</p>
</blockquote>
<p>Do you mean <code>x86_64-apple-ios-macabi</code>? I believe that's for running catalyst apps.</p>



<a name="202540782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540782" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540782">(Jul 01 2020 at 08:00)</a>:</h4>
<p>oh! that would make more sense than the simulator <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="202540866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202540866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202540866">(Jul 01 2020 at 08:01)</a>:</h4>
<p>but yes, "iOS except on macOS" makes the hierarchy weird for sure</p>



<a name="202555578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202555578" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202555578">(Jul 01 2020 at 11:01)</a>:</h4>
<p>Added this discussion as an unresolved question.</p>



<a name="202557049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202557049" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202557049">(Jul 01 2020 at 11:23)</a>:</h4>
<p>Note that there's also discussion on <a href="https://github.com/rust-lang/rust/issues/73628#issuecomment-648499092">what the  chip architecture should be called </a></p>



<a name="202618583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202618583" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202618583">(Jul 01 2020 at 20:13)</a>:</h4>
<p><code>file</code> evidently states "Mach-O 64-bit object <strong>arm64</strong>"</p>



<a name="202618745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202618745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202618745">(Jul 01 2020 at 20:14)</a>:</h4>
<p>arm64 is definitely apple's name for it, and then arm64e is their name for their latest arm v8 extensions</p>



<a name="202618799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202618799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202618799">(Jul 01 2020 at 20:15)</a>:</h4>
<p>where aarch64 is "everyone but apple"'s name for it, and they don't have a name for Apple's latest extensions ¯\_(ツ)_/¯</p>



<a name="202643426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202643426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202643426">(Jul 02 2020 at 02:03)</a>:</h4>
<p>And then we have</p>
<div class="codehilite"><pre><span></span><code>% cc -arch arm64 hello.c --verbose
Apple clang version 12.0.0 (clang-1200.0.22.19)
Target: aarch64-apple-darwin19.5.0
</code></pre></div>



<a name="202643505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202643505" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202643505">(Jul 02 2020 at 02:05)</a>:</h4>
<p>And <code>-triple arm64-apple-macosx10.15.0</code></p>



<a name="202643627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202643627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202643627">(Jul 02 2020 at 02:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> on the DTK, that comes out as:</p>
<div class="codehilite"><pre><span></span><code>❯ cc -arch arm64 hello.c --verbose
Apple clang version 12.0.0 (clang-1200.0.22.19)
Target: aarch64-apple-darwin20.0.0
</code></pre></div>



<a name="202643639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202643639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202643639">(Jul 02 2020 at 02:08)</a>:</h4>
<p>(for whatever that's worth)</p>



<a name="202765630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202765630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> comex <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202765630">(Jul 03 2020 at 03:30)</a>:</h4>
<p>Pointer authentication isn't an Apple-specific extension.</p>



<a name="202773404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202773404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> XAMPPRocky <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202773404">(Jul 03 2020 at 06:52)</a>:</h4>
<p>I believe Pointer Authentication is also not available as an extension to users yet</p>



<a name="202898038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/202898038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#202898038">(Jul 05 2020 at 00:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code>/usr/bin/git (for architecture arm64e): Mach-O 64-bit executable arm64e
</code></pre></div>



<a name="203091041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203091041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203091041">(Jul 07 2020 at 11:31)</a>:</h4>
<p><a href="https://tenfourfox.blogspot.com/2020/06/the-super-duper-universal-binary.html">This points out</a> that there are quite a lot of architecture-specific targets that macOS could target (not as many as AVR!). Even just restricted to new ARM Macs,  I don't think it makes sense to try and have a target for each possible thing. I wonder if target features would be appropriate to use.</p>
<p>E.g., <code>aarch64-apple-darwin</code> creates <code>arm64</code>. In the future,  <code>aarch64-apple-darwin</code> + <code>target_features=something</code> creates <code>arm64e</code>.</p>



<a name="203092137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203092137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203092137">(Jul 07 2020 at 11:46)</a>:</h4>
<p>I think an x86_64h slice could be produced today via <code>-Ctarget-cpu=haswell</code></p>



<a name="203097825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203097825" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203097825">(Jul 07 2020 at 12:54)</a>:</h4>
<p>Which kind of "could"?</p>
<div class="codehilite"><pre><span></span><code>% cargo rustc -- -Ctarget-cpu=haswell
   Compiling hh v0.1.0 (/private/tmp/hh)
    Finished dev [unoptimized + debuginfo] target(s) in 0.26s

% file target/debug/hh
target/debug/hh: Mach-O 64-bit executable x86_64
</code></pre></div>



<a name="203098043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203098043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203098043">(Jul 07 2020 at 12:56)</a>:</h4>
<p>That should work, no? If you tell lipo that it's <code>x86_64h</code>?</p>



<a name="203101431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203101431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203101431">(Jul 07 2020 at 13:27)</a>:</h4>
<p>but if it's <code>x86_64h</code>, it should say so, yeah?</p>
<div class="codehilite"><pre><span></span><code>% echo &#39;int main() { return 0; }&#39; &gt; main.c
% cc -arch x86_64h main.c -o main
% file main
main: Mach-O 64-bit executable x86_64h
</code></pre></div>



<a name="203102075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203102075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203102075">(Jul 07 2020 at 13:31)</a>:</h4>
<p>Are there any differences beyond the Mach-O arch, and using instructions available on Haswell? I know the former isn't done by the rustc flag above, but does it do anything beyond allowing lipo to autodetect the target?</p>



<a name="203106734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203106734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203106734">(Jul 07 2020 at 14:06)</a>:</h4>
<p>I do not have that level of knowledge. I can say that <em>some</em> binaries shipped by Apple on the DTK are both:</p>
<div class="codehilite"><pre><span></span><code> % file /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/lib/darwin/libclang_rt.ubsan_osx_dynamic.dylib
/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/lib/darwin/libclang_rt.ubsan_osx_dynamic.dylib: Mach-O universal binary with 4 architectures: [x86_64:Mach-O 64-bit dynamically linked shared library x86_64] [x86_64h:Mach-O 64-bit dynamically linked shared library x86_64h] [arm64:Mach-O 64-bit dynamically linked shared library arm64] [arm64e:Mach-O 64-bit dynamically linked shared library arm64e]
/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/lib/darwin/libclang_rt.ubsan_osx_dynamic.dylib (for architecture x86_64):  Mach-O 64-bit dynamically linked shared library x86_64
/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/lib/darwin/libclang_rt.ubsan_osx_dynamic.dylib (for architecture x86_64h): Mach-O 64-bit dynamically linked shared library x86_64h
/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/lib/darwin/libclang_rt.ubsan_osx_dynamic.dylib (for architecture arm64):   Mach-O 64-bit dynamically linked shared library arm64
/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/12.0.0/lib/darwin/libclang_rt.ubsan_osx_dynamic.dylib (for architecture arm64e):  Mach-O 64-bit dynamically linked shared library arm64e
</code></pre></div>



<a name="203663784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203663784" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203663784">(Jul 12 2020 at 22:17)</a>:</h4>
<p>not that rust needs to support every single one of these, but there at at least 17 (!) architectures available if we are including subtypes like x86_64h: <a href="https://tenfourfox.blogspot.com/2020/06/the-super-duper-universal-binary.html">https://tenfourfox.blogspot.com/2020/06/the-super-duper-universal-binary.html</a></p>



<a name="203663858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203663858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203663858">(Jul 12 2020 at 22:19)</a>:</h4>
<p>and in fact llvm canonically supports triples for at least 9 of the arm subtypes on apple-darwin: <a href="https://github.com/llvm/llvm-project/blob/master/llvm/test/CodeGen/ARM/MachO-subtypes.ll">https://github.com/llvm/llvm-project/blob/master/llvm/test/CodeGen/ARM/MachO-subtypes.ll</a></p>



<a name="203663929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203663929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203663929">(Jul 12 2020 at 22:21)</a>:</h4>
<p>does rust intend for its triples to correspond to llvm triples, or are they unrelated/mapped in some way?</p>



<a name="203664048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664048">(Jul 12 2020 at 22:24)</a>:</h4>
<p><span class="user-mention" data-user-id="317220">@André Arko</span> has that article been updated since I posted it earlier?</p>



<a name="203664060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664060">(Jul 12 2020 at 22:25)</a>:</h4>
<p>it has not, I posted it again in response to the statement "has not been updated on intel yet", which seems completely different than the article's "is deliberately different for programs that have not been rebuilt against the Xcode 12 SDK"</p>



<a name="203664105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664105">(Jul 12 2020 at 22:26)</a>:</h4>
<p>wait, oh no, I read "that article" to mean the one about macOS 10.16 vs 11.0</p>



<a name="203664109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664109">(Jul 12 2020 at 22:26)</a>:</h4>
<p>this is the thread about targets <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="203664111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664111" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664111">(Jul 12 2020 at 22:27)</a>:</h4>
<p>sorry!</p>



<a name="203664116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664116" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664116">(Jul 12 2020 at 22:27)</a>:</h4>
<p>I 100% missed that you posted that link :O</p>



<a name="203664126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664126" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664126">(Jul 12 2020 at 22:27)</a>:</h4>
<p>based on the clang docs, it seems like they have adopted a specific "triple" convention to resolve the issue: <a href="https://clang.llvm.org/docs/CrossCompilation.html">https://clang.llvm.org/docs/CrossCompilation.html</a></p>



<a name="203664129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664129">(Jul 12 2020 at 22:27)</a>:</h4>
<p>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</p>



<a name="203664237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203664237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203664237">(Jul 12 2020 at 22:30)</a>:</h4>
<p>I have no idea whether rustc is aiming for clang-like triple support, llvm-like-arch-support, or some third thing, though :)</p>



<a name="203665391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203665391" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203665391">(Jul 12 2020 at 23:04)</a>:</h4>
<p>Stating the obvious, I love how “triple” isn’t.</p>



<a name="203666123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203666123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203666123">(Jul 12 2020 at 23:25)</a>:</h4>
<p>yep, that's why I had to put "triple" in double quotes <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="203667476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203667476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203667476">(Jul 13 2020 at 00:05)</a>:</h4>
<p>I wonder what the &lt;sub&gt; vs &lt;abi&gt; fight looks like</p>



<a name="203667480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203667480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203667480">(Jul 13 2020 at 00:05)</a>:</h4>
<p>like what counts as which? a lot of old 32-bit ARM stuff used &lt;abi&gt; didn't it</p>



<a name="203667830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203667830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203667830">(Jul 13 2020 at 00:15)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> according to the page, sub is strictly for things like "v7" as in in "armv7", and ABI is strictly for things like "android" or "macho" or "elf" as in "linux-android"</p>



<a name="203668027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668027" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668027">(Jul 13 2020 at 00:20)</a>:</h4>
<p>(clang also apparently tracks OS types "darwin", "macosx", and "ios" separately, although I'm assuming that the latter 2 inherit from the former)</p>



<a name="203668051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668051">(Jul 13 2020 at 00:21)</a>:</h4>
<p>oh christ, also tvOS and watchOS</p>



<a name="203668144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668144">(Jul 13 2020 at 00:24)</a>:</h4>
<p>okay I was misremembering what old ARM stuff did</p>



<a name="203668168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668168">(Jul 13 2020 at 00:24)</a>:</h4>
<p>RISC-V also uses &lt;sub&gt;, for extensions, right?</p>



<a name="203668174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668174" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668174">(Jul 13 2020 at 00:24)</a>:</h4>
<p>/me weeps about Apple not moving to RV64 instead, but that's probably a few years out at best</p>



<a name="203668190"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668190" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668190">(Jul 13 2020 at 00:25)</a>:</h4>
<p>so reading about arm64e, it's actually a combination of armv8.3 (the aarch64 subtype) and arm64e (the ABI)</p>



<a name="203668239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668239" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668239">(Jul 13 2020 at 00:26)</a>:</h4>
<p>yeah that part had me suspicious when I heard it changes ABI</p>



<a name="203668240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668240">(Jul 13 2020 at 00:26)</a>:</h4>
<p>at the moment it seems like llvm has intrinsic support for neither the arch subtype or the ABI</p>



<a name="203668241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668241" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668241">(Jul 13 2020 at 00:26)</a>:</h4>
<p>See lots of discussion in <a class="stream-topic" data-stream-id="242906" href="/#narrow/stream/242906-t-compiler.2Farm/topic/aarch64-apple-darwin.20isn.27t.20true.20support">#t-compiler/arm &gt; aarch64-apple-darwin isn't true support</a> about <code>arm64e</code></p>



<a name="203668244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668244" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668244">(Jul 13 2020 at 00:26)</a>:</h4>
<p>yes</p>



<a name="203668245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668245">(Jul 13 2020 at 00:26)</a>:</h4>
<p>I read it</p>



<a name="203668251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668251">(Jul 13 2020 at 00:27)</a>:</h4>
<p><code>aarch64-apple-macos-ptrauth</code></p>



<a name="203668255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668255">(Jul 13 2020 at 00:27)</a>:</h4>
<p>was mostly just thinking aloud about how aarch64 is supposed to handle the ongoing ARMvX.Y subtypes</p>



<a name="203668257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668257">(Jul 13 2020 at 00:27)</a>:</h4>
<p>hackily, I'm guessing</p>



<a name="203668297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668297" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668297">(Jul 13 2020 at 00:28)</a>:</h4>
<p>I tried looking at the LLVM code for parsing that stuff and got so turned around and confused I gave up</p>



<a name="203668298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668298" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668298">(Jul 13 2020 at 00:28)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> (don't forget, macos is too specific, and ptrauth is present in ios/ipados/tvos/watchos too)</p>



<a name="203668301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668301">(Jul 13 2020 at 00:28)</a>:</h4>
<p>sure, each has its own triple with a different OS :P</p>



<a name="203668307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668307">(Jul 13 2020 at 00:28)</a>:</h4>
<p>sort of</p>



<a name="203668316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668316">(Jul 13 2020 at 00:29)</a>:</h4>
<p>ipados is still entirely part of ios and doesn't have an os string llvm recognizes, tvos is a separate string but returns true for llvm's "is_ios" check, watchos is a separate string and not is_ios</p>



<a name="203668326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668326">(Jul 13 2020 at 00:29)</a>:</h4>
<p>(can you tell I've been reading a bunch of llvm guts today)</p>



<a name="203668461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668461">(Jul 13 2020 at 00:32)</a>:</h4>
<p>We could call our target <code>aarch64-apple-darwin-arm64</code> and then have <code>-arm64e</code> later</p>



<a name="203668467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668467">(Jul 13 2020 at 00:33)</a>:</h4>
<p>I can't stop reading ipados as "IPA DOS"</p>



<a name="203668826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668826" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668826">(Jul 13 2020 at 00:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> honestly at this moment it seems fine to have <code>aarch64-apple-darwin</code>, and if we need to overload specific behaviors onto macos, or ios, or tvos, or watchos, we can do that. and leaving the aarch64 ABI to imply arm64 also seems correct to me. I dunno how LLVM handles aarch64 subtypes. It doesn't seem to have any version subtypes despite messages that say LLVM already supports ARMv8.3. ¯\_(ツ)_/¯</p>



<a name="203668978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203668978" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203668978">(Jul 13 2020 at 00:47)</a>:</h4>
<p>I think there's a few pieces.</p>
<p>AIUI, upstream LLVM doesn't support arm64e yet; that's still in Apple's fork.</p>
<p>I also expect some parts of this to be covered by features instead of a separate cpu / arch.</p>



<a name="203669024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203669024" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203669024">(Jul 13 2020 at 00:48)</a>:</h4>
<p>(<a href="https://stackoverflow.com/a/35061913/155423">useful for exploring those</a>)</p>



<a name="203673416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203673416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203673416">(Jul 13 2020 at 02:50)</a>:</h4>
<p><span class="user-mention" data-user-id="317220">@André Arko</span> oh I forgot to bring up how <code>i686</code> should be <code>x86_32.6</code> or something :P</p>



<a name="203673418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203673418" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203673418">(Jul 13 2020 at 02:50)</a>:</h4>
<p>I actually don't have a good suggestion</p>



<a name="203673788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203673788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203673788">(Jul 13 2020 at 03:00)</a>:</h4>
<p>lol amazing</p>



<a name="203673790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203673790" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203673790">(Jul 13 2020 at 03:00)</a>:</h4>
<p>I mean there actually is a target <code>aarch64_32</code> for little-endian ARM chips</p>



<a name="203673797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203673797" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203673797">(Jul 13 2020 at 03:01)</a>:</h4>
<p>(big endian? whatever the non-default is)</p>



<a name="203703274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203703274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203703274">(Jul 13 2020 at 11:25)</a>:</h4>
<p>That target is 64bit with 32 bit pointers, I believe. Much like the same for x86_64</p>
<p>The big endian versions use “be”</p>



<a name="203707283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203707283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203707283">(Jul 13 2020 at 12:17)</a>:</h4>
<p>e.g.</p>
<div class="codehilite"><pre><span></span><code>  Registered Targets:
    aarch64    - AArch64 (little endian)
    aarch64_32 - AArch64 (little endian ILP32)
    aarch64_be - AArch64 (big endian)
    arm        - ARM
    arm64      - ARM64 (little endian)
    arm64_32   - ARM64 (little endian ILP32)
    armeb      - ARM (big endian)
</code></pre></div>



<a name="203708139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203708139" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203708139">(Jul 13 2020 at 12:25)</a>:</h4>
<p>you mean x32? (for x64 + 32-bit pointers)</p>



<a name="203708220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203708220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203708220">(Jul 13 2020 at 12:26)</a>:</h4>
<blockquote>
<p><code>armeb</code></p>
</blockquote>
<p>this must be a cruel joke <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="203708295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203708295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203708295">(Jul 13 2020 at 12:27)</a>:</h4>
<p>Yes, I was not attempting to name what the actual thing was, just drawing the analogy .</p>



<a name="203708391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203708391" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203708391">(Jul 13 2020 at 12:28)</a>:</h4>
<p>(just wanted to confirm it's that :P)</p>



<a name="203708403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203708403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203708403">(Jul 13 2020 at 12:28)</a>:</h4>
<p>I guess a name with "64_32" in it is more useful than x32</p>



<a name="203708471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS%20target%20name/near/203708471" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.20target.20name.html#203708471">(Jul 13 2020 at 12:29)</a>:</h4>
<p>like this is just weird:</p>
<ul>
<li>x64 == x86_64</li>
<li>x32 != x86_64 (more like x86_64_32 or x64_32)</li>
</ul>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
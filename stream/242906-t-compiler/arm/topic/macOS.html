<html>
<head><meta charset="utf-8"><title>macOS · t-compiler/arm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/index.html">t-compiler/arm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html">macOS</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="202523387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202523387" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202523387">(Jul 01 2020 at 02:02)</a>:</h4>
<p>Heads up — I've created <a href="https://github.com/rust-lang/rust/issues/73908">a tracking issue for macOS + ARM support</a>.</p>
<p>I'm working towards a blog post that will be more public-facing, but now that the issue exists, I'm sure people will find it.</p>



<a name="202523903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202523903" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202523903">(Jul 01 2020 at 02:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> hey! I happen to have access to a macOS+ARM box, and it... sort of works. :) I'd love to hear your suggestions about getting it working more than I have gotten it so far.</p>



<a name="202524002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202524002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202524002">(Jul 01 2020 at 02:15)</a>:</h4>
<p>Neat! I'll be honest and say that I'll _mostly_ be coordinating things. My LLVM knowledge is limited, and I've only helped out with one "non-standard" architecture before. However, I've got some thoughts, which I'll type up in a new thread...</p>



<a name="202539464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202539464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202539464">(Jul 01 2020 at 07:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> updated the checklist a bit :)</p>



<a name="202556362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202556362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202556362">(Jul 01 2020 at 11:13)</a>:</h4>
<p>Thank you. I wasn't sure of how much you said before we wanted to make more public, so I erred on the side of caution. This is going to be the best tracking issue you ever saw.</p>



<a name="202557207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557207" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557207">(Jul 01 2020 at 11:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> achieving tier 3 support is probably just adding the target information to rustc</p>



<a name="202557219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557219" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557219">(Jul 01 2020 at 11:26)</a>:</h4>
<p>we don't guarantee anything for tier 3, we just have <em>something</em> in the codebase</p>



<a name="202557312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557312" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557312">(Jul 01 2020 at 11:27)</a>:</h4>
<p>See the progress in macOS initial cross-compile.</p>



<a name="202557363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557363">(Jul 01 2020 at 11:28)</a>:</h4>
<p>Already discovered that libc needs to be updated.</p>



<a name="202557460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557460" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557460">(Jul 01 2020 at 11:29)</a>:</h4>
<p>but: </p>
<blockquote>
<p>Tier 3 platforms are those which the Rust codebase has support for, but which are not built or tested automatically, and may not work.</p>
</blockquote>



<a name="202557479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557479" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557479">(Jul 01 2020 at 11:29)</a>:</h4>
<p>well yeah it depends how you interpret support :P</p>



<a name="202557543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557543">(Jul 01 2020 at 11:30)</a>:</h4>
<p>technically just adding a target definition to it could be support, it just doesn't work :P</p>



<a name="202557544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557544">(Jul 01 2020 at 11:30)</a>:</h4>
<p>So that's the first step :-) We aren't there yet, so we haven't reached tier 3.</p>



<a name="202557549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557549">(Jul 01 2020 at 11:30)</a>:</h4>
<p>yep</p>



<a name="202557566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557566" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557566">(Jul 01 2020 at 11:30)</a>:</h4>
<p>my comment was more of "we should move some steps to tier 2"</p>



<a name="202557575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557575">(Jul 01 2020 at 11:30)</a>:</h4>
<p>I'd rather not make the tiers any more meaningless.</p>



<a name="202557871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557871">(Jul 01 2020 at 11:35)</a>:</h4>
<p>To me, tier 3 is "rustc did something basic on the target platform once". For AVR, that'd be a blink the LEDs kind of thing. for this case, I could see it as maybe a cross-compiled "hello world" (or even simpler, something that sets the exit status, for example)</p>



<a name="202557993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202557993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202557993">(Jul 01 2020 at 11:36)</a>:</h4>
<p>tier 2 is "rustc continues to do something basic" — aka has CI . In this case, I think it also means that rustc and cargo run natively</p>



<a name="202558017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202558017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202558017">(Jul 01 2020 at 11:37)</a>:</h4>
<p>as this wants to be a self-hosted platform, not cross-compile only like AVR</p>



<a name="202582200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202582200" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202582200">(Jul 01 2020 at 15:22)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> is there a way to get notified about edits to the primary comment on GitHub? If not, you and I should probably ping each other when we change it (although I <em>do</em> like your warning). </p>
<p>Those notifications could also be useful for casual watchers...</p>



<a name="202582245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202582245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202582245">(Jul 01 2020 at 15:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> not that I'm aware of</p>



<a name="202582269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202582269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202582269">(Jul 01 2020 at 15:22)</a>:</h4>
<p>and good call about pinging each other</p>



<a name="202582309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202582309" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202582309">(Jul 01 2020 at 15:23)</a>:</h4>
<p>if it's a change that users need to be notified on we should post a comment along with editing the issue</p>



<a name="202601868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202601868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202601868">(Jul 01 2020 at 17:57)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated to mention that x86_64 rustc running on ARM can produce x86_64 binaries that also run on ARM.</p>



<a name="202836197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202836197" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202836197">(Jul 03 2020 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated to mention our initial success of running a native <code>rustc</code> on the DTK. No compilation, just <code>--version</code>.</p>



<a name="202898369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202898369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202898369">(Jul 05 2020 at 00:54)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated to mention that a cross-compiled <code>rustc</code> can compile hello world.</p>
<p>I left off that it can also compile SNAFU and its dependencies, as that seemed self-serving <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="202904736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202904736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202904736">(Jul 05 2020 at 04:30)</a>:</h4>
<p>it's workingggggg</p>



<a name="202904738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202904738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202904738">(Jul 05 2020 at 04:30)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Finished release [optimized + debuginfo] target(s) in 59.40s
   Replacing /Users/andre/.cargo/bin/rg
    Replaced package `ripgrep v12.1.1` with `ripgrep v12.1.1` (executable `rg`)
❯ lipo -info $(which rg)
Non-fat file: /Users/andre/.cargo/bin/rg is architecture: arm64
</code></pre></div>



<a name="202904739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202904739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202904739">(Jul 05 2020 at 04:30)</a>:</h4>
<p>woohoo</p>



<a name="202925274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202925274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202925274">(Jul 05 2020 at 15:08)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated to mention that aarch64 <code>rustc</code> can compile <code>rustc</code> itself, as well as cross-compiling back to x86_64.</p>



<a name="202925367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/202925367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#202925367">(Jul 05 2020 at 15:11)</a>:</h4>
<p>Also, I'm totally gonna start saying <code>aarch64!rustc</code>. Blessed be the fan-fictioners.</p>



<a name="203038044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/203038044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#203038044">(Jul 06 2020 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated to mention <code>arm64e</code> as an unresolved question.</p>



<a name="203066123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/203066123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> André Arko <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#203066123">(Jul 07 2020 at 04:32)</a>:</h4>
<p>learned a fascinating thing today, which is that macOS Big Sur changes it’s version number from 10.16 to 11.0 depending on the SDK you use: <a href="https://eclecticlight.co/2020/07/06/why-big-sur-wont-stumble-over-version-numbers/">https://eclecticlight.co/2020/07/06/why-big-sur-wont-stumble-over-version-numbers/</a></p>



<a name="203089193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/203089193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#203089193">(Jul 07 2020 at 11:04)</a>:</h4>
<blockquote>
<p>In the longer term, it would be much simpler if Apple were to provide a monotonically increasing positive integer which increased by 1 with every patch number.</p>
</blockquote>
<p>Someone doesn’t understand parallel versions.</p>



<a name="203256685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/203256685" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#203256685">(Jul 08 2020 at 11:32)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated to link to the PRs to libc and cc-rs. After that, I think we can open a PR to add the initial version of the target spec.</p>



<a name="203256738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/203256738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#203256738">(Jul 08 2020 at 11:32)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="203539837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/203539837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#203539837">(Jul 10 2020 at 18:08)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated with some next step checkboxes</p>



<a name="204378871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/204378871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#204378871">(Jul 20 2020 at 01:18)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> opened a PR to add the initial target and edited the status to reflect that. I'm also going to comment on the tracking issue to notify any people subscribed, since it's been a few weeks.</p>



<a name="204396121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/204396121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#204396121">(Jul 20 2020 at 08:09)</a>:</h4>
<p>sounds good!</p>



<a name="210588410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/210588410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#210588410">(Sep 19 2020 at 00:29)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> updated the tracking issue and added a status update comment.</p>



<a name="210600485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/210600485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yerkebulan Tulibergenov <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#210600485">(Sep 19 2020 at 06:34)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> On tracking issue <a href="https://github.com/rust-lang/rust/issues/73908">https://github.com/rust-lang/rust/issues/73908</a> all the subsections for <code>Achieve Tier 3 support</code> are checked off. Does that mean that tier 3 support is achieved? Should that whole section be checked as well?</p>



<a name="210613148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/210613148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#210613148">(Sep 19 2020 at 12:41)</a>:</h4>
<p><span class="user-mention" data-user-id="200172">@Yerkebulan Tulibergenov</span> ah yes, thank you!</p>



<a name="210819445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/210819445" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#210819445">(Sep 22 2020 at 01:12)</a>:</h4>
<p>Neat:</p>
<div class="codehilite"><pre><span></span><code>% rustup-toolchain-install-master --force 462ec6baef52edea591eab1a070ed4e18b80d094 --targets aarch64-apple-darwin

% SDKROOT=$(xcrun -sdk macosx11.0 --show-sdk-path) MACOSX_DEPLOYMENT_TARGET=$(xcrun -sdk macosx11.0 --show-sdk-platform-version) cargo +462ec6baef52edea591eab1a070ed4e18b80d094 build --target=aarch64-apple-darwin
</code></pre></div>


<p>Reasonably easy cross-compiling!</p>



<a name="213371601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213371601" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213371601">(Oct 15 2020 at 01:45)</a>:</h4>
<p>yassssssssssssssssssss</p>
<div class="codehilite"><pre><span></span><code> % rustup target add aarch64-apple-darwin
info: downloading component &#39;rust-std&#39; for &#39;aarch64-apple-darwin&#39;
info: installing component &#39;rust-std&#39; for &#39;aarch64-apple-darwin&#39;
info: Defaulting to 500.0 MiB unpack ram
 17.6 MiB /  17.6 MiB (100 %)  10.6 MiB/s in  1s ETA:  0s
</code></pre></div>



<a name="213372887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213372887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213372887">(Oct 15 2020 at 02:08)</a>:</h4>
<p>heh, I posted the same thing in some Mozilla internal matrix channel.<br>
I'm wondering, does the HOSTS part of <a href="https://github.com/rust-lang/rust/pull/77895/files">https://github.com/rust-lang/rust/pull/77895/files</a> mean there should be a aarch64-apple-darwin toolchain too?</p>



<a name="213372902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213372902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213372902">(Oct 15 2020 at 02:09)</a>:</h4>
<p>yes "but"</p>



<a name="213372907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213372907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213372907">(Oct 15 2020 at 02:09)</a>:</h4>
<p>I'm working on the rustup PR at the moment</p>



<a name="213372916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213372916" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213372916">(Oct 15 2020 at 02:09)</a>:</h4>
<p>so it's pretty hard to actually get right now</p>



<a name="213372981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213372981" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213372981">(Oct 15 2020 at 02:10)</a>:</h4>
<p>I tweaked the rustup script to use aarch64 when it gets arm64, and I'm getting a failure to download <a href="https://static.rust-lang.org/rustup/dist/aarch64-apple-darwin/rustup-init">https://static.rust-lang.org/rustup/dist/aarch64-apple-darwin/rustup-init</a> I guess that part is not published yet?</p>



<a name="213372982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213372982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213372982">(Oct 15 2020 at 02:10)</a>:</h4>
<p>but a sneakypeeky:</p>
<div class="codehilite"><pre><span></span><code>shepmaster@dtk ~ % rustup install nightly
info: syncing channel updates for &#39;nightly-aarch64-apple-darwin&#39;
info: latest update on 2020-10-15, rust version 1.49.0-nightly (e160e5cb8 2020-10-14)
info: downloading component &#39;cargo&#39;
info: downloading component &#39;clippy&#39;
info: downloading component &#39;rust-std&#39;
 17.6 MiB /  17.6 MiB (100 %)   6.4 MiB/s in  2s ETA:  0s
info: downloading component &#39;rustc&#39;
 42.0 MiB /  42.0 MiB (100 %)   6.3 MiB/s in  7s ETA:  0s
info: downloading component &#39;rustfmt&#39;
info: installing component &#39;cargo&#39;
info: using up to 500.0 MiB of RAM to unpack components
info: installing component &#39;clippy&#39;
info: installing component &#39;rust-std&#39;
 17.6 MiB /  17.6 MiB (100 %)   5.4 MiB/s in  3s ETA:  0s
info: installing component &#39;rustc&#39;
 42.0 MiB /  42.0 MiB (100 %)   5.8 MiB/s in  7s ETA:  0s
info: installing component &#39;rustfmt&#39;

  nightly-aarch64-apple-darwin installed - rustc 1.49.0-nightly (e160e5cb8 2020-10-14)

info: checking for self-updates
</code></pre></div>



<a name="213373000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373000">(Oct 15 2020 at 02:10)</a>:</h4>
<p>Yes, there is no published rustup aarch64-apple-darwin binary, thus the PR I mentioned.</p>



<a name="213373007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373007">(Oct 15 2020 at 02:11)</a>:</h4>
<p>I suppose with a x86-64 rustup it should be possible to add the toolchain</p>



<a name="213373016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373016">(Oct 15 2020 at 02:11)</a>:</h4>
<p>yep. <a href="https://github.com/shepmaster/rust/blob/silicon/silicon/README-cross-compilation.md#installing-rustup">https://github.com/shepmaster/rust/blob/silicon/silicon/README-cross-compilation.md#installing-rustup</a></p>



<a name="213373113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373113">(Oct 15 2020 at 02:13)</a>:</h4>
<p>simpler one-liner: <code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | arch --x86_64 sh</code></p>



<a name="213373123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373123">(Oct 15 2020 at 02:13)</a>:</h4>
<p>then you can tweak the default host triple at the prompt</p>



<a name="213373168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373168">(Oct 15 2020 at 02:14)</a>:</h4>
<p>and the default triple can be an argument to the script, IIRC</p>



<a name="213373171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373171" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373171">(Oct 15 2020 at 02:14)</a>:</h4>
<p>TIL <code>arch</code></p>



<a name="213373186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373186">(Oct 15 2020 at 02:14)</a>:</h4>
<p>You run that / know for sure it works?</p>



<a name="213373194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373194">(Oct 15 2020 at 02:15)</a>:</h4>
<p>I did it just now before posting</p>



<a name="213373276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373276" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373276">(Oct 15 2020 at 02:16)</a>:</h4>
<p>Complete one-liner: <code>arch --x86_64 sh &lt;(curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs) --default-host aarch64-apple-darwin --default-toolchain nightly</code></p>



<a name="213373470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213373470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213373470">(Oct 15 2020 at 02:20)</a>:</h4>
<p>And does that get you the native aarch64 toolchain?</p>



<a name="213374126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374126" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374126">(Oct 15 2020 at 02:32)</a>:</h4>
<p>yup</p>



<a name="213374205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374205" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374205">(Oct 15 2020 at 02:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code>% file ~/.cargo/bin/{cargo,rustc}
/Users/glandium/.cargo/bin/cargo: Mach-O 64-bit executable x86_64
/Users/glandium/.cargo/bin/rustc: Mach-O 64-bit executable x86_64
</code></pre></div>



<a name="213374212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374212">(Oct 15 2020 at 02:34)</a>:</h4>
<p>huh damn</p>



<a name="213374216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374216">(Oct 15 2020 at 02:34)</a>:</h4>
<p>That's expected :-)</p>



<a name="213374224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374224">(Oct 15 2020 at 02:34)</a>:</h4>
<p>those are the rustup shim binaries that parse the <code>+whatever</code> syntax</p>



<a name="213374225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374225" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374225">(Oct 15 2020 at 02:34)</a>:</h4>
<p>oh right, they are rustup</p>



<a name="213374239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374239" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374239">(Oct 15 2020 at 02:35)</a>:</h4>
<div class="codehilite"><pre><span></span><code>% file `rustup which cargo` `rustup which rustc`
/Users/glandium/.rustup/toolchains/nightly-aarch64-apple-darwin/bin/cargo: Mach-O 64-bit executable arm64
/Users/glandium/.rustup/toolchains/nightly-aarch64-apple-darwin/bin/rustc: Mach-O 64-bit executable arm64
</code></pre></div>



<a name="213374250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374250">(Oct 15 2020 at 02:35)</a>:</h4>
<p>Alright, my current instructions are <a href="https://github.com/shepmaster/rust/blob/silicon/silicon/README.md">https://github.com/shepmaster/rust/blob/silicon/silicon/README.md</a></p>



<a name="213374421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374421" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374421">(Oct 15 2020 at 02:39)</a>:</h4>
<p>do you get random SIGKILL issues due to signature verification failing on e.g. build-scripts during compilation?</p>



<a name="213374429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374429" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374429">(Oct 15 2020 at 02:39)</a>:</h4>
<p>it started happening with Big Sur beta 8 for me.</p>



<a name="213374442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374442">(Oct 15 2020 at 02:39)</a>:</h4>
<p>Our DTK is cloud-managed, so I actually don't know what version of the OS is on there.</p>



<a name="213374511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374511">(Oct 15 2020 at 02:40)</a>:</h4>
<p>and <code>system_profiler SPSoftwareDataType</code> just says <code>11.0</code></p>



<a name="213374516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374516">(Oct 15 2020 at 02:40)</a>:</h4>
<p>Not much help there</p>



<a name="213374544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374544">(Oct 15 2020 at 02:41)</a>:</h4>
<p>But no, I haven't seen that. I also haven't spent much time compiling crates other than a handful (like my own, for ego purposes)</p>



<a name="213374556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374556">(Oct 15 2020 at 02:41)</a>:</h4>
<p>wikipedia says there's a a new beta today</p>



<a name="213374616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374616">(Oct 15 2020 at 02:42)</a>:</h4>
<p>We've <a href="https://betawiki.net/wiki/MacOS_Big_Sur_build_20A5299w">https://betawiki.net/wiki/MacOS_Big_Sur_build_20A5299w</a></p>



<a name="213374621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374621" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374621">(Oct 15 2020 at 02:42)</a>:</h4>
<p>So maybe never updated.</p>



<a name="213374629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374629" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374629">(Oct 15 2020 at 02:43)</a>:</h4>
<p>I might need to remote in and check for updates.</p>



<a name="213374641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374641" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374641">(Oct 15 2020 at 02:43)</a>:</h4>
<p><code>Time since boot: 85 days 13:44</code></p>



<a name="213374714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374714" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374714">(Oct 15 2020 at 02:44)</a>:</h4>
<p>that's an old beta, I never had these signature issues on them</p>



<a name="213374725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374725">(Oct 15 2020 at 02:44)</a>:</h4>
<p><a href="https://betawiki.net/wiki/MacOS_Big_Sur">https://betawiki.net/wiki/MacOS_Big_Sur</a></p>



<a name="213374757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374757">(Oct 15 2020 at 02:45)</a>:</h4>
<p>" 20A5395g is the official Beta 10 build of macOS Big Sur, which was released to Apple developers on 2020-10-14.[1]"</p>



<a name="213374854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374854" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374854">(Oct 15 2020 at 02:47)</a>:</h4>
<p>but now it's bedtime!</p>



<a name="213374861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213374861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213374861">(Oct 15 2020 at 02:47)</a>:</h4>
<p>You can watch my PR fail, if you'd enjoy it — <a href="https://github.com/rust-lang/rustup/pull/2521">https://github.com/rust-lang/rustup/pull/2521</a></p>



<a name="213575711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213575711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yerkebulan Tulibergenov <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213575711">(Oct 16 2020 at 15:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> Should we check the checkbox for "Achieve Tier 2 support"?</p>



<a name="213575777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213575777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yerkebulan Tulibergenov <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213575777">(Oct 16 2020 at 15:30)</a>:</h4>
<p>Sorry, it was probably a bad idea to "@" you :(</p>



<a name="213576463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213576463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213576463">(Oct 16 2020 at 15:36)</a>:</h4>
<p>Nah, mention is fine. Updated, thanks!</p>



<a name="213576805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213576805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yerkebulan Tulibergenov <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213576805">(Oct 16 2020 at 15:38)</a>:</h4>
<p>BTW, that was a super quick promotion to Tier 2. Thanks for all the hard work.</p>



<a name="213877740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213877740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Hommey <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213877740">(Oct 20 2020 at 05:59)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> FYI, I have a workaround for the codesign issues: <code>RUSTC=$(rustup which rustc) $(rustup which cargo) build</code>. Apparently, it's the rustup x86-64 wrapper that throws something off.</p>



<a name="213906283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213906283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213906283">(Oct 20 2020 at 11:46)</a>:</h4>
<p>Which should be fixed at the next release of rustup (fingers crossed)</p>



<a name="213906399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/213906399" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#213906399">(Oct 20 2020 at 11:47)</a>:</h4>
<p>I’ve seen similar things with <code>cc</code>, where it detects if you are on x86 or arm64 if any process in the calling hierarchy is x86. Even if it’s not the immediate parent.</p>



<a name="216011457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/216011457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#216011457">(Nov 08 2020 at 15:28)</a>:</h4>
<p>Ok, the test suite passes on aarch64 except for some LTO related things </p>
<div class="codehilite"><pre><span></span><code>x.py test --exclude src/test/debuginfo --exclude src/test/run-make-fulldeps

Build completed successfully in 0:11:41
</code></pre></div>
<p>The first exclude is because I'm running in SSH and LLDB isn't configured to work that way (I've run those tests when screen sharing though). The second exclude is the LTO tests (<a href="https://github.com/rust-lang/rust/issues/78881">https://github.com/rust-lang/rust/issues/78881</a>).</p>



<a name="216826229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/216826229" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#216826229">(Nov 16 2020 at 02:00)</a>:</h4>
<p>OK, found a patch that avoids the assertion from LLVM. With that:</p>
<div class="codehilite"><pre><span></span><code>% ../x.py test --stage=2
...
Build completed successfully in 0:11:37
</code></pre></div>



<a name="216826250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/216826250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#216826250">(Nov 16 2020 at 02:01)</a>:</h4>
<p>So hopefully we will be starting off on a good foot whenever we get some kind of CI.</p>



<a name="216881587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/216881587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#216881587">(Nov 16 2020 at 14:57)</a>:</h4>
<p>Ugh. Now I updated my branch and get</p>
<div class="codehilite"><pre><span></span><code>command: &quot;/Users/shepmaster/Projects/rust/full/build/aarch64-apple-darwin/test/ui/process/process-spawn-with-unicode-params/a&quot;
stdout:
------------------------------------------

------------------------------------------
stderr:
------------------------------------------
thread &#39;main&#39; panicked at &#39;assertion failed: p.status.success()&#39;, /Users/shepmaster/Projects/rust/src/test/ui/process/process-spawn-with-unicode-params.rs:63:9
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="218224422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/242906-t-compiler/arm/topic/macOS/near/218224422" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/242906-t-compiler/arm/topic/macOS.html#218224422">(Nov 29 2020 at 18:43)</a>:</h4>
<p>And with a new update..</p>
<div class="codehilite"><pre><span></span><code>% ../x.py test --stage=2
Build completed successfully in 0:11:28
</code></pre></div>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
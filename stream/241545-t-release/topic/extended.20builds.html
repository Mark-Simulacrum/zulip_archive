<html>
<head><meta charset="utf-8"><title>extended builds · t-release · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/index.html">t-release</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html">extended builds</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271843943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271843943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271843943">(Feb 14 2022 at 15:43)</a>:</h4>
<p>We currently ship a rust- tarball/pkg/msi installer, which contains a variety of pieces:</p>
<ul>
<li>rustc</li>
<li>std</li>
<li>mingw (on mingw)</li>
<li>rust-docs</li>
<li>rust-demangler</li>
<li>cargo</li>
<li>rls</li>
<li>rust-analyzer</li>
<li>llvm-components</li>
<li>clippy</li>
<li>miri</li>
<li>analysis</li>
</ul>
<p>This component means that when we're trying to split up builders to reduce CI times (for example), we need to be careful as splitting any of these off means they won't get built and this component will stop including them. My sense is that this component is likely not very much used (it's not used at all by rustup, for example), and maybe it's worth considering either streamlining it by dropping tooling or entirely dropping this in favor of users using individual installers and/or rustup.</p>
<p>At minimum, I think we should consider dropping unstable and/or nightly-only components from this (e.g., llvm-components, rust-analyzer, miri)</p>



<a name="271844141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271844141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271844141">(Feb 14 2022 at 15:44)</a>:</h4>
<p>(It would also help clean up rustbuild a little since the whole extended builds thing causes a lot of trailing throughout the code)</p>



<a name="271845342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271845342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271845342">(Feb 14 2022 at 15:51)</a>:</h4>
<p>For some vague sense of usage stats, it looks like in the last 30 days the extended/combined component for x86_64-unknown-linux-gnu was downloaded ~100k times, and just the rustc- component was downloaded ~800k times. So the usage is definitely there for at least the linux one (in the small amount of stats we have, no other platform features, so presumably linux is dominant here).</p>
<p>(rustup was downloaded 2.1 million times, for a sense of comparison to presumably other platforms usage).</p>



<a name="271845491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271845491" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271845491">(Feb 14 2022 at 15:51)</a>:</h4>
<p>If we even dropped it from macOS and windows, that would already likely help speed up the current set of slowest CI builders, fwiw.</p>



<a name="271845650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271845650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271845650">(Feb 14 2022 at 15:52)</a>:</h4>
<p>Do you have stats on the <code>pkg</code> and <code>msi</code> files?</p>



<a name="271845804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271845804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271845804">(Feb 14 2022 at 15:53)</a>:</h4>
<p>the stats I'm looking at are cloudfront's popular objects report, so those are used less, but I don't think we can get more detailed in terms of how much.</p>



<a name="271846064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271846064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271846064">(Feb 14 2022 at 15:55)</a>:</h4>
<p>I'm surprised they get downloaded 100k times</p>



<a name="271846272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271846272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271846272">(Feb 14 2022 at 15:56)</a>:</h4>
<p>Some sense of how much other platforms might be getting used:</p>
<ul>
<li>rust-std-1.58.1-x86_64-apple-darwin.tar.xz was downloaded 100k times (top downloads on any apple component)</li>
<li>rust-std-1.58.1-x86_64-pc-windows-msvc.tar.xz was downloaded ~97k times (top downloads on any windows component)</li>
</ul>



<a name="271846345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271846345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271846345">(Feb 14 2022 at 15:56)</a>:</h4>
<p>I use the combined one for rustc+rust-std+cargo, as it's smaller than the separate packages. But even that is just for bootstrapping "backup" if the distro base fails for some reason.</p>



<a name="271846495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271846495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271846495">(Feb 14 2022 at 15:57)</a>:</h4>
<p>I'm not quite sure how to explain rust-std getting downloaded that much more often than rustc- -- maybe the stats are just not very accurate. It doesn't seem likely people are cross-compiling to apple or pc-windows...</p>



<a name="271846811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271846811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271846811">(Feb 14 2022 at 16:00)</a>:</h4>
<p>(In case we were wondering, no one is using beta: 2M hits for channel-rust-stable.toml, 110k for channel-rust-beta.toml, and ~650k for channel-rust-nightly.toml)</p>



<a name="271847402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271847402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Silverstone <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271847402">(Feb 14 2022 at 16:02)</a>:</h4>
<p>Rustup uses beta in CI<br>
(as do I personally)</p>



<a name="271847575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271847575" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271847575">(Feb 14 2022 at 16:03)</a>:</h4>
<p>Sure, I mean, there are /some/ users, but relatively little comparatively.</p>



<a name="271848147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271848147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271848147">(Feb 14 2022 at 16:07)</a>:</h4>
<p>Though I suppose direct comparison is hard -- at least to nightly, since that ships much more often</p>



<a name="271916360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/extended%20builds/near/271916360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/extended.20builds.html#271916360">(Feb 15 2022 at 01:54)</a>:</h4>
<p>I'm not surprised it gets used on Windows and Mac. I'm surprised it gets used much on Linux.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
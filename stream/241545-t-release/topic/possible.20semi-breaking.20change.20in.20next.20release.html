<html>
<head><meta charset="utf-8"><title>possible semi-breaking change in next release · t-release · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/index.html">t-release</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html">possible semi-breaking change in next release</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251998362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/251998362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aidan Hobson Sayers <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#251998362">(Sep 04 2021 at 12:47)</a>:</h4>
<p>I stumbled across <a href="https://github.com/rust-lang/rust/issues/88581">https://github.com/rust-lang/rust/issues/88581</a> yesterday due to it breaking nightly build of a project I made a PR for - in short, everything that has a Cargo.lock for num-bigint will break (though it's not technically a breaking change)</p>
<p>I think crater will regenerate lockfiles right? Is there a way to make it not do that to see what pinned things this might break?</p>



<a name="252008730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/252008730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#252008730">(Sep 04 2021 at 15:41)</a>:</h4>
<p>it wouldn't be the first time we temporarily revert something like this, even though it's an 'acceptable' breaking change.</p>



<a name="252008803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/252008803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#252008803">(Sep 04 2021 at 15:42)</a>:</h4>
<p>would be nice if #[unstable] would hide/disable the method a bit better, like it does in some cases.</p>



<a name="252011430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/252011430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#252011430">(Sep 04 2021 at 16:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="117568">Aidan Hobson Sayers</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/251998362">said</a>:</p>
<blockquote>
<p>I think crater will regenerate lockfiles right?</p>
</blockquote>
<p>I'm pretty certain crater will keep existing lockfiles.</p>
<blockquote>
<p>would be nice if #[unstable] would hide/disable the method a bit better, like it does in some cases.</p>
</blockquote>
<p>Does anyone know why the <code>unstable_name_collisions</code> lint didn't fire in this case instead of erroring?</p>



<a name="252012452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/252012452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#252012452">(Sep 04 2021 at 16:48)</a>:</h4>
<p>i'm guessing because the signature is different? maybe</p>



<a name="252217814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/252217814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#252217814">(Sep 06 2021 at 19:58)</a>:</h4>
<p>I think it's because the <code>self</code> inherent method is resolved before the <code>&amp;self</code> trait method is considered at all.</p>



<a name="253003087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253003087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253003087">(Sep 12 2021 at 18:22)</a>:</h4>
<p>There is more discussion of this over at <a href="https://github.com/rust-lang/rust/issues/88878">#88878</a>.  I confirmed the reason the unstable method resolution skip didn't work is because it only considers collisions when the receiver is the same.</p>



<a name="253024817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253024817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253024817">(Sep 13 2021 at 01:14)</a>:</h4>
<p>I'm happy to submit a PR to temporarily revert the implementation if desired. Not like the new methods are a pressing issue that needs fixing.</p>



<a name="253026069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253026069" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253026069">(Sep 13 2021 at 01:36)</a>:</h4>
<p>Iterator::intersperse will hit stable in ~6 weeks, so I don't think we should revert on nightly (it was stabilized in 1.56, nightly is 1.57 as of last week).</p>



<a name="253026083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253026083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253026083">(Sep 13 2021 at 01:36)</a>:</h4>
<p>I think that's the one causing the most trouble.</p>



<a name="253071151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253071151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253071151">(Sep 13 2021 at 11:06)</a>:</h4>
<p>yeah, this is often a problem :(   we could really use some solution for it, but it's tricky.</p>



<a name="253071244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253071244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253071244">(Sep 13 2021 at 11:07)</a>:</h4>
<p>we could record the version of std that was used when publishing a crate, and then treat all #[stable] things with a rust version higher than that as #[unstable]. that would already solve a ton of these situations.</p>



<a name="253080763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253080763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253080763">(Sep 13 2021 at 12:29)</a>:</h4>
<p>Seems.. complicated. I think once cfg(accessible) stabilizes the <em>really</em> prominent examples like itertools can probably cfg(not(accessible)) their methods?</p>



<a name="253080782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253080782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253080782">(Sep 13 2021 at 12:29)</a>:</h4>
<p>Obviously, in some cases, there may not be a perfect API match, but often it's close enough.</p>



<a name="253080902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253080902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253080902">(Sep 13 2021 at 12:30)</a>:</h4>
<p>yeah that also works. but requires work on the side of <code>itertools</code>. but that's already a lot better than nothing</p>



<a name="253080972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253080972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253080972">(Sep 13 2021 at 12:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/253080763">said</a>:</p>
<blockquote>
<p>Seems.. complicated.</p>
</blockquote>
<p>what part of that seems complicated?</p>



<a name="253080999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253080999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253080999">(Sep 13 2021 at 12:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310399">Mara</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/253071244">said</a>:</p>
<blockquote>
<p>we could record the version of std that was used when publishing a crate, and then treat all #[stable] things with a rust version higher than that as #[unstable]. that would already solve a ton of these situations.</p>
</blockquote>
<p>Cargo will soon stabilize the <code>rust-version</code> field. Treating <code>#[stable]</code> things with a rust version higher than the specified version in <code>rust-version</code> as unstable would not only solve this issue of breaking changes, but also make it much harder to accidentally depend on something not yet supported by the specified rust version.</p>



<a name="253081029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253081029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253081029">(Sep 13 2021 at 12:31)</a>:</h4>
<p>yeah!</p>



<a name="253081133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253081133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253081133">(Sep 13 2021 at 12:32)</a>:</h4>
<p>I think it will have to be implemented before stabilization though, or use a different field for back compat of rustc itself.</p>



<a name="253081184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253081184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253081184">(Sep 13 2021 at 12:32)</a>:</h4>
<p>yeah i wonder how hard it is to implement. spans will need to track that version, just like they track the edition already.</p>



<a name="253083092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083092">(Sep 13 2021 at 12:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/253080999">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310399">Mara</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/253071244">said</a>:</p>
<blockquote>
<p>we could record the version of std that was used when publishing a crate, and then treat all #[stable] things with a rust version higher than that as #[unstable]. that would already solve a ton of these situations.</p>
</blockquote>
<p>Cargo will soon stabilize the <code>rust-version</code> field. Treating <code>#[stable]</code> things with a rust version higher than the specified version in <code>rust-version</code> as unstable would not only solve this issue of breaking changes, but also make it much harder to accidentally depend on something not yet supported by the specified rust version.</p>
</blockquote>
<p>isn't that stabilizing in 1.56? we'd need to revert the stabilization quickly in that case</p>



<a name="253083104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083104">(Sep 13 2021 at 12:47)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3139">@T-cargo</span> ^</p>



<a name="253083201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083201">(Sep 13 2021 at 12:48)</a>:</h4>
<p>Hm, I think it's future compatible for us to add more to it -- we'd just not do so for earlier Rust versions?</p>



<a name="253083340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083340">(Sep 13 2021 at 12:49)</a>:</h4>
<p>that'd be really confusing tbh</p>



<a name="253083462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083462">(Sep 13 2021 at 12:50)</a>:</h4>
<p>with the field having a different meaning once you bump your MSRV</p>



<a name="253083483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083483">(Sep 13 2021 at 12:50)</a>:</h4>
<p>It has the same meaning?</p>



<a name="253083504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083504">(Sep 13 2021 at 12:50)</a>:</h4>
<p>It's just 'less advisory', in some sense</p>



<a name="253083559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083559">(Sep 13 2021 at 12:50)</a>:</h4>
<p>sorry, meaning was the wrong word for that <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="253083664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253083664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253083664">(Sep 13 2021 at 12:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310399">Mara</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/253081184">said</a>:</p>
<blockquote>
<p>yeah i wonder how hard it is to implement. spans will need to track that version, just like they track the edition already.</p>
</blockquote>
<p>I think we could likely get away with it being tracked at a crate level, no? Spans don't track the ambient #![feature(...)] today, and this would be pretty close to that, right?</p>



<a name="253084007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084007">(Sep 13 2021 at 12:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/253083504">said</a>:</p>
<blockquote>
<p>It's just 'less advisory', in some sense</p>
</blockquote>
<p>true, but still, I'm worried about the guarantee only applying to some values of that field, not all of them</p>



<a name="253084147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084147">(Sep 13 2021 at 12:55)</a>:</h4>
<p>editions are also a crate-level property, but tracked for the spans, so it works well through macro expansions. and enabled features are also already tracked per span, through allow_internal_unstable.</p>



<a name="253084153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084153">(Sep 13 2021 at 12:55)</a>:</h4>
<p>In the sense that 1.57 wouldn't actually guarantee your MSRV isn't 1.70? That's going to be true regardless, right?</p>



<a name="253084179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084179">(Sep 13 2021 at 12:55)</a>:</h4>
<p>Since we're not tracking <em>all</em> features through this</p>



<a name="253084254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084254">(Sep 13 2021 at 12:56)</a>:</h4>
<p>e.g., if you use a new lang feature, that's not likely to be detected, because we don't want to leave all the feature gating code in the compiler indefinitely I think</p>



<a name="253084290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084290">(Sep 13 2021 at 12:56)</a>:</h4>
<p>(high burden on implementors to be careful, not always possible...)</p>



<a name="253084421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084421">(Sep 13 2021 at 12:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release/near/253084153">said</a>:</p>
<blockquote>
<p>In the sense that 1.57 wouldn't actually guarantee your MSRV isn't 1.70? That's going to be true regardless, right?</p>
</blockquote>
<p>it's more like "to ensure your crate doesn't break due to standard library changes you should set the <code>rust-version</code> field" instead of "[...] you should set a <code>rust-version</code> greater than 1.XX"</p>



<a name="253084556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084556">(Sep 13 2021 at 12:58)</a>:</h4>
<p>if in blogs, online comments and such "greater than 1.XX" is forgotten then people are going to get the wrong behavior without any error telling them they're not actually opting into that guarantee</p>



<a name="253084646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084646">(Sep 13 2021 at 12:58)</a>:</h4>
<p>they just get the current behavior -- not really "wrong", just more prone to breakage <em>if</em> it happens</p>



<a name="253084676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084676" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084676">(Sep 13 2021 at 12:59)</a>:</h4>
<p>(if this is implemented along with the stabilization the two options would instead be "warning/error due to the missing field" vs "you have the guarantee")</p>



<a name="253084707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084707">(Sep 13 2021 at 12:59)</a>:</h4>
<p>but in any case, fwiw, this is basically editions on steroids to some extent. I know there was push back when I suggested per-version editions, and this is not far off :)</p>



<a name="253084742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253084742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253084742">(Sep 13 2021 at 12:59)</a>:</h4>
<p>(since you can tie "anything" at that point to the version field)</p>



<a name="253108595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253108595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253108595">(Sep 13 2021 at 15:26)</a>:</h4>
<p>Responding to the ping, but the <code>rust-version</code> field has had tons of debate and is very deliberately quite simple and doesn't really do much in the manifest. Blocking it for "what about this" or enhancing it should go through a forum that probably doesn't just ping the Cargo team</p>



<a name="253109287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253109287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253109287">(Sep 13 2021 at 15:29)</a>:</h4>
<p>That reminds me -- <span class="user-mention" data-user-id="116015">@Alex Crichton</span> can you confirm it doesn't participate in dep resolution at all today? That was my impression based on a quick skim of docs and issues, but wanted to check since I explicitly noted that in release notes</p>



<a name="253109372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253109372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253109372">(Sep 13 2021 at 15:30)</a>:</h4>
<p>correct, all it does is generate an error if you're rustc is too old</p>



<a name="253109394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253109394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253109394">(Sep 13 2021 at 15:30)</a>:</h4>
<p>thanks!</p>



<a name="253319917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/253319917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#253319917">(Sep 14 2021 at 20:36)</a>:</h4>
<p>Yeah, all the other fancy stuff was left to future work (RFCs)</p>



<a name="256752251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/256752251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Wrenn <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#256752251">(Oct 08 2021 at 14:56)</a>:</h4>
<p>Hi, itertools maintainer here. These sorts of breakages are frustrating because they strike at the heart of the mission of itertools: to improve iterator ergonomics, and to serve as a low-stakes laboratory for potential additions to <code>Iterator</code>. Unfortunately, the more an <code>Itertools</code> addition succeeds at this mission, the worse the breakage is when that addition is mainlined into <code>Iterator</code>. I often feel like I maintain a ticking time bomb, and have a hard time recommending the crate given the risk posed by using it. <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>
<p>In the past, what we've done in the event of this kind of breakage is deprecate the offending method, then removed it. Unfortunately, as itertools's dependents have increased over the years, the scope of the ensuing breakage has only increased.</p>
<p>I'm happy to take a more sophisticated approach this time around, provided that the maintenance burden isn't too high. (E.g., I generally don't have the capacity to push out new minor releases of old versions of Itertools, but unfortunately 42% of our users are on 0.9.x or lower.)</p>



<a name="256753270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/256753270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#256753270">(Oct 08 2021 at 15:02)</a>:</h4>
<p>Thanks! We're reverting the stabilization for now, but there's definitely an expectation to continue discussions and identify the best path forward for both this stabilization but also future ones with similar patterns -- it's not a problem limited to itertools, for sure.</p>



<a name="256798219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/256798219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#256798219">(Oct 08 2021 at 20:07)</a>:</h4>
<p>I wonder if prefixing/postfixing all itertools methods with something would solve this issue? That would make it unlikely to conflict with new Iterator methods, though it would of course reduce ergonomics for itertools users and won't fix users of older itertools versions.</p>



<a name="256808022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/256808022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#256808022">(Oct 08 2021 at 21:23)</a>:</h4>
<p>Or could we make <code>Iterator::intersperse</code> "weak" in method resolution?<br>
Basically the same as what we're doing for <code>unstable</code> already, just made permanent.</p>



<a name="256809132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/256809132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#256809132">(Oct 08 2021 at 21:33)</a>:</h4>
<p>IMHO, it would be good to have a generic solution. E.g. I think extending std types in third party crates, like <code>File</code> and <code>Path</code>, is also something that should be encouraged instead of being a potential hazard, no?</p>



<a name="256813638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/256813638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#256813638">(Oct 08 2021 at 22:17)</a>:</h4>
<p>I wonder if we could have a "weak resolution" attribute in libstd so the compiler gives precedence to items from other crates</p>



<a name="256813686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/possible%20semi-breaking%20change%20in%20next%20release/near/256813686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/possible.20semi-breaking.20change.20in.20next.20release.html#256813686">(Oct 08 2021 at 22:18)</a>:</h4>
<p>Basically the <code>unstable</code> thing but for <em>all</em> items, not just intersperse</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
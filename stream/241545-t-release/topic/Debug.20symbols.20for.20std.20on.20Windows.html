<html>
<head><meta charset="utf-8"><title>Debug symbols for std on Windows · t-release · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/index.html">t-release</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html">Debug symbols for std on Windows</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="227600156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600156">(Feb 24 2021 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I was talking to <span class="user-mention" data-user-id="121055">@Pietro Albini</span> about the fact that the official release of the std lib does not have debug symbols on Windows. I was going to investigate changing that but I was wondering if you knew anything about that.</p>



<a name="227600193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600193">(Feb 24 2021 at 13:48)</a>:</h4>
<p>I suspect it's the same pdb issue you fixed recently</p>



<a name="227600217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600217">(Feb 24 2021 at 13:49)</a>:</h4>
<p>(since windows doesn't embed debuginfo?)</p>



<a name="227600430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600430">(Feb 24 2021 at 13:50)</a>:</h4>
<p>Yes though we could probably embed debug symbols into the lib in this case instead of a separate PDB</p>



<a name="227600501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600501">(Feb 24 2021 at 13:51)</a>:</h4>
<p>Interesting, ok</p>



<a name="227600513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600513">(Feb 24 2021 at 13:51)</a>:</h4>
<p>I'm not familiar enough with the distribution to know if my bootstrap fix changes anything</p>



<a name="227600563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600563">(Feb 24 2021 at 13:51)</a>:</h4>
<p>Probably not? You can probably look at a nightly, but I'd guess a similar patch would need to be applied to the artifact building</p>



<a name="227600616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600616" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600616">(Feb 24 2021 at 13:52)</a>:</h4>
<p><a href="https://docs.microsoft.com/en-us/cpp/build/reference/z7-zi-zi-debug-information-format?view=msvc-160#z7">https://docs.microsoft.com/en-us/cpp/build/reference/z7-zi-zi-debug-information-format?view=msvc-160#z7</a></p>



<a name="227600710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227600710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227600710">(Feb 24 2021 at 13:52)</a>:</h4>
<p>Ok, I'll look into fixing this then.</p>



<a name="227601966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227601966" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227601966">(Feb 24 2021 at 14:01)</a>:</h4>
<p>As I suspected the debug info the stdlib.dll points to an absolute path on the build serve:</p>
<div class="codehilite"><pre><span></span><code>  Debug Directories

        Time Type        Size      RVA  Pointer
    -------- ------- -------- -------- --------
    60241E9B cv            8C 000AA014    A9414    Format: RSDS, {97411F4A-6903-432B-93A2-3B50A80EE243}, 1, D:\a\rust\rust\build\x86_64-pc-windows-msvc\stage1-std\x86_64-pc-windows-msvc\release\deps\std-0087fff1d6c84113.pdb
</code></pre></div>



<a name="227807252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227807252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227807252">(Feb 25 2021 at 17:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> looks like you were right. Nightly has the pdbs distributed with it and I get debug symbols for std when I build with the nightly compiler. I did not mean for that change to have such a positive impact but I'll take it!</p>



<a name="227808102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227808102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227808102">(Feb 25 2021 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> could you mark the pr as relnotes and leave a comment to that effect?</p>



<a name="227808275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/Debug%20symbols%20for%20std%20on%20Windows/near/227808275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/Debug.20symbols.20for.20std.20on.20Windows.html#227808275">(Feb 25 2021 at 17:49)</a>:</h4>
<p>Sure thing</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
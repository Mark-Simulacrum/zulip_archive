<html>
<head><meta charset="utf-8"><title>cargo tag inconsistency · t-release · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/index.html">t-release</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html">cargo tag inconsistency</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="263621558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263621558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263621558">(Dec 03 2021 at 18:47)</a>:</h4>
<p>I noticed that the tag for the recent cargo release is in a different format than usual.  It was tagged as <code>0.58</code> instead of <code>0.58.0</code>.  Was that intentional?</p>



<a name="263631321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631321">(Dec 03 2021 at 20:09)</a>:</h4>
<p>hm, that's what the release process indicates I think</p>



<a name="263631408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631408">(Dec 03 2021 at 20:10)</a>:</h4>
<p>or, no, that's what I read it as</p>



<a name="263631416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631416">(Dec 03 2021 at 20:10)</a>:</h4>
<p>but there's definitely .0's there</p>



<a name="263631462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631462">(Dec 03 2021 at 20:10)</a>:</h4>
<p>we probably want to update the release process to read the rust version from ../../src/version or so, which should be doable with some easyish adjustment to avoid this in the future</p>



<a name="263631490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631490">(Dec 03 2021 at 20:11)</a>:</h4>
<p>I can push a .0 tag later, if we care to</p>



<a name="263631539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631539">(Dec 03 2021 at 20:11)</a>:</h4>
<p>Oh, I think I know what I "thought"</p>



<a name="263631544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631544">(Dec 03 2021 at 20:11)</a>:</h4>
<blockquote>
<p><code>CARGO_VERSION="0.YY+1.0"</code></p>
</blockquote>



<a name="263631553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631553">(Dec 03 2021 at 20:11)</a>:</h4>
<p>I think I saw that as 1.0, the float</p>



<a name="263631614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631614">(Dec 03 2021 at 20:12)</a>:</h4>
<p>so even a parenthetical might be enough to avoid this accident in the future :)</p>



<a name="263631628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631628">(Dec 03 2021 at 20:12)</a>:</h4>
<p><code>CARGO_VERSION="0.(YY+1).0"</code></p>



<a name="263631674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263631674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263631674">(Dec 03 2021 at 20:12)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> let me know if you think the .0 is important for the tag (probably nice for consistency etc)</p>



<a name="263635021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263635021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263635021">(Dec 03 2021 at 20:39)</a>:</h4>
<p>Yea, if you could re-tag it, I would appreciate it.</p>



<a name="263635880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263635880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263635880">(Dec 03 2021 at 20:46)</a>:</h4>
<p>if it was floaty, <code>0.YY+1.0</code> should be <code>1.YY</code> <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="263636058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263636058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263636058">(Dec 03 2021 at 20:48)</a>:</h4>
<p>I could also change the instructions to something automated like:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="nv">CARGO_VERSION</span><span class="o">=</span><span class="k">$(</span>cargo read-manifest <span class="p">|</span> jq -r .version<span class="k">)</span>
</code></pre></div>
<p>Or it could use <code>awk</code> if you don't have <code>jq</code> installed.</p>



<a name="263653368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263653368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263653368">(Dec 03 2021 at 21:09)</a>:</h4>
<p>Reading the manifest sounds like a good idea - I think for these instructions jq is fine</p>



<a name="263653519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263653519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263653519">(Dec 03 2021 at 21:10)</a>:</h4>
<p>I'm always worried about tagging the wrong commit, more so than getting the version right, tbh</p>



<a name="263656432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/263656432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#263656432">(Dec 03 2021 at 21:38)</a>:</h4>
<p>Sure, posted <a href="https://github.com/rust-lang/rust-forge/pull/588">https://github.com/rust-lang/rust-forge/pull/588</a> to update the instructions</p>



<a name="264394743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/264394743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#264394743">(Dec 10 2021 at 02:04)</a>:</h4>
<p>pushed the 0.58.0 tag</p>



<a name="264396124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241545-t-release/topic/cargo%20tag%20inconsistency/near/264396124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/241545-t-release/topic/cargo.20tag.20inconsistency.html#264396124">(Dec 10 2021 at 02:31)</a>:</h4>
<p>also posted <a href="https://github.com/rust-lang/simpleinfra/pull/87">https://github.com/rust-lang/simpleinfra/pull/87</a> with a few scripts which should, hopefully, mean that we always tag and push cargo correctly</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
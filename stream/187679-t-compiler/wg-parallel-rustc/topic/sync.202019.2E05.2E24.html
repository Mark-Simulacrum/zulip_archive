<html>
<head><meta charset="utf-8"><title>sync 2019.05.24 · t-compiler/wg-parallel-rustc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/index.html">t-compiler/wg-parallel-rustc</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html">sync 2019.05.24</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="166453662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166453662" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lwshang <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166453662">(May 24 2019 at 13:45)</a>:</h4>
<p>Hi all, are we going to have a meeting in 15 minutes?</p>



<a name="166457762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166457762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166457762">(May 24 2019 at 14:28)</a>:</h4>
<p>No, there was no meeting scheduled for today (as far as I know)</p>



<a name="166458772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166458772" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lwshang <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166458772">(May 24 2019 at 14:39)</a>:</h4>
<p>That's fine. Shall we make it an async follow-up on current progress? <span class="user-mention" data-user-id="116466">@Zoxc</span> <span class="user-mention" data-user-id="116122">@simulacrum</span> Would you like to give some key points from the data you gathered during past week? Are they positive or negative in general?</p>
<p>Beyond gathering data, I believe we can always discuss about how to <strong>accomplish</strong> the experiment in following phases. From my recent experience of trying <code>parallel-rustc</code>, the only convincing way to have two kinds of rustc and compare their performance is to have two copy of rust repo locally and compiled them with <code>parallel-compiler = true</code> and <code>parallel-compiler = false</code> respectively. This workflow is too inconvenient to have other users opt-in and do the comparison. Do you have any idea on how to make the experiment user-friendly?</p>



<a name="166471520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166471520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166471520">(May 24 2019 at 17:12)</a>:</h4>
<p>I think for a limited set of platforms (e.g., the ones we currently publish <code>-alt</code> builds for) we could enable parallel compiler builds on just those</p>



<a name="166471630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166471630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166471630">(May 24 2019 at 17:14)</a>:</h4>
<p>That's linux, macOS, and Windows (64bit).</p>



<a name="166471661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166471661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166471661">(May 24 2019 at 17:14)</a>:</h4>
<p>Unfortunately we currently enable LLVM asserts for those builds so they're slower but potentially we could disable those for the time being? cc <span class="user-mention" data-user-id="116015">@Alex Crichton</span></p>



<a name="166471711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166471711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166471711">(May 24 2019 at 17:15)</a>:</h4>
<p>We can also publish one-off try builds with the parallel compiler enabled and suggest installation via <code>rustup-toolchain-install-master</code></p>



<a name="166472279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166472279" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166472279">(May 24 2019 at 17:23)</a>:</h4>
<p>I'm not really sure what the context of this is, but the <code>*-alt</code> builders are currently <em>the</em> builders with llvm assertions enabled</p>



<a name="166476108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166476108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166476108">(May 24 2019 at 18:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> ah, I thought that we had some others that ran tests -- I guess we consider bootstrapping "the test" though with -alt</p>



<a name="166476144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166476144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166476144">(May 24 2019 at 18:06)</a>:</h4>
<p>we basically want to ask for community feedback on a parallel-enabled compiler and to do so would wants somewhat regular updates of a parallel compiler build</p>



<a name="166476640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/sync%202019.05.24/near/166476640" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lwshang <a href="https://rust-lang.github.io/zulip_archive/stream/187679-t-compiler/wg-parallel-rustc/topic/sync.202019.2E05.2E24.html#166476640">(May 24 2019 at 18:13)</a>:</h4>
<p>Our roadmap is to have two experiment phases, <code>opt-in</code> and <code>opt-out</code>. In any of them, the users should be able to switch <code>parallel-rustc</code> on or off. So how can we make it? In detail , during the first phase, what is the default behavior of the rustc? Is it a compiler with <code>parallel-compiler = false</code>? Or <code>parallel-compiler = true &amp; -Zthreads=1</code>? As far as I know, the later one is what we can provide technically. While the first one is what we should have for comparison, so that we can measure the overhead added by <code>parallel-rustc</code>. This is the contradiction that troubles me .</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
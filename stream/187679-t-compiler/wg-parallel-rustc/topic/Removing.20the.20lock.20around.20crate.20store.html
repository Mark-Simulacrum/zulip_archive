<html>
<head><meta charset="utf-8"><title>Removing the lock around crate store · t-compiler/wg-parallel-rustc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/index.html">t-compiler/wg-parallel-rustc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html">Removing the lock around crate store</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="178432240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178432240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178432240">(Oct 17 2019 at 23:50)</a>:</h4>
<p>I have a branch doing that (<a href="https://github.com/petrochenkov/rust/tree/cstore" target="_blank" title="https://github.com/petrochenkov/rust/tree/cstore">https://github.com/petrochenkov/rust/tree/cstore</a>) and would like to notify others about it to avoid stepping on each other's toes (not sure this is the right place).</p>



<a name="178432274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178432274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178432274">(Oct 17 2019 at 23:51)</a>:</h4>
<p>Removing the lock wasn't the original goal, but it kinda happened naturally after the crate loader was turned into an internal detail of the resolver.</p>



<a name="178432334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178432334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178432334">(Oct 17 2019 at 23:53)</a>:</h4>
<p>The [WIP] commit needs some serious cleanup, but I hope to do it in some of the next days and make a PR.</p>



<a name="178433516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178433516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178433516">(Oct 18 2019 at 00:17)</a>:</h4>
<p>I think this is a good place. cc <span class="user-group-mention" data-user-group-id="1117">@WG-parallel-rustc</span></p>



<a name="178433521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178433521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178433521">(Oct 18 2019 at 00:17)</a>:</h4>
<p>(and that sounds great, thanks!)</p>



<a name="178433532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178433532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178433532">(Oct 18 2019 at 00:17)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="178509947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178509947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178509947">(Oct 18 2019 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> very cool!</p>



<a name="178595296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing%20the%20lock%20around%20crate%20store/near/178595296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/Removing.20the.20lock.20around.20crate.20store.html#178595296">(Oct 20 2019 at 14:22)</a>:</h4>
<p>PR submitted - <a href="https://github.com/rust-lang/rust/pull/65625" target="_blank" title="https://github.com/rust-lang/rust/pull/65625">https://github.com/rust-lang/rust/pull/65625</a>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>cargo timing results · t-compiler/wg-parallel-rustc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/index.html">t-compiler/wg-parallel-rustc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html">cargo timing results</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="177271401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177271401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177271401">(Oct 03 2019 at 18:15)</a>:</h4>
<p><a href="https://mark.rousskov.org/parallel-compiler-data/" target="_blank" title="https://mark.rousskov.org/parallel-compiler-data/">https://mark.rousskov.org/parallel-compiler-data/</a> might be of interest to <span class="user-mention" data-user-id="116015">@Alex Crichton</span> -- in particular, I'm not sure if I got the CPU usage %ages right, but those are really low compared to what I was expecting across the board</p>



<a name="177271480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177271480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177271480">(Oct 03 2019 at 18:16)</a>:</h4>
<p>this might be cool to roll into cargo for diffs between -Ztimings runs</p>



<a name="177271518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177271518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177271518">(Oct 03 2019 at 18:16)</a>:</h4>
<p>CPU %ages are just being summed and divided by count, ignoring time(?) in the first parameter</p>



<a name="177273894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177273894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177273894">(Oct 03 2019 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> the CPU usage via average may not be quite right because samples aren't taken with a consistent time interval</p>



<a name="177273903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177273903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177273903">(Oct 03 2019 at 18:44)</a>:</h4>
<p>I think you'd also need to factor in how far apart each sample is</p>



<a name="177273949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177273949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177273949">(Oct 03 2019 at 18:45)</a>:</h4>
<p>Okay, I thought that might be the case</p>



<a name="177273977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177273977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177273977">(Oct 03 2019 at 18:45)</a>:</h4>
<p>cargo should probably put this on the report</p>



<a name="177273984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177273984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177273984">(Oct 03 2019 at 18:45)</a>:</h4>
<p>and do the math for you</p>



<a name="177273985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177273985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177273985">(Oct 03 2019 at 18:45)</a>:</h4>
<p>I'll look into some scaling or something - probably linear, for simplicity</p>



<a name="177274036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274036">(Oct 03 2019 at 18:46)</a>:</h4>
<p>(this is awesome data btw, thank you so much for collecting all of it!)</p>



<a name="177274058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274058">(Oct 03 2019 at 18:46)</a>:</h4>
<p>in theory it's all based on trapezoids</p>



<a name="177274089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274089">(Oct 03 2019 at 18:46)</a>:</h4>
<p>average each pair of measurements and multiple by their distance</p>



<a name="177274093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274093">(Oct 03 2019 at 18:46)</a>:</h4>
<p>sum all that up and divide total time * 100</p>



<a name="177274100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274100">(Oct 03 2019 at 18:46)</a>:</h4>
<p>and that should be cpu usage</p>



<a name="177274134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274134" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274134">(Oct 03 2019 at 18:47)</a>:</h4>
<p>these results do look sort of sad unfortunatley</p>



<a name="177274150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274150">(Oct 03 2019 at 18:47)</a>:</h4>
<p>but I'm hoping that's due to excessive jobserver use</p>



<a name="177274169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274169">(Oct 03 2019 at 18:47)</a>:</h4>
<p>(if that hasn't changed since I last measured)</p>



<a name="177274172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274172">(Oct 03 2019 at 18:47)</a>:</h4>
<p>I did some spot checking and they look pretty realistic</p>



<a name="177274233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274233" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274233">(Oct 03 2019 at 18:48)</a>:</h4>
<p>oh I believe them</p>



<a name="177274238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274238">(Oct 03 2019 at 18:48)</a>:</h4>
<p>we just definitely can't ship this</p>



<a name="177274244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274244">(Oct 03 2019 at 18:48)</a>:</h4>
<p>as-is that is</p>



<a name="177274273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274273">(Oct 03 2019 at 18:48)</a>:</h4>
<p>Hm, why? It's better than master?</p>



<a name="177274319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274319">(Oct 03 2019 at 18:49)</a>:</h4>
<p>my take on these numbers at least is that it's better, but nowhere near "mountains better" that is what you expect from parallelism</p>



<a name="177274332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274332">(Oct 03 2019 at 18:49)</a>:</h4>
<p>Oh, sure</p>



<a name="177274342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274342">(Oct 03 2019 at 18:49)</a>:</h4>
<p>and there's currently what I perceive as a very high cost in terms of implementation and bugs</p>



<a name="177274356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274356">(Oct 03 2019 at 18:49)</a>:</h4>
<p>so at least to me it seems like not a great tradeoff right now</p>



<a name="177274378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274378">(Oct 03 2019 at 18:49)</a>:</h4>
<p>but I think this is all due to the jobserver integration if that hasn't changed</p>



<a name="177274390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274390">(Oct 03 2019 at 18:49)</a>:</h4>
<p>like on my machin building cargo <em>regressed</em> when given full parallelism</p>



<a name="177274480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274480">(Oct 03 2019 at 18:50)</a>:</h4>
<p>Hm yeah that doesn't seem to be the case based on these measurements</p>



<a name="177274494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274494">(Oct 03 2019 at 18:50)</a>:</h4>
<p>I've also got 28 cores though, and it looks like it gets worse with more cores</p>



<a name="177274509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274509">(Oct 03 2019 at 18:50)</a>:</h4>
<p>That's quite plausible</p>



<a name="177274517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274517">(Oct 03 2019 at 18:50)</a>:</h4>
<p>I have 8/16</p>



<a name="177274518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274518">(Oct 03 2019 at 18:50)</a>:</h4>
<p>e.g. sccache-opt got worse in your benchmarks with 16 cores vs 8 cores</p>



<a name="177274545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274545">(Oct 03 2019 at 18:51)</a>:</h4>
<p>is "master" here -j1</p>



<a name="177274556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274556">(Oct 03 2019 at 18:51)</a>:</h4>
<p>or is it a non-parallel-capable-compiler?</p>



<a name="177274565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274565">(Oct 03 2019 at 18:51)</a>:</h4>
<p>No, non parallel compiler</p>



<a name="177274579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274579">(Oct 03 2019 at 18:51)</a>:</h4>
<p>ah ok, that's probably what we mostly care about anyway</p>



<a name="177274585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274585">(Oct 03 2019 at 18:51)</a>:</h4>
<p>This data does not contain j1 data or it's equivalent</p>



<a name="177274605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274605">(Oct 03 2019 at 18:51)</a>:</h4>
<p>I think j1 is basically not interesting</p>



<a name="177274667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274667">(Oct 03 2019 at 18:52)</a>:</h4>
<p>Maybe for our poor 2 core CI</p>



<a name="177274731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274731">(Oct 03 2019 at 18:53)</a>:</h4>
<p>This is also all with default cargo settings, btw</p>



<a name="177274743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274743">(Oct 03 2019 at 18:53)</a>:</h4>
<p>So e.g. incremental is on</p>



<a name="177274808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274808">(Oct 03 2019 at 18:54)</a>:</h4>
<p>But that shouldn't matter too much, I tried servo with and without, made very little difference</p>



<a name="177274823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274823">(Oct 03 2019 at 18:54)</a>:</h4>
<p>nah yeah this is great, these are the measurments I think we largely care about</p>



<a name="177274842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274842">(Oct 03 2019 at 18:54)</a>:</h4>
<p>is this using RUSTFLAGS?</p>



<a name="177274861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274861">(Oct 03 2019 at 18:54)</a>:</h4>
<p>But that shouldn't matter too much, I tried servo with and without, made very little difference</p>



<a name="177274862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274862">(Oct 03 2019 at 18:54)</a>:</h4>
<p>At least to the shape of the CPU graph</p>



<a name="177274917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274917">(Oct 03 2019 at 18:55)</a>:</h4>
<p>But that shouldn't matter too much, I tried servo with and without, made very little difference</p>



<a name="177274918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274918">(Oct 03 2019 at 18:55)</a>:</h4>
<p>At least to the shape of the CPU graph</p>



<a name="177274919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274919">(Oct 03 2019 at 18:55)</a>:</h4>
<p>But that shouldn't matter too much, I tried servo with and without, made very little difference</p>



<a name="177274962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177274962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177274962">(Oct 03 2019 at 18:56)</a>:</h4>
<p>Yeah rustflags -Z threads=8</p>



<a name="177275019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275019">(Oct 03 2019 at 18:56)</a>:</h4>
<p>for the compiler you're using, the default is <code>-Zthreads=1</code>, right?</p>



<a name="177275037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275037">(Oct 03 2019 at 18:57)</a>:</h4>
<p>the reason I ask is that if Cargo receives <code>--target</code>, like it does for rustc, <code>RUSTFLAGS</code> isn't passed to procedural macros</p>



<a name="177275047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275047">(Oct 03 2019 at 18:57)</a>:</h4>
<p>or build scripts</p>



<a name="177275057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275057">(Oct 03 2019 at 18:57)</a>:</h4>
<p>Ah, yeah, but I always override it</p>



<a name="177275072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275072">(Oct 03 2019 at 18:57)</a>:</h4>
<p>Er</p>



<a name="177275145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275145">(Oct 03 2019 at 18:58)</a>:</h4>
<p>Yeah, so for proc macros and build scripts I guess we're building with -Zthreads=1 which is "worst case"</p>



<a name="177275156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275156">(Oct 03 2019 at 18:58)</a>:</h4>
<p>right yeah</p>



<a name="177275168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275168">(Oct 03 2019 at 18:58)</a>:</h4>
<p>probably not for most of these, only for the rustc ones</p>



<a name="177275178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275178">(Oct 03 2019 at 18:58)</a>:</h4>
<p>where I'm assuming you instrumented rustbuild to pass <code>-Ztimings</code></p>



<a name="177275181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275181">(Oct 03 2019 at 18:58)</a>:</h4>
<p>Yes</p>



<a name="177275216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275216">(Oct 03 2019 at 18:59)</a>:</h4>
<p>can I install the toolchain you're using?</p>



<a name="177275222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275222">(Oct 03 2019 at 18:59)</a>:</h4>
<p>Yes</p>



<a name="177275225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275225">(Oct 03 2019 at 18:59)</a>:</h4>
<p>I want to double-check my measurement that cargo is slower</p>



<a name="177275232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275232">(Oct 03 2019 at 18:59)</a>:</h4>
<p>the commit hashes should be in the results</p>



<a name="177275234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275234">(Oct 03 2019 at 18:59)</a>:</h4>
<p>(what's the command again?)</p>



<a name="177275245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275245">(Oct 03 2019 at 18:59)</a>:</h4>
<p>it's the alt version right?</p>



<a name="177275249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275249">(Oct 03 2019 at 18:59)</a>:</h4>
<p>rustup-toolchain-install-master or <a href="https://gist.githubusercontent.com/nikomatsakis/81e50fdf7254da8870c682109c404694/raw/d364e5d69809c54bdd2694f6bd304c0032de1552/bors-curl" target="_blank" title="https://gist.githubusercontent.com/nikomatsakis/81e50fdf7254da8870c682109c404694/raw/d364e5d69809c54bdd2694f6bd304c0032de1552/bors-curl">https://gist.githubusercontent.com/nikomatsakis/81e50fdf7254da8870c682109c404694/raw/d364e5d69809c54bdd2694f6bd304c0032de1552/bors-curl</a></p>



<a name="177275275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275275">(Oct 03 2019 at 19:00)</a>:</h4>
<p>no, the master and parallel commits are specifically built as "default"</p>



<a name="177275333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275333">(Oct 03 2019 at 19:00)</a>:</h4>
<p>you don't need alt builds</p>



<a name="177275347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275347">(Oct 03 2019 at 19:00)</a>:</h4>
<p>so install <a href="https://github.com/rust-lang/rust/commit/702b45e409495a41afcccbe87a251a692b0cefab" target="_blank" title="https://github.com/rust-lang/rust/commit/702b45e409495a41afcccbe87a251a692b0cefab">702b45e409495a41afcccbe87a251a692b0cefab</a> and the previous commit</p>



<a name="177275349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275349">(Oct 03 2019 at 19:00)</a>:</h4>
<p>and that's the two csomparison toolchains?</p>



<a name="177275380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275380">(Oct 03 2019 at 19:00)</a>:</h4>
<p>wait I'm hurting myself in confusion</p>



<a name="177275389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275389">(Oct 03 2019 at 19:01)</a>:</h4>
<p>parallel you should use dc78b8ba1 and 702b45e40 for master</p>



<a name="177275402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275402">(Oct 03 2019 at 19:01)</a>:</h4>
<p>ok got it</p>



<a name="177275425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275425">(Oct 03 2019 at 19:01)</a>:</h4>
<p>neither is an alt build and the parallel commit defaults to -Zthreads=1</p>



<a name="177275896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275896">(Oct 03 2019 at 19:05)</a>:</h4>
<p>ok so building cargo in debug mode w/ 28 threads is <em>slightly</em> faster, 46 -&gt; 43s</p>



<a name="177275902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177275902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177275902">(Oct 03 2019 at 19:05)</a>:</h4>
<p>but that's still nothing close to what I would expect</p>



<a name="177276050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177276050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177276050">(Oct 03 2019 at 19:06)</a>:</h4>
<p>"File upload is not yet available for your browser." omg seriously</p>



<a name="177276060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177276060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177276060">(Oct 03 2019 at 19:06)</a>:</h4>
<p>I guess we probably do worse due to contention or so</p>



<a name="177276137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177276137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177276137">(Oct 03 2019 at 19:07)</a>:</h4>
<p>anyway these are just known bugs</p>



<a name="177276148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177276148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177276148">(Oct 03 2019 at 19:07)</a>:</h4>
<p>we can't ship until we fix jobserver things</p>



<a name="177276163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177276163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177276163">(Oct 03 2019 at 19:07)</a>:</h4>
<p>and we'll likely need to recollect data after jobserver things are sorted out</p>



<a name="177276417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177276417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177276417">(Oct 03 2019 at 19:09)</a>:</h4>
<p>indeed, yes</p>



<a name="177277920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177277920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177277920">(Oct 03 2019 at 19:25)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> is there more data you'd be interested in me gathering? we have this, -Zthreads=1 diff, and will soon have -Zthreads=8 vs. master for single-crate on perf.rlo</p>



<a name="177277983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177277983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177277983">(Oct 03 2019 at 19:26)</a>:</h4>
<p>nah this is perfect imo</p>



<a name="177278007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177278007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177278007">(Oct 03 2019 at 19:26)</a>:</h4>
<p>like this is clearly showing me that we can't "just turn on -Zthreads=1 on nightly" and we also can't "just ship what's there today"</p>



<a name="177278024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177278024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177278024">(Oct 03 2019 at 19:26)</a>:</h4>
<p>so we've still got work to do before calling out to internals</p>



<a name="177278063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177278063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177278063">(Oct 03 2019 at 19:26)</a>:</h4>
<p>and this also is a lot of data to go on for making quantitiative evaluations of parallel rustc</p>



<a name="177278271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177278271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177278271">(Oct 03 2019 at 19:29)</a>:</h4>
<p>okay sounds good</p>



<a name="177278279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177278279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177278279">(Oct 03 2019 at 19:29)</a>:</h4>
<p>I'll pivot to audit work then</p>



<a name="177278291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177278291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177278291">(Oct 03 2019 at 19:29)</a>:</h4>
<p>well, preparing for auditing</p>



<a name="177278990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177278990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177278990">(Oct 03 2019 at 19:37)</a>:</h4>
<p>(unrelated to parallelism but deduplicating syn/quote could also be an interesting win for these cargo build times — I know it wouldn't be exactly easy because they're transitive dependencies but still worth mentioning)</p>



<a name="177293912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177293912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177293912">(Oct 03 2019 at 22:17)</a>:</h4>
<p>for anyone following -- updated the site to use the trapezoidal approximation for CPU usage</p>



<a name="177293920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177293920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177293920">(Oct 03 2019 at 22:17)</a>:</h4>
<p>basically didn't change anything though I think</p>



<a name="177399640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177399640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177399640">(Oct 05 2019 at 05:47)</a>:</h4>
<p>It seems like small crates gets hurt a lot here, presumably due to spawning threads. Have you tried builds with only 2 and 4 threads too?</p>
<p>And are the check/debug builds here incremental?</p>



<a name="177419786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177419786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177419786">(Oct 05 2019 at 15:48)</a>:</h4>
<p>yes, though no significant difference was noted for an incremental vs. non-incremental check build</p>



<a name="177419790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177419790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177419790">(Oct 05 2019 at 15:48)</a>:</h4>
<p>I/we decided that it's best to measure the reality, which is that check and debug builds are usually incremental</p>



<a name="177419801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177419801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177419801">(Oct 05 2019 at 15:49)</a>:</h4>
<p>We did not test 2 or 4 threads -- but I do not expect much difference, to be honest. We already always spawn 1 thread for all builds, maybe even 2? -- not sure.</p>



<a name="177433669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177433669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177433669">(Oct 05 2019 at 22:18)</a>:</h4>
<p>I guess <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a> dependencies won't get incremental anyway</p>



<a name="177434975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177434975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177434975">(Oct 05 2019 at 23:02)</a>:</h4>
<p>indeed, though for e.g. servo the primary weight comes from in tree deps</p>



<a name="177434979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177434979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177434979">(Oct 05 2019 at 23:03)</a>:</h4>
<p>regardless I think <span class="user-mention" data-user-id="116015">@Alex Crichton</span> conclusion that the tradeoffs are not yet worth it is sound.</p>



<a name="177450524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177450524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177450524">(Oct 06 2019 at 08:02)</a>:</h4>
<p>I'll take compiler check builds in half the time, thank you very much =P</p>



<a name="177458670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177458670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177458670">(Oct 06 2019 at 12:12)</a>:</h4>
<p>eh, it's unlikely that it's representative -- that's an entirely clean build, whereas most of the time you'll see incremental play a good role in check builds</p>



<a name="177460750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177460750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177460750">(Oct 06 2019 at 13:06)</a>:</h4>
<p>I do clean check build all the time, but that's mostly because our build system is horrible =P</p>



<a name="177461130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177461130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177461130">(Oct 06 2019 at 13:20)</a>:</h4>
<p>Hm it should definitely not be necessary anymore</p>



<a name="177462462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177462462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177462462">(Oct 06 2019 at 14:01)</a>:</h4>
<p>Did you make it use a separate folder for check builds?</p>



<a name="177463004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177463004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177463004">(Oct 06 2019 at 14:19)</a>:</h4>
<p>Hm, no, I don't think so</p>



<a name="177463007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177463007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177463007">(Oct 06 2019 at 14:19)</a>:</h4>
<p>I guess I don't switch too often between check and build</p>



<a name="177463055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177463055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177463055">(Oct 06 2019 at 14:20)</a>:</h4>
<p>we could definitely do a separate folder -- somewhat easier than before, in fact</p>



<a name="177463058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177463058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177463058">(Oct 06 2019 at 14:20)</a>:</h4>
<p>But I would personally expect that a separate folder is no longer necessary, unless there's cargo bugs</p>



<a name="177463059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177463059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177463059">(Oct 06 2019 at 14:20)</a>:</h4>
<p>since we don't ourselves delete folders anymore</p>



<a name="177550426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177550426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177550426">(Oct 07 2019 at 19:16)</a>:</h4>
<blockquote>
<p>like this is clearly showing me that we can't "just turn on -Zthreads=1 on nightly" and we also can't "just ship what's there today"</p>
</blockquote>
<p>I'm a bit more optimistic -- I agree it prob doesn't make sense to turn it on yet, but it'd be good to discuss what threshold we <em>are</em> looking for. When we discussed this in the meeting, it seemed to me that in terms of perf work it'd be good to look more at what we can do to get better <em>wins</em> than seq overhead per se, since the max seq overhead is really just a few seconds of walltime</p>



<a name="177559404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177559404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177559404">(Oct 07 2019 at 20:50)</a>:</h4>
<p>In particular, based on the results, it seems like it's probably worth it for me to enable parallel rustc in my personal use? :)</p>



<a name="177560935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo%20timing%20results/near/177560935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187679-t-compiler/wg-parallel-rustc/topic/cargo.20timing.20results.html#177560935">(Oct 07 2019 at 21:06)</a>:</h4>
<p>AKA dogfood it</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
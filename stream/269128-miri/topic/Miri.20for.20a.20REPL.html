<html>
<head><meta charset="utf-8"><title>Miri for a REPL · miri · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/index.html">miri</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html">Miri for a REPL</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="258980901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/258980901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ruster <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#258980901">(Oct 25 2021 at 16:02)</a>:</h4>
<p><a href="https://github.com/rust-lang/miri/issues/511">https://github.com/rust-lang/miri/issues/511</a> got closed mainly for the reason that Miri will simply be too slow for a REPL, even slower than the playground right? Well, isn't there something we can do to make it faster? Maybe disable some checks and leave only the minimum amount of checks on? I think it'd be great if we could kill two birds with one stone and use Miri both for checking for unwanted behavior (its current main purpose, it seems) and for a REPL. Are there any ways to make it work out?</p>



<a name="258982727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/258982727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#258982727">(Oct 25 2021 at 16:14)</a>:</h4>
<p><a href="https://github.com/google/evcxr">https://github.com/google/evcxr</a> (<code>cargo install evcxr_repl</code>) works pretty well as a repl in practice. it for sure has its limitations, but I'm not sure how many of those miri would fix</p>



<a name="258988695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/258988695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ruster <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#258988695">(Oct 25 2021 at 17:00)</a>:</h4>
<p>Yeah I wonder how Miri compares.</p>



<a name="259028080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259028080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259028080">(Oct 25 2021 at 22:19)</a>:</h4>
<p>The main limitation of evcxr is that it's slow :(</p>



<a name="259030644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259030644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259030644">(Oct 25 2021 at 22:45)</a>:</h4>
<p>I am honestly not quite sure why Miri would even be a good basis for a repl :) it is basically just another backend for rustc...</p>



<a name="259034907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259034907" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259034907">(Oct 25 2021 at 23:43)</a>:</h4>
<p>ive contributed a bunch to evcxr and i dont really think miri solves a problem that evcxr has</p>



<a name="259034979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259034979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259034979">(Oct 25 2021 at 23:44)</a>:</h4>
<p>i could definitely be wrong though. most of my contributions are to the repl and not the core (except for when a repl feature needs core changes)</p>



<a name="259042247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259042247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259042247">(Oct 26 2021 at 01:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120791">RalfJ</span> <a href="#narrow/stream/269128-miri/topic/Miri.20for.20a.20REPL/near/259030644">said</a>:</p>
<blockquote>
<p>I am honestly not quite sure why Miri would even be a good basis for a repl :) it is basically just another backend for rustc...</p>
</blockquote>
<p>Because it's an interpreter?</p>



<a name="259043697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259043697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259043697">(Oct 26 2021 at 02:09)</a>:</h4>
<p>it still needs fully formed inputs thouhg. at lest the way it works now, it cant just evaluate an individual line (i'm not even sure such a thing is well formed for MIR)</p>



<a name="259107406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259107406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259107406">(Oct 26 2021 at 14:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="363998">Ibraheem Ahmed</span> <a href="#narrow/stream/269128-miri/topic/Miri.20for.20a.20REPL/near/259042247">said</a>:</p>
<blockquote>
<p>Because it's an interpreter?</p>
</blockquote>
<p>why is that on its own helpful though? the way Miri works, it asks rustc to compile a file, and then uses the usual rustc queries to get the MIR it needs to do interpretation</p>



<a name="259107537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Miri%20for%20a%20REPL/near/259107537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Miri.20for.20a.20REPL.html#259107537">(Oct 26 2021 at 14:46)</a>:</h4>
<p>so, as Thom said, it's not "incremental" the way REPLs are. it has no support for "extending" the set of defined functions or so (at least not beyond what rustc itself supports, which I don't think is a lot).</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
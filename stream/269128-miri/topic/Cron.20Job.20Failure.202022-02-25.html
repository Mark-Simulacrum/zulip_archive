<html>
<head><meta charset="utf-8"><title>Cron Job Failure 2022-02-25 · miri · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/index.html">miri</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html">Cron Job Failure 2022-02-25</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273241293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273241293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> miri cronjobs <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273241293">(Feb 25 2022 at 15:13)</a>:</h4>
<p>Dear <span class="user-mention" data-user-id="120791">@RalfJ</span> and <span class="user-mention" data-user-id="124288">@oli</span></p>
<p>It would appear that the Miri cron job build failed. Would you mind investigating this issue?</p>
<p>Thanks in advance!<br>
Sincerely,<br>
The Miri Cronjobs Bot</p>



<a name="273260040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273260040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273260040">(Feb 25 2022 at 17:39)</a>:</h4>
<p>oh this could become a tricky one. we have at least 3 independent failures. <a href="https://github.com/rust-lang/miri/pull/1985">https://github.com/rust-lang/miri/pull/1985</a> handles two of them but I dont know yet where the third is coming from -- Miri reports UB in the test runner</p>
<div class="codehilite"><pre><span></span><code>error: Undefined Behavior: type validation failed at .value.1.desc.name.&lt;enum-tag&gt;: encountered uninitialized bytes, but expected a valid enum tag
   --&gt; /home/r/.rustup/toolchains/miri/lib/rustlib/src/rust/library/core/src/ptr/mod.rs:654:9
    |
654 |         tmp.assume_init()
    |         ^^^^^^^^^^^^^^^^^ type validation failed at .value.1.desc.name.&lt;enum-tag&gt;: encountered uninitialized bytes, but expected a valid enum tag
    |
    = help: this indicates a bug in the program: it performed an invalid operation, and caused Undefined Behavior
    = help: see https://doc.rust-lang.org/nightly/reference/behavior-considered-undefined.html for further information

    = note: inside `std::ptr::read::&lt;(test::test::TestId, test::test::TestDescAndFn)&gt;` at /home/r/.rustup/toolchains/miri/lib/rustlib/src/rust/library/core/src/ptr/mod.rs:654:9
    = note: inside `std::vec::Vec::&lt;(test::test::TestId, test::test::TestDescAndFn)&gt;::pop` at /home/r/.rustup/toolchains/miri/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs:1761:22
    = note: inside `test::test::run_tests::&lt;[closure@test::test::run_tests_console::{closure#2}]&gt;` at /home/r/.rustup/toolchains/miri/lib/rustlib/src/rust/library/test/src/lib.rs:301:30
    = note: inside `test::test::run_tests_console` at /home/r/.rustup/toolchains/miri/lib/rustlib/src/rust/library/test/src/console.rs:286:5
    = note: inside `test::test::test_main` at /home/r/.rustup/toolchains/miri/lib/rustlib/src/rust/library/test/src/lib.rs:116:15
    = note: inside `test::test::test_main_static` at /home/r/.rustup/toolchains/miri/lib/rustlib/src/rust/library/test/src/lib.rs:135:5
    = note: inside `main`
</code></pre></div>



<a name="273260086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273260086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273260086">(Feb 25 2022 at 17:39)</a>:</h4>
<p>rustc <a href="https://github.com/rust-lang/rust/commit/3d127e2040b57157936f5f24e114a8b4c9a505ef">3d127e2040b57157936f5f24e114a8b4c9a505ef</a> was still good, <a href="https://github.com/rust-lang/rust/commit/d4de1f230ca30b7ce08fbf453daebf8b2e7ffcc9">d4de1f230ca30b7ce08fbf453daebf8b2e7ffcc9</a> has this problem</p>



<a name="273260199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273260199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273260199">(Feb 25 2022 at 17:40)</a>:</h4>
<p>so it's probably something in this rollup? <a href="https://github.com/rust-lang/rust/pull/94333">https://github.com/rust-lang/rust/pull/94333</a></p>



<a name="273260821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273260821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273260821">(Feb 25 2022 at 17:45)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/commit/4e82f35492ea5c78e19609bf4468f0a686d9a756">4e82f35492ea5c78e19609bf4468f0a686d9a756</a> has the problem</p>



<a name="273263519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273263519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273263519">(Feb 25 2022 at 18:05)</a>:</h4>
<p>and <a href="https://github.com/rust-lang/rust/commit/4b043faba34ccc053a4d0110634c323f6c03765e">4b043faba34ccc053a4d0110634c323f6c03765e</a> is fine</p>



<a name="273263538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273263538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273263538">(Feb 25 2022 at 18:05)</a>:</h4>
<p>so indeed it is that rollup. wtf.</p>



<a name="273265322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-02-25/near/273265322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-02-25.html#273265322">(Feb 25 2022 at 18:18)</a>:</h4>
<p>it's something about <a href="https://github.com/rust-lang/rust/pull/94212">https://github.com/rust-lang/rust/pull/94212</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
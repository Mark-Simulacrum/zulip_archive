<html>
<head><meta charset="utf-8"><title>failed to select libc version · miri · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/index.html">miri</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/failed.20to.20select.20libc.20version.html">failed to select libc version</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="258252247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/failed%20to%20select%20libc%20version/near/258252247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raekye <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/failed.20to.20select.20libc.20version.html#258252247">(Oct 19 2021 at 18:53)</a>:</h4>
<p>Hi, I'm trying to run tests with miri. However, <code>cargo miri test</code> fails with</p>
<div class="codehilite"><pre><span></span><code>error: failed to select a version for the requirement `libc = &quot;^0.2.103&quot;`
candidate versions found which didn&#39;t match: 0.2.101, 0.2.100, 0.2.99, ...
location searched: crates.io index
required by package `std v0.0.0 (/home/...
    ... which satisfies path dependency `std` (locked to 0.0.0) of package `sysroot v0.0.0 (/tmp/xargo.JWcjqo1K0l3r)`
</code></pre></div>
<p>I already tried running <code>cargo clean</code> and <code>cargo update</code>.</p>
<p>Strangely, the candidate versions only go up to 0.2.101, although <a href="http://crates.io">crates.io</a> has up to 0.2.104, but I'm not sure if that's because some other dependency is requiring libc &lt;= 0.2.101. My own project depends on <code>libc = "0.2"</code></p>



<a name="258268703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/failed%20to%20select%20libc%20version/near/258268703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/failed.20to.20select.20libc.20version.html#258268703">(Oct 19 2021 at 20:43)</a>:</h4>
<p>Hmm, seems like a Xargo / <code>-Z build-std</code> issue...</p>



<a name="258268967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/failed%20to%20select%20libc%20version/near/258268967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/failed.20to.20select.20libc.20version.html#258268967">(Oct 19 2021 at 20:45)</a>:</h4>
<p>What version of rustc and miri are using? (Run, in your project, <code>rustc --version --verbose</code> and <code>cargo miri --version</code>.)</p>



<a name="258273206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/failed%20to%20select%20libc%20version/near/258273206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/failed.20to.20select.20libc.20version.html#258273206">(Oct 19 2021 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="437904">@Raekye</span> That should be fixed after the next nightly.  See <a href="https://github.com/rust-lang/cargo/issues/9976#issuecomment-946176952">https://github.com/rust-lang/cargo/issues/9976#issuecomment-946176952</a> for some workarounds.</p>



<a name="258280987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/failed%20to%20select%20libc%20version/near/258280987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raekye <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/failed.20to.20select.20libc.20version.html#258280987">(Oct 19 2021 at 22:12)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> thanks, that worked!</p>



<a name="258281067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/failed%20to%20select%20libc%20version/near/258281067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raekye <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/failed.20to.20select.20libc.20version.html#258281067">(Oct 19 2021 at 22:13)</a>:</h4>
<p>(oh and thanks Noah too - didn't see your message until afterwards since Eric's message was highlighted <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> )</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
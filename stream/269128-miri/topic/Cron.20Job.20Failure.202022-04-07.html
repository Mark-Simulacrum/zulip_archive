<html>
<head><meta charset="utf-8"><title>Cron Job Failure 2022-04-07 · miri · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/index.html">miri</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html">Cron Job Failure 2022-04-07</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278178917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278178917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> miri cronjobs <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278178917">(Apr 07 2022 at 15:12)</a>:</h4>
<p>Dear <span class="user-mention" data-user-id="120791">@RalfJ</span> and <span class="user-mention" data-user-id="124288">@oli</span></p>
<p>It would appear that the Miri cron job build failed. Would you mind investigating this issue?</p>
<p>Thanks in advance!<br>
Sincerely,<br>
The Miri Cronjobs Bot</p>



<a name="278384539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278384539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278384539">(Apr 09 2022 at 03:17)</a>:</h4>
<p>yay, this is finally fixed. :D and thanks to <span class="user-mention" data-user-id="120827">@Ben Kimock (Saethlin)</span>, setting a thread name now even works with strict provenance. :)<br>
(also <code>prctl</code> is more permissive regarding the number of arguments you give it, so whatever other crate was having trouble calling it should hopefully be doing better. or, chances are, it uses an unsupported <code>prctl</code> operation...^^)</p>



<a name="278384590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278384590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278384590">(Apr 09 2022 at 03:18)</a>:</h4>
<p>Still waiting on the <code>mpsc</code> patch to make Miri work decently with <code>std</code> :'(</p>



<a name="278384895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278384895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278384895">(Apr 09 2022 at 03:27)</a>:</h4>
<p>yeah I dont think anyone is very comfortable reviewing this ancient code :/</p>



<a name="278385019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278385019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278385019">(Apr 09 2022 at 03:30)</a>:</h4>
<p>I wonder how good the test suite for the mpsc stuff is?<br>
(considering whether I feel comfortable r+ing this myself if it doesnt move for another week or so^^)</p>



<a name="278385024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278385024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278385024">(Apr 09 2022 at 03:30)</a>:</h4>
<p>I feel like my diff should be uncontroversial <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span> but for now I'm hacking up my setup so that it uses my branch of Miri with my branch of Rust <em>yay</em></p>



<a name="278385029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278385029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278385029">(Apr 09 2022 at 03:30)</a>:</h4>
<p>this is a lib only change</p>



<a name="278385034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278385034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278385034">(Apr 09 2022 at 03:30)</a>:</h4>
<p>so all you need to do is set <code>MIRI_LIB_SRC</code></p>



<a name="278385040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278385040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278385040">(Apr 09 2022 at 03:31)</a>:</h4>
<p>you can use the miri distributed with rustup still</p>



<a name="278385051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278385051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278385051">(Apr 09 2022 at 03:31)</a>:</h4>
<p>Yes, but I like my diagnostics ;)</p>



<a name="278408224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278408224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278408224">(Apr 09 2022 at 12:39)</a>:</h4>
<p>fair :D</p>



<a name="278423839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278423839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278423839">(Apr 09 2022 at 18:28)</a>:</h4>
<blockquote>
<p>if it doesnt move for another week</p>
</blockquote>
<p><span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="278435643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278435643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278435643">(Apr 09 2022 at 23:03)</a>:</h4>
<p>ah well, I got impatient ;)</p>



<a name="278438159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278438159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278438159">(Apr 10 2022 at 00:07)</a>:</h4>
<p>I realized there are only a few FIXMEs left in <a href="https://github.com/rust-lang/miri-test-libstd/blob/master/ci-test.sh">https://github.com/rust-lang/miri-test-libstd/blob/master/ci-test.sh</a> and then all the core/alloc tests and the std tests I added manually work with strict provenance. :D</p>



<a name="278444444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278444444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278444444">(Apr 10 2022 at 02:58)</a>:</h4>
<p>Yeah I would fix the portable-simd thing if I had a drop of understanding about that code <span aria-label="pensive" class="emoji emoji-1f614" role="img" title="pensive">:pensive:</span></p>



<a name="278466379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/269128-miri/topic/Cron%20Job%20Failure%202022-04-07/near/278466379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/269128-miri/topic/Cron.20Job.20Failure.202022-04-07.html#278466379">(Apr 10 2022 at 12:45)</a>:</h4>
<p>if it's as easy as they say in <a href="https://github.com/rust-lang/portable-simd/issues/271">https://github.com/rust-lang/portable-simd/issues/271</a> then I can probably do it</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Can generators be used in the compiler? · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Can.20generators.20be.20used.20in.20the.20compiler.3F.html">Can generators be used in the compiler?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278488841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%20generators%20be%20used%20in%20the%20compiler%3F/near/278488841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Can.20generators.20be.20used.20in.20the.20compiler.3F.html#278488841">(Apr 10 2022 at 20:46)</a>:</h4>
<p>They are not currently used and the last use was removed in <a href="https://github.com/rust-lang/rust/pull/85885">https://github.com/rust-lang/rust/pull/85885</a> by <span class="user-mention" data-user-id="133247">@bjorn3</span> </p>
<p>Was that removal just to simplify things, or to avoid generators entirely, for example because they are not supported in mrustc or something like that?</p>



<a name="278488871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%20generators%20be%20used%20in%20the%20compiler%3F/near/278488871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Can.20generators.20be.20used.20in.20the.20compiler.3F.html#278488871">(Apr 10 2022 at 20:47)</a>:</h4>
<p>I wanted to use them for making a one-shot "heterogeneous iterator" like <a href="https://docs.rs/gen-iter/latest/gen_iter/">https://docs.rs/gen-iter/latest/gen_iter/</a></p>



<a name="278488942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%20generators%20be%20used%20in%20the%20compiler%3F/near/278488942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Can.20generators.20be.20used.20in.20the.20compiler.3F.html#278488942">(Apr 10 2022 at 20:49)</a>:</h4>
<p>I removed them both to reduce usage of nightly features a bit and because IMHO the replacement was easier to understand and smaller. I don't know if mrustc supports generators.</p>



<a name="278489143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%20generators%20be%20used%20in%20the%20compiler%3F/near/278489143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Can.20generators.20be.20used.20in.20the.20compiler.3F.html#278489143">(Apr 10 2022 at 20:53)</a>:</h4>
<p>I would personally like rustc to eventually compile on stable but I understand that some people want to keep using them in the compiler to test them. For that reason I try to remove them only when either the replacement improves code quality or in the case of my proc_macro PR that got merged a couple of days ago there is a strong reason to make it compile on stable.</p>



<a name="278489216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%20generators%20be%20used%20in%20the%20compiler%3F/near/278489216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Can.20generators.20be.20used.20in.20the.20compiler.3F.html#278489216">(Apr 10 2022 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> If you think using gen-iter is cleaner than using a manual iterator impl or using iterator combinators I don't have an objection to it.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
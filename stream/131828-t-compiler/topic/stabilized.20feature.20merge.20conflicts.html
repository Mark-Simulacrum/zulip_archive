<html>
<head><meta charset="utf-8"><title>stabilized feature merge conflicts · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html">stabilized feature merge conflicts</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261473804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261473804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261473804">(Nov 15 2021 at 09:21)</a>:</h4>
<p>Right now the way features are stabilized is by adding it to the end of a list. This necessarily creates a merge conflict every time a language feature is stabilized (for <em>every</em> pending PR doing the same). Can/should we adopt something else, such as alphabetical order of feature names to mostly avoid merge conflicts?</p>



<a name="261473890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261473890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261473890">(Nov 15 2021 at 09:22)</a>:</h4>
<p>This is something I've run across a number of times and I just saw <span class="user-mention" data-user-id="239881">@Josh Triplett</span> make a comment on <a href="https://github.com/rust-lang/rust/issues/90473">#90473</a>...which reminded me that it's an "issue", so to speak.</p>



<a name="261474601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261474601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261474601">(Nov 15 2021 at 09:29)</a>:</h4>
<p>We could also adopt a merge driver.</p>



<a name="261475107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261475107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261475107">(Nov 15 2021 at 09:35)</a>:</h4>
<p>...how have I never heard of that before. That's absolutely what we want. In this specific situation the solution is always (in my experience) to just accept both.</p>



<a name="261475664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261475664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261475664">(Nov 15 2021 at 09:41)</a>:</h4>
<p>do custom merge drivers work with github/bors?</p>



<a name="261476193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476193">(Nov 15 2021 at 09:46)</a>:</h4>
<p>I don't think they do; that'd just rebase trivial, not actually make it unnecessary.</p>



<a name="261476209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476209">(Nov 15 2021 at 09:47)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="245610">@Jacob Pratt</span>'s suggestion is a great one.</p>



<a name="261476225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476225">(Nov 15 2021 at 09:47)</a>:</h4>
<p>Alphabetical, or <em>something</em> that prevents us from getting automatic conflicts on every stabilization.</p>



<a name="261476254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476254">(Nov 15 2021 at 09:47)</a>:</h4>
<p><span class="user-mention" data-user-id="245610">@Jacob Pratt</span> Want to submit a patch making it alphabetical, and r? me?</p>



<a name="261476263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476263">(Nov 15 2021 at 09:47)</a>:</h4>
<p>It doesn't look like it would be too difficult to create a merge driver. From what I can see it takes the common ancestor and the two copies. In our case we'd just want to splice the incoming feature to the existing file.<br>
No idea if GitHub or bors support this though.</p>



<a name="261476325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476325">(Nov 15 2021 at 09:48)</a>:</h4>
<p>Yeah, sure. Alphabetical is better than status quo. There might be a lint regarding version order, though I'm not positive.</p>



<a name="261476395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476395">(Nov 15 2021 at 09:48)</a>:</h4>
<p><span class="user-mention" data-user-id="245610">@Jacob Pratt</span> A merge driver for alphabetical is even easier: you just merge and sort all the lines.</p>



<a name="261476412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476412">(Nov 15 2021 at 09:49)</a>:</h4>
<p>True</p>



<a name="261476708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261476708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261476708">(Nov 15 2021 at 09:52)</a>:</h4>
<p>Ah, doc comments. Gotta love em. Otherwise it would be a simple "sort line" in my editor.</p>



<a name="261477524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261477524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261477524">(Nov 15 2021 at 10:01)</a>:</h4>
<p>You could use sort line to find the order of the features at least, then replicate it manually</p>



<a name="261477645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261477645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261477645">(Nov 15 2021 at 10:02)</a>:</h4>
<p>That's exactly what I'm doing, actually.</p>



<a name="261477665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261477665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261477665">(Nov 15 2021 at 10:02)</a>:</h4>
<p>Just manually re-adding doc comments</p>



<a name="261478893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261478893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261478893">(Nov 15 2021 at 10:16)</a>:</h4>
<p>sure enough this needs a change in tidy</p>



<a name="261479449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261479449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261479449">(Nov 15 2021 at 10:23)</a>:</h4>
<p>Wow. I'd never have guessed tidy operated on plain text.</p>



<a name="261480150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261480150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261480150">(Nov 15 2021 at 10:31)</a>:</h4>
<p>Alright. Got tidy set to work based on alphabetization and have <code>accepted.rs</code> sorted. Headed to bed now; will handle the other files and get a PR up tomorrow. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="261506715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261506715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261506715">(Nov 15 2021 at 14:52)</a>:</h4>
<p>Sounds great, thank you!</p>



<a name="261582590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261582590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261582590">(Nov 16 2021 at 00:39)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> <a href="https://github.com/rust-lang/rust/issues/90935">#90935</a> is up.</p>



<a name="261582602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261582602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261582602">(Nov 16 2021 at 00:39)</a>:</h4>
<p>Made sure to rebase to include <code>format_args_capture</code></p>



<a name="261582798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261582798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261582798">(Nov 16 2021 at 00:41)</a>:</h4>
<p>As mentioned on GitHub: LGTM; r=me when it passes CI. And thanks!</p>



<a name="261582861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261582861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261582861">(Nov 16 2021 at 00:42)</a>:</h4>
<p>Unable, actually.</p>



<a name="261583565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583565">(Nov 16 2021 at 00:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> feelings on having tidy tell you where something should be? As in "feature X should be between A and B"</p>



<a name="261583616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583616" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583616">(Nov 16 2021 at 00:50)</a>:</h4>
<p>I think that mostly resolves my concern, but still seems likely to add the same "effective rebase" after you see tidy fail (i.e., when you get it wrong the first time)</p>



<a name="261583646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583646">(Nov 16 2021 at 00:51)</a>:</h4>
<p>so while it prevents needing to do so many times in the common case, it's not really a true fix IMO</p>



<a name="261583657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583657">(Nov 16 2021 at 00:51)</a>:</h4>
<p>s/when/if/ , and perhaps we could add a note to the comment at the top of each list saying "alphabetical".</p>



<a name="261583690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583690">(Nov 16 2021 at 00:51)</a>:</h4>
<p>that's pretty useless, imo, I at least can't get anything alphabetical just by looking at it</p>



<a name="261583773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583773">(Nov 16 2021 at 00:52)</a>:</h4>
<p>and I presume for most of these things even vim's <code>: ! sort</code> won't be of too much help since the sorting is presumably a little off</p>



<a name="261583802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583802">(Nov 16 2021 at 00:52)</a>:</h4>
<p>That wouldn't handle the comments, yeah.</p>



<a name="261583839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583839">(Nov 16 2021 at 00:53)</a>:</h4>
<p>I wouldn't expect that the majority of new additions to the file would fail the tidy check the first time.</p>



<a name="261583849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583849">(Nov 16 2021 at 00:53)</a>:</h4>
<p>There's certainly the possibility for conflicts still. A "union" merge/rebase doesn't actually have a certain order, so we'd need to have it done manually</p>



<a name="261583895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583895">(Nov 16 2021 at 00:53)</a>:</h4>
<p>/me wonders if tidy could have a <code>--fix</code> mode to run locally...</p>



<a name="261583905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583905">(Nov 16 2021 at 00:54)</a>:</h4>
<p>Either way I think the PR is <em>far</em> better than the status quo where there's a conflict every single time</p>



<a name="261583969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261583969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261583969">(Nov 16 2021 at 00:54)</a>:</h4>
<p>I tried that in the hopes it existed. Given that tidy operates on plain text, I'm not sure how easy that would be to implement</p>



<a name="261584027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584027">(Nov 16 2021 at 00:55)</a>:</h4>
<p>Probably painful in the majority of cases.</p>



<a name="261584032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584032">(Nov 16 2021 at 00:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts/near/261583839">said</a>:</p>
<blockquote>
<p>I wouldn't expect that the majority of new additions to the file would fail the tidy check the first time.</p>
</blockquote>
<p>I'm confused by this -- do you expect people to notice it's alphabetical <em>and</em> manage to get the alphabetical ordering right?</p>



<a name="261584087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584087">(Nov 16 2021 at 00:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> More than 50% of the time? Yes.</p>



<a name="261584145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584145">(Nov 16 2021 at 00:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="245610">Jacob Pratt</span> <a href="#narrow/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts/near/261583849">said</a>:</p>
<blockquote>
<p>There's certainly the possibility for conflicts still. A "union" merge/rebase doesn't actually have a certain order, so we'd need to have it done manually</p>
</blockquote>
<p>With the current by-version sort, as long as you're adding to the very end and have the right version (which you should, since you're trying to commit), I would expect union to just work</p>



<a name="261584162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584162">(Nov 16 2021 at 00:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts/near/261584087">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> More than 50% of the time? Yes.</p>
</blockquote>
<p>Huh. I would estimate this at ~0% personally, so I'm surprised by the discrepancy.</p>



<a name="261584184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584184">(Nov 16 2021 at 00:56)</a>:</h4>
<p>We have many other things in the compiler that have to be kept alphabetical or CI will fail.</p>



<a name="261584193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584193">(Nov 16 2021 at 00:57)</a>:</h4>
<p>Such as the import lists at the top of every file.</p>



<a name="261584207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584207">(Nov 16 2021 at 00:57)</a>:</h4>
<p>... but those are formatted for you?</p>



<a name="261584216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584216">(Nov 16 2021 at 00:57)</a>:</h4>
<p>like, no one <em>can</em> get those wrong if they have rustfmt in their editor</p>



<a name="261584226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584226">(Nov 16 2021 at 00:57)</a>:</h4>
<p>Only when I don't type them in the right order in the first place...</p>



<a name="261584228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584228">(Nov 16 2021 at 00:57)</a>:</h4>
<blockquote>
<p>With the current by-version sort, as long as you're adding to the very end and have the right version (which you should, since you're trying to commit), I would expect union to just work</p>
</blockquote>
<p>unless there's a release between the common ancestor and now. which will probably occur more often than alphabetization conflicts</p>



<a name="261584238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584238">(Nov 16 2021 at 00:57)</a>:</h4>
<p>and writing any Rust code perfectly matching rustfmt is unlikely, so that's more of a "QOL"</p>



<a name="261584308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584308">(Nov 16 2021 at 00:58)</a>:</h4>
<p>But if there's a release, you need to update your PR <em>anyway</em> since you're stabilizing in a new version?</p>



<a name="261584315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584315">(Nov 16 2021 at 00:58)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> Perfectly matching no. But I've worked with a reasonably large number of cases of codebases that have alphabetical lists, and they're usually still in <em>mostly</em> alphabetical order even when not enforced.</p>



<a name="261584360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584360">(Nov 16 2021 at 00:59)</a>:</h4>
<p>(I'd certainly find it surprising if 0% of people don't place a new entry in alphabetical order.)</p>



<a name="261584376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584376">(Nov 16 2021 at 00:59)</a>:</h4>
<p>I don't think I'd notice the list is alphabetical</p>



<a name="261584396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584396">(Nov 16 2021 at 00:59)</a>:</h4>
<p>That's where I think having the error be "put it between these two" would be helpful</p>



<a name="261584408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584408">(Nov 16 2021 at 00:59)</a>:</h4>
<p>Even if a comment at the end, next to where you would expect to add something, says "alphabetical"?</p>



<a name="261584422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584422">(Nov 16 2021 at 00:59)</a>:</h4>
<p>In any case, it'd certainly be nice to have tidy explaining exactly how to format it and point to the right insertion point.</p>



<a name="261584425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584425">(Nov 16 2021 at 00:59)</a>:</h4>
<p>I think that helps, sure</p>



<a name="261584496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584496">(Nov 16 2021 at 01:00)</a>:</h4>
<p>but yeah, if we have tidy tell me where I <em>should</em> have put it, that seems OK</p>



<a name="261584532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584532">(Nov 16 2021 at 01:00)</a>:</h4>
<p>it does seem nice(r) to have the version sort, rather than the alphabetical sort</p>



<a name="261584562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584562">(Nov 16 2021 at 01:00)</a>:</h4>
<p>(and appending is so much easier)</p>



<a name="261584575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584575" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584575">(Nov 16 2021 at 01:00)</a>:</h4>
<p>Depends on what you're trying to do. If you're looking up when a feature was stabilized, alphabetized is easier.</p>



<a name="261584591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584591">(Nov 16 2021 at 01:01)</a>:</h4>
<p>if you're looking up a feature... you're searching for that feature's name, surely?</p>



<a name="261584603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584603">(Nov 16 2021 at 01:01)</a>:</h4>
<p>(with... like... ctrl+f)</p>



<a name="261584604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584604">(Nov 16 2021 at 01:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="245610">Jacob Pratt</span> <a href="#narrow/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts/near/261584575">said</a>:</p>
<blockquote>
<p>Depends on what you're trying to do. If you're looking up when a feature was stabilized, alphabetized is easier.</p>
</blockquote>
<p>For that, I'd tend to always use a search rather than trying to manually read a list.</p>



<a name="261584624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584624">(Nov 16 2021 at 01:01)</a>:</h4>
<p>fair</p>



<a name="261584634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584634">(Nov 16 2021 at 01:01)</a>:</h4>
<p>Do we have confirmation that merge=union doesn't work?</p>



<a name="261584644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584644">(Nov 16 2021 at 01:01)</a>:</h4>
<p>I haven't tried it</p>



<a name="261584678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584678">(Nov 16 2021 at 01:02)</a>:</h4>
<p>Still requires an explicit rebase to my understanding</p>



<a name="261584720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584720">(Nov 16 2021 at 01:02)</a>:</h4>
<p>I would expect it to, based on my understanding of our stack, even though GitHub may give false-positive errors</p>



<a name="261584740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584740">(Nov 16 2021 at 01:02)</a>:</h4>
<p>GitHub false positives are pretty notable, though</p>



<a name="261584797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584797">(Nov 16 2021 at 01:03)</a>:</h4>
<p>And seem likely to cause at least some people to rebase even though they don't need to, because they don't know about the merge driver.</p>



<a name="261584878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584878">(Nov 16 2021 at 01:04)</a>:</h4>
<p>Sure, yeah, though solving <em>that</em> by way of a comment where they just added (and maybe even a highfive comment on the PR, given edits to this file) that says "github lies and don't bother rebasing"</p>



<a name="261584900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584900">(Nov 16 2021 at 01:04)</a>:</h4>
<p>like, <em>not</em> doing something is much easier than doing something right :)</p>



<a name="261584921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584921">(Nov 16 2021 at 01:04)</a>:</h4>
<p>but then if an actual conflict arises, the user wouldn't think anything of it?</p>



<a name="261584954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584954">(Nov 16 2021 at 01:05)</a>:</h4>
<p>I think merge=union basically means "we don't have conflicts ever"</p>



<a name="261584964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584964">(Nov 16 2021 at 01:05)</a>:</h4>
<p>I meant a conflict in another file</p>



<a name="261584968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584968">(Nov 16 2021 at 01:05)</a>:</h4>
<p>they can get compilation errors from CI, but not more than that</p>



<a name="261584986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261584986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261584986">(Nov 16 2021 at 01:05)</a>:</h4>
<p>well, sure, but our messaging can be specific to this file?</p>



<a name="261585067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585067">(Nov 16 2021 at 01:06)</a>:</h4>
<p>still seems to have quite a bit of room for error. If a bot says "CI is failing because GitHub think's there's a conflict in this file even though there's not", I wouldn't expect a user to actually check the list of files that conflict after every push</p>



<a name="261585083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585083">(Nov 16 2021 at 01:06)</a>:</h4>
<p>I know I wouldn't</p>



<a name="261585116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585116">(Nov 16 2021 at 01:07)</a>:</h4>
<p>well, anyway</p>



<a name="261585123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585123">(Nov 16 2021 at 01:07)</a>:</h4>
<p>I think if we get tidy to tell where to put it I'm OK with this</p>



<a name="261585204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585204">(Nov 16 2021 at 01:08)</a>:</h4>
<p>alright. gonna grab some food and then get that done. shouldn't be too hard — just keep track of all previous entries</p>



<a name="261585222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585222">(Nov 16 2021 at 01:08)</a>:</h4>
<p>I'm not convinced it's an actual usability win personally, but <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="261585278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585278">(Nov 16 2021 at 01:09)</a>:</h4>
<p>If we can be sure that it works with tools cleanly, I wouldn't be opposed to switching it back with merge=union in the future. But for the time being I think this is the best option</p>



<a name="261585366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585366">(Nov 16 2021 at 01:10)</a>:</h4>
<p>well, I mean, I'm unconvinced that rebasing is actually a sufficiently common problem to need this kind of change</p>



<a name="261585408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261585408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261585408">(Nov 16 2021 at 01:11)</a>:</h4>
<p>but that's more of a "I don't do it all that often", than anything else, I suspect.</p>



<a name="261589444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261589444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261589444">(Nov 16 2021 at 02:13)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> I've just pushed up a commit adding a suggestion for sorting. It assumes that the user adds the feature at the end of the list (which of course is all we do now). If it's placed earlier, the suggestion will <em>technically</em> be correct but will not be ideal.</p>



<a name="261594577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261594577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261594577">(Nov 16 2021 at 03:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts/near/261584162">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts/near/261584087">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> More than 50% of the time? Yes.</p>
</blockquote>
<p>Huh. I would estimate this at ~0% personally, so I'm surprised by the discrepancy.</p>
</blockquote>
<p>I would find this not super hard on the first try for most words and very easy if the error were pointed out; but idk if I'm representative</p>



<a name="261623401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261623401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261623401">(Nov 16 2021 at 10:51)</a>:</h4>
<p>Why not relax the line length limit for that file and put the comments at the end of each line? Actually aren't comments already exempted from the length limit?</p>



<a name="261647448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261647448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261647448">(Nov 16 2021 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="330154">@The 8472</span> that doesn't actually work, doc-comments have to come before the thing they're documenting</p>



<a name="261649177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261649177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261649177">(Nov 16 2021 at 14:36)</a>:</h4>
<p>In theory, we could use the <code>#[doc</code> form and then put each feature on a line by itself. Or, for that matter, generate the doc comment using a macro.</p>



<a name="261651941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261651941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261651941">(Nov 16 2021 at 14:54)</a>:</h4>
<p>This seems way overkill when we're already suggesting what line the new feature should go on, it makes the code harder to read too</p>



<a name="261654183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261654183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261654183">(Nov 16 2021 at 15:07)</a>:</h4>
<p>No argument there.</p>



<a name="261747329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/stabilized%20feature%20merge%20conflicts/near/261747329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/stabilized.20feature.20merge.20conflicts.html#261747329">(Nov 17 2021 at 06:11)</a>:</h4>
<p>Sorting by feature name just hit master. <span aria-label="party ball" class="emoji emoji-1f38a" role="img" title="party ball">:party_ball:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
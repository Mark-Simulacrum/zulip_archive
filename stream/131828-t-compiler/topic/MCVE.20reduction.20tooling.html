<html>
<head><meta charset="utf-8"><title>MCVE reduction tooling · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html">MCVE reduction tooling</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273827248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273827248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273827248">(Mar 02 2022 at 15:50)</a>:</h4>
<p>I'm just allocating a topic to discuss reduction tooling, which was <a href="https://blog.rust-lang.org/inside-rust/2022/02/22/compiler-team-ambitions-2022.html#mcve-reduction-tooling">mentioned as an aspiration</a> in the 2022 ambitions post</p>



<a name="273827478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273827478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273827478">(Mar 02 2022 at 15:52)</a>:</h4>
<p>my current big open question is how many of the techniques described in <a href="http://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/">my blog post</a> can be expressed atop current tools (like <a href="https://embed.cs.utah.edu/creduce/">creduce</a> and <a href="https://github.com/jethrogb/rust-reduce">rust-reduce</a>), versus which techniques would require a new tool to be developed.</p>



<a name="273828438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273828438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273828438">(Mar 02 2022 at 15:57)</a>:</h4>
<p>actually, a better first step would be to just collect the set of existing useful reduction tools that might be applied to Rust. <code>creduce</code> gets the most attention, but I'm pretty sure I saw others mentioned, perhaps in reddit in reaction to either the ambitions post or my blog post specifically about MCVE itself...</p>



<a name="273831870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273831870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273831870">(Mar 02 2022 at 16:14)</a>:</h4>
<p>okay, here's a <a href="https://www.reddit.com/r/rust/comments/dy6nk7/rust_bug_minimization_patterns/f7znrqk/?utm_source=reddit&amp;utm_medium=web2x&amp;context=3">relevant reddit subthread</a></p>



<a name="273832041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273832041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273832041">(Mar 02 2022 at 16:15)</a>:</h4>
<p><a href="https://blog.regehr.org/?s=reduction">John Regehr's blog has a reduction tag</a> and that might yield excellent background reading material.</p>



<a name="273832308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273832308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273832308">(Mar 02 2022 at 16:16)</a>:</h4>
<p>and <a href="https://www.drmaciver.com/2019/01/notes-on-test-case-reduction/">David MacIver has a post with lots of links</a> that go pretty far back in time. I have not yet read e.g. the <a href="https://www.cs.purdue.edu/homes/xyzhang/fall07/Papers/delta-debugging.pdf">delta debugging paper</a> by Zeller + Hlidebrandt</p>



<a name="273832913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273832913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273832913">(Mar 02 2022 at 16:21)</a>:</h4>
<p>Perses is my current recommendation here for most purposes; it'll typically be much faster than creduce</p>



<a name="273833560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273833560" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273833560">(Mar 02 2022 at 16:25)</a>:</h4>
<p>this, right? <a href="https://github.com/perses-project/perses">https://github.com/perses-project/perses</a></p>



<a name="273833608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273833608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273833608">(Mar 02 2022 at 16:25)</a>:</h4>
<p>yeah</p>



<a name="273833752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273833752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273833752">(Mar 02 2022 at 16:26)</a>:</h4>
<p>IIRC, the default needs a slight adjustment on some Rust inputs (it tokenizes incorrectly for &lt;&lt; or &gt;&gt;, leading to compile failures), but it's a relatively easy fix in the test script when necessary.</p>



<a name="273835195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273835195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273835195">(Mar 02 2022 at 16:35)</a>:</h4>
<p>Is perses restricted to a single file the way that (IIRC) creduce is? Or will it operate on multi-file (or even multi-crate ???) builds?</p>



<a name="273839129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273839129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273839129">(Mar 02 2022 at 16:58)</a>:</h4>
<p>Everything is basically single file to my knowledge</p>



<a name="273842372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273842372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273842372">(Mar 02 2022 at 17:17)</a>:</h4>
<p>rust-reduce helps by concatenating all the files in a crate (sometimes it causes issues) into a single file via <a href="https://github.com/TedDriggs/syn-inline-mod">https://github.com/TedDriggs/syn-inline-mod</a></p>



<a name="273966287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling/near/273966287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> detrumi <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.html#273966287">(Mar 03 2022 at 12:42)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/91594#issuecomment-986920073">this comment</a> mentions running <code>perses</code> alongside <code>cargo-expand</code> to put everything in one file</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Testing rustup environments in CI? · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Testing.20rustup.20environments.20in.20CI.3F.html">Testing rustup environments in CI?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="266928408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Testing%20rustup%20environments%20in%20CI%3F/near/266928408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Testing.20rustup.20environments.20in.20CI.3F.html#266928408">(Jan 05 2022 at 12:22)</a>:</h4>
<p>Is there a good way to test rustup-like environments in the compiler's CI? <a href="https://github.com/rust-lang/rust/pull/90782">#90782</a> adds code to the compiler that tries to find an external tool that can either be on PATH or come with the <code>rust-mingw</code> rustup component. It would be great if we could add a test that the compiler finds the tool from the rustup component. Do we have any provisions for that? Is it even feasible?</p>



<a name="266948015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Testing%20rustup%20environments%20in%20CI%3F/near/266948015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Testing.20rustup.20environments.20in.20CI.3F.html#266948015">(Jan 05 2022 at 15:21)</a>:</h4>
<p>rustup isn't installed in CI, so there presently isn't a mechanism to test something like that.</p>



<a name="266952980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Testing%20rustup%20environments%20in%20CI%3F/near/266952980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Testing.20rustup.20environments.20in.20CI.3F.html#266952980">(Jan 05 2022 at 15:59)</a>:</h4>
<p>you could add a run-make test that adds the tool to PATH maybe</p>



<a name="267013310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Testing%20rustup%20environments%20in%20CI%3F/near/267013310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Testing.20rustup.20environments.20in.20CI.3F.html#267013310">(Jan 06 2022 at 00:45)</a>:</h4>
<p>AFAIK components aren't available in <code>./x.py t</code>, you need <code>./x.py dist</code> to  create them.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
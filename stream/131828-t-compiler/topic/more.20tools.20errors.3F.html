<html>
<head><meta charset="utf-8"><title>more tools errors? · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html">more tools errors?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="151021848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151021848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151021848">(Dec 06 2018 at 16:57)</a>:</h4>
<p>Has anybody seen <em>this</em> one yet?</p>



<a name="151021855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151021855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151021855">(Dec 06 2018 at 16:57)</a>:</h4>
<div class="codehilite"><pre><span></span>error[E0133]: initializing type with `rustc_layout_scalar_valid_range` attr is unsafe and requires unsafe function or block
   --&gt; /home/nagisa/.cargo/registry/src/github.com-1ecc6299db9ec823/rustc-ap-rustc_target-297.0.0/abi/mod.rs:830:1
    |
830 | / newtype_index! {
831 | |     pub struct VariantIdx { .. }
832 | | }
    | |_^ initializing type with `rustc_layout_scalar_valid_range` attr
    |
    = note: initializing a layout restricted type&#39;s field with a value outside the valid range is undefined behavior
    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
</pre></div>



<a name="151021920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151021920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151021920">(Dec 06 2018 at 16:58)</a>:</h4>
<p>this is while "building stage2 tool rustfmt"</p>



<a name="151025628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151025628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151025628">(Dec 06 2018 at 17:48)</a>:</h4>
<p>this is expected <a href="https://github.com/rust-lang/rust/pull/55635#issuecomment-444224734" target="_blank" title="https://github.com/rust-lang/rust/pull/55635#issuecomment-444224734">https://github.com/rust-lang/rust/pull/55635#issuecomment-444224734</a></p>



<a name="151025789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151025789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151025789">(Dec 06 2018 at 17:49)</a>:</h4>
<p>Is there… a way to work around this??</p>



<a name="151025824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151025824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151025824">(Dec 06 2018 at 17:49)</a>:</h4>
<p>god, I never expected working on whatever <code>x.py dist</code> does would be such a chore :D</p>



<a name="151027020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151027020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151027020">(Dec 06 2018 at 18:00)</a>:</h4>
<p>you'll need to wait for RLS update its <code>rustc-ap-rustc_target</code> dependency... or just don't build the extended tools :P</p>



<a name="151027143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/more%20tools%20errors%3F/near/151027143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/more.20tools.20errors.3F.html#151027143">(Dec 06 2018 at 18:02)</a>:</h4>
<p><span class="user-mention" data-user-id="125254">@kennytm</span> alas, working on the processes that produce tarballs involves exactly that <span class="emoji emoji-1f641" title="frown">:frown:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
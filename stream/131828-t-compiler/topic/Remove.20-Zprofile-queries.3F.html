<html>
<head><meta charset="utf-8"><title>Remove -Zprofile-queries? · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html">Remove -Zprofile-queries?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="177063733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177063733" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177063733">(Oct 01 2019 at 15:01)</a>:</h4>
<p>Does anyone use <code>-Z profile-queries</code>? It seems largely unused, possibly bit-rotted, and clutters some of the core query infrastructure.</p>



<a name="177063753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177063753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177063753">(Oct 01 2019 at 15:01)</a>:</h4>
<p>^ <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="177069734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177069734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177069734">(Oct 01 2019 at 16:02)</a>:</h4>
<p>I think we should feel free to strip out profiling unrelated to -Zself-profile</p>



<a name="177108800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177108800" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177108800">(Oct 01 2019 at 23:43)</a>:</h4>
<p>If <code>-Zself-profile</code> has the same functionality I think we can just remove it</p>



<a name="177108874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177108874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177108874">(Oct 01 2019 at 23:44)</a>:</h4>
<p>I think I tried to use it once, but I wasn't successful =P</p>



<a name="177140403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177140403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177140403">(Oct 02 2019 at 11:18)</a>:</h4>
<blockquote>
<p>If <code>-Zself-profile</code> has the same functionality I think we can just remove it</p>
</blockquote>
<p>It <em>could</em> have the same functionality. <code>-Zself-profile</code> will soon be able to record all the data needed (it doesn't support query keys yet).</p>



<a name="177148961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177148961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177148961">(Oct 02 2019 at 13:23)</a>:</h4>
<p>I think if people aren't using it, then it's ok to remove it even if we're not up to 100% parity with <code>-Zself-profile</code></p>



<a name="177243394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177243394" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177243394">(Oct 03 2019 at 13:25)</a>:</h4>
<p>Remove it imo</p>



<a name="177303488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177303488" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177303488">(Oct 04 2019 at 01:29)</a>:</h4>
<p>Going to file a PR removing it shortyl</p>



<a name="177502577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Remove%20-Zprofile-queries%3F/near/177502577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Remove.20-Zprofile-queries.3F.html#177502577">(Oct 07 2019 at 09:16)</a>:</h4>
<p>reviewing that PR is in my TODO list. Thanks <span class="user-mention" data-user-id="116122">@simulacrum</span> !</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
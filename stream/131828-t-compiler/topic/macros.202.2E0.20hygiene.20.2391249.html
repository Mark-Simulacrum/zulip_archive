<html>
<head><meta charset="utf-8"><title>macros 2.0 hygiene #91249 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/macros.202.2E0.20hygiene.20.2391249.html">macros 2.0 hygiene #91249</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="262831946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/macros%202.0%20hygiene%20%2391249/near/262831946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/macros.202.2E0.20hygiene.20.2391249.html#262831946">(Nov 26 2021 at 20:16)</a>:</h4>
<p>An issue was opened today involving macro hygiene: <a href="https://github.com/rust-lang/rust/issues/91249">#91249</a>. Basically, you can't reference, from outside of the macro, the name of a function defined in a macro 2.0 where the name text is in the macro itself (vs. being passed as an argument). My question: Is this intended behavior (i.e., always using def-site hygiene), or is it a bug?</p>



<a name="262833684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/macros%202.0%20hygiene%20%2391249/near/262833684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/macros.202.2E0.20hygiene.20.2391249.html#262833684">(Nov 26 2021 at 20:44)</a>:</h4>
<p>I think this is intended. Macros 2.0 uses opaque transparency and not samitransparent transparency like macro_rules!.</p>



<a name="262833834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/macros%202.0%20hygiene%20%2391249/near/262833834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/macros.202.2E0.20hygiene.20.2391249.html#262833834">(Nov 26 2021 at 20:47)</a>:</h4>
<p>That's what I thought as well, though at least two people in the issue feel like this is a bug. I'll nominate for T-lang to see what their take on this is.</p>



<a name="262900933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/macros%202.0%20hygiene%20%2391249/near/262900933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexis King <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/macros.202.2E0.20hygiene.20.2391249.html#262900933">(Nov 28 2021 at 00:36)</a>:</h4>
<p>I’ve weighed in <a href="https://github.com/rust-lang/rust/issues/91249#issuecomment-980813146">in this comment</a>, and to summarize, I think it’s a bug, as I think it’s inconsistent with Rust’s scoping rules. Also, for future reference: please ping me when hygiene discussions like this come up, as they are exactly the sorts of discussions that I’d like to be aware of. :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
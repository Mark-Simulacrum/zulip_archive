<html>
<head><meta charset="utf-8"><title>panic::Location::module_path · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html">panic::Location::module_path</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="253165144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253165144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253165144">(Sep 13 2021 at 21:41)</a>:</h4>
<p>Hi, is this the right place to discuss feasibility of a panic::Location method that does the equivalent of the <code>module_path!</code> macro? Asked at project-error-handling first but was told to try here. (<a href="#narrow/stream/257204-project-error-handling/topic/panic.3A.3ALocation.20module_path">https://rust-lang.zulipchat.com/#narrow/stream/257204-project-error-handling/topic/panic.3A.3ALocation.20module_path</a>)</p>



<a name="253168368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253168368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253168368">(Sep 13 2021 at 22:08)</a>:</h4>
<p>Adding <code>module_path</code> to <code>PanicInfo</code> is not too hard, but I strongly suspect that it'd have a negative perf impact on unaffected code.</p>



<a name="253168389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253168389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253168389">(Sep 13 2021 at 22:08)</a>:</h4>
<p>the only way is to implement this and see.</p>



<a name="253168439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253168439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253168439">(Sep 13 2021 at 22:09)</a>:</h4>
<p><code>rg get_caller_location</code> is a good starting point, I'd say.</p>



<a name="253169450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253169450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253169450">(Sep 13 2021 at 22:18)</a>:</h4>
<p>I actually would prefer a item path rather than module path</p>



<a name="253170432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253170432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253170432">(Sep 13 2021 at 22:28)</a>:</h4>
<p>That'd be <a href="https://github.com/rust-lang/rfcs/pull/2818">https://github.com/rust-lang/rfcs/pull/2818</a>, <a href="https://github.com/rust-lang/rfcs/pull/1719">https://github.com/rust-lang/rfcs/pull/1719</a> and <a href="https://github.com/rust-lang/rfcs/pull/466">https://github.com/rust-lang/rfcs/pull/466</a></p>



<a name="253170456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253170456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253170456">(Sep 13 2021 at 22:28)</a>:</h4>
<p>I'm actually curious that we have the first two despite the third having been merged...</p>



<a name="253170603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253170603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253170603">(Sep 13 2021 at 22:30)</a>:</h4>
<p>My own take on this was always that we should have a structural view of the path to the item, including its generics etc exposed to the user.</p>



<a name="253170643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253170643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253170643">(Sep 13 2021 at 22:30)</a>:</h4>
<p>I would very much rather we don't expose to the users "just" a string that they have to parse themselves in some way.</p>



<a name="253171189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253171189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253171189">(Sep 13 2021 at 22:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path/near/253170456">said</a>:</p>
<blockquote>
<p>I'm actually curious that we have the first two despite the third having been merged...</p>
</blockquote>
<p>I think it's a display issue. It isn't merged.</p>



<a name="253701224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253701224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Reeves <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253701224">(Sep 17 2021 at 07:21)</a>:</h4>
<p>FYI <span class="user-mention" data-user-id="198047">@jplatte</span> I <a href="#narrow/stream/131828-t-compiler/topic/function.20names.20in.20.60.23.5Btrack_caller.5D.60">brought up</a> the same thing but for function names instead of module paths. I would be interested in collaborating on a solution to both of these problems.</p>



<a name="253739741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253739741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253739741">(Sep 17 2021 at 13:13)</a>:</h4>
<p>Hm, not sure that I can dedicate much time to this. I changed the original function where I wanted this to a macro already.</p>



<a name="253739865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253739865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jplatte <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253739865">(Sep 17 2021 at 13:14)</a>:</h4>
<p>What are you thinking of in terms of collaboration?</p>



<a name="253778427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253778427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Reeves <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253778427">(Sep 17 2021 at 17:33)</a>:</h4>
<p>Oh if you don't have the bandwidth, then don't worry about it. I will likely get around to tinkering with it on my own time. If I get function names working maybe I'll try module names too.</p>



<a name="253827373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/253827373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#253827373">(Sep 18 2021 at 01:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path/near/253170643">said</a>:</p>
<blockquote>
<p>I would very much rather we don't expose to the users "just" a string that they have to parse themselves in some way.</p>
</blockquote>
<p>a compromise here could be the mangled name, though I'm not aware of a structural parser for it (I'm not sure <span class="user-mention" data-user-id="124287">@mw</span>'s AST implementation was updated)</p>



<a name="254015992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/254015992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#254015992">(Sep 20 2021 at 08:47)</a>:</h4>
<p>This crate is more up-to-date than mine, I think: <a href="https://github.com/EFanZh/ast-demangle">https://github.com/EFanZh/ast-demangle</a></p>



<a name="254084545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/254084545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#254084545">(Sep 20 2021 at 17:13)</a>:</h4>
<p>oh, cute, <code>nom</code></p>



<a name="254084586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/panic%3A%3ALocation%3A%3Amodule_path/near/254084586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/panic.3A.3ALocation.3A.3Amodule_path.html#254084586">(Sep 20 2021 at 17:13)</a>:</h4>
<p>I didn't consider it but the LL(1) style definitely seems to benefit <code>nom</code> combinators heh</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
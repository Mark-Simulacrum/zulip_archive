<html>
<head><meta charset="utf-8"><title>perf of rust vs rust · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html">perf of rust vs rust</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="169578249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578249">(Jul 03 2019 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> could we do a perf run comparing the same commit ? or has this been done somewhere ?</p>



<a name="169578550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578550">(Jul 03 2019 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> ^^</p>



<a name="169578595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578595">(Jul 03 2019 at 15:58)</a>:</h4>
<p>what is the purpose for that?</p>



<a name="169578608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578608">(Jul 03 2019 at 15:58)</a>:</h4>
<p>I don't know what's noise and what's isn't in perf results</p>



<a name="169578621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578621">(Jul 03 2019 at 15:58)</a>:</h4>
<p>is a 10% max-rss difference noise ?</p>



<a name="169578643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578643">(Jul 03 2019 at 15:58)</a>:</h4>
<p>most likely no</p>



<a name="169578647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578647">(Jul 03 2019 at 15:59)</a>:</h4>
<p>looking at perf runs of PRs that don't touch anything memory related, it appears that max-rss differences go up till 40%</p>



<a name="169578663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578663">(Jul 03 2019 at 15:59)</a>:</h4>
<p>do you believe that ? or do you know ?</p>



<a name="169578664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578664">(Jul 03 2019 at 15:59)</a>:</h4>
<p>er, yes is what I meatn</p>



<a name="169578666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578666">(Jul 03 2019 at 15:59)</a>:</h4>
<p>ah</p>



<a name="169578673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578673">(Jul 03 2019 at 15:59)</a>:</h4>
<p>Yeah, max-rss is notoriously unreliable</p>



<a name="169578685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578685">(Jul 03 2019 at 15:59)</a>:</h4>
<p>to my knowledge there's essentially nothing we can do</p>



<a name="169578693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578693" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578693">(Jul 03 2019 at 15:59)</a>:</h4>
<p>but I haven't actually investigated myself</p>



<a name="169578698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578698">(Jul 03 2019 at 15:59)</a>:</h4>
<p>I think it would be very useful to run periodically perf runs of master vs master</p>



<a name="169578743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578743">(Jul 03 2019 at 16:00)</a>:</h4>
<p>and hint in other perf runs that anything under the levels reported there is probably noise</p>



<a name="169578752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578752">(Jul 03 2019 at 16:00)</a>:</h4>
<p>we don't really have the capability to do it easily</p>



<a name="169578765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578765">(Jul 03 2019 at 16:00)</a>:</h4>
<p>we can do once per month, every to months, and put the link somewhere</p>



<a name="169578772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578772">(Jul 03 2019 at 16:00)</a>:</h4>
<p>I think what you suggest is probably a good idea, though</p>



<a name="169578785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578785">(Jul 03 2019 at 16:00)</a>:</h4>
<p>look at this PR</p>



<a name="169578800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578800">(Jul 03 2019 at 16:00)</a>:</h4>
<p>we don't really need master v. master either<br>
e.g. just some doc update or such can be enough</p>



<a name="169578808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578808">(Jul 03 2019 at 16:00)</a>:</h4>
<p><a href="https://perf.rust-lang.org/compare.html?start=85ed21e83c9f42203cfe06d41eab3f160bd13518&amp;end=090f4a44679dfd5f618706147f631c44ecebe3f5&amp;stat=max-rss" target="_blank" title="https://perf.rust-lang.org/compare.html?start=85ed21e83c9f42203cfe06d41eab3f160bd13518&amp;end=090f4a44679dfd5f618706147f631c44ecebe3f5&amp;stat=max-rss">https://perf.rust-lang.org/compare.html?start=85ed21e83c9f42203cfe06d41eab3f160bd13518&amp;end=090f4a44679dfd5f618706147f631c44ecebe3f5&amp;stat=max-rss</a></p>



<a name="169578839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578839">(Jul 03 2019 at 16:01)</a>:</h4>
<p>it changes the memory allocator used by rustc, from one that's 30kLOC, to one that's 3kLOC</p>



<a name="169578850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578850">(Jul 03 2019 at 16:01)</a>:</h4>
<p>look at all perf numbers of all data</p>



<a name="169578870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578870">(Jul 03 2019 at 16:01)</a>:</h4>
<p>I'd say that this is measuring noise, which means that the allocator wasn't replaced successfully</p>



<a name="169578877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578877">(Jul 03 2019 at 16:01)</a>:</h4>
<p>hm, perhaps, perhaps not; it's hard to say</p>



<a name="169578926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578926">(Jul 03 2019 at 16:02)</a>:</h4>
<p>for allocator benchmarks I wouldn't try to use perf.rlo personally beyond a cursory check</p>



<a name="169578932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578932">(Jul 03 2019 at 16:02)</a>:</h4>
<p>i.e., I'd try to dig down with something like dhat</p>



<a name="169578943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578943">(Jul 03 2019 at 16:02)</a>:</h4>
<p>looking at the PR, they did not override the allocator properly</p>



<a name="169578957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578957">(Jul 03 2019 at 16:02)</a>:</h4>
<p>and they didn't check whether they did</p>



<a name="169578978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169578978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169578978">(Jul 03 2019 at 16:03)</a>:</h4>
<p>and worse than wasting a couple of days learning nothing, they learned something wrong, that now is believed to be true</p>



<a name="169579025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579025">(Jul 03 2019 at 16:03)</a>:</h4>
<p>I guess.. "okay"? Like, that seems plausibly bad but...</p>



<a name="169579103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579103">(Jul 03 2019 at 16:04)</a>:</h4>
<p>I'm struggling to see what we/I can do :)</p>



<a name="169579107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579107">(Jul 03 2019 at 16:04)</a>:</h4>
<p>my point is that not having error bars there is not harmless</p>



<a name="169579115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579115">(Jul 03 2019 at 16:04)</a>:</h4>
<p>its worse than not having perf</p>



<a name="169579150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579150">(Jul 03 2019 at 16:05)</a>:</h4>
<p>what we can do is manually run a perf run every know and then</p>



<a name="169579160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579160">(Jul 03 2019 at 16:05)</a>:</h4>
<p>once per release or something</p>



<a name="169579168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579168">(Jul 03 2019 at 16:05)</a>:</h4>
<p>of master vs master</p>



<a name="169579195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579195">(Jul 03 2019 at 16:05)</a>:</h4>
<p>the compiler is compiled once, but the run itself is run twice</p>



<a name="169579264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579264">(Jul 03 2019 at 16:06)</a>:</h4>
<p>I can send a PR adding a comma to the readme, and maybe we could schedule a perf run on that</p>



<a name="169579323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579323">(Jul 03 2019 at 16:07)</a>:</h4>
<p>Errors bars would be good; we've wanted them in the past. We technically run many benchmarks 2-3 times so we could try to harvest the error bars from there, or potentially from historical runs</p>



<a name="169579329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579329">(Jul 03 2019 at 16:07)</a>:</h4>
<p>but it would not be a trivial change to the codebase to even add constant error bars</p>



<a name="169579480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579480">(Jul 03 2019 at 16:09)</a>:</h4>
<p>I think we can run perf runs of trivial changes once in a while. And change the message of the bot, when the comparison link is shown, to include a link the last trivial perf run.</p>



<a name="169579567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579567">(Jul 03 2019 at 16:10)</a>:</h4>
<p>Saying something like </p>
<blockquote>
<p>Do not forget to compare the results of this perf run, to our latest "noise" run: link . <br>
Everything smaller than the differences reported by the noise run is probably noise.</p>
</blockquote>



<a name="169579641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579641">(Jul 03 2019 at 16:11)</a>:</h4>
<p>If you'd like to file a PR against perf that links to e.g. <a href="https://perf.rust-lang.org/compare.html?start=9a90d03ad171856dc016c2dcc19292ec49a8a26f&amp;end=fd7f48b3eff67726d848c059574b6aa86675110b&amp;stat=max-rss" target="_blank" title="https://perf.rust-lang.org/compare.html?start=9a90d03ad171856dc016c2dcc19292ec49a8a26f&amp;end=fd7f48b3eff67726d848c059574b6aa86675110b&amp;stat=max-rss">https://perf.rust-lang.org/compare.html?start=9a90d03ad171856dc016c2dcc19292ec49a8a26f&amp;end=fd7f48b3eff67726d848c059574b6aa86675110b&amp;stat=max-rss</a> then that's fine by me.</p>



<a name="169579668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169579668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169579668">(Jul 03 2019 at 16:11)</a>:</h4>
<p>Will do. Thanks</p>



<a name="169580224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169580224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169580224">(Jul 03 2019 at 16:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> to perf or to rustc-timing ?</p>



<a name="169580234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169580234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169580234">(Jul 03 2019 at 16:18)</a>:</h4>
<p>rust-lang-nursery/rustc-perf</p>



<a name="169580238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/perf%20of%20rust%20vs%20rust/near/169580238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/perf.20of.20rust.20vs.20rust.html#169580238">(Jul 03 2019 at 16:18)</a>:</h4>
<p>rustc-timing is just data</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
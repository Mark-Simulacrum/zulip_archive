<html>
<head><meta charset="utf-8"><title>json-rendered flag · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html">json-rendered flag</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="169884891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884891">(Jul 08 2019 at 16:46)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="124288">@oli</span> -- you around?</p>



<a name="169884905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884905" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884905">(Jul 08 2019 at 16:46)</a>:</h4>
<p>(Also cc <span class="user-mention" data-user-id="120518">@Eric Huss</span>, <span class="user-mention" data-user-id="116015">@Alex Crichton</span>)</p>



<a name="169884906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884906" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884906">(Jul 08 2019 at 16:46)</a>:</h4>
<p>Jop</p>



<a name="169884915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884915">(Jul 08 2019 at 16:46)</a>:</h4>
<p>I wanted to briefly discuss <a href="https://github.com/rust-lang/rust/issues/60987" target="_blank" title="https://github.com/rust-lang/rust/issues/60987">#60987</a></p>



<a name="169884919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884919">(Jul 08 2019 at 16:46)</a>:</h4>
<p>I think we should stabilize <strong>something</strong>, so I moved to stabilize the latest proposal.</p>
<p>That said, I have some concerns: I think this is mildly backwards incompatible and not necessarily the behavior that people would expect. </p>
<p>The original proposal, where <code>--json-rendered</code> is effectively a hidden flag that controls the details of JSON output, seems fine to me and in some ways superior. Moreover, it's something we could always deprecate in the future. So I kind of prefer <a href="https://github.com/rust-lang/rust/issues/60987#issuecomment-502228452" target="_blank" title="https://github.com/rust-lang/rust/issues/60987#issuecomment-502228452">the original proposal</a>.</p>



<a name="169884940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884940">(Jul 08 2019 at 16:47)</a>:</h4>
<p>If I fcp cancel and move to merge the original proposal, are there strong objections?</p>



<a name="169884946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884946">(Jul 08 2019 at 16:47)</a>:</h4>
<p>On a <span aria-label="boat" class="emoji emoji-26f5" role="img" title="boat">:boat:</span> in the Mediterranean, so no promises on internet stability</p>



<a name="169884966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884966">(Jul 08 2019 at 16:47)</a>:</h4>
<p>I basically want to move pipelined compilation forward :)</p>



<a name="169884972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169884972" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169884972">(Jul 08 2019 at 16:47)</a>:</h4>
<p>Also, I'm jealous</p>



<a name="169885014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885014">(Jul 08 2019 at 16:48)</a>:</h4>
<p>Reading the issue, one sec</p>



<a name="169885079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885079">(Jul 08 2019 at 16:49)</a>:</h4>
<p>I like the idea of a json flag which let's you request what you want printed with JSON, <a href="https://github.com/rust-lang/rust/issues/60419#issuecomment-508217889" target="_blank" title="https://github.com/rust-lang/rust/issues/60419#issuecomment-508217889">https://github.com/rust-lang/rust/issues/60419#issuecomment-508217889</a></p>



<a name="169885107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoxc <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885107">(Jul 08 2019 at 16:49)</a>:</h4>
<p>Colored errors could be one thing on that list</p>



<a name="169885267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885267">(Jul 08 2019 at 16:51)</a>:</h4>
<p>Yea, renaming json-rendered is probably a good idea</p>



<a name="169885293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885293">(Jul 08 2019 at 16:51)</a>:</h4>
<p>Other than that, the original proposal is forwards compatible with passing a list of things</p>



<a name="169885300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885300">(Jul 08 2019 at 16:51)</a>:</h4>
<p>Yep. If it's just a question of the name, I think basically any name seems fine</p>



<a name="169885354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885354">(Jul 08 2019 at 16:52)</a>:</h4>
<p>Is it is <code>--json</code> vs <code>--json-rendered</code>?</p>



<a name="169885359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885359" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885359">(Jul 08 2019 at 16:52)</a>:</h4>
<p>As long as we have some way to combine flags like color and shortness in a sensible way (dash separated is fine by me), I have no objections</p>



<a name="169885365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885365">(Jul 08 2019 at 16:52)</a>:</h4>
<p>I don't understand what you mean by that :)</p>



<a name="169885382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885382">(Jul 08 2019 at 16:53)</a>:</h4>
<p>I guess you mean <code>--json-rendered=foo-bar</code> or something?</p>



<a name="169885392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885392">(Jul 08 2019 at 16:53)</a>:</h4>
<p>Yea</p>



<a name="169885396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885396">(Jul 08 2019 at 16:53)</a>:</h4>
<p>as opposed to <code>,</code>?</p>



<a name="169885399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885399" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885399">(Jul 08 2019 at 16:53)</a>:</h4>
<p>anyway, that's for the future it seems</p>



<a name="169885402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885402">(Jul 08 2019 at 16:53)</a>:</h4>
<p>No</p>



<a name="169885410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885410">(Jul 08 2019 at 16:53)</a>:</h4>
<p>Comma is for multiple things</p>



<a name="169885428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885428">(Jul 08 2019 at 16:53)</a>:</h4>
<p>oh I see</p>



<a name="169885476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885476">(Jul 08 2019 at 16:54)</a>:</h4>
<p>so something like <code>--json=color=foo,bar-shortness=true</code>?</p>



<a name="169885478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885478">(Jul 08 2019 at 16:54)</a>:</h4>
<p>Dash is for having short diagnostics but with color or short diagnostics without colora</p>



<a name="169885511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885511">(Jul 08 2019 at 16:54)</a>:</h4>
<p>Hmmm that may be overkill</p>



<a name="169885514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885514" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885514">(Jul 08 2019 at 16:54)</a>:</h4>
<p>seems like overkill but also not an immediate concern :)</p>



<a name="169885523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885523">(Jul 08 2019 at 16:54)</a>:</h4>
<p>or at least, there are many plausible separators</p>



<a name="169885527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885527">(Jul 08 2019 at 16:54)</a>:</h4>
<p>Just <code>diagnostics-short-color</code></p>



<a name="169885560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885560">(Jul 08 2019 at 16:55)</a>:</h4>
<p>the current proposal accepts plain, ansi-colors, short, short-ansi-colors</p>



<a name="169885565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885565">(Jul 08 2019 at 16:55)</a>:</h4>
<p>Yea I mean just to change the original proposal by Alex to be <code>diagnostic-*</code></p>



<a name="169885582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885582">(Jul 08 2019 at 16:55)</a>:</h4>
<p>oh like change the values to <code>diagnostic-plain</code>, ...?</p>



<a name="169885597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885597">(Jul 08 2019 at 16:55)</a>:</h4>
<p>In order to differentiate from zoxcs artifact example</p>



<a name="169885701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885701" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885701">(Jul 08 2019 at 16:56)</a>:</h4>
<p>I see</p>



<a name="169885707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885707">(Jul 08 2019 at 16:56)</a>:</h4>
<p>/me shrugs</p>



<a name="169885720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885720">(Jul 08 2019 at 16:57)</a>:</h4>
<p>i.e., because these are all "diagnostic things", so we can group them</p>



<a name="169885723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885723">(Jul 08 2019 at 16:57)</a>:</h4>
<p>We can then worry about what passing both <code>diagnostic-short</code> and <code>diagnostic-short-color</code> means in the futurr</p>



<a name="169885729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885729">(Jul 08 2019 at 16:57)</a>:</h4>
<p>We can then worry about what passing both <code>diagnostic-short</code> and <code>diagnostic-short-color</code> means in the future</p>



<a name="169885733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885733" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885733">(Jul 08 2019 at 16:57)</a>:</h4>
<p>in case we have in the future some other kinds of json (e.g., artifacts)</p>



<a name="169885737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885737">(Jul 08 2019 at 16:57)</a>:</h4>
<p>Or that</p>



<a name="169885738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885738">(Jul 08 2019 at 16:57)</a>:</h4>
<p>Ok</p>



<a name="169885744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885744">(Jul 08 2019 at 16:57)</a>:</h4>
<p>I think any set of strings is fine :)</p>



<a name="169885752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885752" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885752">(Jul 08 2019 at 16:57)</a>:</h4>
<p>Original proposal seems fine to me</p>



<a name="169885811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885811" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885811">(Jul 08 2019 at 16:58)</a>:</h4>
<p>Maybe error out if <code>--color</code> is used together with <code>--json-rendered</code></p>



<a name="169885886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885886">(Jul 08 2019 at 16:59)</a>:</h4>
<p>I gotta run now, dinnertime, ruddering to the shore</p>



<a name="169885891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885891">(Jul 08 2019 at 16:59)</a>:</h4>
<p>ok</p>



<a name="169885907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169885907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169885907">(Jul 08 2019 at 17:00)</a>:</h4>
<p>So yea, going with Alex's original proposal is  fine with me</p>



<a name="169900006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169900006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169900006">(Jul 08 2019 at 19:59)</a>:</h4>
<p>I have sympathy for <span class="user-mention" data-user-id="119009">@eddyb</span> 's point that there may be a collection of related flags hiding here that deserve treatment analogous to <code>-C</code></p>



<a name="169900040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169900040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169900040">(Jul 08 2019 at 19:59)</a>:</h4>
<p>can we grab <code>-J</code> (json) or <code>-F</code> (formatting) for this or something ?</p>



<a name="169900157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169900157" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169900157">(Jul 08 2019 at 20:00)</a>:</h4>
<p>having said that, the time for such discussion was probably back when <span class="user-mention" data-user-id="119009">@eddyb</span> first made the point.  I doin't mind being told "we don't want to keep bike-shedding this, and such a flag-family could be added later backward-compatibly"</p>



<a name="169902080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169902080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169902080">(Jul 08 2019 at 20:28)</a>:</h4>
<blockquote>
<p>having said that, the time for such discussion was probably back when <span class="user-mention silent" data-user-id="119009">eddyb</span> first made the point.  I doin't mind being told "we don't want to keep bike-shedding this, and such a flag-family could be added later backward-compatibly"</p>
</blockquote>
<p>roughly my feeling :P</p>



<a name="169902085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169902085" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169902085">(Jul 08 2019 at 20:28)</a>:</h4>
<p>keep in mind that this is a fairly "internal" flag</p>



<a name="169902093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169902093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169902093">(Jul 08 2019 at 20:29)</a>:</h4>
<p>i.e., it's really just meant for cargo to communicate with rustc</p>



<a name="169902136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/169902136" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#169902136">(Jul 08 2019 at 20:29)</a>:</h4>
<p>(<span class="user-mention" data-user-id="116015">@Alex Crichton</span> and I were debating about whether it would make sense to have a <code>--cargo=foo=bar</code> flag where the expected arguments are documented as potentially changing every rustc revision, so we could add stuff like this without stabilizing the core rustc-cargo interface.)</p>



<a name="170433074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/170433074" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#170433074">(Jul 09 2019 at 08:21)</a>:</h4>
<p>I think <code>--cargo=foo=bar</code> is fine as long as we take care in how we "sell" it. We probably don't want to have features that are forever deployed solely for cargo (or at least not many such features): If its worth having for cargo, its <em>probably</em> worth providing to others.</p>



<a name="170433100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/170433100" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#170433100">(Jul 09 2019 at 08:21)</a>:</h4>
<p>But if the intent is more: "This is how we are initially exposing such functionality, and in the longer term we may add access to these features via proper, stable flags", then that is easier for me to swallow.</p>



<a name="170612174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/170612174" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#170612174">(Jul 11 2019 at 08:18)</a>:</h4>
<p><code>-Fjson=...</code> would be fine with me</p>



<a name="170612191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/170612191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#170612191">(Jul 11 2019 at 08:19)</a>:</h4>
<p>(but I agree this should've been discussed back then)</p>



<a name="170640815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/170640815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#170640815">(Jul 11 2019 at 14:55)</a>:</h4>
<blockquote>
<p>But if the intent is more: "This is how we are initially exposing such functionality, and in the longer term we may add access to these features via proper, stable flags", then that is easier for me to swallow.</p>
</blockquote>
<p>yeah, I agree with that <span class="user-mention" data-user-id="116083">@pnkfelix</span></p>



<a name="170640891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/170640891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#170640891">(Jul 11 2019 at 14:56)</a>:</h4>
<p>to quote myself:</p>
<blockquote>
<p>IMO one thing I'd be fine with is just increasing the amount of detail in the JSON output, and expect any consumers to adapt<br>
as an alternative to increasing amounts of configurability</p>
</blockquote>



<a name="171067632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/json-rendered%20flag/near/171067632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/json-rendered.20flag.html#171067632">(Jul 17 2019 at 11:03)</a>:</h4>
<blockquote>
<p>I were debating about whether it would make sense to have a --cargo=foo=bar flag where the expected arguments are documented as potentially changing every rustc revision</p>
</blockquote>
<p>That might come in handy for "out of process rustc for RLS": flag <code>--dump-save-analysis</code> should be usable on stable by RLS, but we don't want to stabilize it.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
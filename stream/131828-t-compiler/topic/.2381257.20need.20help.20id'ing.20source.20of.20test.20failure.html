<html>
<head><meta charset="utf-8"><title>#81257 need help id&#x27;ing source of test failure · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html">#81257 need help id&#x27;ing source of test failure</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="225221706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225221706" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225221706">(Feb 04 2021 at 21:00)</a>:</h4>
<p>Hi all. I've got a PR that I want to land and backport to beta, but it failed its last CI run against the Windows CI</p>



<a name="225221773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225221773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225221773">(Feb 04 2021 at 21:01)</a>:</h4>
<p>this is regarding PR <a href="https://github.com/rust-lang/rust/issues/81257">#81257</a></p>



<a name="225221817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225221817" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225221817">(Feb 04 2021 at 21:01)</a>:</h4>
<p>is there anyone using windows with some spare cycles available who could grab that PR and see if they see the same error locally?</p>



<a name="225221932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225221932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225221932">(Feb 04 2021 at 21:02)</a>:</h4>
<p>I started doing so, but my Windows setup is ... currently incomplete ... and I don't want to block progress here on getting that set up if it ends up that the root cause here has nothing to do with Windows</p>



<a name="225222019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225222019" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225222019">(Feb 04 2021 at 21:03)</a>:</h4>
<p>(to be clear, I tried the test locally on my Linux system and it passed there. I'm still trying to figure out if this is some oddity in the test, or something windows specific, or if I just have something wrong in my PR....)</p>



<a name="225235073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225235073" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225235073">(Feb 04 2021 at 22:43)</a>:</h4>
<p>what're the timelines you're hoping to achieve? I've a windows VM that I compiled rustc on 2 weeks ago, but its not very quick, having few cores allocated to it, so I'd have any results in maybe 2-3 hours.</p>



<a name="225235244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225235244" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225235244">(Feb 04 2021 at 22:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> ^</p>



<a name="225238456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225238456" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225238456">(Feb 04 2021 at 23:13)</a>:</h4>
<p>I would take 2-3 hour’s at this point</p>



<a name="225238499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225238499" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225238499">(Feb 04 2021 at 23:13)</a>:</h4>
<p>Since I’ll be busy putting kids to bed for next 2 to 3 hours</p>



<a name="225238842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225238842" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225238842">(Feb 04 2021 at 23:17)</a>:</h4>
<p>I'll kick it off then</p>



<a name="225240195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225240195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225240195">(Feb 04 2021 at 23:31)</a>:</h4>
<p>FWIW, I checked out your branch and ran <code>x.py test src\test\run-make-fulldeps</code>, and it passed.</p>



<a name="225240475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225240475" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225240475">(Feb 04 2021 at 23:33)</a>:</h4>
<p>It looks like the most recent errors were <code>insufficient disk space</code>. That sounds like something wonky with the builder?  Maybe it was a temporary issue?</p>



<a name="225241038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225241038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225241038">(Feb 04 2021 at 23:39)</a>:</h4>
<p>I was wondering about that part of the message. But I had assumed the later compiler messages meant something else was wrong.</p>



<a name="225241118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225241118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225241118">(Feb 04 2021 at 23:40)</a>:</h4>
<p>Still, maybe I should just retry landing the PR.</p>



<a name="225241178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225241178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225241178">(Feb 04 2021 at 23:40)</a>:</h4>
<p>(Should the disk usage be part of our log output? Like call <code>df</code> at the beginning and end of the test.....)</p>



<a name="225241446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225241446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225241446">(Feb 04 2021 at 23:43)</a>:</h4>
<p><code>df</code> is run at the start, but not the end (see "show the current environment" step)</p>



<a name="225241710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225241710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225241710">(Feb 04 2021 at 23:45)</a>:</h4>
<p>this is giving me flashbacks to the bad old days where mspdbsrv would run async in the background and cause all sorts of trouble like this</p>



<a name="225244373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225244373" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225244373">(Feb 05 2021 at 00:14)</a>:</h4>
<p>I’m not in a position to look at the log at the moment; is the df output at the beginning noteworthy?</p>



<a name="225244952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225244952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225244952">(Feb 05 2021 at 00:20)</a>:</h4>
<p>This is the output from the logs for <code>i686-msvc-1, --build=i686-pc-windows-msvc, make ci-subset-1, windows-latest-xl</code>:</p>
<div class="codehilite"><pre><span></span><code> disk usage:
Filesystem            Size  Used Avail Use% Mounted on
C:/Program Files/Git  344G  164G  180G  48% /
D:                     56G  4.8G   52G   9% /d

biggest files in the working dir:
132649  .
77882   ./src
61148   ./src/test
51114   ./src/test/ui
22079   ./compiler
21172   ./.git
18064   ./.git/objects/pack
18064   ./.git/objects
10727   ./library
9920    ./src/tools
9157    ./src/tools/clippy
</code></pre></div>



<a name="225245780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225245780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225245780">(Feb 05 2021 at 00:31)</a>:</h4>
<p>it should be start and end I think, but maybe not on failure</p>



<a name="225245823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225245823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225245823">(Feb 05 2021 at 00:32)</a>:</h4>
<p>I would retry</p>



<a name="225248532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225248532" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225248532">(Feb 05 2021 at 01:08)</a>:</h4>
<p>I saw a failure, but with different errors than in PR – I think probably related to use of download-ci-llvm and/or general setup wonkiness.</p>



<a name="225248726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225248726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225248726">(Feb 05 2021 at 01:12)</a>:</h4>
<p>That amount of available space should be fine, right?</p>



<a name="225300797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225300797" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225300797">(Feb 05 2021 at 13:57)</a>:</h4>
<p>I would hope so</p>



<a name="225305272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225305272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225305272">(Feb 05 2021 at 14:33)</a>:</h4>
<p>meanwhile my retry hit a tidy failure. argh</p>



<a name="225305330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225305330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225305330">(Feb 05 2021 at 14:34)</a>:</h4>
<p>(I used to be <em>so good</em> about always running tidy locally on every build…)</p>



<a name="225306224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2381257%20need%20help%20id%27ing%20source%20of%20test%20failure/near/225306224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2381257.20need.20help.20id&#x27;ing.20source.20of.20test.20failure.html#225306224">(Feb 05 2021 at 14:42)</a>:</h4>
<p>wesley was on top of it <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>How to run src/test/debuginfo tests? · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html">How to run src/test/debuginfo tests?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="221085172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085172" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085172">(Dec 28 2020 at 19:27)</a>:</h4>
<p>I'm making a few minor changes to <code>*.natvis</code> files, and I want to check that I haven't broken any tests. (This is on Windows.) I tried running <code>python x.py test src\test\debuginfo</code>, but this does not actually run any tests. It builds everything, and then displays:</p>
<div class="codehilite"><pre><span></span><code>Check compiletest suite=debuginfo mode=debuginfo (x86_64-pc-windows-msvc -&gt; x86_64-pc-windows-msvc)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
</code></pre></div>
<p>I've tried using both <code>/</code> and <code>\</code> path separators, which has no effect.</p>



<a name="221085356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085356" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085356">(Dec 28 2020 at 19:29)</a>:</h4>
<p><span class="user-mention" data-user-id="274471">@Arlie Davis</span> try <code>src/test\debuginfo</code>  <a href="https://github.com/rust-lang/rust/issues/79334">https://github.com/rust-lang/rust/issues/79334</a></p>



<a name="221085440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085440" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085440">(Dec 28 2020 at 19:30)</a>:</h4>
<p>Same result.</p>



<a name="221085452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085452" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085452">(Dec 28 2020 at 19:30)</a>:</h4>
<p>hmm, weird</p>



<a name="221085479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085479" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085479">(Dec 28 2020 at 19:31)</a>:</h4>
<p>It's clearly running correctly in the GH CI pipeline, which is good because it caught a problem in my PR.</p>



<a name="221085491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085491">(Dec 28 2020 at 19:31)</a>:</h4>
<p><code>x.py test src/test/debuginfo</code> works fine for me locally so I'd expect this to be something wrong with path handling on windows</p>



<a name="221085585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085585">(Dec 28 2020 at 19:32)</a>:</h4>
<p>are you using powershell/MSVC or mingw/WSL?</p>



<a name="221085603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085603" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085603">(Dec 28 2020 at 19:32)</a>:</h4>
<p>Plain old Windows cmd.exe.</p>



<a name="221085628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085628">(Dec 28 2020 at 19:33)</a>:</h4>
<p>ok, so it's not cygwin messing things up</p>



<a name="221085634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085634" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085634">(Dec 28 2020 at 19:33)</a>:</h4>
<p>Since the changes I'm making are Windows-specific, I can't just switch to WSL.</p>



<a name="221085716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085716" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085716">(Dec 28 2020 at 19:34)</a>:</h4>
<p>maybe bash will work ? :)</p>



<a name="221085721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085721">(Dec 28 2020 at 19:34)</a>:</h4>
<p>honestly I would expect it to be easier to fix the bootstrap bug than to figure out exactly how to work around it <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> sorry I can't help more</p>



<a name="221085764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085764" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085764">(Dec 28 2020 at 19:35)</a>:</h4>
<p>Running <code>python x.py test src\test\ui</code> does work, however.</p>



<a name="221085852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221085852" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221085852">(Dec 28 2020 at 19:36)</a>:</h4>
<p>this is the relevant part of bootstrap in case it helps: <a href="https://github.com/rust-lang/rust/blob/2987785df3d46d5ff144a5c67fbb8f5cca798d78/src/bootstrap/test.rs#L900-L905">https://github.com/rust-lang/rust/blob/2987785df3d46d5ff144a5c67fbb8f5cca798d78/src/bootstrap/test.rs#L900-L905</a></p>



<a name="221086117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221086117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221086117">(Dec 28 2020 at 19:41)</a>:</h4>
<p>Ahhh, it looks like <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> figured it out. The tests search for <code>cdb.exe</code>. Because I work with a lot of different builds of the Windows debugger, I always just use <code>xcopy</code> deployment, so it's not installed where the bootstrap tests are expecting to find it.</p>



<a name="221087016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087016">(Dec 28 2020 at 19:56)</a>:</h4>
<p>that also explains why those tests didn't run on my machine <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="221087048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087048">(Dec 28 2020 at 19:57)</a>:</h4>
<p>Yeah, it's a little worrisome that a test silently passes when it can't actually be run.</p>



<a name="221087098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087098" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087098">(Dec 28 2020 at 19:58)</a>:</h4>
<p>it's hard to strike the right balance</p>



<a name="221087117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087117">(Dec 28 2020 at 19:58)</a>:</h4>
<p>Agreed.</p>



<a name="221087141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087141">(Dec 28 2020 at 19:58)</a>:</h4>
<p>I thought these just didn't run, rather than "silently passing"</p>



<a name="221087145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087145">(Dec 28 2020 at 19:58)</a>:</h4>
<p>Maybe a yellow-test warning: "Hey, we couldn't run tests so-and-so because $reason."</p>



<a name="221087156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087156">(Dec 28 2020 at 19:59)</a>:</h4>
<p>yeah</p>



<a name="221087177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087177" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087177">(Dec 28 2020 at 19:59)</a>:</h4>
<p>Either that, or we automatically pull down the windbg.exe zip file, extract it, and run it. It doesn't need to be "installed" to be used.</p>



<a name="221087369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087369">(Dec 28 2020 at 20:02)</a>:</h4>
<p>maybe a rust-windbg.exe like there's a rust-lldb and -gdb exes ^^</p>



<a name="221087429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087429" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087429">(Dec 28 2020 at 20:03)</a>:</h4>
<p>Sorry, I'm not familiar with those. Are they stub exes that download the for-reals thing?  Or stubs that imitate the real thing?</p>



<a name="221087520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221087520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221087520">(Dec 28 2020 at 20:04)</a>:</h4>
<p>I <em>think</em> they wrap the real thing and load the rust specific formatters but could be very wrong; (so it wouldn't be the same thing at all and that idea was stupid)</p>



<a name="221089801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221089801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221089801">(Dec 28 2020 at 20:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116113">lqd</span> <a href="#narrow/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F/near/221087520">said</a>:</p>
<blockquote>
<p>I <em>think</em> they wrap the real thing and load the rust specific formatters but could be very wrong; (so it wouldn't be the same thing at all and that idea was stupid)</p>
</blockquote>
<p>I do believe that this happens, but I believe we also just tend to rename external binaries that we ship so that they don't conflict with system versions (e.g. <code>llvm-lld</code> or <code>llvm-dwp</code>).</p>



<a name="221089896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20to%20run%20src/test/debuginfo%20tests%3F/near/221089896" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20to.20run.20src.2Ftest.2Fdebuginfo.20tests.3F.html#221089896">(Dec 28 2020 at 20:42)</a>:</h4>
<p>thanks david !</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
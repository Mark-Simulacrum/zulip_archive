<html>
<head><meta charset="utf-8"><title>landing invariance fix #71896 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html">landing invariance fix #71896</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="196642934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196642934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196642934">(May 06 2020 at 14:33)</a>:</h4>
<p>So <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> opened <a href="https://github.com/rust-lang/rust/pull/71896" title="https://github.com/rust-lang/rust/pull/71896">https://github.com/rust-lang/rust/pull/71896</a> which fixes <a href="https://github.com/rust-lang/rust/issues/71550" title="https://github.com/rust-lang/rust/issues/71550">#71550</a>. I'm wondering if we should just land this?</p>



<a name="196642943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196642943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196642943">(May 06 2020 at 14:33)</a>:</h4>
<p>Or if we want to do a crater run</p>



<a name="196643034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643034">(May 06 2020 at 14:33)</a>:</h4>
<p>I'm a bit worried it'll break random crates in the ecosystem</p>



<a name="196643048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643048">(May 06 2020 at 14:34)</a>:</h4>
<p>and I don't know how to do a warning period, really</p>



<a name="196643147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643147" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643147">(May 06 2020 at 14:34)</a>:</h4>
<p>on the other hand, the <a href="https://crater.rust-lang.org/" title="https://crater.rust-lang.org/">crater queue</a> is looking long</p>



<a name="196643167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643167">(May 06 2020 at 14:34)</a>:</h4>
<p>not sure who to cc on this topic ;)</p>



<a name="196643175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643175">(May 06 2020 at 14:34)</a>:</h4>
<p>we might get more crater capacity soon</p>



<a name="196643241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643241" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643241">(May 06 2020 at 14:35)</a>:</h4>
<p>(yes, I'm getting notified when someone types crater on zulip :D)</p>



<a name="196643248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643248">(May 06 2020 at 14:35)</a>:</h4>
<p>are we doing regular beta/nightly runs on some cadence?</p>



<a name="196643280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643280">(May 06 2020 at 14:35)</a>:</h4>
<p>we do a beta run at the start of each cycle</p>



<a name="196643293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643293">(May 06 2020 at 14:35)</a>:</h4>
<p>the 1.44.0 already finished</p>



<a name="196643530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643530" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643530">(May 06 2020 at 14:37)</a>:</h4>
<p>OK.</p>



<a name="196643971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643971" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643971">(May 06 2020 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> btw, currently a check run takes ~2 days, so in 10 days your run should start</p>



<a name="196643998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196643998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196643998">(May 06 2020 at 14:40)</a>:</h4>
<p>we might get more capacity sooner than that too</p>



<a name="196644034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644034">(May 06 2020 at 14:40)</a>:</h4>
<p>I'm somewhat inclined to "just land it" and see what happens</p>



<a name="196644062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644062">(May 06 2020 at 14:40)</a>:</h4>
<p>But I wonder if that's irresponsible of me</p>



<a name="196644081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644081">(May 06 2020 at 14:40)</a>:</h4>
<p>We don't have a totally clear policy on this I guess</p>



<a name="196644146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644146" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644146">(May 06 2020 at 14:41)</a>:</h4>
<p>with my release hat I'd prefer to avoid landing it on nightly if we don't know the extent of the breakage</p>



<a name="196644365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644365">(May 06 2020 at 14:43)</a>:</h4>
<p>I'd be down for prioritizing the crater queue a bit</p>



<a name="196644375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644375">(May 06 2020 at 14:43)</a>:</h4>
<p>some of it is probably less important</p>



<a name="196644617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644617" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644617">(May 06 2020 at 14:45)</a>:</h4>
<p>I was wondering about that</p>



<a name="196644632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644632">(May 06 2020 at 14:45)</a>:</h4>
<p>maybe p=1</p>



<a name="196644643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644643">(May 06 2020 at 14:45)</a>:</h4>
<p>for this PR</p>



<a name="196644670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644670">(May 06 2020 at 14:45)</a>:</h4>
<p>yeah that seems reasonable to me</p>



<a name="196644682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644682">(May 06 2020 at 14:45)</a>:</h4>
<p>We could also do some hacky group testing</p>



<a name="196644693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644693" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644693">(May 06 2020 at 14:45)</a>:</h4>
<p>I guess to start I will <code>@bors try</code></p>



<a name="196644704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644704">(May 06 2020 at 14:45)</a>:</h4>
<p>I think I just did</p>



<a name="196644716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644716" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644716">(May 06 2020 at 14:45)</a>:</h4>
<p>Oh, so you did</p>



<a name="196644983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196644983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196644983">(May 06 2020 at 14:47)</a>:</h4>
<p>yeah let's p=1 it, then we should have results by mid-weekend</p>



<a name="196647407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/196647407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#196647407">(May 06 2020 at 15:03)</a>:</h4>
<p>hey, just saw this, all you have said sounds reasonable <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="199514261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/199514261" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#199514261">(Jun 02 2020 at 16:00)</a>:</h4>
<p>So we didn't reach a decision here</p>



<a name="199514326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/199514326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#199514326">(Jun 02 2020 at 16:01)</a>:</h4>
<p>I propose we land it at the start of the next release cycle</p>



<a name="199514366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/199514366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#199514366">(Jun 02 2020 at 16:01)</a>:</h4>
<p>I'm not sure if there is anything else we should do before-hand -- reaching out to crater authors for example? It is probably a good idea to at least ping them</p>



<a name="199514455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/landing%20invariance%20fix%20%2371896/near/199514455" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/landing.20invariance.20fix.20.2371896.html#199514455">(Jun 02 2020 at 16:02)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116083">@pnkfelix</span> <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
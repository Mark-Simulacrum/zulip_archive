<html>
<head><meta charset="utf-8"><title>#54393 try build platforms · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html">#54393 try build platforms</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="134316906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134316906" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134316906">(Sep 20 2018 at 15:32)</a>:</h4>
<blockquote>
<p>I'm not sure if try builds run on all platforms? <span class="user-mention" data-user-id="121055">@Pietro Albini</span> would prob know</p>
</blockquote>



<a name="134316928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134316928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134316928">(Sep 20 2018 at 15:33)</a>:</h4>
<p>not by default, but you can edit .travis.yml to change which builders should run</p>



<a name="134316938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134316938" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134316938">(Sep 20 2018 at 15:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="134316948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134316948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134316948">(Sep 20 2018 at 15:33)</a>:</h4>
<p>I think it was <span class="user-mention" data-user-id="116083">@pnkfelix</span>  that was interested in this for one of his PRs.</p>



<a name="134318054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318054" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318054">(Sep 20 2018 at 15:54)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> to be clear we want to get both a build and a run of the test suite.</p>



<a name="134318064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318064" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318064">(Sep 20 2018 at 15:54)</a>:</h4>
<p>(which I assume is what one will get from mucking with the <code>.travis.yml</code>; I just wanted to make sure to include that info)</p>



<a name="134318085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318085" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318085">(Sep 20 2018 at 15:54)</a>:</h4>
<p>uhh... yeah, you could do that from <code>.travis.yml</code>, I don't know if we have capacity for that though</p>



<a name="134318091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318091" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318091">(Sep 20 2018 at 15:55)</a>:</h4>
<p>you should ask alex or kenny</p>



<a name="134318237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318237">(Sep 20 2018 at 15:57)</a>:</h4>
<p>I got the impression from <a href="#narrow/stream/131828-t-compiler/subject/test.20suite/near/131235830" title="#narrow/stream/131828-t-compiler/subject/test.20suite/near/131235830">this comment</a> that the recommended practice is to just make sure you only enable 1 or 2 at a time</p>



<a name="134318280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318280">(Sep 20 2018 at 15:58)</a>:</h4>
<p>which ... I would hope would then keep us under our capacity limits?</p>



<a name="134318310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318310" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318310">(Sep 20 2018 at 15:59)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> but I don't understand enough about the comment, in truth</p>



<a name="134318325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318325">(Sep 20 2018 at 15:59)</a>:</h4>
<p>yep, just avoid enabling all the builders at once and we should have capacity for that</p>



<a name="134318334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318334">(Sep 20 2018 at 15:59)</a>:</h4>
<p>i.e. I don't know which commands to <code>@bors</code> and/or Travis represent load on "AppVeyor"</p>



<a name="134318340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318340" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318340">(Sep 20 2018 at 15:59)</a>:</h4>
<p>Bors and Travis are magic spirits to my cargo-cult usage</p>



<a name="134318431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134318431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134318431">(Sep 20 2018 at 16:01)</a>:</h4>
<p>you should probably ask <span class="user-mention" data-user-id="125254">@kennytm</span>, they're the one managing bors and travis</p>



<a name="134319000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134319000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134319000">(Sep 20 2018 at 16:10)</a>:</h4>
<blockquote>
<p>i.e. I don't know which commands to <code>@bors</code> and/or Travis represent load on "AppVeyor"</p>
</blockquote>
<p>i don't understand what 'represent load on "AppVeyor"' means <span class="emoji emoji-1f643" title="upside down">:upside_down:</span></p>



<a name="134325702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134325702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134325702">(Sep 20 2018 at 18:00)</a>:</h4>
<p>we should definitely create a rustc-guide on this topic</p>



<a name="134328635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134328635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134328635">(Sep 20 2018 at 18:45)</a>:</h4>
<p>(dummy msg to let me remerge an offshoot topic)</p>



<a name="134328736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134328736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134328736">(Sep 20 2018 at 18:46)</a>:</h4>
<blockquote>
<blockquote>
<p>i.e. I don't know which commands to <code>@bors</code> and/or Travis represent load on "AppVeyor"</p>
</blockquote>
<p>i don't understand what 'represent load on "AppVeyor"' means <span class="emoji emoji-1f643" title="upside down">:upside_down:</span></p>
</blockquote>
<p>here in <a href="#narrow/stream/131828-t-compiler/subject/test.20suite/near/131235853" title="#narrow/stream/131828-t-compiler/subject/test.20suite/near/131235853">this Zulip comment</a>, <span class="user-mention" data-user-id="116122">@simulacrum</span> wrote: </p>
<blockquote>
<p>AppVeyor is much more limited on capacity so there we generally don't want to do try</p>
</blockquote>



<a name="134328830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134328830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134328830">(Sep 20 2018 at 18:48)</a>:</h4>
<p>so i was trying to say: " <span class="user-mention" data-user-id="116122">@simulacrum</span> appears worried about the AppVeyor capacity. I don't know which commands I issue would utilize resources that could run up against the constraints imposed by the aforementioned AppVeyor capacity."</p>



<a name="134331162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134331162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134331162">(Sep 20 2018 at 19:23)</a>:</h4>
<p>I suddenly had a strong craving for <code>@bors try x86_64-pc-windows-msvc riscv-none-none woohooarch-very-obscure-yeah</code> and have it run the <code>try</code> builds on only these architectures, taking care of all the resource allocation and whatnot.</p>



<a name="134331234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134331234" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134331234">(Sep 20 2018 at 19:24)</a>:</h4>
<p>the bors command would perhaps end up taking the job matrix names rather than targets, but that’s beyond the point.</p>



<a name="134348309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134348309" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134348309">(Sep 21 2018 at 00:54)</a>:</h4>
<p>There is no current command you can issue aside from r+ that'll run on AppVeyor -- I don't even think editing the appveyor.yml will do that (not sure about that part though)</p>



<a name="134368480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134368480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134368480">(Sep 21 2018 at 10:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <em>okay</em>, that actually helps me understand a lot! In particular, my take away is: <code>r+</code> is "expensive" (or at least may run up against capacity limitations); but pushing to a PR's branch (and thus engaging Travis) is cheap, but you'll need to edit the .travis.yml to switch around the target(s), and should not enable more than 2 or 3 targets via .travis.yml. (<em>and</em> <code>@bors try</code> is also "cheap", but doesn't run the test suite...) Does that sound about right?</p>



<a name="134413492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134413492" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134413492">(Sep 22 2018 at 00:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> Sort of -- but the important bit here is that r+ isn't really running up against capacity limitations -- well, not directly. Only one of those can be built at a time, so the only problem is slowing down the queue</p>



<a name="134413554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134413554" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134413554">(Sep 22 2018 at 00:14)</a>:</h4>
<p>Slowing down the queue is bad, but not as bad as running up against capacity (because there you're <em>also</em> slowing down the queue but almost worse -- because even a successful build will kill the queue)</p>



<a name="134413573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354393%20try%20build%20platforms/near/134413573" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2354393.20try.20build.20platforms.html#134413573">(Sep 22 2018 at 00:15)</a>:</h4>
<p>try is cheap because it's essentially the equivalent of enabling some builders in the yml file on Travis -- the only benefit to try is that we can use LLVM caches, which PRs I believe normally can't, though I'm not sure about that</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Add plugin flag for llvm · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Add.20plugin.20flag.20for.20llvm.html">Add plugin flag for llvm</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="246346174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Add%20plugin%20flag%20for%20llvm/near/246346174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Drehwald <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Add.20plugin.20flag.20for.20llvm.html#246346174">(Jul 17 2021 at 21:49)</a>:</h4>
<p>This is a follow-up to <a href="https://github.com/rust-lang/rust/pull/86267">https://github.com/rust-lang/rust/pull/86267</a>.<br>
There we decided to add the plugin flag on nightly, to be able to use enzyme.<br>
Now I would like to ask to also expose the related -DLLVM_ENABLE_PLUGINS=ON in the llvm section of our build-config tool.<br>
It would probably be <code>--enable-llvm-plugins</code>, similar to the <code>--enable-llvm-assertions</code> flag.<br>
( If there is a way to already do so by other flags which I missed, please let me know).</p>
<p>I would argue that it does not need any commitment from our side. If LLVM decides to drop it's plugin interface all plugins will stop working, no matter if they previously were building llvm as a part of rusts build process, or if they have been manually calling cmake / ninja.<br>
The result would therefore be the same. However, if we add this flag to our llvm section, we would not need to add custom patches before our build process or re-building llvm with our own flags.</p>
<p>Sorry for not having mentioned this request in the clang post, I just noticed it due to still failing tests.<br>
As you can see here (<a href="https://enzyme.mit.edu/Installation/">https://enzyme.mit.edu/Installation/</a>) this should be all that's required for us.</p>
<p>Dropped in favor of a more general solution.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>beta regressions 2019-06-06 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html">beta regressions 2019-06-06</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="167489797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167489797" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167489797">(Jun 06 2019 at 15:04)</a>:</h4>
<p>We should discuss the beta regressions -- but I have another meeting just now -- I was thinking I might put some more energy into diagnosing the things in the list in ~1 hour.</p>



<a name="167498190"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498190" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498190">(Jun 06 2019 at 16:36)</a>:</h4>
<p>Going to dig into some of this a bit here</p>



<a name="167498329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498329" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498329">(Jun 06 2019 at 16:38)</a>:</h4>
<p>I've compiled most of them locally so feel free to ping me if you have questions, I spent 5-10 minutes per regression trying to investigate a little</p>



<a name="167498523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498523">(Jun 06 2019 at 16:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> ok -- the main thing I'm wondering about is whether the rustdoc tests represent "run more tests" or "code changed behavior"</p>



<a name="167498549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498549">(Jun 06 2019 at 16:41)</a>:</h4>
<p>My impression was code changed behavior -- possibly due to different parsing though</p>



<a name="167498559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498559">(Jun 06 2019 at 16:41)</a>:</h4>
<p>However <span class="user-mention" data-user-id="133692">@QuietMisdreavus</span> indicated that nightly has everything mostly fixed (i.e., no ICEs) so in that regard we might just skip over them</p>



<a name="167498610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498610">(Jun 06 2019 at 16:42)</a>:</h4>
<p>yeah, you said that before, and you're probably right, though my searching of the logs seemed to suggest it was some new test</p>



<a name="167498622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498622" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498622">(Jun 06 2019 at 16:42)</a>:</h4>
<p>well, these weren't ICEs, right?</p>



<a name="167498628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498628">(Jun 06 2019 at 16:42)</a>:</h4>
<p>hm, some of the rustdoc bugs were</p>



<a name="167498632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498632">(Jun 06 2019 at 16:42)</a>:</h4>
<p>yes, some were</p>



<a name="167498639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498639">(Jun 06 2019 at 16:42)</a>:</h4>
<p>it's great if those are fixed! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="167498644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498644" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498644">(Jun 06 2019 at 16:42)</a>:</h4>
<p>I guess I'm not sure which one you're referring to :)</p>



<a name="167498805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498805">(Jun 06 2019 at 16:45)</a>:</h4>
<blockquote>
<p>regression: doctest failure display-as-0.4.4 <a href="https://github.com/rust-lang/rust/issues/61562" target="_blank" title="https://github.com/rust-lang/rust/issues/61562">#61562</a></p>
</blockquote>



<a name="167498834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498834" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498834">(Jun 06 2019 at 16:45)</a>:</h4>
<p>the <a href="https://crater-reports.s3.amazonaws.com/beta-1.36-1/beta-2019-05-30/reg/display-as-0.4.4/log.txt" target="_blank" title="https://crater-reports.s3.amazonaws.com/beta-1.36-1/beta-2019-05-30/reg/display-as-0.4.4/log.txt">newer logs</a> have:</p>
<blockquote>
<p>[INFO] [stdout] test src/lib.rs -  (line 193) ... FAILED</p>
</blockquote>



<a name="167498911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498911" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498911">(Jun 06 2019 at 16:46)</a>:</h4>
<p>but the <a href="https://crater-reports.s3.amazonaws.com/beta-1.36-1/1.35.0/reg/display-as-0.4.4/log.txt" target="_blank" title="https://crater-reports.s3.amazonaws.com/beta-1.36-1/1.35.0/reg/display-as-0.4.4/log.txt">older logs</a> don't have "line 193" anywhere</p>



<a name="167498984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498984">(Jun 06 2019 at 16:47)</a>:</h4>
<p>ah, okay</p>



<a name="167498993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167498993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167498993">(Jun 06 2019 at 16:47)</a>:</h4>
<p>yeah that's probably a markdown parser bug</p>



<a name="167499002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499002">(Jun 06 2019 at 16:47)</a>:</h4>
<p>but maybe not</p>



<a name="167499075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499075">(Jun 06 2019 at 16:48)</a>:</h4>
<p>if it is nightly should work</p>



<a name="167499147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499147" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499147">(Jun 06 2019 at 16:49)</a>:</h4>
<p>hm, okay, so nightly fails</p>



<a name="167499151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499151">(Jun 06 2019 at 16:49)</a>:</h4>
<p>line 193 is right in the middle</p>



<a name="167499228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499228">(Jun 06 2019 at 16:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="sd">//! ```</span>
<span class="sd">//! Now to put all this together, we&#39;ll need some rust code.</span>
<span class="sd">//!</span>
<span class="sd">//! ```</span>
<span class="sd">//! use display_as::{DisplayAs, HTML, format_as, with_template};</span>
<span class="sd">//! struct Student { name: &amp;&#39;static str };</span>
<span class="sd">//! #[with_template(&quot;student.html&quot;)]</span>
<span class="sd">//! impl DisplayAs&lt;HTML&gt; for Student {}</span>
<span class="sd">//! &lt;-- LINE 193</span>
<span class="sd">//! struct Class { coursename: &amp;&#39;static str, coursenumber: usize, students: Vec&lt;Student&gt; };</span>
<span class="sd">//! #[with_template(&quot;class.html&quot;)]</span>
<span class="sd">//! impl DisplayAs&lt;HTML&gt; for Class {}</span>
</pre></div>



<a name="167499232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499232">(Jun 06 2019 at 16:50)</a>:</h4>
<p>see the <code>&lt;-- LINE 193</code>?</p>



<a name="167499259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499259" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499259">(Jun 06 2019 at 16:50)</a>:</h4>
<p>so probably also some line-offset/span bugs</p>



<a name="167499398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499398" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499398">(Jun 06 2019 at 16:52)</a>:</h4>
<p>yeah -- <span class="user-mention" data-user-id="133692">@QuietMisdreavus</span> / <span class="user-mention" data-user-id="210316">@Guillaume</span>, does that ring any bells? <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span> </p>
<p>the test is cited as being on line 193, which seems to be in the middle of a doc comment...</p>



<a name="167499404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499404">(Jun 06 2019 at 16:52)</a>:</h4>
<p>I'm going to investigate  </p>
<blockquote>
<p>regression: trait no longer implemented <a href="https://github.com/rust-lang/rust/issues/61563" target="_blank" title="https://github.com/rust-lang/rust/issues/61563">#61563</a> </p>
</blockquote>
<p>a bit</p>



<a name="167499423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499423" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499423">(Jun 06 2019 at 16:52)</a>:</h4>
<p>stable:</p>
<div class="codehilite"><pre><span></span>test src/lib.rs -  (line 113) ... ok
test src/lib.rs -  (line 149) ... ignored
test src/lib.rs -  (line 100) ... ok
test src/lib.rs -  (line 127) ... ok
test src/html.rs - display_floats_as (line 78) ... ok
test src/lib.rs -  (line 58) ... ok
test src/lib.rs -  (line 72) ... ok
test src/lib.rs -  (line 85) ... ok
</pre></div>


<p>beta:</p>
<div class="codehilite"><pre><span></span>running 12 tests
test src/lib.rs -  (line 104) ... ok
test src/lib.rs -  (line 156) ... ignored
test src/lib.rs -  (line 178) ... ignored
test src/lib.rs -  (line 183) ... ignored
test src/lib.rs -  (line 188) ... ignored
test src/lib.rs -  (line 118) ... ok
test src/html.rs - display_floats_as (line 78) ... ok
test src/lib.rs -  (line 133) ... ok
test src/lib.rs -  (line 59) ... ok
test src/lib.rs -  (line 74) ... ok
test src/lib.rs -  (line 88) ... ok
test src/lib.rs -  (line 193) ... FAILED
</pre></div>



<a name="167499456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499456" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499456">(Jun 06 2019 at 16:53)</a>:</h4>
<p>it looks like all the line numbers changed on beta</p>



<a name="167499563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499563" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499563">(Jun 06 2019 at 16:54)</a>:</h4>
<p>hmm odd</p>



<a name="167499575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499575">(Jun 06 2019 at 16:54)</a>:</h4>
<p>plus new ones but still</p>



<a name="167499771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499771">(Jun 06 2019 at 16:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I have a question about <a href="https://github.com/rust-lang/rust/issues/61563" target="_blank" title="https://github.com/rust-lang/rust/issues/61563">#61563</a> --</p>



<a name="167499777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499777">(Jun 06 2019 at 16:57)</a>:</h4>
<p>I'm trying to reproduce but I'm seeing different results basically</p>



<a name="167499804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499804">(Jun 06 2019 at 16:57)</a>:</h4>
<p>specifically, with <em>beta</em> and nightly, when I run <code>cargo build</code> everything works. <code>cargo test</code> gets error, but different errors.</p>



<a name="167499855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499855">(Jun 06 2019 at 16:58)</a>:</h4>
<p>same errors as stable</p>



<a name="167499859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499859">(Jun 06 2019 at 16:58)</a>:</h4>
<p>perhaps i"m missing some features</p>



<a name="167499883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499883">(Jun 06 2019 at 16:58)</a>:</h4>
<p>I get stuff like this</p>
<div class="codehilite"><pre><span></span>error[E0277]: the trait bound `rand_hc::Hc128Rng: rand_core::SeedableRng` is not satisfied
   --&gt; /home/nmatsakis/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.6.5/src/deprecated.rs:282:5
    |
282 | /     fn from_seed(seed: Self::Seed) -&gt; Self {
283 | |         StdRng(rngs::StdRng::from_seed(seed))
284 | |     }
    | |_____^ the trait `rand_core::SeedableRng` is not implemented for `rand_hc::Hc128Rng`
</pre></div>



<a name="167499943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499943">(Jun 06 2019 at 16:59)</a>:</h4>
<p>that's because rand is broken</p>



<a name="167499952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499952">(Jun 06 2019 at 16:59)</a>:</h4>
<p>we're seeing that across ~all of Rust</p>



<a name="167499982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499982">(Jun 06 2019 at 16:59)</a>:</h4>
<p>I'm... not sure how to stop that</p>



<a name="167499995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167499995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167499995">(Jun 06 2019 at 16:59)</a>:</h4>
<p>uh</p>



<a name="167500043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500043">(Jun 06 2019 at 17:00)</a>:</h4>
<p><a href="https://github.com/rust-random/rand/issues/818" target="_blank" title="https://github.com/rust-random/rand/issues/818">https://github.com/rust-random/rand/issues/818</a></p>



<a name="167500093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500093">(Jun 06 2019 at 17:00)</a>:</h4>
<p>Is...this my fault? :)</p>



<a name="167500100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500100" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500100">(Jun 06 2019 at 17:00)</a>:</h4>
<p>That seems like something we should try to fix...</p>



<a name="167500107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500107">(Jun 06 2019 at 17:00)</a>:</h4>
<p>all of rust's ci is broken as well</p>



<a name="167500125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500125">(Jun 06 2019 at 17:01)</a>:</h4>
<p>because rand doesn't build?</p>



<a name="167500136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500136" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500136">(Jun 06 2019 at 17:01)</a>:</h4>
<p>yep</p>



<a name="167500156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500156">(Jun 06 2019 at 17:01)</a>:</h4>
<p>did this just start very recently?</p>



<a name="167500163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500163">(Jun 06 2019 at 17:01)</a>:</h4>
<p>I'm not sure why it's not been yanked or anything yet but basically if you don't have a lockfile (which cargo uploads don't) you're out of luck as of ~30ish minutes ago?</p>



<a name="167500168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500168">(Jun 06 2019 at 17:01)</a>:</h4>
<p>maybe an hour</p>



<a name="167500225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500225" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500225">(Jun 06 2019 at 17:02)</a>:</h4>
<p>so maybe it's just that the newest upload is borked somehow?</p>



<a name="167500257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500257">(Jun 06 2019 at 17:02)</a>:</h4>
<p>it also doesn't build on stable</p>



<a name="167500282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500282">(Jun 06 2019 at 17:03)</a>:</h4>
<p>/me wonders how that got uploaded</p>



<a name="167500303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500303">(Jun 06 2019 at 17:03)</a>:</h4>
<p><code>cargo publish --no-verify</code> maybe</p>



<a name="167500401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500401" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500401">(Jun 06 2019 at 17:04)</a>:</h4>
<p>(ok, anyway, I see the ticket)</p>



<a name="167500404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500404">(Jun 06 2019 at 17:04)</a>:</h4>
<p>well, that's a drag</p>



<a name="167500528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500528">(Jun 06 2019 at 17:06)</a>:</h4>
<p>I guess I'll just wait until this is resolved, since I couldn't get the workarounds to work (seems like <span class="user-mention" data-user-id="131912">@dhardy</span> is <a href="https://github.com/rust-random/rand/pull/819#issuecomment-499582466" target="_blank" title="https://github.com/rust-random/rand/pull/819#issuecomment-499582466">all over this</a>)</p>



<a name="167500533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500533" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500533">(Jun 06 2019 at 17:06)</a>:</h4>
<p>seems yanking is the way to go</p>



<a name="167500540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167500540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167500540">(Jun 06 2019 at 17:06)</a>:</h4>
<p>yeah that seems to be the latest</p>



<a name="167501057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167501057" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167501057">(Jun 06 2019 at 17:12)</a>:</h4>
<p>i haven't seen <a href="https://github.com/rust-lang/rust/issues/61562" target="_blank" title="https://github.com/rust-lang/rust/issues/61562">#61562</a> before, i'll look more closely after lunch</p>



<a name="167502265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167502265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167502265">(Jun 06 2019 at 17:27)</a>:</h4>
<p>Doesn't remind me anything either. :-/</p>



<a name="167502414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167502414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167502414">(Jun 06 2019 at 17:29)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> rand should be fixed now</p>



<a name="167513746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513746">(Jun 06 2019 at 19:21)</a>:</h4>
<p>i have a sinking suspicion that <a href="https://github.com/rust-lang/rust/issues/61562" target="_blank" title="https://github.com/rust-lang/rust/issues/61562">#61562</a> is also fallout from the pulldown upgrade, and that that test hadn't been run prior to that</p>



<a name="167513823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513823">(Jun 06 2019 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="133692">@QuietMisdreavus</span> it's also broken on nightly though?</p>



<a name="167513838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513838" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513838">(Jun 06 2019 at 19:21)</a>:</h4>
<p>i'm going to build a couple compilers to test before/after of <a href="https://github.com/rust-lang/rust/issues/60140" target="_blank" title="https://github.com/rust-lang/rust/issues/60140">#60140</a></p>



<a name="167513844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513844" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513844">(Jun 06 2019 at 19:22)</a>:</h4>
<p>though I guess maybe not all pulldown bugs are fixed</p>



<a name="167513907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513907">(Jun 06 2019 at 19:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> IMO the fact that the test is failing is by design</p>



<a name="167513915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513915">(Jun 06 2019 at 19:22)</a>:</h4>
<p>it could never pass on its own</p>



<a name="167513918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513918">(Jun 06 2019 at 19:22)</a>:</h4>
<p><span class="user-mention" data-user-id="133692">@QuietMisdreavus</span> that might be recent enough for pre-existing builds</p>



<a name="167513936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513936">(Jun 06 2019 at 19:22)</a>:</h4>
<p>what's the tool to install master builds?</p>



<a name="167513965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167513965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167513965">(Jun 06 2019 at 19:23)</a>:</h4>
<p>wait, found it <a href="https://github.com/kennytm/rustup-toolchain-install-master" target="_blank" title="https://github.com/kennytm/rustup-toolchain-install-master">https://github.com/kennytm/rustup-toolchain-install-master</a></p>



<a name="167514707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167514707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167514707">(Jun 06 2019 at 19:31)</a>:</h4>
<p>okay yeah, it's the pulldown upgrade</p>



<a name="167514738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167514738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167514738">(Jun 06 2019 at 19:31)</a>:</h4>
<p>so just a bug that's not fixed by the 0.5.2 bump?</p>



<a name="167514761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167514761" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167514761">(Jun 06 2019 at 19:31)</a>:</h4>
<p>the upgrade caused it to detect all the code blocks that are currently only filled with <code>#![doc(include)]</code> attributes, since those don't have blank lines between them, and because of that it was able to keep parsing to the last code block</p>



<a name="167514765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167514765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167514765">(Jun 06 2019 at 19:31)</a>:</h4>
<p>i don't think it's our bug</p>



<a name="167514770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167514770" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167514770">(Jun 06 2019 at 19:32)</a>:</h4>
<p>i think the test is bad</p>



<a name="167514825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167514825" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167514825">(Jun 06 2019 at 19:32)</a>:</h4>
<p>(the test in <code>display-as</code>, i mean)</p>



<a name="167515109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515109">(Jun 06 2019 at 19:36)</a>:</h4>
<p>the test wasn't even running before, but it was clearly meant to</p>



<a name="167515160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515160" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515160">(Jun 06 2019 at 19:36)</a>:</h4>
<p>so the bug was that it wasn't being detected before</p>



<a name="167515341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515341" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515341">(Jun 06 2019 at 19:39)</a>:</h4>
<p>like, here's the doctest from <code>display-as</code>: <a href="https://github.com/droundy/display-as/blob/6ada57815a2a1c6be784cd8badd9e9c9d60ec445/display-as/src/lib.rs#L189-L217" target="_blank" title="https://github.com/droundy/display-as/blob/6ada57815a2a1c6be784cd8badd9e9c9d60ec445/display-as/src/lib.rs#L189-L217">https://github.com/droundy/display-as/blob/6ada57815a2a1c6be784cd8badd9e9c9d60ec445/display-as/src/lib.rs#L189-L217</a></p>



<a name="167515413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515413">(Jun 06 2019 at 19:40)</a>:</h4>
<p>the code is using <code>class.html</code> as a template: <a href="https://github.com/droundy/display-as/blob/6ada57815a2a1c6be784cd8badd9e9c9d60ec445/display-as/src/class.html" target="_blank" title="https://github.com/droundy/display-as/blob/6ada57815a2a1c6be784cd8badd9e9c9d60ec445/display-as/src/class.html">https://github.com/droundy/display-as/blob/6ada57815a2a1c6be784cd8badd9e9c9d60ec445/display-as/src/class.html</a></p>



<a name="167515430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515430">(Jun 06 2019 at 19:40)</a>:</h4>
<p>this test can never pass as-is because of the comment present in the doctest</p>



<a name="167515465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515465">(Jun 06 2019 at 19:41)</a>:</h4>
<p>so to an extent both a crate bug (no <code>ignore</code> on the test) and also a regression</p>



<a name="167515589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515589" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515589">(Jun 06 2019 at 19:42)</a>:</h4>
<p>right, the regression in this case is that doctests that used to be ignored by a bug in pulldown are now being run</p>



<a name="167515629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515629" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515629">(Jun 06 2019 at 19:43)</a>:</h4>
<p>i'm... not sure how to handle that &gt;_&gt;</p>



<a name="167515740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515740">(Jun 06 2019 at 19:44)</a>:</h4>
<p>I think if there's not too many cases of it and because doc tests don't affect downstream users we can probably just ping the author and let it slide</p>



<a name="167515765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167515765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167515765">(Jun 06 2019 at 19:45)</a>:</h4>
<p>otherwise we'd want to do the same migration path as we had with hoedown -&gt; pulldown but I'd really rather not</p>



<a name="167516113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167516113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> QuietMisdreavus <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167516113">(Jun 06 2019 at 19:49)</a>:</h4>
<p>ah, right, we have gone through this process before</p>



<a name="167792464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167792464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167792464">(Jun 10 2019 at 20:15)</a>:</h4>
<p>it seems like the fallout is relatively limited</p>



<a name="167792510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/beta%20regressions%202019-06-06/near/167792510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/beta.20regressions.202019-06-06.html#167792510">(Jun 10 2019 at 20:16)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="133692">@QuietMisdreavus</span> for the investigation!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
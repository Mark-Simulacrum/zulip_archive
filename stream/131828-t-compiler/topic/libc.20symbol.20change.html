<html>
<head><meta charset="utf-8"><title>libc symbol change · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/libc.20symbol.20change.html">libc symbol change</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="222190885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/libc%20symbol%20change/near/222190885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> devsnek <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/libc.20symbol.20change.html#222190885">(Jan 09 2021 at 21:35)</a>:</h4>
<p>in trying to update wasi-libc, i discovered that the signature of a function was changed (<code>__wasilibc_find_relpath</code>), which kind of breaks <em>everything</em>. will the libc bindings need to be like majorly cycled or something? how can this be dealt with</p>



<a name="222620673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/libc%20symbol%20change/near/222620673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> devsnek <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/libc.20symbol.20change.html#222620673">(Jan 13 2021 at 18:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> maybe?</p>



<a name="222622133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/libc%20symbol%20change/near/222622133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/libc.20symbol.20change.html#222622133">(Jan 13 2021 at 18:10)</a>:</h4>
<p>I don't know about the <code>libc</code> crate itself, but there's a PR to update wasi-libc in rust-lang/rust already (been there for a few months)</p>



<a name="222635934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/libc%20symbol%20change/near/222635934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> devsnek <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/libc.20symbol.20change.html#222635934">(Jan 13 2021 at 19:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116015">Alex Crichton</span> <a href="#narrow/stream/131828-t-compiler/topic/libc.20symbol.20change/near/222622133">said</a>:</p>
<blockquote>
<p>I don't know about the <code>libc</code> crate itself, but there's a PR to update wasi-libc in rust-lang/rust already (been there for a few months)</p>
</blockquote>
<p>thanks for pointing me to that. when i tried to make something similar, rustc would fail to build std because of the difference between <code>libc::__wasilibc_find_relpath</code> and the binding declared inline in <code>std</code></p>



<a name="222636013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/libc%20symbol%20change/near/222636013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> devsnek <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/libc.20symbol.20change.html#222636013">(Jan 13 2021 at 19:52)</a>:</h4>
<p>and there are like seven different versions of libc used in various places around the std and its dependencies, all of them with the old symbol</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
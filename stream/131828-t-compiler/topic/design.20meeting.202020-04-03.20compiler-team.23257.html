<html>
<head><meta charset="utf-8"><title>design meeting 2020-04-03 compiler-team#257 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html">design meeting 2020-04-03 compiler-team#257</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="192806450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806450">(Apr 03 2020 at 13:51)</a>:</h4>
<p>Dear <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> -- design meeting in 9 minutes on this topic.</p>



<a name="192806568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806568" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806568">(Apr 03 2020 at 13:52)</a>:</h4>
<p>Today's topic: Cranelift backend for rustc <a href="https://github.com/rust-lang/compiler-team/issues/257" title="https://github.com/rust-lang/compiler-team/issues/257">compiler-team#257</a> </p>
<p>Details in <a href="https://hackmd.io/@bjorn3/HJL5ryFS8" title="https://hackmd.io/@bjorn3/HJL5ryFS8">this hackmd</a> (thanks <span class="user-mention" data-user-id="133247">@bjorn3</span>)</p>



<a name="192806639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806639">(Apr 03 2020 at 13:53)</a>:</h4>
<p>To start....</p>
<h1>Announcements</h1>



<a name="192806681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806681">(Apr 03 2020 at 13:53)</a>:</h4>
<p>quick note: the <code>submodule</code> question will become a <code>subtree</code> question soon so we should adjust to that (which I think is more favorable than submodules anyway)</p>



<a name="192806683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806683">(Apr 03 2020 at 13:53)</a>:</h4>
<ul>
<li>Major Change Proposal (should have been on Thursday agenda): Use git subtree instead of git submodule for external deps: <a href="https://github.com/rust-lang/compiler-team/issues/266" title="https://github.com/rust-lang/compiler-team/issues/266">https://github.com/rust-lang/compiler-team/issues/266</a></li>
</ul>



<a name="192806695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806695">(Apr 03 2020 at 13:53)</a>:</h4>
<p>(speak of the devil)</p>



<a name="192806838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806838" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806838">(Apr 03 2020 at 13:54)</a>:</h4>
<p>Maybe we should think of some evaluation plan for the subtree thing</p>



<a name="192806849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806849">(Apr 03 2020 at 13:54)</a>:</h4>
<p>like how much time do we wait until we apply this to Miri?</p>



<a name="192806858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806858">(Apr 03 2020 at 13:54)</a>:</h4>
<p>I think we should not derail this meeting with that :)</p>



<a name="192806864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806864">(Apr 03 2020 at 13:54)</a>:</h4>
<p>1 month maybe?</p>



<a name="192806869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806869">(Apr 03 2020 at 13:54)</a>:</h4>
<p>i even just noticed at the end of the hackmd regarding cg_clif it asks "should this be a submodule or &lt;monorepo&gt;"</p>



<a name="192806910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806910" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806910">(Apr 03 2020 at 13:55)</a>:</h4>
<p>so arguably we can spend a <em>little</em> time talking about our general policy here</p>



<a name="192806927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806927" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806927">(Apr 03 2020 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> fair point; I'll add comments to the MCP issue instead</p>



<a name="192806980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806980" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806980">(Apr 03 2020 at 13:55)</a>:</h4>
<p>(but it can perhaps wait until the end.)</p>



<a name="192806984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192806984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192806984">(Apr 03 2020 at 13:55)</a>:</h4>
<p>I think whether monorepo or submodule/subtree is a good question to address, but not "should it be subtree or submodule"</p>



<a name="192807063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807063" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807063">(Apr 03 2020 at 13:56)</a>:</h4>
<p>i.e. IMO subtree or submodule is an implementation detail, though an important one, and we should either do one or the other (globally, most likely)</p>



<a name="192807092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807092" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807092">(Apr 03 2020 at 13:56)</a>:</h4>
<p>I mostly agree with <span class="user-mention" data-user-id="116122">@simulacrum</span> , but the the differences between submodule and subtree may be relevant to the decision</p>



<a name="192807120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807120">(Apr 03 2020 at 13:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192806681" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192806681">said</a>:</p>
<blockquote>
<p>quick note: the <code>submodule</code> question will become a <code>subtree</code> question soon so we should adjust to that (which I think is more favorable than submodules anyway)</p>
</blockquote>
<p>that's what I was saying here heh</p>



<a name="192807124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807124">(Apr 03 2020 at 13:56)</a>:</h4>
<p>e.g. i'd hate for us to say "it has to be in-tree because submodule is so painful", and then later determine we'll be switching to subtree</p>



<a name="192807156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807156">(Apr 03 2020 at 13:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192807120" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192807120">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192806681" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192806681">said</a>:</p>
<blockquote>
<p>quick note: the <code>submodule</code> question will become a <code>subtree</code> question soon so we should adjust to that (which I think is more favorable than submodules anyway)</p>
</blockquote>
<p>that's what I was saying here heh</p>
</blockquote>
<p>ah that was definitely not clear to me</p>



<a name="192807173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807173">(Apr 03 2020 at 13:57)</a>:</h4>
<p>yeah my assumption was that the <code>subtree</code> MCP would go through</p>



<a name="192807176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807176" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807176">(Apr 03 2020 at 13:57)</a>:</h4>
<p>and that phrasing presupposes the switch</p>



<a name="192807187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807187" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807187">(Apr 03 2020 at 13:57)</a>:</h4>
<p>right</p>



<a name="192807285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807285">(Apr 03 2020 at 13:58)</a>:</h4>
<p>Although I think there are good arguments for "a codegen backend is different, its not a tool, it should be in tree"</p>



<a name="192807287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807287" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807287">(Apr 03 2020 at 13:58)</a>:</h4>
<p>anyway, as long as everyone is aware that we <em>might</em> switch to <code>subtree</code>, that should be enough to inform subsequent discussion</p>



<a name="192807290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807290" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807290">(Apr 03 2020 at 13:58)</a>:</h4>
<p>I <em>do</em> think it's highly likely we'll be switching to something like subtrees soon, and evaluating this can be done on the basis of a positive decision there. (Whether that's subtree or some other similar tooling, I think it's clear we want something like it).</p>



<a name="192807425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807425" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807425">(Apr 03 2020 at 13:59)</a>:</h4>
<p>my opinion is we should try to have <code>cg_clif</code> as a <code>subtree</code> for a while and only move upstream at some "feature-parity" milestone or w/e</p>



<a name="192807450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807450">(Apr 03 2020 at 13:59)</a>:</h4>
<p>just to facilitate development if <span class="user-mention" data-user-id="133247">@bjorn3</span> primarily prefers out-of-tree</p>



<a name="192807462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807462" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807462">(Apr 03 2020 at 13:59)</a>:</h4>
<p>Yeah I agree; directly into tree is a bit hasty <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="192807471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807471" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807471">(Apr 03 2020 at 13:59)</a>:</h4>
<p>Sorry for being late.</p>



<a name="192807521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807521">(Apr 03 2020 at 14:00)</a>:</h4>
<p>you're not late.</p>



<a name="192807537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807537">(Apr 03 2020 at 14:00)</a>:</h4>
<p>we're absurdly early</p>



<a name="192807555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807555">(Apr 03 2020 at 14:00)</a>:</h4>
<p>Now I notice :)</p>



<a name="192807558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807558" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Williams <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807558">(Apr 03 2020 at 14:00)</a>:</h4>
<p><em>lurking</em> but hello everyone</p>



<a name="192807720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807720">(Apr 03 2020 at 14:01)</a>:</h4>
<p>if things had gone differently (around the time of the <code>rustc_codegen_ssa</code> split) we might've had it in-tree and father along by now but we didn't and <span class="user-mention" data-user-id="133247">@bjorn3</span> has done a lot of work on this so I think we should try to avoid hindering that until circumstances change</p>



<a name="192807823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807823">(Apr 03 2020 at 14:02)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> ... design meeting starting now. There's already been some pre-chatter about modules/subtrees/etc. Let's give a few minutes for folks to gather. Any further <strong>announcements</strong>?</p>



<a name="192807895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192807895" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192807895">(Apr 03 2020 at 14:02)</a>:</h4>
<ul>
<li>I spent some time finishing up the 'major change proposal RFC' this morning. Take a look at <a class="stream-topic" data-stream-id="185694" href="/#narrow/stream/185694-t-compiler.2Fwg-meta/topic/MCP.20process.20RFC.20ready.3F">#t-compiler/wg-meta &gt; MCP process RFC ready?</a> if you'd like</li>
</ul>



<a name="192808178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808178">(Apr 03 2020 at 14:05)</a>:</h4>
<p>Shall we get started?</p>



<a name="192808192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808192">(Apr 03 2020 at 14:05)</a>:</h4>
<p>Some potential additional design questions for the agenda:</p>
<ul>
<li>When do we start gating UI tests on cranelift? Should we have some compiletest flag for that?</li>
<li>Should we start perftesting the cranelift backend?</li>
</ul>



<a name="192808233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808233">(Apr 03 2020 at 14:05)</a>:</h4>
<p>Can you add those to the end of the hackmd?</p>



<a name="192808259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808259" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808259">(Apr 03 2020 at 14:06)</a>:</h4>
<p>sure</p>



<a name="192808358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808358">(Apr 03 2020 at 14:06)</a>:</h4>
<p>I guess let's start with a brief overview of the cranelift backend, history / status? There's a good detailed rundown of the bugs and things in <a href="https://hackmd.io/VnVX5bEHR268SDH4R7izLw?view" title="https://hackmd.io/VnVX5bEHR268SDH4R7izLw?view">the hackmd</a>, but I figure it's good to bring people a bit up to speed</p>



<a name="192808392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808392">(Apr 03 2020 at 14:07)</a>:</h4>
<p>(I for one had a few questions about the reference to "JIT" compilation, for example)</p>



<a name="192808441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808441">(Apr 03 2020 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> do you want to talk a bit about that?</p>



<a name="192808529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808529">(Apr 03 2020 at 14:08)</a>:</h4>
<p>(I guess I'm thinking of some of the stuff that's in the "motivation")</p>



<a name="192808600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808600" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808600">(Apr 03 2020 at 14:08)</a>:</h4>
<blockquote>
<p>Cranelift has the potential to improve compilation time, as it is optimized for compilation time as opposed to being optimized for good optimizations like LLVM. Over the course of the past ~1.5 year I have been working on a Cranelift based codegen backend for rustc (rustc_codegen_cranelift or cg_clif for short). It is currently complete enough to compile many programs. While there are cases where LLVM is faster, Cranelift is already faster than LLVM in many cases.</p>
</blockquote>



<a name="192808660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808660">(Apr 03 2020 at 14:09)</a>:</h4>
<p>Basically the main goal remains having an alternative backend that could be used for faster, non-optimized builds?</p>



<a name="192808686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808686" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808686">(Apr 03 2020 at 14:09)</a>:</h4>
<p>Yes</p>



<a name="192808892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192808892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192808892">(Apr 03 2020 at 14:10)</a>:</h4>
<p>Can you say a bit about how it's loaded and built today? I have a vague understanding but I'd like to understand it a bit better. What I know is roughly</p>
<ul>
<li>we have an interface for backends that is also used by LLVM, and we've been factoring out logic that can be shraed across backends</li>
</ul>



<a name="192809024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809024" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809024">(Apr 03 2020 at 14:10)</a>:</h4>
<ul>
<li>it is being developed in a separate repository... and we have a mechanism to link in alternative backends as a dll? Or is it a custom wrapper around rustc?</li>
</ul>



<a name="192809070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809070">(Apr 03 2020 at 14:11)</a>:</h4>
<p>I'm not sure how much we've removed, we used to have a way to use an alternative codegen backend for <code>emscripten</code> because it needed an older (modified) LLVM</p>



<a name="192809099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809099" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809099">(Apr 03 2020 at 14:11)</a>:</h4>
<p>It is build as a normal dylib. When you pass -Zcodegen-backend=/path/to/dylib to rustc, it will dlopen the specified dylib and call <code>__rustc_codegen_backend</code>, which returns a <code>Box&lt;dyn CodegenBackend&gt;</code></p>



<a name="192809122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809122" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809122">(Apr 03 2020 at 14:11)</a>:</h4>
<p>and it relied on loading dylibs from the sysroot (or alternatively, a full path to a dylib)</p>



<a name="192809144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809144">(Apr 03 2020 at 14:11)</a>:</h4>
<p>so we still have the functionality then, makes sense</p>



<a name="192809152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809152">(Apr 03 2020 at 14:11)</a>:</h4>
<p>For me, another motivation is independence from LLVM and their goals (which tend towards C++'s needs)</p>



<a name="192809240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809240">(Apr 03 2020 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> I am not sure if the sysroot part still works, but the full path version is what I use.</p>



<a name="192809313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809313" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809313">(Apr 03 2020 at 14:12)</a>:</h4>
<p>OK. That's helpful.</p>



<a name="192809367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Williams <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809367">(Apr 03 2020 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> are you still the only person working on this backend?</p>



<a name="192809390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809390" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809390">(Apr 03 2020 at 14:13)</a>:</h4>
<p>Yes</p>



<a name="192809409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809409">(Apr 03 2020 at 14:13)</a>:</h4>
<p>and separately, <code>rustc_codegen_ssa</code> was an attempt years ago at creating a shared API that both LLVM and Cranelift can implement to build some low-level SSA IR (with load/store for memory accesses) to codegen MIR into</p>



<a name="192809417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809417" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809417">(Apr 03 2020 at 14:13)</a>:</h4>
<p>So far I have only received a few small pull requests</p>



<a name="192809466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809466">(Apr 03 2020 at 14:14)</a>:</h4>
<p>So I guess the current status is that things 'mostly work' but there's a number of missing features, partly (mostly?) because of limitations of cranelift, right?</p>



<a name="192809477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809477">(Apr 03 2020 at 14:14)</a>:</h4>
<p>the <code>rustc_codegen_ssa</code> effort was started by @dmerigoux and later <span class="user-mention" data-user-id="133247">@bjorn3</span> improved it further, IIRC</p>



<a name="192809543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809543">(Apr 03 2020 at 14:14)</a>:</h4>
<p>I use some of the parts of <code>rustc_codegen_ssa</code> like the linker code, but the the function builder part is still too much tied to LLVM.</p>



<a name="192809587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809587">(Apr 03 2020 at 14:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192809466" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192809466">said</a>:</p>
<blockquote>
<p>So I guess the current status is that things 'mostly work' but there's a number of missing features, partly (mostly?) because of limitations of cranelift, right?</p>
</blockquote>
<p>Yes</p>



<a name="192809702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809702">(Apr 03 2020 at 14:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192809543" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192809543">said</a>:</p>
<blockquote>
<p>I use some of the parts of <code>rustc_codegen_ssa</code> like the linker code, but the the function builder part is still too much tied to LLVM.</p>
</blockquote>
<p>oh we should be fixing those, maybe we should do a better job at tracking what's too LLVM-specific</p>



<a name="192809754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809754">(Apr 03 2020 at 14:15)</a>:</h4>
<p>OK. I'd like to hear a bit about the motivations to bring things in tree -- what problems are we hoping to fix :) (seems like some are obvious, but I figure good to state them explicitly)</p>



<a name="192809821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809821">(Apr 03 2020 at 14:16)</a>:</h4>
<p>It seems like one of them is probably building a bigger maintainer base :)</p>



<a name="192809852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809852" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809852">(Apr 03 2020 at 14:16)</a>:</h4>
<p>That would be nice :)</p>



<a name="192809867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809867">(Apr 03 2020 at 14:16)</a>:</h4>
<p>And maybe getting more serious about the "backend-independent parts" of the code?</p>



<a name="192809883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192809883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192809883">(Apr 03 2020 at 14:16)</a>:</h4>
<p>(i.e., what <span class="user-mention" data-user-id="119009">@eddyb</span> just said)</p>



<a name="192810062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Williams <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810062">(Apr 03 2020 at 14:17)</a>:</h4>
<p>Sorry if this is offtopic, but does having a cranelift backend for development help with Debugging symbols/information? <br>
This is a major painpoint for many users right now? I hear some of it is to do with LLVM optimising away too much</p>



<a name="192810168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810168">(Apr 03 2020 at 14:18)</a>:</h4>
<p>LLVM should be optimizing away none of it if optimizations are off</p>



<a name="192810214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810214" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810214">(Apr 03 2020 at 14:18)</a>:</h4>
<p>Cranelift doesn't really have optimizations AFAIK the way LLVM does</p>



<a name="192810224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810224">(Apr 03 2020 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="244614">@Jason Williams</span> Line debuginfo is supported, though things like is_stmt are not set. Other debuginfo is not implemented yet</p>



<a name="192810264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810264">(Apr 03 2020 at 14:18)</a>:</h4>
<p>long-term, maybe Cranelift can be better than LLVM by providing debuginfo-preserving optimizations, but I don't think it's that relevant right now</p>



<a name="192810298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810298" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Williams <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810298">(Apr 03 2020 at 14:19)</a>:</h4>
<p>ok thanks</p>



<a name="192810348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810348">(Apr 03 2020 at 14:19)</a>:</h4>
<p>Cranelift has DCE, LICM (broken with jumptables) and a few other simple optimizations</p>



<a name="192810361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810361" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810361">(Apr 03 2020 at 14:19)</a>:</h4>
<p>(Some of the debug complains I've seen might be specific to LLVM's support for CodeView/pdb on Windows)</p>



<a name="192810460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810460" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810460">(Apr 03 2020 at 14:20)</a>:</h4>
<p>CodeView/pdb support is not implemented in cg_clif. As far as I know there is no writer crate for it.</p>



<a name="192810607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810607" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810607">(Apr 03 2020 at 14:21)</a>:</h4>
<p>I guess the meta question that I'm thinking about is what our "overall strategy" is around alternative backends. Like, how much do we want to prioritize this, relative to other goals? Maybe that's not something we can decide in this meeting.</p>
<p>My sense though is that it's a "background task", that we'd like to support "increasingly well", but not a "first class" goal that we really want to pour total energy into.</p>



<a name="192810688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810688" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810688">(Apr 03 2020 at 14:21)</a>:</h4>
<p>I'm thinking about the first "key design question" raised in the hackmd, in particular:</p>
<ul>
<li>Should we support cg_clif in tree?<ul>
<li>If so, use a submodule or merge it into rust-lang/rust? (See also <a href="https://github.com/rust-lang/compiler-team/issues/257" title="https://github.com/rust-lang/compiler-team/issues/257">https://github.com/rust-lang/compiler-team/issues/257</a>)</li>
</ul>
</li>
</ul>



<a name="192810741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810741">(Apr 03 2020 at 14:22)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> Do you find that there's a lot of churn on the parts of rustc you integrate with? How painful are rebases on top of the latest rustc usually? Might be another reason to do something in-tree...</p>



<a name="192810802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810802">(Apr 03 2020 at 14:22)</a>:</h4>
<blockquote>
<p>My sense though is that it's a "background task", that we'd like to support "increasingly well", but not a "first class" goal that we really want to pour total energy into.</p>
</blockquote>
<p>I think that makes sense in terms of work hours; but personally I do think that when problems are created for the cg_clif backend, we should prioritize cg_clif highly</p>



<a name="192810847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810847">(Apr 03 2020 at 14:23)</a>:</h4>
<p>It would interesting to know how the answer to the "in tree" question affects the "broadening the contributor set" goal</p>



<a name="192810861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810861">(Apr 03 2020 at 14:23)</a>:</h4>
<p>I could imagine it helping or hurting</p>



<a name="192810871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192810871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192810871">(Apr 03 2020 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> There is not that much churn. Most changes are simple search-replace fixes. There are rarely any changes that need significant fixes</p>



<a name="192811097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811097" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811097">(Apr 03 2020 at 14:24)</a>:</h4>
<p>Maybe it's useful to enumerate some of the "variables"? I think we have a good start in the document already. I'm thinking of:</p>
<ul>
<li>subtree vs fully in tree</li>
<li>do we ensure it builds with CI?</li>
<li>do we run tests in CI? (e.g., with compare-mode)</li>
<li>do test failures block CI?</li>
</ul>



<a name="192811183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811183">(Apr 03 2020 at 14:25)</a>:</h4>
<p><code>git subtree</code> would give us the ability to change the in-tree version as we do breaking changes</p>



<a name="192811216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811216">(Apr 03 2020 at 14:25)</a>:</h4>
<p>and then the separate repository can get sync'd from that</p>



<a name="192811235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811235" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811235">(Apr 03 2020 at 14:25)</a>:</h4>
<p>we have a few existing models to build from, I guess:</p>
<ul>
<li>normal rustc code</li>
<li>active transitions, like when we were moving to NLL (I actually don't remember all the phasees we went through)</li>
<li>external tools like miri, clippy (currently evolving our strategy)</li>
</ul>
<p>and I'm wondering which seems to "fit best"</p>



<a name="192811243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811243">(Apr 03 2020 at 14:25)</a>:</h4>
<p>I prefer subtree.</p>



<a name="192811258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811258">(Apr 03 2020 at 14:25)</a>:</h4>
<blockquote>
<p>do test failures block CI?</p>
</blockquote>
<p>We could solve this with <code>// ignore-cranelift-backend</code></p>



<a name="192811267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811267">(Apr 03 2020 at 14:26)</a>:</h4>
<p>OK, it sounds like this is roughly "external tool" integration</p>



<a name="192811340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811340" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811340">(Apr 03 2020 at 14:26)</a>:</h4>
<p>yeah, at least for the initial stages</p>



<a name="192811353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811353">(Apr 03 2020 at 14:26)</a>:</h4>
<p>But I guess that is the next question -- should we be running tests? (Maybe not yet?)</p>



<a name="192811358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811358">(Apr 03 2020 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> would you like to see it move into tree in maybe 1.5 years or so though?</p>



<a name="192811367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811367">(Apr 03 2020 at 14:26)</a>:</h4>
<p>For LLVM only tests <code>// only-llvm-backend</code> would be nice.</p>



<a name="192811412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811412" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811412">(Apr 03 2020 at 14:26)</a>:</h4>
<p>Maybe we should integrate support for running tests easily into <code>x.py</code>, but not gate CI on it?</p>



<a name="192811445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811445" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811445">(Apr 03 2020 at 14:27)</a>:</h4>
<p>I like that, to start</p>



<a name="192811474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811474">(Apr 03 2020 at 14:27)</a>:</h4>
<p>I think we can reasonably gate in maybe 1 month or so and ignore the relevant tests</p>



<a name="192811511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811511">(Apr 03 2020 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="126931">centril</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192811358" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192811358">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> would you like to see it move into tree in maybe 1.5 years or so though?</p>
</blockquote>
<p>I don't know: <a href="https://internals.rust-lang.org/t/experience-report-contributing-to-rust-lang-rust/12012/45" title="https://internals.rust-lang.org/t/experience-report-contributing-to-rust-lang-rust/12012/45">https://internals.rust-lang.org/t/experience-report-contributing-to-rust-lang-rust/12012/45</a></p>



<a name="192811649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811649">(Apr 03 2020 at 14:28)</a>:</h4>
<p>I would like to be informed of in what the delta in the tests are in terms of support, and when a new feature causes problems for the cranelift backend</p>



<a name="192811676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811676">(Apr 03 2020 at 14:28)</a>:</h4>
<p>Hmm, let's not worry about 1.5 years from now. I personally think this question will be informed by the developments about library-ification and the like.</p>



<a name="192811723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811723">(Apr 03 2020 at 14:28)</a>:</h4>
<p>Sure, let's not <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="192811779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811779" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811779">(Apr 03 2020 at 14:29)</a>:</h4>
<p>It seems clear we're not moving into tree now at least</p>



<a name="192811787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811787" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811787">(Apr 03 2020 at 14:29)</a>:</h4>
<p>It seems like so far we've sketched out:</p>
<ul>
<li>Add via "git subtree" and gate on it building :)</li>
<li>Integrate some kind of compare-mode=cranelift for running tests, and add a way to skip LLVM-specific tests</li>
</ul>



<a name="192811792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811792" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811792">(Apr 03 2020 at 14:29)</a>:</h4>
<p>Since no one is arguing for that</p>



<a name="192811825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811825" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811825">(Apr 03 2020 at 14:29)</a>:</h4>
<p>I want to double-check: <em>are</em> we gating on it building? That seems like it won't be a big hurdle, based on what <span class="user-mention" data-user-id="133247">@bjorn3</span> said</p>



<a name="192811867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811867">(Apr 03 2020 at 14:29)</a>:</h4>
<p>I think we should personally, with opt-outs in tests</p>



<a name="192811873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811873" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811873">(Apr 03 2020 at 14:29)</a>:</h4>
<p>wait, does "in tree" include `git subtree" ?</p>



<a name="192811918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811918">(Apr 03 2020 at 14:30)</a>:</h4>
<p>I guess it does</p>



<a name="192811923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811923" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811923">(Apr 03 2020 at 14:30)</a>:</h4>
<p>oops sorry</p>



<a name="192811934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811934">(Apr 03 2020 at 14:30)</a>:</h4>
<p>I meant "git subtree"</p>



<a name="192811939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811939">(Apr 03 2020 at 14:30)</a>:</h4>
<p>let me edit</p>



<a name="192811954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811954">(Apr 03 2020 at 14:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> in-tree means not subtree/submodule</p>



<a name="192811985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192811985" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192811985">(Apr 03 2020 at 14:30)</a>:</h4>
<p>okay well then that's not what <span class="user-mention" data-user-id="133247">@bjorn3</span> asked for</p>



<a name="192812003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812003">(Apr 03 2020 at 14:30)</a>:</h4>
<p>yeah, I edited</p>



<a name="192812028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812028" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812028">(Apr 03 2020 at 14:30)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> feel free to withdraw your <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> emoji if that changes your opinion</p>



<a name="192812034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812034">(Apr 03 2020 at 14:30)</a>:</h4>
<p>but I think it was what you were saying :)</p>



<a name="192812084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812084" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812084">(Apr 03 2020 at 14:31)</a>:</h4>
<p>Yeah, I assumed you meant <code>subtree</code> with in-tree.</p>



<a name="192812129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812129">(Apr 03 2020 at 14:31)</a>:</h4>
<p>One of the questions that comes up is "who will sync the subtree"</p>



<a name="192812162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812162">(Apr 03 2020 at 14:31)</a>:</h4>
<p>I'm assuming the answer is <span class="user-mention" data-user-id="133247">@bjorn3</span> or other people working on the backend</p>



<a name="192812174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812174" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812174">(Apr 03 2020 at 14:32)</a>:</h4>
<p>with Clippy it would be the Clippy maintainers</p>



<a name="192812284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812284" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812284">(Apr 03 2020 at 14:32)</a>:</h4>
<p>How frequently should the syncing to rust-lang/rust be?</p>



<a name="192812319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812319" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812319">(Apr 03 2020 at 14:32)</a>:</h4>
<p>we don't know?</p>



<a name="192812338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812338" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812338">(Apr 03 2020 at 14:33)</a>:</h4>
<p>If you're not hitting a lot of issues now doing <del>rebases</del> rustups, it probably doesn't need to be that frequent.</p>



<a name="192812421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812421" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812421">(Apr 03 2020 at 14:33)</a>:</h4>
<p>I am not doing rebases. I just add a rustup commit. (cg_clif is not a fork of the rust repo)</p>



<a name="192812458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812458" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812458">(Apr 03 2020 at 14:34)</a>:</h4>
<p>with the subtrree thing, if people break the cranelift backend, then they have to fix it in their PR</p>



<a name="192812579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Williams <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812579">(Apr 03 2020 at 14:34)</a>:</h4>
<p>Would the PR fail if someone updated the subtree and it it doesn't build?</p>



<a name="192812586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812586">(Apr 03 2020 at 14:34)</a>:</h4>
<p>Relatively big rustup commit: <a href="https://github.com/bjorn3/rustc_codegen_cranelift/commit/ac1c5d69544450d30785d001224f7233da48cbda" title="https://github.com/bjorn3/rustc_codegen_cranelift/commit/ac1c5d69544450d30785d001224f7233da48cbda">https://github.com/bjorn3/rustc_codegen_cranelift/commit/ac1c5d69544450d30785d001224f7233da48cbda</a><br>
More normal rustup commit: <a href="https://github.com/bjorn3/rustc_codegen_cranelift/commit/786c7d8d8ce3a21a394404c41a01a666c26071f3" title="https://github.com/bjorn3/rustc_codegen_cranelift/commit/786c7d8d8ce3a21a394404c41a01a666c26071f3">https://github.com/bjorn3/rustc_codegen_cranelift/commit/786c7d8d8ce3a21a394404c41a01a666c26071f3</a></p>



<a name="192812680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812680">(Apr 03 2020 at 14:35)</a>:</h4>
<p>subtree updates are just regular PRs</p>



<a name="192812711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812711">(Apr 03 2020 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="244614">@Jason Williams</span>  it should if we gate on cranelift</p>



<a name="192812716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192812716" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192812716">(Apr 03 2020 at 14:35)</a>:</h4>
<p>so yes, they would fail if the update isn't compatible with the rest</p>



<a name="192813036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813036" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813036">(Apr 03 2020 at 14:37)</a>:</h4>
<p>OK, so, if the module is a git subtree, we're saving <span class="user-mention" data-user-id="133247">@bjorn3</span> the work of rebasing, but that's not that much. We're adding the ability to run tests, which is relatively easy for us to do, but if we don't gate CI on it, that updating will still have to be done by <span class="user-mention" data-user-id="133247">@bjorn3</span> or other cranelift-backend maintainers.</p>



<a name="192813054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813054" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813054">(Apr 03 2020 at 14:37)</a>:</h4>
<p>I'm trying to think about the concrete benefits here</p>



<a name="192813134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813134">(Apr 03 2020 at 14:38)</a>:</h4>
<p>we're not gating CI on it?</p>



<a name="192813177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813177" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813177">(Apr 03 2020 at 14:38)</a>:</h4>
<p>I am also thinking a bit about the "commitment and maintainance" -- I don't think we're ready to take on a "high commitment" thing, but I think doing support is good. Some other steps we could consider are creating an experimental working group, i.e., a zulip stream to talk about the development</p>



<a name="192813189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813189" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813189">(Apr 03 2020 at 14:38)</a>:</h4>
<p>I thought we were, with an opt-out mechanism for tests</p>



<a name="192813198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813198" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813198">(Apr 03 2020 at 14:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="126931">centril</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192813134" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192813134">said</a>:</p>
<blockquote>
<p>we're not gating CI on it?</p>
</blockquote>
<p>this was a question up above</p>



<a name="192813206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813206" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813206">(Apr 03 2020 at 14:38)</a>:</h4>
<p>Well, that wasn't in my list, let's ask? Do we want to gate CI on it.</p>



<a name="192813264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813264">(Apr 03 2020 at 14:38)</a>:</h4>
<p>I <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192811412" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192811412">had proposed</a> making it <em>easy</em> to opt-in to run the tests via <code>x.py</code>, but not making it the default nor gating CI on it</p>



<a name="192813285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813285">(Apr 03 2020 at 14:38)</a>:</h4>
<p>at least initially</p>



<a name="192813293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813293">(Apr 03 2020 at 14:38)</a>:</h4>
<p>(in particular, having it as an active WG might help to get folks to drop in and offer to help)</p>



<a name="192813371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813371">(Apr 03 2020 at 14:39)</a>:</h4>
<p>Yeah, let's figure out the test question. (I guess the other variable is distribution -- but I think we're pretty clearly not ready to be distributing, right?)</p>



<a name="192813429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813429" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813429">(Apr 03 2020 at 14:39)</a>:</h4>
<p>I'd prefer to catch problems around e.g. unsized locals and whatnot early in CI and make it easy to grep for what tests work and don't</p>



<a name="192813556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813556">(Apr 03 2020 at 14:40)</a>:</h4>
<p>distributing as nightly only component is possible given that many programs work</p>



<a name="192813600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813600" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813600">(Apr 03 2020 at 14:40)</a>:</h4>
<p>I'd prefer not to gate CI on it until we have a firmer commitment to shipping it</p>



<a name="192813602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813602" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813602">(Apr 03 2020 at 14:40)</a>:</h4>
<p><a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/247" title="https://github.com/bjorn3/rustc_codegen_cranelift/issues/247">https://github.com/bjorn3/rustc_codegen_cranelift/issues/247</a></p>



<a name="192813613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813613">(Apr 03 2020 at 14:41)</a>:</h4>
<p>Implications of gating:</p>
<ul>
<li>ensures that test annotations are up to date -- though we can perhaps encouage folks to "just add skip cranelift" annotations if anything is non-trivial</li>
<li>means that we are not only ensuring that things <em>build</em> but ensuring that they work as well as they ever did</li>
<li>but that in turn means more work shared out, higher level of commitment</li>
<li>longer CI and build times (edited in after the fact)</li>
</ul>



<a name="192813792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813792" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813792">(Apr 03 2020 at 14:42)</a>:</h4>
<p>I know compare-mode=nll was/is super painful because it's not on by default and (roughly) doubles test time, and this seems like we'd at least initially have even more tests affected?</p>



<a name="192813802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813802">(Apr 03 2020 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> if we do that, should we revisit at some point?</p>



<a name="192813832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813832">(Apr 03 2020 at 14:42)</a>:</h4>
<p>of course I would want to revisit it</p>



<a name="192813853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813853">(Apr 03 2020 at 14:42)</a>:</h4>
<p>namely, once the feature set is more filled out</p>



<a name="192813857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813857" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813857">(Apr 03 2020 at 14:42)</a>:</h4>
<p>so I personally would rather not gate until we have parity etc</p>



<a name="192813869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813869">(Apr 03 2020 at 14:42)</a>:</h4>
<p>sure, but like in some scheduled time <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="192813878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813878" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813878">(Apr 03 2020 at 14:42)</a>:</h4>
<p>That was a concern of mine, I should've added it -- CI time</p>



<a name="192813882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813882">(Apr 03 2020 at 14:42)</a>:</h4>
<p>and we can start asking the question "shall we ship this"</p>



<a name="192813922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813922">(Apr 03 2020 at 14:43)</a>:</h4>
<p>I don't think we can afford to schedule when the feature set will be filled in</p>



<a name="192813947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813947">(Apr 03 2020 at 14:43)</a>:</h4>
<p>I don't feel ready to set a scheduled time. I feel wary of over-extending ourselves right now.</p>



<a name="192813970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192813970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192813970">(Apr 03 2020 at 14:43)</a>:</h4>
<p>There are only two workers on which cg_clif works: x86_64 Linux and x86_64 MacOS</p>



<a name="192814013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814013" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814013">(Apr 03 2020 at 14:43)</a>:</h4>
<p>If we gate on the backend building, every change to the compiler would cause <code>./x.py test</code> to rebuild the entire backend, right? How long would that take?</p>



<a name="192814030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814030" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814030">(Apr 03 2020 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192813857" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192813857">said</a>:</p>
<blockquote>
<p>so I personally would rather not gate until we have parity etc</p>
</blockquote>
<p>Fair point, but I'd also like to make sure that the LLVM backend doesn't increase the gap to parity, from my personal perspective on the lang team</p>



<a name="192814154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814154">(Apr 03 2020 at 14:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211727">Jonas Schievink</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192814013" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192814013">said</a>:</p>
<blockquote>
<p>If we gate on the backend building, every change to the compiler would cause <code>./x.py test</code> to rebuild the entire backend, right? How long would that take?</p>
</blockquote>
<p>If only cg_clif is rebuild and not it's dependencies for me ~40s in release mode with incr comp.</p>



<a name="192814250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814250">(Apr 03 2020 at 14:44)</a>:</h4>
<p>If it were easy to run the tests with cranelift via <code>x.py</code> I probably would. On the other hand, it seems weird to gate the CI for something we don't ship at all. Looking at it from a platform support perspective, that would be like tier 3 which we don't run CI for.</p>



<a name="192814322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814322">(Apr 03 2020 at 14:45)</a>:</h4>
<p>Yes, I think that's a good way to look at it. I'd be happy moving it to something more like "tier 3"</p>



<a name="192814332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814332">(Apr 03 2020 at 14:45)</a>:</h4>
<p>Similarly, we don't run clippy tests</p>



<a name="192814366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814366">(Apr 03 2020 at 14:45)</a>:</h4>
<p>(Well, maybe we do? I forget, we do for some tools maybe?)</p>



<a name="192814367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814367">(Apr 03 2020 at 14:45)</a>:</h4>
<p>it might be helpful to consider how we handled the transition to MIR</p>



<a name="192814398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814398" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814398">(Apr 03 2020 at 14:45)</a>:</h4>
<p>I was just thinking about that :) I couldn't remember very precisely</p>



<a name="192814422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814422" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814422">(Apr 03 2020 at 14:45)</a>:</h4>
<p>-Zorbit</p>



<a name="192814432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814432">(Apr 03 2020 at 14:45)</a>:</h4>
<p>we had the <code>-Z orbit</code> for that, right? <span class="user-mention" data-user-id="119009">@eddyb</span> do you remember how we handled it?</p>



<a name="192814477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814477">(Apr 03 2020 at 14:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192814332" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192814332">said</a>:</p>
<blockquote>
<p>Similarly, we don't run clippy tests</p>
</blockquote>
<p>We do, and we gate on it during the toolstate week</p>



<a name="192814511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814511">(Apr 03 2020 at 14:46)</a>:</h4>
<p>I wish I could remember, hmpf</p>



<a name="192814534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814534">(Apr 03 2020 at 14:46)</a>:</h4>
<p>I think we kind of gradually phased it in --</p>



<a name="192814546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814546">(Apr 03 2020 at 14:46)</a>:</h4>
<p>Its awesome that's we've all forgotten</p>



<a name="192814562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814562">(Apr 03 2020 at 14:46)</a>:</h4>
<p>I think we had a <code>./configure</code> flag that enabled it globally</p>



<a name="192814568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814568" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814568">(Apr 03 2020 at 14:46)</a>:</h4>
<p>it started out with specific tests, then we added orbit, then we started gating CI but not doing it by deafult, etc</p>



<a name="192814570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814570" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814570">(Apr 03 2020 at 14:46)</a>:</h4>
<p>probably means it was an incredible success</p>



<a name="192814575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814575">(Apr 03 2020 at 14:46)</a>:</h4>
<p>and I just fix every issue I could find</p>



<a name="192814602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814602" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814602">(Apr 03 2020 at 14:46)</a>:</h4>
<p>vs NLL that everyone remembers because they hated compare-mode</p>



<a name="192814605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814605">(Apr 03 2020 at 14:46)</a>:</h4>
<p>oh yeah didn't we add a separate CI builder?</p>



<a name="192814643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814643">(Apr 03 2020 at 14:46)</a>:</h4>
<p>that went full <code>-Zorbit</code></p>



<a name="192814651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814651" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814651">(Apr 03 2020 at 14:46)</a>:</h4>
<p>cg_clif tests take about 9min on gh actions</p>



<a name="192814658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814658" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814658">(Apr 03 2020 at 14:47)</a>:</h4>
<p>or maybe just for tests</p>



<a name="192814666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814666" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814666">(Apr 03 2020 at 14:47)</a>:</h4>
<p>I think compare-mode is mostly a pain cause we don't do it on PR builders</p>



<a name="192814793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814793">(Apr 03 2020 at 14:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="126931">centril</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192814477" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192814477">said</a>:</p>
<blockquote>
<p>We do, and we gate on it during the toolstate week</p>
</blockquote>
<p>(yeah, I withdraw the clippy comparison, but also that's a tool that we ship and support)</p>



<a name="192814800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814800" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814800">(Apr 03 2020 at 14:47)</a>:</h4>
<p>Actually, now that I think about it</p>



<a name="192814840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814840" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814840">(Apr 03 2020 at 14:48)</a>:</h4>
<p>the toolstate comparison may be apt</p>



<a name="192814879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814879" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814879">(Apr 03 2020 at 14:48)</a>:</h4>
<p>have we talked about not gating bors merge on it, but still having CI run the tests?</p>



<a name="192814902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814902">(Apr 03 2020 at 14:48)</a>:</h4>
<p>and then update the PR's with notice if they break it?</p>



<a name="192814915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814915">(Apr 03 2020 at 14:48)</a>:</h4>
<p>analogous to toolstate?</p>



<a name="192814956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192814956" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192814956">(Apr 03 2020 at 14:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span>  that's a good compromise <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="192815001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815001">(Apr 03 2020 at 14:48)</a>:</h4>
<p><em>if</em> we can afford it</p>



<a name="192815007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815007">(Apr 03 2020 at 14:49)</a>:</h4>
<p>in terms of CI time</p>



<a name="192815018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815018" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815018">(Apr 03 2020 at 14:49)</a>:</h4>
<p>why <em>don't</em> we run compare-mode=nll on UI builders?</p>



<a name="192815033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815033" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815033">(Apr 03 2020 at 14:49)</a>:</h4>
<p>GHA should make that possible</p>



<a name="192815035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815035">(Apr 03 2020 at 14:49)</a>:</h4>
<p>presumably CI time?</p>



<a name="192815049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815049" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815049">(Apr 03 2020 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> yeah</p>



<a name="192815071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815071" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815071">(Apr 03 2020 at 14:49)</a>:</h4>
<p>so like...why <em>would</em> we do this?</p>



<a name="192815114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815114">(Apr 03 2020 at 14:49)</a>:</h4>
<p>it seems like we should do both :)</p>



<a name="192815121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815121">(Apr 03 2020 at 14:49)</a>:</h4>
<p>My memory of the NLL thing</p>



<a name="192815143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815143">(Apr 03 2020 at 14:49)</a>:</h4>
<p>was that we originally had it on by default for everyone</p>



<a name="192815167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815167">(Apr 03 2020 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> well GHA will sorta change the CI calculus :P</p>



<a name="192815171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815171" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815171">(Apr 03 2020 at 14:49)</a>:</h4>
<p>and developers, I remember <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> in particular, raised concerns</p>



<a name="192815185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815185" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815185">(Apr 03 2020 at 14:50)</a>:</h4>
<p>2 vcpus vs. 8 vcpus</p>



<a name="192815229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815229" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815229">(Apr 03 2020 at 14:50)</a>:</h4>
<p>because it was adding <em>local testing overhead</em></p>



<a name="192815243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815243">(Apr 03 2020 at 14:50)</a>:</h4>
<p>Not CI overhead</p>



<a name="192815269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815269">(Apr 03 2020 at 14:50)</a>:</h4>
<p>and so they pushed for us to turn it off by default</p>



<a name="192815307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815307">(Apr 03 2020 at 14:50)</a>:</h4>
<p>I cannot remember anymore whether CI was a side-effect of that change</p>



<a name="192815314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815314" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815314">(Apr 03 2020 at 14:50)</a>:</h4>
<p>OK, well, we're 50 minutes in</p>



<a name="192815326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815326">(Apr 03 2020 at 14:50)</a>:</h4>
<p>or a separate deliberate decision</p>



<a name="192815363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815363">(Apr 03 2020 at 14:50)</a>:</h4>
<p>Should we summarize?</p>



<a name="192815402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815402">(Apr 03 2020 at 14:51)</a>:</h4>
<p>Maybe worth summarizing what we said, what we agreed upon, and what we didn't agree on yet</p>



<a name="192815445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815445" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815445">(Apr 03 2020 at 14:51)</a>:</h4>
<ul>
<li>git subtree and gating on builds -- general support for trying this out, I believe</li>
</ul>



<a name="192815486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815486">(Apr 03 2020 at 14:51)</a>:</h4>
<ul>
<li>extending <code>x.py test</code> with annotations oriented around backends -- general support for <em>this</em></li>
</ul>



<a name="192815586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815586">(Apr 03 2020 at 14:52)</a>:</h4>
<p>(and presumably some way to build/test the cranelift backend manually?)</p>



<a name="192815631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815631" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815631">(Apr 03 2020 at 14:52)</a>:</h4>
<ul>
<li>testing on PRs and gating on CI -- not clear</li>
</ul>



<a name="192815734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815734">(Apr 03 2020 at 14:52)</a>:</h4>
<p>concerns raised were about time, and also (I think) about the level of commitment implied, effect on contributors</p>



<a name="192815758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815758">(Apr 03 2020 at 14:53)</a>:</h4>
<p>Proposals for gating on tests where:</p>
<ul>
<li>Do it like toolstate (e.g., during the last week)</li>
<li>Only notify when breakage happens on PRs.</li>
<li>Always do it</li>
<li>Don't do it at all</li>
</ul>



<a name="192815762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815762">(Apr 03 2020 at 14:53)</a>:</h4>
<p>balanced against the benefits of keeping tests up to date</p>



<a name="192815832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815832">(Apr 03 2020 at 14:53)</a>:</h4>
<p>actually I don't think anyone talked about "blocking on it during the last week"</p>



<a name="192815878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815878" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815878">(Apr 03 2020 at 14:53)</a>:</h4>
<p>at least I don't think <span class="user-mention" data-user-id="116083">@pnkfelix</span> meant to imply that</p>



<a name="192815888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815888" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815888">(Apr 03 2020 at 14:53)</a>:</h4>
<p>(Certainly doesn't make sense for last week -- it'd be similar I think to how we gate miri toolstate -- i.e. never)</p>



<a name="192815959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815959">(Apr 03 2020 at 14:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192815878" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192815878">said</a>:</p>
<blockquote>
<p>at least I don't think <span class="user-mention silent" data-user-id="116083">pnkfelix</span> meant to imply that</p>
</blockquote>
<p>I definitely didn't want to imply that</p>



<a name="192815961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815961">(Apr 03 2020 at 14:54)</a>:</h4>
<p>Ah so there's a fourth proposal</p>



<a name="192815963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815963" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815963">(Apr 03 2020 at 14:54)</a>:</h4>
<p>If we're not shipping a rustup component, I don't know why we'd block during the last week.</p>



<a name="192815965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815965">(Apr 03 2020 at 14:54)</a>:</h4>
<p>that's my sense as well, if it's not something we're going to ship in stable, who cares what week it is?</p>



<a name="192815991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192815991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192815991">(Apr 03 2020 at 14:54)</a>:</h4>
<p>not until we ship this</p>



<a name="192816072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816072">(Apr 03 2020 at 14:54)</a>:</h4>
<p>(added the 4th proposal)</p>



<a name="192816122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816122" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816122">(Apr 03 2020 at 14:55)</a>:</h4>
<p>OK, great.</p>



<a name="192816155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816155">(Apr 03 2020 at 14:55)</a>:</h4>
<ul>
<li>The other thing we raised but didn't really discuss was creating a working group.</li>
</ul>



<a name="192816161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816161" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816161">(Apr 03 2020 at 14:55)</a>:</h4>
<p>So how do folks feel about?:</p>
<ul>
<li>Only notify when test breakage happens on PRs</li>
</ul>



<a name="192816224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816224">(Apr 03 2020 at 14:55)</a>:</h4>
<p>I want to think about it</p>



<a name="192816251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816251">(Apr 03 2020 at 14:55)</a>:</h4>
<p>I would be happy to make some decisions about that after we've taken a few other steps, too, so we have some more experience</p>



<a name="192816317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816317">(Apr 03 2020 at 14:56)</a>:</h4>
<p>(Personally I think we should get all the infrastructure in place before figuring out to what extent to gate)</p>



<a name="192816454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816454">(Apr 03 2020 at 14:57)</a>:</h4>
<p>OK, thanks everyone, productive meeting. One final question: </p>
<p>Is there someone who would be willing to go through and make a PR with minutes from this meeting?</p>



<a name="192816561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816561">(Apr 03 2020 at 14:57)</a>:</h4>
<p>I will</p>



<a name="192816569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816569">(Apr 03 2020 at 14:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192816155" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192816155">said</a>:</p>
<blockquote>
<ul>
<li>The other thing we raised but didn't really discuss was creating a working group.</li>
</ul>
</blockquote>
<p>Folks can notify <span class="user-mention" data-user-id="133247">@bjorn3</span> of their interest?</p>



<a name="192816653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816653">(Apr 03 2020 at 14:58)</a>:</h4>
<p>(Also, <span class="user-mention" data-user-id="133247">@bjorn3</span>, I think that an appropriate next step would be to make a "major change proposal" with the "consensus changes" described above described in a bit more detail.)</p>



<a name="192816745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192816745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192816745">(Apr 03 2020 at 14:58)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> re: minutes, and thanks to everyone else for attending!</p>



<a name="192911519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202020-04-03%20compiler-team%23257/near/192911519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257.html#192911519">(Apr 04 2020 at 14:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192816653" title="#narrow/stream/131828-t-compiler/topic/design.20meeting.202020-04-03.20compiler-team.23257/near/192816653">said</a>:</p>
<blockquote>
<p>(Also, <span class="user-mention silent" data-user-id="133247">bjorn3</span>, I think that an appropriate next step would be to make a "major change proposal" with the "consensus changes" described above described in a bit more detail.)</p>
</blockquote>
<p><a href="https://github.com/rust-lang/compiler-team/issues/270" title="https://github.com/rust-lang/compiler-team/issues/270">compiler-team#270</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
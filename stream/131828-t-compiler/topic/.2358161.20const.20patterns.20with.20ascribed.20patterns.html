<html>
<head><meta charset="utf-8"><title>#58161 const patterns with ascribed patterns · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html">#58161 const patterns with ascribed patterns</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="157726143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726143">(Feb 06 2019 at 21:06)</a>:</h4>
<p>hi <span class="user-mention" data-user-id="116107">@davidtwco</span></p>



<a name="157726160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726160" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726160">(Feb 06 2019 at 21:06)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="157726208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726208" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726208">(Feb 06 2019 at 21:07)</a>:</h4>
<p>so <span class="user-mention" data-user-id="116118">@Matthew Jasper</span> had a comment on your PR</p>



<a name="157726211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726211" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726211">(Feb 06 2019 at 21:07)</a>:</h4>
<blockquote>
<p>We still need them to check something like <code>Type&lt;'a&gt;::X</code> when we have <code>impl Type&lt;'static&gt; { const X: i32 = 0; ... }</code></p>
</blockquote>



<a name="157726274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726274">(Feb 06 2019 at 21:08)</a>:</h4>
<p>so you'll need to fix that</p>



<a name="157726278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726278" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726278">(Feb 06 2019 at 21:08)</a>:</h4>
<p>and also add a test for it</p>



<a name="157726368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726368">(Feb 06 2019 at 21:09)</a>:</h4>
<p>let me come up with one</p>



<a name="157726533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726533" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726533">(Feb 06 2019 at 21:11)</a>:</h4>
<p>I understood his comment as explaining why we would have a <code>AscribeUserType</code> pattern in this context, not that we'd need to check it here.</p>
<p>ie. I could see a scenario where your initial comment could be interpreted as a "should we even have "<code>AscribeUserType</code> patterns in this case?", and then he clarified it was used for checking well-formedness, and that was why we should have it - but not necessarily that we should be checking it here. </p>
<p>Perhaps I'm misunderstanding, but the checking he describes was <a href="https://github.com/rust-lang/rust/issues/55511" target="_blank" title="https://github.com/rust-lang/rust/issues/55511">#55511</a>, fixed in <a href="https://github.com/rust-lang/rust/issues/55937" target="_blank" title="https://github.com/rust-lang/rust/issues/55937">#55937</a>, which introduced this bug?</p>



<a name="157726573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726573" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726573">(Feb 06 2019 at 21:12)</a>:</h4>
<p>I may have misinterpreted it though.</p>



<a name="157726674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726674" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726674">(Feb 06 2019 at 21:13)</a>:</h4>
<p>so this function is not used in MIR typeck?</p>



<a name="157726687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726687">(Feb 06 2019 at 21:13)</a>:</h4>
<p>I think it is</p>



<a name="157726689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726689">(Feb 06 2019 at 21:13)</a>:</h4>
<p>This function is part of lowering to the MIR.</p>



<a name="157726734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726734">(Feb 06 2019 at 21:14)</a>:</h4>
<p>yea</p>



<a name="157726754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726754">(Feb 06 2019 at 21:14)</a>:</h4>
<p>so I think this can't actually be relevant</p>



<a name="157726770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726770" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726770">(Feb 06 2019 at 21:14)</a>:</h4>
<p>or is it?</p>



<a name="157726778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726778" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726778">(Feb 06 2019 at 21:14)</a>:</h4>
<p>the problem is that <em>in theory</em> a range can contain regions</p>



<a name="157726790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726790" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726790">(Feb 06 2019 at 21:14)</a>:</h4>
<p>if it is some sort of <code>&lt;Foo&lt;'a&gt; as Type&gt;::Assoc</code></p>



<a name="157726813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726813">(Feb 06 2019 at 21:15)</a>:</h4>
<p>and in that case, you want the MIR to contain a usertypeascribe thingy</p>



<a name="157726823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726823">(Feb 06 2019 at 21:15)</a>:</h4>
<p>which will generate the region error</p>



<a name="157726833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726833">(Feb 06 2019 at 21:15)</a>:</h4>
<p>right?</p>



<a name="157726836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726836">(Feb 06 2019 at 21:15)</a>:</h4>
<p>I guess maybe we could lower it to a equivalent of <code>AscribeUserType</code> that contains a <code>Constant</code> rather than just bypassing it here.</p>



<a name="157726905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726905" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726905">(Feb 06 2019 at 21:16)</a>:</h4>
<p>I would expect so, yes, I'm just unsure if this pattern is also used elsewhere to that effect.</p>



<a name="157726919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726919">(Feb 06 2019 at 21:16)</a>:</h4>
<p>yea, to a <code>AscribeUserType(PatternKind::Whatever)</code></p>



<a name="157726936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726936">(Feb 06 2019 at 21:16)</a>:</h4>
<p>so the main q. is whether you can have a test that witnesses this</p>



<a name="157726947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726947">(Feb 06 2019 at 21:16)</a>:</h4>
<p>maybe a MIR output test?</p>



<a name="157726948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726948">(Feb 06 2019 at 21:16)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/master/src/test/ui/issue-55511.nll.stderr" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/test/ui/issue-55511.nll.stderr">https://github.com/rust-lang/rust/blob/master/src/test/ui/issue-55511.nll.stderr</a></p>



<a name="157726956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157726956" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157726956">(Feb 06 2019 at 21:16)</a>:</h4>
<p>Is that what you are describing?</p>



<a name="157727010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727010" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727010">(Feb 06 2019 at 21:17)</a>:</h4>
<p>If so, the test already exists and I did in fact implement that check in <a href="https://github.com/rust-lang/rust/issues/55937" target="_blank" title="https://github.com/rust-lang/rust/issues/55937">#55937</a> - that just happened to also lead to this pattern appearing in this PR's function and that wasn't handled at the time. I think.</p>



<a name="157727169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727169" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727169">(Feb 06 2019 at 21:19)</a>:</h4>
<p>maybe it just never does anything with the AscribeUserType?</p>



<a name="157727180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727180">(Feb 06 2019 at 21:19)</a>:</h4>
<p>but that test is not for ranges</p>



<a name="157727185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727185" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727185">(Feb 06 2019 at 21:19)</a>:</h4>
<p>I see.</p>



<a name="157727259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727259" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727259">(Feb 06 2019 at 21:20)</a>:</h4>
<p>you'll need to craft a similar test for ranges</p>



<a name="157727358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727358">(Feb 06 2019 at 21:21)</a>:</h4>
<p>maybe just test that the relevant AscribeUserType is present?</p>



<a name="157727474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727474">(Feb 06 2019 at 21:23)</a>:</h4>
<blockquote>
<p>maybe just test that the relevant AscribeUserType is present?</p>
</blockquote>
<p>I'm not quite sure what you mean by this.</p>



<a name="157727608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727608">(Feb 06 2019 at 21:25)</a>:</h4>
<p>do a MIR test</p>



<a name="157727623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727623">(Feb 06 2019 at 21:25)</a>:</h4>
<p>Oh, I see.</p>



<a name="157727671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727671">(Feb 06 2019 at 21:25)</a>:</h4>
<p>because this feels hard to do in a UI test</p>



<a name="157727728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727728" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727728">(Feb 06 2019 at 21:26)</a>:</h4>
<p>because you sort of can't have lifetimes in patterns</p>



<a name="157727732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157727732" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157727732">(Feb 06 2019 at 21:26)</a>:</h4>
<p>*in range patterns</p>



<a name="157728032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728032">(Feb 06 2019 at 21:30)</a>:</h4>
<p>right?</p>



<a name="157728179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728179" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728179">(Feb 06 2019 at 21:32)</a>:</h4>
<p>I think so. I'm just trying to work out, if we should be preserving the <code>AscribeUserType</code> in the range pattern we create, what that would look like. Since the changes we're making here are the lowering to the HAIR - so both before and after this PR, there's not a way to really inspect the pattern we select in the MIR (unless we know what form it ends up as).</p>



<a name="157728234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728234" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728234">(Feb 06 2019 at 21:33)</a>:</h4>
<p>you can do a mir-opt test</p>



<a name="157728237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728237">(Feb 06 2019 at 21:33)</a>:</h4>
<p>I think, at least</p>



<a name="157728243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728243">(Feb 06 2019 at 21:33)</a>:</h4>
<p>you could hardcode the form it ends up being</p>



<a name="157728273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728273" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728273">(Feb 06 2019 at 21:33)</a>:</h4>
<p>Yeah, I know to use a mir-opt test. I just not too sure what I'm looking for yet.</p>



<a name="157728284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728284" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728284">(Feb 06 2019 at 21:34)</a>:</h4>
<p>or just check that there is an AscribeUserType in the MIR<br>
along with the right<br>
| 0: Canonical { max_universe: U0, variables: [], value: TypeOf(DefId(0/0:4 ~ ex[8787]::Foo[0]::ZERO[0]), UserSubsts { substs: [A], user_self_ty: None }) } at ex.rs:11:9: 11:16</p>



<a name="157728328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728328" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728328">(Feb 06 2019 at 21:34)</a>:</h4>
<p>or equivalent of that line</p>



<a name="157728335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728335" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728335">(Feb 06 2019 at 21:34)</a>:</h4>
<p>so use <code>-Z mir-dump=all</code> to see what it generates</p>



<a name="157728341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728341" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728341">(Feb 06 2019 at 21:34)</a>:</h4>
<p>eyeball that it is correct, and copy that</p>



<a name="157728345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728345" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728345">(Feb 06 2019 at 21:34)</a>:</h4>
<p>Right, check that it is still in the map so it is well-formedness checked.</p>



<a name="157728377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728377">(Feb 06 2019 at 21:35)</a>:</h4>
<p>I would have a test of the form</p>
<div class="codehilite"><pre><span></span> | 0: Canonical { max_universe: U0, variables: [], value: TypeOf(DefId(0/0:4 ~ ex[8787]::Foo[0]::ZERO[0]), UserSubsts { substs: [A], user_self_ty: None }) } at ex.rs:11:9: 11:16
// ...
        AscribeUserType(_1, -, UserTypeProjection { base: UserTypeAnnotation(1), projs: [] }); // bb8[0]: scope 0 at ex.rs:11:9: 11:16
</pre></div>



<a name="157728404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728404">(Feb 06 2019 at 21:35)</a>:</h4>
<p>so I hope the span won't be a problem</p>



<a name="157728411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728411" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728411">(Feb 06 2019 at 21:35)</a>:</h4>
<p>maybe change it to be behind a // in the output</p>



<a name="157728413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728413">(Feb 06 2019 at 21:35)</a>:</h4>
<p>so that mir-opt will ignore it</p>



<a name="157728438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728438">(Feb 06 2019 at 21:36)</a>:</h4>
<p>| 0: Canonical { max_universe: U0, variables: [], value: TypeOf(DefId(0/0:4 ~ ex[8787]::Foo[0]::ZERO[0]), UserSubsts { substs: [A], user_self_ty: None }) } // at ex.rs:11:9: 11:16</p>



<a name="157728477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728477">(Feb 06 2019 at 21:36)</a>:</h4>
<p>by that, I mean, change the output of the "dumped MIR" to contain the comment thingy</p>



<a name="157728612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728612">(Feb 06 2019 at 21:38)</a>:</h4>
<p>So, there definitely isn't a <code>AscribeUserType</code> statement or an entry in <code>Mir</code>'s <code>user_type_annotations</code> map.</p>



<a name="157728624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728624">(Feb 06 2019 at 21:38)</a>:</h4>
<p>there should be</p>



<a name="157728634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728634" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728634">(Feb 06 2019 at 21:38)</a>:</h4>
<p>that's because you are dropping it</p>



<a name="157728681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728681">(Feb 06 2019 at 21:39)</a>:</h4>
<p>Yeah.</p>



<a name="157728812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728812" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728812">(Feb 06 2019 at 21:41)</a>:</h4>
<p>can you fix that?</p>



<a name="157728819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728819">(Feb 06 2019 at 21:41)</a>:</h4>
<p>I think so.</p>



<a name="157728923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157728923" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157728923">(Feb 06 2019 at 21:42)</a>:</h4>
<p>cool</p>



<a name="157762294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157762294" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157762294">(Feb 07 2019 at 09:24)</a>:</h4>
<p>Here's a test case that should error (on both functions): <a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=fe632010ad3dada68e2463919215a829" target="_blank" title="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=fe632010ad3dada68e2463919215a829">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=fe632010ad3dada68e2463919215a829</a></p>



<a name="157762324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157762324" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157762324">(Feb 07 2019 at 09:25)</a>:</h4>
<p>inherent implementations appear to be unchecked, in an unrelated problem</p>



<a name="157762821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157762821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157762821">(Feb 07 2019 at 09:33)</a>:</h4>
<p>I can get a fix in for this tonight.</p>



<a name="157763313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157763313" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157763313">(Feb 07 2019 at 09:40)</a>:</h4>
<p>If desired, can land the PR as is to fix miscompilation but not the well-formed mess check and I can follow up with that fix.</p>



<a name="157765625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157765625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157765625">(Feb 07 2019 at 10:21)</a>:</h4>
<p>can you have a single PR?</p>



<a name="157774143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157774143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157774143">(Feb 07 2019 at 12:54)</a>:</h4>
<p>Can do.</p>



<a name="157820481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157820481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157820481">(Feb 07 2019 at 22:50)</a>:</h4>
<p>how are you doing?</p>



<a name="157841141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157841141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157841141">(Feb 08 2019 at 07:32)</a>:</h4>
<p>Getting on fine with it, just busy with All Hands things so probably won't get a fix ready until tomorrow or when I'm back home.</p>



<a name="157855713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2358161%20const%20patterns%20with%20ascribed%20patterns/near/157855713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariel Ben-Yehuda <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2358161.20const.20patterns.20with.20ascribed.20patterns.html#157855713">(Feb 08 2019 at 12:30)</a>:</h4>
<p>this turns out to be more complicated than we thought, so we'll do the miscompilation fix for beta, and the other change in a separate PR</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
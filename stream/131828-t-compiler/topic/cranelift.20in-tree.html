<html>
<head><meta charset="utf-8"><title>cranelift in-tree · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html">cranelift in-tree</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="232031940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232031940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232031940">(Mar 26 2021 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> Hey, I'm trying to remember if it was intentional that the source type for cranelift is specified as 'submodule' rather than 'in-tree', which e.g. opts out of deny-warnings actually working. It feels like similarly to clippy, as it's a subtree tool it should be considered 'intree'.</p>



<a name="232032154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032154">(Mar 26 2021 at 21:10)</a>:</h4>
<p>Where is that defined?</p>



<a name="232032186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032186">(Mar 26 2021 at 21:11)</a>:</h4>
<p><a href="https://github.com/Mark-Simulacrum/rust/blob/d79e9b2a3abf2dcb7f613886508ab24ee22f43ed/src/bootstrap/compile.rs#L785">https://github.com/Mark-Simulacrum/rust/blob/d79e9b2a3abf2dcb7f613886508ab24ee22f43ed/src/bootstrap/compile.rs#L785</a></p>



<a name="232032202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032202">(Mar 26 2021 at 21:11)</a>:</h4>
<p>(uh, that points to my fork, but should be the same for whatever)</p>



<a name="232032214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032214">(Mar 26 2021 at 21:11)</a>:</h4>
<p>I just noticed some warnings during the beta bump which is why I dug in</p>



<a name="232032325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032325">(Mar 26 2021 at 21:12)</a>:</h4>
<p>I can't remember.</p>



<a name="232032344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032344">(Mar 26 2021 at 21:12)</a>:</h4>
<p>What are the warnings by the way?</p>



<a name="232032466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032466">(Mar 26 2021 at 21:13)</a>:</h4>
<p>oh, just an unused use and a incomplete_features warning</p>



<a name="232032517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032517">(Mar 26 2021 at 21:13)</a>:</h4>
<p>Ok, I'm going to switch it to in-tree in a separate PR probably then</p>



<a name="232032555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032555">(Mar 26 2021 at 21:13)</a>:</h4>
<p>It feels right/consistent</p>



<a name="232032840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032840">(Mar 26 2021 at 21:15)</a>:</h4>
<p>I think the incomplete features warning is fixed by <a href="https://github.com/bjorn3/rustc_codegen_cranelift/commit/0069007d5b17b19bf6a7686dec7dee7be46dcd47">https://github.com/bjorn3/rustc_codegen_cranelift/commit/0069007d5b17b19bf6a7686dec7dee7be46dcd47</a> which removes several feature gates.</p>



<a name="232032973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232032973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232032973">(Mar 26 2021 at 21:16)</a>:</h4>
<p>Yes, that's right -- it drops type_alias_impl_trait</p>



<a name="232033027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033027">(Mar 26 2021 at 21:17)</a>:</h4>
<p>I think the unused use has also been fixed already as I didn't see any warnings when updatung rustc today.</p>



<a name="232033036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033036">(Mar 26 2021 at 21:17)</a>:</h4>
<p>ok, sounds reasonable</p>



<a name="232033047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033047">(Mar 26 2021 at 21:17)</a>:</h4>
<p>will just ignore it for now then</p>



<a name="232033059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033059">(Mar 26 2021 at 21:17)</a>:</h4>
<p>it might be a new detection in the beta, but seems unlikely</p>



<a name="232033143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033143">(Mar 26 2021 at 21:18)</a>:</h4>
<p>I can sync the subtree tomorrow if you want.</p>



<a name="232033161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033161">(Mar 26 2021 at 21:18)</a>:</h4>
<p>no rush on my end  :)</p>



<a name="232033259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033259">(Mar 26 2021 at 21:19)</a>:</h4>
<p>It's not a big deal. Apart from writing part of the PR description it is mostly automated by <code>scripts/rustup.sh push</code>.</p>



<a name="232033371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cranelift%20in-tree/near/232033371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cranelift.20in-tree.html#232033371">(Mar 26 2021 at 21:20)</a>:</h4>
<p>well, I mean, go for it but I am entirely neutral on it</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
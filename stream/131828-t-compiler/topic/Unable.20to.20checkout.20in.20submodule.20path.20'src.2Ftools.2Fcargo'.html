<html>
<head><meta charset="utf-8"><title>Unable to checkout in submodule path &#x27;src/tools/cargo&#x27; · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html">Unable to checkout in submodule path &#x27;src/tools/cargo&#x27;</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="236972745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236972745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236972745">(May 01 2021 at 14:38)</a>:</h4>
<p>after git pulling and run <code>./x.py build</code> I'm getting</p>



<a name="236972750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236972750" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236972750">(May 01 2021 at 14:39)</a>:</h4>
<div class="codehilite"><pre><span></span><code>\nThis repository is configured for Git LFS but &#39;git-lfs&#39; was not found on your path. If you no longer wish to use Git LFS, remove this hook by deleting .git/hooks/post-checkout.\n
Unable to checkout &#39;f3e13226d6d17a2bc5f325303494b43a45f53b7f&#39; in submodule path &#39;src/tools/cargo&#39;
Traceback (most recent call last):
  File &quot;/home/santiago/src/oss/rust1/./x.py&quot;, line 27, in &lt;module&gt;
    bootstrap.main()
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1191, in main
    bootstrap(help_triggered)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1154, in bootstrap
    build.update_submodules()
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1017, in update_submodules
    self.update_submodule(module[0], module[1], recorded_submodules)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 959, in update_submodule
    run(update_args, cwd=self.rust_root, verbose=self.verbose, exception=True)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 153, in run
    raise RuntimeError(err)
RuntimeError: failed to run: git submodule update --init --recursive --progress src/tools/cargo
</code></pre></div>



<a name="236972832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236972832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236972832">(May 01 2021 at 14:40)</a>:</h4>
<p>it seems that it keeps happening in other modules ...</p>



<a name="236972836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236972836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236972836">(May 01 2021 at 14:40)</a>:</h4>
<div class="codehilite"><pre><span></span><code>santiago@galago rust1 (rust1)]$ git submodule update --init --recursive --progress src/tools/cargo
[santiago@galago rust1 (rust1)]$ RUST_BACKTRACE=1 ./x.py build library/std
Updating only changed submodules
Updating submodule src/doc/reference
remote: Enumerating objects: 91, done.
remote: Counting objects: 100% (88/88), done.
remote: Compressing objects: 100% (41/41), done.
remote: Total 65 (delta 53), reused 33 (delta 24), pack-reused 0
Unpacking objects: 100% (65/65), 8.97 KiB | 340.00 KiB/s, done.
From https://github.com/rust-lang/reference
   f4baf50..d23f9da  master     -&gt; origin/master
\nThis repository is configured for Git LFS but &#39;git-lfs&#39; was not found on your path. If you no longer wish to use Git LFS, remove this hook by deleting .git/hooks/post-checkout.\n
Unable to checkout &#39;d23f9da8469617e6c81121d9fd123443df70595d&#39; in submodule path &#39;src/doc/reference&#39;
Traceback (most recent call last):
  File &quot;/home/santiago/src/oss/rust1/./x.py&quot;, line 27, in &lt;module&gt;
    bootstrap.main()
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1191, in main
    bootstrap(help_triggered)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1154, in bootstrap
    build.update_submodules()
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1017, in update_submodules
    self.update_submodule(module[0], module[1], recorded_submodules)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 959, in update_submodule
    run(update_args, cwd=self.rust_root, verbose=self.verbose, exception=True)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 153, in run
    raise RuntimeError(err)
RuntimeError: failed to run: git submodule update --init --recursive --progress src/doc/reference
[santiago@galago rust1 (rust1)]$ git submodule update --init --recursive --progress src/doc/reference
[santiago@galago rust1 (rust1)]$ RUST_BACKTRACE=1 ./x.py build library/std
Updating only changed submodules
Updating submodule src/doc/book
remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 4 (delta 0), reused 1 (delta 0), pack-reused 0
Unpacking objects: 100% (4/4), 4.91 KiB | 4.91 MiB/s, done.
From https://github.com/rust-lang/book
 * [new branch]        main       -&gt; origin/main
\nThis repository is configured for Git LFS but &#39;git-lfs&#39; was not found on your path. If you no longer wish to use Git LFS, remove this hook by deleting .git/hooks/post-checkout.\n
Unable to checkout &#39;50dd06cb71beb27fdc0eebade5509cdcc1f821ed&#39; in submodule path &#39;src/doc/book&#39;
Traceback (most recent call last):
  File &quot;/home/santiago/src/oss/rust1/./x.py&quot;, line 27, in &lt;module&gt;
    bootstrap.main()
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1191, in main
    bootstrap(help_triggered)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1154, in bootstrap
    build.update_submodules()
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 1017, in update_submodules
    self.update_submodule(module[0], module[1], recorded_submodules)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 959, in update_submodule
    run(update_args, cwd=self.rust_root, verbose=self.verbose, exception=True)
  File &quot;/home/santiago/src/oss/rust1/src/bootstrap/bootstrap.py&quot;, line 153, in run
    raise RuntimeError(err)
RuntimeError: failed to run: git submodule update --init --recursive --progress src/doc/book
</code></pre></div>



<a name="236972890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236972890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236972890">(May 01 2021 at 14:41)</a>:</h4>
<p>ohh I think it's due to ...</p>



<a name="236972892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236972892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236972892">(May 01 2021 at 14:41)</a>:</h4>
<div class="codehilite"><pre><span></span><code>\nThis repository is configured for Git LFS but &#39;git-lfs&#39; was not found on your path. If you no longer wish to use Git LFS, remove this hook by deleting .git/hooks/post-checkout.\n
</code></pre></div>



<a name="236972955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236972955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236972955">(May 01 2021 at 14:42)</a>:</h4>
<p>seems like <code>git submodule update</code> ends with an error code due to that recent change, regardless it's really updating the submodules</p>



<a name="236973096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236973096" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236973096">(May 01 2021 at 14:44)</a>:</h4>
<p>ohh and that happens because I have a <code>.git/hooks/post-checkout</code> file</p>



<a name="236973109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/236973109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#236973109">(May 01 2021 at 14:44)</a>:</h4>
<p>well, need to investigate why I can't have that or why it interferes in some way</p>



<a name="237005344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/237005344" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#237005344">(May 01 2021 at 22:20)</a>:</h4>
<p>just got a chance to get back to this and figured out</p>



<a name="237005426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/237005426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#237005426">(May 01 2021 at 22:21)</a>:</h4>
<p>in case it happens to somebody, an archlinux dependency installed <code>git-lfs</code> and I removed it afterwards but <code>git-lfs</code> spreaded a ton of hooks on my <code>~/.git/hooks</code> directory and that's why this was giving me troubles</p>



<a name="237005457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/237005457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#237005457">(May 01 2021 at 22:21)</a>:</h4>
<p>unsure why that installed a ton of hooks without even asking but that's a different story</p>



<a name="237005495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Unable%20to%20checkout%20in%20submodule%20path%20%27src/tools/cargo%27/near/237005495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Unable.20to.20checkout.20in.20submodule.20path.20&#x27;src.2Ftools.2Fcargo&#x27;.html#237005495">(May 01 2021 at 22:22)</a>:</h4>
<p>yeah that seems quite rude</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
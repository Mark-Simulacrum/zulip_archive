<html>
<head><meta charset="utf-8"><title>#55396 linker flavour inference · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html">#55396 linker flavour inference</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="148792954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148792954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148792954">(Nov 29 2018 at 15:14)</a>:</h4>
<p>Spawning off from weekly meeting.</p>



<a name="148793173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793173">(Nov 29 2018 at 15:17)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="123586">@nagisa</span></p>



<a name="148793461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793461">(Nov 29 2018 at 15:21)</a>:</h4>
<p>It seems like the first proposed change to the inference propsed (only stripping the extension when it is <code>.exe</code>) seems trivial enough. I'm not too familiar with what would be required to stablize <code>-C linker-flavour</code> though.</p>



<a name="148793510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793510">(Nov 29 2018 at 15:21)</a>:</h4>
<p>Stabilizing <code>-Clinker-flavour</code> would involve making a patch and getting it go through a FCP</p>



<a name="148793564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793564" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793564">(Nov 29 2018 at 15:22)</a>:</h4>
<p>which is also quite easy (usually involves removing code, not adding it)</p>



<a name="148793670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793670">(Nov 29 2018 at 15:23)</a>:</h4>
<p>Is this guide up-to-date? <a href="https://forge.rust-lang.org/stabilization-guide.html" target="_blank" title="https://forge.rust-lang.org/stabilization-guide.html">https://forge.rust-lang.org/stabilization-guide.html</a></p>



<a name="148793737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793737">(Nov 29 2018 at 15:24)</a>:</h4>
<p>Yeah.</p>



<a name="148793747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793747">(Nov 29 2018 at 15:24)</a>:</h4>
<p>Alright, thanks, I should be good to get started on this.</p>



<a name="148793932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148793932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148793932">(Nov 29 2018 at 15:27)</a>:</h4>
<p>nice</p>



<a name="148804739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148804739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148804739">(Nov 29 2018 at 17:59)</a>:</h4>
<p>Ah, also <span class="user-mention" data-user-id="116107">@davidtwco</span> you’ll want to keep the two PRs (one that only strips the <code>exe</code> extension and the stabilisation one) separate</p>



<a name="148804751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148804751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148804751">(Nov 29 2018 at 17:59)</a>:</h4>
<p>Yeah, I figured that'd be the case <span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span></p>



<a name="148811825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148811825" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148811825">(Nov 29 2018 at 19:29)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> are there tests for the linker stuff anywhere?</p>



<a name="148812470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812470">(Nov 29 2018 at 19:37)</a>:</h4>
<p>There should be at least a test for the -Z flag.</p>



<a name="148812571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812571">(Nov 29 2018 at 19:39)</a>:</h4>
<p>There does not appear to be a test for <code>-Clinker</code> operation though</p>



<a name="148812575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812575">(Nov 29 2018 at 19:39)</a>:</h4>
<p>I can't find any for the linked flavor inference - PR that added it doesn't have any.</p>



<a name="148812587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812587">(Nov 29 2018 at 19:39)</a>:</h4>
<p>and it is super platform-specific anyway…</p>



<a name="148812603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812603" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812603">(Nov 29 2018 at 19:39)</a>:</h4>
<p>I’m not sure how you'd even check what linker rustc picks with given flags…</p>



<a name="148812624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812624">(Nov 29 2018 at 19:40)</a>:</h4>
<p>Fair enough, I guess I'll just open a PR with what I've got then.</p>



<a name="148812723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812723">(Nov 29 2018 at 19:41)</a>:</h4>
<p>It's really difficult to not spell flavour with the 'u'.</p>



<a name="148812868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812868">(Nov 29 2018 at 19:43)</a>:</h4>
<p>I’ve just given up on not spelling the non-american english way</p>



<a name="148812944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812944">(Nov 29 2018 at 19:44)</a>:</h4>
<blockquote>
<p>I've just given up on <del>not</del> spelling the non-american english way</p>
</blockquote>
<p>?</p>



<a name="148812999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148812999" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148812999">(Nov 29 2018 at 19:45)</a>:</h4>
<p>the double-negative was intended <span class="emoji emoji-1f642" title="slight smile">:slight_smile:</span> I just spell the british way instead.</p>



<a name="148813014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148813014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148813014">(Nov 29 2018 at 19:45)</a>:</h4>
<p>Ah, I wasn't sure if I was parsing that wrong or not.</p>



<a name="148813229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148813229" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148813229">(Nov 29 2018 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> submitted <a href="https://github.com/rust-lang/rust/issues/56349" target="_blank" title="https://github.com/rust-lang/rust/issues/56349">#56349</a> with the first change</p>



<a name="148818970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148818970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148818970">(Nov 29 2018 at 21:02)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> submitted <a href="https://github.com/rust-lang/rust/issues/56351" target="_blank" title="https://github.com/rust-lang/rust/issues/56351">#56351</a> with the stabilization.</p>



<a name="148854643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148854643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148854643">(Nov 30 2018 at 10:57)</a>:</h4>
<p>With <code>-Clinker-flavour</code> stabilized, can we now default to LLD on major platforms?</p>



<a name="148855636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148855636" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148855636">(Nov 30 2018 at 11:19)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> I see no problem changing to lld by default even without stabilising that</p>



<a name="148855642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/148855642" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#148855642">(Nov 30 2018 at 11:19)</a>:</h4>
<p>as -Clinker will infer the correct linker flavour</p>



<a name="150688832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/150688832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#150688832">(Dec 01 2018 at 16:27)</a>:</h4>
<p>Did the British English version get stabilized? I thought that the compiler options were American English.</p>



<a name="150688973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/150688973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#150688973">(Dec 01 2018 at 16:31)</a>:</h4>
<p>The option was always in American English IIRC. Only place I ever used British English was in commit messages (before I caught myself and changed it).</p>



<a name="150689229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/150689229" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#150689229">(Dec 01 2018 at 16:40)</a>:</h4>
<p>Yes, we use AmE everywhere in the compiler. That may change once we get localisation of the diagnostics and error code descriptions</p>



<a name="150689230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/150689230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#150689230">(Dec 01 2018 at 16:40)</a>:</h4>
<p>but till then…</p>



<a name="150689286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/150689286" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#150689286">(Dec 01 2018 at 16:42)</a>:</h4>
<p>I was just seeing :</p>
<blockquote>
<p>With <code>-Clinker-flavour</code> stabilized,</p>
</blockquote>



<a name="150689301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/150689301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#150689301">(Dec 01 2018 at 16:43)</a>:</h4>
<p>That’s just me being silly and typing too fast to correct myself later</p>



<a name="150689306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2355396%20linker%20flavour%20inference/near/150689306" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.2355396.20linker.20flavour.20inference.html#150689306">(Dec 01 2018 at 16:43)</a>:</h4>
<p>And mw as well ;-)</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>✔ upstreaming LLVM patch for __rust_ alloc functions · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html">✔ upstreaming LLVM patch for __rust_ alloc functions</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="255610575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20upstreaming%20LLVM%20patch%20for%20__rust_%20alloc%20functions/near/255610575" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html#255610575">(Sep 30 2021 at 17:07)</a>:</h4>
<p>in phabricator you mean?</p>



<a name="255610707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20upstreaming%20LLVM%20patch%20for%20__rust_%20alloc%20functions/near/255610707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html#255610707">(Sep 30 2021 at 17:08)</a>:</h4>
<p>I've got one FileCheck failure in rust's tests failing, and it's going to take tweaking: the test is asserting <code>alloca</code> doesn't occur, but the new <code>allocator</code> attribute on __rustc_alloc matches :P</p>



<a name="255611449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20upstreaming%20LLVM%20patch%20for%20__rust_%20alloc%20functions/near/255611449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html#255611449">(Sep 30 2021 at 17:13)</a>:</h4>
<p>Thanks for all the help here folks!</p>



<a name="255611458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20upstreaming%20LLVM%20patch%20for%20__rust_%20alloc%20functions/near/255611458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html#255611458">(Sep 30 2021 at 17:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="316805">durin42</span> has marked this topic as resolved.</p>



<a name="255619324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20upstreaming%20LLVM%20patch%20for%20__rust_%20alloc%20functions/near/255619324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html#255619324">(Sep 30 2021 at 18:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="316805">durin42</span> <a href="#narrow/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions/near/255610575">said</a>:</p>
<blockquote>
<p>in phabricator you mean?</p>
</blockquote>
<p>Ya.</p>



<a name="255620053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20upstreaming%20LLVM%20patch%20for%20__rust_%20alloc%20functions/near/255620053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html#255620053">(Sep 30 2021 at 18:02)</a>:</h4>
<p>Will do. Right now I'm trying to get someone to point me at a viable in-tree user (maybe in clang++?) for the attribute</p>



<a name="256652072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20upstreaming%20LLVM%20patch%20for%20__rust_%20alloc%20functions/near/256652072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20upstreaming.20LLVM.20patch.20for.20__rust_.20alloc.20functions.html#256652072">(Oct 07 2021 at 21:20)</a>:</h4>
<p>As an update on this thread, I got an hour with some LLVM experts today who did some hair-splitting and C++ language-lawyering on my LLVM change, and it'll need some major reworking but I think I know how to get it done and then I don't have to touch clang++ if I don't want to. Progress continues.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
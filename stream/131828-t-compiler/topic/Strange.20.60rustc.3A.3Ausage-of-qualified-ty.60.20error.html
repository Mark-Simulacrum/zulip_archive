<html>
<head><meta charset="utf-8"><title>Strange `rustc::usage-of-qualified-ty` error · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Strange.20.60rustc.3A.3Ausage-of-qualified-ty.60.20error.html">Strange `rustc::usage-of-qualified-ty` error</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269204119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Strange%20%60rustc%3A%3Ausage-of-qualified-ty%60%20error/near/269204119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Strange.20.60rustc.3A.3Ausage-of-qualified-ty.60.20error.html#269204119">(Jan 25 2022 at 03:12)</a>:</h4>
<p>I'm making some changes in <code>src/tools/clippy/clippy_lints/src/modulo_arithmetic.rs</code>, which includes this line:</p>
<div class="codehilite"><pre><span></span><code>use rustc_middle::ty;
</code></pre></div>
<p>I get this compile error:</p>
<div class="codehilite"><pre><span></span><code>error: usage of qualified `ty::Ty&lt;&#39;_&gt;`
  --&gt; src/tools/clippy/clippy_lints/src/modulo_arithmetic.rs:80:33
   |
80 | fn might_have_negative_value(t: ty::Ty&lt;&#39;_&gt;) -&gt; bool {
   |                                 ^^^^^^^^^^ help: try using it unqualified: `Ty&lt;&#39;_&gt;`
   |
   = note: `-D rustc::usage-of-qualified-ty` implied by `-D warnings`
</code></pre></div>
<p>which seems weird. I follow the advice, and then I get this error, unsurprisingly:</p>
<div class="codehilite"><pre><span></span><code>error[E0412]: cannot find type `Ty` in this scope
  --&gt; src/tools/clippy/clippy_lints/src/modulo_arithmetic.rs:80:33
   |
80 | fn might_have_negative_value(t: Ty&lt;&#39;_&gt;) -&gt; bool {
   |                                 ^^ not found in this scope
   |
help: consider importing one of these items
   |
1  | use crate::modulo_arithmetic::ty::Ty;
   |
1  | use rustc_ast::Ty;
   |
1  | use rustc_hir::Ty;
   |
1  | use rustc_middle::ty::Ty;
   |
</code></pre></div>
<p>Is this a bug? Am I misunderstanding what it's telling me?</p>



<a name="269217181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Strange%20%60rustc%3A%3Ausage-of-qualified-ty%60%20error/near/269217181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Strange.20.60rustc.3A.3Ausage-of-qualified-ty.60.20error.html#269217181">(Jan 25 2022 at 07:13)</a>:</h4>
<p>the idea is that it should be convention to use</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">rustc_middle</span>::<span class="n">ty</span>::<span class="p">{</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">Ty</span><span class="p">,</span><span class="w"> </span><span class="n">TyCtxt</span><span class="p">};</span><span class="w"></span>
</code></pre></div>



<a name="269217238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Strange%20%60rustc%3A%3Ausage-of-qualified-ty%60%20error/near/269217238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Strange.20.60rustc.3A.3Ausage-of-qualified-ty.60.20error.html#269217238">(Jan 25 2022 at 07:14)</a>:</h4>
<p>i thought that the lint was supposed to mention this <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="269483879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Strange%20%60rustc%3A%3Ausage-of-qualified-ty%60%20error/near/269483879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Strange.20.60rustc.3A.3Ausage-of-qualified-ty.60.20error.html#269483879">(Jan 26 2022 at 21:19)</a>:</h4>
<p>Oh, I see. Yes, a clearer message would help a lot!</p>



<a name="269520041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Strange%20%60rustc%3A%3Ausage-of-qualified-ty%60%20error/near/269520041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Strange.20.60rustc.3A.3Ausage-of-qualified-ty.60.20error.html#269520041">(Jan 27 2022 at 03:04)</a>:</h4>
<p>I filed <a href="https://github.com/rust-lang/rust/pull/93357">https://github.com/rust-lang/rust/pull/93357</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
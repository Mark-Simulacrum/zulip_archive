<html>
<head><meta charset="utf-8"><title>Can&#x27;t update stage0 rustfmt · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html">Can&#x27;t update stage0 rustfmt</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="216739514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216739514" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216739514">(Nov 14 2020 at 17:14)</a>:</h4>
<p>I've updated my local <code>src/stage0.txt</code> to <code>rustfmt: nightly-2020-11-13</code>, to try to pull in a more recent rustfmt for <code>./x.py fmt</code></p>



<a name="216739528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216739528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216739528">(Nov 14 2020 at 17:15)</a>:</h4>
<p>In the <code>x.py</code> output, I'm seeing <code>extracting /home/aaron/repos/rust/build/cache/2020-11-13/rustfmt-nightly-x86_64-unknown-linux-gnu.tar.xz</code></p>



<a name="216739543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216739543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216739543">(Nov 14 2020 at 17:15)</a>:</h4>
<p>However, running <code>build/x86_64-unknown-linux-gnu/stage0/bin/rustfmt --version</code>  reports <code>rustfmt 1.4.24-nightly (eb894d5 2020-11-05)</code></p>



<a name="216739590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216739590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216739590">(Nov 14 2020 at 17:16)</a>:</h4>
<p>When I install <code>rustfmt</code> with my local nightly toolchain (same date), I get <code>rustfmt 1.4.25-nightly (0f29ff6 2020-11-11)</code></p>



<a name="216739595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216739595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216739595">(Nov 14 2020 at 17:16)</a>:</h4>
<p>is there anything else I need to do to bump the rustfmt version used by <code>./x.py fmt</code>?</p>



<a name="216739661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216739661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216739661">(Nov 14 2020 at 17:19)</a>:</h4>
<p>If you delete rustfmt, does it work?</p>



<a name="216740569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740569">(Nov 14 2020 at 17:39)</a>:</h4>
<p>no, that should be enough</p>



<a name="216740575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740575">(Nov 14 2020 at 17:39)</a>:</h4>
<p>but I think the date in the rustfmt --version is not going to be the same as the date of the rustfmt nightly you specify</p>



<a name="216740630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740630">(Nov 14 2020 at 17:40)</a>:</h4>
<p>i.e., the date of rustfmt is unchanging over many nightlies, because it's the date of that rustfmt commit</p>



<a name="216740636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740636" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740636">(Nov 14 2020 at 17:40)</a>:</h4>
<p>or at least that would be my assumption</p>



<a name="216740668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Poliorcetics <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740668">(Nov 14 2020 at 17:41)</a>:</h4>
<p>There is the nightly date that is one day before/after because they are built at midnight too ? Or is this something else ?</p>



<a name="216740776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740776">(Nov 14 2020 at 17:42)</a>:</h4>
<p>No this is a separate thing.</p>



<a name="216740805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740805">(Nov 14 2020 at 17:43)</a>:</h4>
<p>well, I mean, in some sense a symptom of the same problem -- we'd see the same desync of dates with rustc versions if we stopped committing code for multiple days</p>



<a name="216740820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216740820" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216740820">(Nov 14 2020 at 17:43)</a>:</h4>
<p>but it's "expected" for rustfmt, i.e., not likely to be fixed</p>



<a name="216763112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216763112" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216763112">(Nov 15 2020 at 01:56)</a>:</h4>
<p>But, the date of <code>rustfmt +nightly --version</code> is different</p>



<a name="216763124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216763124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216763124">(Nov 15 2020 at 01:57)</a>:</h4>
<p>Since there was a recent update to the rustfmt submodule</p>



<a name="216764168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Can%27t%20update%20stage0%20rustfmt/near/216764168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Can&#x27;t.20update.20stage0.20rustfmt.html#216764168">(Nov 15 2020 at 02:29)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> Is your local nightly toolchain maybe 2020-11-14?</p>
<div class="codehilite"><pre><span></span><code>~&gt; rustfmt +nightly-2020-11-13 -V
rustfmt 1.4.24-nightly (eb894d53 2020-11-05)
~&gt; rustfmt +nightly-2020-11-14 -V
rustfmt 1.4.25-nightly (0f29ff6d 2020-11-11)
</code></pre></div>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
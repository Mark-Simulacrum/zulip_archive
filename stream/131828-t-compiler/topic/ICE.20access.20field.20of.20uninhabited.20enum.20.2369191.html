<html>
<head><meta charset="utf-8"><title>ICE access field of uninhabited enum #69191 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html">ICE access field of uninhabited enum #69191</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="189839097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839097">(Mar 05 2020 at 21:35)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="124288">@oli</span> and <span class="user-mention" data-user-id="119009">@eddyb</span> ; I imagine you're both busy, so I'll try to keep this quick</p>



<a name="189839226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839226">(Mar 05 2020 at 21:37)</a>:</h4>
<p>the panic message actually makes it easy to understand what's gone wrong, at a fine grain:</p>



<a name="189839260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839260">(Mar 05 2020 at 21:37)</a>:</h4>
<p>We're trying to access field 0 of the following "union layout"</p>
<div class="codehilite"><pre><span></span>LayoutDetails {
        variants: Single {
            index: 0,
        },
        fields: Union(
            0,
        ),
        abi: Uninhabited,
...
}
</pre></div>



<a name="189839279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839279">(Mar 05 2020 at 21:38)</a>:</h4>
<p>but its actually an uninhabited type, as indicated by the ABI</p>



<a name="189839363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839363">(Mar 05 2020 at 21:38)</a>:</h4>
<p>Now, the actual type to led to this in my case looks like: <code>enum UninhabitedUnivariant { Variant(Void), }</code></p>



<a name="189839565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839565">(Mar 05 2020 at 21:40)</a>:</h4>
<p>so here's my question: In an ideal world, would the above: 1. have <code>fields: FieldPlacement::Union(1)</code>, or  2. we would have a separate <code>FieldPlacement</code> variant for uninhabited types, or 3. don't change the data at all; change the panicking code to first check the <code>LayoutDetails.abi</code> to catch the uninhabited case?</p>



<a name="189839856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839856">(Mar 05 2020 at 21:43)</a>:</h4>
<p>another way of putting my question: Is our long term intention to actually attach a layout here that indicates that there is a field (and it is just uninhabited)? Or are we better off always explicitly saying, in the <code>LayoutDetails</code> representation itself, that "such a type has no realized fields" (which is what <code>FieldPlacement::Uninhabited</code> proposed in option (2) above would be used for).</p>



<a name="189839903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189839903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189839903">(Mar 05 2020 at 21:43)</a>:</h4>
<p>/me suddenly remembers how late it is in the EU</p>



<a name="189841288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189841288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189841288">(Mar 05 2020 at 21:57)</a>:</h4>
<p>for the short term I will take the most narrow solution, from option (3), and have the code here do something like <code>throw_ub!(Unreachable);</code></p>



<a name="189842112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189842112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189842112">(Mar 05 2020 at 22:05)</a>:</h4>
<p>oh, we cannot do (2), at least not in all cases, due to <a href="https://github.com/rust-lang/rust/issues/49298" target="_blank" title="https://github.com/rust-lang/rust/issues/49298">#49298</a></p>



<a name="189842172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189842172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189842172">(Mar 05 2020 at 22:05)</a>:</h4>
<p>and since (2) cannot apply in all cases, it probably is a fragile solution to <a href="https://github.com/rust-lang/rust/issues/69191" target="_blank" title="https://github.com/rust-lang/rust/issues/69191">#69191</a></p>



<a name="189844456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189844456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189844456">(Mar 05 2020 at 22:30)</a>:</h4>
<p>wow, even my "most narrow solution" caused existing test <a href="http://issue-64506.rs" target="_blank" title="http://issue-64506.rs">issue-64506.rs</a> to regress (obviously wasn't as narrow as it could have been)</p>



<a name="189844514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189844514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189844514">(Mar 05 2020 at 22:31)</a>:</h4>
<p>in fact, maybe <a href="https://github.com/rust-lang/rust/issues/69191" target="_blank" title="https://github.com/rust-lang/rust/issues/69191">#69191</a> is another instance of <a href="https://github.com/rust-lang/rust/issues/64506" target="_blank" title="https://github.com/rust-lang/rust/issues/64506">#64506</a> ?</p>



<a name="189844599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189844599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189844599">(Mar 05 2020 at 22:33)</a>:</h4>
<p>interesting, it seems like a deliberate decision was made to treat structs different from enums in PR <a href="https://github.com/rust-lang/rust/issues/64987" target="_blank" title="https://github.com/rust-lang/rust/issues/64987">#64987</a></p>



<a name="189844988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189844988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189844988">(Mar 05 2020 at 22:37)</a>:</h4>
<p>so then: <span class="user-mention" data-user-id="124288">@oli</span>, what was the reason to treat structs different from enums here? Expediency of implementation? Or because they should never arise in the manner that structs do (since we don't allow partially initialized enums) ?</p>



<a name="189846400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189846400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189846400">(Mar 05 2020 at 22:57)</a>:</h4>
<p>I think 1) is the right solution. I don't remember if I tried it. It's kinda weird because you need to pick a variant to continue with. So if you had multiple uninhabited variants, I'm not sure if we wouldn't just end up running into other assertions</p>



<a name="189846464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189846464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189846464">(Mar 05 2020 at 22:58)</a>:</h4>
<p>If you don't pick a variant and continue into the enum code, everything will die badly iirc.</p>



<a name="189846512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189846512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189846512">(Mar 05 2020 at 22:59)</a>:</h4>
<p>But again, I don't remember what exactly I tried. I was attempting to go with minimal changes to the code though</p>



<a name="189851735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189851735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189851735">(Mar 06 2020 at 00:16)</a>:</h4>
<p>this may be an instance of where we treat univariant enums specially</p>



<a name="189852714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189852714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189852714">(Mar 06 2020 at 00:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189851735" title="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189851735">said</a>:</p>
<blockquote>
<p>this may be an instance of where we treat univariant enums specially</p>
</blockquote>
<p>okay, yes, I can see how to easily generalize PR <a href="https://github.com/rust-lang/rust/issues/64987" target="_blank" title="https://github.com/rust-lang/rust/issues/64987">#64987</a> to treat univariant enums just like structs.</p>



<a name="189854293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189854293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189854293">(Mar 06 2020 at 01:06)</a>:</h4>
<p>... and that didn't work. Back to my original plan of doing something like (3), but even more narrowly than my original vision.</p>



<a name="189878309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878309">(Mar 06 2020 at 10:11)</a>:</h4>
<p>just found this notification. I would've gotten to it much sooner if it wasn't on Zulip (because that can't notify me on my phone)</p>



<a name="189878367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878367">(Mar 06 2020 at 10:12)</a>:</h4>
<p>Discord PMs are probably the only thing guaranteed to reach me</p>



<a name="189878378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878378">(Mar 06 2020 at 10:12)</a>:</h4>
<p>(quickly, I mean)</p>



<a name="189878399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878399">(Mar 06 2020 at 10:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> I'm really sorry for all the time wasted, but no matter how busy I am, layout bugs are a priority</p>



<a name="189878412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878412">(Mar 06 2020 at 10:13)</a>:</h4>
<p>I just wish I saw all this sooner</p>



<a name="189878606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878606">(Mar 06 2020 at 10:16)</a>:</h4>
<p>ftr the explanation and proposed fix are in <a href="https://github.com/rust-lang/rust/issues/69763#issuecomment-595688090" target="_blank" title="https://github.com/rust-lang/rust/issues/69763#issuecomment-595688090">https://github.com/rust-lang/rust/issues/69763#issuecomment-595688090</a>, <span class="user-mention" data-user-id="124288">@oli</span> is trying it out as we speak</p>



<a name="189878612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878612">(Mar 06 2020 at 10:16)</a>:</h4>
<p>just finished the tests, it works</p>



<a name="189878660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878660">(Mar 06 2020 at 10:17)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> so what do you want to do with your PR? should we still merge it? what do we do about the rollup (ideally we would avoid "critical fix" and rollups interacting...)</p>



<a name="189878750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878750">(Mar 06 2020 at 10:19)</a>:</h4>
<p>hmm the rollup failed so I can at least take it out of the rollup</p>



<a name="189878758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878758">(Mar 06 2020 at 10:19)</a>:</h4>
<p>why is the tree closed?!</p>



<a name="189878768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878768">(Mar 06 2020 at 10:19)</a>:</h4>
<p>the tree is closed don't worry about it</p>



<a name="189878772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878772">(Mar 06 2020 at 10:19)</a>:</h4>
<p>some msys2 problems</p>



<a name="189878814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878814">(Mar 06 2020 at 10:20)</a>:</h4>
<p><a href="https://github.com/msys2/MSYS2-packages/issues/1884" target="_blank" title="https://github.com/msys2/MSYS2-packages/issues/1884">https://github.com/msys2/MSYS2-packages/issues/1884</a></p>



<a name="189878817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189878817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189878817">(Mar 06 2020 at 10:20)</a>:</h4>
<p>okay I was scared it was some release thing</p>



<a name="189880098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880098">(Mar 06 2020 at 10:40)</a>:</h4>
<p>also I can't tell what the timeframe is, when's the deadline for landing this?</p>



<a name="189880204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880204">(Mar 06 2020 at 10:42)</a>:</h4>
<p><a href="https://forge.rust-lang.org/" target="_blank" title="https://forge.rust-lang.org/">https://forge.rust-lang.org/</a> (March 12th I think?)</p>



<a name="189880209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880209">(Mar 06 2020 at 10:42)</a>:</h4>
<p>So thursday next week</p>



<a name="189880214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880214">(Mar 06 2020 at 10:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> sorry again for all the friction, I've r+'d <a href="https://github.com/rust-lang/rust/pull/69768" target="_blank" title="https://github.com/rust-lang/rust/pull/69768">https://github.com/rust-lang/rust/pull/69768</a>, hope that's okay with you?</p>



<a name="189880254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880254">(Mar 06 2020 at 10:43)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> okay that makes sense, so this has to land in the next day or two</p>



<a name="189880268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880268">(Mar 06 2020 at 10:43)</a>:</h4>
<p>yea, because we still need to backport it to beta</p>



<a name="189880317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880317">(Mar 06 2020 at 10:44)</a>:</h4>
<p>this will basically be insta-stable</p>



<a name="189880515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880515">(Mar 06 2020 at 10:47)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> btw have you tried testing with two uninhabited variants? that should also be broken on master and fixed by the PR. or is that unreachable from const-prop?</p>



<a name="189880528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880528">(Mar 06 2020 at 10:47)</a>:</h4>
<p>I've tried some things with nested fields, but not multiple variants, gonna do so now</p>



<a name="189880539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880539">(Mar 06 2020 at 10:47)</a>:</h4>
<p>the 0th variant has been broken forever, basically</p>



<a name="189880636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880636">(Mar 06 2020 at 10:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> btw, I explained to <span class="user-mention" data-user-id="124288">@oli</span> on IRC that you couldn't have fixed this outside <code>for_variant</code>, or at least not as generally, without increasing the size of some types, because there's no way to have <code>Variants::Multiple</code> without at least one byte for the tag, so uninhabited enum variants are currently an "on-demand" hack in <code>for_variant</code></p>



<a name="189880781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880781">(Mar 06 2020 at 10:51)</a>:</h4>
<p>but we can't paper over this forever, which is why I think we should do the thing at the end of <a href="https://github.com/rust-lang/rust/issues/69763#issuecomment-595699745" target="_blank" title="https://github.com/rust-lang/rust/issues/69763#issuecomment-595699745">https://github.com/rust-lang/rust/issues/69763#issuecomment-595699745</a></p>



<a name="189880782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880782">(Mar 06 2020 at 10:51)</a>:</h4>
<p>I considered creating <code>Variants::None</code> just before deciding to let the code fall through the normal path and not touching too much XD</p>



<a name="189880802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880802">(Mar 06 2020 at 10:52)</a>:</h4>
<p><code>Variants::None</code> isn't good either, since you want to be able to precompute variants</p>



<a name="189880881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880881">(Mar 06 2020 at 10:53)</a>:</h4>
<p>well, for <code>enum Foo {}</code> <code>Variants::Single</code> is kinda lying</p>



<a name="189880899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880899" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880899">(Mar 06 2020 at 10:53)</a>:</h4>
<p>this is why I prefer <code>Variants::Multiple</code> with <code>()</code> or <code>!</code> discriminants</p>



<a name="189880926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880926">(Mar 06 2020 at 10:54)</a>:</h4>
<p>do we even need <code>Variants::Single</code> at that point?</p>



<a name="189880933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189880933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189880933">(Mar 06 2020 at 10:54)</a>:</h4>
<p>so that you can always access the discriminant, but because it'd be a ZST we can just pretend it's at offset 0 etc.</p>



<a name="189881033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881033">(Mar 06 2020 at 10:55)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> funny you should ask that. I think we can then remove the variant index from <code>Variants::Single</code> which would let us replace it with <code>Option</code></p>



<a name="189881052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881052">(Mar 06 2020 at 10:55)</a>:</h4>
<p>I guess we don't need <code>Option</code> when we can use <code>variants: Vec&lt;Layout&gt;</code>... oh</p>



<a name="189881110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881110">(Mar 06 2020 at 10:56)</a>:</h4>
<p>refactorings wooo</p>



<a name="189881113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881113">(Mar 06 2020 at 10:56)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> ah, no, we do need to keep the <code>VariantIdx</code> in <code>Variants::Single</code> because the individual variants still  use it</p>



<a name="189881116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881116">(Mar 06 2020 at 10:56)</a>:</h4>
<p>so less refactoring possible :P</p>



<a name="189881248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881248">(Mar 06 2020 at 10:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189880515" title="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189880515">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="124288">oli</span> btw have you tried testing with two uninhabited variants? that should also be broken on master and fixed by the PR. or is that unreachable from const-prop?</p>
</blockquote>
<p>multiple variants work after my PR, but ICE before it: <a href="https://play.rust-lang.org/?version=beta&amp;mode=debug&amp;edition=2018&amp;gist=3586057c35fc8f9f1fc86b6315c427c0" target="_blank" title="https://play.rust-lang.org/?version=beta&amp;mode=debug&amp;edition=2018&amp;gist=3586057c35fc8f9f1fc86b6315c427c0">https://play.rust-lang.org/?version=beta&amp;mode=debug&amp;edition=2018&amp;gist=3586057c35fc8f9f1fc86b6315c427c0</a></p>



<a name="189881262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881262">(Mar 06 2020 at 10:59)</a>:</h4>
<p>feel free to <del>add another test</del> add that to the test and r=me it again</p>



<a name="189881344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189881344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189881344">(Mar 06 2020 at 11:00)</a>:</h4>
<p>looks like it does indeed only affect the first variant: <a href="https://play.rust-lang.org/?version=beta&amp;mode=debug&amp;edition=2018&amp;gist=5976ea4f169aa9f05aa8188d29150a90" target="_blank" title="https://play.rust-lang.org/?version=beta&amp;mode=debug&amp;edition=2018&amp;gist=5976ea4f169aa9f05aa8188d29150a90">https://play.rust-lang.org/?version=beta&amp;mode=debug&amp;edition=2018&amp;gist=5976ea4f169aa9f05aa8188d29150a90</a></p>



<a name="189882483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882483">(Mar 06 2020 at 11:19)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> landing my PR as well might still be good in terms of beta backport?</p>



<a name="189882501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882501">(Mar 06 2020 at 11:19)</a>:</h4>
<p>I</p>



<a name="189882576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882576">(Mar 06 2020 at 11:20)</a>:</h4>
<p>I won’t be at design meeting today but we should resolve this Question there , for expediency</p>



<a name="189882580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882580">(Mar 06 2020 at 11:20)</a>:</h4>
<p>well, you have two PRs, feel free to pick either. I wonder if your PR handles the two-variant testcase <span class="user-mention" data-user-id="124288">@oli</span> just added to his PR</p>



<a name="189882619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882619">(Mar 06 2020 at 11:21)</a>:</h4>
<p>if it does I don't care too much which gets merged first</p>



<a name="189882684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882684">(Mar 06 2020 at 11:22)</a>:</h4>
<p>I should have thought to add a test for that. Let’s see....</p>



<a name="189882778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882778">(Mar 06 2020 at 11:24)</a>:</h4>
<p>(the bug affects all uninhabited enums, but <em>only</em> their first variant, an univariant uninhabited enum just happens to only have that variant so it's easier to trigger it)</p>



<a name="189882886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882886">(Mar 06 2020 at 11:27)</a>:</h4>
<p>by the way, you chose funny names for your multivariant enum cases</p>



<a name="189882891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882891">(Mar 06 2020 at 11:27)</a>:</h4>
<p>"Univariant2" <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="189882984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882984">(Mar 06 2020 at 11:28)</a>:</h4>
<p>heh</p>



<a name="189882986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189882986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189882986">(Mar 06 2020 at 11:28)</a>:</h4>
<p>I'm lazy</p>



<a name="189883119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189883119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189883119">(Mar 06 2020 at 11:30)</a>:</h4>
<p>mine seems to handle the multivariant case as well, from local testing. I'll copy your test into my PR for completeness, and then try to make sure that all of this is on the agenda for today's T-compiler design meeting.</p>



<a name="189883167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189883167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189883167">(Mar 06 2020 at 11:31)</a>:</h4>
<p>(that is, we should decide quickly which one of these two PR's to beta-backport. I think mine is "obviously" less risky for backport. But I don't have a huge preference and thus don't mind being absent from the discussion.)</p>



<a name="189883265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189883265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189883265">(Mar 06 2020 at 11:32)</a>:</h4>
<p>I agree that for insta stabilization felix's PR is better</p>



<a name="189883473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189883473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189883473">(Mar 06 2020 at 11:35)</a>:</h4>
<p>the only scary thing is that there could be other code that might get broken by the <code>for_variant</code> bug, but most of it should be older than what actually caused the regression</p>



<a name="189883569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189883569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189883569">(Mar 06 2020 at 11:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189882986" title="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189882986">said</a>:</p>
<blockquote>
<p>I'm lazy</p>
</blockquote>
<p>and I only now just noticed "Warriont" <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="189883672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189883672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189883672">(Mar 06 2020 at 11:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189878399" title="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189878399">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> I'm really sorry for all the time wasted, but no matter how busy I am, layout bugs are a priority</p>
</blockquote>
<p>none of this is your fault. I'm the one who dropped the ball on this (by self-assigning two weeks ago and then not looking at it, despite it being a beta regression).</p>



<a name="189883713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189883713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189883713">(Mar 06 2020 at 11:38)</a>:</h4>
<blockquote>
<p>"Warriont"</p>
</blockquote>
<p>I'm not lazy where it's important</p>



<a name="189884032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189884032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189884032">(Mar 06 2020 at 11:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189883672" title="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189883672">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189878399" title="#narrow/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191/near/189878399">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> I'm really sorry for all the time wasted, but no matter how busy I am, layout bugs are a priority</p>
</blockquote>
<p>none of this is your fault. I'm the one who dropped the ball on this (by self-assigning two weeks ago and then not looking at it, despite it being a beta regression).</p>
</blockquote>
<p>oh wow, I thought this was more recent, I guess I didn't even get to look at the issue</p>



<a name="189884056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189884056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189884056">(Mar 06 2020 at 11:42)</a>:</h4>
<p>like I thought it was discovered in the past couple days and that's why I hadn't seen it (yet) in my notifications</p>



<a name="189884386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189884386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189884386">(Mar 06 2020 at 11:46)</a>:</h4>
<p>no, it's been open for weeks, but I haven't actually done any rustc work in 3 weeks and kept putting it off</p>



<a name="189885766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885766">(Mar 06 2020 at 12:08)</a>:</h4>
<p>weren't you on vacation :P? I've been checking GH notifications for weeks</p>



<a name="189885842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885842">(Mar 06 2020 at 12:08)</a>:</h4>
<p>the only conflict would be the regression test, I Think.</p>



<a name="189885848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885848">(Mar 06 2020 at 12:08)</a>:</h4>
<p>(which I ... slightly revised <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> )</p>



<a name="189885849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885849">(Mar 06 2020 at 12:08)</a>:</h4>
<p>not even that, different filenames</p>



<a name="189885862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885862">(Mar 06 2020 at 12:09)</a>:</h4>
<p>what <span class="user-mention" data-user-id="124288">@oli</span> just said :P (I noticed it because I compared the PRs)</p>



<a name="189885864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885864">(Mar 06 2020 at 12:09)</a>:</h4>
<p>but the point is that <a href="https://github.com/rust-lang/rust/issues/69753" target="_blank" title="https://github.com/rust-lang/rust/issues/69753">#69753</a> creates some logic in const eval that we don't want in there</p>



<a name="189885881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885881">(Mar 06 2020 at 12:09)</a>:</h4>
<p>well that, too</p>



<a name="189885890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189885890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189885890">(Mar 06 2020 at 12:09)</a>:</h4>
<p>yes we definitely want to revert it eventually</p>



<a name="189886070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189886070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189886070">(Mar 06 2020 at 12:12)</a>:</h4>
<p>(Solely on principle I prefer to first land on nightly nonetheless, rather than going direct to beta. But I won't veto a merge direct to beta of my PR <a href="https://github.com/rust-lang/rust/issues/69753" target="_blank" title="https://github.com/rust-lang/rust/issues/69753">#69753</a> )</p>



<a name="189886122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189886122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189886122">(Mar 06 2020 at 12:13)</a>:</h4>
<p>(I re-r+'ed the latter, BTW ....)</p>



<a name="189886368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189886368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189886368">(Mar 06 2020 at 12:17)</a>:</h4>
<p>btw you might want to raise the priorities or at least rollup- my rollup=never</p>



<a name="189888013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189888013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189888013">(Mar 06 2020 at 12:38)</a>:</h4>
<p>I'm going to change the topic back to the issue's one starting from where I said "the only conflict ...", since this went far afield from the design meeting discussion.</p>



<a name="189888046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189888046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189888046">(Mar 06 2020 at 12:39)</a>:</h4>
<p>oops</p>



<a name="189888078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/ICE%20access%20field%20of%20uninhabited%20enum%20%2369191/near/189888078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/ICE.20access.20field.20of.20uninhabited.20enum.20.2369191.html#189888078">(Mar 06 2020 at 12:39)</a>:</h4>
<p>see, problem solved. Zulip does <em>some</em> things right. :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
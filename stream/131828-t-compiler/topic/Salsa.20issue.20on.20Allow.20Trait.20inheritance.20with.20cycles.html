<html>
<head><meta charset="utf-8"><title>Salsa issue on Allow Trait inheritance with cycles · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html">Salsa issue on Allow Trait inheritance with cycles</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="225203760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225203760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225203760">(Feb 04 2021 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="225204028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204028">(Feb 04 2021 at 18:46)</a>:</h4>
<p>about the Salsa issue we have an MCVE here <a href="https://github.com/rust-lang/rust/pull/80732#issuecomment-772467523">https://github.com/rust-lang/rust/pull/80732#issuecomment-772467523</a></p>



<a name="225204094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204094">(Feb 04 2021 at 18:47)</a>:</h4>
<p>it seems to me that the Salsa code is correct and what's wrong is the PR</p>



<a name="225204110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204110">(Feb 04 2021 at 18:47)</a>:</h4>
<p>unsure what could be going on</p>



<a name="225204232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204232">(Feb 04 2021 at 18:48)</a>:</h4>
<p>wave</p>



<a name="225204239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204239">(Feb 04 2021 at 18:48)</a>:</h4>
<p>ok</p>



<a name="225204253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204253">(Feb 04 2021 at 18:48)</a>:</h4>
<p>first thing, I guess, what's the name of your branch again, <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> ?</p>



<a name="225204287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204287">(Feb 04 2021 at 18:48)</a>:</h4>
<p>spastorino:trait-inheritance-self2</p>



<a name="225204353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204353">(Feb 04 2021 at 18:49)</a>:</h4>
<p>ok</p>



<a name="225204357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204357">(Feb 04 2021 at 18:49)</a>:</h4>
<p>I wanted to check it out</p>



<a name="225204409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204409">(Feb 04 2021 at 18:49)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="225204463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204463">(Feb 04 2021 at 18:50)</a>:</h4>
<p>anyway let me see...</p>



<a name="225204598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204598">(Feb 04 2021 at 18:51)</a>:</h4>
<p>i agree the code is correct</p>



<a name="225204608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204608">(Feb 04 2021 at 18:51)</a>:</h4>
<p>it looks like there's some kind of "deduplication" error here</p>



<a name="225204616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225204616" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225204616">(Feb 04 2021 at 18:51)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error[E0221]: ambiguous associated type `Group` in bounds of `Q`
  --&gt; src/main.rs:9:53
   |
9  |         &lt;&lt;Q as QueryDb&lt;&#39;_&gt;&gt;::DynDb as HasQueryGroup&lt;Q::Group&gt;&gt;::group_storage(db);
   |                                                     ^^^^^^^^ ambiguous associated type `Group`
...
30 |     type Group;
   |     -----------
   |     |
   |     ambiguous `Group` from `for&lt;&#39;d&gt; QueryDb&lt;&#39;d&gt;`
   |     ambiguous `Group` from `for&lt;&#39;d&gt; QueryDb&lt;&#39;d&gt;`
   |
help: use fully qualified syntax to disambiguate
   |
9  |         &lt;&lt;Q as QueryDb&lt;&#39;_&gt;&gt;::DynDb as HasQueryGroup&lt;&lt;Q as for&lt;&#39;d&gt; QueryDb&lt;&#39;d&gt;&gt;::Group&gt;&gt;::group_storage(db);
   |                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
help: use fully qualified syntax to disambiguate
   |
9  |         &lt;&lt;Q as QueryDb&lt;&#39;_&gt;&gt;::DynDb as HasQueryGroup&lt;&lt;Q as for&lt;&#39;d&gt; QueryDb&lt;&#39;d&gt;&gt;::Group&gt;&gt;::group_storage(db);
   |
</code></pre></div>



<a name="225205045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225205045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225205045">(Feb 04 2021 at 18:54)</a>:</h4>
<p>yeah</p>



<a name="225205927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225205927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225205927">(Feb 04 2021 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> got distracted getting coffee but I'm actually around now</p>



<a name="225206147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206147">(Feb 04 2021 at 19:02)</a>:</h4>
<p>I was eating chocolate :)</p>



<a name="225206163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206163">(Feb 04 2021 at 19:02)</a>:</h4>
<p>and you're making me want <span aria-label="coffee" class="emoji emoji-2615" role="img" title="coffee">:coffee:</span> now</p>



<a name="225206209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206209">(Feb 04 2021 at 19:02)</a>:</h4>
<p>seems like I'm procrastinating :)</p>



<a name="225206230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206230">(Feb 04 2021 at 19:03)</a>:</h4>
<p>Eh, you both are making me hungry :D</p>



<a name="225206245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206245">(Feb 04 2021 at 19:03)</a>:</h4>
<p>but I guess don't worry, I can start from here</p>



<a name="225206292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206292">(Feb 04 2021 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="255061">@Léo Lanteri Thauvin</span> LOL</p>



<a name="225206328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206328">(Feb 04 2021 at 19:03)</a>:</h4>
<p>Am I the only one who doesn't understand that MCVE? <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="225206348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206348">(Feb 04 2021 at 19:03)</a>:</h4>
<p>MCVE</p>



<a name="225206425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206425">(Feb 04 2021 at 19:04)</a>:</h4>
<p>I mean, the code, not the acronym. It seems very subtle in more than one way.</p>



<a name="225206454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206454">(Feb 04 2021 at 19:04)</a>:</h4>
<p>sigh, the <code>QueryDb</code> trait is terrible</p>



<a name="225206466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206466">(Feb 04 2021 at 19:04)</a>:</h4>
<p>it wants to be a GAT</p>



<a name="225206470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206470">(Feb 04 2021 at 19:04)</a>:</h4>
<p>but anyawy</p>



<a name="225206474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206474">(Feb 04 2021 at 19:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu Nicola</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225206425">said</a>:</p>
<blockquote>
<p>I mean, the code, not the acronym</p>
</blockquote>
<p>LOL</p>



<a name="225206532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206532">(Feb 04 2021 at 19:05)</a>:</h4>
<p>sorry about that, thought you were asking for the acronym <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="225206619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206619">(Feb 04 2021 at 19:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu Nicola</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225206425">said</a>:</p>
<blockquote>
<p>I mean, the code, not the acronym. It seems very subtle in more than one way.</p>
</blockquote>
<p>for a lot of time I used to have some issues understanding this kind of signatures</p>



<a name="225206650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206650">(Feb 04 2021 at 19:05)</a>:</h4>
<p>where generics, traits, a ton of bounds and relations show up</p>



<a name="225206708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206708">(Feb 04 2021 at 19:06)</a>:</h4>
<p>I understand what happens but I can feel you :)</p>



<a name="225206847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206847">(Feb 04 2021 at 19:07)</a>:</h4>
<p><span class="user-mention" data-user-id="203546">@Laurențiu Nicola</span> I've just found this <a href="https://www.possiblerust.com/guide/how-to-read-rust-functions-part-1">https://www.possiblerust.com/guide/how-to-read-rust-functions-part-1</a> in particular what they are going to explain in part 2 seem to me to be exactly what you need</p>



<a name="225206925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206925">(Feb 04 2021 at 19:07)</a>:</h4>
<p>and I feel like what's in that part 2 (which they didn't publish yet) is kind of not covered in books or material</p>



<a name="225206985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225206985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225206985">(Feb 04 2021 at 19:08)</a>:</h4>
<p>I'm probably wrong but my guess right now is that that's only covered in RFCs</p>



<a name="225207007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207007">(Feb 04 2021 at 19:08)</a>:</h4>
<p>Thanks, I'll keep an eye for it. I think this is the first time I see this <code>trait Query: for&lt;'d&gt; QueryDb&lt;'d&gt;</code> idiom</p>



<a name="225207014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207014">(Feb 04 2021 at 19:08)</a>:</h4>
<p>I'm still setting the build</p>



<a name="225207044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207044">(Feb 04 2021 at 19:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu Nicola</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225207007">said</a>:</p>
<blockquote>
<p>Thanks, I'll keep an eye for it. I think this is the first time I see this <code>trait Query: for&lt;'d&gt; QueryDb&lt;'d&gt;</code> idiom</p>
</blockquote>
<p>do you know what that <code>for</code> means?</p>



<a name="225207065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207065">(Feb 04 2021 at 19:09)</a>:</h4>
<p>but <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> do you remember how the list of things is supposed to be de-duplicated?</p>



<a name="225207097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207097">(Feb 04 2021 at 19:09)</a>:</h4>
<p>nope</p>



<a name="225207132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207132">(Feb 04 2021 at 19:09)</a>:</h4>
<p>I was going to start debugging it</p>



<a name="225207134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207134" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207134">(Feb 04 2021 at 19:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225207044">said</a>:</p>
<blockquote>
<p>do you know what that <code>for</code> means?</p>
</blockquote>
<p>Yeah.. I mean, I can read it, but it seems quite subtle</p>



<a name="225207146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207146">(Feb 04 2021 at 19:09)</a>:</h4>
<p>but as you can see, I'm procrastinating a bit more :)</p>



<a name="225207169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207169">(Feb 04 2021 at 19:09)</a>:</h4>
<p>That's my fault, sorry</p>



<a name="225207314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207314">(Feb 04 2021 at 19:10)</a>:</h4>
<p>no no not at all ;), and it's a pleasure to hear what you're saying</p>



<a name="225207326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207326">(Feb 04 2021 at 19:10)</a>:</h4>
<p>you're my excuse to not do what I should ;)</p>



<a name="225207397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225207397" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225207397">(Feb 04 2021 at 19:11)</a>:</h4>
<p>the usual excuse of a procrastinator :P</p>



<a name="225208662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225208662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225208662">(Feb 04 2021 at 19:21)</a>:</h4>
<p>I'm actually in a meeting so technically i don't have a lot of bandwidth ;)</p>



<a name="225208682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225208682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225208682">(Feb 04 2021 at 19:21)</a>:</h4>
<p>but I was hoping I can multitask a little :p</p>



<a name="225209230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225209230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225209230">(Feb 04 2021 at 19:25)</a>:</h4>
<p>ok, I can reproduce the problem at least</p>



<a name="225209263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225209263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225209263">(Feb 04 2021 at 19:25)</a>:</h4>
<p>I'm still compiling ...</p>



<a name="225209278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225209278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225209278">(Feb 04 2021 at 19:25)</a>:</h4>
<p>but I've reproduced the problem yesterday</p>



<a name="225209626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225209626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225209626">(Feb 04 2021 at 19:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu Nicola</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225207007">said</a>:</p>
<blockquote>
<p>Thanks, I'll keep an eye for it. I think this is the first time I see this <code>trait Query: for&lt;'d&gt; QueryDb&lt;'d&gt;</code> idiom</p>
</blockquote>
<p>I'd say the most known example is <code>trait DeserializeOwned : for&lt;'de&gt; Deserialize&lt;'de&gt;</code>, and there is a nice blog post about it here: <a href="https://journal.infinitenegativeutility.com/lifetime-quantification-and-higher-ranked-trait-bounds">https://journal.infinitenegativeutility.com/lifetime-quantification-and-higher-ranked-trait-bounds</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="225210354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225210354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225210354">(Feb 04 2021 at 19:32)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I guess this may be problematic <a href="https://github.com/rust-lang/rust/pull/80732/files#diff-2c47d694652e4851afc17740220c986ca445f9a9bc0e188893f2089e12024621R917">https://github.com/rust-lang/rust/pull/80732/files#diff-2c47d694652e4851afc17740220c986ca445f9a9bc0e188893f2089e12024621R917</a></p>



<a name="225210400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225210400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225210400">(Feb 04 2021 at 19:32)</a>:</h4>
<p>given that my computer takes a ton of time to compile I'm just reading the code and trying to see where the problem could be</p>



<a name="225210459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225210459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225210459">(Feb 04 2021 at 19:33)</a>:</h4>
<p>that could be a set</p>



<a name="225210855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225210855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225210855">(Feb 04 2021 at 19:35)</a>:</h4>
<p>so</p>



<a name="225210922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225210922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225210922">(Feb 04 2021 at 19:36)</a>:</h4>
<p>that's .. yeah could well be that</p>



<a name="225210926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225210926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225210926">(Feb 04 2021 at 19:36)</a>:</h4>
<p>something like that</p>



<a name="225211000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211000">(Feb 04 2021 at 19:36)</a>:</h4>
<p>I'm not getting line numbers in my backtace for some reason ?</p>



<a name="225211011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211011">(Feb 04 2021 at 19:36)</a>:</h4>
<p>did we change x.py here maybe...?</p>



<a name="225211126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211126">(Feb 04 2021 at 19:38)</a>:</h4>
<p>er, I mean config.toml</p>



<a name="225211220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211220">(Feb 04 2021 at 19:38)</a>:</h4>
<div class="codehilite"><pre><span></span><code>                self.one_bound_for_assoc_type(
                    || traits::supertraits(tcx, ty::Binder::bind(trait_ref)),
                    || &quot;Self&quot;.to_string(),
                    assoc_ident,
                    span,
                    || None,
                )?
</code></pre></div>



<a name="225211240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211240">(Feb 04 2021 at 19:38)</a>:</h4>
<div class="codehilite"><pre><span></span><code>                self.one_bound_for_assoc_type(
                    || traits::supertraits(tcx, trait_ref),
                    || trait_ref.print_only_trait_path().to_string(),
                    binding.item_name,
                    path_span,
                    || match binding.kind {
                        ConvertedBindingKind::Equality(ty) =&gt; Some(ty.to_string()),
                        _ =&gt; None,
                    },
                )?
</code></pre></div>



<a name="225211260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211260">(Feb 04 2021 at 19:38)</a>:</h4>
<p>I think it'd be one of those calls?</p>



<a name="225211349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211349">(Feb 04 2021 at 19:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225211000">said</a>:</p>
<blockquote>
<p>I'm not getting line numbers in my backtace for some reason ?</p>
</blockquote>
<p>unsure</p>



<a name="225211527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211527">(Feb 04 2021 at 19:40)</a>:</h4>
<p>I think i'm missing <code>debuginfo-level = 1</code> or something</p>



<a name="225211687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211687">(Feb 04 2021 at 19:42)</a>:</h4>
<p>I'll just <code>debug = true</code>, it looks like that's a decent default these days</p>



<a name="225211698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211698">(Feb 04 2021 at 19:42)</a>:</h4>
<p>yep</p>



<a name="225211723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211723">(Feb 04 2021 at 19:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225211240">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>                self.one_bound_for_assoc_type(
                    || traits::supertraits(tcx, trait_ref),
                    || trait_ref.print_only_trait_path().to_string(),
                    binding.item_name,
                    path_span,
                    || match binding.kind {
                        ConvertedBindingKind::Equality(ty) =&gt; Some(ty.to_string()),
                        _ =&gt; None,
                    },
                )?
</code></pre></div><br>
</p>
</blockquote>
<p>you're suggesting that maybe is that and not what I've mentioned?</p>



<a name="225211740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211740">(Feb 04 2021 at 19:42)</a>:</h4>
<p>i was but i might be totally off</p>



<a name="225211764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211764">(Feb 04 2021 at 19:42)</a>:</h4>
<p>from the stacktrace i saw, the failure was in <code>one_bound_for_assoc_type</code></p>



<a name="225211796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211796">(Feb 04 2021 at 19:43)</a>:</h4>
<p>maybe the line numbers will help</p>



<a name="225211834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211834">(Feb 04 2021 at 19:43)</a>:</h4>
<p>gonna try that out</p>



<a name="225211840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211840">(Feb 04 2021 at 19:43)</a>:</h4>
<p>it just compiled</p>



<a name="225211864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211864">(Feb 04 2021 at 19:43)</a>:</h4>
<p>but then I've tried to guess ;) and ...</p>



<a name="225211889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211889">(Feb 04 2021 at 19:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error[E0277]: the trait bound `rustc_hir::GenericBound&lt;&#39;_&gt;: std::cmp::Eq` is not satisfied
   --&gt; compiler/rustc_typeck/src/astconv/mod.rs:917:36
    |
917 |                         set.insert(ast_bound);
    |                                    ^^^^^^^^^ the trait `std::cmp::Eq` is not implemented for `rustc_hir::GenericBound&lt;&#39;_&gt;`
    |
    = note: required because of the requirements on the impl of `std::cmp::Eq` for `&amp;rustc_hir::GenericBound&lt;&#39;_&gt;`
</code></pre></div>



<a name="225211947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225211947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225211947">(Feb 04 2021 at 19:44)</a>:</h4>
<p>so yeah, going to compile what we have and try to get a backtrace</p>



<a name="225212475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225212475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225212475">(Feb 04 2021 at 19:48)</a>:</h4>
<p>well why I'm not even getting a backtrace</p>



<a name="225212859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225212859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225212859">(Feb 04 2021 at 19:51)</a>:</h4>
<div class="codehilite"><pre><span></span><code>        self.one_bound_for_assoc_type(
            || {
                traits::transitive_bounds_that_define_assoc_type(
                    tcx,
                    predicates.iter().filter_map(|(p, _)| {
                        p.to_opt_poly_trait_ref().map(|trait_ref| trait_ref.value)
                    }),
                    assoc_name,
                )
                .into_iter()
            },
            || param_name.to_string(),
            assoc_name,
            span,
            || None,
        )
</code></pre></div>



<a name="225212869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225212869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225212869">(Feb 04 2021 at 19:51)</a>:</h4>
<p>that's the call that fails</p>



<a name="225213072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225213072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225213072">(Feb 04 2021 at 19:52)</a>:</h4>
<p>right</p>



<a name="225213079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225213079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225213079">(Feb 04 2021 at 19:52)</a>:</h4>
<p>got that too</p>



<a name="225213222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225213222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225213222">(Feb 04 2021 at 19:54)</a>:</h4>
<div class="codehilite"><pre><span></span><code>   6: &lt;dyn rustc_typeck::astconv::AstConv&gt;::one_bound_for_assoc_type
             at ./compiler/rustc_typeck/src/astconv/mod.rs:1555:13
   7: &lt;dyn rustc_typeck::astconv::AstConv&gt;::find_bound_for_assoc_item
             at ./compiler/rustc_typeck/src/astconv/mod.rs:1425:9
</code></pre></div>



<a name="225213487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225213487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225213487">(Feb 04 2021 at 19:55)</a>:</h4>
<div class="codehilite"><pre><span></span><code>DEBUG rustc_typeck::astconv find_bound_for_assoc_item: predicates=[
    (
        Binder(TraitPredicate(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)),
        test.rs:3:6: 3:7 (#0),
    ),
    (
        Binder(TraitPredicate(&lt;Q as Query&gt;)),
        test.rs:3:6: 3:7 (#0),
    ),
    (
        Binder(TraitPredicate(&lt;Q as std::marker::Sized&gt;)),
        test.rs:3:6: 3:7 (#0),
    ),
]
</code></pre></div>



<a name="225213848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225213848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225213848">(Feb 04 2021 at 19:58)</a>:</h4>
<p>ohh, yeah, so <code>Group</code> could be defined in <code>Query</code> and in <code>QueryDb</code></p>



<a name="225214065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225214065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225214065">(Feb 04 2021 at 19:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225211240">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>                self.one_bound_for_assoc_type(
                    || traits::supertraits(tcx, trait_ref),
                    || trait_ref.print_only_trait_path().to_string(),
                    binding.item_name,
                    path_span,
                    || match binding.kind {
                        ConvertedBindingKind::Equality(ty) =&gt; Some(ty.to_string()),
                        _ =&gt; None,
                    },
                )?
</code></pre></div><br>
</p>
</blockquote>
<p>I see this code and I just get flashbacks to the (not-even-completed-yet) binder refactor <span aria-label="exhausted" class="emoji emoji-1f625" role="img" title="exhausted">:exhausted:</span></p>



<a name="225214322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225214322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225214322">(Feb 04 2021 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> would be happy to discuss that if you want to hand that off</p>



<a name="225214408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225214408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225214408">(Feb 04 2021 at 20:01)</a>:</h4>
<p>Let's move that discussion to that thread</p>



<a name="225218354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218354">(Feb 04 2021 at 20:32)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> you still around?</p>



<a name="225218356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218356">(Feb 04 2021 at 20:32)</a>:</h4>
<p>did you see what's the problem?</p>



<a name="225218369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218369">(Feb 04 2021 at 20:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225213487">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>DEBUG rustc_typeck::astconv find_bound_for_assoc_item: predicates=[
    (
        Binder(TraitPredicate(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)),
        test.rs:3:6: 3:7 (#0),
    ),
    (
        Binder(TraitPredicate(&lt;Q as Query&gt;)),
        test.rs:3:6: 3:7 (#0),
    ),
    (
        Binder(TraitPredicate(&lt;Q as std::marker::Sized&gt;)),
        test.rs:3:6: 3:7 (#0),
    ),
]
</code></pre></div><br>
</p>
</blockquote>
<p><span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<a name="225218383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218383">(Feb 04 2021 at 20:32)</a>:</h4>
<p>ish</p>



<a name="225218386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218386">(Feb 04 2021 at 20:33)</a>:</h4>
<p>no, i missed that</p>



<a name="225218406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218406">(Feb 04 2021 at 20:33)</a>:</h4>
<p>both <code>Query</code> and <code>QueryDb</code> define <code>Group</code></p>



<a name="225218454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218454">(Feb 04 2021 at 20:33)</a>:</h4>
<p>the thing is ... what to do to avoid having that</p>



<a name="225218542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218542">(Feb 04 2021 at 20:34)</a>:</h4>
<p>ok so</p>



<a name="225218560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218560" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218560">(Feb 04 2021 at 20:34)</a>:</h4>
<p>do we want all supertraits then? or we want just to find one supertrait in the chain that defines the assoc_name thing?</p>



<a name="225218562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218562">(Feb 04 2021 at 20:34)</a>:</h4>
<p>really it's just <code>QueryDb</code></p>



<a name="225218578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218578">(Feb 04 2021 at 20:34)</a>:</h4>
<p>it's two routes to the same thing</p>



<a name="225218590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218590">(Feb 04 2021 at 20:34)</a>:</h4>
<p>right</p>



<a name="225218594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218594">(Feb 04 2021 at 20:34)</a>:</h4>
<p>something is confusing to me</p>



<a name="225218654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218654">(Feb 04 2021 at 20:35)</a>:</h4>
<p>or we want the thing that "immediately" defines the thing</p>



<a name="225218707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218707">(Feb 04 2021 at 20:35)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/53cda05e023b0aea5449938e1a5b872257e4e106/compiler/rustc_typeck/src/astconv/mod.rs#L784-L789">https://github.com/rust-lang/rust/blob/53cda05e023b0aea5449938e1a5b872257e4e106/compiler/rustc_typeck/src/astconv/mod.rs#L784-L789</a></p>



<a name="225218718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218718">(Feb 04 2021 at 20:35)</a>:</h4>
<p>this is probably giving me things from the supertraits too</p>



<a name="225218791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218791">(Feb 04 2021 at 20:36)</a>:</h4>
<p>or we either want just things defined in that specific type and not super types</p>



<a name="225218805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218805">(Feb 04 2021 at 20:36)</a>:</h4>
<p>or we want to not list all the supertraits</p>



<a name="225218843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218843">(Feb 04 2021 at 20:36)</a>:</h4>
<p>hmm now I'm confused too</p>



<a name="225218861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218861">(Feb 04 2021 at 20:36)</a>:</h4>
<p>if so, why do we call supertraits?</p>



<a name="225218927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225218927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225218927">(Feb 04 2021 at 20:37)</a>:</h4>
<p>so</p>



<a name="225219100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225219100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225219100">(Feb 04 2021 at 20:38)</a>:</h4>
<p>ok, I have 20 minutes where I can actually concentrate on this now</p>



<a name="225219773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225219773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225219773">(Feb 04 2021 at 20:44)</a>:</h4>
<p>ok, <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span>, I'm reading the code</p>



<a name="225219781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225219781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225219781">(Feb 04 2021 at 20:44)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="225219795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225219795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225219795">(Feb 04 2021 at 20:44)</a>:</h4>
<p>I guess that the <code>transitive_bounds_that_define_assoc_type</code> function is supposednot supposed to generate duplicates</p>



<a name="225219804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225219804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225219804">(Feb 04 2021 at 20:45)</a>:</h4>
<p>and indeed it has a <code>FxIndexSet</code></p>



<a name="225219985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225219985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225219985">(Feb 04 2021 at 20:46)</a>:</h4>
<p>but</p>



<a name="225219997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225219997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225219997">(Feb 04 2021 at 20:46)</a>:</h4>
<p>it seems like somehow that is not sufficient</p>



<a name="225220259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220259">(Feb 04 2021 at 20:48)</a>:</h4>
<p>I added some debug output</p>



<a name="225220284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220284">(Feb 04 2021 at 20:49)</a>:</h4>
<p>well, you don't even need that debug output</p>



<a name="225220292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220292">(Feb 04 2021 at 20:49)</a>:</h4>
<p>if you run with <code>-Zverbose</code></p>



<a name="225220312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220312">(Feb 04 2021 at 20:49)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Binder(&lt;Q as QueryDb&lt;ReLateBound(DebruijnIndex(0), BoundRegion { kind: BrNamed(DefId(0:20 ~ issue_80732[317d]::Query::&#39;d), &#39;d) })&gt;&gt;)
Binder(&lt;Q as QueryDb&lt;ReLateBound(DebruijnIndex(0), BoundRegion { kind: BrNamed(DefId(0:7 ~ issue_80732[317d]::{impl#0}::&#39;d), &#39;d) })&gt;&gt;)
</code></pre></div>



<a name="225220434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220434">(Feb 04 2021 at 20:50)</a>:</h4>
<p>hmm</p>



<a name="225220437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220437">(Feb 04 2021 at 20:50)</a>:</h4>
<p>the problem here is that we have two equivalent bounds</p>



<a name="225220448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220448">(Feb 04 2021 at 20:50)</a>:</h4>
<p>but</p>



<a name="225220459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220459">(Feb 04 2021 at 20:50)</a>:</h4>
<p>basically we have the equivalent of</p>



<a name="225220463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220463">(Feb 04 2021 at 20:50)</a>:</h4>
<p>are not ==</p>



<a name="225220486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220486">(Feb 04 2021 at 20:50)</a>:</h4>
<p><code>for&lt;'a&gt; Q: QueryDb&lt;'a&gt;</code></p>



<a name="225220496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220496">(Feb 04 2021 at 20:50)</a>:</h4>
<p><code>for&lt;'b&gt; Q: QueryDb&lt;'b&gt;</code></p>



<a name="225220504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220504">(Feb 04 2021 at 20:50)</a>:</h4>
<p>let me see what the other elaborator does</p>



<a name="225220518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220518">(Feb 04 2021 at 20:50)</a>:</h4>
<p>we have a way to "canonicalize" those names</p>



<a name="225220522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220522">(Feb 04 2021 at 20:50)</a>:</h4>
<p>and maybe it does that</p>



<a name="225220533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220533">(Feb 04 2021 at 20:51)</a>:</h4>
<p>I see</p>



<a name="225220577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220577">(Feb 04 2021 at 20:51)</a>:</h4>
<p>it's weird</p>



<a name="225220585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220585">(Feb 04 2021 at 20:51)</a>:</h4>
<p>it doesn't obviously do that</p>



<a name="225220611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220611">(Feb 04 2021 at 20:51)</a>:</h4>
<p>point me to the code you're looking</p>



<a name="225220623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220623">(Feb 04 2021 at 20:51)</a>:</h4>
<p>when you referred to the other elaborator</p>



<a name="225220692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220692">(Feb 04 2021 at 20:52)</a>:</h4>
<p>I'm referring to <code>rustc_infer::traits:util::Elaborator</code></p>



<a name="225220792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220792">(Feb 04 2021 at 20:53)</a>:</h4>
<p>let's do a test</p>



<a name="225220813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220813">(Feb 04 2021 at 20:53)</a>:</h4>
<p>if we replace <code>transitive_bounds_that_define_assoc_type</code> with <code>transitive_bounds</code>..</p>



<a name="225220863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225220863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225220863">(Feb 04 2021 at 20:53)</a>:</h4>
<p>does the error go away?</p>



<a name="225221117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225221117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225221117">(Feb 04 2021 at 20:56)</a>:</h4>
<p>(I'm trying it)</p>



<a name="225222088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225222088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225222088">(Feb 04 2021 at 21:03)</a>:</h4>
<p>let me know what happens</p>



<a name="225222095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225222095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225222095">(Feb 04 2021 at 21:03)</a>:</h4>
<p>I need to leave right now</p>



<a name="225323545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225323545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225323545">(Feb 05 2021 at 16:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225220813">said</a>:</p>
<blockquote>
<p>if we replace <code>transitive_bounds_that_define_assoc_type</code> with <code>transitive_bounds</code>..</p>
</blockquote>
<p>to continue, yeah, this case works if we do that</p>



<a name="225323812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225323812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225323812">(Feb 05 2021 at 16:46)</a>:</h4>
<p>ok so</p>



<a name="225323824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225323824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225323824">(Feb 05 2021 at 16:47)</a>:</h4>
<p>that is not the right thing to do -- it basically 'undoes' the whole point of the PR</p>



<a name="225323846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225323846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225323846">(Feb 05 2021 at 16:47)</a>:</h4>
<p>but the question is, why does it work and the new version doesn't?</p>



<a name="225324624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324624">(Feb 05 2021 at 16:52)</a>:</h4>
<p>yeah</p>



<a name="225324631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324631">(Feb 05 2021 at 16:52)</a>:</h4>
<p>no idea</p>



<a name="225324635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324635">(Feb 05 2021 at 16:52)</a>:</h4>
<p>I was going to debug it</p>



<a name="225324674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324674">(Feb 05 2021 at 16:52)</a>:</h4>
<p>me too</p>



<a name="225324704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324704" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324704">(Feb 05 2021 at 16:52)</a>:</h4>
<p>I'm thinking to add <code>debug!</code> statements in the <code>Elaborator</code></p>



<a name="225324716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324716">(Feb 05 2021 at 16:53)</a>:</h4>
<p>to see each trait ref that gets added</p>



<a name="225324718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324718">(Feb 05 2021 at 16:53)</a>:</h4>
<p>will be back in a bit</p>



<a name="225324727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324727">(Feb 05 2021 at 16:53)</a>:</h4>
<p><em>something</em> must be different</p>



<a name="225324779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324779">(Feb 05 2021 at 16:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code>DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as std::marker::Sized&gt;)
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as Query&gt;)
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)
DEBUG rustc_typeck::astconv matching_candidates=[Binder(&lt;Q as std::marker::Sized&gt;), Binder(&lt;Q as Query&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)]
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as std::marker::Sized&gt;)
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as Query&gt;)
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)
DEBUG rustc_typeck::astconv matching_candidates=[Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)]
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as std::marker::Sized&gt;)
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as Query&gt;)
DEBUG rustc_infer::traits::util super_predicates: data=TraitPredicate(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)
</code></pre></div>



<a name="225324811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324811">(Feb 05 2021 at 16:53)</a>:</h4>
<p>that's the working version</p>



<a name="225324827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324827">(Feb 05 2021 at 16:53)</a>:</h4>
<p>try it with <code>-Zverbose</code></p>



<a name="225324837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324837">(Feb 05 2021 at 16:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code>DEBUG rustc_typeck::collect super_predicates_that_define_assoc_type(trait_def_id=DefId(2:2086 ~ core[f78c]::marker::Sized), assoc_name=Some(Group#0))
DEBUG rustc_typeck::collect super_predicates_that_define_assoc_type(trait_def_id=DefId(0:19 ~ test[317d]::Query), assoc_name=Some(Group#0))
DEBUG rustc_typeck::collect super_predicates_that_define_assoc_type: local trait_def_id=DefId(0:19 ~ test[317d]::Query)
DEBUG rustc_typeck::astconv instantiate_poly_trait_ref(TraitRef { path: Path { span: test.rs:29:26: 29:37 (#0), res: Def(Trait, DefId(0:15 ~ test[317d]::QueryDb)), segments: [PathSegment { ident: QueryDb#0, hir_id: Some(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 3 }), res: Some(Def(Trait, DefId(0:15 ~ test[317d]::QueryDb))), args: Some(GenericArgs { args: [Lifetime(lifetime(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 2 }: &#39;d))], bindings: [], parenthesized: false }), infer_args: false }] }, hir_ref_id: HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 4 } }, def_id=DefId(0:15 ~ test[317d]::QueryDb))
DEBUG rustc_typeck::astconv create_substs_for_ast_trait_ref(trait_segment=PathSegment { ident: QueryDb#0, hir_id: Some(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 3 }), res: Some(Def(Trait, DefId(0:15 ~ test[317d]::QueryDb))), args: Some(GenericArgs { args: [Lifetime(lifetime(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 2 }: &#39;d))], bindings: [], parenthesized: false }), infer_args: false })
DEBUG rustc_typeck::astconv create_substs_for_ast_path(def_id=DefId(0:15 ~ test[317d]::QueryDb), self_ty=Some(Self), generic_args=GenericArgs { args: [Lifetime(lifetime(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 2 }: &#39;d))], bindings: [], parenthesized: false })
DEBUG rustc_typeck::astconv ast_region_to_region(lifetime=lifetime(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 2 }: &#39;d)) yields ReLateBound(DebruijnIndex(0), BoundRegion { kind: BrNamed(DefId(0:20 ~ test[317d]::Query::&#39;d), &#39;d) })
DEBUG rustc_typeck::astconv create_substs_for_ast_path(generic_params=Generics { parent: None, parent_count: 0, params: [GenericParamDef { name: &quot;Self&quot;, def_id: DefId(0:15 ~ test[317d]::QueryDb), index: 0, pure_wrt_drop: false, kind: Type { has_default: false, object_lifetime_default: Empty, synthetic: None } }, GenericParamDef { name: &quot;\&#39;d&quot;, def_id: DefId(0:16 ~ test[317d]::QueryDb::&#39;d), index: 1, pure_wrt_drop: false, kind: Lifetime }], param_def_id_to_index: {DefId(0:16 ~ test[317d]::QueryDb::&#39;d): 1, DefId(0:15 ~ test[317d]::QueryDb): 0}, has_self: true, has_late_bound_regions: None }, self_ty=Some(Self)) -&gt; [Self, ReLateBound(DebruijnIndex(0), BoundRegion { kind: BrNamed(DefId(0:20 ~ test[317d]::Query::&#39;d), &#39;d) })]
DEBUG rustc_typeck::astconv instantiate_poly_trait_ref(TraitRef { path: Path { span: test.rs:29:26: 29:37 (#0), res: Def(Trait, DefId(0:15 ~ test[317d]::QueryDb)), segments: [PathSegment { ident: QueryDb#0, hir_id: Some(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 3 }), res: Some(Def(Trait, DefId(0:15 ~ test[317d]::QueryDb))), args: Some(GenericArgs { args: [Lifetime(lifetime(HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 2 }: &#39;d))], bindings: [], parenthesized: false }), infer_args: false }] }, hir_ref_id: HirId { owner: DefId(0:19 ~ test[317d]::Query), local_id: 4 } }, bounds=Bounds { region_bounds: [], trait_bounds: [(Binder(&lt;Self as QueryDb&lt;&#39;d&gt;&gt;), test.rs:29:18: 29:37 (#0), NotConst)], projection_bounds: [], implicitly_sized: None }) -&gt; Binder(&lt;Self as QueryDb&lt;&#39;d&gt;&gt;)
DEBUG rustc_infer::traits::util transitive_bounds_that_define_assoc_type: trait_refs={Binder(&lt;Q as std::marker::Sized&gt;), Binder(&lt;Q as Query&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)}
DEBUG rustc_typeck::astconv matching_candidates=[Binder(&lt;Q as std::marker::Sized&gt;), Binder(&lt;Q as Query&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)]
DEBUG rustc_infer::traits::util transitive_bounds_that_define_assoc_type: trait_refs={Binder(&lt;Q as std::marker::Sized&gt;), Binder(&lt;Q as Query&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)}
DEBUG rustc_typeck::astconv matching_candidates=[Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)]
DEBUG rustc_infer::traits::util transitive_bounds_that_define_assoc_type: trait_refs={Binder(&lt;Q as std::marker::Sized&gt;), Binder(&lt;Q as Query&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;), Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)}
DEBUG rustc_typeck::astconv one_bound_for_assoc_type: bound = Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)
DEBUG rustc_typeck::astconv one_bound_for_assoc_type: bound2 = Binder(&lt;Q as QueryDb&lt;&#39;d&gt;&gt;)
</code></pre></div>



<a name="225324860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324860">(Feb 05 2021 at 16:53)</a>:</h4>
<p>that's the non working version</p>



<a name="225324915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225324915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225324915">(Feb 05 2021 at 16:54)</a>:</h4>
<p>need to make a bit sense of that but will be back in 15 mins</p>



<a name="225329020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329020">(Feb 05 2021 at 17:23)</a>:</h4>
<p>in the non working version, matching candidates have two of <code>Binder(&lt;Q as QueryDb&lt;'d&gt;&gt;)</code></p>



<a name="225329121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329121">(Feb 05 2021 at 17:24)</a>:</h4>
<p>You do need to use <code>-Zverbose</code> because just seeing <code>'d</code> is not enough</p>



<a name="225329241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329241">(Feb 05 2021 at 17:25)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="225329281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329281">(Feb 05 2021 at 17:25)</a>:</h4>
<p>running with <code>-Zverbose</code></p>



<a name="225329313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329313">(Feb 05 2021 at 17:25)</a>:</h4>
<p>and gonna try to figure out why there's two things there</p>



<a name="225329459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329459">(Feb 05 2021 at 17:26)</a>:</h4>
<p>are you saying that one is because of an HRTB and the other one is because of a simple lifetime?</p>



<a name="225329464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329464">(Feb 05 2021 at 17:26)</a>:</h4>
<p>or what?</p>



<a name="225329680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329680">(Feb 05 2021 at 17:28)</a>:</h4>
<p>no, they are both HRTB from what I can tell</p>



<a name="225329685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329685">(Feb 05 2021 at 17:28)</a>:</h4>
<p>but the <em>name</em> is different</p>



<a name="225329713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329713">(Feb 05 2021 at 17:28)</a>:</h4>
<p>it's "as if" you had <code>for&lt;'a&gt;</code> and <code>for&lt;'b&gt;</code></p>



<a name="225329732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225329732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225329732">(Feb 05 2021 at 17:28)</a>:</h4>
<p>i think that the name is different only in some unprinted part, a <code>DefId</code> or something</p>



<a name="225330172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225330172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225330172">(Feb 05 2021 at 17:32)</a>:</h4>
<p>ok so</p>



<a name="225330179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225330179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225330179">(Feb 05 2021 at 17:32)</a>:</h4>
<p>i am digging a bit through the logs</p>



<a name="225330485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225330485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225330485">(Feb 05 2021 at 17:34)</a>:</h4>
<p>ahh I see</p>



<a name="225331013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225331013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225331013">(Feb 05 2021 at 17:39)</a>:</h4>
<p>I guess ...</p>



<a name="225331017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225331017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225331017">(Feb 05 2021 at 17:39)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">bound_predicate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">super_predicate</span><span class="p">.</span><span class="n">kind</span><span class="p">();</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">subst_predicate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">super_predicate</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">subst_supertrait</span><span class="p">(</span><span class="n">tcx</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bound_predicate</span><span class="p">.</span><span class="n">rebind</span><span class="p">(</span><span class="n">trait_ref</span><span class="p">.</span><span class="n">skip_binder</span><span class="p">()));</span><span class="w"></span>
</code></pre></div>



<a name="225331021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225331021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225331021">(Feb 05 2021 at 17:39)</a>:</h4>
<p>may be wrong</p>



<a name="225332592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332592">(Feb 05 2021 at 17:52)</a>:</h4>
<p>I think I more or less see what's going on</p>



<a name="225332668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332668">(Feb 05 2021 at 17:52)</a>:</h4>
<p>I start with a situation like</p>



<a name="225332674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332674">(Feb 05 2021 at 17:52)</a>:</h4>
<blockquote>
<p>DEBUG rustc_infer::traits::util transitive_bounds_that_define_assoc_type=(bounds=[Binder(&lt;Q as QueryDb&lt;ReLateBound(DebruijnIndex(0), BoundRegion { kind: BrNamed(DefId(0:7 ~ test[317d]::{impl#0}::'d), 'd) })&gt;&gt;), Binder(&lt;Q as Query&gt;), Binder(&lt;Q as std::marker::Sized&gt;)], assoc_name=Group#0)</p>
</blockquote>



<a name="225332722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332722">(Feb 05 2021 at 17:52)</a>:</h4>
<p>and end with</p>



<a name="225332730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332730">(Feb 05 2021 at 17:52)</a>:</h4>
<blockquote>
<p>DEBUG rustc_infer::traits::util transitive_bounds_that_define_assoc_type -&gt; {Binder(&lt;Q as std::marker::Sized&gt;), Binder(&lt;Q as Query&gt;), Binder(&lt;Q as QueryDb&lt;ReLateBound(DebruijnIndex(0), BoundRegion { kind: BrNamed(DefId(0:20 ~ test[317d]::Query::'d), 'd) })&gt;&gt;), Binder(&lt;Q as QueryDb&lt;ReLateBound(DebruijnIndex(0), BoundRegion { kind: BrNamed(DefId(0:7 ~ test[317d]::{impl#0}::'d), 'd) })&gt;&gt;)}</p>
</blockquote>



<a name="225332804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332804">(Feb 05 2021 at 17:53)</a>:</h4>
<p>there's this first <code>QueryDb</code> and the other one that we get when we ask for the super traits of <code>Query</code></p>



<a name="225332844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332844">(Feb 05 2021 at 17:53)</a>:</h4>
<p>we end with 2 and insert on the FxHashSet doesn't consider them equal</p>



<a name="225332987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225332987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225332987">(Feb 05 2021 at 17:54)</a>:</h4>
<p>not 100% yet what's different and how is equality implemented for <code>Binder</code></p>



<a name="225333003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333003">(Feb 05 2021 at 17:54)</a>:</h4>
<p>ugh</p>



<a name="225333012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333012">(Feb 05 2021 at 17:55)</a>:</h4>
<p>I have another set of calls now :)</p>



<a name="225333021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333021">(Feb 05 2021 at 17:55)</a>:</h4>
<p>i was having lunch</p>



<a name="225333033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333033">(Feb 05 2021 at 17:55)</a>:</h4>
<p>so</p>



<a name="225333054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333054">(Feb 05 2021 at 17:55)</a>:</h4>
<p>hmm let me see i have 5 minutes :)</p>



<a name="225333085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333085">(Feb 05 2021 at 17:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225332844">said</a>:</p>
<blockquote>
<p>we end with 2 and insert on the FxHashSet doesn't consider them equal</p>
</blockquote>
<p>right</p>



<a name="225333092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333092">(Feb 05 2021 at 17:55)</a>:</h4>
<p>but what I don't know is --</p>



<a name="225333103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333103">(Feb 05 2021 at 17:55)</a>:</h4>
<p>why doesn't that happen in the other code?</p>



<a name="225333192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333192">(Feb 05 2021 at 17:56)</a>:</h4>
<p>in <code>transitive_bounds</code>?</p>



<a name="225333218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333218">(Feb 05 2021 at 17:56)</a>:</h4>
<p>yes</p>



<a name="225333220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333220">(Feb 05 2021 at 17:56)</a>:</h4>
<p>I guess that doesn't use an <code>FxHashSet</code>?</p>



<a name="225333226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333226">(Feb 05 2021 at 17:56)</a>:</h4>
<p>it does</p>



<a name="225333235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333235" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333235">(Feb 05 2021 at 17:56)</a>:</h4>
<p>hmm</p>



<a name="225333240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333240">(Feb 05 2021 at 17:56)</a>:</h4>
<p>checking ...</p>



<a name="225333254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333254">(Feb 05 2021 at 17:56)</a>:</h4>
<p>oh wait!</p>



<a name="225333259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333259">(Feb 05 2021 at 17:56)</a>:</h4>
<p>it <em>doesn't</em></p>



<a name="225333281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333281">(Feb 05 2021 at 17:56)</a>:</h4>
<p>ok, mystery solved</p>



<a name="225333284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333284">(Feb 05 2021 at 17:56)</a>:</h4>
<p>ahh :)</p>



<a name="225333290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333290">(Feb 05 2021 at 17:57)</a>:</h4>
<p>it uses a <code>PredicateSet</code>, and you should too</p>



<a name="225333306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333306">(Feb 05 2021 at 17:57)</a>:</h4>
<p>and that <code>PredicateSet</code> is precisely where the calls to <code>anonymize_predicate</code> occur</p>



<a name="225333314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333314">(Feb 05 2021 at 17:57)</a>:</h4>
<p>now yes :)</p>



<a name="225333330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333330">(Feb 05 2021 at 17:57)</a>:</h4>
<p>great</p>



<a name="225333332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333332">(Feb 05 2021 at 17:57)</a>:</h4>
<p><code>anonymize_predicate</code> is what does the renaming</p>



<a name="225333341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333341">(Feb 05 2021 at 17:57)</a>:</h4>
<p>I figured that was the fix, but I couldn't quite tell why it was necessary :)</p>



<a name="225333373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225333373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225333373">(Feb 05 2021 at 17:57)</a>:</h4>
<p>cool :)</p>



<a name="225334416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225334416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225334416">(Feb 05 2021 at 18:04)</a>:</h4>
<p>yeah, that's great :)</p>



<a name="225338185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225338185" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225338185">(Feb 05 2021 at 18:33)</a>:</h4>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/compiler/rustc_infer/src/traits/util.rs b/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gh">index 8a1035707fe..f084c2570a0 100644</span>
<span class="gd">--- a/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gi">+++ b/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gu">@@ -295,17 +295,20 @@ pub fn transitive_bounds_that_define_assoc_type&lt;'tcx&gt;(</span>
 ) -&gt; FxIndexSet&lt;ty::PolyTraitRef&lt;'tcx&gt;&gt; {
     let mut stack: Vec&lt;_&gt; = bounds.collect();
     let mut trait_refs = FxIndexSet::default();
<span class="gi">+    let mut visited = PredicateSet::new(tcx);</span>

     while let Some(trait_ref) = stack.pop() {
         if trait_refs.insert(trait_ref) {
             let super_predicates =
                 tcx.super_predicates_that_define_assoc_type((trait_ref.def_id(), Some(assoc_name)));
             for (super_predicate, _) in super_predicates.predicates {
<span class="gd">-                let bound_predicate = super_predicate.kind();</span>
<span class="gd">-                let subst_predicate = super_predicate</span>
<span class="gd">-                    .subst_supertrait(tcx, &amp;bound_predicate.rebind(trait_ref.skip_binder()));</span>
<span class="gd">-                if let Some(binder) = subst_predicate.to_opt_poly_trait_ref() {</span>
<span class="gd">-                    stack.push(binder.value);</span>
<span class="gi">+                if visited.insert(*super_predicate) {</span>
<span class="gi">+                    let bound_predicate = super_predicate.kind();</span>
<span class="gi">+                    let subst_predicate = super_predicate</span>
<span class="gi">+                        .subst_supertrait(tcx, &amp;bound_predicate.rebind(trait_ref.skip_binder()));</span>
<span class="gi">+                    if let Some(binder) = subst_predicate.to_opt_poly_trait_ref() {</span>
<span class="gi">+                        stack.push(binder.value);</span>
<span class="gi">+                    }</span>
                 }
             }
         }
</code></pre></div>



<a name="225338208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225338208" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225338208">(Feb 05 2021 at 18:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> was hoping that that worked, but does not</p>



<a name="225338660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225338660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225338660">(Feb 05 2021 at 18:37)</a>:</h4>
<p>ohh it's wrong :)</p>



<a name="225338703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225338703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225338703">(Feb 05 2021 at 18:37)</a>:</h4>
<p>what I've done is silly</p>



<a name="225338780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225338780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225338780">(Feb 05 2021 at 18:38)</a>:</h4>
<p>the problem is that the <code>PredicateSet</code> is about predicates but up before the loop I have trait_refs</p>



<a name="225338917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225338917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225338917">(Feb 05 2021 at 18:39)</a>:</h4>
<p>clearly I don't know that much what all these data structures represent and the work that <span class="user-mention" data-user-id="232957">@Jack Huey</span> proposed about refactoring <code>Binder</code> may be a good opportunity to learn better</p>



<a name="225339059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339059">(Feb 05 2021 at 18:41)</a>:</h4>
<p>The key thing about <code>PredicateSet</code> is the <code>anonymize_predicate</code> call, I think</p>



<a name="225339074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339074">(Feb 05 2021 at 18:41)</a>:</h4>
<p>anyway</p>



<a name="225339079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339079">(Feb 05 2021 at 18:41)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">                </span><span class="n">traits</span>::<span class="n">transitive_bounds_that_define_assoc_type</span><span class="p">(</span><span class="w"></span>
<span class="w">                    </span><span class="n">tcx</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="n">predicates</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">filter_map</span><span class="p">(</span><span class="o">|</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="n">p</span><span class="p">.</span><span class="n">to_opt_poly_trait_ref</span><span class="p">().</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">trait_ref</span><span class="o">|</span><span class="w"> </span><span class="n">trait_ref</span><span class="p">.</span><span class="n">value</span><span class="p">)</span><span class="w"></span>
<span class="w">                    </span><span class="p">}),</span><span class="w"></span>
<span class="w">                    </span><span class="n">assoc_name</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="n">into_iter</span><span class="p">()</span><span class="w"></span>
</code></pre></div>



<a name="225339104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339104">(Feb 05 2021 at 18:41)</a>:</h4>
<p>I already had predicates before calling that method</p>



<a name="225339200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339200">(Feb 05 2021 at 18:42)</a>:</h4>
<p>so I can fix it from there</p>



<a name="225339239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339239">(Feb 05 2021 at 18:43)</a>:</h4>
<p>I mean, you could just do <code>tcx.anonymize_late_bound_regions(trait_ref)</code></p>



<a name="225339316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339316">(Feb 05 2021 at 18:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225338185">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/compiler/rustc_infer/src/traits/util.rs b/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gh">index 8a1035707fe..f084c2570a0 100644</span>
<span class="gd">--- a/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gi">+++ b/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gu">@@ -295,17 +295,20 @@ pub fn transitive_bounds_that_define_assoc_type&lt;'tcx&gt;(</span>
 ) -&gt; FxIndexSet&lt;ty::PolyTraitRef&lt;'tcx&gt;&gt; {
     let mut stack: Vec&lt;_&gt; = bounds.collect();
     let mut trait_refs = FxIndexSet::default();
<span class="gi">+    let mut visited = PredicateSet::new(tcx);</span>

     while let Some(trait_ref) = stack.pop() {
         if trait_refs.insert(trait_ref) {
             let super_predicates =
                 tcx.super_predicates_that_define_assoc_type((trait_ref.def_id(), Some(assoc_name)));
             for (super_predicate, _) in super_predicates.predicates {
<span class="gd">-                let bound_predicate = super_predicate.kind();</span>
<span class="gd">-                let subst_predicate = super_predicate</span>
<span class="gd">-                    .subst_supertrait(tcx, &amp;bound_predicate.rebind(trait_ref.skip_binder()));</span>
<span class="gd">-                if let Some(binder) = subst_predicate.to_opt_poly_trait_ref() {</span>
<span class="gd">-                    stack.push(binder.value);</span>
<span class="gi">+                if visited.insert(*super_predicate) {</span>
<span class="gi">+                    let bound_predicate = super_predicate.kind();</span>
<span class="gi">+                    let subst_predicate = super_predicate</span>
<span class="gi">+                        .subst_supertrait(tcx, &amp;bound_predicate.rebind(trait_ref.skip_binder()));</span>
<span class="gi">+                    if let Some(binder) = subst_predicate.to_opt_poly_trait_ref() {</span>
<span class="gi">+                        stack.push(binder.value);</span>
<span class="gi">+                    }</span>
                 }
             }
         }
</code></pre></div><br>
</p>
</blockquote>
<p>oops you are using <code>PredicateSet</code> here</p>



<a name="225339406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339406">(Feb 05 2021 at 18:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225339239">said</a>:</p>
<blockquote>
<p>I mean, you could just do <code>tcx.anonymize_late_bound_regions(trait_ref)</code></p>
</blockquote>
<p>ahh yeah, this should work then</p>



<a name="225339444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225339444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225339444">(Feb 05 2021 at 18:44)</a>:</h4>
<p>there's no need to use <code>PredicateSet</code></p>



<a name="225340285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340285">(Feb 05 2021 at 18:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> did you fix it now?</p>



<a name="225340304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340304">(Feb 05 2021 at 18:52)</a>:</h4>
<p>yes</p>



<a name="225340307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340307">(Feb 05 2021 at 18:52)</a>:</h4>
<p>about to push</p>



<a name="225340348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340348">(Feb 05 2021 at 18:52)</a>:</h4>
<p>wait</p>



<a name="225340352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340352">(Feb 05 2021 at 18:52)</a>:</h4>
<p>ok</p>



<a name="225340363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340363">(Feb 05 2021 at 18:53)</a>:</h4>
<p>go ahead and push :)</p>



<a name="225340380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340380">(Feb 05 2021 at 18:53)</a>:</h4>
<p>pushed to the PR</p>



<a name="225340392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340392">(Feb 05 2021 at 18:53)</a>:</h4>
<p>running all the tests locally meanwhile</p>



<a name="225340451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340451">(Feb 05 2021 at 18:53)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/80732">#80732</a></p>



<a name="225340534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340534">(Feb 05 2021 at 18:54)</a>:</h4>
<p>and this is the commit in question <a href="https://github.com/rust-lang/rust/pull/80732/commits/eb6681e42451636656e42a7f94a1f8d63de6d95f">https://github.com/rust-lang/rust/pull/80732/commits/eb6681e42451636656e42a7f94a1f8d63de6d95f</a></p>



<a name="225340884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340884">(Feb 05 2021 at 18:57)</a>:</h4>
<p>force pushing again because there are conflicts</p>



<a name="225340904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225340904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225340904">(Feb 05 2021 at 18:57)</a>:</h4>
<p>done</p>



<a name="225351089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351089">(Feb 05 2021 at 20:18)</a>:</h4>
<p>after the change there's a change in an stderr file</p>



<a name="225351102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351102">(Feb 05 2021 at 20:18)</a>:</h4>
<div class="codehilite"><pre><span></span><code>diff --git a/src/test/ui/associated-types/associated-types-project-from-hrtb-in-struct.stderr b/src/test/ui/associated-types/associated-types-project-from-hrtb-in-struct.stderr
index cadc3e9eab1..cf69b92f98e 100644
--- a/src/test/ui/associated-types/associated-types-project-from-hrtb-in-struct.stderr
+++ b/src/test/ui/associated-types/associated-types-project-from-hrtb-in-struct.stderr
@@ -18,8 +18,8 @@ LL |     TupleVariant(I::A),
    |
 help: use a fully qualified path with explicit lifetimes
    |
-LL | enum SomeEnum&lt;&#39;c, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
-LL |     TupleVariant(&lt;I as Foo&lt;&amp;&#39;c isize&gt;&gt;::A),
+LL | enum SomeEnum&lt;&#39;a, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
+LL |     TupleVariant(&lt;I as Foo&lt;&amp;&#39;a isize&gt;&gt;::A),
    |

 error[E0212]: cannot use the associated type of a trait with uninferred generic parameters
@@ -30,10 +30,10 @@ LL |     StructVariant { field: I::A },
    |
 help: use a fully qualified path with explicit lifetimes
    |
-LL | enum SomeEnum&lt;&#39;c, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
+LL | enum SomeEnum&lt;&#39;a, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
 LL |     TupleVariant(I::A),
 LL |
-LL |     StructVariant { field: &lt;I as Foo&lt;&amp;&#39;c isize&gt;&gt;::A },
+LL |     StructVariant { field: &lt;I as Foo&lt;&amp;&#39;a isize&gt;&gt;::A },
    |

 error[E0212]: cannot use the associated type of a trait with uninferred generic parameters
@@ -44,9 +44,9 @@ LL |     field: I::A,
    |
 help: use a fully qualified path with explicit lifetimes
    |
-LL | struct Why&lt;&#39;bb, &#39;a, &#39;b, &#39;c, &#39;d, &#39;e, &#39;f, &#39;g, &#39;h, &#39;i, &#39;j, &#39;k, &#39;n, &#39;o, &#39;p, &#39;q, &#39;r, &#39;s, &#39;t, &#39;u, &#39;v, &#39;w, &#39;x,
+LL | struct Why&lt;&#39;l, &#39;a, &#39;b, &#39;c, &#39;d, &#39;e, &#39;f, &#39;g, &#39;h, &#39;i, &#39;j, &#39;k, &#39;n, &#39;o, &#39;p, &#39;q, &#39;r, &#39;s, &#39;t, &#39;u, &#39;v, &#39;w, &#39;x,
 LL |     &#39;y, &#39;z, &#39;aa, I: for&lt;&#39;l, &#39;m&gt; Foo&lt;&amp;&#39;l &amp;&#39;m isize&gt;&gt; {
-LL |     field: &lt;I as Foo&lt;&amp;&#39;bb &amp;&#39;bb isize&gt;&gt;::A,
+LL |     field: &lt;I as Foo&lt;&amp;&#39;l &amp;&#39;l isize&gt;&gt;::A,
    |

 error: aborting due to 4 previous errors
</code></pre></div>



<a name="225351297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351297">(Feb 05 2021 at 20:20)</a>:</h4>
<p>not sure why that happens</p>



<a name="225351322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351322">(Feb 05 2021 at 20:21)</a>:</h4>
<p>and not really sure if it's relevant</p>



<a name="225351332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351332">(Feb 05 2021 at 20:21)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span class="user-mention" data-user-id="232957">@Jack Huey</span></p>



<a name="225351363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351363">(Feb 05 2021 at 20:21)</a>:</h4>
<p>seems plausible</p>



<a name="225351366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351366">(Feb 05 2021 at 20:21)</a>:</h4>
<p>I wouldn't wory about it</p>



<a name="225351386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351386">(Feb 05 2021 at 20:21)</a>:</h4>
<p>we might be visiting the list in a somewhat different order or something</p>



<a name="225351435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351435">(Feb 05 2021 at 20:22)</a>:</h4>
<p>the thing is</p>



<a name="225351436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351436">(Feb 05 2021 at 20:22)</a>:</h4>
<p>wait let me check</p>



<a name="225351447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351447">(Feb 05 2021 at 20:22)</a>:</h4>
<p>it looks a bit different, doesn't it</p>



<a name="225351453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351453">(Feb 05 2021 at 20:22)</a>:</h4>
<p>in particular check</p>



<a name="225351455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351455">(Feb 05 2021 at 20:22)</a>:</h4>
<div class="codehilite"><pre><span></span><code>-LL | enum SomeEnum&lt;&#39;c, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
-LL |     TupleVariant(&lt;I as Foo&lt;&amp;&#39;c isize&gt;&gt;::A),
+LL | enum SomeEnum&lt;&#39;a, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
+LL |     TupleVariant(&lt;I as Foo&lt;&amp;&#39;a isize&gt;&gt;::A),
</code></pre></div>



<a name="225351472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351472">(Feb 05 2021 at 20:22)</a>:</h4>
<p>oh I see</p>



<a name="225351488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351488">(Feb 05 2021 at 20:22)</a>:</h4>
<p>the <em>names</em> are different, but the meaning is the same</p>



<a name="225351498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351498">(Feb 05 2021 at 20:22)</a>:</h4>
<p>right</p>



<a name="225351505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351505">(Feb 05 2021 at 20:22)</a>:</h4>
<p>though that might give a compilation error because shadowing</p>



<a name="225351514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351514">(Feb 05 2021 at 20:22)</a>:</h4>
<p>huh, curious</p>



<a name="225351528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351528">(Feb 05 2021 at 20:23)</a>:</h4>
<p>are those old tests?</p>



<a name="225351539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351539">(Feb 05 2021 at 20:23)</a>:</h4>
<p>yes</p>



<a name="225351562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351562">(Feb 05 2021 at 20:23)</a>:</h4>
<p>I'm not sure what code generates those suggestions</p>



<a name="225351670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351670">(Feb 05 2021 at 20:24)</a>:</h4>
<p>and why this</p>



<a name="225351675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351675">(Feb 05 2021 at 20:24)</a>:</h4>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gd">--- a/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gi">+++ b/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gu">@@ -297,6 +297,7 @@ pub fn transitive_bounds_that_define_assoc_type&lt;'tcx&gt;(</span>
     let mut trait_refs = FxIndexSet::default();

     while let Some(trait_ref) = stack.pop() {
<span class="gi">+        let trait_ref = tcx.anonymize_late_bound_regions(trait_ref);</span>
         if trait_refs.insert(trait_ref) {
             let super_predicates =
                 tcx.super_predicates_that_define_assoc_type((trait_ref.def_id(), Some(assoc_name)));
</code></pre></div>



<a name="225351683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351683">(Feb 05 2021 at 20:24)</a>:</h4>
<p>changes that</p>



<a name="225351715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351715">(Feb 05 2021 at 20:24)</a>:</h4>
<p>well, unless is not that</p>



<a name="225351746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351746">(Feb 05 2021 at 20:24)</a>:</h4>
<p>can try that test without that change</p>



<a name="225351761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351761">(Feb 05 2021 at 20:24)</a>:</h4>
<p>anyway my question is</p>



<a name="225351776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351776">(Feb 05 2021 at 20:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225351455">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>-LL | enum SomeEnum&lt;&#39;c, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
-LL |     TupleVariant(&lt;I as Foo&lt;&amp;&#39;c isize&gt;&gt;::A),
+LL | enum SomeEnum&lt;&#39;a, &#39;b, I: for&lt;&#39;a&gt; Foo&lt;&amp;&#39;a isize&gt;&gt; {
+LL |     TupleVariant(&lt;I as Foo&lt;&amp;&#39;a isize&gt;&gt;::A),
</code></pre></div><br>
</p>
</blockquote>
<p>are those the same?</p>



<a name="225351940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225351940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225351940">(Feb 05 2021 at 20:26)</a>:</h4>
<p>I wasn't sure if using <code>'a</code> twice, one as a lifetime parameter of <code>SomeEnum</code> and another time as a HRTB of another bound <code>I</code> of a generic type is ok or not</p>



<a name="225352010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225352010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225352010">(Feb 05 2021 at 20:27)</a>:</h4>
<p>waot</p>



<a name="225352015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225352015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225352015">(Feb 05 2021 at 20:27)</a>:</h4>
<p>wait</p>



<a name="225352021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225352021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225352021">(Feb 05 2021 at 20:27)</a>:</h4>
<p>I dont' like that diff :)</p>



<a name="225352028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225352028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225352028">(Feb 05 2021 at 20:27)</a>:</h4>
<p>let me pull your branch</p>



<a name="225352148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225352148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225352148">(Feb 05 2021 at 20:28)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="225352448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225352448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225352448">(Feb 05 2021 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116266">Santiago Pastorino</span> <a href="#narrow/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles/near/225351675">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gd">--- a/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gi">+++ b/compiler/rustc_infer/src/traits/util.rs</span>
<span class="gu">@@ -297,6 +297,7 @@ pub fn transitive_bounds_that_define_assoc_type&lt;'tcx&gt;(</span>
     let mut trait_refs = FxIndexSet::default();

     while let Some(trait_ref) = stack.pop() {
<span class="gi">+        let trait_ref = tcx.anonymize_late_bound_regions(trait_ref);</span>
         if trait_refs.insert(trait_ref) {
             let super_predicates =
                 tcx.super_predicates_that_define_assoc_type((trait_ref.def_id(), Some(assoc_name)));
</code></pre></div><br>
</p>
</blockquote>
<p>I can confirm that the test changes with this change</p>



<a name="225523227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225523227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225523227">(Feb 08 2021 at 10:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> so I was looking a bit into this</p>



<a name="225523613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225523613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225523613">(Feb 08 2021 at 10:12)</a>:</h4>
<p>the relevant message is <a href="https://github.com/rust-lang/rust/blob/4940dd483a8448c0f1ef28d304fad88a9d983c4e/compiler/rustc_typeck/src/collect.rs#L372">generated around here</a></p>



<a name="225523629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225523629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225523629">(Feb 08 2021 at 10:13)</a>:</h4>
<p>so it must be something causing this <code>get_new_lifetime_name</code> to behave differently</p>



<a name="225525823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225525823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225525823">(Feb 08 2021 at 10:37)</a>:</h4>
<p>My guess would be that <em>somehow</em> we are getting the anonymized trait ref in there, and hence the <code>get_new_lifetime_name</code> is now collecting no named lifetimes</p>



<a name="225525832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225525832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225525832">(Feb 08 2021 at 10:37)</a>:</h4>
<p>I don't quite understand why this is different than before though</p>



<a name="225525837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225525837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225525837">(Feb 08 2021 at 10:37)</a>:</h4>
<p>Unless...</p>



<a name="225525876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225525876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225525876">(Feb 08 2021 at 10:37)</a>:</h4>
<p>OK, <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> -- this is what I think is different</p>



<a name="225525966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225525966" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225525966">(Feb 08 2021 at 10:38)</a>:</h4>
<p>In the original <code>Elaborator</code>, I think it has two distinct sets. One of them is for tracking which trait refs are <em>new</em> (and that contains anonymized results) and the other is for returning the result (and that does not)</p>



<a name="225544597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225544597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225544597">(Feb 08 2021 at 13:36)</a>:</h4>
<p>ohhh :facepalm:</p>



<a name="225545096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225545096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225545096">(Feb 08 2021 at 13:40)</a>:</h4>
<p>was just going to take a look at this and saw your messages</p>



<a name="225545099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225545099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225545099">(Feb 08 2021 at 13:40)</a>:</h4>
<p>fixing it</p>



<a name="225546008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225546008" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225546008">(Feb 08 2021 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> ready for review</p>



<a name="225546089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225546089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225546089">(Feb 08 2021 at 13:49)</a>:</h4>
<p>just in case <a href="https://github.com/rust-lang/rust/issues/80732">#80732</a>, just force pushed</p>



<a name="225548215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548215">(Feb 08 2021 at 14:05)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> maybe this needs a little bit better design, like we could return a new type on <code>transitive_bounds_that_define_assoc_type</code></p>



<a name="225548236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548236">(Feb 08 2021 at 14:05)</a>:</h4>
<p>something similar to <code>Supertraits</code></p>



<a name="225548260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548260">(Feb 08 2021 at 14:05)</a>:</h4>
<p>I don't know if that's necessary</p>



<a name="225548287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548287">(Feb 08 2021 at 14:05)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="225548344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548344">(Feb 08 2021 at 14:06)</a>:</h4>
<p>in any case, I was going to say, if makes sense maybe it's good for a follow-up PR</p>



<a name="225548355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548355">(Feb 08 2021 at 14:06)</a>:</h4>
<p>but anyway, whatever you prefer</p>



<a name="225548531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548531">(Feb 08 2021 at 14:07)</a>:</h4>
<p>Well</p>



<a name="225548564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548564">(Feb 08 2021 at 14:07)</a>:</h4>
<p>The only real reason to do so would be to return an iterator, I guess</p>



<a name="225548585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548585">(Feb 08 2021 at 14:08)</a>:</h4>
<p>I'm not sure how much that matters</p>



<a name="225548631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548631">(Feb 08 2021 at 14:08)</a>:</h4>
<p>If you were going to do so, we could do it with <code>-&gt; impl Iterator</code></p>



<a name="225548650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548650">(Feb 08 2021 at 14:08)</a>:</h4>
<p>well not possible</p>



<a name="225548653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548653">(Feb 08 2021 at 14:08)</a>:</h4>
<p>unsure why</p>



<a name="225548656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548656">(Feb 08 2021 at 14:08)</a>:</h4>
<p>let me show you</p>



<a name="225548680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548680">(Feb 08 2021 at 14:08)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error[E0277]: `Vec&lt;Binder&lt;rustc_middle::ty::TraitRef&lt;&#39;_&gt;&gt;&gt;` is not an iterator
   --&gt; compiler/rustc_infer/src/traits/util.rs:295:6
    |
295 | ) -&gt; impl Iterator&lt;Item = ty::PolyTraitRef&lt;&#39;tcx&gt;&gt; {
    |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `Vec&lt;Binder&lt;rustc_middle::ty::TraitRef&lt;&#39;_&gt;&gt;&gt;` is not an iterator
    |
    = help: the trait `ParallelIterator` is not implemented for `Vec&lt;Binder&lt;rustc_middle::ty::TraitRef&lt;&#39;_&gt;&gt;&gt;`
</code></pre></div>



<a name="225548688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548688">(Feb 08 2021 at 14:08)</a>:</h4>
<p>no I mean</p>



<a name="225548707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548707">(Feb 08 2021 at 14:08)</a>:</h4>
<p>you'd hvae to retool it a bit</p>



<a name="225548720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548720">(Feb 08 2021 at 14:09)</a>:</h4>
<p>probably use <code>std::iter::from_fn</code></p>



<a name="225548729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548729">(Feb 08 2021 at 14:09)</a>:</h4>
<p>right</p>



<a name="225548730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548730">(Feb 08 2021 at 14:09)</a>:</h4>
<p>honestly I doubt it matters</p>



<a name="225548755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548755">(Feb 08 2021 at 14:09)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="225548775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548775">(Feb 08 2021 at 14:09)</a>:</h4>
<p>why am I getting that error btw?</p>



<a name="225548796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548796">(Feb 08 2021 at 14:09)</a>:</h4>
<p>well, a Vec is not an iterator</p>



<a name="225548805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548805">(Feb 08 2021 at 14:10)</a>:</h4>
<p>you could return <code>-&gt; impl IntoIterator</code></p>



<a name="225548851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548851">(Feb 08 2021 at 14:10)</a>:</h4>
<p>or return <code>vec.into_iter()</code></p>



<a name="225548856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548856">(Feb 08 2021 at 14:10)</a>:</h4>
<p>why is ParallelIterator needed here?</p>



<a name="225548865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548865">(Feb 08 2021 at 14:10)</a>:</h4>
<p>oh <em>that</em></p>



<a name="225548866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548866">(Feb 08 2021 at 14:10)</a>:</h4>
<p>yeah</p>



<a name="225548873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548873">(Feb 08 2021 at 14:10)</a>:</h4>
<p>uh....... I have no idea what's up with that :)</p>



<a name="225548890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225548890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225548890">(Feb 08 2021 at 14:10)</a>:</h4>
<p>that must be some bit of error message machinery trying to be helpful</p>



<a name="225549010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225549010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225549010">(Feb 08 2021 at 14:11)</a>:</h4>
<p>anyway, yeah, let me make this an iterator and I think it's ready</p>



<a name="225549109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225549109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225549109">(Feb 08 2021 at 14:12)</a>:</h4>
<p>done!</p>



<a name="225549119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225549119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225549119">(Feb 08 2021 at 14:12)</a>:</h4>
<p>force pushed</p>



<a name="225550581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225550581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225550581">(Feb 08 2021 at 14:23)</a>:</h4>
<p>looking</p>



<a name="225550728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225550728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225550728">(Feb 08 2021 at 14:24)</a>:</h4>
<p>I think if you're going to make it return <code>-&gt; impl IntoIterator</code>, you might as well make it a <em>real</em> iterator</p>



<a name="225550737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225550737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225550737">(Feb 08 2021 at 14:24)</a>:</h4>
<p>not sure it's worth the trouble though</p>



<a name="225550754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225550754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225550754">(Feb 08 2021 at 14:24)</a>:</h4>
<p>by 'real iterator' I mean not computing the whole vector in advance</p>



<a name="225558713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225558713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225558713">(Feb 08 2021 at 15:18)</a>:</h4>
<p>makes sense</p>



<a name="225564585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225564585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225564585">(Feb 08 2021 at 15:58)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> force pushed again</p>



<a name="225564708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225564708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225564708">(Feb 08 2021 at 16:00)</a>:</h4>
<p>did you?</p>



<a name="225564787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225564787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225564787">(Feb 08 2021 at 16:00)</a>:</h4>
<p>it doesn't look different to me</p>



<a name="225564903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225564903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225564903">(Feb 08 2021 at 16:01)</a>:</h4>
<p>seems like github is having some issues?</p>



<a name="225565176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225565176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225565176">(Feb 08 2021 at 16:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I think you should be able to see it now</p>



<a name="225565187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Salsa%20issue%20on%20Allow%20Trait%20inheritance%20with%20cycles/near/225565187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Salsa.20issue.20on.20Allow.20Trait.20inheritance.20with.20cycles.html#225565187">(Feb 08 2021 at 16:02)</a>:</h4>
<p>but I was getting some 500 from github</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
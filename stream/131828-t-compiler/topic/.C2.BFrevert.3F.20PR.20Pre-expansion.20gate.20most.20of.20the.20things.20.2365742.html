<html>
<head><meta charset="utf-8"><title>¿revert? PR Pre-expansion gate most of the things #65742 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html">¿revert? PR Pre-expansion gate most of the things #65742</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="179539595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539595">(Oct 31 2019 at 15:02)</a>:</h4>
<p>fresh topic</p>



<a name="179539661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539661">(Oct 31 2019 at 15:02)</a>:</h4>
<p>Some background context from weekly meeting thread</p>
<blockquote>
<p>not sure how much background is worth going into here. This has to do with a change to feature gate syntax like <code>box 22</code>, even if that occurs in a <code>#[cfg]</code> syntax. This affects "stable" code that used such features conditionally -- the correct way to do so after this PR is to put them in a separate file and use a <code>#[cfg(foo)] mod m;</code> statement</p>
</blockquote>



<a name="179539715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539715">(Oct 31 2019 at 15:03)</a>:</h4>
<p>But, as we said, this is only partly about the specifics, and more a question of "general policy" --</p>



<a name="179539731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539731">(Oct 31 2019 at 15:03)</a>:</h4>
<p>right; one relevant issue (with a significant comment thread) is at <a href="https://github.com/rust-lang/rust/issues/65860" target="_blank" title="https://github.com/rust-lang/rust/issues/65860">#65860</a></p>



<a name="179539767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539767">(Oct 31 2019 at 15:03)</a>:</h4>
<p>We don't really know what add'l impact there may be, correct?</p>



<a name="179539836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539836">(Oct 31 2019 at 15:04)</a>:</h4>
<p>On the one hand, we don't tend to have a knee-jerk "oh a single user identified a regression; we must revert"</p>



<a name="179539846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539846">(Oct 31 2019 at 15:04)</a>:</h4>
<p>That said, can I get a complete picture? I believe this PR is currently in nightly, not yet beta, right?</p>



<a name="179539870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539870" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539870">(Oct 31 2019 at 15:04)</a>:</h4>
<p>We can get a complete(er) picture, but it would take time -- a crater run and a few try builds</p>



<a name="179539887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539887">(Oct 31 2019 at 15:04)</a>:</h4>
<p>the PR landed 8 days ago, so yes, I believe its currently in nightly only</p>



<a name="179539913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539913" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539913">(Oct 31 2019 at 15:05)</a>:</h4>
<p>I suppose that can be something that affects the revert calculation</p>



<a name="179539925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179539925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179539925">(Oct 31 2019 at 15:05)</a>:</h4>
<p>To be clear my primary argument for reverting is _not_ the regression. It is the fact that I expect an RFC (or design meeting or something along those lines) for this change -- at least, some discussion.</p>



<a name="179540057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540057" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540057">(Oct 31 2019 at 15:06)</a>:</h4>
<p>I'm trying to remember if/where this change was discussed. It may have been, I'm not sure (which is perhaps part of the problem)</p>



<a name="179540070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540070">(Oct 31 2019 at 15:06)</a>:</h4>
<p>There are definitely hard technical constraints that may impede other solutions</p>



<a name="179540114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540114">(Oct 31 2019 at 15:07)</a>:</h4>
<blockquote>
<p>To be clear my primary argument for reverting is _not_ the regression. It is the fact that I expect an RFC (or design meeting or something along those lines) for this change -- at least, some discussion.</p>
</blockquote>
<p>but what is the criteria you are using, besides the regression, to determine that there should have been a design meeting or discussion?</p>



<a name="179540136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540136" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540136">(Oct 31 2019 at 15:07)</a>:</h4>
<p>that is, I think it is the <em>coupling</em> of the two factors that leads one to consider reverting the change</p>



<a name="179540182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540182">(Oct 31 2019 at 15:07)</a>:</h4>
<p>I would expect an RFC to <em>not</em> pre-expansion gate --- taking away pre-expansion gating is easy; putting it back for (at least new stuff) is hard</p>



<a name="179540276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540276" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540276">(Oct 31 2019 at 15:08)</a>:</h4>
<p>It seems clear that we need some solution</p>



<a name="179540325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540325">(Oct 31 2019 at 15:08)</a>:</h4>
<p>But the point is that an RFC would discuss what solution we want, and document why we want it</p>



<a name="179540331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540331">(Oct 31 2019 at 15:08)</a>:</h4>
<p>I agree that we need some solution. I feel like there are multiple options. This is a breaking change (even if allowed by a strict interpretation of our stability rules).</p>



<a name="179540382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540382">(Oct 31 2019 at 15:09)</a>:</h4>
<blockquote>
<p>I would expect an RFC to <em>not</em> pre-expansion gate --- taking away pre-expansion gating is easy; putting it back for (at least new stuff) is hard</p>
</blockquote>
<p>What is the reasoning here? Is the argument that the prior behavior was an accidental implementation artifact?</p>



<a name="179540383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540383">(Oct 31 2019 at 15:09)</a>:</h4>
<p>On the other hand, it is clear that we make changes of this magnitude without RFCs -- though I'm not sure that's good</p>



<a name="179540431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540431">(Oct 31 2019 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> yes, and we are pre-expansion gating all new features</p>



<a name="179540449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540449">(Oct 31 2019 at 15:09)</a>:</h4>
<p>So to be clear I don't really care too much if this is a full fledged RFC, but at least <em>some</em> discussion and summary of alternatives would be good IMO</p>



<a name="179540524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540524" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540524">(Oct 31 2019 at 15:10)</a>:</h4>
<p>AFAIK, that discussion has not happened (or, at least, it was not had in sufficient publicity)</p>



<a name="179540616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540616">(Oct 31 2019 at 15:10)</a>:</h4>
<blockquote>
<p>What is the reasoning here? Is the argument that the prior behavior was an accidental implementation artifact?</p>
</blockquote>
<p>I do think this is "true" -- of course, one that dates <em>way</em> back. But it's not like we intended to stabilize unstable syntax. :) We made efforts to avoid that with macros, which were only partly successfully, and overlooked this similar case.</p>



<a name="179540689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540689">(Oct 31 2019 at 15:11)</a>:</h4>
<p>true, and we basically decided we couldn't afford to fix <code>macro_rules!</code> 100%</p>



<a name="179540729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540729">(Oct 31 2019 at 15:11)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> there are for example comments of yours in 2018 that we should have done pre-expansion gating and that we should do it on new stuff</p>



<a name="179540732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540732" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540732">(Oct 31 2019 at 15:11)</a>:</h4>
<p>At the same time, I don't see how that makes RFCs (or other forms of discussion documents) inapplicable</p>



<a name="179540805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540805">(Oct 31 2019 at 15:12)</a>:</h4>
<p>can I get a clarification about "new stuff" ?</p>



<a name="179540829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540829">(Oct 31 2019 at 15:12)</a>:</h4>
<p>because I am getting impression that this change has affected old stuff</p>



<a name="179540832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540832">(Oct 31 2019 at 15:12)</a>:</h4>
<p>e.g. or patterns I believe</p>



<a name="179540847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540847">(Oct 31 2019 at 15:12)</a>:</h4>
<p>those were gated upon landing</p>



<a name="179540854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540854" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540854">(Oct 31 2019 at 15:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> new <code>active</code> feature gates; everything new for some months has been pre-expansion gated</p>



<a name="179540861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540861">(Oct 31 2019 at 15:12)</a>:</h4>
<p>but maybe I misunderstand <span class="user-mention" data-user-id="120791">@RalfJ</span> 's complaint?</p>



<a name="179540863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540863">(Oct 31 2019 at 15:12)</a>:</h4>
<p>I think that's the change here -- it was extended to old stuff.</p>



<a name="179540872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540872">(Oct 31 2019 at 15:12)</a>:</h4>
<p>this specific issue is about gating old (but still unstable) syntax, e.g. box patterns, type ascription</p>



<a name="179540927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540927" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540927">(Oct 31 2019 at 15:13)</a>:</h4>
<p>okay, so using a better technology to gate new stuff sounds great and its what we're doing and should be fine</p>



<a name="179540930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540930">(Oct 31 2019 at 15:13)</a>:</h4>
<p>yes, based on crater -- we didn't gate some of the old stuff where the regressions were too high</p>



<a name="179540946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540946">(Oct 31 2019 at 15:13)</a>:</h4>
<p>and the question is then about when/if to extend the new gating system to apply it to the old stuff</p>



<a name="179540954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540954">(Oct 31 2019 at 15:13)</a>:</h4>
<p>Is that correct so far?</p>



<a name="179540976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540976" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540976">(Oct 31 2019 at 15:13)</a>:</h4>
<p>My problem is that the specific form of gating seems not-perfect, globally</p>



<a name="179540992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540992">(Oct 31 2019 at 15:13)</a>:</h4>
<p>not just for new stuff, but also for old things</p>



<a name="179540994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179540994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179540994">(Oct 31 2019 at 15:13)</a>:</h4>
<blockquote>
<p>yes, based on crater -- we didn't gate some of the old stuff where the regressions were too high</p>
</blockquote>
<p>this is good, I was not aware of this</p>



<a name="179541046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541046">(Oct 31 2019 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span>  I think there's a point of view here that new stuff shouldn't be pre-expansion feature gated either</p>



<a name="179541104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541104" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541104">(Oct 31 2019 at 15:14)</a>:</h4>
<p>mm I don't think so, but I think there's a view that we can find a better fix than the current one</p>



<a name="179541110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541110">(Oct 31 2019 at 15:14)</a>:</h4>
<p>because the inline attribute <code>#![cfg_blah_whatever(..)]</code> coding pattern just stops working for that new stuff ?</p>



<a name="179541164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541164">(Oct 31 2019 at 15:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> right; well -- Vadim's <code>delay_parsing!</code> macro sorta hacks back an inline approach</p>



<a name="179541214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541214" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541214">(Oct 31 2019 at 15:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  I know that is not <span class="user-mention" data-user-id="116122">@simulacrum</span>'s view, I think it's Ralf's view</p>



<a name="179541233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541233">(Oct 31 2019 at 15:15)</a>:</h4>
<p>or at least that's the sense I get</p>



<a name="179541247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541247" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541247">(Oct 31 2019 at 15:15)</a>:</h4>
<p>That is not my sense of Ralf's view.</p>



<a name="179541258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541258">(Oct 31 2019 at 15:15)</a>:</h4>
<p>I mean I don't think Ralf is saying "we should implicitly stabilize new unstable syntax"</p>



<a name="179541324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541324" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541324">(Oct 31 2019 at 15:16)</a>:</h4>
<p>but I think Ralf <em>is</em> saying that the current fix is crude</p>



<a name="179541373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541373" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541373">(Oct 31 2019 at 15:16)</a>:</h4>
<p>and that having to isolate unstable syntax  into separate files is surprising and a pain, and a breaking change in practice</p>



<a name="179541392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541392">(Oct 31 2019 at 15:16)</a>:</h4>
<p>well again; <code>delay_parse!</code> <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="179541416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541416">(Oct 31 2019 at 15:17)</a>:</h4>
<p>put it in the standard library, and you even have a "documented solution with all the explanation of why"</p>



<a name="179541429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541429" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541429">(Oct 31 2019 at 15:17)</a>:</h4>
<p>(of course, that's for t-libs to decide...)</p>



<a name="179541435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541435">(Oct 31 2019 at 15:17)</a>:</h4>
<p>I think, for me, it comes down to there being alternative implementation strategies (with other downsides, of course, doesn't seem like there is a 100% win solution, or we don't know about it) -- but we have not explored those, and have not discussed them</p>



<a name="179541450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541450">(Oct 31 2019 at 15:17)</a>:</h4>
<p>or at least I have not seen evidence of exploration or discussion</p>



<a name="179541532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541532" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541532">(Oct 31 2019 at 15:18)</a>:</h4>
<p>I think there has probably been discussion but it's been spread out in time and informal</p>



<a name="179541538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541538" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541538">(Oct 31 2019 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I actually looked at the code for the <code>tt</code> idea -- it looked... complicated to me</p>



<a name="179541579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541579">(Oct 31 2019 at 15:18)</a>:</h4>
<blockquote>
<p>I think there has probably been discussion but it's been spread out in time and informal</p>
</blockquote>
<p>I would at least like a summary -- this is sort of what RFCs are for :)</p>



<a name="179541605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541605">(Oct 31 2019 at 15:19)</a>:</h4>
<p>e.g. it is good to know that crater was used to guide the set of old syntaxes we could gate; in an ideal world we'd have a documented plan saying that we are doing this, with a checklist, etc -- kind of like with NLL</p>



<a name="179541611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541611" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541611">(Oct 31 2019 at 15:19)</a>:</h4>
<p>but, regardless, even if the alternatives have downsides that are too big for us to allow, it does seem... like we should know that</p>



<a name="179541633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541633">(Oct 31 2019 at 15:19)</a>:</h4>
<p>and I also trust Petrochenkov's judgement on libsyntax a whole lot on this, and it jives with my own</p>



<a name="179541670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541670">(Oct 31 2019 at 15:20)</a>:</h4>
<p>/me needs to step away from keyboard for a while; I will try to review the thread later.</p>



<a name="179541762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541762">(Oct 31 2019 at 15:20)</a>:</h4>
<p>So let's step back a second, I think that getting into the altneratives in detail in this thread is beside the point</p>



<a name="179541776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541776">(Oct 31 2019 at 15:20)</a>:</h4>
<p>right, yeah</p>



<a name="179541779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541779" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541779">(Oct 31 2019 at 15:20)</a>:</h4>
<p>Having <a href="https://github.com/rust-lang/rust/pull/65974" target="_blank" title="https://github.com/rust-lang/rust/pull/65974">https://github.com/rust-lang/rust/pull/65974</a> also means that one entire class of "crude"-ness goes away</p>



<a name="179541838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541838" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541838">(Oct 31 2019 at 15:21)</a>:</h4>
<p>(it's basically only <code>#[cfg]</code> and the transcriber side at this point)</p>



<a name="179541955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541955">(Oct 31 2019 at 15:22)</a>:</h4>
<p>I think what <span class="user-mention" data-user-id="116122">@simulacrum</span> feels is that this change should get broader discussion and documentation -- I'm not 100% sure if that requires backing out.</p>



<a name="179541970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541970">(Oct 31 2019 at 15:22)</a>:</h4>
<p>I'm not sure -- to me, it feels like we should not be landing changes which break code without a discussion and summary of alternatives. Whether that happens informally or not, I don't care too much, although I think I would prefer an RFC.</p>



<a name="179541974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179541974" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179541974">(Oct 31 2019 at 15:22)</a>:</h4>
<p>it sort of backs up the point <span class="user-mention" data-user-id="126931">@centril</span> in its own way, as I don't really understand what that PR is doing :)</p>



<a name="179542025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542025">(Oct 31 2019 at 15:22)</a>:</h4>
<p>was there an FCP here?</p>



<a name="179542057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542057" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542057">(Oct 31 2019 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  pretty easy to explain: if a macro-matcher fails, throw away all the pre-expansion gating done in it</p>



<a name="179542059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542059">(Oct 31 2019 at 15:23)</a>:</h4>
<p>we obviously do land name resolution changes often that are kind of "just PRs", but there is usually lang team check-off -- even if I think none of us are super happy with the amount of documentation and formality there</p>



<a name="179542111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542111" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542111">(Oct 31 2019 at 15:23)</a>:</h4>
<p>(to be clear, not blaming <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> at all there! so happy they do what they do :)</p>



<a name="179542296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542296">(Oct 31 2019 at 15:25)</a>:</h4>
<p>FCPs for confirming that we want to fix bugs seems strange in general -- it should take the agreement of the whole team <em>not</em> to fix them, not the agreement of the team <em>to</em> fix them</p>



<a name="179542325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542325">(Oct 31 2019 at 15:25)</a>:</h4>
<p>otherwise we have bad defaults in terms of soundness and whatnot</p>



<a name="179542367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542367">(Oct 31 2019 at 15:25)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> this is not about "fixing bugs" or not, it's about practical impact</p>



<a name="179542387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542387" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542387">(Oct 31 2019 at 15:25)</a>:</h4>
<p>like I think we all agree we want to fix this bug</p>



<a name="179542469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542469">(Oct 31 2019 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> well let's focus on the practical impact; let's revert as needed based on data, going back to <span class="user-mention" data-user-id="116083">@pnkfelix</span>'s point about knee-jerk reactions</p>



<a name="179542489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542489" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542489">(Oct 31 2019 at 15:26)</a>:</h4>
<p>and let's revert <em>specific gates</em> as needed</p>



<a name="179542529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542529">(Oct 31 2019 at 15:27)</a>:</h4>
<p>and again, let the reviewer judge the practical impact</p>



<a name="179542738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542738">(Oct 31 2019 at 15:28)</a>:</h4>
<p>I'm trying to decide my reaction here:)</p>



<a name="179542757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542757">(Oct 31 2019 at 15:28)</a>:</h4>
<p>take your time :P</p>



<a name="179542917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542917">(Oct 31 2019 at 15:30)</a>:</h4>
<p>take a look at the <a href="https://forge.rust-lang.org/compiler/bug-fix-procedure.html" target="_blank" title="https://forge.rust-lang.org/compiler/bug-fix-procedure.html">bug fix procedure</a></p>



<a name="179542929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542929">(Oct 31 2019 at 15:30)</a>:</h4>
<p>it mentions some specifics</p>



<a name="179542940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179542940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179542940">(Oct 31 2019 at 15:30)</a>:</h4>
<p>for example:</p>
<blockquote>
<p>Every breaking change should be accompanied by a dedicated tracking issue for that change. The main text of this issue should describe the change being made, with a focus on what users must do to fix their code. The issue should be approachable and practical; it may make sense to direct users to an RFC or some other issue for the full details. The issue also serves as a place where users can comment with questions or other concerns.</p>
</blockquote>



<a name="179543014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543014">(Oct 31 2019 at 15:31)</a>:</h4>
<p>it also says things like:</p>
<blockquote>
<p>Changes that are believed to have negligible impact can go directly to issuing an error. </p>
</blockquote>
<p>and advises breaking up changes into smaller parts (which I believe is the strategy being used here)</p>



<a name="179543017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543017">(Oct 31 2019 at 15:31)</a>:</h4>
<p>This procedure is what we use when we file C-future-compatibility issues that are linked to inside the compiler</p>



<a name="179543031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543031">(Oct 31 2019 at 15:31)</a>:</h4>
<p>this procedure is what we use when we fix compiler bugs that affect existing code</p>



<a name="179543085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543085" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543085">(Oct 31 2019 at 15:32)</a>:</h4>
<p>it has nothing to do with C-xxx labels?</p>



<a name="179543099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543099" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543099">(Oct 31 2019 at 15:32)</a>:</h4>
<blockquote>
<p>From time to time, we encounter the need to make a bug fix, soundness correction, or other change in the compiler which will cause existing code to stop compiling.</p>
</blockquote>



<a name="179543108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543108">(Oct 31 2019 at 15:32)</a>:</h4>
<p>we may not be perfectly consistent, but I think it expresses the values we are shooting for</p>



<a name="179543120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543120">(Oct 31 2019 at 15:32)</a>:</h4>
<p>anyway, the point that <span class="user-mention" data-user-id="116122">@simulacrum</span> raised is more about how the decision to go forward was made in the first place</p>



<a name="179543122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543122" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543122">(Oct 31 2019 at 15:32)</a>:</h4>
<p>huh; it describes the procedure for C-future-compatibility</p>



<a name="179543174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543174" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543174">(Oct 31 2019 at 15:33)</a>:</h4>
<p>I mean I don't even know that that label means</p>



<a name="179543176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543176" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543176">(Oct 31 2019 at 15:33)</a>:</h4>
<p>:)</p>



<a name="179543195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543195">(Oct 31 2019 at 15:33)</a>:</h4>
<p>it describes the procedure for all bugs, indicating that if we do experience practical changes to end user code, we should likely file a tracking issue (which would indeed be tagged as C-future-compat)</p>



<a name="179543274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543274">(Oct 31 2019 at 15:34)</a>:</h4>
<p>I think this is how I feel: I think this change has been made in a reasonable and responsible way overall, but corners were cut. Ther'es nothing implicitly wrong with that. We do it a lot, when we judge things will work out well, but it's always a kind of risk that somebody feels surprised or the impact is greater. In such cases, I think it is good for us to back rapidly off and "re-approach" -- even if the end result will be the same.</p>



<a name="179543277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543277" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543277">(Oct 31 2019 at 15:34)</a>:</h4>
<p>Making an issue for soft-gating pre-expansion and hard-gating post-expansion will be quite hard technically; and without doing that we don't actually have an issue to point to people in warning message; that seems rather useless -- no one is going to find said issue</p>



<a name="179543308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543308" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543308">(Oct 31 2019 at 15:34)</a>:</h4>
<p>I also feel pushing hard back in response to complaints kind of pushes towards needing more process overall</p>



<a name="179543328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543328" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543328">(Oct 31 2019 at 15:35)</a>:</h4>
<p>Because part of how we can get by with less process is by responding kindly to objections</p>



<a name="179543503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543503" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543503">(Oct 31 2019 at 15:36)</a>:</h4>
<p>All of that said, I don't know that we need a full RFC here -- but it would be appropriate I think to document the plan, what it means for end-users -- I think <span class="user-mention" data-user-id="116122">@simulacrum</span> is correct that the potential, complete impact of this change is large</p>



<a name="179543518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543518">(Oct 31 2019 at 15:36)</a>:</h4>
<p>we probably should've done that way back</p>



<a name="179543555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543555">(Oct 31 2019 at 15:37)</a>:</h4>
<p>but basically there's a "best practice" here for releasing crates that mix stable and unstable syntax, right?</p>



<a name="179543569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543569">(Oct 31 2019 at 15:37)</a>:</h4>
<p>(using modues)</p>



<a name="179543580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543580">(Oct 31 2019 at 15:37)</a>:</h4>
<p>yes, or <code>delay_parse!</code> if one objects to having several files</p>



<a name="179543596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543596" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543596">(Oct 31 2019 at 15:37)</a>:</h4>
<p>that is a solution that has a lot going for it, given the internal architecture of the compiler, but basically the core decision here was to adopt that as the way forward, and then phase it in gradually</p>



<a name="179543604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543604">(Oct 31 2019 at 15:37)</a>:</h4>
<p>well, so that best practice is what <span class="user-mention" data-user-id="126931">@centril</span> has been suggesting -- I personally would find it deeply wrong to make that a best practice</p>



<a name="179543625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543625">(Oct 31 2019 at 15:38)</a>:</h4>
<p>(or at least am unconvinced at this point that we should recommend it)</p>



<a name="179543710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543710">(Oct 31 2019 at 15:38)</a>:</h4>
<p>that's the point I think :) we've implicitly adopted that, and it has <del>big</del> medium implications, but there wasn't much conversation about it. Sometimes we get away with that, but sometimes we don't.</p>



<a name="179543732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543732" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543732">(Oct 31 2019 at 15:38)</a>:</h4>
<p>one alternative is allowing <em>more</em> in <code>#[cfg]</code>-out code, i.e. not properly parsing the contents (anything nested in <code>(...)</code>, <code>[...]</code>, or <code>{...}</code>)</p>



<a name="179543758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543758">(Oct 31 2019 at 15:39)</a>:</h4>
<p>(yes, this is what I was trying to say on thread about <code>$tt</code>)</p>



<a name="179543767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543767">(Oct 31 2019 at 15:39)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span> y'all will need to explain that to me; are you talking about laziness on the lexer level?</p>



<a name="179543781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543781" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543781">(Oct 31 2019 at 15:39)</a>:</h4>
<p>(hold on, let's not lose the focus :)</p>



<a name="179543806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543806" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543806">(Oct 31 2019 at 15:40)</a>:</h4>
<p>(Yes, I think we know that there are at least possible alternatives, we should not discuss them just now)</p>



<a name="179543863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543863">(Oct 31 2019 at 15:40)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> token trees are properly nested, so you can lex but not parse certain things if you don't want to</p>



<a name="179543913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543913" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543913">(Oct 31 2019 at 15:40)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> that also means we cannot look-ahead into <code>{</code> blocks, no?</p>



<a name="179543939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543939">(Oct 31 2019 at 15:41)</a>:</h4>
<p>anyway if fallout wasn't properly investigated in the PR, that's reason enough for reverting and reconsidering</p>



<a name="179543954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179543954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179543954">(Oct 31 2019 at 15:41)</a>:</h4>
<p>Can we not discuss specific alternatives please? I don't want to get derailed :)</p>



<a name="179544043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544043">(Oct 31 2019 at 15:42)</a>:</h4>
<p>I was led to believe, in the issue comments, that crater was used and the results were favorable, but that appears to not be the case?</p>



<a name="179544053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544053" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544053">(Oct 31 2019 at 15:42)</a>:</h4>
<p>that is the case.</p>



<a name="179544054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544054" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544054">(Oct 31 2019 at 15:42)</a>:</h4>
<blockquote>
<p>anyway if fallout wasn't properly investigated in the PR, that's reason enough for reverting and reconsidering</p>
</blockquote>
<p>one thing I do think is that we should use an expedited process to "reconsider"</p>



<a name="179544067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544067">(Oct 31 2019 at 15:42)</a>:</h4>
<p>e.g., schedule a specific meeting to go over the alternatives and their pros/cons</p>



<a name="179544097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544097" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544097">(Oct 31 2019 at 15:42)</a>:</h4>
<p>And reverting makes it harder to e.g. land <a href="https://github.com/rust-lang/rust/pull/65974" target="_blank" title="https://github.com/rust-lang/rust/pull/65974">https://github.com/rust-lang/rust/pull/65974</a></p>



<a name="179544117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544117">(Oct 31 2019 at 15:43)</a>:</h4>
<p>we could steal tomorrow's slot, but that might not be a good idea idk</p>



<a name="179544129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544129">(Oct 31 2019 at 15:43)</a>:</h4>
<p>I am fine with that, and am willing to try and make time to help out with such an effort...</p>



<a name="179544154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544154">(Oct 31 2019 at 15:43)</a>:</h4>
<blockquote>
<p>we could steal tomorrow's slot, but that might not be a good idea idk</p>
</blockquote>
<p>I'd probably say just schedule a one-off thing next week?</p>



<a name="179544162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544162">(Oct 31 2019 at 15:43)</a>:</h4>
<p>I think we need a bit of prep work which would not be ready for tomorrow (but maybe next, or next next Friday)</p>



<a name="179544173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544173">(Oct 31 2019 at 15:43)</a>:</h4>
<p>I don't want to pre-empt tomorrow's discussion, which has been a long time coming too</p>



<a name="179544188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544188">(Oct 31 2019 at 15:43)</a>:</h4>
<p>Although I forget what we're discussing next week, that could maybe work</p>



<a name="179544208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544208" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544208">(Oct 31 2019 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> is there a "lightway" way to revert?</p>



<a name="179544210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544210" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544210">(Oct 31 2019 at 15:43)</a>:</h4>
<blockquote>
<p>well, so that best practice is what @centril has been suggesting -- I personally would find it deeply wrong to make that a best practice</p>
</blockquote>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span>  It sounds like you are saying that pre-expansion gating shouldn't happen for new stuff either until we make changes</p>



<a name="179544258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544258">(Oct 31 2019 at 15:44)</a>:</h4>
<p>if we revert, I prefer we do so before beta branches, so we have a full cycle to test out whatever ends up landing</p>



<a name="179544289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544289" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544289">(Oct 31 2019 at 15:44)</a>:</h4>
<p>(I didn't look at the PR, but I don't know if there's a way to keep most of the code intact but just disable some specific cases)</p>



<a name="179544301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544301">(Oct 31 2019 at 15:44)</a>:</h4>
<blockquote>
<p>if we revert, I prefer we do so before beta branches, so we have a full cycle to test out whatever ends up landing</p>
</blockquote>
<p>this is another point</p>



<a name="179544322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544322">(Oct 31 2019 at 15:44)</a>:</h4>
<p>I feel like the ideal time for this change to land would be just <em>after</em> beta branches :)</p>



<a name="179544353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544353">(Oct 31 2019 at 15:45)</a>:</h4>
<p>we could maybe do a weird revert where we add the old logic back but don't delete the duplicate one that runs earlier</p>



<a name="179544357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544357" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544357">(Oct 31 2019 at 15:45)</a>:</h4>
<p>This is why I've been pushing somewhat hard on this, I would like to land early in the cycle if we do land.</p>



<a name="179544385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544385" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544385">(Oct 31 2019 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> the pre-expansion PR consists of moving individual PRs to pre-expansion gating in different commits</p>



<a name="179544392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544392">(Oct 31 2019 at 15:45)</a>:</h4>
<p>and either silence, or turn into warnings, the new earlier errors</p>



<a name="179544397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544397" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544397">(Oct 31 2019 at 15:45)</a>:</h4>
<p>(oh also, it fixes a syntax bug)</p>



<a name="179544506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544506">(Oct 31 2019 at 15:46)</a>:</h4>
<p>I think we should do beta crater runs and backport fixes as needed</p>



<a name="179544539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544539">(Oct 31 2019 at 15:46)</a>:</h4>
<p>that shouldn't be too hard and I can commit to doing so myself</p>



<a name="179544566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544566" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544566">(Oct 31 2019 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span>, could you elaborate more on why you're against trying to proceed more carefully here?</p>



<a name="179544582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544582">(Oct 31 2019 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> if you like my plan I could spend a few hours trying it out</p>



<a name="179544596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544596" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544596">(Oct 31 2019 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> idk why this is proceeding less carefully?</p>



<a name="179544624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544624">(Oct 31 2019 at 15:47)</a>:</h4>
<p>....it seems clear that keeping the change in is less careful than backing it out and discussing before putting it back in?</p>



<a name="179544687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544687">(Oct 31 2019 at 15:47)</a>:</h4>
<p>The end result seems the same: if we find too high regression counts on beta we revert those gates</p>



<a name="179544823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544823">(Oct 31 2019 at 15:49)</a>:</h4>
<p>it seems clear that we prefer not to muck with beta</p>



<a name="179544864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544864">(Oct 31 2019 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> after the matcher PR lands, we could do a "beta" crater run</p>



<a name="179544867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544867">(Oct 31 2019 at 15:49)</a>:</h4>
<p>I think it's not about the destination, it's about the path. I would definitely find it less stressful to back this out and not need to worry about tracking bugfixes into beta, etc</p>



<a name="179544977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544977">(Oct 31 2019 at 15:50)</a>:</h4>
<p>(and here I thought setting up zulip notifications every time someone said "crater" was a good idea <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>)</p>



<a name="179544992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179544992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179544992">(Oct 31 2019 at 15:50)</a>:</h4>
<p>the pre-expansion gating reaching beta would be a headache to deal with</p>



<a name="179545016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545016">(Oct 31 2019 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> wow you can do that?!</p>



<a name="179545044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545044">(Oct 31 2019 at 15:50)</a>:</h4>
<p>(I just discovered that feature recently myself)</p>



<a name="179545048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545048">(Oct 31 2019 at 15:50)</a>:</h4>
<blockquote>
<p>I think it's not about the destination, it's about the path. I would definitely find it less stressful to back this out and not need to worry about tracking bugfixes into beta, etc</p>
</blockquote>
<p>well put</p>



<a name="179545053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545053" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545053">(Oct 31 2019 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span>  huh? these are trivial reverts to make</p>



<a name="179545069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545069">(Oct 31 2019 at 15:51)</a>:</h4>
<p>If they are trivial, then why not do them now?</p>



<a name="179545096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545096" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545096">(Oct 31 2019 at 15:51)</a>:</h4>
<p>I feel like we're all working pretty hard to be reasonable here, quite frankly, and it's frustrating to me that you're not listening.</p>



<a name="179545104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545104" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545104">(Oct 31 2019 at 15:51)</a>:</h4>
<p>in fact, we need beta crater runs to check if the previous crater run is wrong</p>



<a name="179545142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545142" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545142">(Oct 31 2019 at 15:51)</a>:</h4>
<p>just compile the compiler as non-nightly?</p>



<a name="179545159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545159">(Oct 31 2019 at 15:51)</a>:</h4>
<p>you don't need it to be a real beta, you can do this with a try build</p>



<a name="179545218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545218">(Oct 31 2019 at 15:52)</a>:</h4>
<p>it's... somewhere in the codebase, I can look for it if you want</p>



<a name="179545263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545263" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545263">(Oct 31 2019 at 15:52)</a>:</h4>
<p>(assuming you want <code>#![feature]</code> to be disabled)</p>



<a name="179545328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545328" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545328">(Oct 31 2019 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  from my perspective it feels like this: we did a crater run; I spent a whole lot of time investigating <span class="user-mention" data-user-id="116122">@simulacrum</span>s report, a PR was filed to fix the matcher issue -- I think some of the data exists, so why are we ignoring the crater run?</p>



<a name="179545376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545376">(Oct 31 2019 at 15:53)</a>:</h4>
<p>Fair. I think the answer is that most of us didn't really understand the full implications, and we'd like to review the options.</p>



<a name="179545452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545452" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545452">(Oct 31 2019 at 15:54)</a>:</h4>
<p>(I <em>do</em> think a beta crater run is a good idea though! I'd prefer to have that data on hand when having the discussion.)</p>



<a name="179545459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545459" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545459">(Oct 31 2019 at 15:54)</a>:</h4>
<p>That plus:</p>



<a name="179545485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545485">(Oct 31 2019 at 15:54)</a>:</h4>
<p>It's better to make this change as early in cycle as possible regardless</p>



<a name="179545519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545519">(Oct 31 2019 at 15:54)</a>:</h4>
<p>I feel like we're quite likely going to do this change -- and I am not even trying to imply you handled it irresponsibly, quite the opposite.</p>



<a name="179545539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545539">(Oct 31 2019 at 15:55)</a>:</h4>
<p>(Though I do think there are viable alternatives)</p>



<a name="179545554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545554" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545554">(Oct 31 2019 at 15:55)</a>:</h4>
<p>But some of us at least find having things on beta that we don't plan to ship stressful :)</p>



<a name="179545565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545565">(Oct 31 2019 at 15:55)</a>:</h4>
<p>(I think those viable alternatives need to be presented as PRs to be believable)</p>



<a name="179545599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545599" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545599">(Oct 31 2019 at 15:56)</a>:</h4>
<p>I don't think that's a reasonable attitude.</p>



<a name="179545647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545647" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545647">(Oct 31 2019 at 15:56)</a>:</h4>
<p>I agree with that as well, I think the process here was fine, but now that we have a few people who have -- IMO reasonable, but I am somewhat biased -- concerns, we should tend towards proceeding carefully, which to me means reverting the PR and waiting on that discussion to happen.</p>



<a name="179545679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545679">(Oct 31 2019 at 15:56)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span>  are you objecting to pre-expansion gating new things?</p>



<a name="179545689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545689">(Oct 31 2019 at 15:56)</a>:</h4>
<blockquote>
<p>I don't think that's a reasonable attitude.</p>
</blockquote>
<p>to be clear, I don't mean that impl concerns don't matter, I just mean the fact that we don't have any PRs yet isn't evidence of anything.</p>



<a name="179545694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545694">(Oct 31 2019 at 15:56)</a>:</h4>
<p>I already have two things I'm tangentially involved in to worry about on beta (promotion/const-checking changes and caller_location), a third is too much stress, to the point where I'd rather help out on this just for the peace of mind</p>



<a name="179545731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545731">(Oct 31 2019 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I'm just looking at the actual code and matching that up with the <code>tt</code> idea and it does not seem realistic to me</p>



<a name="179545734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545734">(Oct 31 2019 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> I don't think anyone is proposing to back that out -- though I think that if we decide to take another approach, it would apply equally to new syntax.</p>



<a name="179545742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545742">(Oct 31 2019 at 15:57)</a>:</h4>
<p>but new syntax has no users yet</p>



<a name="179545758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545758">(Oct 31 2019 at 15:57)</a>:</h4>
<p>so if we pre-expansion gate it while adding, that seems fine</p>



<a name="179545765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545765">(Oct 31 2019 at 15:57)</a>:</h4>
<p>(and of course in the fullness of time, we should use the same approach for all unstable syntax)</p>



<a name="179545815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545815">(Oct 31 2019 at 15:58)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span>  does ^-- reflect your view?</p>



<a name="179545819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545819">(Oct 31 2019 at 15:58)</a>:</h4>
<p>seems so <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="179545848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179545848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179545848">(Oct 31 2019 at 15:58)</a>:</h4>
<p>I think, yes. But I will say that I have not had the time to fully think about this... this is at least part of why I would like for us to proceed less quickly</p>



<a name="179546071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546071" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546071">(Oct 31 2019 at 16:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span>  if you want to revert the PR (partially; the syntax bug needs to be fixed), that's fair; I will rebase my matcher PR to remove the newer pre-expansion gates -- can you run the "beta" crater stuff?</p>



<a name="179546211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546211" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546211">(Oct 31 2019 at 16:02)</a>:</h4>
<p>I am unclear as to exactly what I am agreeing to. I can help run crater on some PR in a beta-esque fashion, but I do not know if I have the ability/time to dig into the code and figure out exactly what we should be running crater on.</p>
<p>I am also unclear -- are you on board with a revert?</p>



<a name="179546314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546314" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546314">(Oct 31 2019 at 16:03)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> my understanding is that we would test the same PR with crater but without it being a nightly compiler</p>



<a name="179546408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546408">(Oct 31 2019 at 16:04)</a>:</h4>
<blockquote>
<p>I am also unclear -- are you on board with a revert?</p>
</blockquote>
<p>Yes, but like everyone else, I have other PRs and work I need to do</p>



<a name="179546417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546417" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546417">(Oct 31 2019 at 16:04)</a>:</h4>
<p>I think being cautious here and reverting the change (for now) helps users trust the stability of Rust because they can see that even if we're allowed to fix something that causes small breakages, we'll do so carefully. That trust is really valuable especially if (when) we need to make backwards-incompatible changes to resolve issues which affect larger parts of the ecosystem.</p>



<a name="179546463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546463">(Oct 31 2019 at 16:04)</a>:</h4>
<p>(Yes, I think this is important too.)</p>



<a name="179546474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546474">(Oct 31 2019 at 16:05)</a>:</h4>
<p>Okay -- I can put myself on the hook to put up a full revert, but since I don't know about the syntax bug you're referring to, I would need to dig in to the specific PR and try to figure things out.</p>



<a name="179546496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546496">(Oct 31 2019 at 16:05)</a>:</h4>
<p>I don't think I have the time to do that.</p>



<a name="179546530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546530" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546530">(Oct 31 2019 at 16:05)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> like I said, I can spend a few hours on a straight-forward revert, or one that doesn't kill the new code entirely (we could put it behind a feature-flag, turn it into  an error, etc.)</p>



<a name="179546572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546572">(Oct 31 2019 at 16:05)</a>:</h4>
<p>I just need a confirmation that we're doing this</p>



<a name="179546598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546598">(Oct 31 2019 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <a href="https://github.com/rust-lang/rust/pull/65742/commits/2e64bb2d37d5f15113e0a7199cd684504c6b8de7" target="_blank" title="https://github.com/rust-lang/rust/pull/65742/commits/2e64bb2d37d5f15113e0a7199cd684504c6b8de7">https://github.com/rust-lang/rust/pull/65742/commits/2e64bb2d37d5f15113e0a7199cd684504c6b8de7</a> needs to stay</p>



<a name="179546690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546690">(Oct 31 2019 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> are you talking about soft-gating the pre-expansion?</p>



<a name="179546801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546801">(Oct 31 2019 at 16:08)</a>:</h4>
<p>OK, I have to go, I've skipped a meeting already and have to catch up with that now :)</p>



<a name="179546802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546802">(Oct 31 2019 at 16:08)</a>:</h4>
<p>maybe? not sure what "soft" means in this context. I am mostly talking about keeping the new code around (just not with the errors it produces today) if that's desireable</p>



<a name="179546857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546857" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546857">(Oct 31 2019 at 16:08)</a>:</h4>
<p>tests, too</p>



<a name="179546892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546892">(Oct 31 2019 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> got it :)</p>



<a name="179546893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546893" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546893">(Oct 31 2019 at 16:08)</a>:</h4>
<p>I don't think that's useful</p>



<a name="179546897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546897" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546897">(Oct 31 2019 at 16:08)</a>:</h4>
<p>I'm good with anything that stops the errors, I think a "less disruptive" PR seems fine, as long as it's not too much work</p>



<a name="179546964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546964">(Oct 31 2019 at 16:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  soft means warnings for pre-expansion</p>



<a name="179546975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546975" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546975">(Oct 31 2019 at 16:09)</a>:</h4>
<p>oops; <span class="user-mention" data-user-id="119009">@eddyb</span> ^</p>



<a name="179546990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179546990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179546990">(Oct 31 2019 at 16:09)</a>:</h4>
<p>+ you also need hard gating for post-expansion</p>



<a name="179547002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179547002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179547002">(Oct 31 2019 at 16:09)</a>:</h4>
<p>but that work would be premature</p>



<a name="179547025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179547025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179547025">(Oct 31 2019 at 16:09)</a>:</h4>
<p>brb for a bt</p>



<a name="179547265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179547265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179547265">(Oct 31 2019 at 16:12)</a>:</h4>
<p>like a future-compatibility warning? I could live with that, though I think a straight revert would be easier -- the follow-up work would be delayed of course. If we do it, we'd need an issue documenting a bit what's going on etc. I guess it feels a bit like putting the cart before the horse.</p>



<a name="179547314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179547314" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179547314">(Oct 31 2019 at 16:12)</a>:</h4>
<p>but I wouldn't stand in the way</p>



<a name="179547773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179547773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179547773">(Oct 31 2019 at 16:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  a future compat warning isn't easy to do here</p>



<a name="179548075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548075">(Oct 31 2019 at 16:21)</a>:</h4>
<p>well maybe not all that difficult; you mark spans with whether you are in expansion or not when parsing, then partition the set based on those; finally you warn/error based on those</p>



<a name="179548158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548158">(Oct 31 2019 at 16:22)</a>:</h4>
<p>but it's a waste of effort; we should first check crater runs before adding hacks to the compiler</p>



<a name="179548193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548193">(Oct 31 2019 at 16:22)</a>:</h4>
<p>So to circle up a bit here -- it sounds like <span class="user-mention" data-user-id="119009">@eddyb</span> is going to try and get a PR going that reverts this change in some loose form (maybe fully, or perhaps in a softer way). Then we should try and pencil in a meeting next week to talk about this change and get a path forward, before which we would like to have a document with a beta-esque crater regression report (that has been triaged) and some document summarizing the current PR's rationale and decisions made and possible alternatives to those decisions.</p>



<a name="179548232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548232">(Oct 31 2019 at 16:23)</a>:</h4>
<p>concretely I don't think that work can happen in time for next week, so I would propose we try and schedule for two weeks from nowish.</p>



<a name="179548610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548610">(Oct 31 2019 at 16:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span>  I think that if a new crater run doesn't turn up anything new for some gates then those should be re-reverted again basically</p>



<a name="179548672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548672" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548672">(Oct 31 2019 at 16:27)</a>:</h4>
<p>alternatives like those pertaining to <code>tt</code> are non-trivial architectural changes, possibly in need to lang RFCs</p>



<a name="179548799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548799">(Oct 31 2019 at 16:28)</a>:</h4>
<p>the PR shouldn't be reverted fully; <a href="https://github.com/rust-lang/rust/pull/65742/commits/2e64bb2d37d5f15113e0a7199cd684504c6b8de7" target="_blank" title="https://github.com/rust-lang/rust/pull/65742/commits/2e64bb2d37d5f15113e0a7199cd684504c6b8de7">https://github.com/rust-lang/rust/pull/65742/commits/2e64bb2d37d5f15113e0a7199cd684504c6b8de7</a> needs to stay</p>



<a name="179548816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548816" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548816">(Oct 31 2019 at 16:28)</a>:</h4>
<p>I disagree, I think, though I'd want to think more... but I also don't have any more time today to discuss this.</p>
<p>(It, to me, seems odd to suggest that more specific, and as such less likely to cause breakage, forms of this change would need lang RFCs, while file-level tracking is fine without an RFC).</p>



<a name="179548991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179548991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179548991">(Oct 31 2019 at 16:30)</a>:</h4>
<p>the <code>tt</code> change is an architectural one; and would have big implications for future language design; specific changes to one other the other gates are not; and pre-expansion gating those is a conservative default</p>



<a name="179552017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179552017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179552017">(Oct 31 2019 at 16:59)</a>:</h4>
<p>FWIW I'm testing my take on the partial revert right now, it went pretty smooth so far</p>



<a name="179552465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179552465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179552465">(Oct 31 2019 at 17:03)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> please cc me on the PR</p>



<a name="179555656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179555656" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179555656">(Oct 31 2019 at 17:35)</a>:</h4>
<p>ahh, I see why this was so easy: we already had early feature-gating, <span class="user-mention" data-user-id="126931">@centril</span> only moved some other feature-gates to use the same system</p>



<a name="179556591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/179556591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#179556591">(Oct 31 2019 at 17:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span class="user-mention" data-user-id="116122">@simulacrum</span> opened <a href="https://github.com/rust-lang/rust/issues/66004" target="_blank" title="https://github.com/rust-lang/rust/issues/66004">#66004</a></p>



<a name="180009329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009329" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009329">(Nov 06 2019 at 07:50)</a>:</h4>
<p>So, I just caught up on this entire thread, and I'm confused.</p>



<a name="180009346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009346" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009346">(Nov 06 2019 at 07:50)</a>:</h4>
<p>First, I'm not sure what issue this is fixing. Any good source I could read for background on why we'd want to consider this?</p>



<a name="180009362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009362">(Nov 06 2019 at 07:51)</a>:</h4>
<p>More importantly, I'm concerned about any change that would require moving cfg outwards to outside an entire module.</p>



<a name="180009374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009374">(Nov 06 2019 at 07:51)</a>:</h4>
<p>In particular, consider the possibility that we may want to make <code>mod</code> unnecessary in the future.</p>



<a name="180009437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009437" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009437">(Nov 06 2019 at 07:53)</a>:</h4>
<p>One issue there: it would be helpful to move cfg <em>inward</em>, inside a module, so that you don't have to add an explicit <code>mod</code> statement just to attach a cfg to it.</p>



<a name="180009499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009499" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009499">(Nov 06 2019 at 07:54)</a>:</h4>
<p>But if we can't parse a file at all if it potentially uses new syntax, then we can't put <code>#![cfg]</code> inside the file.</p>



<a name="180009512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009512">(Nov 06 2019 at 07:54)</a>:</h4>
<p>I would like to better understand the rationale here, and evaluate it as a trade-off.</p>



<a name="180009537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009537">(Nov 06 2019 at 07:55)</a>:</h4>
<p>I'll also echo the feeling expressed by several here that this doesn't seem to have gotten discussed very visibly.</p>



<a name="180009585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%C2%BFrevert%3F%20PR%20Pre-expansion%20gate%20most%20of%20the%20things%20%2365742/near/180009585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/.C2.BFrevert.3F.20PR.20Pre-expansion.20gate.20most.20of.20the.20things.20.2365742.html#180009585">(Nov 06 2019 at 07:56)</a>:</h4>
<p>I agree with the proposal to revert and proceed more cautiously.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
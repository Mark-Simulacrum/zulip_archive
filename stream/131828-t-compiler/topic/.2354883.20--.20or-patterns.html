<html>
<head><meta charset="utf-8"><title>#54883 -- or-patterns · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html">#54883 -- or-patterns</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="178470613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178470613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178470613">(Oct 18 2019 at 12:57)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> <span class="user-mention" data-user-id="121053">@varkor</span> <span class="user-mention" data-user-id="116118">@Matthew Jasper</span>  <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span>  -- I thought I'd make a Zulip thread for the work</p>



<a name="178472168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178472168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178472168">(Oct 18 2019 at 13:15)</a>:</h4>
<p>Awesome</p>



<a name="178472212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178472212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178472212">(Oct 18 2019 at 13:15)</a>:</h4>
<p>I'm a little stuck on generating the correct slice or vector of <code>Candidate</code>s</p>



<a name="178472379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178472379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178472379">(Oct 18 2019 at 13:17)</a>:</h4>
<p>The problem boils down to the fact that the current algorithm assumes the number of patterns/match pairs is not growable, but we're obviously changing that</p>



<a name="178473416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473416">(Oct 18 2019 at 13:27)</a>:</h4>
<p>The case <code>&lt;pat&gt;(&lt;pat&gt; | &lt;pat&gt;)</code> is super simple and is very easy to get working</p>



<a name="178473495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473495">(Oct 18 2019 at 13:28)</a>:</h4>
<p>But when you have multiple match pairs that are or-patterns that's when things get way more complicated</p>



<a name="178473589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473589">(Oct 18 2019 at 13:29)</a>:</h4>
<p>In every implementation I've tried so far I either don't generate the correct test or don't clear the candidates match pairs correctly, so I hit an assertion later</p>



<a name="178473663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473663">(Oct 18 2019 at 13:30)</a>:</h4>
<p>Thoughts and feedback would be super helpful</p>



<a name="178473686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473686">(Oct 18 2019 at 13:30)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> Is there perhaps a more targeted PR that we can land first for the easy subset that doesn't create roadblocks for the more advanced case?</p>



<a name="178473706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473706">(Oct 18 2019 at 13:30)</a>:</h4>
<p>Might be good purely for testing purposes</p>



<a name="178473725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473725">(Oct 18 2019 at 13:30)</a>:</h4>
<p>Maybe the single or pattern?</p>



<a name="178473746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473746">(Oct 18 2019 at 13:31)</a>:</h4>
<p>Yeah that's what I'm thinking</p>



<a name="178473791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473791">(Oct 18 2019 at 13:31)</a>:</h4>
<p>E.g. <code>Foo(1 | 2, 3 | 4)</code>  throws a bug</p>



<a name="178473866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473866">(Oct 18 2019 at 13:32)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="178473941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178473941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178473941">(Oct 18 2019 at 13:33)</a>:</h4>
<p>I can post an update to the PR that implements this in a Jacky manner and then maybe <span class="user-mention" data-user-id="121053">@varkor</span> or <span class="user-mention" data-user-id="116118">@Matthew Jasper</span> will spot the reason why multiple or patterns fail</p>



<a name="178474024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178474024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178474024">(Oct 18 2019 at 13:34)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> you could also file a smaller extraction-PR for the subset</p>



<a name="178474048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178474048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178474048">(Oct 18 2019 at 13:34)</a>:</h4>
<p>(I find that easier so I don't lose my original work)</p>



<a name="178474238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/178474238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#178474238">(Oct 18 2019 at 13:36)</a>:</h4>
<p>cc also <span class="user-mention" data-user-id="116009">@nikomatsakis</span>, <span class="user-mention" data-user-id="116083">@pnkfelix</span></p>



<a name="179190865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179190865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179190865">(Oct 27 2019 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> been working on an update today... I'll post a PR shortly</p>



<a name="179190867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179190867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179190867">(Oct 27 2019 at 22:59)</a>:</h4>
<p>Nice!</p>



<a name="179190871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179190871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179190871">(Oct 27 2019 at 22:59)</a>:</h4>
<p>Most everything is passing locally at the moment</p>



<a name="179190948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179190948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179190948">(Oct 27 2019 at 23:00)</a>:</h4>
<p>I'm sure there are holes in it and it is <em>super</em> hacky</p>



<a name="179190965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179190965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179190965">(Oct 27 2019 at 23:00)</a>:</h4>
<p>Glad to see progress nonetheless; soon we'll be able to announce to the world that they should try the implementation out</p>



<a name="179191034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191034">(Oct 27 2019 at 23:02)</a>:</h4>
<p>as long as all bugs are attributed to work you did <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="179191038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191038">(Oct 27 2019 at 23:02)</a>:</h4>
<p>=P</p>



<a name="179191039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191039">(Oct 27 2019 at 23:02)</a>:</h4>
<p>jk if anything the errors will surface in the lowering</p>



<a name="179191047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191047">(Oct 27 2019 at 23:03)</a>:</h4>
<p>I was curious how rustfmt works with the or-pattern?</p>



<a name="179191049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191049">(Oct 27 2019 at 23:03)</a>:</h4>
<p>I'd be very happy if bugs are found and reported; test cases for free! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="179191054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191054">(Oct 27 2019 at 23:03)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> no idea if it is implemented or not</p>



<a name="179191057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191057">(Oct 27 2019 at 23:03)</a>:</h4>
<p>but it should probably be since we made AST level changes</p>



<a name="179191059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191059">(Oct 27 2019 at 23:04)</a>:</h4>
<p>I know they have special rules for <code>|</code> at the end vs at the beginning</p>



<a name="179191100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191100">(Oct 27 2019 at 23:04)</a>:</h4>
<p>yeah I'd think it would _just work_ but</p>



<a name="179191101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191101">(Oct 27 2019 at 23:04)</a>:</h4>
<p>was curious</p>



<a name="179191166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191166">(Oct 27 2019 at 23:06)</a>:</h4>
<p>Seems like it is implemented:</p>
<div class="codehilite"><pre><span></span><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="n">VeryLongThing</span><span class="w"></span>
<span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">JesusHowLongThisIs</span><span class="w"></span>
<span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">IMeanHaveYouSeenSomethingSoLong</span><span class="w"></span>
<span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">AndItGetsEvenLonger</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>



<a name="179191184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191184">(Oct 27 2019 at 23:07)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> looks reasonable</p>



<a name="179191185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179191185" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179191185">(Oct 27 2019 at 23:07)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> nice!</p>



<a name="179193652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179193652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179193652">(Oct 28 2019 at 00:28)</a>:</h4>
<p>:/ need to do a rebase on upstream... will be a sec to rebuild and test</p>



<a name="179193657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179193657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179193657">(Oct 28 2019 at 00:28)</a>:</h4>
<p>if I don't push the changes up tonight, I'll push them tomorrow</p>



<a name="179198327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179198327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179198327">(Oct 28 2019 at 02:45)</a>:</h4>
<p>pushed the changes... its definitely still in the phase where it is largely a hack and less of a feature</p>



<a name="179198333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179198333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179198333">(Oct 28 2019 at 02:45)</a>:</h4>
<p>did quite a bit of testing and a lot seems to work out of the box</p>



<a name="179198376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179198376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179198376">(Oct 28 2019 at 02:46)</a>:</h4>
<p>largely due to the move from manually building the CFG -&gt; using the Candidate</p>



<a name="179198404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179198404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179198404">(Oct 28 2019 at 02:48)</a>:</h4>
<p>but <code>@</code> currently causes an ICE and unreachability checks trigger some false warnings</p>



<a name="179198428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179198428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179198428">(Oct 28 2019 at 02:48)</a>:</h4>
<p>I'm sure I'll find more as I go</p>



<a name="179198489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179198489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179198489">(Oct 28 2019 at 02:50)</a>:</h4>
<p>Hopefully <span class="user-mention" data-user-id="116118">@Matthew Jasper</span> will pitch in at some point <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="179271543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179271543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179271543">(Oct 28 2019 at 20:21)</a>:</h4>
<p>I'll have a look at this at the weekend. I'll need to experiment a bit to work out what the final version of the code should look like.</p>



<a name="179722216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179722216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179722216">(Nov 02 2019 at 22:46)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> I've pulled your branch and experimented with it locally a bit. There seem to be some ICEs and unexpected errors from match checking which I don't know how to fix, I guess <span class="user-mention" data-user-id="245339">@Nadrieril</span> will be fixing them.</p>



<a name="179722396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179722396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179722396">(Nov 02 2019 at 22:52)</a>:</h4>
<p>Depends on what the ICE is I guess?</p>



<a name="179722403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179722403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179722403">(Nov 02 2019 at 22:53)</a>:</h4>
<p>I did hit ICEs when using <code>@</code></p>



<a name="179722405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179722405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179722405">(Nov 02 2019 at 22:53)</a>:</h4>
<p>What were you hitting an ICE with?</p>



<a name="179722451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179722451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179722451">(Nov 02 2019 at 22:54)</a>:</h4>
<p>This assert is firing:</p>
<div class="codehilite"><pre><span></span><span class="n">build</span><span class="o">/</span><span class="n">matches</span><span class="o">/</span><span class="k">mod</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">1215</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="n">assert</span><span class="o">!</span><span class="p">(</span><span class="n">rows</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">all</span><span class="p">(</span><span class="o">|</span><span class="n">r</span><span class="o">|</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">len</span><span class="p">()));</span><span class="w"></span>
</pre></div>


<p>test code:</p>
<div class="codehilite"><pre><span></span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">f</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i32</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="mi">1</span><span class="p">,),);</span><span class="w"></span>

<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">((</span><span class="n">y</span><span class="p">,)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">,),)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>



<a name="179722522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/179722522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#179722522">(Nov 02 2019 at 22:56)</a>:</h4>
<p>I've left a comment trying to explain what I was expecting the lowering code to look like.</p>



<a name="181326902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181326902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181326902">(Nov 21 2019 at 17:26)</a>:</h4>
<p>Hello ! I've been working on the exhaustiveness side, and the basic impl is reasonably straightforward. However the tests I write trigger ICEs <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span> . Example:</p>
<div class="codehilite"><pre><span></span><span class="k">struct</span> <span class="nc">X</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">T</span><span class="p">);</span><span class="w"></span>
<span class="k">match</span><span class="w"> </span><span class="n">X</span><span class="p">(</span><span class="mi">0</span><span class="k">u8</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">X</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">//~ ERROR unreachable pattern</span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<p>I made sure there would be an error so that we don't get into code generation, but rustc does try to go further and hits me with "simplifyable pattern found".  Any idea how I could work around this ?</p>



<a name="181327472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181327472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181327472">(Nov 21 2019 at 17:32)</a>:</h4>
<p><span class="user-mention" data-user-id="245339">@Nadrieril</span> maybe insert something else below that would fail in match checking</p>



<a name="181327481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181327481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181327481">(Nov 21 2019 at 17:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="mi">0</span>: <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</pre></div>



<a name="181327534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181327534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181327534">(Nov 21 2019 at 17:33)</a>:</h4>
<p>hopefully this should allow you to write the tests exercising match checking but avoid reaching the borrow checker</p>



<a name="181327699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181327699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181327699">(Nov 21 2019 at 17:34)</a>:</h4>
<p>hmm; that doesn't seem to work... <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=ad7f9b5d67afd59c24aa395ceda01fbd" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=ad7f9b5d67afd59c24aa395ceda01fbd">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=ad7f9b5d67afd59c24aa395ceda01fbd</a></p>



<a name="181327758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181327758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181327758">(Nov 21 2019 at 17:35)</a>:</h4>
<p>maybe try inserting a fatal error in MIR building on encountering <code>PatKind::Or(...)</code> which isn't at the top level</p>



<a name="181327767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181327767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181327767">(Nov 21 2019 at 17:35)</a>:</h4>
<p>that way it won't ICE</p>



<a name="181327785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181327785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181327785">(Nov 21 2019 at 17:35)</a>:</h4>
<p>I believe you should also be able to have ICEs in tests if you prefer that strategy</p>



<a name="181571083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181571083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181571083">(Nov 21 2019 at 18:39)</a>:</h4>
<p>Oh indeed, I discovered <code>should-ice</code>, thanks !</p>



<a name="181571298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181571298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181571298">(Nov 21 2019 at 18:41)</a>:</h4>
<p>np; it was added pretty recently ^^</p>



<a name="181573483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181573483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181573483">(Nov 21 2019 at 19:05)</a>:</h4>
<p>Got <a href="https://github.com/rust-lang/rust/pull/66612" target="_blank" title="https://github.com/rust-lang/rust/pull/66612">https://github.com/rust-lang/rust/pull/66612</a> up ! It does almost everything I believe, there's just some more work to do to clean up the current ad-hocery used for top-level or-patterns</p>



<a name="181573613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181573613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181573613">(Nov 21 2019 at 19:07)</a>:</h4>
<p>that was quick :D</p>



<a name="181598525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181598525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181598525">(Nov 22 2019 at 00:12)</a>:</h4>
<p>I had been thinking about it for a while when writing my other PRs ^^</p>



<a name="181600132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181600132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181600132">(Nov 22 2019 at 00:40)</a>:</h4>
<p>hehe; left some review comments for you</p>



<a name="181600133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181600133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181600133">(Nov 22 2019 at 00:40)</a>:</h4>
<p>nice work</p>



<a name="181879982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181879982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181879982">(Nov 26 2019 at 00:53)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> What is <code>abort_if_errors</code> that you mentioned in you PR comment ?</p>



<a name="181880033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181880033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181880033">(Nov 26 2019 at 00:54)</a>:</h4>
<p><a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/struct.Session.html#method.abort_if_errors" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/struct.Session.html#method.abort_if_errors">https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/struct.Session.html#method.abort_if_errors</a></p>



<a name="181880038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181880038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181880038">(Nov 26 2019 at 00:54)</a>:</h4>
<p>it aborts compilation, basically</p>



<a name="181880079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181880079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181880079">(Nov 26 2019 at 00:55)</a>:</h4>
<p>could use <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_errors/struct.FatalError.html#method.raise" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_errors/struct.FatalError.html#method.raise">https://doc.rust-lang.org/nightly/nightly-rustc/rustc_errors/struct.FatalError.html#method.raise</a> also I think</p>



<a name="181880192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181880192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181880192">(Nov 26 2019 at 00:56)</a>:</h4>
<p>using <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/struct.Session.html#method.span_fatal" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/struct.Session.html#method.span_fatal">https://doc.rust-lang.org/nightly/nightly-rustc/rustc/session/struct.Session.html#method.span_fatal</a> is probably most apprioriate as it has <code>-&gt; !</code></p>



<a name="181880970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%2354883%20--%20or-patterns/near/181880970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadrieril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.2354883.20--.20or-patterns.html#181880970">(Nov 26 2019 at 01:09)</a>:</h4>
<p>I see, thanks</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
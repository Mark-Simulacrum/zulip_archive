<html>
<head><meta charset="utf-8"><title>assertion failed: builder.config.extended&#x27;, src/bootstrap/di · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/assertion.20failed.3A.20builder.2Econfig.2Eextended&#x27;.2C.20src.2Fbootstrap.2Fdi.html">assertion failed: builder.config.extended&#x27;, src/bootstrap/di</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="231215037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/assertion%20failed%3A%20builder.config.extended%27%2C%20src/bootstrap/di/near/231215037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/assertion.20failed.3A.20builder.2Econfig.2Eextended&#x27;.2C.20src.2Fbootstrap.2Fdi.html#231215037">(Mar 21 2021 at 13:00)</a>:</h4>
<p>When building from source, 1.50.0, at HEAD <code>cb75ad5db02783e8b0222fee363c5f63f7e2cf5b</code> </p>
<p>I had no issue with 1.49 (finally), is this something that is on my end?</p>
<div class="codehilite"><pre><span></span><code>    Finished dev [unoptimized + debuginfo] target(s) in 1m 03s
thread &#39;main&#39; panicked at &#39;assertion failed: builder.config.extended&#39;, src/bootstrap/dist.rs:1019:9
stack backtrace:
   0:     0x560087ae92e0 - std::backtrace_rs::backtrace::libunwind::trace::h04d12fdcddff82aa
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/../../backtrace/src/backtrace/libunwind.rs:100:5
   1:     0x560087ae92e0 - std::backtrace_rs::backtrace::trace_unsynchronized::h1459b974b6fbe5e1
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5
   2:     0x560087ae92e0 - std::sys_common::backtrace::_print_fmt::h9b8396a669123d95
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/sys_common/backtrace.rs:67:5
   3:     0x560087ae92e0 - &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt::he009dcaaa75eed60
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/sys_common/backtrace.rs:46:22
   4:     0x560087b128ac - core::fmt::write::h77b4746b0dea1dd3
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/core/src/fmt/mod.rs:1078:17
   5:     0x560087ae3c62 - std::io::Write::write_fmt::heb7e50902e98831c
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/io/mod.rs:1518:15
   6:     0x560087aed595 - std::sys_common::backtrace::_print::h2d880c9e69a21be9
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/sys_common/backtrace.rs:49:5
   7:     0x560087aed595 - std::sys_common::backtrace::print::h5f02b1bb49f36879
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/sys_common/backtrace.rs:36:9
   8:     0x560087aed595 - std::panicking::default_hook::{{closure}}::h658e288a7a809b29
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panicking.rs:208:50
   9:     0x560087aed238 - std::panicking::default_hook::hb52d73f0da9a4bb8
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panicking.rs:227:9
  10:     0x560087aedd31 - std::panicking::rust_panic_with_hook::hfe7e1c684e3e6462
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panicking.rs:593:17
  11:     0x5600876dfe3e - std::panicking::begin_panic::{{closure}}::hb6e47bc45c8d96f1
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panicking.rs:522:9
  12:     0x5600876e2c69 - std::sys_common::backtrace::__rust_end_short_backtrace::h8e608a008af81a6b
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/sys_common/backtrace.rs:141:18
  13:     0x5600876dfd6b - std::panicking::begin_panic::h24684311e95e3fdc
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panicking.rs:521:12
  14:     0x56008724b53a - &lt;bootstrap::dist::Rls as bootstrap::builder::Step&gt;::run::h6821a437826851ce
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/dist.rs:1019:9
  15:     0x56008718a136 - bootstrap::builder::Builder::ensure::hac8d7597bfd69b62
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/builder.rs:1488:23
  16:     0x56008724def2 - &lt;bootstrap::dist::Extended as bootstrap::builder::Step&gt;::run::h2d47dab0cdba2dff
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/dist.rs:1283:29
  17:     0x56008714870e - bootstrap::builder::Builder::ensure::h62fd1d112af53074
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/builder.rs:1488:23
  18:     0x56008724d94a - &lt;bootstrap::dist::Extended as bootstrap::builder::Step&gt;::make_run::h9b4049d6d8e0244e
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/dist.rs:1265:9
  19:     0x560086fd23f0 - bootstrap::builder::StepDescription::maybe_run::h617fd6c1dabfdbbe
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/builder.rs:179:13
  20:     0x560086fd2da2 - bootstrap::builder::StepDescription::run::h103b5ccf6a62f48e
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/builder.rs:220:21
  21:     0x560086fd69b2 - bootstrap::builder::Builder::run_step_descriptions::ha96f2b42c0c4ed06
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/builder.rs:571:9
  22:     0x560086fd6872 - bootstrap::builder::Builder::execute_cli::h0c6c419f8d3f3a40
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/builder.rs:562:9
  23:     0x5600875f0c08 - bootstrap::Build::build::h357c9f5492e62398
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/lib.rs:506:17
  24:     0x560086f49587 - bootstrap::main::habd834d88ea06f42
                               at /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/src/bootstrap/bin/main.rs:30:5
  25:     0x560086f49d5b - core::ops::function::FnOnce::call_once::h1cad58c5e6fdf68e
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/core/src/ops/function.rs:227:5
  26:     0x560086f49bee - std::sys_common::backtrace::__rust_begin_short_backtrace::hf76c818751d18e54
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/sys_common/backtrace.rs:125:18
  27:     0x560086f4ac51 - std::rt::lang_start::{{closure}}::h004788d98c42700d
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/rt.rs:66:18
  28:     0x560087aee247 - core::ops::function::impls::&lt;impl core::ops::function::FnOnce&lt;A&gt; for &amp;F&gt;::call_once::h57e2a071d427b24c
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/core/src/ops/function.rs:259:13
  29:     0x560087aee247 - std::panicking::try::do_call::h81cbbe0c3b30a28e
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panicking.rs:381:40
  30:     0x560087aee247 - std::panicking::try::hbeeb95b4e1f0a876
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panicking.rs:345:19
  31:     0x560087aee247 - std::panic::catch_unwind::h59c48ccb40a0bf20
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/panic.rs:396:14
  32:     0x560087aee247 - std::rt::lang_start_internal::ha53ab63f88fee728
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/rt.rs:51:25
  33:     0x560086f4ac27 - std::rt::lang_start::h6bc39ac2bdf4e78e
                               at /rustc/e1884a8e3c3e813aada8254edfa120e85bf5ffca/library/std/src/rt.rs:65:5
  34:     0x560086f49bda - main
  35:     0x7f15b42510b3 - __libc_start_main
  36:     0x560086f490de - _start
  37:                0x0 - &lt;unknown&gt;
failed to run: /home/grommish/openwrt/build_dir/hostpkg/rust-1.50.0/build/bootstrap/debug/bootstrap --config ./config.toml dist cargo extended
Build completed unsuccessfully in 0:01:27
</code></pre></div>



<a name="231215103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/assertion%20failed%3A%20builder.config.extended%27%2C%20src/bootstrap/di/near/231215103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/assertion.20failed.3A.20builder.2Econfig.2Eextended&#x27;.2C.20src.2Fbootstrap.2Fdi.html#231215103">(Mar 21 2021 at 13:01)</a>:</h4>
<p>You need to set <code>extended = true</code> in <code>config.toml</code> I think.</p>



<a name="231215164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/assertion%20failed%3A%20builder.config.extended%27%2C%20src/bootstrap/di/near/231215164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/assertion.20failed.3A.20builder.2Econfig.2Eextended&#x27;.2C.20src.2Fbootstrap.2Fdi.html#231215164">(Mar 21 2021 at 13:02)</a>:</h4>
<p>I call it via:</p>
<p><code>RUST_BACKTRACE=full $(PYTHON) x.py --config ./config.toml dist cargo extended</code></p>
<p>Did this change from 1.49 to 1.50?</p>



<a name="231215188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/assertion%20failed%3A%20builder.config.extended%27%2C%20src/bootstrap/di/near/231215188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/assertion.20failed.3A.20builder.2Econfig.2Eextended&#x27;.2C.20src.2Fbootstrap.2Fdi.html#231215188">(Mar 21 2021 at 13:02)</a>:</h4>
<p>Or did I miss an update on my end..  Lemme check :)</p>



<a name="231215267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/assertion%20failed%3A%20builder.config.extended%27%2C%20src/bootstrap/di/near/231215267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/assertion.20failed.3A.20builder.2Econfig.2Eextended&#x27;.2C.20src.2Fbootstrap.2Fdi.html#231215267">(Mar 21 2021 at 13:04)</a>:</h4>
<p>This assert has existed for 3 years: <a href="https://github.com/rust-lang/rust/blob/bbf07c0b4f210ced7bd2785ab554e0d805644235/src/bootstrap/dist.rs#L1027">https://github.com/rust-lang/rust/blob/bbf07c0b4f210ced7bd2785ab554e0d805644235/src/bootstrap/dist.rs#L1027</a></p>



<a name="231215395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/assertion%20failed%3A%20builder.config.extended%27%2C%20src/bootstrap/di/near/231215395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grommish <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/assertion.20failed.3A.20builder.2Econfig.2Eextended&#x27;.2C.20src.2Fbootstrap.2Fdi.html#231215395">(Mar 21 2021 at 13:07)</a>:</h4>
<p>Ah ha.. It was on my end :)  Thanks <span class="user-mention" data-user-id="133247">@bjorn3</span> !</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
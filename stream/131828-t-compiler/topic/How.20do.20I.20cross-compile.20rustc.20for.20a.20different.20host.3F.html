<html>
<head><meta charset="utf-8"><title>How do I cross-compile rustc for a different host? · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html">How do I cross-compile rustc for a different host?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="244958118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244958118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244958118">(Jul 05 2021 at 17:11)</a>:</h4>
<p>I tried <code>x build --host i686-unknown-linux-gnu</code>, which AFAIK is the right invocation, but LLVM is giving me configure errors:</p>
<div class="codehilite"><pre><span></span><code>libstdc++ version must be at least 5.1.
</code></pre></div>
<p>I assume I'm missing some apt package? Does anyone know what it is? I have all these installed:</p>
<div class="codehilite"><pre><span></span><code>libstdc++-8-dev-i386-cross/stable,now 8.3.0-2cross1 all [installed]
libstdc++-8-dev/stable,now 8.3.0-6 amd64 [installed,automatic]
libstdc++-arm-none-eabi-newlib/stable,now 15:7-2018-q2-5+12 all [installed,automatic]
libstdc++6-arm64-cross/stable,now 8.3.0-2cross1 all [installed,auto-removable]
libstdc++6-armel-cross/stable,now 8.3.0-2cross1 all [installed,auto-removable]
libstdc++6-i386-cross/stable,now 8.3.0-2cross1 all [installed,automatic]
libstdc++6/stable,now 8.3.0-6 amd64 [installed]
</code></pre></div>



<a name="244958279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244958279" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244958279">(Jul 05 2021 at 17:13)</a>:</h4>
<p>I have now installed every apt package with "libstd" and "i386" in the name without success <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="244958291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244958291" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244958291">(Jul 05 2021 at 17:13)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> do you happen to have ideas? this is for <a href="https://github.com/rust-lang/rust/pull/86876#pullrequestreview-699334955">https://github.com/rust-lang/rust/pull/86876#pullrequestreview-699334955</a></p>



<a name="244958389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244958389" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244958389">(Jul 05 2021 at 17:14)</a>:</h4>
<p>hmm I have clang as the default compiler, I wonder if that makes a difference?</p>



<a name="244958746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244958746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244958746">(Jul 05 2021 at 17:19)</a>:</h4>
<p>oh great, this error happens <em>only</em> when using gcc as the compiler, so llvm is overriding it somehow</p>



<a name="244958901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244958901" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244958901">(Jul 05 2021 at 17:21)</a>:</h4>
<p><span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> apparently gcc-multilib is different from g++-multilib</p>



<a name="244959125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244959125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244959125">(Jul 05 2021 at 17:24)</a>:</h4>
<p>... nope that didn't help either</p>



<a name="244959173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244959173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244959173">(Jul 05 2021 at 17:25)</a>:</h4>
<p><span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> apparently configure will reuse old artifacts even when the host toolchain changes</p>



<a name="244959176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244959176" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244959176">(Jul 05 2021 at 17:25)</a>:</h4>
<p>I really miss cargo sometimes</p>



<a name="244963364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244963364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244963364">(Jul 05 2021 at 18:26)</a>:</h4>
<p>that's cmake. It remembers paths so well, they persist after you do a nix-collect-garbage. It then goes: "huh, I thought I saw a gcc at this /nix/store/hash path half a year ago and now its gone? ALARM ALARM!!!"</p>



<a name="244963399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244963399" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244963399">(Jul 05 2021 at 18:27)</a>:</h4>
<p>And its not trivial to fix either.</p>



<a name="244966631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244966631" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244966631">(Jul 05 2021 at 19:15)</a>:</h4>
<p>so, I'm still having trouble with this - I tried <code>x build --host i686-unknown-linux-gnu --target i686-unknown-linux-gnu compiler/rustc</code> and then using the compiler in <code>build/i686-unknown-linux-gnu/stage1/</code> to build a crate that used <code>rustc_private</code>. But that told me the standard library wasn't built:</p>
<div class="codehilite"><pre><span></span><code>&gt; rustc +i686 private.rs
error[E0463]: can&#39;t find crate for `std`

error: aborting due to previous error

For more information about this error, try `rustc --explain E0463`.
</code></pre></div>
<p>Then I tried adding <code>--stage 2 library/std</code>, but that seems to be building the compiler for my build triple, not the host I selected (??):</p>
<div class="codehilite"><pre><span></span><code>&gt; x build --host i686-unknown-linux-gnu --target i686-unknown-linux-gnu library/std  --stage 2
Building stage0 std artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)
Copying stage0 std from stage0 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)
Building stage0 compiler artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)
Copying stage0 rustc from stage0 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)
Assembling stage1 compiler (x86_64-unknown-linux-gnu)
Building stage1 std artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)
Copying stage1 std from stage1 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)
Building stage1 compiler artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)
</code></pre></div>



<a name="244966654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244966654" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244966654">(Jul 05 2021 at 19:15)</a>:</h4>
<p>how can I build a compiler with a host of i686 and a standard library built for i686?</p>



<a name="244967326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244967326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244967326">(Jul 05 2021 at 19:25)</a>:</h4>
<p>Can you try <code>--stage 2 compiler/rustc</code>?</p>



<a name="244967435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244967435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244967435">(Jul 05 2021 at 19:26)</a>:</h4>
<p>that <em>says</em> it works but doesn't put anything in i686/stage2/bin:</p>
<div class="codehilite"><pre><span></span><code>Uplifting stage1 rustc (x86_64-unknown-linux-gnu -&gt; i686-unknown-linux-gnu)
Copying stage2 rustc from stage1 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / i686-unknown-linux-gnu)
Build completed successfully in 0:00:01
&gt; rustup toolchain link i686-2 build/i686-unknown-linux-gnu/stage2/
error: not a file: &#39;build/i686-unknown-linux-gnu/stage2/bin/rustc&#39;
</code></pre></div>



<a name="244967472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244967472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244967472">(Jul 05 2021 at 19:27)</a>:</h4>
<p>Maybe try <code>./x.py dist</code>?</p>



<a name="244967523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244967523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244967523">(Jul 05 2021 at 19:28)</a>:</h4>
<p>/me waits half an hour for dist to finish documenting everything</p>



<a name="244968920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244968920" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244968920">(Jul 05 2021 at 19:50)</a>:</h4>
<p>:|</p>
<div class="codehilite"><pre><span></span><code>error[E0514]: found crate `tracing_attributes` compiled by an incompatible version of rustc which `tracing` depends on
  --&gt; compiler/rustc_data_structures/src/lib.rs:31:1
   |
31 | extern crate tracing;
   | ^^^^^^^^^^^^^^^^^^^^^
   |
   = help: please recompile that crate using this compiler (rustc 1.55.0-dev)
   = note: the following crate versions were found:
           crate `tracing_attributes` compiled by rustc 1.55.0-nightly (a5b7511a6 2021-06-27): /home/joshua/rustc3/build/x86_64-unknown-linux-gnu/stage2-rustc/release/deps/libtracing_attributes-64341e2d7d17e39c.so
</code></pre></div>



<a name="244968966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244968966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244968966">(Jul 05 2021 at 19:51)</a>:</h4>
<p>and when I add --host and --target I get</p>
<div class="codehilite"><pre><span></span><code>Documenting stage2 compiler (i686-unknown-linux-gnu)
Building stage1 compiler artifacts (x86_64-unknown-linux-gnu -&gt; i686-unknown-linux-gnu)
    Finished release [optimized] target(s) in 0.13s
Copying stage1 rustc from stage1 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / i686-unknown-linux-gnu)
Uplifting stage1 rustc (x86_64-unknown-linux-gnu -&gt; i686-unknown-linux-gnu)
Copying stage2 rustc from stage1 (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu / i686-unknown-linux-gnu)
   Compiling proc-macro2 v1.0.24
   Compiling autocfg v1.0.0
   Compiling syn v1.0.65
   Compiling libc v0.2.93
   Compiling unicode-xid v0.2.1
   Compiling cc v1.0.68
   Compiling log v0.4.14
   Compiling maybe-uninit v2.0.0
error[E0463]: can&#39;t find crate for `std`

error: aborting due to previous error

For more information about this error, try `rustc --explain E0463`.
error[E0463]: can&#39;t find crate for `std`
</code></pre></div>



<a name="244969057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244969057" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244969057">(Jul 05 2021 at 19:53)</a>:</h4>
<p>Maybe try adding x86_64 to host in addition to i686?</p>



<a name="244969152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244969152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244969152">(Jul 05 2021 at 19:54)</a>:</h4>
<p>adding <code>--target x86_64-unknown-linux-gnu</code> seems to have fixed it</p>



<a name="244969170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244969170" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244969170">(Jul 05 2021 at 19:54)</a>:</h4>
<p><span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> only enough to get the error that I get when compiling for the host</p>



<a name="244969262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244969262" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244969262">(Jul 05 2021 at 19:56)</a>:</h4>
<p>I don't feel like this is getting things closer to working</p>



<a name="244969296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244969296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244969296">(Jul 05 2021 at 19:56)</a>:</h4>
<p>I don't care whether <code>x.py doc</code> finishes successfully or not</p>



<a name="244970091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970091" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970091">(Jul 05 2021 at 20:07)</a>:</h4>
<p>Adding x86_64 to host won't help much.</p>



<a name="244970211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970211" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970211">(Jul 05 2021 at 20:09)</a>:</h4>
<p>I have something like</p>
<div class="codehilite"><pre><span></span><code>./x.py test src/test/ui/abi/stack-probes-lto.rs --target=i686-unknown-linux-gnu --build=x86_64-unknown-linux-gnu --host=i686-unknown-linux-gnu
</code></pre></div>
<p>in my fairly recent shell history</p>



<a name="244970320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970320" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970320">(Jul 05 2021 at 20:10)</a>:</h4>
<p>So that worked at least somewhat recently.</p>



<a name="244970464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970464">(Jul 05 2021 at 20:12)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> I believe you that it works for <code>test</code>, but I want to do fancy things with a toolchain so I'm trying to find a way to use it with <code>rustup toolchain link</code></p>



<a name="244970474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970474">(Jul 05 2021 at 20:13)</a>:</h4>
<p>I don't know how to use rustc_private from a UI test</p>



<a name="244970701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970701" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970701">(Jul 05 2021 at 20:16)</a>:</h4>
<p>I used <code>./build/i686-unknown-linux-gnu/stage1/bin/rustc</code> right afterwards to reduce a test case fwiw so linking it should be possible.</p>



<a name="244970734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970734">(Jul 05 2021 at 20:17)</a>:</h4>
<p>rustc_private seems more difficult...</p>



<a name="244970737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970737">(Jul 05 2021 at 20:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F/near/244966631">said</a>:</p>
<blockquote>
<p>so, I'm still having trouble with this - I tried <code>x build --host i686-unknown-linux-gnu --target i686-unknown-linux-gnu compiler/rustc</code> and then using the compiler in <code>build/i686-unknown-linux-gnu/stage1/</code> to build a crate that used <code>rustc_private</code>. But that told me the standard library wasn't built:</p>
<div class="codehilite"><pre><span></span><code>&gt; rustc +i686 private.rs
error[E0463]: can&#39;t find crate for `std`

error: aborting due to previous error

For more information about this error, try `rustc --explain E0463`.
</code></pre></div>
</blockquote>



<a name="244970768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970768" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970768">(Jul 05 2021 at 20:17)</a>:</h4>
<p>Does it work for stuff that doesn't use <code>rustc_private</code>? I assume yes, but worth making sure.</p>



<a name="244970770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970770" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970770">(Jul 05 2021 at 20:17)</a>:</h4>
<p>no</p>



<a name="244970774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970774">(Jul 05 2021 at 20:17)</a>:</h4>
<p>it doesn't have the standard library at all</p>



<a name="244970827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970827" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970827">(Jul 05 2021 at 20:18)</a>:</h4>
<p>Ah, well, consider trying to run tests then; maybe that'll set up the sysroot well enough for at least regular <code>fn main() {}</code> to work.</p>



<a name="244970840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970840" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970840">(Jul 05 2021 at 20:18)</a>:</h4>
<p>I imagine that should set up rustc_private crates too as we run proc macros in tests.</p>



<a name="244970860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970860" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970860">(Jul 05 2021 at 20:19)</a>:</h4>
<p>hmm maybe if I try a test in run-make-fulldeps, yeah</p>



<a name="244970875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970875" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970875">(Jul 05 2021 at 20:19)</a>:</h4>
<p>proc-macros no longer require two builds of the compiler I don't think</p>



<a name="244970889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970889" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970889">(Jul 05 2021 at 20:19)</a>:</h4>
<p>(maybe this is related to proc_macro::bridge somehow? I'm hazy on the details)</p>



<a name="244970902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970902">(Jul 05 2021 at 20:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F/near/244970827">said</a>:</p>
<blockquote>
<p>Ah, well, consider trying to run tests then; maybe that'll set up the sysroot well enough for at least regular <code>fn main() {}</code> to work.</p>
</blockquote>
<p>nope :(</p>



<a name="244970958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970958" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970958">(Jul 05 2021 at 20:20)</a>:</h4>
<p>That's confusing. /me tries doing that themselves.</p>



<a name="244970981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970981" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970981">(Jul 05 2021 at 20:20)</a>:</h4>
<p>apparently that test uses <code>/home/joshua/rustc3/build/x86_64-unknown-linux-gnu/stage1/bin/rustc</code> as the compiler</p>



<a name="244970983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244970983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244970983">(Jul 05 2021 at 20:20)</a>:</h4>
<p>which doesn't seem right</p>



<a name="244971124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244971124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244971124">(Jul 05 2021 at 20:22)</a>:</h4>
<p>Does running non-rustup linked rustc work?</p>



<a name="244971205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244971205" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244971205">(Jul 05 2021 at 20:23)</a>:</h4>
<p>nope</p>
<div class="codehilite"><pre><span></span><code>&gt; /home/joshua/rustc3/build/i686-unknown-linux-gnu/stage1/bin/rustc private.rs
error[E0463]: can&#39;t find crate for `core`
</code></pre></div>



<a name="244971490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244971490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244971490">(Jul 05 2021 at 20:26)</a>:</h4>
<p>Okay, I'm going to try this myself.</p>



<a name="244974169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244974169" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244974169">(Jul 05 2021 at 21:04)</a>:</h4>
<p><code>./x.py test src/test/ui/abi/stack-probes-lto.rs --target=i686-unknown-linux-gnu --build=x86_64-unknown-linux-gnu --host=i686-unknown-linux-gnu</code> built me a i686 libstd but not a i686 rustc.</p>



<a name="244974221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244974221" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244974221">(Jul 05 2021 at 21:04)</a>:</h4>
<p>and put it in x86_64-unknown-linux-gnu/stage1, right?</p>



<a name="244974232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244974232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244974232">(Jul 05 2021 at 21:04)</a>:</h4>
<p>I wonder if I can symlink i686/stage1/lib to x86_64/stage1/lib <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="244974242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244974242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244974242">(Jul 05 2021 at 21:04)</a>:</h4>
<p>I bet it did, trying <code>ui-fulldeps</code> right now though, it appears to be building i686 llvm</p>



<a name="244974258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244974258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244974258">(Jul 05 2021 at 21:05)</a>:</h4>
<p>that sounds about right</p>



<a name="244974280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244974280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244974280">(Jul 05 2021 at 21:05)</a>:</h4>
<p>And I expect that to construct a proper <code>i686-*/stage1/...</code></p>



<a name="244974937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244974937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244974937">(Jul 05 2021 at 21:16)</a>:</h4>
<p>I must say this global warming thing sure does make them LLVM compiles observably slower.</p>



<a name="244975655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244975655" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244975655">(Jul 05 2021 at 21:30)</a>:</h4>
<p>maybe you could use the CI docker images to build what you need, they have the necessary dependencies</p>



<a name="244975851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244975851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244975851">(Jul 05 2021 at 21:34)</a>:</h4>
<p>So it seems like there is definitely a bug in x.py ^^</p>



<a name="244977590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244977590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244977590">(Jul 05 2021 at 22:03)</a>:</h4>
<p>Yeah, I can repro your findings and I think its a recent break.</p>



<a name="244977677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/How%20do%20I%20cross-compile%20rustc%20for%20a%20different%20host%3F/near/244977677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/How.20do.20I.20cross-compile.20rustc.20for.20a.20different.20host.3F.html#244977677">(Jul 05 2021 at 22:05)</a>:</h4>
<p>This worked as late as early may: <a href="#narrow/stream/187780-t-compiler.2Fwg-llvm/topic/Investigating.20an.20LLVM.20internal.20error.20blocking.20a.20PR.3F/near/237176972">https://rust-lang.zulipchat.com/#narrow/stream/187780-t-compiler.2Fwg-llvm/topic/Investigating.20an.20LLVM.20internal.20error.20blocking.20a.20PR.3F/near/237176972</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
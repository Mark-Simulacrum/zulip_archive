<html>
<head><meta charset="utf-8"><title>tracking hrtb known limitations · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html">tracking hrtb known limitations</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="275904951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275904951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ali MJ Al-Nasrawy <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275904951">(Mar 19 2022 at 11:18)</a>:</h4>
<p>Is there a tracking issue or a documentation for known HRTB limitations? I couldn't find a relevant github issue label either.</p>



<a name="275905514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275905514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ali MJ Al-Nasrawy <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275905514">(Mar 19 2022 at 11:30)</a>:</h4>
<p>more specifically, I faced a problem with this trivial code:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Tr</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="k">impl</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="n">T</span>: <span class="o">'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Tr</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">check</span><span class="p">()</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="o">'</span><span class="na">b</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">b</span><span class="w"> </span><span class="p">()</span>: <span class="nc">Tr</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">check</span><span class="p">()</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>which results in <code>Implementation is onot general enough</code> but though it might be a good idea to search for known similar bugs than reporting a new one.</p>



<a name="275906948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275906948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275906948">(Mar 19 2022 at 12:00)</a>:</h4>
<p><code>#![feature(nll)]</code> gives</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">higher</span><span class="o">-</span><span class="n">ranked</span><span class="w"> </span><span class="n">lifetime</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="w"> </span><span class="o">-</span>-&gt; <span class="o">&lt;</span><span class="n">anon</span><span class="o">&gt;</span>:<span class="mi">6</span>:<span class="mi">13</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">check</span><span class="p">()</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w">             </span><span class="o">^^^^^^^</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">note</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">prove</span><span class="w"> </span><span class="k">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="o">'</span><span class="na">b</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">b</span><span class="w"> </span><span class="p">()</span>: <span class="nc">Tr</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>



<a name="275907059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275907059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275907059">(Mar 19 2022 at 12:03)</a>:</h4>
<p>Note that HRTB handling is provably an undecidable problem. I wouldn't be surprised if this specific case can't be fixed without a special case just for this.</p>



<a name="275907793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275907793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275907793">(Mar 19 2022 at 12:19)</a>:</h4>
<p>Generally, those will be tracked with A-hrtb, I think. But issue labeling isn't 100%</p>



<a name="275908041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275908041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ali MJ Al-Nasrawy <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275908041">(Mar 19 2022 at 12:25)</a>:</h4>
<p>I expected to find such label, but there's seemingly none (edit: that I can find!).</p>



<a name="275908179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275908179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275908179">(Mar 19 2022 at 12:28)</a>:</h4>
<p>Ah interesting. We should probably add one!</p>



<a name="275908192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/tracking%20hrtb%20known%20limitations/near/275908192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/tracking.20hrtb.20known.20limitations.html#275908192">(Mar 19 2022 at 12:29)</a>:</h4>
<p>FWIW this is a difficult problem, but related to similar issues we run into HRTBs with GATs</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
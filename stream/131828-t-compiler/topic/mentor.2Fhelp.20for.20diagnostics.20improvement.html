<html>
<head><meta charset="utf-8"><title>mentor/help for diagnostics improvement · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html">mentor/help for diagnostics improvement</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="256648301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/256648301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#256648301">(Oct 07 2021 at 20:57)</a>:</h4>
<p>hey, so I reported <a href="https://github.com/rust-lang/rust/issues/89627">#89627 - misleading hint for filter() predicates</a> and I was wondering if it would be a good first issue for me to work on?</p>



<a name="256757379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/256757379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#256757379">(Oct 08 2021 at 15:29)</a>:</h4>
<p><span class="user-mention" data-user-id="278740">@Anatol Ulrich</span> it doesn't seem like a <em>bad</em> issue - the basic steps are:</p>
<ol>
<li>Find where the error is currently emitted. You can do this by passing <code>-Ztreat-err-as-bug</code>, which gives you a backtrace.</li>
<li>Change <code>P</code> to show the trait bounds instead of the type name.</li>
</ol>
<p>Your suggestion to change the bounds might not always be right though - it could be that the code needs <em>both</em> the old and new bound.</p>



<a name="256789596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/256789596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#256789596">(Oct 08 2021 at 19:04)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> <br>
I had already done step 1! (wheeeee)<br>
as for "not always right", yes good point, any suggestions how to better handle this? (shall we continue the discussion in the GH issue?)</p>



<a name="256791610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/256791610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#256791610">(Oct 08 2021 at 19:18)</a>:</h4>
<p>I don't have time to follow up on this, sorry</p>



<a name="256793072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/256793072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#256793072">(Oct 08 2021 at 19:29)</a>:</h4>
<p>fair! Thanks for picking it up!</p>



<a name="256960490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/256960490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#256960490">(Oct 10 2021 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="119031">@Esteban Küber</span> ping :)</p>



<a name="257081946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/257081946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#257081946">(Oct 11 2021 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="278740">@Anatol Ulrich</span>  The difficulty for this will be that you need a way of comparing what you're suggesting against the existing bounds. In this case in particular, it is closures, so it is reasonable to "special case" whatever check you have (closure traits have their own syntax and are common enough using uncommon borrowing pattern that it makes sense to do so).</p>



<a name="257082073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/257082073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#257082073">(Oct 11 2021 at 15:42)</a>:</h4>
<p>What I would likely try to do is to "erase" all the bound lifetimes before comparing, and if <em>that</em> matches, but before erasure they don't, then it's reasonable to suggest replacement.</p>



<a name="257082198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/257082198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#257082198">(Oct 11 2021 at 15:43)</a>:</h4>
<p>while doing this it might also make sense to account for associated types: in some cases you might have a <code>T: PartialEq</code> bound, where it should have been <code>T: PartialEq&lt;i32&gt;</code> instead. Currently we suggest adding the new bound and keeping the previous one, instead of replacing, so it is a similar problem.</p>



<a name="257131000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/257131000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#257131000">(Oct 12 2021 at 00:02)</a>:</h4>
<p>phew, that sounds pretty involved</p>



<a name="257550958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/257550958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#257550958">(Oct 14 2021 at 15:07)</a>:</h4>
<p>It kind of is <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="257551041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/257551041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#257551041">(Oct 14 2021 at 15:07)</a>:</h4>
<p>trying the simplest thing that might work (erasing bound lifetimes and comparing) might yield good results, so I'd try that</p>



<a name="257551181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/257551181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#257551181">(Oct 14 2021 at 15:08)</a>:</h4>
<p>after all, worst case scenario you can drop it if you don't feel you can complete this, but I would say that these kind of issues where you don't know if you can get them working is where I've learned the most</p>



<a name="258398764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/258398764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#258398764">(Oct 20 2021 at 16:28)</a>:</h4>
<p>ok, let's see what happens!</p>



<a name="258398876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/258398876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#258398876">(Oct 20 2021 at 16:29)</a>:</h4>
<p>I'll probably also need to derive some additional meta information to replace the found <code>P</code> with the concrete bound(s)?</p>



<a name="258573892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/258573892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#258573892">(Oct 21 2021 at 16:13)</a>:</h4>
<blockquote>
<p>but I would say that these kind of issues where you don't know if you can get them working is where I've learned the most</p>
</blockquote>
<p>This. All the code and doc reading that goes into researching how you _might_ solve an issue is all part of learning!</p>



<a name="258574179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/258574179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#258574179">(Oct 21 2021 at 16:15)</a>:</h4>
<p>Over the last year or two I've done <code>@rustbot claim</code> on several issues and unassigned myself after like an hour of reading several times before I ever managed to actually get anything going.</p>



<a name="258735171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/258735171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#258735171">(Oct 22 2021 at 16:19)</a>:</h4>
<p><span class="user-mention" data-user-id="278740">@Anatol Ulrich</span> , <a class="stream" data-stream-id="182449" href="/#narrow/stream/182449-t-compiler.2Fhelp">#t-compiler/help</a> is the best place for help from more experienced folks on particular issues :)</p>



<a name="259079568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mentor/help%20for%20diagnostics%20improvement/near/259079568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mentor.2Fhelp.20for.20diagnostics.20improvement.html#259079568">(Oct 26 2021 at 10:55)</a>:</h4>
<p>thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>PlaceContext for AscribeUserType · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/PlaceContext.20for.20AscribeUserType.html">PlaceContext for AscribeUserType</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="136343874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/PlaceContext%20for%20AscribeUserType/near/136343874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/PlaceContext.20for.20AscribeUserType.html#136343874">(Oct 23 2018 at 15:25)</a>:</h4>
<p>The default mir visitor impl generated by <code>make_mir_visitor!</code> classifies places used in a <code>AscribeUserType</code> as <code>PlaceContext::Validate</code>. that's clearly wrong, that <code>PlaceContext</code> is for miri's validation statements -- I noticed this now because I am changing <code>Validate</code> to <code>Retag</code>. So <code>AscribeUserType</code> gets its own variant in <code>PlaceContext</code>, but what I am not sure about is whether this should be classified as mutating use, nonmutating use or neither. <code>Validate</code> was neither but that seems wrong for an <code>AscribeUserType</code>?</p>



<a name="136347992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/PlaceContext%20for%20AscribeUserType/near/136347992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/PlaceContext.20for.20AscribeUserType.html#136347992">(Oct 23 2018 at 16:21)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> it is neither</p>



<a name="136347998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/PlaceContext%20for%20AscribeUserType/near/136347998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/PlaceContext.20for.20AscribeUserType.html#136347998">(Oct 23 2018 at 16:21)</a>:</h4>
<p>I remember now that I wanted to change that context</p>



<a name="136348005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/PlaceContext%20for%20AscribeUserType/near/136348005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/PlaceContext.20for.20AscribeUserType.html#136348005">(Oct 23 2018 at 16:21)</a>:</h4>
<p>ascribe-user-type has no effect except to inform the NLL type-checker</p>



<a name="136370172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/PlaceContext%20for%20AscribeUserType/near/136370172" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/PlaceContext.20for.20AscribeUserType.html#136370172">(Oct 23 2018 at 21:57)</a>:</h4>
<p>kk</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>unhelpful lint warning · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html">unhelpful lint warning</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252352995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252352995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252352995">(Sep 07 2021 at 18:48)</a>:</h4>
<p>Working on a lexer and i got this lint warning which is pretty unhelpful:</p>
<div class="codehilite"><pre><span></span><code>warning[E0170]: pattern binding `c` is named the same as one of the variants of the type `AsciiChar`
  --&gt; crates\ptx\src\lexer.rs:23:22
   |
23 | fn is_ident_continue(c: AsciiChar) -&gt; bool {
   |                      ^ help: to match on the variant, qualify the path: `AsciiChar::c`
   |
   = note: `#[warn(bindings_with_variant_name)]` on by default
</code></pre></div>
<p>Should i open a diagnostics issue for this? Its not particularly helpful for lowercase variants or function parameters, and the suggestion is just wrong altogether</p>



<a name="252353211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353211">(Sep 07 2021 at 18:49)</a>:</h4>
<p>yes, definitely file an issue</p>



<a name="252353302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353302">(Sep 07 2021 at 18:50)</a>:</h4>
<p>Hmm, I actually think this lint is ok</p>



<a name="252353340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353340">(Sep 07 2021 at 18:50)</a>:</h4>
<p>sounds good, ill get some reproducible code and file one</p>



<a name="252353388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353388">(Sep 07 2021 at 18:50)</a>:</h4>
<p>its great for match arms, but its pretty unhelpful for function args</p>



<a name="252353420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353420">(Sep 07 2021 at 18:50)</a>:</h4>
<p>and it just doesnt make sense at all for function args</p>



<a name="252353710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353710">(Sep 07 2021 at 18:52)</a>:</h4>
<p>I think enum isn't the best choice here TBH, and the lower case variant names certainly made things worse</p>



<a name="252353780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353780">(Sep 07 2021 at 18:53)</a>:</h4>
<p>that's entirely a separate thing though, right?</p>



<a name="252353793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353793">(Sep 07 2021 at 18:53)</a>:</h4>
<p>True</p>



<a name="252353823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353823">(Sep 07 2021 at 18:53)</a>:</h4>
<p>The lint isn't very useful for function args, but I think it's needed for <code>let</code></p>



<a name="252353824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353824">(Sep 07 2021 at 18:53)</a>:</h4>
<p>There's a separate lint (I forget the name) for violating style conventions</p>



<a name="252353857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353857">(Sep 07 2021 at 18:54)</a>:</h4>
<p>Especially since we are getting <code>let else</code> syntax.</p>



<a name="252353951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252353951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252353951">(Sep 07 2021 at 18:54)</a>:</h4>
<p>I think in refutable pattern bindings it makes sense to lint, but in irrefutable cases it doesn't make sense to ask you to avoid enum variant names</p>



<a name="252354248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252354248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252354248">(Sep 07 2021 at 18:55)</a>:</h4>
<p>Well, in the <code>let</code> scenario, the programmer might be meaning the enum variant name but forgetting to write <code>else</code> block I suppose?</p>



<a name="252354368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252354368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252354368">(Sep 07 2021 at 18:55)</a>:</h4>
<p>yeah, and the suggestion is just plain wrong, im not saying to remove it altogether, just to not suggest this in patterns like that</p>



<a name="252354545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252354545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252354545">(Sep 07 2021 at 18:56)</a>:</h4>
<p>Definitely seems reasonable to have a better error message in these cases</p>



<a name="252354645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252354645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252354645">(Sep 07 2021 at 18:57)</a>:</h4>
<p>here is a reproducible test case <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=e6829290d29151853fdd98844ba6391c">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=e6829290d29151853fdd98844ba6391c</a></p>



<a name="252354696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252354696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252354696">(Sep 07 2021 at 18:57)</a>:</h4>
<p>It's less clear on 'you might be thinking this is a variant' is useful, though; forgetting else or similar seems pretty unlikely to me, but not sure. Conflicts with variable names and enum variants should be pretty rare anyway outside violating the styleguide (on naming enum variants)</p>



<a name="252355408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/unhelpful%20lint%20warning/near/252355408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/unhelpful.20lint.20warning.html#252355408">(Sep 07 2021 at 19:01)</a>:</h4>
<p>opened an issue <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <a href="https://github.com/rust-lang/rust/issues/88730">https://github.com/rust-lang/rust/issues/88730</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
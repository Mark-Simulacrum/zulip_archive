<html>
<head><meta charset="utf-8"><title>test suite · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html">test suite</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="130710224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130710224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130710224">(Aug 01 2018 at 12:26)</a>:</h4>
<p>I would really like to invest some time moving the rest of <code>compile-fail</code> over to <code>ui</code></p>



<a name="130774586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130774586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130774586">(Aug 02 2018 at 12:10)</a>:</h4>
<p>I guess we would need to (or at least <em>should</em>) resolve <a href="https://github.com/rust-lang/rust/issues/46841" target="_blank" title="https://github.com/rust-lang/rust/issues/46841">#46841</a> in parallel with that effort.</p>



<a name="130774612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130774612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130774612">(Aug 02 2018 at 12:11)</a>:</h4>
<p>and that in turn is blocked on coming up with guidelines for directory names. Hmm.</p>



<a name="130774680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130774680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130774680">(Aug 02 2018 at 12:13)</a>:</h4>
<p>I imagine coming up with some guidelines is just a matter of someone writing down some sensible rules.</p>



<a name="130774728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130774728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130774728">(Aug 02 2018 at 12:14)</a>:</h4>
<p>Which, like actually converting the tests, is just a slog through the tests, and seeing what patterns there are in kinds of tests.</p>



<a name="130774747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130774747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130774747">(Aug 02 2018 at 12:14)</a>:</h4>
<p>Though it would be nice if the guidelines could address all test suites and tackle them all at once.</p>



<a name="130774767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130774767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130774767">(Aug 02 2018 at 12:15)</a>:</h4>
<p>Converting <code>compile-test</code> might not actually be <em>too</em> bad, with <code>--bless</code> in hand...</p>



<a name="130783497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783497">(Aug 02 2018 at 15:07)</a>:</h4>
<p>what is going to happen with tests whose UI output is platform-dependent?</p>



<a name="130783537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783537">(Aug 02 2018 at 15:08)</a>:</h4>
<p>e.g., they might contain the size of <code>usize</code> or so</p>



<a name="130783554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783554">(Aug 02 2018 at 15:08)</a>:</h4>
<p>(some miri tests do. others might exist as well.)</p>



<a name="130783560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783560" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783560">(Aug 02 2018 at 15:08)</a>:</h4>
<p>I kept making them compile-fail tests</p>



<a name="130783672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783672">(Aug 02 2018 at 15:09)</a>:</h4>
<p>yeah, tests with platform dependent UI output should not, in my opinion, be migrated to <code>ui/</code></p>



<a name="130783687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783687">(Aug 02 2018 at 15:09)</a>:</h4>
<p>but that's the exception, not the rule.</p>



<a name="130783784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783784">(Aug 02 2018 at 15:09)</a>:</h4>
<p>maybe we could mark tests as platform dependent and generate multiple .stderr files?</p>



<a name="130783791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783791">(Aug 02 2018 at 15:09)</a>:</h4>
<p>but that would be hard to maintain</p>



<a name="130783793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130783793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130783793">(Aug 02 2018 at 15:09)</a>:</h4>
<p>(I probably made statements that were too strong about my goals here. I'd be happy if 90% of the compile-tests/ moved to ui/)</p>



<a name="130802376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130802376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130802376">(Aug 02 2018 at 21:15)</a>:</h4>
<p>UI tests support output postprocessing with regexes (search for "normalize-stderr" in src/test/ui), so platform-dependent output is not a problem.</p>



<a name="130852490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130852490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130852490">(Aug 03 2018 at 17:42)</a>:</h4>
<p><span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> I had no idea! Thats pretty cool.</p>



<a name="130975605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/130975605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#130975605">(Aug 06 2018 at 12:31)</a>:</h4>
<p>I agree I would like to complete this transition</p>



<a name="131072071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131072071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131072071">(Aug 07 2018 at 22:06)</a>:</h4>
<p>I was saying over in <a class="stream" data-stream-id="122657" href="/#narrow/stream/122657-wg-nll">#wg-nll</a> that it is extra important to do this, I think, because otherwise we are just not comparing the compile-fail tests for consistency with NLL.</p>



<a name="131072267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131072267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131072267">(Aug 07 2018 at 22:10)</a>:</h4>
<p>I just adopted <a href="https://github.com/rust-lang/rust/issues/44844" target="_blank" title="https://github.com/rust-lang/rust/issues/44844">https://github.com/rust-lang/rust/issues/44844</a> as an NLL bug, towards that end</p>



<a name="131072273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131072273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131072273">(Aug 07 2018 at 22:11)</a>:</h4>
<p>that reminds me, do we test that run-pass works with NLL?</p>



<a name="131072275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131072275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131072275">(Aug 07 2018 at 22:11)</a>:</h4>
<p>should open an issue on that too...</p>



<a name="131072277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131072277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131072277">(Aug 07 2018 at 22:11)</a>:</h4>
<p>sadly, gotta go now</p>



<a name="131113157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131113157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131113157">(Aug 08 2018 at 14:53)</a>:</h4>
<p>Submitted <a href="https://github.com/rust-lang/rust/issues/53196" target="_blank" title="https://github.com/rust-lang/rust/issues/53196">#53196</a> for this after discussion with <span class="user-mention" data-user-id="116009">@nikomatsakis</span> in a WG-NLL topic.</p>



<a name="131115099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115099">(Aug 08 2018 at 15:29)</a>:</h4>
<p>woah that PR is crazy big^^</p>



<a name="131115290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115290">(Aug 08 2018 at 15:32)</a>:</h4>
<p>And it already has merge conflicts. :)</p>



<a name="131115292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115292">(Aug 08 2018 at 15:32)</a>:</h4>
<p>Woah!</p>



<a name="131115317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115317">(Aug 08 2018 at 15:32)</a>:</h4>
<p>+60k…</p>



<a name="131115322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115322">(Aug 08 2018 at 15:32)</a>:</h4>
<p>You can't even view the entire diff in GH.</p>



<a name="131115342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115342">(Aug 08 2018 at 15:33)</a>:</h4>
<p>Who knows what <span class="user-mention" data-user-id="116107">@davidtwco</span> is trying to sneak in there in the last few thousand files ;)</p>



<a name="131115346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115346">(Aug 08 2018 at 15:33)</a>:</h4>
<p>oh, you can’t view almost any diff in GH nowadays. They must be saving their compute or what</p>



<a name="131115349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115349">(Aug 08 2018 at 15:33)</a>:</h4>
<p>Annoyingly I messed up when doing one of the commits and included some files I intended to leave to the next commit which is making resolving the merge conflict a tad annoying. Needing to mess with the history a little to make it easier to rebase.</p>



<a name="131115392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115392">(Aug 08 2018 at 15:33)</a>:</h4>
<p>there’s about one sort of PR that GH will still show a diff for properly. Its a +1-1 change that only affects exactly 1 file.</p>



<a name="131115432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115432">(Aug 08 2018 at 15:34)</a>:</h4>
<p>"a tad annoying" ⇒ 30k conflicts</p>



<a name="131115441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115441">(Aug 08 2018 at 15:34)</a>:</h4>
<p>and that’s why github is terrible as a reviewing tool</p>



<a name="131115502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115502">(Aug 08 2018 at 15:35)</a>:</h4>
<p>I've squashed the last two commits and then I'm going to insert a new third commit that does what the original third commit was supposed to do and resolve the minor conflicts that will have with the squashed fourth commit. That should make rebasing a bit easier.</p>



<a name="131115509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115509">(Aug 08 2018 at 15:35)</a>:</h4>
<p>I'm surprised it's only -2k</p>



<a name="131115518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115518">(Aug 08 2018 at 15:36)</a>:</h4>
<p>I'm mostly saying this for my own benefit to convince myself it'll work.</p>



<a name="131115562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115562">(Aug 08 2018 at 15:36)</a>:</h4>
<p>Surely the ui test output can't be 58k lines...?</p>



<a name="131115577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115577">(Aug 08 2018 at 15:36)</a>:</h4>
<p>There's some duplication in auxiliary modules for tests too. Not much, but some.</p>



<a name="131115598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115598">(Aug 08 2018 at 15:37)</a>:</h4>
<p>Since I tried to group things together into folders so that the number of files in the root ui folder was &lt; 1000 and could be viewed in GitHub's file browser as a result.</p>



<a name="131115936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115936">(Aug 08 2018 at 15:42)</a>:</h4>
<p>It might make sense to separate the function changles for checking error-pattern into a separate PR</p>



<a name="131115938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115938">(Aug 08 2018 at 15:42)</a>:</h4>
<p>so that the big one really just moves files around</p>



<a name="131115962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115962">(Aug 08 2018 at 15:43)</a>:</h4>
<p>I would have had I known I'd needed to have made that change when trying to do this initially.</p>



<a name="131115972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131115972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131115972">(Aug 08 2018 at 15:43)</a>:</h4>
<p>^^</p>



<a name="131116115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131116115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131116115">(Aug 08 2018 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> the changes for error-pattern <em>seem</em> right</p>



<a name="131116164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131116164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131116164">(Aug 08 2018 at 15:46)</a>:</h4>
<p>/me grumbles about <code>compieltest</code> having no unit tests</p>



<a name="131116169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131116169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131116169">(Aug 08 2018 at 15:46)</a>:</h4>
<p>what could go wrong?</p>



<a name="131116190"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131116190" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131116190">(Aug 08 2018 at 15:46)</a>:</h4>
<p>Tests that were failing with it the way it was no longer fail, and tests that passed with it the way it was, still pass.</p>



<a name="131116335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131116335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131116335">(Aug 08 2018 at 15:48)</a>:</h4>
<p>Did you manually test what happens if you give a bogus error pattern?</p>



<a name="131116393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131116393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131116393">(Aug 08 2018 at 15:49)</a>:</h4>
<p>I think I did.</p>



<a name="131116440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131116440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131116440">(Aug 08 2018 at 15:50)</a>:</h4>
<p>I'll double check because I can't quite remember.</p>



<a name="131118366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131118366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131118366">(Aug 08 2018 at 16:25)</a>:</h4>
<p>It should be rebased. There may be one or two failures that I've not noticed.</p>



<a name="131118371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131118371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131118371">(Aug 08 2018 at 16:25)</a>:</h4>
<p>Testing locally and will fix any I find.</p>



<a name="131119264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131119264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131119264">(Aug 08 2018 at 16:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> ok</p>



<a name="131119286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131119286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131119286">(Aug 08 2018 at 16:43)</a>:</h4>
<p>Looks like there is a failure in <code>tidy</code>.</p>



<a name="131119366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131119366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131119366">(Aug 08 2018 at 16:45)</a>:</h4>
<p>ah the mercilous tidy</p>



<a name="131120141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120141">(Aug 08 2018 at 17:01)</a>:</h4>
<p><span class="user-mention" data-user-id="119031">@Esteban Küber</span>'s comment on the issue makes me realize that I'll need to run on another platform to identify the tests with platform specific output. </p>
<p>Need to fix the issue with <code>tidy</code> first.</p>



<a name="131120151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120151">(Aug 08 2018 at 17:01)</a>:</h4>
<p>d'oh</p>



<a name="131120153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120153">(Aug 08 2018 at 17:01)</a>:</h4>
<p>you might try biting off fewer tests</p>



<a name="131120154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120154">(Aug 08 2018 at 17:01)</a>:</h4>
<p>(also)</p>



<a name="131120157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120157">(Aug 08 2018 at 17:01)</a>:</h4>
<p>i.e., it doens't have to be an "all at once" PR</p>



<a name="131120249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120249">(Aug 08 2018 at 17:03)</a>:</h4>
<p>Yeah, but at this point I've made the big PR and spent time trying to do some reorganization to cut down the number of files in the root directory, so I'm inclined to just try get this PR good to land as soon as I can.</p>



<a name="131120314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120314">(Aug 08 2018 at 17:04)</a>:</h4>
<p>it occurs to me that we ought to move <code>run-pass</code> too, probably?</p>



<a name="131120323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131120323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131120323">(Aug 08 2018 at 17:04)</a>:</h4>
<p>/me tries not to scare <span class="user-mention" data-user-id="116107">@davidtwco</span> away</p>



<a name="131121659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131121659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131121659">(Aug 08 2018 at 17:31)</a>:</h4>
<p>Hm, with this we can probably also get rid of <code>// error-pattern</code> perhaps?</p>



<a name="131122046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122046">(Aug 08 2018 at 17:38)</a>:</h4>
<p>I think there are some cases where we still need it, not sure</p>



<a name="131122051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122051">(Aug 08 2018 at 17:38)</a>:</h4>
<p>though .. maybe not?</p>



<a name="131122059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122059">(Aug 08 2018 at 17:39)</a>:</h4>
<p>well, it is kind of an asserion over "stuff that should exist in the reference output"</p>



<a name="131122067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122067">(Aug 08 2018 at 17:39)</a>:</h4>
<p>or it could be thought of that way</p>



<a name="131122073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122073">(Aug 08 2018 at 17:39)</a>:</h4>
<p>this is certainly what the <code>//~ ERROR</code> annotations effectively server as</p>



<a name="131122074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122074">(Aug 08 2018 at 17:39)</a>:</h4>
<p>and I quite like the setup, I have to say</p>



<a name="131122081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122081">(Aug 08 2018 at 17:39)</a>:</h4>
<p>especially now that we have <code>--bless</code></p>



<a name="131122156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131122156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131122156">(Aug 08 2018 at 17:40)</a>:</h4>
<p>Yeah, it is essentially just an error annotation I guess</p>



<a name="131125409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131125409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131125409">(Aug 08 2018 at 18:37)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> are you still working on <a href="https://github.com/rust-lang/rust/pull/53196" target="_blank" title="https://github.com/rust-lang/rust/pull/53196">https://github.com/rust-lang/rust/pull/53196</a> ? did you see the tidy failure?</p>



<a name="131125718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131125718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131125718">(Aug 08 2018 at 18:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I've seen it. Not had a chance to get to it yet. Will take another look in an hour or so.</p>



<a name="131125748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131125748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131125748">(Aug 08 2018 at 18:43)</a>:</h4>
<p>Is there an easy way for me to test the platform specific output myself?</p>



<a name="131125837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131125837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131125837">(Aug 08 2018 at 18:44)</a>:</h4>
<p>Not really -- it's Windows vs. Linux, I'd imagine (or mostly so)</p>



<a name="131125846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131125846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131125846">(Aug 08 2018 at 18:44)</a>:</h4>
<p>You can grep for cfg.*windows in the directory, which might give some hints...</p>



<a name="131125860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131125860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131125860">(Aug 08 2018 at 18:45)</a>:</h4>
<p>I'd just throw it at bors though</p>



<a name="131128375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131128375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131128375">(Aug 08 2018 at 19:38)</a>:</h4>
<p>Fixed tidy issue.</p>



<a name="131131345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131131345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131131345">(Aug 08 2018 at 20:36)</a>:</h4>
<p>So, Travis has a handful of interesting failures that I don't see locally.</p>



<a name="131134624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134624">(Aug 08 2018 at 21:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> yeah</p>



<a name="131134626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134626">(Aug 08 2018 at 21:51)</a>:</h4>
<p>I just went to check and saw that</p>



<a name="131134632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134632">(Aug 08 2018 at 21:51)</a>:</h4>
<p>any thoughts on those?</p>



<a name="131134638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134638">(Aug 08 2018 at 21:51)</a>:</h4>
<p>why..is the output so weird?</p>



<a name="131134645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134645">(Aug 08 2018 at 21:51)</a>:</h4>
<p>I guess it's the .. line numbers where the errors occur?</p>



<a name="131134714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134714">(Aug 08 2018 at 21:53)</a>:</h4>
<p>I'm not sure. Some of them seemed to be fixable by using <code>$DIR</code> in places where <code>--bless</code> didn't add it.</p>



<a name="131134746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134746">(Aug 08 2018 at 21:54)</a>:</h4>
<p>Some of them, such as the order of suggested trait implementations are stranger.</p>



<a name="131134761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134761">(Aug 08 2018 at 21:54)</a>:</h4>
<p>that may not be deterministic</p>



<a name="131134764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134764">(Aug 08 2018 at 21:54)</a>:</h4>
<p>which is actually something that is useful to know</p>



<a name="131134770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134770">(Aug 08 2018 at 21:54)</a>:</h4>
<p>there is probably a non-fx-hashset or something involved</p>



<a name="131134775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134775">(Aug 08 2018 at 21:54)</a>:</h4>
<p>Yeah - is there something I can do in the test or is that something we need to fix to use ui tests for it?</p>



<a name="131134782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134782">(Aug 08 2018 at 21:54)</a>:</h4>
<p>which test is it?</p>



<a name="131134783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134783">(Aug 08 2018 at 21:55)</a>:</h4>
<p>the output seems all jumbled together :/</p>



<a name="131134790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134790">(Aug 08 2018 at 21:55)</a>:</h4>
<p>I think we can fix the compiler to be deterministic, hopefully</p>



<a name="131134795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134795">(Aug 08 2018 at 21:55)</a>:</h4>
<p>Can't remember, on mobile, left my machine building fresh to see if that helps reproduce some of them.</p>



<a name="131134805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134805">(Aug 08 2018 at 21:55)</a>:</h4>
<p>I don't quite understand why that bors output looks so weird</p>



<a name="131134809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134809">(Aug 08 2018 at 21:55)</a>:</h4>
<p>I feel like when I run locally.. it's much easier to undersatnd...?</p>



<a name="131134811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134811">(Aug 08 2018 at 21:56)</a>:</h4>
<p>or am I forgetting how bad it can be :)</p>



<a name="131134812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134812">(Aug 08 2018 at 21:56)</a>:</h4>
<p>There's another test where it isn't complaining about creating a module where there's an auxiliary of the same name. That test hasn't really changed as far as I can tell.</p>



<a name="131134852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134852" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134852">(Aug 08 2018 at 21:56)</a>:</h4>
<p>There's some that don't show diffs.</p>



<a name="131134857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134857">(Aug 08 2018 at 21:56)</a>:</h4>
<p>And there's some that have diffs that seem to only show ordering changes.</p>



<a name="131134858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134858">(Aug 08 2018 at 21:56)</a>:</h4>
<p>thought:</p>



<a name="131134860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134860">(Aug 08 2018 at 21:56)</a>:</h4>
<p>maybe move <em>just these troublesome tests</em> back to <code>compile-fail</code> for now?</p>



<a name="131134861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134861">(Aug 08 2018 at 21:56)</a>:</h4>
<p>and we can do them in a follow-up PR?</p>



<a name="131134862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134862">(Aug 08 2018 at 21:56)</a>:</h4>
<p>if it's just a handful of tests...</p>



<a name="131134878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134878">(Aug 08 2018 at 21:57)</a>:</h4>
<p>Yeah. That might be an option. Depends how easy they are to resolve. Will need to see if I can reproduce these and fix them locally without much trouble. There's also the platform specific ones that we've not seen yet.</p>



<a name="131134998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131134998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131134998">(Aug 08 2018 at 22:00)</a>:</h4>
<p>Is there a flag to <code>x.py</code> that disables tests being ignored so I run them all each time? That might be helpful for the less deterministic stuff.</p>



<a name="131135022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131135022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131135022">(Aug 08 2018 at 22:00)</a>:</h4>
<p>I should check <code>config.toml</code> actually.</p>



<a name="131135119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131135119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131135119">(Aug 08 2018 at 22:02)</a>:</h4>
<blockquote>
<p>Is there a flag to <code>x.py</code> that disables tests being ignored so I run them all each time? That might be helpful for the less deterministic stuff.</p>
</blockquote>
<p>I don't know...</p>



<a name="131140399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131140399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131140399">(Aug 09 2018 at 00:12)</a>:</h4>
<p>"yes" -- rm -r build/&lt;build triple&gt;/test</p>



<a name="131140406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131140406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131140406">(Aug 09 2018 at 00:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> ^</p>
<p>But nothing better than that today I think</p>



<a name="131159759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131159759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131159759">(Aug 09 2018 at 09:08)</a>:</h4>
<p>So, interesting issue, I've got a test case where the compiler truncates some type that it is printing. In the case where that's a closure, it contains a path. But because it truncates it, that path isn't being normalized - it can't match the whole thing it is expecting.</p>



<a name="131159775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131159775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131159775">(Aug 09 2018 at 09:08)</a>:</h4>
<p>But, on Travis, it can, because the path is shorter - on my machine, it cannot, the path to the rust working directory is too long.</p>



<a name="131159842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131159842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131159842">(Aug 09 2018 at 09:10)</a>:</h4>
<p>In particular, the error from <a href="https://github.com/rust-lang/rust/blob/94c3c340cce53396d23a20b236fa94f1d34b6df7/src/librustc_mir/monomorphize/collector.rs#L500-L501" target="_blank" title="https://github.com/rust-lang/rust/blob/94c3c340cce53396d23a20b236fa94f1d34b6df7/src/librustc_mir/monomorphize/collector.rs#L500-L501">this line</a>.</p>



<a name="131160297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131160297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131160297">(Aug 09 2018 at 09:22)</a>:</h4>
<p>Only in compiletest though, because the path output by rustc is only absolute if the path to the source it was given was absolute - which it is for compiletest.</p>



<a name="131162347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131162347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131162347">(Aug 09 2018 at 10:10)</a>:</h4>
<p>argh</p>



<a name="131162355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131162355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131162355">(Aug 09 2018 at 10:10)</a>:</h4>
<p>can you use the "custom replacement" feature?</p>



<a name="131162361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131162361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131162361">(Aug 09 2018 at 10:10)</a>:</h4>
<p>I forget how that works, in particular I don't remember if it supports a regular expression</p>



<a name="131162370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131162370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131162370">(Aug 09 2018 at 10:10)</a>:</h4>
<p>one could imagine trying to normalize all closure types out in this case</p>



<a name="131164334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131164334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131164334">(Aug 09 2018 at 10:50)</a>:</h4>
<p>Yeah, that worked for fixing that case.</p>



<a name="131164341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131164341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131164341">(Aug 09 2018 at 10:50)</a>:</h4>
<p>Only got a few left to resolve.</p>



<a name="131175259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131175259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131175259">(Aug 09 2018 at 14:21)</a>:</h4>
<p>Rebased again and fixed a majority of the test failures locally. There should be one or two that I've not yet figured out still to solve (and then all the platform-dependent ones).</p>



<a name="131175323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131175323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131175323">(Aug 09 2018 at 14:22)</a>:</h4>
<p><span class="emoji emoji-1f3c5" title="medal">:medal:</span></p>



<a name="131175326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131175326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131175326">(Aug 09 2018 at 14:22)</a>:</h4>
<p>you deserve one of those :)</p>



<a name="131177845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131177845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131177845">(Aug 09 2018 at 15:02)</a>:</h4>
<p>There are some commits where I've made changes either to the compiler or to compiletest in order to get things working. Nothing major or anything like that. The commits that have those changes should be relatively easy to tell apart from the commits that change thousands of files.</p>



<a name="131178731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131178731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131178731">(Aug 09 2018 at 15:16)</a>:</h4>
<p>So, of the test failures from this Travis run - there are five. The last one is another path that needs normalized - I've fixed that locally. This leaves the following:</p>
<div class="codehilite"><pre><span></span>[00:46:35]     [ui] ui/coercion/coerce-unsafe-to-closure.rs
[00:46:35]     [ui] ui/invalid-module-declaration/invalid-module-declaration.rs
[00:46:35]     [ui] ui/issues/issue-46209-private-enum-variant-reexport.rs
[00:46:35]     [ui] ui/meta-expected-error-wrong-rev.rs#a
</pre></div>


<p>I can reproduce the second and fourth. I cannot reproduce the first and third. I have no idea why any of them are happening. The fourth one doesn't show a diff or anything, it just finds itself on that list.</p>



<a name="131178843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131178843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131178843">(Aug 09 2018 at 15:18)</a>:</h4>
<p>The first one is:</p>
<div class="codehilite"><pre><span></span>[00:46:35] -       |                                        ^^^ the trait `std::ops::FnOnce&lt;(&amp;str,)&gt;` is not implemented for `unsafe extern &quot;rust-intrinsic&quot; fn(_) -&gt; _ {std::mem::transmute::&lt;_, _&gt;}`
[00:46:35] +       |                                        ^^^ the trait `std::ops::FnOnce&lt;(&amp;str,)&gt;` is not implemented for `unsafe extern &quot;rust-intrinsic&quot; fn(_) -&gt; _ {std::intrinsics::transmute::&lt;_, _&gt;}`
</pre></div>


<p>I don't know why I get the result I get locally or why it is different on Travis.</p>



<a name="131178880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131178880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131178880">(Aug 09 2018 at 15:19)</a>:</h4>
<p>The second one is:</p>
<div class="codehilite"><pre><span></span>[00:46:35] ---- [ui] ui/invalid-module-declaration/invalid-module-declaration.rs stdout ----
[00:46:35]
[00:46:35] error: error pattern &#39; cannot declare a new module at this location&#39; not found!
[00:46:35]
[00:46:35] error: error pattern &#39; maybe move this module&#39; not found!
[00:46:35]
[00:46:35] error: multiple error patterns not found
[00:46:35] status: exit code: 1
[00:46:35] command: &quot;/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/bin/rustc&quot; &quot;/checkout/src/test/ui/invalid-module-declaration/invalid-module-declaration.rs&quot; &quot;--target=x86_64-unknown-linux-gnu&quot; &quot;--error-format&quot; &quot;json&quot; &quot;-Zui-testing&quot; &quot;-C&quot; &quot;prefer-dynamic&quot; &quot;-o&quot; &quot;/checkout/obj/build/x86_64-unknown-linux-gnu/test/ui/invalid-module-declaration/invalid-module-declaration/a&quot; &quot;-Crpath&quot; &quot;-O&quot; &quot;-Zunstable-options&quot; &quot;-Lnative=/checkout/obj/build/x86_64-unknown-linux-gnu/native/rust-test-helpers&quot; &quot;-L&quot; &quot;/checkout/obj/build/x86_64-unknown-linux-gnu/test/ui/invalid-module-declaration/invalid-module-declaration/auxiliary&quot; &quot;-A&quot; &quot;unused&quot;
</pre></div>


<p>This one is because the auxiliary module should stop the module declared in the test from being declared. <a href="https://github.com/davidtwco/rust/tree/compile-fail-to-ui/src/test/ui/invalid-module-declaration" target="_blank" title="https://github.com/davidtwco/rust/tree/compile-fail-to-ui/src/test/ui/invalid-module-declaration">Nothing has changed about this test whatsoever</a> (not even moved it) or about auxiliary handling in compiletest.</p>



<a name="131178913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131178913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131178913">(Aug 09 2018 at 15:19)</a>:</h4>
<p>The third one is:</p>
<div class="codehilite"><pre><span></span>[00:46:35] 16   LL |     crate enum Crewman {
[00:46:35] 17      |     ------------------ help: consider making the enum public: `pub enum Crewman`
[00:46:35] 18
[00:46:35] -    error: enum is private and its variants cannot be re-exported
[00:46:35] -      --&gt; $DIR/issue-46209-private-enum-variant-reexport.rs:14:13
[00:46:35] -       |
[00:46:35] -    LL |     pub use self::Professor::*;
[00:46:35] -       |             ^^^^^^^^^^^^^^^^^^
[00:46:35] -    ...
[00:46:35] -    LL |     enum Professor {
[00:46:35] -       |     -------------- help: consider making the enum public: `pub enum Professor`
[00:46:35] -
[00:46:35] 28   error: variant `JuniorGrade` is private and cannot be re-exported
[00:46:35] 29     --&gt; $DIR/issue-46209-private-enum-variant-reexport.rs:16:32
[00:46:35] 30      |
[00:46:35]
[00:46:35] 33   ...
[00:46:35] 34   LL |     enum Lieutenant {
[00:46:35] 35      |     --------------- help: consider making the enum public: `pub enum Lieutenant`
[00:46:35] +
[00:46:35] +    error: enum is private and its variants cannot be re-exported
[00:46:35] +      --&gt; $DIR/issue-46209-private-enum-variant-reexport.rs:14:13
[00:46:35] +       |
[00:46:35] +    LL |     pub use self::Professor::*;
[00:46:35] +       |             ^^^^^^^^^^^^^^^^^^
[00:46:35] +    ...
[00:46:35] +    LL |     enum Professor {
[00:46:35] +       |     -------------- help: consider making the enum public: `pub enum Professor`
[00:46:35] 36
[00:46:35] 37   error: variant `Full` is private and cannot be re-exported
[00:46:35] 38     --&gt; $DIR/issue-46209-private-enum-variant-reexport.rs:16:45
</pre></div>


<p>For some reason, these errors are reported in different order on Travis, I've built the compiler with three different versions now with all the rebases, I can't get it to make that order locally.</p>



<a name="131178969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131178969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131178969">(Aug 09 2018 at 15:20)</a>:</h4>
<p>The fourth one doesn't say anything at all.</p>



<a name="131178975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131178975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131178975">(Aug 09 2018 at 15:20)</a>:</h4>
<p>Not a thing.</p>



<a name="131179090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179090">(Aug 09 2018 at 15:22)</a>:</h4>
<p>interesting</p>



<a name="131179092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179092">(Aug 09 2018 at 15:22)</a>:</h4>
<p>I have some ideas about some of those</p>



<a name="131179101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179101">(Aug 09 2018 at 15:22)</a>:</h4>
<p>but I definitely think we should leave those in compile-fail and file follow-up issues</p>



<a name="131179110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179110">(Aug 09 2018 at 15:22)</a>:</h4>
<p>I am eager to let you stop rebasing this thing</p>



<a name="131179130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179130">(Aug 09 2018 at 15:22)</a>:</h4>
<p>I've only had to rebase twice and both times (after fixing my initial messy commits) I've not had to really make any changes.</p>



<a name="131179135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179135">(Aug 09 2018 at 15:23)</a>:</h4>
<blockquote>
<p>The first one is:</p>
</blockquote>
<p>That looks like maybe the code that generates a path from a <code>DefId</code> is kind of non-deterministic-ish?</p>



<a name="131179146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179146">(Aug 09 2018 at 15:23)</a>:</h4>
<p>that is, there are probably multiple valid paths due to re-exports or whatever</p>



<a name="131179227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179227">(Aug 09 2018 at 15:24)</a>:</h4>
<blockquote>
<p>For some reason, these errors are reported in different order on Travis,</p>
</blockquote>
<p>would have to look at the privacy related code, I guess...</p>



<a name="131179237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179237">(Aug 09 2018 at 15:24)</a>:</h4>
<p>I could normalize that [the first one] and fix it that way - it's a ugly solution but we could add an issue so it gets resolved at some point.</p>



<a name="131179240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179240">(Aug 09 2018 at 15:24)</a>:</h4>
<p>as an aside, I am reminded that in previous compilers I worked on, we had support for multiple valid outputs, perhaps for this reason :)</p>



<a name="131179248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179248">(Aug 09 2018 at 15:24)</a>:</h4>
<p>but yeah these don't feel like 'normalizations'</p>



<a name="131179251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179251">(Aug 09 2018 at 15:24)</a>:</h4>
<p>though I guess adding with a FIXME might be ok</p>



<a name="131179252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179252">(Aug 09 2018 at 15:24)</a>:</h4>
<p>I think it makes sense to pull these out for now</p>



<a name="131179254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179254">(Aug 09 2018 at 15:24)</a>:</h4>
<p>They aren't, but they'd get it working.</p>



<a name="131179274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179274">(Aug 09 2018 at 15:25)</a>:</h4>
<blockquote>
<p>I think it makes sense to pull these out for now</p>
</blockquote>
<p>by this you mean leave as compile-fail tests?</p>



<a name="131179310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179310">(Aug 09 2018 at 15:25)</a>:</h4>
<p>Strangest thing is, the <code>invalid-module-declaration</code> error - I had that working in the very first push, after the first rebase it didn't.</p>



<a name="131179358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179358">(Aug 09 2018 at 15:26)</a>:</h4>
<p>The first rebase being immediately after the first push.</p>



<a name="131179396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179396">(Aug 09 2018 at 15:26)</a>:</h4>
<p>The last one is a "meta-test" of compiletest.</p>



<a name="131179417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179417">(Aug 09 2018 at 15:27)</a>:</h4>
<p>I wonder if the issue for that is that <code>// should-fail</code> isn't respected on UI tests?</p>



<a name="131179442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179442" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179442">(Aug 09 2018 at 15:27)</a>:</h4>
<p>Yeah, leaving them as compile-fail</p>



<a name="131179866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131179866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131179866">(Aug 09 2018 at 15:34)</a>:</h4>
<blockquote>
<p>I wonder if the issue for that is that <code>// should-fail</code> isn't respected on UI tests?</p>
</blockquote>
<p>could be</p>



<a name="131180464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180464">(Aug 09 2018 at 15:43)</a>:</h4>
<p>I'm struggling to see how <code>should-fail</code> is implemented in any of the testing modes.</p>



<a name="131180783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180783">(Aug 09 2018 at 15:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> I believe it is used earlier on</p>



<a name="131180788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180788">(Aug 09 2018 at 15:47)</a>:</h4>
<p>I'd actually be a bit surprised if it is not respected by <code>ui</code></p>



<a name="131180838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180838">(Aug 09 2018 at 15:48)</a>:</h4>
<p>let me see...</p>



<a name="131180842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180842">(Aug 09 2018 at 15:48)</a>:</h4>
<p>I've grepped around and can only find it used where it is parsed. That sets another field but I can't find it used at all.</p>



<a name="131180855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180855">(Aug 09 2018 at 15:48)</a>:</h4>
<p>yeah, here: <a href="https://github.com/rust-lang/rust/blob/b73535f1e9c46a698527fab51b1cc9fad3f53412/src/tools/compiletest/src/main.rs#L623-L633" target="_blank" title="https://github.com/rust-lang/rust/blob/b73535f1e9c46a698527fab51b1cc9fad3f53412/src/tools/compiletest/src/main.rs#L623-L633">link</a></p>



<a name="131180858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180858">(Aug 09 2018 at 15:48)</a>:</h4>
<p>basically we use the same runtime as is used for <code>#[test]</code></p>



<a name="131180864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180864">(Aug 09 2018 at 15:48)</a>:</h4>
<p>and <code>// should_fail</code> translates into setting the <code>should_panic</code> field to true</p>



<a name="131180874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180874">(Aug 09 2018 at 15:49)</a>:</h4>
<p>I can't find <code>should_panic</code> being used though.</p>



<a name="131180875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180875">(Aug 09 2018 at 15:49)</a>:</h4>
<p>Other than there.</p>



<a name="131180882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180882">(Aug 09 2018 at 15:49)</a>:</h4>
<p>well that's because it's in the libtest runtime</p>



<a name="131180890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180890">(Aug 09 2018 at 15:49)</a>:</h4>
<p>Ah.</p>



<a name="131180894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131180894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131180894">(Aug 09 2018 at 15:49)</a>:</h4>
<p>That makes more sense.</p>



<a name="131181009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181009">(Aug 09 2018 at 15:51)</a>:</h4>
<p>Does that mean that the bug is that it is returning a status of 256 despite the fact I can see the test does error?</p>



<a name="131181205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181205">(Aug 09 2018 at 15:54)</a>:</h4>
<p>Either way, I'm moving those tests to <code>compile-fail</code> now.</p>



<a name="131181603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181603">(Aug 09 2018 at 16:00)</a>:</h4>
<p>Moving back to <code>compile-fail</code>, all but <code>invalid-module-declaration</code> work.</p>



<a name="131181604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181604">(Aug 09 2018 at 16:00)</a>:</h4>
<p>I don't know what I've done to this test.</p>



<a name="131181851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181851">(Aug 09 2018 at 16:05)</a>:</h4>
<blockquote>
<p>Does that mean that the bug is that it is returning a status of 256 despite the fact I can see the test does error?</p>
</blockquote>
<p>maybe...</p>



<a name="131181854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181854">(Aug 09 2018 at 16:05)</a>:</h4>
<p>Alright, so, I know what happened, I think. This test never worked. <a href="https://github.com/rust-lang/rust/blob/master/src/test/ui/invalid-module-declaration/invalid-module-declaration.rs" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/test/ui/invalid-module-declaration/invalid-module-declaration.rs">It was always a ui test</a>. But previously, <code>error-pattern</code> didn't work on ui test - I fixed that when working on this because we noticed it on some tests.</p>



<a name="131181858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181858">(Aug 09 2018 at 16:05)</a>:</h4>
<p>ah, interesting :)</p>



<a name="131181877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181877">(Aug 09 2018 at 16:05)</a>:</h4>
<p>It was always making an error - and that error matched the UI output.</p>



<a name="131181884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181884">(Aug 09 2018 at 16:05)</a>:</h4>
<p>It always passed. But it didn't assert that the two error patterns existed, and now it does, and well, those patterns don't match.</p>



<a name="131181887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131181887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131181887">(Aug 09 2018 at 16:06)</a>:</h4>
<p>What should I do about this test?</p>



<a name="131182301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182301">(Aug 09 2018 at 16:12)</a>:</h4>
<p>what patterns is it assering?</p>



<a name="131182306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182306">(Aug 09 2018 at 16:12)</a>:</h4>
<p>and what is the actual output?</p>



<a name="131182314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182314">(Aug 09 2018 at 16:12)</a>:</h4>
<p>I've pushed with the patterns removed to see if anything else fails on Travis.</p>



<a name="131182322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182322">(Aug 09 2018 at 16:12)</a>:</h4>
<p>The error output is that it expects a file to be there for a module declared in the auxiliary code.</p>



<a name="131182324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182324">(Aug 09 2018 at 16:12)</a>:</h4>
<p>That should be there.</p>



<a name="131182336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182336">(Aug 09 2018 at 16:13)</a>:</h4>
<p>But there is also a duplicate module declared in a test. The patterns expect errors about that duplicate module name.</p>



<a name="131182342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182342">(Aug 09 2018 at 16:13)</a>:</h4>
<p>There aren't any.</p>



<a name="131182351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182351">(Aug 09 2018 at 16:13)</a>:</h4>
<p>You can see <a href="https://github.com/rust-lang/rust/tree/master/src/test/ui/invalid-module-declaration" target="_blank" title="https://github.com/rust-lang/rust/tree/master/src/test/ui/invalid-module-declaration">the test here</a> - there's not much in it.</p>



<a name="131182423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182423">(Aug 09 2018 at 16:14)</a>:</h4>
<p>seems like the test is failing but never worked perhaps...</p>



<a name="131182432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182432">(Aug 09 2018 at 16:14)</a>:</h4>
<p>Yeah, I don't think it ever worked.</p>



<a name="131182452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182452">(Aug 09 2018 at 16:15)</a>:</h4>
<p>Given that error patterns weren't enforced before on UI tests - it literally was never testing that.</p>



<a name="131182464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182464">(Aug 09 2018 at 16:16)</a>:</h4>
<p>It's possible that nobody ran the test itself with the flags to make it use the auxiliary module to see if the expected error was there either.</p>



<a name="131182518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182518">(Aug 09 2018 at 16:16)</a>:</h4>
<p>(though I guess the ui output should have shown that)</p>



<a name="131182523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182523">(Aug 09 2018 at 16:16)</a>:</h4>
<p>(which I guess confirms it never did output the correct thing as we can view that)</p>



<a name="131182541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182541">(Aug 09 2018 at 16:17)</a>:</h4>
<p>Well, looking at the history, at some point in the past it did.</p>



<a name="131182543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182543">(Aug 09 2018 at 16:17)</a>:</h4>
<p>But as of the last commit to that stderr, it did not.</p>



<a name="131182717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131182717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131182717">(Aug 09 2018 at 16:20)</a>:</h4>
<p>I'd land this with the test passing again (that is, without the error patterns) and perhaps make an issue for someone to look into the regression in that test's output.</p>



<a name="131183001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131183001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131183001">(Aug 09 2018 at 16:26)</a>:</h4>
<blockquote>
<p>I'd land this with the test passing again (that is, without the error patterns) and perhaps make an issue for someone to look into the regression in that test's output.</p>
</blockquote>
<p>yes sounds good</p>



<a name="131183007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131183007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131183007">(Aug 09 2018 at 16:26)</a>:</h4>
<p>cc @cramertj on that</p>



<a name="131183043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131183043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131183043">(Aug 09 2018 at 16:27)</a>:</h4>
<p>If this Travis run passes (and I think <span class="emoji emoji-1f91e" title="fingers crossed">:fingers_crossed:</span> it will) then we just need to check platform specific output and that should be it.</p>



<a name="131185273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131185273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131185273">(Aug 09 2018 at 17:08)</a>:</h4>
<p>Noticed the failure, one last test, easy fix - building locally now.</p>



<a name="131185644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131185644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131185644">(Aug 09 2018 at 17:15)</a>:</h4>
<p>Alright, pushed that. Fifth time lucky.</p>



<a name="131188406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131188406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131188406">(Aug 09 2018 at 18:09)</a>:</h4>
<p><span class="emoji emoji-1f389" title="tada">:tada:</span> UI tests passed on Travis. Is someone able to kick off a big test on other platforms.</p>



<a name="131188498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131188498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131188498">(Aug 09 2018 at 18:11)</a>:</h4>
<p>you could edit <code>.travis.yml</code> to temporarily enable any platforms on CI (don't enable everything though, this will block the bors's queue)</p>



<a name="131188510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131188510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131188510">(Aug 09 2018 at 18:11)</a>:</h4>
<p>sounds reasonable -- I can also r+ :)</p>



<a name="131188511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131188511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131188511">(Aug 09 2018 at 18:11)</a>:</h4>
<p>but it'd be better not to block the queue</p>



<a name="131188570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131188570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131188570">(Aug 09 2018 at 18:12)</a>:</h4>
<p>r+ would be easiest as this would be part of the queue <span class="emoji emoji-1f604" title="big smile">:big_smile:</span></p>



<a name="131188611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131188611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131188611">(Aug 09 2018 at 18:13)</a>:</h4>
<p>I'm not sure I understand but I'm happy to r+</p>



<a name="131192751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131192751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131192751">(Aug 09 2018 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I think bors ignored you again.</p>



<a name="131192770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131192770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131192770">(Aug 09 2018 at 19:28)</a>:</h4>
<p>It didn't reply with a commit being approved message and its not where I'd expect on the queue page.</p>



<a name="131194932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131194932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131194932">(Aug 09 2018 at 20:14)</a>:</h4>
<p>it seemed to be blocked by a "WIP" in the title (was there one before)?</p>



<a name="131194940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131194940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131194940">(Aug 09 2018 at 20:15)</a>:</h4>
<p>and in <span class="user-mention" data-user-id="116009">@nikomatsakis</span>'s second message, he didn't <code>r+</code> again</p>



<a name="131194941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131194941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131194941">(Aug 09 2018 at 20:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> yeah I forgot to r+ again after removing <code>wip</code></p>



<a name="131198915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131198915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131198915">(Aug 09 2018 at 21:46)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span>: it's already outdated</p>



<a name="131198928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131198928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131198928">(Aug 09 2018 at 21:47)</a>:</h4>
<p>I'm surprise bors is running it if there's a merge conflict, though</p>



<a name="131199118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131199118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131199118">(Aug 09 2018 at 21:50)</a>:</h4>
<p>Bors might not realize or GH might not understand. The first is more likely, though.</p>



<a name="131199120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131199120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131199120">(Aug 09 2018 at 21:50)</a>:</h4>
<p>Shouldn't get merged I think...</p>



<a name="131199477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131199477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131199477">(Aug 09 2018 at 21:58)</a>:</h4>
<p>I expect it to fail anyway. There's got to be some platform dependant tests in there that we'll catch.</p>



<a name="131199815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131199815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131199815">(Aug 09 2018 at 22:06)</a>:</h4>
<p><a href="https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8517/job/h632yv766sg7w9hn" target="_blank" title="https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8517/job/h632yv766sg7w9hn">https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8517/job/h632yv766sg7w9hn</a></p>



<a name="131199860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131199860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131199860">(Aug 09 2018 at 22:07)</a>:</h4>
<p>Yeah, just noticed that. Some strange differences in there.</p>



<a name="131199942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131199942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131199942">(Aug 09 2018 at 22:09)</a>:</h4>
<p>I'll need to set up a build on a Windows machine, I think.</p>



<a name="131200054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200054">(Aug 09 2018 at 22:11)</a>:</h4>
<p>I assume the url diffs that it shows are related to some sort of merge it tried to do with <code>HEAD</code>.</p>



<a name="131200179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200179">(Aug 09 2018 at 22:14)</a>:</h4>
<p>"second-edition/ch19-04-advanced-types.html#dynamically-sized-types-and-sized"<br>
vs<br>
"second-edition/ch19-04-advanced-types.html#dynamically-sized-types-and-the-sized-trait"<br>
is pretty strange</p>



<a name="131200182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200182">(Aug 09 2018 at 22:14)</a>:</h4>
<p>(the first link is invalid)</p>



<a name="131200216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200216">(Aug 09 2018 at 22:15)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/53082" target="_blank" title="https://github.com/rust-lang/rust/issues/53082">#53082</a> seems to have changed that.</p>



<a name="131200260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200260">(Aug 09 2018 at 22:16)</a>:</h4>
<p>It did a merge with the rollup that happened before, that'll account for a bunch of the diffs.</p>



<a name="131200675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200675">(Aug 09 2018 at 22:25)</a>:</h4>
<p>So, the failures are:</p>
<div class="codehilite"><pre><span></span>URL ERROR:
    [ui] ui\associated-types\associated-types-unsized.rs
    [ui] ui\bad\bad-sized.rs
    [ui] ui\dst\dst-bad-assign-2.rs
    [ui] ui\dst\dst-bad-assign-3.rs
    [ui] ui\dst\dst-bad-assign.rs
    [ui] ui\dst\dst-bad-deep-2.rs
    [ui] ui\dst\dst-bad-deep.rs
    [ui] ui\dst\dst-object-from-unsized-type.rs
    [ui] ui\dst\dst-sized-trait-param.rs
    [ui] ui\extern\extern-types-unsized.rs
    [ui] ui\range\range-1.rs
    [ui] ui\str\str-mut-idx.rs
    [ui] ui\substs-ppaux.rs#normal
    [ui] ui\substs-ppaux.rs#verbose
    [ui] ui\traits\trait-bounds-not-on-bare-trait.rs
    [ui] ui\union\union-unsized.rs
    [ui] ui\unsized3.rs
    [ui] ui\unsized5.rs
    [ui] ui\unsized6.rs
    [ui] ui\unsized7.rs
    [ui] ui\unsized\unsized-bare-typaram.rs
    [ui] ui\unsized\unsized-enum.rs
    [ui] ui\unsized\unsized-inherent-impl-self-type.rs
    [ui] ui\unsized\unsized-struct.rs
    [ui] ui\unsized\unsized-trait-impl-self-type.rs
    [ui] ui\unsized\unsized-trait-impl-trait-arg.rs
    [ui] ui\wf\wf-array-elem-sized.rs

PATHS:
    [ui] ui\crateresolve1.rs
    [ui] ui\nolink-with-link-args.rs
    [ui] ui\not-utf8.rs

FILE NOT FOUND DIFFERENCE:
    [ui] ui\issues\issue-10755.rs
    [ui] ui\extern\external-doc-error.rs
    [ui] ui\macros\macros-nonfatal-errors.rs

LINK.EXE:
    [ui] ui\issues\issue-10755.rs
</pre></div>



<a name="131200724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200724">(Aug 09 2018 at 22:26)</a>:</h4>
<p>That's not half bad. URL errors are fixed by just running bless. File not found differences can be sorted with a normalize comment. Some of the path ones might be a tad more tricky but doable.</p>



<a name="131200745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131200745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131200745">(Aug 09 2018 at 22:27)</a>:</h4>
<p>I wonder if any of the other platforms have different output for tests that we're not seeing because this build failed first. Would be annoying to need to go through the bors process once per platform that will have varying output.</p>



<a name="131201162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201162">(Aug 09 2018 at 22:36)</a>:</h4>
<p>Just noticed that one of the tests also has this:</p>
<div class="codehilite"><pre><span></span>+
+   note: the msvc targets depend on the msvc linker but `link.exe` was not found
+
+   note: please ensure that VS 2013, VS 2015 or VS 2017 was installed with the Visual C++ option
</pre></div>


<p>That'll be a pain to deal with.</p>



<a name="131201255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201255" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201255">(Aug 09 2018 at 22:38)</a>:</h4>
<p><code>no-link-with-link-args</code> also has a bunch of extra wording at the bottom of its output that will make it harder to deal with.</p>



<a name="131201262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201262">(Aug 09 2018 at 22:38)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> uh....</p>



<a name="131201268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201268">(Aug 09 2018 at 22:39)</a>:</h4>
<p>that's annoying!</p>



<a name="131201346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201346">(Aug 09 2018 at 22:40)</a>:</h4>
<p>I might need to move one or two (more) tests back to <code>compile-fail</code> for the time being.</p>



<a name="131201839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201839">(Aug 09 2018 at 22:55)</a>:</h4>
<p>I guess in the limit we could have some kind of "skip stderr" flag</p>



<a name="131201840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201840">(Aug 09 2018 at 22:55)</a>:</h4>
<p>basically same thing as compile-fail, I guess</p>



<a name="131201841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201841">(Aug 09 2018 at 22:55)</a>:</h4>
<p>or "skip stderr on windows"</p>



<a name="131201844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201844">(Aug 09 2018 at 22:55)</a>:</h4>
<p>that...would be pretty ok</p>



<a name="131201893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201893">(Aug 09 2018 at 22:57)</a>:</h4>
<p>Yeah, it might be worth doing for these handful of tests.</p>



<a name="131201904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201904">(Aug 09 2018 at 22:57)</a>:</h4>
<p>I'm +1 on that</p>



<a name="131201907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201907" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201907">(Aug 09 2018 at 22:57)</a>:</h4>
<p>Or even a way to remove lines that match a regex.</p>



<a name="131201908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201908">(Aug 09 2018 at 22:57)</a>:</h4>
<p>it seems like checking the <code>//~ ERROR</code> etc is enough</p>



<a name="131201911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201911">(Aug 09 2018 at 22:57)</a>:</h4>
<blockquote>
<p>Or even a way to remove lines that match a regex.</p>
</blockquote>
<p>can't we normalize them to <code>""</code> or something?</p>



<a name="131201913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201913">(Aug 09 2018 at 22:57)</a>:</h4>
<p>I guess the line remains</p>



<a name="131201955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201955">(Aug 09 2018 at 22:58)</a>:</h4>
<p>Yeah, if the lines aren't there on linux then it still fails.</p>



<a name="131201957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201957">(Aug 09 2018 at 22:58)</a>:</h4>
<p>well either seems ok</p>



<a name="131201960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201960">(Aug 09 2018 at 22:58)</a>:</h4>
<p>I'd probably just add a "skip stderr on &lt;platform&gt;" flag</p>



<a name="131201963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201963">(Aug 09 2018 at 22:58)</a>:</h4>
<p>but normalizing is obviously a touch better</p>



<a name="131201965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201965">(Aug 09 2018 at 22:58)</a>:</h4>
<p>and I guess it has another advantage:</p>



<a name="131201969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201969">(Aug 09 2018 at 22:59)</a>:</h4>
<p>devs on windows can run <code>--bless</code> and it will work</p>



<a name="131201983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131201983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131201983">(Aug 09 2018 at 22:59)</a>:</h4>
<p>Yeah, that seems like a good idea for a follow-up PR. I'd probably just move them to <code>compile-fail</code> for this PR though. There are also ones I've already moved to <code>compile-fail</code> (~3 at the moment) that just don't work on <code>ui</code> at the moment.</p>



<a name="131202049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131202049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131202049">(Aug 09 2018 at 23:00)</a>:</h4>
<p>EIther due to being just broken (the "metatest" one or <code>invalid-module-declaration</code>) or the output not being deterministic.</p>



<a name="131202057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131202057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131202057">(Aug 09 2018 at 23:00)</a>:</h4>
<p>I'd really like to get this into a state where it can be landed tomorrow (I guess it's today now for me).</p>



<a name="131225023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131225023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131225023">(Aug 10 2018 at 08:44)</a>:</h4>
<blockquote>
<p>compile-fail to ui: Day 3<br>
Everything is starting to look like a ui test...</p>
</blockquote>



<a name="131225795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131225795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131225795">(Aug 10 2018 at 09:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> are you waiting on an r+ or anything?</p>



<a name="131225805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131225805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131225805">(Aug 10 2018 at 09:01)</a>:</h4>
<p>oh dear I see a lot of conflicts</p>



<a name="131225810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131225810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131225810">(Aug 10 2018 at 09:01)</a>:</h4>
<p>Not at the moment. Doing a build after rebasing just now on my linux box, also have a Windows box building to work on the failures we see on Windows.</p>



<a name="131226708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131226708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131226708">(Aug 10 2018 at 09:22)</a>:</h4>
<p>There's something worse about having to rebase because of my own pull requests.</p>



<a name="131228243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228243">(Aug 10 2018 at 09:58)</a>:</h4>
<p>What also might be a nice idea is a sort of <code>// per-platform-stderr</code> comment that has a <code>.win.stderr</code> and <code>.linux.stderr</code> instead of just <code>.stderr</code> for every compare mode and revision.</p>



<a name="131228401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228401">(Aug 10 2018 at 10:02)</a>:</h4>
<p>yeah, maybe, though I'd like to make it so that <code>--bless</code> works</p>



<a name="131228402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228402">(Aug 10 2018 at 10:02)</a>:</h4>
<p>I think maybe the idea of adding more kinds of normalization is better</p>



<a name="131228414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228414">(Aug 10 2018 at 10:03)</a>:</h4>
<p>Yeah, those stderr files would just need to be ignored on the other platform. Normalization is a better approach.</p>



<a name="131228420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228420">(Aug 10 2018 at 10:03)</a>:</h4>
<p>adding something that deletes lines entirely seems...not that hard?</p>



<a name="131228425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228425">(Aug 10 2018 at 10:03)</a>:</h4>
<p>note: we could also have platform specific normalization rules</p>



<a name="131228469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228469">(Aug 10 2018 at 10:04)</a>:</h4>
<p>Could have it so that there's a "only consider lines that match this regex on this platform" type of comment?</p>



<a name="131228537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228537">(Aug 10 2018 at 10:06)</a>:</h4>
<p>I'm not sure I understand</p>



<a name="131228551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228551">(Aug 10 2018 at 10:07)</a>:</h4>
<p>I guess it's just another way of saying "don't consider this line of the stderr on this platform".</p>



<a name="131228555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228555">(Aug 10 2018 at 10:07)</a>:</h4>
<p>Useful for the extra lines that sometimes are added to error output on Windows.</p>



<a name="131228628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228628">(Aug 10 2018 at 10:09)</a>:</h4>
<p>well i'd rather we have a windows-specific normalization that deletes them</p>



<a name="131228630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228630">(Aug 10 2018 at 10:09)</a>:</h4>
<p>because that way, when you run <code>--bless</code>, you get the result that other platforms want</p>



<a name="131228631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131228631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131228631">(Aug 10 2018 at 10:09)</a>:</h4>
<p>Ah yeah, that makes sense.</p>



<a name="131229225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229225">(Aug 10 2018 at 10:25)</a>:</h4>
<p>Am I right in thinking that the only way this can be merged without conflicts is if it comes after a PR that made no changes to ui or compile-fail tests?</p>



<a name="131229356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229356">(Aug 10 2018 at 10:28)</a>:</h4>
<p>Alright, the PR doesn't conflict at the moment and _should_ fix all the Windows errors we saw (I can't test yet, still building LLVM on my Windows machine).</p>



<a name="131229357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229357">(Aug 10 2018 at 10:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="131229375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229375">(Aug 10 2018 at 10:29)</a>:</h4>
<blockquote>
<p>Am I right in thinking that the only way this can be merged without conflicts is if it comes after a PR that made no changes to ui or compile-fail tests?</p>
</blockquote>
<p>compile-fail tests yes... ui tests?</p>



<a name="131229377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229377">(Aug 10 2018 at 10:29)</a>:</h4>
<p>anyway r+ p=1</p>



<a name="131229394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229394">(Aug 10 2018 at 10:29)</a>:</h4>
<p>It moves around some tests to try keep the number of files/directories in the root of src/test/ui under 1000 so that GitHub can render them all at once. <a href="https://github.com/rust-lang/rust/issues/46841" target="_blank" title="https://github.com/rust-lang/rust/issues/46841">#46841</a></p>



<a name="131229466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229466">(Aug 10 2018 at 10:30)</a>:</h4>
<p>I'll need to rebase again after the current PR being tested finishes, so it'll need another <code>r+</code> before it actually gets a chance to run.</p>



<a name="131229722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131229722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131229722">(Aug 10 2018 at 10:36)</a>:</h4>
<p>d'oh</p>



<a name="131233725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131233725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131233725">(Aug 10 2018 at 12:16)</a>:</h4>
<p>Going to have to rely on bors to test Windows I think, can't get rustc building with msvc because link.exe hits the library limit of 65535.</p>



<a name="131233815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131233815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131233815">(Aug 10 2018 at 12:19)</a>:</h4>
<p>Seems to be <a href="https://github.com/rust-lang/rust/issues/53014" target="_blank" title="https://github.com/rust-lang/rust/issues/53014">#53014</a></p>



<a name="131235017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235017">(Aug 10 2018 at 12:47)</a>:</h4>
<p>hmm</p>



<a name="131235021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235021">(Aug 10 2018 at 12:47)</a>:</h4>
<p>I wonder if we should bump the priority on that (cc <span class="user-mention" data-user-id="125270">@scottmcm</span> )</p>



<a name="131235095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235095">(Aug 10 2018 at 12:49)</a>:</h4>
<p>I'm fairly sure that the only issue that could come up on Windows is the difference between the "No such file or directory found" and "The system can not find the file specified" messages - I've put in a normalization for that, so it should be fixed, but I can't verify it.</p>



<a name="131235104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235104">(Aug 10 2018 at 12:49)</a>:</h4>
<p>Is there a reason a <code>@bors try</code> can't be used to test on other platforms? I'm not 100% sure what <code>try</code> does.</p>



<a name="131235266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235266">(Aug 10 2018 at 12:52)</a>:</h4>
<p>I don't know :)</p>



<a name="131235280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235280">(Aug 10 2018 at 12:53)</a>:</h4>
<p>Would just save me waiting on the bors queue to find out what needs fixed next.</p>



<a name="131235830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235830">(Aug 10 2018 at 13:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> Capacity, mostly -- you can manually fiddle with .travis.yml if you want to enable more, just don't enable all at once (go 1-2 at a time)</p>



<a name="131235853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235853">(Aug 10 2018 at 13:01)</a>:</h4>
<p>AppVeyor is much more limited on capacity so there we generally don't want to do try</p>



<a name="131235912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131235912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131235912">(Aug 10 2018 at 13:02)</a>:</h4>
<p>That makes sense, I'll just wait on bors.</p>



<a name="131241656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131241656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131241656">(Aug 10 2018 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> This needs a retry, failed because of internet weather.</p>



<a name="131241682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131241682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131241682">(Aug 10 2018 at 14:43)</a>:</h4>
<p>At some point today I'll learn if it passes or not.</p>



<a name="131241834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131241834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131241834">(Aug 10 2018 at 14:45)</a>:</h4>
<p>Thanks!</p>



<a name="131834991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131834991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131834991">(Aug 10 2018 at 17:01)</a>:</h4>
<p>Managed to get my Windows build going by not passing <code>-i</code> - I can confirm that the non-NLL compare mode UI tests all pass on Windows.</p>



<a name="131834997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131834997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131834997">(Aug 10 2018 at 17:01)</a>:</h4>
<p>I can't imagine any NLL ones will fail on Windows so should be good.</p>



<a name="131835014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131835014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131835014">(Aug 10 2018 at 17:01)</a>:</h4>
<p>Outside of any rebases or any other platform dependant failures we've yet to see on other platforms, this PR should be good.</p>



<a name="131835108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131835108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131835108">(Aug 10 2018 at 17:03)</a>:</h4>
<p>Turns out an NLL compare mode test did fail on Windows.</p>



<a name="131835110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131835110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131835110">(Aug 10 2018 at 17:03)</a>:</h4>
<p>I spoke too soon.</p>



<a name="131835279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131835279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131835279">(Aug 10 2018 at 17:07)</a>:</h4>
<p>In fact, not convinced that these two failures aren't just my machine (both link errors on tests that passed without compare-mode NLL, I can't imagine NLL affects <code>link.exe</code> on Windows so I'm assuming that the test is fine).</p>



<a name="131835450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131835450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131835450">(Aug 10 2018 at 17:10)</a>:</h4>
<p>We'll see what the in-progress merge says I guess.</p>



<a name="131835464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131835464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131835464">(Aug 10 2018 at 17:10)</a>:</h4>
<p>pretty sure it will fail spuriously due to <a href="https://www.traviscistatus.com/incidents/pxj3py3xzn14" target="_blank" title="https://www.traviscistatus.com/incidents/pxj3py3xzn14">https://www.traviscistatus.com/incidents/pxj3py3xzn14</a> <span class="emoji emoji-1f937" title="shrug">:shrug:</span></p>



<a name="131835471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131835471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131835471">(Aug 10 2018 at 17:10)</a>:</h4>
<p>Yeah, I've noticed everything has been failing due to that today.</p>



<a name="131837136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131837136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131837136">(Aug 10 2018 at 17:43)</a>:</h4>
<p>Well, Appveyor confirmed Windows now passes UI tests. That's nice.</p>



<a name="131837179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131837179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131837179">(Aug 10 2018 at 17:44)</a>:</h4>
<p>But, Travis failed and killed the build.</p>



<a name="131837181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131837181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131837181">(Aug 10 2018 at 17:44)</a>:</h4>
<p>Needs a retry.</p>



<a name="131837223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131837223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131837223">(Aug 10 2018 at 17:45)</a>:</h4>
<p>:(</p>



<a name="131840723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131840723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131840723">(Aug 10 2018 at 18:59)</a>:</h4>
<p><a href="https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8538/job/qxoewi7y632c3tf4" target="_blank" title="https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8538/job/qxoewi7y632c3tf4">https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8538/job/qxoewi7y632c3tf4</a></p>



<a name="131840800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131840800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131840800">(Aug 10 2018 at 19:00)</a>:</h4>
<p><a href="https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8538/job/qxoewi7y632c3tf4#L10790" target="_blank" title="https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8538/job/qxoewi7y632c3tf4#L10790">https://ci.appveyor.com/project/rust-lang/rust/build/1.0.8538/job/qxoewi7y632c3tf4#L10790</a> &lt;-- interesting part</p>



<a name="131841215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131841215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131841215">(Aug 10 2018 at 19:08)</a>:</h4>
<p>Awesome, more tests to fix.</p>



<a name="131848715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131848715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131848715">(Aug 10 2018 at 21:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> those should be fixed.</p>



<a name="131850240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131850240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131850240">(Aug 10 2018 at 22:31)</a>:</h4>
<p>Thanks!</p>



<a name="131926129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131926129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131926129">(Aug 10 2018 at 23:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> Fixed it again.</p>



<a name="131944600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/131944600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#131944600">(Aug 11 2018 at 08:12)</a>:</h4>
<p>Did a rebase again - the Travis failures from last night (or early today I guess) were because the jobs merged with master which changed some tests instead of doing a merge conflict and saving us all the time. Should be good to test again until something else lands.</p>



<a name="132032024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132032024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132032024">(Aug 13 2018 at 08:30)</a>:</h4>
<p>Doing another rebase locally now.</p>



<a name="132035973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132035973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132035973">(Aug 13 2018 at 09:57)</a>:</h4>
<p>Alright, all rebased and ready for another bors run. <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="132046505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132046505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132046505">(Aug 13 2018 at 13:25)</a>:</h4>
<p>ping <span class="user-mention" data-user-id="116009">@nikomatsakis</span> - any chance you could take a look and put another <code>r+</code> on this so that I can see if there's more platforms that have issues?</p>



<a name="132047971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132047971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132047971">(Aug 13 2018 at 13:50)</a>:</h4>
<p>Thanks!</p>



<a name="132053180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132053180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132053180">(Aug 13 2018 at 15:12)</a>:</h4>
<p>Alright, fixed the failures from <code>wasm32-unknown</code>, <span class="user-mention" data-user-id="116009">@nikomatsakis</span>, I guess another <code>r+</code>?</p>



<a name="132055457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132055457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132055457">(Aug 13 2018 at 15:48)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="125254">@kennytm</span></p>



<a name="132055477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132055477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132055477">(Aug 13 2018 at 15:49)</a>:</h4>
<p>It'll fail because it's before a PR that makes UI test changes though. <span class="emoji emoji-1f641" title="frown">:frown:</span></p>



<a name="132055679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132055679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kennytm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132055679">(Aug 13 2018 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> i think you mean to thank <span class="user-mention" data-user-id="121053">@varkor</span> <span class="emoji emoji-263a" title="smile">:smile:</span></p>



<a name="132055779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132055779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132055779">(Aug 13 2018 at 15:55)</a>:</h4>
<p>Oops, I do. Thanks <span class="user-mention" data-user-id="121053">@varkor</span></p>



<a name="132060547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132060547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132060547">(Aug 13 2018 at 17:29)</a>:</h4>
<p>Alright, fixed the <code>armhf-gnu</code> platform tests now. Pretty sure we've almost got all the platforms at this point. Need another <code>r+</code> to get bors testing the remaining few.</p>



<a name="132070223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132070223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132070223">(Aug 13 2018 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span>: there are some conflicts now</p>



<a name="132070425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132070425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132070425">(Aug 13 2018 at 20:38)</a>:</h4>
<p><span class="user-mention" data-user-id="121053">@varkor</span>: already got a build locally, just updating the PR now.</p>



<a name="132070515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132070515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132070515">(Aug 13 2018 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="121053">@varkor</span>: PR updated</p>



<a name="132070541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132070541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132070541">(Aug 13 2018 at 20:41)</a>:</h4>
<p>It's about to be invalidated again by the current PR (one of mine from last week) being merge tested by bors now.</p>



<a name="132070572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132070572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132070572">(Aug 13 2018 at 20:41)</a>:</h4>
<p>ah, probably best to wait for that one to go through then?</p>



<a name="132070631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132070631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132070631">(Aug 13 2018 at 20:42)</a>:</h4>
<p>I guess, though as soon as I do any rebase, there's always another PR being merged that will update the tests again.</p>



<a name="132072710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132072710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132072710">(Aug 13 2018 at 21:21)</a>:</h4>
<p>Looks like my PR that was being merged and would have required this get rebased randomly failed, so this PR has a chance.</p>



<a name="132076076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132076076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132076076">(Aug 13 2018 at 22:38)</a>:</h4>
<p>Ended up not being that lucky that time, updated the PR again.</p>



<a name="132099552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132099552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132099552">(Aug 14 2018 at 09:13)</a>:</h4>
<p>Updated this PR again, fixed the failure from the last build and did a rebase. Looks like the currently in-progress PR doesn't add new tests so it would be ideal if this could come after it. <span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span class="user-mention" data-user-id="121053">@varkor</span> @anyone-else-with-bors-rights</p>



<a name="132100714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132100714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132100714">(Aug 14 2018 at 09:38)</a>:</h4>
<p>request: dont r+ my test PR until after david’s is landed if it might cause an issue haha</p>



<a name="132100809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132100809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132100809">(Aug 14 2018 at 09:40)</a>:</h4>
<p>I wouldn't worry about it, every other PR will break this one and I'm still not sure whether it is passing on all platforms yet.</p>



<a name="132101513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132101513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132101513">(Aug 14 2018 at 09:57)</a>:</h4>
<p>bless your patience</p>



<a name="132101677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132101677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132101677">(Aug 14 2018 at 10:01)</a>:</h4>
<p>the amount of tests in there is impressive</p>



<a name="132103674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132103674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132103674">(Aug 14 2018 at 10:49)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="121053">@varkor</span></p>



<a name="132106572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132106572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132106572">(Aug 14 2018 at 12:04)</a>:</h4>
<p>man I was hoping to see a "it landed <span class="emoji emoji-1f389" title="tada">:tada:</span>" message here when I woke</p>



<a name="132107646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132107646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132107646">(Aug 14 2018 at 12:29)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>: just go back to sleep ;)</p>



<a name="132109554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132109554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132109554">(Aug 14 2018 at 13:08)</a>:</h4>
<p>Believe me, so was I.</p>



<a name="132117093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132117093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132117093">(Aug 14 2018 at 15:17)</a>:</h4>
<p>It's finally over.</p>



<a name="132118054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132118054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132118054">(Aug 14 2018 at 15:34)</a>:</h4>
<p>I've submitted <a href="https://github.com/rust-lang/rust/issues/53353" target="_blank" title="https://github.com/rust-lang/rust/issues/53353">#53353</a>, <a href="https://github.com/rust-lang/rust/issues/53352" target="_blank" title="https://github.com/rust-lang/rust/issues/53352">#53352</a> and <a href="https://github.com/rust-lang/rust/issues/53351" target="_blank" title="https://github.com/rust-lang/rust/issues/53351">#53351</a> as follow-ups.</p>



<a name="132118864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132118864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132118864">(Aug 14 2018 at 15:52)</a>:</h4>
<p>Great work <span class="user-mention" data-user-id="116107">@davidtwco</span>!</p>



<a name="132119679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132119679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132119679">(Aug 14 2018 at 16:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> :first_place_medal:</p>



<a name="132174597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132174597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132174597">(Aug 15 2018 at 13:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> <span class="emoji emoji-1f3c2" title="snowboarder">:snowboarder:</span></p>



<a name="132762680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132762680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132762680">(Aug 25 2018 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do cases like the following have a place on rustc-perf? fortunately it can be isolated in a single <code>.rs</code> file <a href="https://github.com/rust-lang/rust/issues/50614" target="_blank" title="https://github.com/rust-lang/rust/issues/50614">https://github.com/rust-lang/rust/issues/50614</a></p>



<a name="132790529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132790529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132790529">(Aug 26 2018 at 14:35)</a>:</h4>
<p>Maybe, but I prefer that we don't add them unless it's something we want to track performance over time for</p>



<a name="132790535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132790535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132790535">(Aug 26 2018 at 14:35)</a>:</h4>
<p>That seems like the kind of thing that is probably fix once</p>



<a name="132791781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132791781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132791781">(Aug 26 2018 at 15:16)</a>:</h4>
<p>mm I'm not sure. I like adding regression tests.</p>



<a name="132791783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132791783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132791783">(Aug 26 2018 at 15:17)</a>:</h4>
<p>In particular covering various extreme cases can be useful</p>



<a name="132791793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132791793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132791793">(Aug 26 2018 at 15:17)</a>:</h4>
<p>although I guess this is not what I originally thought it was :)</p>



<a name="132791796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132791796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132791796">(Aug 26 2018 at 15:17)</a>:</h4>
<p>anyway, we don't have a strict rule about this sort of case...sometimes we add a regr test, sometimes we don't...</p>



<a name="132791894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132791894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132791894">(Aug 26 2018 at 15:20)</a>:</h4>
<p>regression tests are good but we <em>currently</em> can't add these without consideration for the time they're adding</p>



<a name="132792046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite/near/132792046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.html#132792046">(Aug 26 2018 at 15:26)</a>:</h4>
<p>seems fair :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>bors: stop prioritizing old PRs over new PRs · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html">bors: stop prioritizing old PRs over new PRs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267468719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267468719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267468719">(Jan 10 2022 at 17:08)</a>:</h4>
<p>I'm wondering if bors should stop prioritizing old PRs over new PRs and instead just prioritize based on how long ago they were approved? I have a rollup=never PR that's been sitting in the queue without ever reaching the front for 4 days: <a href="https://github.com/rust-lang/rust/issues/92601">#92601</a>. And even now it's 7 PRs from the front!</p>
<p>I know there are advantages to having old PRs, regardless of approval time, getting priority, but it's really frustrating when your PR is sitting for so long. In my case, it's blocking several other PRs I'm working on, so it's especially frustrating.</p>



<a name="267468972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267468972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267468972">(Jan 10 2022 at 17:10)</a>:</h4>
<p>IIRC, there was a discussion on internals about this a while back</p>



<a name="267469076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469076">(Jan 10 2022 at 17:10)</a>:</h4>
<p><a href="https://internals.rust-lang.org/t/homu-queue-woes-and-suggestions-on-how-to-fix-them/8954">https://internals.rust-lang.org/t/homu-queue-woes-and-suggestions-on-how-to-fix-them/8954</a></p>



<a name="267469307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469307">(Jan 10 2022 at 17:12)</a>:</h4>
<p>I also think that the situation has been especially bad the last few weeks</p>



<a name="267469317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469317">(Jan 10 2022 at 17:12)</a>:</h4>
<p>So I don't have to read through the whole thread, what was the conclusion?</p>



<a name="267469333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469333">(Jan 10 2022 at 17:12)</a>:</h4>
<p>Was there opposition to the priority change?</p>



<a name="267469337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469337">(Jan 10 2022 at 17:12)</a>:</h4>
<p>We've hard a large number of rollup=never prs, and a large number of spurious failure/timeouts</p>



<a name="267469355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469355">(Jan 10 2022 at 17:13)</a>:</h4>
<p>ralfjung was strongly opposed, due to the fact that it would increase pressure on reviewers</p>



<a name="267469373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469373">(Jan 10 2022 at 17:13)</a>:</h4>
<p>since prs would effectively be 'penalized' for taking a long time to get the first r+</p>



<a name="267469409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469409">(Jan 10 2022 at 17:13)</a>:</h4>
<p>I mean, the sooner you approve, the sooner a PR will get merged anyway, no?</p>



<a name="267469439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469439">(Jan 10 2022 at 17:13)</a>:</h4>
<p>Usually</p>



<a name="267469506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469506">(Jan 10 2022 at 17:14)</a>:</h4>
<p>but if I had a really old pr, then an r+ might bring it to the front of the queue</p>



<a name="267469515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469515">(Jan 10 2022 at 17:14)</a>:</h4>
<p>that's happened to me several times</p>



<a name="267469666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469666">(Jan 10 2022 at 17:15)</a>:</h4>
<p>at the risk of sounding like a broken record, it's also unfortunate that some of our runners (particularly apple ones) take so long</p>



<a name="267469675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469675">(Jan 10 2022 at 17:15)</a>:</h4>
<p>Yeah, I've had that happen too... but I guess I'd rather sacrifice that than have the current situation</p>



<a name="267469701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469701">(Jan 10 2022 at 17:15)</a>:</h4>
<p>a shorter build time would put some pressure on the perf server, but would otherwise be great</p>



<a name="267469769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469769">(Jan 10 2022 at 17:16)</a>:</h4>
<p>Yeah, but not sure how much we can do about that</p>



<a name="267469785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469785">(Jan 10 2022 at 17:16)</a>:</h4>
<p>Although at this point I think the biggest issue is the spurious failures and timeouts</p>



<a name="267469818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267469818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267469818">(Jan 10 2022 at 17:16)</a>:</h4>
<p>I don't really understand why the early steps of the build spuriously fail so often (like the downloads fail)</p>



<a name="267470646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267470646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267470646">(Jan 10 2022 at 17:24)</a>:</h4>
<p>Here's an idea: What if we kept the current sorting behavior, but added a special automatic priority bump to PRs that have been waiting in the queue longer than, say, 3 days?</p>



<a name="267470675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267470675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267470675">(Jan 10 2022 at 17:24)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> would that solve your concern?</p>



<a name="267472749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267472749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267472749">(Jan 10 2022 at 17:39)</a>:</h4>
<blockquote>
<p>Yeah, but not sure how much we can do about that</p>
</blockquote>
<p>Crossbuild apple? Hackintosh?</p>



<a name="267472830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267472830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267472830">(Jan 10 2022 at 17:40)</a>:</h4>
<p>Also, is waiting a few days all that bad in comparison waiting weeks or months for a review?</p>



<a name="267472952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267472952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267472952">(Jan 10 2022 at 17:41)</a>:</h4>
<p>If it absolutely must go in one can still bump priority</p>



<a name="267473475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267473475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267473475">(Jan 10 2022 at 17:44)</a>:</h4>
<p>I'm mostly just frustrated because I have another PR that's blocked on it, and then another PR that's blocked on <em>that one</em></p>



<a name="267473827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267473827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267473827">(Jan 10 2022 at 17:47)</a>:</h4>
<p>that's annoying but is it common enough to build a policy around that?</p>



<a name="267473955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267473955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267473955">(Jan 10 2022 at 17:48)</a>:</h4>
<p>I wasn't really proposing to build a policy around <em>that</em>, just to add a mechanism to bors that would make sure PRs don't keep falling further and further behind in the queue</p>



<a name="267474043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474043">(Jan 10 2022 at 17:49)</a>:</h4>
<p>That way you'd know that it's very likely your PR will be merged within a few days</p>



<a name="267474057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474057">(Jan 10 2022 at 17:49)</a>:</h4>
<p>that feels like rearranging deck chairs on the titanic a bit. if the queue gets longer and longer then there's a bigger problem</p>



<a name="267474158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474158">(Jan 10 2022 at 17:50)</a>:</h4>
<p>Well, yes, there is a bigger problem. I think this would just help a bit</p>



<a name="267474433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474433">(Jan 10 2022 at 17:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267473475">said</a>:</p>
<blockquote>
<p>I'm mostly just frustrated because I have another PR that's blocked on it, and then another PR that's blocked on <em>that one</em></p>
</blockquote>
<p>If you have a lot of other work blocked on that PR landing, I don't personally see an issue with asking the approver to <code>p=1</code> your PR. At the same time, we should be careful not to let every PR in the queue be marked <code>p=1</code> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="267474725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474725">(Jan 10 2022 at 17:53)</a>:</h4>
<p>It's not clear to me that PRs <em>should</em> fall further behind in queue with current rules: the older the PR, the higher up it will be naturally, so as you wait you're naturally increasing in priority, right?</p>



<a name="267474764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474764">(Jan 10 2022 at 17:54)</a>:</h4>
<p>Except that all the time, other PRs are being approved, which may be older than mine</p>



<a name="267474829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474829">(Jan 10 2022 at 17:54)</a>:</h4>
<p>Eventually, mine will get merged, but it's hard to know when that'll be.</p>



<a name="267474841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474841">(Jan 10 2022 at 17:54)</a>:</h4>
<p>It could be tomorrow, it could be in several more days</p>



<a name="267474888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474888">(Jan 10 2022 at 17:54)</a>:</h4>
<p>I can <code>p=1</code> it myself, I just wasn't sure of the etiquette :)</p>



<a name="267474918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474918">(Jan 10 2022 at 17:54)</a>:</h4>
<p>Sure, but that seems true under any system? Other than "this PR must be next", it seems like there's always some uncertainty</p>



<a name="267474944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267474944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267474944">(Jan 10 2022 at 17:54)</a>:</h4>
<p>(in general, everyone wants their PR to be next, most of the time :)</p>



<a name="267475050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475050">(Jan 10 2022 at 17:55)</a>:</h4>
<p>Yes, but I think this priority system has more uncertainty than others</p>



<a name="267475135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475135">(Jan 10 2022 at 17:55)</a>:</h4>
<p>eh, not on things that have been sitting for months, they can wait a few more days.</p>



<a name="267475292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475292">(Jan 10 2022 at 17:56)</a>:</h4>
<p>In this case, since most of the other rollup=never PRs don't seem to be blocking anything, I'll <code>p=1</code> mine</p>



<a name="267475383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475383">(Jan 10 2022 at 17:56)</a>:</h4>
<p>In my recent experience, rollup=iffy are the "worst" ones. They get pushed behind everything else in the queue (never is higher, rollups skip to the front).</p>



<a name="267475529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475529">(Jan 10 2022 at 17:57)</a>:</h4>
<p>Except that sometimes they are rolled-up, in which case they might be faster</p>



<a name="267475765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475765">(Jan 10 2022 at 17:58)</a>:</h4>
<p>Part of the issue right now is just how many <code>rollup=never</code> PRs are in the queue. Perhaps when we have a certain number of <code>rollup=never</code> PRs in the queue, we should be less aggressive about how many rollups we do?</p>



<a name="267475890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475890">(Jan 10 2022 at 17:59)</a>:</h4>
<p>(perhaps we already are, I'm unsure of the rules around rollups)</p>



<a name="267475900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267475900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267475900">(Jan 10 2022 at 17:59)</a>:</h4>
<p>Yeah, I was thinking the same thing</p>



<a name="267476088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267476088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267476088">(Jan 10 2022 at 18:00)</a>:</h4>
<p>Maybe it'd also be good to run perf before approving more often so you can remove <code>rollup=never</code> if there's no perf effect</p>



<a name="267476104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267476104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267476104">(Jan 10 2022 at 18:00)</a>:</h4>
<p>the rollup page says one should consider this case, but afaict there usually are rollups being made whenever there are enough PRs for it</p>



<a name="267476242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267476242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267476242">(Jan 10 2022 at 18:01)</a>:</h4>
<p>modulo humans being asleep</p>



<a name="267476280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267476280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267476280">(Jan 10 2022 at 18:01)</a>:</h4>
<p><span class="user-mention" data-user-id="217864">@matthiaskrgr</span> could you maybe pause on rollups for a day or two to help the rollup=never backlog clear?</p>



<a name="267476484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267476484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267476484">(Jan 10 2022 at 18:02)</a>:</h4>
<p>Actually one day should probably be enough to trim it down significantly</p>



<a name="267476753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267476753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267476753">(Jan 10 2022 at 18:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267476088">said</a>:</p>
<blockquote>
<p>Maybe it'd also be good to run perf before approving more often so you can remove <code>rollup=never</code> if there's no perf effect</p>
</blockquote>
<p>It'd also be nice if <code>@bors try</code> worked even when a PR was approved, for this use case</p>



<a name="267478772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267478772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267478772">(Jan 10 2022 at 18:20)</a>:</h4>
<p>Yeah so rollup=iffy is kinda of useless in my opinion because to me it signals "better not roll it up, it might prevent us from merging several others in one go" while it always gets put below rollup=never...</p>
<p>We had a bunch of CI troubles in the past week with only ~28 prs merged instead of the usual 40-50<br>
<a href="https://rust-lang.github.io/rustc-pr-tracking/">https://rust-lang.github.io/rustc-pr-tracking/</a></p>



<a name="267478878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267478878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267478878">(Jan 10 2022 at 18:21)</a>:</h4>
<p>imo removing rollup=never from PRS that don't have any perf effect is definitely a good idea to improve rollupability</p>



<a name="267479230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267479230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267479230">(Jan 10 2022 at 18:24)</a>:</h4>
<p><span class="user-mention" data-user-id="307537">@Noah Lev</span>  mmh I'm kind of against that because it might just make queue longer and longer :/<br>
In the last 24 hours we had 27 new PRs while we can only merge perhaps 7 if we are lucky, that would be a surplus of 20 prs per day...</p>



<a name="267479399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267479399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267479399">(Jan 10 2022 at 18:25)</a>:</h4>
<p>I know it's not ideal, but there are a bunch of rollup=never PRs that get stuck in the queue for days and have a much reduced chance to reach the front anytime soon because rollups get in the way</p>



<a name="267479717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267479717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267479717">(Jan 10 2022 at 18:28)</a>:</h4>
<p>Well sure we can try it for today(tomorrow?) but we should also have some better long term solution</p>



<a name="267479775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267479775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267479775">(Jan 10 2022 at 18:28)</a>:</h4>
<p>Agreed</p>



<a name="267479951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267479951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267479951">(Jan 10 2022 at 18:29)</a>:</h4>
<p>like dropping apple support \s</p>



<a name="267480426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267480426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267480426">(Jan 10 2022 at 18:33)</a>:</h4>
<p>the queue has grown quite a bit in december<br>
<a href="/user_uploads/4715/bvo6nD-WErtgv3AQGhsAZbpx/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/bvo6nD-WErtgv3AQGhsAZbpx/image.png" title="image.png"><img src="/user_uploads/4715/bvo6nD-WErtgv3AQGhsAZbpx/image.png"></a></div>



<a name="267480609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267480609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267480609">(Jan 10 2022 at 18:34)</a>:</h4>
<p>Yeah, it seems we had a sharp uptick in total PRs. Maybe more people contributing to Rust during the holidays?</p>



<a name="267481536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267481536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267481536">(Jan 10 2022 at 18:42)</a>:</h4>
<p>Probably a combination of that and many reviewers taking time away from Rust for the holidays.</p>



<a name="267481601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267481601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267481601">(Jan 10 2022 at 18:42)</a>:</h4>
<p>Ah, good point</p>



<a name="267483355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267483355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267483355">(Jan 10 2022 at 18:56)</a>:</h4>
<p>would it perhaps help to move rustdoc to a separate repo (like clippy/rustfmt/miri) so that not ever rustdoc PR would need 3.5 hours of CI time?<br>
rustdoc would then be synced once a week or so like the other tools</p>



<a name="267484384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267484384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267484384">(Jan 10 2022 at 19:03)</a>:</h4>
<p>I've thought about it, and I think Joshua was working towards it at some point, but I'm not sure it'd be worth it. Rustdoc is very tightly tied into rustc, so it'd make changes that affect both rustc and rustdoc more annoying</p>



<a name="267484487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267484487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267484487">(Jan 10 2022 at 19:04)</a>:</h4>
<p>It seems like it'd be better to just make CI faster ;)</p>



<a name="267484549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267484549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267484549">(Jan 10 2022 at 19:05)</a>:</h4>
<p>well ofc :D</p>



<a name="267486773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267486773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267486773">(Jan 10 2022 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> are there any stats as to how often bors fails?</p>



<a name="267486996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267486996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267486996">(Jan 10 2022 at 19:22)</a>:</h4>
<p>And to go along: any idea how often <em>rollups</em> fail?</p>



<a name="267488121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267488121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267488121">(Jan 10 2022 at 19:30)</a>:</h4>
<p>I've been wondering the same thing</p>



<a name="267488172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267488172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267488172">(Jan 10 2022 at 19:31)</a>:</h4>
<p>not that I'm aware of</p>



<a name="267488443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267488443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267488443">(Jan 10 2022 at 19:33)</a>:</h4>
<p>That would probably be useful data</p>



<a name="267488580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267488580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267488580">(Jan 10 2022 at 19:35)</a>:</h4>
<p>Could better tune rollup size, could maybe decide that adding some kind of check to the PR CI might decrease bors failures (maybe NLL tests, for example)</p>



<a name="267491002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267491002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267491002">(Jan 10 2022 at 19:55)</a>:</h4>
<p>Yeah, I'd really like it for NLL tests to be run on CI -- it's a common annoying source of bors failures</p>



<a name="267493315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267493315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267493315">(Jan 10 2022 at 20:12)</a>:</h4>
<p>From a libs point of view, PRs which touch OS-specific code often fail on bors because non-Linux targets are not tested on CI. It would be useful to have a variant of bors try which tests a PR on all targets without blocking the bors queue.</p>



<a name="267494135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267494135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267494135">(Jan 10 2022 at 20:19)</a>:</h4>
<p>AFAIK there is not enough CI capacity for that. Try builds used to run on all targets long ago.</p>



<a name="267494257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267494257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267494257">(Jan 10 2022 at 20:20)</a>:</h4>
<p>Maybe bors try could get an extra argument specifying which target to use? That would be easier than editing the workflow file as is necessary right now.</p>



<a name="267497793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267497793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267497793">(Jan 10 2022 at 20:51)</a>:</h4>
<p>I think most of the failures I am seeing are spurious timeouts,test failures / download 404s, stuff of architectures that the "light" ci does not run (what Amanieu said) on and sometimes interaction between 2 prs in the rollup or with pr that merged last with one of the rolled up ones like renamed functions, added arguments etc, stuff that is not detected by simple merge conflicts</p>



<a name="267498082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267498082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267498082">(Jan 10 2022 at 20:54)</a>:</h4>
<p>when I have the time and capacity I sometimes <code>x.py test</code> the rollup-pr on my machine locally while its waiting in the queue to be picked up so I know if its going to fail beforehand and can cancel it but that's not really optimal <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="267500327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267500327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267500327">(Jan 10 2022 at 21:10)</a>:</h4>
<p>I was suggesting a variant of try (<code>@bors try-all</code>) which would have to be specifically opted into. That was it would only be used on the few PRs that need it.</p>



<a name="267503125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267503125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267503125">(Jan 10 2022 at 21:30)</a>:</h4>
<p>servo's CI has/had something like this (but IIRC uses a different bot, and mozilla's taskcluster) for <code>try</code> builds on different platforms <a href="https://github.com/servo/servo/blob/5df705a41f6c4c1f2ffeec257dfe0129ce5fa8e0/etc/taskcluster/decision_task.py#L45-L52">https://github.com/servo/servo/blob/5df705a41f6c4c1f2ffeec257dfe0129ce5fa8e0/etc/taskcluster/decision_task.py#L45-L52</a></p>



<a name="267509605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267509605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267509605">(Jan 10 2022 at 22:18)</a>:</h4>
<p>do we have a list of all the bors test failures, similar to the retry list?</p>



<a name="267511829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267511829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267511829">(Jan 10 2022 at 22:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267486773">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> are there any stats as to how often bors fails?</p>
</blockquote>
<p>^</p>



<a name="267521239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267521239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267521239">(Jan 11 2022 at 00:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267468719">said</a>:</p>
<blockquote>
<p>I'm wondering if bors should stop prioritizing old PRs over new PRs and instead just prioritize based on how long ago they were approved?</p>
</blockquote>
<p>I used to rage about this, but now I'm just numb to it</p>



<a name="267521344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267521344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267521344">(Jan 11 2022 at 00:23)</a>:</h4>
<p>The current queue is the worst I've ever seen, though. 10 <code>always</code> PRs and 19 other PRs approved? yikes</p>



<a name="267521818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267521818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267521818">(Jan 11 2022 at 00:29)</a>:</h4>
<p>Yeah, it's been pretty bad recently</p>



<a name="267522057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267522057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267522057">(Jan 11 2022 at 00:32)</a>:</h4>
<p>It seems like it fails very often. Is there any mitigation strategies we could try? Like bigger rollups if a spurious failure happens?</p>



<a name="267523695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267523695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267523695">(Jan 11 2022 at 00:57)</a>:</h4>
<p>Do we cache any of the dependencies? That could be an option if they are unchanged and we're getting failures due to the fetching of modules</p>



<a name="267524156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267524156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267524156">(Jan 11 2022 at 01:02)</a>:</h4>
<p>Hmm, interesting idea. I'm curious what T-infra thinks.</p>



<a name="267526485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267526485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267526485">(Jan 11 2022 at 01:36)</a>:</h4>
<p>I'm not sure what "dependencies" means in this context, but in general most builds should only be hitting our S3 buckets already (and most network requests have ~3 retries regardless to the extent we can) - in general, our builds don't have much in the way of avoidable network traffic. We in theory could push that out of internet and into local data centers - e.g. with GitHub actions caches and such - but those are typically likely to cause overhead and pain of their own kind.</p>



<a name="267527160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267527160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267527160">(Jan 11 2022 at 01:46)</a>:</h4>
<p>Why <em>do</em> we have so many spurious network failures? Should the retry count be increased—would that help?</p>



<a name="267527424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267527424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267527424">(Jan 11 2022 at 01:51)</a>:</h4>
<p>Networks are sufficiently unreliable at our scale? I don't know whether these particular machines are on some kind of faulty network or the faults are real in some way.</p>
<p>My guess is that most network problems we see aren't fixable with extra retries (e.g., whole network card is down for some reason), but we've never put serious investigation to that question I think.</p>



<a name="267540111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267540111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267540111">(Jan 11 2022 at 06:07)</a>:</h4>
<p>I'll try to go through the closed/merged prs of the last 7 days and see what most of the bors failures are...<br>
it will not be 100% accurate since not everything that was tested in that time actually went in, but maybe it gets us some rough ideas</p>



<a name="267540206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267540206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267540206">(Jan 11 2022 at 06:09)</a>:</h4>
<p>we're at 40 approved prs already, a single one was merged since i went to bed 🥲</p>



<a name="267555908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267555908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267555908">(Jan 11 2022 at 09:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267470646">said</a>:</p>
<blockquote>
<p>Here's an idea: What if we kept the current sorting behavior, but added a special automatic priority bump to PRs that have been waiting in the queue longer than, say, 3 days?</p>
</blockquote>
<p>the PRs that are being overtaken this way have also been waiting though, just in a different state (e.g. waiting on review).<br>
the current system already does a kind of "priority boost" to PRs that have waited long by merging old PRs first. I think this is more fair than using "time since first r+". but I agree it is less predictable and that can be frustrating.<br>
in your case, when one PR blocks the next, I agree with others that p=1 is totally appropriate.</p>
<p>all that said I haven't landed that many PRs recently so I am not sure how much of a say I should have in this. ;) so if there is consensus that predictability is more important than e.g. accounting for waiting-for-review time, dont let me stop you from experimenting with that.</p>



<a name="267560755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267560755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267560755">(Jan 11 2022 at 10:14)</a>:</h4>
<p>One thing I've always really appreciated is the simplicity of the system, in that you can work it out just by looking at the order of the bors queue in the UI and at least understand why your PR has the priority it does. It makes it very transparent. If it is changed to a hybrid system, it would be good if the PRs that were getting bumped got marked somehow, or failing that if the order was explained on the page.</p>



<a name="267560845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267560845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267560845">(Jan 11 2022 at 10:15)</a>:</h4>
<p>A pretty minor concern amidst all of this, but I thought it might be worth mentioning. <em>shrugs</em></p>



<a name="267561568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267561568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267561568">(Jan 11 2022 at 10:22)</a>:</h4>
<p>bumped prs show their prio in the queue <a href="https://bors.rust-lang.org/queue/rust">https://bors.rust-lang.org/queue/rust</a></p>



<a name="267561944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267561944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267561944">(Jan 11 2022 at 10:26)</a>:</h4>
<blockquote>
<p>automatic priority bump to PRs that have been waiting in the queue longer than, say, 3 days</p>
</blockquote>
<p>Not sure if that would solve a lot of problems since it would apply to 50-70% of the approved queue...  :/</p>



<a name="267573688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267573688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267573688">(Jan 11 2022 at 12:25)</a>:</h4>
<p>One down, 39 to go?</p>



<a name="267587934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267587934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267587934">(Jan 11 2022 at 14:25)</a>:</h4>
<p>apparently github will not display "show me merged prs, sorted by last modification date" <span aria-label="rolling eyes" class="emoji emoji-1f644" role="img" title="rolling eyes">:rolling_eyes:</span>  <br>
<a href="https://github.com/rust-lang/rust/issues?q=is%3Apr+is%3Aclosed+sort%3Aupdated-desc">https://github.com/rust-lang/rust/issues?q=is%3Apr+is%3Aclosed+sort%3Aupdated-desc</a><br>
<code>This page is taking too long to load.</code><br>
but ok we closing in on 50K prs...</p>



<a name="267588550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267588550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267588550">(Jan 11 2022 at 14:29)</a>:</h4>
<p>checked 75 merged or closed PRs (most of these were merged by rollups):</p>
<p>5 legit test failures<br>
2 timeouts<br>
1 connectivity issue (<a href="http://ci-mirrors.rust-lang.org">ci-mirrors.rust-lang.org</a>)<br>
1 dyld: Library not loaded: /usr/local/opt/libidn2/lib/libidn2.0.dylib + timeout<br>
1 spurious x86_64-gnu-aux test_reverse::prop_reverse_no_headers + timeout</p>



<a name="267590332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267590332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267590332">(Jan 11 2022 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="217864">@matthiaskrgr</span> <a href="https://github.com/rust-lang-ci/rust/actions?query=is%3Afailure">https://github.com/rust-lang-ci/rust/actions?query=is%3Afailure</a> may be a better way to go</p>



<a name="267590404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267590404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267590404">(Jan 11 2022 at 14:40)</a>:</h4>
<p>(potentially with a different filter)</p>



<a name="267594994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267594994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267594994">(Jan 11 2022 at 15:11)</a>:</h4>
<p><a href="https://bors.rust-lang.org/retry_log/rust">https://bors.rust-lang.org/retry_log/rust</a></p>



<a name="267595132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267595132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267595132">(Jan 11 2022 at 15:12)</a>:</h4>
<p>that doesn't cover all failures, e.g. rollups may get closed on failure rather than retrying, but it may be useful to crosscheck</p>



<a name="267617921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267617921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267617921">(Jan 11 2022 at 17:42)</a>:</h4>
<p>maybe we should force people to actually write the <code>@bors retry</code> reason and ignore the command if there are no further comments (to get a better overview of the problems of ci)</p>



<a name="267622028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267622028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267622028">(Jan 11 2022 at 18:08)</a>:</h4>
<p><span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> I already write reasons after the <code>retry</code> most of the time</p>



<a name="267634554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267634554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267634554">(Jan 11 2022 at 19:43)</a>:</h4>
<p>I also write reasons most of the time, except when it's obvious, like bors just said that tests timed-out, or when I don't think of it ;)</p>



<a name="267635051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267635051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267635051">(Jan 11 2022 at 19:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267634554">said</a>:</p>
<blockquote>
<p>except when it's obvious</p>
</blockquote>
<p>It is not obvious when looking at <a href="https://bors.rust-lang.org/retry_log/rust">https://bors.rust-lang.org/retry_log/rust</a></p>
<p>It is helpful to always write a reason.</p>



<a name="267635125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267635125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267635125">(Jan 11 2022 at 19:48)</a>:</h4>
<p>Wow, I did not know the retry log showed the comments!</p>



<a name="267635172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267635172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267635172">(Jan 11 2022 at 19:48)</a>:</h4>
<p>I will try to write reasons more often, thanks :)</p>



<a name="267738011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267738011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267738011">(Jan 12 2022 at 15:15)</a>:</h4>
<p>would be useful if we could add some kind of <code>@bors retry</code>-log entry when closing a rollup indicating that there was an issue without having to re-run the pr (for example when bisecting through a set of PRs)</p>



<a name="267752303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/267752303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#267752303">(Jan 12 2022 at 16:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs/near/267635125">said</a>:</p>
<blockquote>
<p>Wow, I did not know the retry log showed the comments!</p>
</blockquote>
<p>neither did I, so same here :D</p>



<a name="268089927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/bors%3A%20stop%20prioritizing%20old%20PRs%20over%20new%20PRs/near/268089927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Poitras <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/bors.3A.20stop.20prioritizing.20old.20PRs.20over.20new.20PRs.html#268089927">(Jan 14 2022 at 23:56)</a>:</h4>
<p>I've had a look at the log, and it seems that the msvc hangs are often in rustc_macros. Is this a known issue? If not I'll investigate</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
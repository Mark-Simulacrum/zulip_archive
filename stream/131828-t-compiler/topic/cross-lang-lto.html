<html>
<head><meta charset="utf-8"><title>cross-lang-lto · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html">cross-lang-lto</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="137152945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/137152945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#137152945">(Nov 04 2018 at 11:33)</a>:</h4>
<p>@mw i'm trying to set up jemalloc with <code>-Zcross-lang-lto</code> on macosx with xcode10 (should have a recent enough clang) so that jemalloc is inlined into Rust:</p>
<p><code>CFLAGS="-flto=thin" RUSTFLAGS="-Zcross-lang-lto -Ccodegen-units=1" cargo test --all --release </code></p>
<p>fails with: <code>ld: unknown option: -plugin-opt=O3</code></p>
<p>I guess I'm missing something?</p>



<a name="146788804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/146788804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#146788804">(Nov 05 2018 at 11:04)</a>:</h4>
<p>I never tested the OSX linker with this. LLD works best in my experience (at least on Windows and Linux). Also, since nightly Rust is based on the yet unreleased LLVM 8.0, you might have to compile your own Clang because the LLVM IR format has changed.</p>



<a name="147580977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147580977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147580977">(Nov 13 2018 at 10:00)</a>:</h4>
<p><span class="user-mention" data-user-id="132920">@gnzlbg</span> Do you have a specific project you want to try this with?</p>



<a name="147581008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147581008" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147581008">(Nov 13 2018 at 10:01)</a>:</h4>
<p>I'm thinking about creating a sample project with some benchmarks</p>



<a name="147581025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147581025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147581025">(Nov 13 2018 at 10:01)</a>:</h4>
<p>if you already had something suitable, we could use that</p>



<a name="147583371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147583371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147583371">(Nov 13 2018 at 10:49)</a>:</h4>
<p>jemalloc-sys would be nice</p>



<a name="147583372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147583372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147583372">(Nov 13 2018 at 10:49)</a>:</h4>
<p>jemalloc-sys would be nice</p>



<a name="147583373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147583373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147583373">(Nov 13 2018 at 10:49)</a>:</h4>
<p>It already has benchmarks that might benefit from this.</p>



<a name="147594300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147594300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147594300">(Nov 13 2018 at 14:29)</a>:</h4>
<p>ok, great! existing benchmarks are a big plus.</p>



<a name="147594399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147594399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147594399">(Nov 13 2018 at 14:30)</a>:</h4>
<p>I'll look into it over the next few days</p>



<a name="147602254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147602254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147602254">(Nov 13 2018 at 16:26)</a>:</h4>
<p>i'm in a conference till thursday, but have the zulip app on the phone and check it now and then</p>
<p>I don't know if you want to try this out spontaneously once you get some time for it, or if you want to allocate a slot of time for trying that out in advance. If you do, let me know when, I can try to be online in case anything doesn't work. Compiling jemalloc-sys should "just work" but it builds jemalloc which is a C library with a non-trivial makefile system, so the experience isn't always smooth. If you get stuck I might be able to help though.</p>



<a name="147602361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147602361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147602361">(Nov 13 2018 at 16:28)</a>:</h4>
<p>thanks!</p>



<a name="147602379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147602379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147602379">(Nov 13 2018 at 16:28)</a>:</h4>
<p>I don't have a fixed time slot allocated for it.</p>



<a name="147602420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147602420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147602420">(Nov 13 2018 at 16:29)</a>:</h4>
<p>ok, then ping me if you run into any issues, maybe i'm online</p>



<a name="147668532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668532">(Nov 14 2018 at 13:51)</a>:</h4>
<p>OK, I had success with the following command:<br>
<code>EXTRA_CFLAGS=-flto=thin CC="/home/mw/llvm-build/bin/clang" RUSTFLAGS="-Clinker=/home/mw/llvm-build/bin/clang -Zcross-lang-lto -Zpre-link-arg=-fuse-ld=lld" cargo test --release --all</code></p>



<a name="147668586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668586">(Nov 14 2018 at 13:52)</a>:</h4>
<p>but I had to modify a file in jemalloc because an extra LD_FLAG is needed</p>



<a name="147668611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668611">(Nov 14 2018 at 13:53)</a>:</h4>
<p><code>LD_FLAGS=-fuse-ld=lld</code> and <code>EXTRA_LD_FLAGS=-fuse-ld=lld</code> didn't work unfortunately</p>



<a name="147668633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668633">(Nov 14 2018 at 13:53)</a>:</h4>
<p>another problem is that the commandline options for LLD seem to have changed in a non-backwards compatible way</p>



<a name="147668685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668685">(Nov 14 2018 at 13:54)</a>:</h4>
<p>I had to modify <code>rustc</code> to not pass a flag anymore that was still accepted a while ago</p>



<a name="147668719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668719">(Nov 14 2018 at 13:54)</a>:</h4>
<p>see <a href="https://github.com/rust-lang/rust/pull/55947" target="_blank" title="https://github.com/rust-lang/rust/pull/55947">https://github.com/rust-lang/rust/pull/55947</a></p>



<a name="147668761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668761">(Nov 14 2018 at 13:55)</a>:</h4>
<p>I used the rustc version from the PR (basically nightly)</p>



<a name="147668766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147668766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147668766">(Nov 14 2018 at 13:55)</a>:</h4>
<p>and the latest clang master</p>



<a name="147730422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147730422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147730422">(Nov 15 2018 at 09:30)</a>:</h4>
<p>cool! I was trying to use apple clang and was failing, going to give the latest clang master a try instead. Shouldn't we ship this too with the <code>llvm-tools-preview</code> ?</p>



<a name="147732958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147732958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147732958">(Nov 15 2018 at 10:29)</a>:</h4>
<blockquote>
<p>Shouldn't we ship this too with the llvm-tools-preview</p>
</blockquote>
<p>I was thinking that too. The only problem I see is that we would be shipping an unstable/not officially released version of Clang, which doesn't sound ideal to me. On the other hand, stable Clang is unlikely to ever catch up with rustc's LLVM version...</p>



<a name="147736058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147736058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147736058">(Nov 15 2018 at 11:41)</a>:</h4>
<p>I think it is fair to assume that if you want to use cross-lang-lto you need to use a clang version that's in sync with rust's llvm version (bundled or not), and that's what <code>llvm-tools</code> is there for if a bundled LLVM is shipped. I also wanted to add <code>llc</code> to <code>llvm-tools</code>,  so a PR to update that could probably just do both.</p>



<a name="147736289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147736289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147736289">(Nov 15 2018 at 11:46)</a>:</h4>
<p>Do you have a branch of jemallocator that builds with cross-lang-lto locally ?</p>



<a name="147739609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147739609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147739609">(Nov 15 2018 at 13:06)</a>:</h4>
<p>let me create one...</p>



<a name="147739725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147739725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147739725">(Nov 15 2018 at 13:08)</a>:</h4>
<p>hm, it's not so easy since the change is in the jemalloc sources...</p>



<a name="147741472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147741472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147741472">(Nov 15 2018 at 13:39)</a>:</h4>
<p>this should work:<br>
git clone <a href="https://github.com/michaelwoerister/jemallocator.git" target="_blank" title="https://github.com/michaelwoerister/jemallocator.git">https://github.com/michaelwoerister/jemallocator.git</a> --branch clang-thinlto-hack --recursive</p>



<a name="147741533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147741533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147741533">(Nov 15 2018 at 13:40)</a>:</h4>
<p>you still need the right version of clang and rustc though</p>



<a name="147741660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147741660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147741660">(Nov 15 2018 at 13:43)</a>:</h4>
<p>ok, we should send a patch to jemalloc with a configuration option that forces using lld for linking</p>



<a name="147741967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147741967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147741967">(Nov 15 2018 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span>  I wonder, isn't it enough during configure (e.g. in <code>jemalloc-sys/build.rs</code>) to call <code>configure</code> with the environment variable ("LDFLAGS", &amp;format("{} -fuse-ld=lld")) ?</p>



<a name="147741992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147741992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147741992">(Nov 15 2018 at 13:49)</a>:</h4>
<p>might be less intrusive than modifying jemalloc at this point</p>



<a name="147742124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742124">(Nov 15 2018 at 13:51)</a>:</h4>
<p>I tried <code>LD_FLAGS="-fuse-ld=lld" cargo build</code> and <code>EXTRA_LD_FLAGS="-fuse-ld=lld" cargo build</code></p>



<a name="147742131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742131">(Nov 15 2018 at 13:51)</a>:</h4>
<p>but the configure script would ignore them</p>



<a name="147742176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742176">(Nov 15 2018 at 13:52)</a>:</h4>
<p>using CFLAGS this way worked just fine</p>



<a name="147742195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742195">(Nov 15 2018 at 13:52)</a>:</h4>
<p>maybe cargo isn't passing the flags on? or the configure script doesn't support LD_FLAGS being set from the outside</p>



<a name="147742239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742239">(Nov 15 2018 at 13:53)</a>:</h4>
<p>also, in theory it should work with other linkers too, if the right <code>--plugin</code> option is passed</p>



<a name="147742288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742288">(Nov 15 2018 at 13:54)</a>:</h4>
<p>in practice things didn't work so well with <code>ld</code> the last time I tried</p>



<a name="147742309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742309">(Nov 15 2018 at 13:54)</a>:</h4>
<p><code>gold</code> worked at some point and later didn't</p>



<a name="147742339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147742339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147742339">(Nov 15 2018 at 13:55)</a>:</h4>
<p>so I'm telling people to use LLD, but for jemalloc a more general solution would be needed, I think</p>



<a name="147744136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744136">(Nov 15 2018 at 14:19)</a>:</h4>
<p><a href="https://github.com/gnzlbg/jemallocator/commit/6eb2b293f46e85b5c2d9190658507a76293dd031" target="_blank" title="https://github.com/gnzlbg/jemallocator/commit/6eb2b293f46e85b5c2d9190658507a76293dd031">https://github.com/gnzlbg/jemallocator/commit/6eb2b293f46e85b5c2d9190658507a76293dd031</a></p>



<a name="147744207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744207">(Nov 15 2018 at 14:20)</a>:</h4>
<p>so independently of how to pass this (cflags, ldflags, ...) something like this should work</p>



<a name="147744243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744243">(Nov 15 2018 at 14:20)</a>:</h4>
<p>once the new nightly is produced, we should try to at least upstream this to jemallocator, and get the macosx build bots to use it</p>



<a name="147744280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744280">(Nov 15 2018 at 14:21)</a>:</h4>
<p>we could add an <code>x86_64-unknown-linux-gnu</code> build bot that has clang trunk installed in travis (llvm apt repos provide this)</p>



<a name="147744292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744292">(Nov 15 2018 at 14:21)</a>:</h4>
<p>and get it going on linux as well</p>



<a name="147744309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744309">(Nov 15 2018 at 14:21)</a>:</h4>
<p>ideally behind an opt-in option at the beginning</p>



<a name="147744321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744321">(Nov 15 2018 at 14:21)</a>:</h4>
<p>so that people can enable it if it works for them</p>



<a name="147744382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744382">(Nov 15 2018 at 14:22)</a>:</h4>
<p>we can then try to use this in rustc, and once it works, maybe turn that to opt-out so that cross-lang lto is used by default</p>



<a name="147744390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744390">(Nov 15 2018 at 14:22)</a>:</h4>
<p>oh by the way, I only tested this on linux so far</p>



<a name="147744423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744423">(Nov 15 2018 at 14:23)</a>:</h4>
<p>i'll test macos once the next nightly is released, it is not working there for me yet</p>



<a name="147744550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744550">(Nov 15 2018 at 14:24)</a>:</h4>
<p>did you verify that the patch above works?</p>



<a name="147744574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744574">(Nov 15 2018 at 14:24)</a>:</h4>
<p>i.e. is it cargo that's not passing on the LD_FLAGS variable?</p>



<a name="147744695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744695">(Nov 15 2018 at 14:26)</a>:</h4>
<p>nope, I haven't yet, last time i tried I was still passing it more flags (use lto thin, etc.)</p>



<a name="147744844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744844">(Nov 15 2018 at 14:28)</a>:</h4>
<p>but jemalloc-sys built? because that's where it failed for me</p>



<a name="147744849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744849">(Nov 15 2018 at 14:28)</a>:</h4>
<p>while linking some shared library</p>



<a name="147744899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744899" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744899">(Nov 15 2018 at 14:29)</a>:</h4>
<p>btw, do you know why <code>cargo bench</code> fails?</p>



<a name="147744921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147744921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147744921">(Nov 15 2018 at 14:29)</a>:</h4>
<p>it gives a lot of errors while building the benchmark</p>



<a name="147745069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745069" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745069">(Nov 15 2018 at 14:31)</a>:</h4>
<p>with the LTO options it did not build, I just assumed that it was because I was passing it more options than you, and that because I am using a nightly without your latest PR</p>



<a name="147745091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745091">(Nov 15 2018 at 14:31)</a>:</h4>
<p>it might be that the benchmarks are not tested on CI ?</p>



<a name="147745136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745136">(Nov 15 2018 at 14:32)</a>:</h4>
<p>at some point it switched to use <code>cargo test --all</code> but maybe that does not build the benchmarks and they got out of sync</p>



<a name="147745236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745236">(Nov 15 2018 at 14:33)</a>:</h4>
<p>I get this:</p>



<a name="147745237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745237">(Nov 15 2018 at 14:33)</a>:</h4>
<div class="codehilite"><pre><span></span>error[E0599]: no method named `dealloc` found for type `jemallocator::Jemalloc` in the current scope
    --&gt; benches/roundtrip.rs:249:26
     |
249  |                   Jemalloc.dealloc(ptr, new_layout);
     |                            ^^^^^^^
...
4873 | / rt_realloc_excess_used!(
4874 | |     rt_primes_4194301bytes_32align_realloc_excess_used,
4875 | |     4194301,
4876 | |     32
4877 | | );
     | |__- in this macro invocation
     |
     = help: items from traits can only be used if the trait is in scope
help: the following trait is implemented but not in scope, perhaps add a `use` for it:
     |
9    | use std::alloc::GlobalAlloc;
     |

error: aborting due to 6301 previous errors
</pre></div>



<a name="147745307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745307">(Nov 15 2018 at 14:34)</a>:</h4>
<p>might be just a small fix that's needed</p>



<a name="147745335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745335">(Nov 15 2018 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> i'll send a PR fixing those, the benchmarks are not built on CI anymore, and they don't have any of the GlobalAlloc / Alloc changes of the last... year at least ... so nothing builds</p>



<a name="147745358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745358">(Nov 15 2018 at 14:35)</a>:</h4>
<p>working on a PR now</p>



<a name="147745388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147745388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147745388">(Nov 15 2018 at 14:35)</a>:</h4>
<p>thanks!</p>



<a name="147749202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147749202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147749202">(Nov 15 2018 at 15:22)</a>:</h4>
<p>PR is open (<a href="https://github.com/alexcrichton/jemallocator/pull/98" target="_blank" title="https://github.com/alexcrichton/jemallocator/pull/98">https://github.com/alexcrichton/jemallocator/pull/98</a>), once CI is green I'll merge.</p>



<a name="147749262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147749262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147749262">(Nov 15 2018 at 15:23)</a>:</h4>
<p>rust chokes a bit compiling the benchmarks though</p>



<a name="147815072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147815072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147815072">(Nov 16 2018 at 12:58)</a>:</h4>
<p>@mw the benchmark changes have been merged and there is a nightly containing the linker changes already</p>



<a name="147815088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147815088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147815088">(Nov 16 2018 at 12:59)</a>:</h4>
<p>until clang is shipped with the <code>llvm-tools</code> we can just query the clang version at &gt;= 8</p>



<a name="147821804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147821804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147821804">(Nov 16 2018 at 15:02)</a>:</h4>
<p><code>rustc -vV</code> prints the LLVM version. we could use that</p>



<a name="147824730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147824730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147824730">(Nov 16 2018 at 15:46)</a>:</h4>
<p>sounds good</p>



<a name="147830893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147830893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147830893">(Nov 16 2018 at 17:15)</a>:</h4>
<p>I have the benchmarks running but they are taking so long, I think I won't wait for them</p>



<a name="147830958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147830958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147830958">(Nov 16 2018 at 17:16)</a>:</h4>
<p>fyi: I'll be on vacation until wednesday, so I probably won't be online</p>



<a name="147831084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147831084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147831084">(Nov 16 2018 at 17:18)</a>:</h4>
<p>hm, you can do a <code>cargo benchcmp</code> on the results printed so far...</p>



<a name="147831107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147831107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147831107">(Nov 16 2018 at 17:19)</a>:</h4>
<p>so these are not all benchmarks, but quite a few. they look pretty good mostly:</p>



<a name="147831112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/cross-lang-lto/near/147831112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/cross-lang-lto.html#147831112">(Nov 16 2018 at 17:19)</a>:</h4>
<p><a href="https://gist.githubusercontent.com/michaelwoerister/2c9e2b03f0343d70a8d57ceb637b9895/raw/c98db6398d4553e5fa3f0da573bf7bf883932142/partial-benchcmp-jemallocator-xtlo.txt" target="_blank" title="https://gist.githubusercontent.com/michaelwoerister/2c9e2b03f0343d70a8d57ceb637b9895/raw/c98db6398d4553e5fa3f0da573bf7bf883932142/partial-benchcmp-jemallocator-xtlo.txt">https://gist.githubusercontent.com/michaelwoerister/2c9e2b03f0343d70a8d57ceb637b9895/raw/c98db6398d4553e5fa3f0da573bf7bf883932142/partial-benchcmp-jemallocator-xtlo.txt</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
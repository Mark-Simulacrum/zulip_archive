<html>
<head><meta charset="utf-8"><title>remove alloc_jemalloc · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html">remove alloc_jemalloc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="137014383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/remove%20alloc_jemalloc/near/137014383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html#137014383">(Nov 02 2018 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span>  you are using jemalloc without background threads right ?</p>



<a name="137014748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/remove%20alloc_jemalloc/near/137014748" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html#137014748">(Nov 02 2018 at 13:02)</a>:</h4>
<p>to test the hypothesis of the orphan child threads you might want to hook up a <code>panic!</code> that sleeps for a couple of seconds and see if that fixes the issue</p>



<a name="137027407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/remove%20alloc_jemalloc/near/137027407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html#137027407">(Nov 02 2018 at 13:52)</a>:</h4>
<p><span class="user-mention" data-user-id="132920">@gnzlbg</span> I don't think so just yet, I wasn't sure how to both compile it in and enable it (just trying to get it to land atm)</p>



<a name="137028034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/remove%20alloc_jemalloc/near/137028034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html#137028034">(Nov 02 2018 at 13:55)</a>:</h4>
<p>i'll send a PR to jemallocator with background thread support today - I discovered a couple of bugs in jemalloc upstream that have to be worked around in osx, musl, etc =/</p>



<a name="137029292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/remove%20alloc_jemalloc/near/137029292" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html#137029292">(Nov 02 2018 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="132920">@gnzlbg</span> ah ok, thankfully it should now be super easy to update jemalloc in rustc!</p>



<a name="137029327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/remove%20alloc_jemalloc/near/137029327" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html#137029327">(Nov 02 2018 at 14:00)</a>:</h4>
<p>ideally this'd just be a <code>cargo update</code> to get a new version</p>



<a name="137029672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/remove%20alloc_jemalloc/near/137029672" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/remove.20alloc_jemalloc.html#137029672">(Nov 02 2018 at 14:02)</a>:</h4>
<p>yeah, thank you for that</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
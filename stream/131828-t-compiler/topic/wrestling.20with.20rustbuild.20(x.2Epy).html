<html>
<head><meta charset="utf-8"><title>wrestling with rustbuild (x.py) · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html">wrestling with rustbuild (x.py)</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="227281753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227281753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227281753">(Feb 22 2021 at 15:18)</a>:</h4>
<p>I feel like I’m living in a Kafka novella. What flags do I need to pass to <code>x.py</code> to actually <em>see</em> the output issues via <code>eprintln!</code> in the <code>rustc.rs</code>shim?</p>



<a name="227281875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227281875" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227281875">(Feb 22 2021 at 15:19)</a>:</h4>
<p>Actually, let me revise that; I’m staring at the <code>if verbose &gt; 1 { eprintln!(…); … }</code> stuff, but I haven’t checked if I do see <code>eprintln!</code>’s outside of that <code>if verbose</code> guard</p>



<a name="227281965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227281965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227281965">(Feb 22 2021 at 15:20)</a>:</h4>
<p>okay, I <em>do</em> see RUSTC-TIMING output. So the problem isn’t <code>eprintln!</code>; it must be how the verbosity is handled.</p>



<a name="227282299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227282299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227282299">(Feb 22 2021 at 15:22)</a>:</h4>
<p>can the <code>verbose</code> setting <em>only</em> be established in the <code>config.toml</code>, not via command lines?</p>



<a name="227283133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227283133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227283133">(Feb 22 2021 at 15:26)</a>:</h4>
<p>hmm. or maybe my mistake was that I was seeing RUSTC-TIMING output from a different file, and <em>thought</em> it was from <code>rustc.rs</code> ? (At this point I <em>have</em> managed to observe the <code>eprintln!</code> lines I was expecting, but I have not figured out why I wasn’t seeing them before.)</p>



<a name="227288639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227288639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227288639">(Feb 22 2021 at 15:58)</a>:</h4>
<p>I think <a href="http://rustc.rs">rustc.rs</a> might get e.g. verbose level - 1 or something like that?</p>



<a name="227288660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227288660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227288660">(Feb 22 2021 at 15:58)</a>:</h4>
<p>notably, verbose &gt; 1 might mean anything of -vv or -vvv</p>



<a name="227294427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294427">(Feb 22 2021 at 16:26)</a>:</h4>
<p>yeah I’m not sure what was happening</p>



<a name="227294449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294449">(Feb 22 2021 at 16:26)</a>:</h4>
<p>but I’ve managed to see the output now</p>



<a name="227294488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294488" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294488">(Feb 22 2021 at 16:26)</a>:</h4>
<p>my current best guess is that I hadn’t touched any of the compiler source</p>



<a name="227294506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294506">(Feb 22 2021 at 16:26)</a>:</h4>
<p>during my initial test runs of the changes to <code>rustc.rs</code></p>



<a name="227294542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294542">(Feb 22 2021 at 16:26)</a>:</h4>
<p>and I was assuming that I would see it get invoked nonetheless</p>



<a name="227294564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294564" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294564">(Feb 22 2021 at 16:27)</a>:</h4>
<p>though in hindsight, I can see how that assumption is flawed.</p>



<a name="227294613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294613">(Feb 22 2021 at 16:27)</a>:</h4>
<p>(i.e. it is probably a feature, not a bug, that we do not rebuild the world in response to changes to <code>rustc.rs</code> shim.)</p>



<a name="227294751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294751">(Feb 22 2021 at 16:28)</a>:</h4>
<p>(this does not explain why I was seeing <code>[RUSTC-TIMING]</code> output though. As far as I can tell, that is <em>only</em> emitted via <code>rustc.rs</code> So, still pretty confused.)</p>



<a name="227294934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294934">(Feb 22 2021 at 16:29)</a>:</h4>
<p>by the way, <span class="user-mention" data-user-id="116122">@simulacrum</span> , since you’re here: This is a trivial rustbuild PR that you had previously said you’d be willing to review: PR <a href="https://github.com/rust-lang/rust/issues/82403">#82403</a></p>



<a name="227294956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294956" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294956">(Feb 22 2021 at 16:29)</a>:</h4>
<p>yeah will do later today</p>



<a name="227294967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227294967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227294967">(Feb 22 2021 at 16:29)</a>:</h4>
<p>thanks!</p>



<a name="227296524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227296524" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227296524">(Feb 22 2021 at 16:39)</a>:</h4>
<p>(CI for that PR is failing btw)</p>



<a name="227297445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227297445" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227297445">(Feb 22 2021 at 16:45)</a>:</h4>
<p>(fixed, hopefully. time to put <code>x.py test src/tools/tidy</code> back into my M-x compile runs.)</p>



<a name="227297516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227297516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227297516">(Feb 22 2021 at 16:45)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/81833">https://github.com/rust-lang/rust/pull/81833</a> should hopefully make that less painful</p>



<a name="227506546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506546">(Feb 23 2021 at 21:29)</a>:</h4>
<p>Hey, rustbuild experts: Do we cache the output from the rustc runs during rustbuild, and replay it when the file is unchanged?</p>



<a name="227506679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506679">(Feb 23 2021 at 21:30)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> <span class="user-mention" data-user-id="116122">@simulacrum</span> ^ ?</p>



<a name="227506752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506752" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506752">(Feb 23 2021 at 21:30)</a>:</h4>
<p>cargo does that, not x.py</p>



<a name="227506766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506766" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506766">(Feb 23 2021 at 21:30)</a>:</h4>
<p>Cargo does that if you mean stdio</p>



<a name="227506768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506768" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506768">(Feb 23 2021 at 21:30)</a>:</h4>
<p>but yes</p>



<a name="227506777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506777">(Feb 23 2021 at 21:30)</a>:</h4>
<p>In particular, I’m noticing that when I do a rebuild right now on my Mac, it finishes in less than two seconds, but it still includes all the same <code>[RUSTC-TIMING]</code> output</p>



<a name="227506801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506801">(Feb 23 2021 at 21:31)</a>:</h4>
<p>okay all this now makes <em>so</em> much sense</p>



<a name="227506847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506847">(Feb 23 2021 at 21:31)</a>:</h4>
<p>see also <a href="https://github.com/rust-lang/cargo/issues/8374">https://github.com/rust-lang/cargo/issues/8374</a>; cargo is not very good at validating the output cache IMO</p>



<a name="227506874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506874">(Feb 23 2021 at 21:31)</a>:</h4>
<p>I guess I did know that <code>cargo</code> cached the output. For some reason I thought output for e.g. <code>[RUSTC-TIMING]</code> would not get cached.</p>



<a name="227506962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506962" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506962">(Feb 23 2021 at 21:32)</a>:</h4>
<p>(I mean, its great for seeing a reminder of what happened on the last run. But its also super confusing. :) )</p>



<a name="227506993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227506993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227506993">(Feb 23 2021 at 21:32)</a>:</h4>
<p>I think cargo does just fine personally with the information it has.</p>



<a name="227507008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507008" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507008">(Feb 23 2021 at 21:32)</a>:</h4>
<p>I don’t think I blame <code>cargo</code> here</p>



<a name="227507021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507021" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507021">(Feb 23 2021 at 21:32)</a>:</h4>
<p>I don’t know what I blame. Maybe myself.</p>



<a name="227507131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507131">(Feb 23 2021 at 21:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> could we move the timing info out of <code>rustc.rs</code> somehow so it doesn't get cached? Maybe use <code>cargo -Z timings</code> and parse the streaming output?</p>



<a name="227507337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507337" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507337">(Feb 23 2021 at 21:34)</a>:</h4>
<p>I want it cached personally.</p>



<a name="227507399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507399" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507399">(Feb 23 2021 at 21:35)</a>:</h4>
<p>hmm, why?</p>



<a name="227507546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507546">(Feb 23 2021 at 21:36)</a>:</h4>
<p>Maybe its fine as long as its clear when it came from</p>



<a name="227507571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507571">(Feb 23 2021 at 21:36)</a>:</h4>
<p>/me muses about emitting a timestamp on the line</p>



<a name="227507778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507778" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507778">(Feb 23 2021 at 21:38)</a>:</h4>
<p>I don't know if it's because I exactly know where the output comes from, but I find it really nice that any build comes with easy to access slowness</p>



<a name="227507846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507846">(Feb 23 2021 at 21:38)</a>:</h4>
<p>Rather than having to invalidate some cache and wait</p>



<a name="227507947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507947">(Feb 23 2021 at 21:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy)/near/227507778">said</a>:</p>
<blockquote>
<p>[…] I find it really nice that any build comes with easy to access slowness</p>
</blockquote>
<p>I don’t understand what this means.</p>



<a name="227507979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227507979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227507979">(Feb 23 2021 at 21:39)</a>:</h4>
<p>do you mean that its nice to be able to query that log, even when the build was already done?</p>



<a name="227508068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508068" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508068">(Feb 23 2021 at 21:40)</a>:</h4>
<p>that’s only true if you had thought to turn on build.print_step_timings in the first place, but I guess that’s a given for the cases you are interested in?</p>



<a name="227508368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508368">(Feb 23 2021 at 21:42)</a>:</h4>
<p>Yeah, basically I always have it on</p>



<a name="227508411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508411" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508411">(Feb 23 2021 at 21:42)</a>:</h4>
<p>And it's not surprising to me</p>



<a name="227508430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508430">(Feb 23 2021 at 21:42)</a>:</h4>
<p>would you object to some form of timestamp being included in the output?</p>



<a name="227508469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508469">(Feb 23 2021 at 21:43)</a>:</h4>
<p>I say this, while thinking “_I_ would be annoyed by that."</p>



<a name="227508471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508471" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508471">(Feb 23 2021 at 21:43)</a>:</h4>
<p>No, not really</p>



<a name="227508488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508488" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508488">(Feb 23 2021 at 21:43)</a>:</h4>
<p>I wouldn't find it useful</p>



<a name="227508512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508512">(Feb 23 2021 at 21:43)</a>:</h4>
<p>right, but you already know what to expect here</p>



<a name="227508532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508532" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508532">(Feb 23 2021 at 21:43)</a>:</h4>
<p>The idea of integrating your work into -Ztimings might be better though</p>



<a name="227508544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508544">(Feb 23 2021 at 21:43)</a>:</h4>
<p>a timestamp would have told me: “Hey, dummy, these runs aren’t happening right now."</p>



<a name="227508557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508557">(Feb 23 2021 at 21:43)</a>:</h4>
<p>IIRC that prints the time in sort of cargo native format</p>



<a name="227508632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508632">(Feb 23 2021 at 21:44)</a>:</h4>
<p>Timestamps are helpful if you know what time it is</p>



<a name="227508657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508657" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508657">(Feb 23 2021 at 21:44)</a>:</h4>
<p>I usually don't</p>



<a name="227508686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508686" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508686">(Feb 23 2021 at 21:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy)/near/227508557">said</a>:</p>
<blockquote>
<p>IIRC that prints the time in sort of cargo native format</p>
</blockquote>
<p>here's an example:</p>
<div class="codehilite"><pre><span></span><code>(bash@joshua-ThinkPad-P51s) ~/.../rust/rand [16:44:09]
&gt; cargo build -Z timings
   Compiling libc v0.2.81
   Compiling getrandom v0.2.0
   Compiling ppv-lite86 v0.2.10
   Completed ppv-lite86 v0.2.10 in 1.0s
   Completed libc v0.2.81 custom-build in 1.0s
   Completed getrandom v0.2.0 custom-build in 1.0s
   Completed getrandom v0.2.0 custom-build (run) in 0.0s
   Completed libc v0.2.81 custom-build (run) in 0.1s
   Completed libc v0.2.81 in 0.7s
   Compiling rand_core v0.5.1 (/home/joshua/src/rust/rand/rand_core)
   Completed getrandom v0.2.0 in 0.4s
   Compiling rand_chacha v0.2.3 (/home/joshua/src/rust/rand/rand_chacha)
   Compiling rand_hc v0.2.1 (/home/joshua/src/rust/rand/rand_hc)
   Completed rand_core v0.5.1 in 0.6s
   Compiling rand v0.7.4 (/home/joshua/src/rust/rand)
   Completed rand_hc v0.2.1 in 0.6s
   Completed rand_chacha v0.2.3 in 1.4s
   Completed rand v0.7.4 in 1.9s
      Timing report saved to /home/joshua/src/rust/rand/cargo-timing-20210223T214412Z.html
    Finished dev [unoptimized + debuginfo] target(s) in 5.23s
</code></pre></div>



<a name="227508693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508693" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508693">(Feb 23 2021 at 21:44)</a>:</h4>
<p>mm. I include the time in my prompt.</p>



<a name="227508723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508723">(Feb 23 2021 at 21:44)</a>:</h4>
<p>Yeah I have it in my prompt too</p>



<a name="227508816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508816" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508816">(Feb 23 2021 at 21:45)</a>:</h4>
<p>… and yet "simulacrum: Timestamps are helpful if you know what time it is. I usually don’t"</p>



<a name="227508835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508835" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508835">(Feb 23 2021 at 21:45)</a>:</h4>
<p>But it's not like I read that, so helpful for looking at backscroll but when I'm reading rustc output I won't react to a line with 4:40 as "oh that's just now"</p>



<a name="227508869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508869">(Feb 23 2021 at 21:45)</a>:</h4>
<p>Or "no that's an hour ago"</p>



<a name="227508947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508947" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508947">(Feb 23 2021 at 21:46)</a>:</h4>
<p>Maybe I'm weird - information on my screen doesn't mean I can intuitively say whether it's recent or not</p>



<a name="227508994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227508994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227508994">(Feb 23 2021 at 21:46)</a>:</h4>
<p>I suppose if my dummy brain didn’t react to “gee its so weird that I keep getting exactly the same numbers over and over”, then why would it react to an out-of-date time stamp.</p>



<a name="227509076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509076">(Feb 23 2021 at 21:47)</a>:</h4>
<p>Right that's basically my point with the times</p>



<a name="227509118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509118">(Feb 23 2021 at 21:47)</a>:</h4>
<p>Like if I was thinking about it I'd definitely say "wait this is from yesterday"</p>



<a name="227509143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509143">(Feb 23 2021 at 21:47)</a>:</h4>
<p>But I probably won't be if I'm not thinking</p>



<a name="227509263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509263" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509263">(Feb 23 2021 at 21:48)</a>:</h4>
<p>maybe we could ask cargo to print a warning if it's using cached output?</p>



<a name="227509280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509280">(Feb 23 2021 at 21:48)</a>:</h4>
<p>or add our own somehow?</p>



<a name="227509307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509307">(Feb 23 2021 at 21:48)</a>:</h4>
<p>I was just musing about that. Does it say something in any of its <code>—verbose</code> modes about it?</p>



<a name="227509330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509330">(Feb 23 2021 at 21:48)</a>:</h4>
<p>I’d probably be satisfied with that</p>



<a name="227509387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509387" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509387">(Feb 23 2021 at 21:49)</a>:</h4>
<p>It does say things if you ask it for json output, that I'm sure about.</p>



<a name="227509405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509405" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509405">(Feb 23 2021 at 21:49)</a>:</h4>
<p>I suspect it doesn’t mention it, because I’d be pretty surprised if I overlooked such output when I was wrestling with this yesteday</p>



<a name="227509409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509409">(Feb 23 2021 at 21:49)</a>:</h4>
<p>says something like <code>"state": "fresh"</code> IIRC (among many many other things).</p>



<a name="227509553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509553" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509553">(Feb 23 2021 at 21:50)</a>:</h4>
<div class="codehilite"><pre><span></span><code>&gt; RUSTC=./loud-rustc.sh cargo build -v
       Fresh cfg-if v0.1.10
       Fresh ppv-lite86 v0.2.10
       Fresh libc v0.2.81
       Fresh getrandom v0.2.0
       Fresh rand_core v0.5.1 (/home/joshua/src/rust/rand/rand_core)
       Fresh rand_hc v0.2.1 (/home/joshua/src/rust/rand/rand_hc)
       Fresh rand_chacha v0.2.3 (/home/joshua/src/rust/rand/rand_chacha)
       Fresh rand v0.7.4 (/home/joshua/src/rust/rand)
oops some output
    Finished dev [unoptimized + debuginfo] target(s) in 0.01s
</code></pre></div>



<a name="227509590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/227509590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#227509590">(Feb 23 2021 at 21:50)</a>:</h4>
<p>I guess "Fresh" is an indicator that it's not actually being rebuilt</p>



<a name="228149117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/228149117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#228149117">(Feb 28 2021 at 18:55)</a>:</h4>
<blockquote>
<p>Kafka novella</p>
</blockquote>
<p>Heh, I saw that and for a second thought "a novella about Apache Kafka?"</p>



<a name="228248004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/wrestling%20with%20rustbuild%20%28x.py%29/near/228248004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy).html#228248004">(Mar 01 2021 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/wrestling.20with.20rustbuild.20(x.2Epy)/near/227509590">said</a>:</p>
<blockquote>
<p>I guess "Fresh" is an indicator that it's not actually being rebuilt</p>
</blockquote>
<p>Hmm. I'll go review. If that is the indicator, then I guess I overlooked it.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
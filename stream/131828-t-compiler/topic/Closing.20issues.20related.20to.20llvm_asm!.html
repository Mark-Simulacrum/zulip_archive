<html>
<head><meta charset="utf-8"><title>Closing issues related to llvm_asm! · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html">Closing issues related to llvm_asm!</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="198264983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198264983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198264983">(May 20 2020 at 22:23)</a>:</h4>
<p>We have a lot of open issues about the various bugs in <code>llvm_asm!</code>. At the moment there is no plan to fix these, we are instead encouraging people to migrate to the new <code>asm!</code> instead. Should we go ahead and close most of these issues if they do not apply to the new <code>asm!</code>?</p>



<a name="198265260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198265260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198265260">(May 20 2020 at 22:27)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/labels/A-inline-assembly">https://github.com/rust-lang/rust/labels/A-inline-assembly</a></p>



<a name="198265520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198265520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198265520">(May 20 2020 at 22:30)</a>:</h4>
<p>I figure we can close about 40 issues.</p>



<a name="198268644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198268644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198268644">(May 20 2020 at 23:08)</a>:</h4>
<p>Wouldn't it make more sense to wait until the new <code>asm!</code> lands on nightly? Until then users of <code>llvm_asm!</code> couldn't migrate and check if their issue is still relevant with the new <code>asm!</code> syntax.</p>



<a name="198268886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198268886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198268886">(May 20 2020 at 23:11)</a>:</h4>
<p>It has landed</p>



<a name="198269236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198269236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198269236">(May 20 2020 at 23:17)</a>:</h4>
<p>It's on master now but I don't a nightly with it is released yet.</p>



<a name="198269322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198269322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198269322">(May 20 2020 at 23:18)</a>:</h4>
<p>Anyway probably it's better to wait a little to allow ppl to try the new asm first</p>



<a name="198269370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198269370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198269370">(May 20 2020 at 23:19)</a>:</h4>
<p>Most issues are LLVM crashes and rustc ICEs, so they can probably all be closed as wontfix immediately (unless <code>asm!</code> has the same bug)</p>



<a name="198290129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198290129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198290129">(May 21 2020 at 06:20)</a>:</h4>
<p>Yeah, it would be nice to translate all the issues into the new <code>asm!</code> (if possible) and verify that they don't reproduce.<br>
Perhaps some of them are LLVM issues independent from our asm flavor.</p>



<a name="198318664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198318664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198318664">(May 21 2020 at 13:12)</a>:</h4>
<p>I would support that policy -- translate and check. If there's an easy to use guide for how to do so (we should definitely have one!) then I imagine we could largely get the community to provide the translations, too.</p>
<p>I do think we should have a policy going forward of closing llvm_asm! issues that get filed, and asking filer(s) to try with asm! and file new issues as needed.</p>



<a name="198479501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479501">(May 22 2020 at 18:44)</a>:</h4>
<p>I definitely think that trying to enlist community to do that translation would be better than having <span class="user-mention" data-user-id="143274">@Amanieu</span> try to do it all by themselves...</p>



<a name="198479581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479581">(May 22 2020 at 18:45)</a>:</h4>
<p>...I also think a plausible strategy might to leave a comment on each issue, encouraging the OP or others to port it to the new <code>asm!</code>, and after some amoutn of time, close the rest</p>



<a name="198479601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479601">(May 22 2020 at 18:45)</a>:</h4>
<p>that + publish a list somewhere of the issues and try to get eyeballs</p>



<a name="198479631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479631">(May 22 2020 at 18:45)</a>:</h4>
<p>Actually <span class="user-mention" data-user-id="143274">@Amanieu</span> I think an <code>Inside Rust!</code> blog post about the new <code>asm!</code> syntax would be a nice thing to do</p>



<a name="198479636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479636">(May 22 2020 at 18:45)</a>:</h4>
<p>It's not such a big deal, most of the issues are caused by passing invalid types to <code>asm!</code>. These are all rejected by the new <code>asm!</code> type checking.</p>



<a name="198479662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479662">(May 22 2020 at 18:45)</a>:</h4>
<p>and at the end there could be a </p>
<h1>Next steps</h1>
<p>that encourages people to try it out, give feedback, and/or do any kind of rote work we want</p>



<a name="198479706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479706">(May 22 2020 at 18:46)</a>:</h4>
<p>ok, regardless I think it'd be great to have a blog post touting the new feature :)</p>



<a name="198479730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479730">(May 22 2020 at 18:46)</a>:</h4>
<p>or maybe <span class="user-mention" data-user-id="239881">@Josh Triplett</span> wants to do it</p>



<a name="198479735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479735">(May 22 2020 at 18:46)</a>:</h4>
<p>I'd probably just crib from the RFC</p>



<a name="198479744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479744">(May 22 2020 at 18:46)</a>:</h4>
<p>i.e., include a few examples and things</p>



<a name="198479751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479751">(May 22 2020 at 18:46)</a>:</h4>
<p>the text was already pretty darn readable</p>



<a name="198479777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198479777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198479777">(May 22 2020 at 18:46)</a>:</h4>
<p>I would be quite happy to write such a blog post.</p>



<a name="198481301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198481301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198481301">(May 22 2020 at 18:59)</a>:</h4>
<p>I can help review the blog post if you like.</p>



<a name="198486195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198486195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198486195">(May 22 2020 at 19:42)</a>:</h4>
<p>Currently drafting.</p>



<a name="198486246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198486246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198486246">(May 22 2020 at 19:43)</a>:</h4>
<p>I plan to include a simple hello world example, but if you have an example of using asm for acceleration, that might help as well.</p>



<a name="198647564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Closing%20issues%20related%20to%20llvm_asm%21/near/198647564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/Closing.20issues.20related.20to.20llvm_asm!.html#198647564">(May 25 2020 at 08:53)</a>:</h4>
<p><a href="https://github.com/rust-lang/blog.rust-lang.org/pull/600">https://github.com/rust-lang/blog.rust-lang.org/pull/600</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
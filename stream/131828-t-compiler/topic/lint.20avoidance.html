<html>
<head><meta charset="utf-8"><title>lint avoidance · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html">lint avoidance</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="210518002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210518002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210518002">(Sep 18 2020 at 13:29)</a>:</h4>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/pull/75605">https://github.com/rust-lang/rust/pull/75605</a> jyn514</p>
</blockquote>
<p>I'm not going to get to this any time soon, it needs either help from a compiler member or me to have a full weekend free to learn about lints</p>



<a name="210518012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210518012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210518012">(Sep 18 2020 at 13:29)</a>:</h4>
<p>happy for someone else to take it over</p>



<a name="210519650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210519650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210519650">(Sep 18 2020 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> can i close it?</p>



<a name="210519863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210519863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210519863">(Sep 18 2020 at 13:44)</a>:</h4>
<p>I don't want to lose the comments from <span class="user-mention silent" data-user-id="116122">simulacrum</span> , if you add them to the issue then sure</p>



<a name="210519921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210519921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210519921">(Sep 18 2020 at 13:45)</a>:</h4>
<p>hold on don't close</p>



<a name="210519933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210519933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210519933">(Sep 18 2020 at 13:45)</a>:</h4>
<p>did we ever get performance numbers here?</p>



<a name="210519962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210519962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210519962">(Sep 18 2020 at 13:45)</a>:</h4>
<p>yes, in the PR you closed before ;)</p>



<a name="210519997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210519997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210519997">(Sep 18 2020 at 13:45)</a>:</h4>
<p>about a 1-3% decrease in instruction count</p>



<a name="210520186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520186">(Sep 18 2020 at 13:47)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/74718">https://github.com/rust-lang/rust/pull/74718</a> / <a href="https://perf.rust-lang.org/compare.html?start=900869371e13cead086f4f9809419daa6a63cfaf&amp;end=4874c68561d0727f5ff895edef9e1e3473b6e389">https://perf.rust-lang.org/compare.html?start=900869371e13cead086f4f9809419daa6a63cfaf&amp;end=4874c68561d0727f5ff895edef9e1e3473b6e389</a></p>



<a name="210520269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520269">(Sep 18 2020 at 13:47)</a>:</h4>
<p>okay, let me split this into a separate topic</p>



<a name="210520308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520308">(Sep 18 2020 at 13:47)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="242269" href="/#narrow/stream/242269-t-release.2Ftriage/topic/2020-09-14.20to.2009-20">#t-release/triage &gt; 2020-09-14 to 09-20</a> by <span class="user-mention silent" data-user-id="116122">simulacrum</span></p>



<a name="210520425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520425">(Sep 18 2020 at 13:48)</a>:</h4>
<p>I would like to see this win, but I am still scared of missing errors or what not</p>



<a name="210520499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520499">(Sep 18 2020 at 13:49)</a>:</h4>
<p>sure, I want to write the asserts but I'm not sure where to put them</p>



<a name="210520529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520529">(Sep 18 2020 at 13:49)</a>:</h4>
<p>it seems like lints are run throughout the compiler, they're not centralized</p>



<a name="210520585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520585">(Sep 18 2020 at 13:49)</a>:</h4>
<p>hm, no they should be pretty centralized - well there's like 3-4 entry points for the various styles of litn</p>



<a name="210520756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520756">(Sep 18 2020 at 13:50)</a>:</h4>
<p>that's for <em>reporting</em> I thought</p>



<a name="210520761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520761">(Sep 18 2020 at 13:50)</a>:</h4>
<p>not where the lints are actually run</p>



<a name="210520774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520774">(Sep 18 2020 at 13:50)</a>:</h4>
<p>not sure what you mean</p>



<a name="210520783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520783">(Sep 18 2020 at 13:50)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/master/compiler/rustc_lint/src/context.rs#L59-L63">https://github.com/rust-lang/rust/blob/master/compiler/rustc_lint/src/context.rs#L59-L63</a></p>



<a name="210520824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520824">(Sep 18 2020 at 13:51)</a>:</h4>
<p>oh hmm</p>



<a name="210520844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210520844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210520844">(Sep 18 2020 at 13:51)</a>:</h4>
<p>let me look at this after class</p>



<a name="210521793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210521793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210521793">(Sep 18 2020 at 13:57)</a>:</h4>
<p>ok it looks like <code>late_lint_pass_crate</code> is the one I'm interested in</p>



<a name="210521876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210521876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210521876">(Sep 18 2020 at 13:58)</a>:</h4>
<p>and I should make sure the number of hard errors reported is the same both before and after</p>



<a name="210521909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210521909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210521909">(Sep 18 2020 at 13:58)</a>:</h4>
<p>well, all of them I think?</p>



<a name="210521940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210521940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210521940">(Sep 18 2020 at 13:58)</a>:</h4>
<p>obviously it's not 100% but this would give us some amount of confidence</p>



<a name="210522593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/lint%20avoidance/near/210522593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/lint.20avoidance.html#210522593">(Sep 18 2020 at 14:02)</a>:</h4>
<p>left a comment on the issue with the places I think are relevant</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
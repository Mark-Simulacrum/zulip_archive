<html>
<head><meta charset="utf-8"><title>toolstate breakage · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html">toolstate breakage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="192549957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192549957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192549957">(Apr 01 2020 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> can you test <code>git subtree push</code>?</p>



<a name="192550064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550064">(Apr 01 2020 at 15:54)</a>:</h4>
<p>sure</p>



<a name="192550078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550078">(Apr 01 2020 at 15:54)</a>:</h4>
<p>make a local change to <code>src/tools/clippy</code>, commit on an<code>oli-obk/rust</code> branch and push it to a branch on <code>oli-obk/rust-clippy</code></p>



<a name="192550130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550130">(Apr 01 2020 at 15:54)</a>:</h4>
<p>I want to see what the push commits look like compared to the original</p>



<a name="192550174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550174">(Apr 01 2020 at 15:55)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> bonus: make rustc changes in the same commit, so we see the splitting out of those</p>



<a name="192550223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550223">(Apr 01 2020 at 15:55)</a>:</h4>
<p>I think this is useful for demonstrating the workflow and making sure we know what it is before merging anything</p>



<a name="192550790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550790">(Apr 01 2020 at 15:59)</a>:</h4>
<p>I'm watching some number count up</p>



<a name="192550811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550811">(Apr 01 2020 at 15:59)</a>:</h4>
<p>not sure what it does</p>



<a name="192550822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550822">(Apr 01 2020 at 15:59)</a>:</h4>
<p>but it's at 3k now</p>



<a name="192550937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192550937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192550937">(Apr 01 2020 at 16:00)</a>:</h4>
<p>interesting :D</p>



<a name="192553261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192553261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192553261">(Apr 01 2020 at 16:16)</a>:</h4>
<div class="codehilite"><pre><span></span>~/P/r/r/w/rust4&gt; time git subtree push git@github.com:rust-lang/rust-clippy.git test_subtree --prefix src/tools/clippy
git push using:  git@github.com:rust-lang/rust-clippy.git test_subtree
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 8 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 344 bytes | 344.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
remote:
remote: Create a pull request for &#39;test_subtree&#39; on GitHub by visiting:
remote:      https://github.com/rust-lang/rust-clippy/pull/new/test_subtree
remote:
To github.com:rust-lang/rust-clippy.git
 * [new branch]              8921de4666bc959d9201679d15d91eea9155ca35 -&gt; test_subtree
73.48user 106.07system 3:01.20elapsed 99%CPU (0avgtext+0avgdata 149376maxresident)k
576inputs+64776outputs (0major+40951273minor)pagefaults 0swaps
</pre></div>



<a name="192553278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192553278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192553278">(Apr 01 2020 at 16:16)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust-clippy/compare/test_subtree?expand=1" title="https://github.com/rust-lang/rust-clippy/compare/test_subtree?expand=1">https://github.com/rust-lang/rust-clippy/compare/test_subtree?expand=1</a></p>



<a name="192553764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192553764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192553764">(Apr 01 2020 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> can you push the Rust counterpart to <code>oli-obk/rust</code>?</p>



<a name="192553843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192553843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192553843">(Apr 01 2020 at 16:21)</a>:</h4>
<p>there's no counterpart I think?</p>



<a name="192553866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192553866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192553866">(Apr 01 2020 at 16:21)</a>:</h4>
<p>no, I mean the commit you made locally</p>



<a name="192553873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192553873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192553873">(Apr 01 2020 at 16:21)</a>:</h4>
<p>oh</p>



<a name="192554027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192554027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192554027">(Apr 01 2020 at 16:22)</a>:</h4>
<p><a href="https://github.com/oli-obk/rust/pull/new/subrepo_experiments" title="https://github.com/oli-obk/rust/pull/new/subrepo_experiments">https://github.com/oli-obk/rust/pull/new/subrepo_experiments</a></p>



<a name="192554102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192554102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192554102">(Apr 01 2020 at 16:23)</a>:</h4>
<p><a href="https://github.com/oli-obk/rust/commits/subrepo_experiments" title="https://github.com/oli-obk/rust/commits/subrepo_experiments">https://github.com/oli-obk/rust/commits/subrepo_experiments</a><br>
<a href="https://github.com/rust-lang/rust-clippy/commits/test_subtree" title="https://github.com/rust-lang/rust-clippy/commits/test_subtree">https://github.com/rust-lang/rust-clippy/commits/test_subtree</a></p>



<a name="192554138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192554138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192554138">(Apr 01 2020 at 16:23)</a>:</h4>
<p><a href="https://github.com/oli-obk/rust/commit/ba54e7645904ba0e8ea5ef0d28858f8ed2114643" title="https://github.com/oli-obk/rust/commit/ba54e7645904ba0e8ea5ef0d28858f8ed2114643">https://github.com/oli-obk/rust/commit/ba54e7645904ba0e8ea5ef0d28858f8ed2114643</a><br>
<a href="https://github.com/rust-lang/rust-clippy/commit/8921de4666bc959d9201679d15d91eea9155ca35" title="https://github.com/rust-lang/rust-clippy/commit/8921de4666bc959d9201679d15d91eea9155ca35">https://github.com/rust-lang/rust-clippy/commit/8921de4666bc959d9201679d15d91eea9155ca35</a></p>



<a name="192554210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192554210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192554210">(Apr 01 2020 at 16:24)</a>:</h4>
<p>so commits are rewritten and hashes change, meaning "subtree merge commits" only exist for pulling</p>



<a name="192554252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192554252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192554252">(Apr 01 2020 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> ^^ push experiment successful, we learnt something :)</p>



<a name="192554277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192554277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192554277">(Apr 01 2020 at 16:24)</a>:</h4>
<p>or confirmed, rather</p>



<a name="192554339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192554339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192554339">(Apr 01 2020 at 16:25)</a>:</h4>
<p>I think this is the correct thing, since we don't want to bloat the separate repos with full rust-lang/rust commits</p>



<a name="192556305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192556305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192556305">(Apr 01 2020 at 16:38)</a>:</h4>
<p>I dont know what to look at^^</p>



<a name="192556359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192556359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192556359">(Apr 01 2020 at 16:39)</a>:</h4>
<p>so that was a "subtree push"?</p>



<a name="192556774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192556774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192556774">(Apr 01 2020 at 16:42)</a>:</h4>
<p>yupp</p>



<a name="192556828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192556828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192556828">(Apr 01 2020 at 16:42)</a>:</h4>
<p><code>git subtree push</code> rewrote the commit to exclude the change outside of the directory, and adjusted the paths</p>



<a name="192557509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557509">(Apr 01 2020 at 16:47)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="192557551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557551">(Apr 01 2020 at 16:47)</a>:</h4>
<p>and then it becomes a normal PR on the target side, merged like anything else (conflict resolution etc)?</p>



<a name="192557611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557611">(Apr 01 2020 at 16:48)</a>:</h4>
<p>I believe so</p>



<a name="192557626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557626">(Apr 01 2020 at 16:48)</a>:</h4>
<p>without having metadata, how does "subtree pull" figured out which part to merge?</p>



<a name="192557644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557644">(Apr 01 2020 at 16:48)</a>:</h4>
<p><code>git</code> doesn't need metadata either</p>



<a name="192557681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557681">(Apr 01 2020 at 16:48)</a>:</h4>
<p>I guess since it has the upstream commit IDs it can work with those? it has to make sure not to be confused by its own synced pushed stuff though</p>



<a name="192557687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557687">(Apr 01 2020 at 16:48)</a>:</h4>
<p>or do you mean the prefix? I believe you still need to specify that?</p>



<a name="192557735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557735">(Apr 01 2020 at 16:49)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> <code>git</code> itself can merge identical changes in distinct commits</p>



<a name="192557823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557823">(Apr 01 2020 at 16:49)</a>:</h4>
<p>especially if the files are identical, they will be the same "object" (i.e. the files have the same hash, so they don't need merging)</p>



<a name="192557981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192557981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192557981">(Apr 01 2020 at 16:50)</a>:</h4>
<p>the hard part is telling <code>git</code> where the files are supposed to be, which <code>git subtree pull</code> apparently does via <code>git merge -Xsubtree</code></p>



<a name="192558296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192558296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192558296">(Apr 01 2020 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> can you try to <code>git subtree pull</code> the commit you pushed (on top of the local version of that commit), and push the resulting merge commit to another <code>oli-obk/rust</code> branch?</p>



<a name="192558344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192558344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192558344">(Apr 01 2020 at 16:53)</a>:</h4>
<p>if we want to be sure merges are straight-forward</p>



<a name="192558753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192558753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192558753">(Apr 01 2020 at 16:55)</a>:</h4>
<p>done</p>



<a name="192558918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192558918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192558918">(Apr 01 2020 at 16:56)</a>:</h4>
<p>do you never delete PR branches? damn there's a lot of them</p>



<a name="192558943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192558943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192558943">(Apr 01 2020 at 16:56)</a>:</h4>
<p>oh you used the same branch again?</p>



<a name="192558953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192558953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192558953">(Apr 01 2020 at 16:56)</a>:</h4>
<p>yea</p>



<a name="192558982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192558982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192558982">(Apr 01 2020 at 16:57)</a>:</h4>
<p>so <code>git subtree</code> created this? <a href="https://github.com/oli-obk/rust/commit/b4d4a85affdb1114ed2420299eaa6fa244f83500" title="https://github.com/oli-obk/rust/commit/b4d4a85affdb1114ed2420299eaa6fa244f83500">https://github.com/oli-obk/rust/commit/b4d4a85affdb1114ed2420299eaa6fa244f83500</a></p>



<a name="192559011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559011">(Apr 01 2020 at 16:57)</a>:</h4>
<p>i don't delete branches, because once I realized I had so many, they were too many to clean up</p>



<a name="192559016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559016">(Apr 01 2020 at 16:57)</a>:</h4>
<p>and it just succeeded automatically?</p>



<a name="192559026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559026">(Apr 01 2020 at 16:57)</a>:</h4>
<p>yes</p>



<a name="192559103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559103">(Apr 01 2020 at 16:58)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> if you give me write access I can spend a few hours going through your merged PRs and removing them :P</p>



<a name="192559159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559159">(Apr 01 2020 at 16:58)</a>:</h4>
<p>lol, I can just run a script for merged PRs</p>



<a name="192559174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559174">(Apr 01 2020 at 16:58)</a>:</h4>
<p>okay yeah and the merge commit shows up as 0 changes because the two parents are identical</p>



<a name="192559195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559195">(Apr 01 2020 at 16:58)</a>:</h4>
<p>I wish GitHub could show that one of the parents is actually in a sub-directory :D</p>



<a name="192559234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559234">(Apr 01 2020 at 16:58)</a>:</h4>
<p>because then it would feel like a 100% git feature</p>



<a name="192559265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559265">(Apr 01 2020 at 16:59)</a>:</h4>
<p>open an issue against github? :P</p>



<a name="192559289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559289">(Apr 01 2020 at 16:59)</a>:</h4>
<p>I never know where to do that :P</p>



<a name="192559324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559324">(Apr 01 2020 at 16:59)</a>:</h4>
<p>the other day I was bothered by their code blocks CSS breaking Unicode Box-Drawing characters</p>



<a name="192559639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559639">(Apr 01 2020 at 17:01)</a>:</h4>
<p>There is <a href="https://github.community/" title="https://github.community/">https://github.community/</a> and <a href="https://support.github.com/contact" title="https://support.github.com/contact">https://support.github.com/contact</a></p>



<a name="192559723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/192559723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#192559723">(Apr 01 2020 at 17:01)</a>:</h4>
<p>the latter IME can take months to get a reply :(</p>



<a name="196051595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196051595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196051595">(May 02 2020 at 13:28)</a>:</h4>
<p>Looks like this is actually finally landing <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="196051657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196051657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196051657">(May 02 2020 at 13:29)</a>:</h4>
<p>one question: AFAIK the <a href="https://thanks.rust-lang.org/rust/all-time/" title="https://thanks.rust-lang.org/rust/all-time/">"contributors" page</a> for rust counts commit across repositories to count "contributions" of people. will this mean that commits get counted twice because of the <code>subtree pull</code> PRs? will <span class="user-mention" data-user-id="124288">@oli</span> be leading that list forever because of 80k clippy commits <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span> ?</p>



<a name="196053394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196053394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196053394">(May 02 2020 at 14:09)</a>:</h4>
<p><code>git subtree</code> seems to preserve the original author <strong>and</strong> committer, so no.</p>
<p>Edit: ah, you meant one commit in the clippy repo, and one created by <code>git subtree</code> in the rustc repo.</p>



<a name="196055342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196055342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196055342">(May 02 2020 at 14:59)</a>:</h4>
<p>hm, I think we count by commit sha</p>



<a name="196055345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196055345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196055345">(May 02 2020 at 14:59)</a>:</h4>
<p>in theory should not actually cause counts to diverge much</p>



<a name="196055408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196055408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196055408">(May 02 2020 at 15:00)</a>:</h4>
<p>since the commits aren't authored by oli (uniquely) and we already counted all clippy commits</p>



<a name="196092903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196092903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196092903">(May 03 2020 at 09:11)</a>:</h4>
<p>if it dedups commits that would do it yes</p>



<a name="196092904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196092904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196092904">(May 03 2020 at 09:11)</a>:</h4>
<p>well, mostly</p>



<a name="196092912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/toolstate%20breakage/near/196092912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/toolstate.20breakage.html#196092912">(May 03 2020 at 09:11)</a>:</h4>
<p><code>sutree push</code> will create sync commits in the tool repo that will have a different commit ID, I think</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
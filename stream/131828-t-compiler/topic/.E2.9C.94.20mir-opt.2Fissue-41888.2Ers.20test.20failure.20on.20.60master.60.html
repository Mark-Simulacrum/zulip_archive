<html>
<head><meta charset="utf-8"><title>✔ mir-opt/issue-41888.rs test failure on `master` · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html">✔ mir-opt/issue-41888.rs test failure on `master`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264947228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947228">(Dec 15 2021 at 00:04)</a>:</h4>
<p>It would be a pretty awful experience, as you don't have enough memory to do more than a tiny amount of parallel compilation</p>



<a name="264947302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947302">(Dec 15 2021 at 00:04)</a>:</h4>
<p>You probably can't even build many crates with optimizations enabled</p>



<a name="264947321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947321">(Dec 15 2021 at 00:04)</a>:</h4>
<p>exactly</p>



<a name="264947353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947353">(Dec 15 2021 at 00:05)</a>:</h4>
<p>And good luck with linking</p>



<a name="264947493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947493">(Dec 15 2021 at 00:06)</a>:</h4>
<p>Do we have statistics on how often a 32-bit compiler is downloaded (whatever endpoint rustup hits)?</p>



<a name="264947660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947660">(Dec 15 2021 at 00:08)</a>:</h4>
<p>distro compilers have to run natively, at least in Fedora and RHEL, but I think in most</p>



<a name="264947725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947725">(Dec 15 2021 at 00:09)</a>:</h4>
<p>and yes it's a pain, often OOMing, but disabling debuginfo and lto on those is usually enough to get by</p>



<a name="264947761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947761">(Dec 15 2021 at 00:09)</a>:</h4>
<p>Ok... looks like this one <em>is</em> my fault</p>



<a name="264947776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947776">(Dec 15 2021 at 00:09)</a>:</h4>
<p>I may have modified a copy of fxhash in <code>.cargo</code> and then forgotten about it <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="264947832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947832">(Dec 15 2021 at 00:10)</a>:</h4>
<p>Sorry for the noise</p>



<a name="264947844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947844">(Dec 15 2021 at 00:10)</a>:</h4>
<p>Though I'm glad <span class="user-mention" data-user-id="125294">@Aaron Hill</span> managed to get something useful out of it by filing an issue</p>



<a name="264947956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947956">(Dec 15 2021 at 00:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> has marked this topic as resolved.</p>



<a name="264951949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/%E2%9C%94%20mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264951949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/.E2.9C.94.20mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264951949">(Dec 15 2021 at 01:01)</a>:</h4>
<p>Makes me wonder if we already have some kind of tool that checks the crate sources and verifies them against the <code>.crate</code> file somehow (make sure that there are no  local modifications) <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
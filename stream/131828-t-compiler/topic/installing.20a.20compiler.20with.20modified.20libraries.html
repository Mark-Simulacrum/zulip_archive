<html>
<head><meta charset="utf-8"><title>installing a compiler with modified libraries · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html">installing a compiler with modified libraries</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="244448256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244448256" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Huszagh (He/Him) <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244448256">(Jun 30 2021 at 16:09)</a>:</h4>
<p>Quick question: I'm about to submit the PR for the float parsing changes, but I wanted a quick way to install a compiler using the modified core libraries. I'm guessing the stage 1 compiler is what I want? The code I want to run <a href="https://github.com/rust-lang/rust/blob/master/src/etc/test-float-parse/runtests.py">is</a>. This relies on rustc linking to the core library.</p>
<p>I'm currently doing in a Docker image:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">.</span><span class="o">/</span><span class="n">x</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="w"></span>
<span class="p">.</span><span class="o">/</span><span class="n">x</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="w"></span>
</code></pre></div>
<p>Is this the correct approach?</p>



<a name="244449129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244449129" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244449129">(Jun 30 2021 at 16:14)</a>:</h4>
<p><span class="user-mention" data-user-id="153718">@Alexander Huszagh (He/Him)</span> <a href="https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html#creating-a-rustup-toolchain">https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html#creating-a-rustup-toolchain</a></p>



<a name="244449196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244449196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244449196">(Jun 30 2021 at 16:15)</a>:</h4>
<p>(not sure how docker is related)</p>



<a name="244449486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244449486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Huszagh (He/Him) <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244449486">(Jun 30 2021 at 16:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/failed.20to.20get.20crate.20data/near/244449129">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="153718">Alexander Huszagh (He/Him)</span> <a href="https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html#creating-a-rustup-toolchain">https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html#creating-a-rustup-toolchain</a></p>
</blockquote>
<p>Right, I've read that. I'm unclear on stuff, which is why I'm asking.</p>



<a name="244449537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244449537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Huszagh (He/Him) <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244449537">(Jun 30 2021 at 16:17)</a>:</h4>
<p>docker is just a way so I don't have to modify my build environment. Just a way of isolating things.</p>



<a name="244449702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244449702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244449702">(Jun 30 2021 at 16:18)</a>:</h4>
<p>I am unsure what you're asking. I haven't personally run <code>runtests.py</code>. The way to get a local toolchain is with rustup like I linked, x.py install tends to be buggy IME</p>



<a name="244449863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244449863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Huszagh (He/Him) <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244449863">(Jun 30 2021 at 16:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/failed.20to.20get.20crate.20data/near/244449702">said</a>:</p>
<blockquote>
<p>I am unsure what you're asking. I haven't personally run <code>runtests.py</code>. The way to get a local toolchain is with rustup like I linked, x.py install tends to be buggy IME</p>
</blockquote>
<p>I'm not using stock rustc though (ideally I would). I want a custom version of the core libraries, to test my changes that is not built-in to the unittests.</p>



<a name="244449975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244449975" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244449975">(Jun 30 2021 at 16:20)</a>:</h4>
<p>The link I sent is for a custom (local) rustc.</p>



<a name="244450148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244450148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Huszagh (He/Him) <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244450148">(Jun 30 2021 at 16:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/failed.20to.20get.20crate.20data/near/244449975">said</a>:</p>
<blockquote>
<p>The link I sent is for a custom (local) rustc.</p>
</blockquote>
<p>I have read it numerous times. That is why I am asking the questions, because I am unclear on various specifics. I would rather not build a complete rebuild, if possible.</p>



<a name="244450168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244450168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Huszagh (He/Him) <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244450168">(Jun 30 2021 at 16:22)</a>:</h4>
<p>If the answer is "no", that's fine.</p>



<a name="244450220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244450220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244450220">(Jun 30 2021 at 16:22)</a>:</h4>
<p>I still don't understand what question you're asking.</p>



<a name="244450300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244450300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244450300">(Jun 30 2021 at 16:22)</a>:</h4>
<p>Running those commands won't cause a rebuild.</p>



<a name="244450778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244450778" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244450778">(Jun 30 2021 at 16:26)</a>:</h4>
<p>x.py install <em>may</em> work, but I wouldn't recommend it.</p>



<a name="244453524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244453524" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Huszagh (He/Him) <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244453524">(Jun 30 2021 at 16:48)</a>:</h4>
<p>I think I've gotten it to work.</p>



<a name="244526425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/installing%20a%20compiler%20with%20modified%20libraries/near/244526425" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/installing.20a.20compiler.20with.20modified.20libraries.html#244526425">(Jul 01 2021 at 07:05)</a>:</h4>
<p>(changed the topic as this accidentally ended up in an unrelated one)</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
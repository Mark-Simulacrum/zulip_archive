<html>
<head><meta charset="utf-8"><title>RLA survey · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html">RLA survey</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="220253593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220253593" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220253593">(Dec 17 2020 at 15:02)</a>:</h4>
<p>hello compiler team! I'm looking at implementing auto-hding for rust-log-analyzer comments!</p>



<a name="220253643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220253643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220253643">(Dec 17 2020 at 15:02)</a>:</h4>
<p>and I'm wondering which behavior y'all would prefer</p>



<a name="220253727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220253727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220253727">(Dec 17 2020 at 15:03)</a>:</h4>
<p>/poll rust-log-analyzer auto-hide behavior</p>



<a name="220310052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220310052" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220310052">(Dec 17 2020 at 22:08)</a>:</h4>
<p>Btw, does auto-hiding mean the feature where you can hide a comment as outdated, resolved, etc.? So rust-log-analyzer would mark its comments as outdated when one of these things happened?</p>



<a name="220381969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220381969" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220381969">(Dec 18 2020 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="307537">@Camelid</span> yes!</p>



<a name="220419730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220419730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220419730">(Dec 18 2020 at 19:45)</a>:</h4>
<p>It seems like the fairly unanimous vote is to auto-hide when a new failure is posted or a build succeeds – basically, whenever the CI status changes.</p>



<a name="220503555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220503555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220503555">(Dec 20 2020 at 05:09)</a>:</h4>
<p>I want to say a big thank you to <span class="user-mention" data-user-id="121055">@Pietro Albini</span> for giving rust-log-analyzer love! It just <a href="https://github.com/rust-lang/rust/pull/80217#issuecomment-748563531">helped me in a PR</a> and correctly pointed out the spot in the logs that shows the problem!</p>



<a name="220504665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220504665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220504665">(Dec 20 2020 at 05:42)</a>:</h4>
<p>It just helped me again :)</p>
<p>Though there seems to be a bug, because one of the lines <a href="https://github.com/rust-lang/rust/pull/80217#issuecomment-748566579">was printed twice</a>:</p>
<div class="codehilite"><pre><span></span><code>error[E0277]: `std::result::Result&lt;String, std::io::Error&gt;` doesn&#39;t implement `std::fmt::Display`
  |
7 |     println!(&quot;{}&quot;, stdin);
7 |     println!(&quot;{}&quot;, stdin);
  |                    ^^^^^ `std::result::Result&lt;String, std::io::Error&gt;` cannot be formatted with the default formatter
  |
  = help: the trait `std::fmt::Display` is not implemented for `std::result::Result&lt;String, std::io::Error&gt;`
  = note: in format strings you may be able to use `{:?}` (or {:#?} for pretty-print) instead
  = note: required by `std::fmt::Display::fmt`
  = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)
error: aborting due to 3 previous errors
</code></pre></div>



<a name="220509785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220509785" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220509785">(Dec 20 2020 at 08:40)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="307537">@Camelid</span> <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="220509791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220509791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220509791">(Dec 20 2020 at 08:40)</a>:</h4>
<p>on PRs is still a bit rough because I probably need to tweak the learning a bit to also learn from successful PR builds</p>



<a name="220509793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220509793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220509793">(Dec 20 2020 at 08:40)</a>:</h4>
<p>dunno why it duplicated that line tho</p>



<a name="220537391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220537391" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220537391">(Dec 20 2020 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/131828-t-compiler/topic/RLA.20survey/near/220509791">said</a>:</p>
<blockquote>
<p>on PRs is still a bit rough because I probably need to tweak the learning a bit to also learn from successful PR builds</p>
</blockquote>
<p>You mean it's rougher on CI as opposed to bors?</p>



<a name="220676835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/220676835" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#220676835">(Dec 22 2020 at 10:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/131828-t-compiler/topic/RLA.20survey/near/220509793">said</a>:</p>
<blockquote>
<p>dunno why it duplicated that line tho</p>
</blockquote>
<p>It duplicated a few lines <a href="https://github.com/rust-lang/rust/pull/80278#issuecomment-749274368">here</a> too :D</p>



<a name="221063030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221063030" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221063030">(Dec 28 2020 at 14:11)</a>:</h4>
<p>whelp, the github API is making it <em>really</em> hard to detect when a PR build succeeded, and to then detect which PR it actually affected</p>



<a name="221063251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221063251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221063251">(Dec 28 2020 at 14:14)</a>:</h4>
<p>GitHub Actions doesn't have a single check that says "the whole build finished", so we'd have to iterate over all the jobs in the build and ensure they all passed. That can't be done reliably while processing a webhook though thanks to eventual consistency: the GitHub Actions API takes a bit to update its contents, and in my testing most of the times it's not up to date when processing webhooks.</p>



<a name="221063382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221063382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221063382">(Dec 28 2020 at 14:16)</a>:</h4>
<p>To add yet another problem on top of that, webhooks don't provide the pull request information <a href="https://docs.github.com/en/free-pro-team@latest/developers/webhooks-and-events/webhook-events-and-payloads#check_run">if the pull request comes from a fork</a>, and the way we currently use to detect it to post error messages burns through the rate limit fast.</p>



<a name="221063402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221063402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221063402">(Dec 28 2020 at 14:17)</a>:</h4>
<p>I might just implement hide-on-push, sorry y'all :(</p>



<a name="221063516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221063516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221063516">(Dec 28 2020 at 14:18)</a>:</h4>
<p>hide on push would get 95% of what I'd want anyway :)</p>



<a name="221064656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221064656" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221064656">(Dec 28 2020 at 14:36)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> here you go then! <a href="https://github.com/rust-lang/rust-log-analyzer/pull/56">https://github.com/rust-lang/rust-log-analyzer/pull/56</a></p>



<a name="221086322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221086322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221086322">(Dec 28 2020 at 19:45)</a>:</h4>
<p>auto-hiding landed <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="221221728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221221728" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221221728">(Dec 30 2020 at 15:50)</a>:</h4>
<p>Was auto-hiding deployed? I force-pushed on <a href="https://github.com/rust-lang/rust/issues/80513">#80513</a> after a failure, and RLA didn't hide its comment</p>



<a name="221261639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221261639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221261639">(Dec 31 2020 at 01:31)</a>:</h4>
<p>It didn't work for me either: <a href="https://github.com/rust-lang/rust/pull/80368#issuecomment-752801022">https://github.com/rust-lang/rust/pull/80368#issuecomment-752801022</a></p>



<a name="221261646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/221261646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#221261646">(Dec 31 2020 at 01:31)</a>:</h4>
<p>(I had to manually do it.)</p>



<a name="223236891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/RLA%20survey/near/223236891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/RLA.20survey.html#223236891">(Jan 19 2021 at 14:54)</a>:</h4>
<p>This topic was moved by <span class="user-mention silent" data-user-id="121055">Pietro Albini</span> to <a class="stream-topic" data-stream-id="242791" href="/#narrow/stream/242791-t-infra/topic/rla.20auto-hiding.20not.20working">#t-infra &gt; rla auto-hiding not working</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
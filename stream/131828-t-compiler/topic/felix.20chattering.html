<html>
<head><meta charset="utf-8"><title>felix chattering · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html">felix chattering</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="242889272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242889272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242889272">(Jun 16 2021 at 14:32)</a>:</h4>
<p>I feel like my eyes must be deceiving me, and I had to share. I couldn’t bring myself to allocate a topic describing the phenomenon that I am witnessing, thus the strange topic here</p>



<a name="242889316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242889316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242889316">(Jun 16 2021 at 14:32)</a>:</h4>
<p>I’m trying to bisect something, and I hit upon this commit: <a href="https://github.com/rust-lang/rust/commit/ec38ea1ac1eac8efad1880fe33c49d65b8c4591c">ec38ea1ac1eac8efad1880fe33c49d65b8c4591c</a></p>



<a name="242889375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242889375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242889375">(Jun 16 2021 at 14:33)</a>:</h4>
<p>I was utterly shocked to attempt a build there, and discover … there’s no <code>x.py</code> in the root directory</p>



<a name="242889544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242889544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242889544">(Jun 16 2021 at 14:34)</a>:</h4>
<p>And yet when I do <code>git history</code> on <code>x.py</code> on the HEAD mainline, it seems like the history is fine; I don’t see any mention of the file getting deleted in recent times (i.e. this year)</p>



<a name="242889568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242889568" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242889568">(Jun 16 2021 at 14:34)</a>:</h4>
<p>am I misunderstanding how to use <code>git</code> to investigate something like this?</p>



<a name="242889847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242889847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242889847">(Jun 16 2021 at 14:36)</a>:</h4>
<p>that's a clippy commit, I think</p>



<a name="242889862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242889862" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242889862">(Jun 16 2021 at 14:36)</a>:</h4>
<p>so it's part of the subtree</p>



<a name="242890041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242890041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242890041">(Jun 16 2021 at 14:37)</a>:</h4>
<p>hmm</p>



<a name="242890134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242890134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242890134">(Jun 16 2021 at 14:38)</a>:</h4>
<p>I find this super-confusing</p>



<a name="242890163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242890163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242890163">(Jun 16 2021 at 14:38)</a>:</h4>
<p>I’m sure its something wrong with my mental model of git/github</p>



<a name="242890227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242890227" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242890227">(Jun 16 2021 at 14:39)</a>:</h4>
<p>but the fact that “Browse files” on a commit on rust-lang/rust can end up in a subtree</p>



<a name="242890284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242890284" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242890284">(Jun 16 2021 at 14:39)</a>:</h4>
<p>well, anyway, what’s the right way to <code>git bisect</code> in this scenario then? I.e. to focus solely on the commits on <code>rust-lang/rust</code> itself?</p>



<a name="242892479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892479" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892479">(Jun 16 2021 at 14:54)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> is this an artifact of the history “pollution” that you mentioned <a href="#narrow/stream/131828-t-compiler/topic/Do.20subtree.20syncs.20need.20to.20be.20reviewed.3F/near/215473855">here</a> in <a class="stream-topic" data-stream-id="131828" href="/#narrow/stream/131828-t-compiler/topic/Do.20subtree.20syncs.20need.20to.20be.20reviewed.3F">#t-compiler &gt; Do subtree syncs need to be reviewed?</a>  ?</p>



<a name="242892586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892586">(Jun 16 2021 at 14:55)</a>:</h4>
<p>yes, that's the cause of this</p>



<a name="242892599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892599" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892599">(Jun 16 2021 at 14:55)</a>:</h4>
<p>I'm not sure what the right way to git bisect is</p>



<a name="242892622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892622" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892622">(Jun 16 2021 at 14:55)</a>:</h4>
<p>in theory, such a commit could be 'git bisect skip'd</p>



<a name="242892717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892717" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892717">(Jun 16 2021 at 14:56)</a>:</h4>
<p>note that a commit is just some message and a "pointer" (via the hash) to a tree</p>



<a name="242892771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892771">(Jun 16 2021 at 14:56)</a>:</h4>
<p>and all the subtree commits are fully in-tree</p>



<a name="242892828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892828" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892828">(Jun 16 2021 at 14:57)</a>:</h4>
<p>This is super disruptful to the <code>git bisect</code> workflow, unless I’m missing some way to automatically skip the subtree commits</p>



<a name="242892847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892847">(Jun 16 2021 at 14:57)</a>:</h4>
<p>I think you can use <code>git bisect --first-parent</code> to force git to only use "bors" commits.</p>



<a name="242892887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892887">(Jun 16 2021 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> hmm, okay; I do use <code>—author=bors</code> already</p>



<a name="242892919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892919">(Jun 16 2021 at 14:57)</a>:</h4>
<p>(which doesn’t help here because bors is managing clippy)</p>



<a name="242892984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242892984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242892984">(Jun 16 2021 at 14:58)</a>:</h4>
<p>but your suggestion may be better</p>



<a name="242893092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242893092" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242893092">(Jun 16 2021 at 14:58)</a>:</h4>
<p><code>--first-parent</code> shouldn't catch commits like <a href="https://github.com/rust-lang/rust/commit/ec38ea1ac1eac8efad1880fe33c49d65b8c4591c">ec38ea1ac1eac8efad1880fe33c49d65b8c4591c</a></p>



<a name="242893140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242893140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242893140">(Jun 16 2021 at 14:59)</a>:</h4>
<p>A drawback I think is that it won't walk into a rollup PR.</p>



<a name="242893165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242893165" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242893165">(Jun 16 2021 at 14:59)</a>:</h4>
<p>that’s okay, <code>—author=bors</code> won’t either</p>



<a name="242893196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242893196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242893196">(Jun 16 2021 at 14:59)</a>:</h4>
<p>But if you can't determine a regression in a rollup from just reading it, then you can do a normal bisect on just the rollup.</p>



<a name="242893428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242893428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242893428">(Jun 16 2021 at 15:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120518">Eric Huss</span> <a href="#narrow/stream/131828-t-compiler/topic/felix.20chattering/near/242892847">said</a>:</p>
<blockquote>
<p>I think you can use <code>git bisect --first-parent</code> to force git to only use "bors" commits.</p>
</blockquote>
<p><code>—first-parent</code> works as an input to <code>git log</code>, but so far it is not working for any of the <code>git bisect</code> subcommands I have tried</p>



<a name="242893470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242893470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242893470">(Jun 16 2021 at 15:01)</a>:</h4>
<p>this is okay, I can manually look at the log. Its just unfortunate.</p>



<a name="242893716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242893716" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242893716">(Jun 16 2021 at 15:03)</a>:</h4>
<p>ah maybe I need a newer version of <code>git</code></p>



<a name="242895303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242895303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242895303">(Jun 16 2021 at 15:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/131828-t-compiler/topic/felix.20chattering/near/242889375">said</a>:</p>
<blockquote>
<p>I was utterly shocked to attempt a build there, and discover … there’s no <code>x.py</code> in the root directory</p>
</blockquote>
<p>I hit this the other week and was <em>extremely</em> confused until I ran <code>git log</code> and realized all the commits were to clippy. IIRC I just ran <code>git bisect skip</code> a bunch of times until I was back into rustc proper. </p>
<p>It would probably be good to document this somewhere (rustc dev guide perhaps) so have an easy reference to point contributors to.</p>



<a name="242895414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242895414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242895414">(Jun 16 2021 at 15:15)</a>:</h4>
<p>I’ll work on that. This <code>git bisect —first-parent</code> thing seems to work well, but my Linux distro didn’t have a sufficiently new <code>git</code> to use it out of the box, so it may be useful to document multiple patterns here.</p>



<a name="242895772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242895772" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242895772">(Jun 16 2021 at 15:17)</a>:</h4>
<p>Based on my completion history, it does look <code>git bisect skip</code> will eventually do the right thing and put you back into the regular repo history.</p>



<a name="242896819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/felix%20chattering/near/242896819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/felix.20chattering.html#242896819">(Jun 16 2021 at 15:23)</a>:</h4>
<p>ah, yea, <code>--first-parent</code> was added in 2.29 (released late 2020)</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
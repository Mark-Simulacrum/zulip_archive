<html>
<head><meta charset="utf-8"><title>MCVE reduction tooling - query-powered · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html">MCVE reduction tooling - query-powered</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273969109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/273969109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#273969109">(Mar 03 2022 at 13:06)</a>:</h4>
<p>I wonder if we could make the query system tell us what input was relevant for hitting a specific error or ICE. The query graph will resolve this down to the HIR level soon, but even without that we could at least know what items are needed</p>



<a name="273969928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/273969928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#273969928">(Mar 03 2022 at 13:13)</a>:</h4>
<p>do we know for what % of crashes that would/wouldn't work?</p>



<a name="273970062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/273970062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#273970062">(Mar 03 2022 at 13:14)</a>:</h4>
<p>I mean, if we use rustc to do it, we might run into bunch of situations where rustc bugs might prevent a successful reduction, no? <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span></p>



<a name="273973572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/273973572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#273973572">(Mar 03 2022 at 13:41)</a>:</h4>
<p><span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> true, it likely wouldn't work for incremental bugs</p>



<a name="274003148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/274003148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#274003148">(Mar 03 2022 at 17:00)</a>:</h4>
<p>We can almost.  When rustc ICEs, we already print a backtrace.  We have all the dependencies of each frame in memory.  These dependencies's dependencies need to be read back from disk.  This can go back to the hir_owner and hir_owner_nodes queries.</p>



<a name="274003277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/274003277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#274003277">(Mar 03 2022 at 17:00)</a>:</h4>
<p>The information is available, but it may need sizeable impl work.</p>



<a name="274030301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/274030301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#274030301">(Mar 03 2022 at 19:58)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span>  so like a core-dump/representation of the code that rust was reading at the time of crashing?</p>



<a name="274033644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/MCVE%20reduction%20tooling%20-%20query-powered/near/274033644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/MCVE.20reduction.20tooling.20-.20query-powered.html#274033644">(Mar 03 2022 at 20:20)</a>:</h4>
<p>Well, as a first step just the ids of the things that led to it. But we could possibly go as far as figuring out the spans that are relevant and giving those in a format that rustfix can use to remove the rest</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>design meeting 2019-10-18 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html">design meeting 2019-10-18</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="178475282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475282">(Oct 18 2019 at 13:49)</a>:</h4>
<p>Just a reminder to <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> : we will be starting this week's design meeting in this topic area in about 11 minutes</p>



<a name="178475358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475358">(Oct 18 2019 at 13:50)</a>:</h4>
<p>Do we have a link to agenda handy?</p>



<a name="178475455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475455" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475455">(Oct 18 2019 at 13:50)</a>:</h4>
<p>This weeks topic is debuginfo, or more generally: What resources can we devote to supporting the debugging experience? If those resources are insufficient, can/should we move debuginfo support extensions out-of-tree</p>



<a name="178475512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475512">(Oct 18 2019 at 13:51)</a>:</h4>
<p><a href="https://github.com/rust-lang/compiler-team/issues/186" target="_blank" title="https://github.com/rust-lang/compiler-team/issues/186">compiler-team#186</a> was the proposal for this meeting</p>



<a name="178475542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475542">(Oct 18 2019 at 13:51)</a>:</h4>
<p>the closest thing we have to an agenda is the gist linked there: <a href="https://gist.github.com/pnkfelix/a9f86000840701d8474daadcef43e0e0" target="_blank" title="https://gist.github.com/pnkfelix/a9f86000840701d8474daadcef43e0e0">https://gist.github.com/pnkfelix/a9f86000840701d8474daadcef43e0e0</a></p>



<a name="178475579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475579">(Oct 18 2019 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> maybe we can fit more than one topic in the meeting slot? debuginfo might not take so much time (famous last words)</p>



<a name="178475671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475671">(Oct 18 2019 at 13:52)</a>:</h4>
<p>I have mixed feelings about adding new topics on the fly; in theory, people may want advance notice if a topic is going to be discussed.</p>



<a name="178475687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475687">(Oct 18 2019 at 13:52)</a>:</h4>
<p>but I suppose there is nothing stopping us from having informal chats in whatever time remains</p>



<a name="178475709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475709">(Oct 18 2019 at 13:53)</a>:</h4>
<p>I just want to be wary of making <em>decisions</em> about other topics during a just-in-time scheduled discussion</p>



<a name="178475710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475710">(Oct 18 2019 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> fair point, maybe we can pick some topic that requires less read-up time?</p>



<a name="178475711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475711">(Oct 18 2019 at 13:53)</a>:</h4>
<p>I think we should prefer to not formally add them and certainly not ahead of time</p>



<a name="178475741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475741">(Oct 18 2019 at 13:53)</a>:</h4>
<p>Debuginfo sounds like a complex topic that we have no good answers for, too :)</p>



<a name="178475743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475743">(Oct 18 2019 at 13:53)</a>:</h4>
<blockquote>
<p>I think we should prefer to not formally add them and certainly not ahead of time</p>
</blockquote>
<p>I'm sorry, is this a statement in favor of more JIT-scheduling of topics?</p>



<a name="178475776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475776">(Oct 18 2019 at 13:54)</a>:</h4>
<p>(because that's how it  parses in my brain.)</p>



<a name="178475820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475820" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475820">(Oct 18 2019 at 13:54)</a>:</h4>
<p>I think Mark is saying the opposite <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="178475879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475879" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475879">(Oct 18 2019 at 13:55)</a>:</h4>
<p>I believe we want to mostly discuss maintainership of debuginfo tho today?</p>



<a name="178475883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475883">(Oct 18 2019 at 13:55)</a>:</h4>
<p>I'm saying that if we are to discuss other things today we should do so when we get there</p>



<a name="178475895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475895" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475895">(Oct 18 2019 at 13:55)</a>:</h4>
<p>Not decide now what we may or may not discuss</p>



<a name="178475898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475898" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475898">(Oct 18 2019 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> seems obviously right :P</p>



<a name="178475904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475904" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475904">(Oct 18 2019 at 13:55)</a>:</h4>
<p>Not decide now what we may or may not discuss</p>



<a name="178475905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475905" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475905">(Oct 18 2019 at 13:55)</a>:</h4>
<p>And in either case not make decisions</p>



<a name="178475917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475917">(Oct 18 2019 at 13:55)</a>:</h4>
<p>Not decide now what we may or may not discuss</p>



<a name="178475918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475918">(Oct 18 2019 at 13:55)</a>:</h4>
<p>And in either case not make decisions</p>



<a name="178475979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475979">(Oct 18 2019 at 13:56)</a>:</h4>
<p>Gah zulip why</p>



<a name="178475982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178475982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178475982">(Oct 18 2019 at 13:56)</a>:</h4>
<p>(imo the point of design meetings is mostly to just have a lot of compiler devs present so we can think more collaboratively about a larger change)</p>



<a name="178476253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476253" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476253">(Oct 18 2019 at 13:59)</a>:</h4>
<p>I think it's also important that people have time to prepare for the discussion. Otherwise we just end up with most of the team watching the stream as a few people familiar with the topic talk.</p>



<a name="178476377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476377">(Oct 18 2019 at 14:00)</a>:</h4>
<p>okay so lets get started</p>



<a name="178476420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476420" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476420">(Oct 18 2019 at 14:01)</a>:</h4>
<p>as noted in the <a href="https://gist.github.com/pnkfelix/a9f86000840701d8474daadcef43e0e0" target="_blank" title="https://gist.github.com/pnkfelix/a9f86000840701d8474daadcef43e0e0">gist</a>, there are two points raised there that can sort of act as drivers for the conversation today</p>



<a name="178476526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476526" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476526">(Oct 18 2019 at 14:02)</a>:</h4>
<p>namely, we have both bugs and Pull Requests related to debuginfo, but its not clear if we have anyone qualified (or at least willing to claim qualification, and/or time/resources available) to fix the bugs and/or review the PR's.</p>



<a name="178476588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476588" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476588">(Oct 18 2019 at 14:02)</a>:</h4>
<p>So the most obvious question to ask: What if I'm wrong? Do we have anyone here who feels like they could be the "debuginfo expert" ?</p>



<a name="178476775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476775" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476775">(Oct 18 2019 at 14:04)</a>:</h4>
<p>I wouldn't even know who to ask <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="178476791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476791">(Oct 18 2019 at 14:04)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/64343" target="_blank" title="https://github.com/rust-lang/rust/issues/64343">https://github.com/rust-lang/rust/issues/64343</a> in particular is causing me pain when doing local testing of rollups and other things</p>



<a name="178476801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476801">(Oct 18 2019 at 14:05)</a>:</h4>
<p>I would start by asking <span class="user-mention" data-user-id="124287">@mw</span> , myself</p>



<a name="178476813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476813">(Oct 18 2019 at 14:05)</a>:</h4>
<p>from my end, if we removed it, that would suffice (larger changes are not something I'm going to push for)</p>



<a name="178476834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476834" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476834">(Oct 18 2019 at 14:05)</a>:</h4>
<p>(is <span class="user-mention" data-user-id="124287">@mw</span> here today?)</p>



<a name="178476914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476914">(Oct 18 2019 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> sure, I can understand that. But I do think there's a broader question here that its useful to talk about</p>



<a name="178476937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476937">(Oct 18 2019 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> don't disagree <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="178476981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178476981" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178476981">(Oct 18 2019 at 14:06)</a>:</h4>
<p>okay well given the sound of crickets in response to my question above, I'm going to assume we don't have any local debuginfo experts</p>



<a name="178477000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477000">(Oct 18 2019 at 14:07)</a>:</h4>
<p>So my next question is: Would it be reasonable to move debuginfo support out of tree?</p>



<a name="178477024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477024" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477024">(Oct 18 2019 at 14:07)</a>:</h4>
<p>(i think of this as being similar to what we did with things like Emacs support, where we made a separate rust-mode.el repo)</p>



<a name="178477041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477041">(Oct 18 2019 at 14:07)</a>:</h4>
<p>But I am not 100% certain that the pro's there would outweigh the con's.</p>



<a name="178477124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477124">(Oct 18 2019 at 14:08)</a>:</h4>
<p>Could you maybe expand a bit on what that would mean? Would it just be the testing of debuginfo that gets moved out? Or generating debuginfo entirely?</p>



<a name="178477130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477130">(Oct 18 2019 at 14:08)</a>:</h4>
<p>In particular: I assume the debugger support is tied in some way to the details of internal representations of things like <code>Vec</code> and <code>&amp;[T]</code></p>



<a name="178477171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477171" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477171">(Oct 18 2019 at 14:09)</a>:</h4>
<blockquote>
<p>Could you maybe expand a bit on what that would mean? Would it just be the testing of debuginfo that gets moved out? Or generating debuginfo entirely?</p>
</blockquote>
<p>Ah, good point. there may be separate details here that I should make explicitly seprate</p>



<a name="178477246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477246">(Oct 18 2019 at 14:10)</a>:</h4>
<p>My understanding is that we support debuggers in a couple of different ways</p>



<a name="178477380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477380">(Oct 18 2019 at 14:10)</a>:</h4>
<p>hasn't <span class="user-mention" data-user-id="119009">@eddyb</span>  worked on debuginfo somewhat?</p>



<a name="178477384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477384">(Oct 18 2019 at 14:10)</a>:</h4>
<ol>
<li>we have symbol tables in our object files, 2. we generate DWARF files on the side, and 3. we have debugger support scripts (written I think in Python) that you load up from gdb or lldb to get better experience interacting with Rust code</li>
</ol>



<a name="178477447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477447" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477447">(Oct 18 2019 at 14:11)</a>:</h4>
<p>I think (1.) and (2.) are tightly coupled to the compiler. I do not know how one would support them out of tree.</p>



<a name="178477464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477464">(Oct 18 2019 at 14:12)</a>:</h4>
<p>so I guess the main thing I was thinking could move out of tree was (3.)</p>



<a name="178477546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477546">(Oct 18 2019 at 14:12)</a>:</h4>
<p>hi, sorry, got distracted for a bit</p>



<a name="178477550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477550">(Oct 18 2019 at 14:12)</a>:</h4>
<p>the unit tests in <code>src/test/debuginfo</code>, I <strong>assume</strong>, are exercising the combined effect of (1+2+3)</p>



<a name="178477671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477671">(Oct 18 2019 at 14:14)</a>:</h4>
<p>(I guess I should check that claim though.)</p>



<a name="178477701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477701" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477701">(Oct 18 2019 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> please do correct any mis-statements I may have made so far</p>



<a name="178477861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477861">(Oct 18 2019 at 14:16)</a>:</h4>
<ol>
<li>I'm always confused when people use "symbol" anywhere near debuginfo, because I think of "symbol names" as "linking identifiers"</li>
<li>
<p>we emit LLVM's API for DWARF, which can actually lower into CodeView for windows .pdb. we should figure out a more general API to allow cranelift support as well but what we have in-tree will likely remain there</p>
<ul>
<li>note that it's not tested explicitly, we should maybe fix that! <span class="user-mention" data-user-id="124287">@mw</span> had some ideas</li>
</ul>
</li>
<li>
<p>sure, we could move the gdb/lldb scripts out of tree if we need to</p>
</li>
</ol>



<a name="178477944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477944">(Oct 18 2019 at 14:17)</a>:</h4>
<p>Yeah, in my messages above, I have been mixing "debugger UX" with "debuginfo" in a pretty confusing manner</p>



<a name="178477983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178477983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178477983">(Oct 18 2019 at 14:18)</a>:</h4>
<p><em>inside</em> the compiler, "debuginfo" refers to what ultimately ends up as DWARF/CodeView, AFAIK</p>



<a name="178478034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478034">(Oct 18 2019 at 14:18)</a>:</h4>
<p>but "debuginfo" as a team/WG/general concern should include debuggers yeah</p>



<a name="178478065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478065" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478065">(Oct 18 2019 at 14:18)</a>:</h4>
<p>I guess you could have a "debugging WG/team" which wouldn't need to focus only on traditional debuginfo etc.</p>



<a name="178478087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478087">(Oct 18 2019 at 14:19)</a>:</h4>
<p>but in order to make a WG, we need to have people to populate it</p>



<a name="178478118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478118">(Oct 18 2019 at 14:19)</a>:</h4>
<p>some history: all of our debuginfo code was written by <span class="user-mention" data-user-id="124287">@mw</span></p>



<a name="178478120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478120">(Oct 18 2019 at 14:19)</a>:</h4>
<p>(and those people need to actually have time available, etc)</p>



<a name="178478158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478158">(Oct 18 2019 at 14:19)</a>:</h4>
<p>(at least initially, people have touched it over the years but it still is mainly <span class="user-mention" data-user-id="124287">@mw</span> as far as I'm aware)</p>



<a name="178478160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478160" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478160">(Oct 18 2019 at 14:19)</a>:</h4>
<p>yeah its sort of bad that <span class="user-mention" data-user-id="124287">@mw</span> is not here today; I had thought they said they were going to be available</p>



<a name="178478299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478299">(Oct 18 2019 at 14:21)</a>:</h4>
<p>one thing I've been trying to do since last year, and I almost have ready now, is starting to shape something less ad-hoc at the MIR level, so that we can lower it into codegen backend debuginfo the same way we do for code</p>



<a name="178478339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478339" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478339">(Oct 18 2019 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> can you elaborate further on this?</p>



<a name="178478353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478353">(Oct 18 2019 at 14:21)</a>:</h4>
<p>mw's status says "out sick"</p>



<a name="178478413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478413">(Oct 18 2019 at 14:22)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> ah, thanks for checking that</p>



<a name="178478437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478437" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478437">(Oct 18 2019 at 14:22)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> in particular: I don't want/need details about the particular design you are envisaging</p>



<a name="178478443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478443" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478443">(Oct 18 2019 at 14:22)</a>:</h4>
<p>oh speaking of which, there are two sides to debuginfo: program metadata (functions, types, etc.) and intra-function debuginfo (e.g. file/line/col info, where are user variables stored, etc.), mostly the latter would make sense to do anything for at the MIR level</p>



<a name="178478459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478459" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478459">(Oct 18 2019 at 14:22)</a>:</h4>
<p>but rather, what are the goals, like the advantages you are expecting?</p>



<a name="178478473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478473" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478473">(Oct 18 2019 at 14:23)</a>:</h4>
<p>'sec, I was getting a link to the PR <a href="https://github.com/rust-lang/rust/pull/56231" target="_blank" title="https://github.com/rust-lang/rust/pull/56231">https://github.com/rust-lang/rust/pull/56231</a></p>



<a name="178478506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478506">(Oct 18 2019 at 14:23)</a>:</h4>
<p>the main advantage IMO is that we can transform the resulting MIR-level debuginfo and preserve the information</p>



<a name="178478517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478517" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478517">(Oct 18 2019 at 14:23)</a>:</h4>
<p>hmmmmm</p>



<a name="178478520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478520">(Oct 18 2019 at 14:23)</a>:</h4>
<p>right now closure and generator debuginfo, for example, has a hardcoded shape and MIR inlining just can't work on them</p>



<a name="178478596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478596" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478596">(Oct 18 2019 at 14:24)</a>:</h4>
<p>because suddenly your closure value is no longer in the first argument or whatever</p>



<a name="178478643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478643">(Oct 18 2019 at 14:24)</a>:</h4>
<p>or if we want multiple user variables to be backed by the same MIR local (we could add a Vec&lt;Name&gt; to LocalDecl but that feels silly)</p>



<a name="178478670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478670">(Oct 18 2019 at 14:25)</a>:</h4>
<p>in general, I think we can design "what we want the debugger can see" at a higher level and never do any transform that would break it</p>



<a name="178478694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478694">(Oct 18 2019 at 14:25)</a>:</h4>
<p>okay</p>



<a name="178478752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478752" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478752">(Oct 18 2019 at 14:26)</a>:</h4>
<p>the revisions you're talking about doing, <span class="user-mention" data-user-id="119009">@eddyb</span> , is this work that you see landing in the near-ish future, like next few months?</p>



<a name="178478757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478757">(Oct 18 2019 at 14:26)</a>:</h4>
<p>as a principle of "bestest-effort" as opposed to LLVM's "optimizations may drop debuginfo on the floor if they can't do any better"</p>



<a name="178478766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478766" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478766">(Oct 18 2019 at 14:26)</a>:</h4>
<p>like, PR <a href="https://github.com/rust-lang/rust/issues/56231" target="_blank" title="https://github.com/rust-lang/rust/issues/56231">#56231</a> was opened nearly a year ago</p>



<a name="178478787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478787" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478787">(Oct 18 2019 at 14:26)</a>:</h4>
<p>it was in limbo for almost a year and I almost finished it last month, I was hoping to land it really soon</p>



<a name="178478793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478793">(Oct 18 2019 at 14:26)</a>:</h4>
<p>okay that's great</p>



<a name="178478827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478827" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478827">(Oct 18 2019 at 14:27)</a>:</h4>
<p>it blocks two MIR optimizations (SROA and NRVO) which have been mostly implemented since last year but not landed</p>



<a name="178478832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478832">(Oct 18 2019 at 14:27)</a>:</h4>
<p>(I can indeed see that work has been ongoing on it, and it was blocked for a while, or at least subsumed/subverted by PR <a href="https://github.com/rust-lang/rust/issues/56278" target="_blank" title="https://github.com/rust-lang/rust/issues/56278">#56278</a>)</p>



<a name="178478869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478869">(Oct 18 2019 at 14:27)</a>:</h4>
<p>In any case</p>



<a name="178478929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478929">(Oct 18 2019 at 14:28)</a>:</h4>
<p>it seems like these points are related to how we implement rustc's built-in support for debuginfo</p>



<a name="178478946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478946">(Oct 18 2019 at 14:28)</a>:</h4>
<p>you brought up one thing which I forgot to address, the Vec&lt;T&gt; layout assumption in the debugger scripts</p>



<a name="178478981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478981" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478981">(Oct 18 2019 at 14:29)</a>:</h4>
<p>yep. I don't know whether we should be worrying about that or not</p>



<a name="178478992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178478992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178478992">(Oct 18 2019 at 14:29)</a>:</h4>
<p>it strikes me as one of the main reasons to leave the debugger-scripts <em>in tree</em></p>



<a name="178479000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479000">(Oct 18 2019 at 14:29)</a>:</h4>
<p>there is one thing we could do but I'm not sure what's the best way to implement it</p>



<a name="178479002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479002">(Oct 18 2019 at 14:29)</a>:</h4>
<p>just because of the coupling there</p>



<a name="178479052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479052" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479052">(Oct 18 2019 at 14:29)</a>:</h4>
<p>which is to move that stuff into a trait impl (or even expose <code>fmt::Debug</code> itself somehow)</p>



<a name="178479062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479062">(Oct 18 2019 at 14:30)</a>:</h4>
<p>but ... <span class="user-mention" data-user-id="119009">@eddyb</span> , do you know off hand if we can (and do) encode a Rust version into the debug info we generate?</p>



<a name="178479120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479120">(Oct 18 2019 at 14:30)</a>:</h4>
<p>we do</p>



<a name="178479123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479123">(Oct 18 2019 at 14:30)</a>:</h4>
<p>it's an useragent</p>



<a name="178479148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479148">(Oct 18 2019 at 14:30)</a>:</h4>
<p>i.e., is there something that the debugger scripts could sniff, and then it would have its own table mapping rust-version  to Vec&lt;T&gt; layout info.</p>



<a name="178479185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479185" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479185">(Oct 18 2019 at 14:30)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/518deda77feb4957bfd311b6cb50baa7ef9ca6a2/src/librustc_codegen_llvm/debuginfo/metadata.rs#L920-L925" target="_blank" title="https://github.com/rust-lang/rust/blob/518deda77feb4957bfd311b6cb50baa7ef9ca6a2/src/librustc_codegen_llvm/debuginfo/metadata.rs#L920-L925">https://github.com/rust-lang/rust/blob/518deda77feb4957bfd311b6cb50baa7ef9ca6a2/src/librustc_codegen_llvm/debuginfo/metadata.rs#L920-L925</a></p>



<a name="178479194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479194">(Oct 18 2019 at 14:30)</a>:</h4>
<p>(its not as elegant as finding some way to provide the layout info via some other channel, but it seems like something simple that would work...)</p>



<a name="178479228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479228">(Oct 18 2019 at 14:31)</a>:</h4>
<p>(gdb has a bug that requires us to say that we're "clang but really rustc")</p>



<a name="178479255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479255">(Oct 18 2019 at 14:31)</a>:</h4>
<blockquote>
<p>i.e., is there something that the debugger scripts could sniff, and then it would have its own table mapping rust-version  to Vec&lt;T&gt; layout info.</p>
</blockquote>
<p>Does this sound correct to you, <span class="user-mention" data-user-id="119009">@eddyb</span>  ?</p>



<a name="178479265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479265">(Oct 18 2019 at 14:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> I mean, first off, you don't even need to assume the <em>layout</em>, since type debuginfo has it anyway</p>



<a name="178479338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479338" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479338">(Oct 18 2019 at 14:32)</a>:</h4>
<p>well I guess I meant how its meant to interpret the fields it finds</p>



<a name="178479343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479343" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479343">(Oct 18 2019 at 14:32)</a>:</h4>
<p>you need to assume what a pointer means</p>



<a name="178479357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479357" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479357">(Oct 18 2019 at 14:32)</a>:</h4>
<p>I don't know enough about debuginfo to know if we encode the interpretation in some manner. I assume it does not</p>



<a name="178479371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479371">(Oct 18 2019 at 14:32)</a>:</h4>
<p>that's in general the annoying problem with type debuginfo, and unlike enum variants which we did get a DWARF feature for, idk if there is something for "what's behind a pointer"</p>



<a name="178479450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479450">(Oct 18 2019 at 14:33)</a>:</h4>
<p>okay so by "layout info" i really meant "how to interpret the fields (ptr, len, cap)"</p>



<a name="178479527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479527">(Oct 18 2019 at 14:34)</a>:</h4>
<p>DWARF can execute a sort of bytecode to compute values at runtime, you'd "just" need to be able to use that for the length of an array or something</p>



<a name="178479543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479543">(Oct 18 2019 at 14:34)</a>:</h4>
<p>interesting. okay.</p>



<a name="178479553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479553" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479553">(Oct 18 2019 at 14:34)</a>:</h4>
<p>not necessarily something we want to support ourselves in tree</p>



<a name="178479565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479565">(Oct 18 2019 at 14:34)</a>:</h4>
<p>but maybe we would</p>



<a name="178479574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479574" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479574">(Oct 18 2019 at 14:34)</a>:</h4>
<p>but as it stands we might be able to encode something in the type debuginfo of <code>Vec</code> specifically, via an unstable trait it implements</p>



<a name="178479590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479590">(Oct 18 2019 at 14:34)</a>:</h4>
<p>the whole point of this meeting is that we don't <em>have the development resources</em> to play interesting DWARF games, I think</p>



<a name="178479625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479625">(Oct 18 2019 at 14:35)</a>:</h4>
<p>maybe via crafting v0 symbol names to reach a debug helper in the debugger script</p>



<a name="178479645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479645" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479645">(Oct 18 2019 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> we don't have the resources to propose something upstream</p>



<a name="178479681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479681">(Oct 18 2019 at 14:35)</a>:</h4>
<p>and we might not have the expertise to know what's even in the standard</p>



<a name="178479688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479688" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479688">(Oct 18 2019 at 14:36)</a>:</h4>
<p>that I agree with</p>



<a name="178479737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479737">(Oct 18 2019 at 14:36)</a>:</h4>
<p>... i ... don't think I was suggesting upstream-proposals as an alternative ...</p>



<a name="178479765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479765">(Oct 18 2019 at 14:36)</a>:</h4>
<p>let me bring this back to a concrete example</p>



<a name="178479788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479788">(Oct 18 2019 at 14:36)</a>:</h4>
<p>this issue: "debuginfo/pretty-uninitialized-vec fails with <code>Cannot access memory at address 0x7fffff7fe000</code>" <a href="https://github.com/rust-lang/rust/issues/64343" target="_blank" title="https://github.com/rust-lang/rust/issues/64343">#64343</a></p>



<a name="178479864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479864">(Oct 18 2019 at 14:37)</a>:</h4>
<p>I suspect an expert could resolve that quickly</p>



<a name="178479886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479886">(Oct 18 2019 at 14:37)</a>:</h4>
<p>I also suspect that even a novice (to rustc-development) <em>might</em> be able to resolve it if they dedicated a day or three to it</p>



<a name="178479953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178479953" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178479953">(Oct 18 2019 at 14:38)</a>:</h4>
<p>(that suspicion is based on <a href="https://github.com/rust-lang/rust/issues/64343#issuecomment-535279186" target="_blank" title="https://github.com/rust-lang/rust/issues/64343#issuecomment-535279186">this comment</a>)</p>



<a name="178480005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480005">(Oct 18 2019 at 14:38)</a>:</h4>
<p>there's another thing: while I (and a few others) know a couple things about debuginfo inside rustc, I at least know basically nothing about how the debugger scripts work</p>



<a name="178480017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480017">(Oct 18 2019 at 14:39)</a>:</h4>
<p>Right!</p>



<a name="178480020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480020">(Oct 18 2019 at 14:39)</a>:</h4>
<p>that's the point</p>



<a name="178480022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480022">(Oct 18 2019 at 14:39)</a>:</h4>
<p>I would prefer if they did significantly less work themselves</p>



<a name="178480055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480055">(Oct 18 2019 at 14:39)</a>:</h4>
<p>and instead we handled most of it through traits and codegen</p>



<a name="178480056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480056" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480056">(Oct 18 2019 at 14:39)</a>:</h4>
<p>is there a path where we could move <em>just</em> the debugger scripts out of tree, along with their unit tests?</p>



<a name="178480078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480078" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480078">(Oct 18 2019 at 14:39)</a>:</h4>
<p>and then if people want to try their hand at fixing them on their own, they would be able to do so in an isolated fashion?</p>



<a name="178480082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480082" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480082">(Oct 18 2019 at 14:40)</a>:</h4>
<p>uhhhhhhh I don't know what that would accomplish</p>



<a name="178480152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480152">(Oct 18 2019 at 14:40)</a>:</h4>
<p>if nothing else, it would get this unit test from blocking T-release</p>



<a name="178480158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480158">(Oct 18 2019 at 14:40)</a>:</h4>
<p>they can do that without that part, I don't see where a barrier might be</p>



<a name="178480201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480201" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480201">(Oct 18 2019 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> basically that test file prevents me from doing <code>./x.py test</code></p>



<a name="178480226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480226" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480226">(Oct 18 2019 at 14:40)</a>:</h4>
<p>and stops way earlier than I need it to</p>



<a name="178480281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480281">(Oct 18 2019 at 14:41)</a>:</h4>
<p>my build command <em>deletes every time</em> a different debuginfo test because LLVM crashes during codegen</p>



<a name="178480306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480306" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480306">(Oct 18 2019 at 14:42)</a>:</h4>
<p>you see we are all stepping around this roadblock in different ways</p>



<a name="178480344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480344" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480344">(Oct 18 2019 at 14:42)</a>:</h4>
<p>and then there's that time when we found that we weren't even running the debuginfo tests on CI for a while</p>



<a name="178480372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480372" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480372">(Oct 18 2019 at 14:42)</a>:</h4>
<p>wait maybe I misunderstand your "deletes every time" comment</p>



<a name="178480376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480376">(Oct 18 2019 at 14:42)</a>:</h4>
<p>I don't even know if we re-enabled all of them by now</p>



<a name="178480386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480386" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480386">(Oct 18 2019 at 14:42)</a>:</h4>
<p>It sounds to me like people are saying the debuginfo tests are effectively unmaintained because everyone has their own way of ignoring the failures</p>



<a name="178480390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480390" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480390">(Oct 18 2019 at 14:42)</a>:</h4>
<p>are you deleting tests by accident due to a crash?</p>



<a name="178480400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480400">(Oct 18 2019 at 14:42)</a>:</h4>
<p>no, intentionally, so that I can run debuginfo tests</p>



<a name="178480404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480404">(Oct 18 2019 at 14:43)</a>:</h4>
<p>or are you deleting them on purpose to work around a  crash</p>



<a name="178480408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480408">(Oct 18 2019 at 14:43)</a>:</h4>
<p>okay</p>



<a name="178480409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480409">(Oct 18 2019 at 14:43)</a>:</h4>
<p>running those tests <em>is important</em></p>



<a name="178480449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480449">(Oct 18 2019 at 14:43)</a>:</h4>
<p>as a first step you might want to split the tests into <code>debuginfo</code> and <code>debugger-pretty</code> or something</p>



<a name="178480521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480521">(Oct 18 2019 at 14:44)</a>:</h4>
<p>yes: we definitely need to keep testing our DWARF debuginfo generation in-tree</p>



<a name="178480538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480538" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480538">(Oct 18 2019 at 14:44)</a>:</h4>
<p>most of them are important codegen tests, and in fact one idea <span class="user-mention" data-user-id="124287">@mw</span> had was to add explicit codegen tests for the LLVM annotations instead of puppetting a debugger</p>



<a name="178480726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480726">(Oct 18 2019 at 14:46)</a>:</h4>
<p>by the way, is there any reason that we don't have a bisection for <a href="https://github.com/rust-lang/rust/issues/64343" target="_blank" title="https://github.com/rust-lang/rust/issues/64343">#64343</a> ?</p>



<a name="178480753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480753">(Oct 18 2019 at 14:46)</a>:</h4>
<p>(other than "bisecting local builds takes a long time" ?)</p>



<a name="178480781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480781" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480781">(Oct 18 2019 at 14:46)</a>:</h4>
<p>I'm assuming that test worked at <em>some point</em> ...</p>



<a name="178480793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480793">(Oct 18 2019 at 14:47)</a>:</h4>
<p>did we bisect it to a nightly?</p>



<a name="178480806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480806" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480806">(Oct 18 2019 at 14:47)</a>:</h4>
<p>I hate that compiletest has a hostile CLI</p>



<a name="178480815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480815">(Oct 18 2019 at 14:47)</a>:</h4>
<p>(personally I don't really like gdb and don't want to learn it)</p>



<a name="178480818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480818" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480818">(Oct 18 2019 at 14:47)</a>:</h4>
<p>there's no bisection data on the ticket</p>



<a name="178480823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480823" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480823">(Oct 18 2019 at 14:47)</a>:</h4>
<p>I'll mark it needs-bisect</p>



<a name="178480835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480835" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480835">(Oct 18 2019 at 14:47)</a>:</h4>
<p>need to pass a bajillion flags to get it to do anything</p>



<a name="178480847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480847">(Oct 18 2019 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> all you'd need is to run compiletest on that file with the right twenty flags :P</p>



<a name="178480851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480851">(Oct 18 2019 at 14:47)</a>:</h4>
<p>and for me the size of the command line is too long for my shell</p>



<a name="178480860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480860" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480860">(Oct 18 2019 at 14:48)</a>:</h4>
<p>so I end up having to put the command into a shell script just to run it</p>



<a name="178480915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480915">(Oct 18 2019 at 14:48)</a>:</h4>
<p>its pretty great</p>



<a name="178480916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480916" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480916">(Oct 18 2019 at 14:48)</a>:</h4>
<p>multiline prompts :P</p>



<a name="178480926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480926" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480926">(Oct 18 2019 at 14:48)</a>:</h4>
<p>anyway my point is you don't actually need to build rustc to run these tests</p>



<a name="178480932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480932">(Oct 18 2019 at 14:48)</a>:</h4>
<p>okay</p>



<a name="178480946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480946">(Oct 18 2019 at 14:48)</a>:</h4>
<p>(and my point is that it was weird we hadn't bisected it at all yet)</p>



<a name="178480961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480961">(Oct 18 2019 at 14:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span>'s ideas of using a recent build for stage0 instead of beta would probably make this much easier</p>



<a name="178480991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178480991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178480991">(Oct 18 2019 at 14:49)</a>:</h4>
<p>okay well I think we have at least some (small?) action items for issues with debuginfo/debugger-ux tests</p>



<a name="178481031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481031">(Oct 18 2019 at 14:49)</a>:</h4>
<p>let me bring up the other driving point</p>



<a name="178481096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481096" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481096">(Oct 18 2019 at 14:50)</a>:</h4>
<p>PR "WIP: Implement new gdb/lldb pretty-printers" <a href="https://github.com/rust-lang/rust/issues/60826" target="_blank" title="https://github.com/rust-lang/rust/issues/60826">#60826</a></p>



<a name="178481150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481150">(Oct 18 2019 at 14:51)</a>:</h4>
<p>basically we have completely stalled on this PR</p>



<a name="178481169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481169" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481169">(Oct 18 2019 at 14:51)</a>:</h4>
<p>the PR itself fails the tests</p>



<a name="178481182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481182">(Oct 18 2019 at 14:51)</a>:</h4>
<p>we don't have local experts able/willing to help the author fix their PR</p>



<a name="178481211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481211" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481211">(Oct 18 2019 at 14:52)</a>:</h4>
<p>this is the sort of thing that was prompting me to suggest moving the debugger-support scripts out of tree</p>



<a name="178481256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481256" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481256">(Oct 18 2019 at 14:52)</a>:</h4>
<p>and we probably shouldn't even do that PR if we can come up with a better way to handle pretty-printers</p>



<a name="178481285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481285">(Oct 18 2019 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> can I make a suggestion to just put <code>// ignore</code> for now on this specific test?</p>



<a name="178481295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481295">(Oct 18 2019 at 14:52)</a>:</h4>
<p>(to solve the immediate problem first)</p>



<a name="178481306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481306" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481306">(Oct 18 2019 at 14:52)</a>:</h4>
<p>the only thing you'd be forced to do by moving out of tree is to wrap compiletest. which you can do in-tree</p>



<a name="178481314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481314" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481314">(Oct 18 2019 at 14:52)</a>:</h4>
<blockquote>
<p>and we probably shouldn't even do that PR if we can come up with a better way to handle pretty-printers</p>
</blockquote>
<p>maybe you could write up an elaborated proposal for this and put it up for a future design meeting?</p>



<a name="178481315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481315">(Oct 18 2019 at 14:52)</a>:</h4>
<p>(or if <code>// ignore</code> doesn't work, whatever the equivalent of that is)</p>



<a name="178481331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481331">(Oct 18 2019 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="126931">@centril</span> we should require issues on every single <code>// ignore</code></p>



<a name="178481364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481364">(Oct 18 2019 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> that's a good idea</p>



<a name="178481396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481396">(Oct 18 2019 at 14:53)</a>:</h4>
<p>I don't have any problem with tagging the test with ignore, as long as we file a related follow-up issue so it doesn't get lost.</p>



<a name="178481481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481481">(Oct 18 2019 at 14:54)</a>:</h4>
<p>Moving the scripts out of tree seems reasonable to me but I'm not sure how that resolves this issue. Do we just plan to delete/ignore these tests? If so, why don't we just do that now while the scripts are still in tree?</p>



<a name="178481517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481517" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481517">(Oct 18 2019 at 14:54)</a>:</h4>
<p>I think we want to make sure we <em>keep</em> the tests that are just testing the compiler's debuginfo generation</p>



<a name="178481520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481520">(Oct 18 2019 at 14:54)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> cool; I'll investigate how the test can be ignored then</p>



<a name="178481556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481556">(Oct 18 2019 at 14:55)</a>:</h4>
<p>I guess my point is that we could do that now while the scripts are still in tree</p>



<a name="178481559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481559">(Oct 18 2019 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> that is why I thought <span class="user-mention" data-user-id="119009">@eddyb</span> made a good point about separating <code>debuginfo</code> from <code>debugger-pretty</code></p>



<a name="178481591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481591" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481591">(Oct 18 2019 at 14:55)</a>:</h4>
<p>So if that's all we want to do, I don't see much reason to move the scripts to another repo</p>



<a name="178481594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481594" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481594">(Oct 18 2019 at 14:55)</a>:</h4>
<p>yes, we can absolutely do such things now. it doesn't need to block on decisions about whether debugger-scripts live in tree or not</p>



<a name="178481691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481691">(Oct 18 2019 at 14:56)</a>:</h4>
<p>one reason to move the scripts to another repo: it may be easy to land changes and/or iterate development</p>



<a name="178481715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481715">(Oct 18 2019 at 14:57)</a>:</h4>
<p>you could argue they're like syntax highlighting files</p>



<a name="178481717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481717" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481717">(Oct 18 2019 at 14:57)</a>:</h4>
<p>PR <a href="https://github.com/rust-lang/rust/issues/60826" target="_blank" title="https://github.com/rust-lang/rust/issues/60826">#60826</a> has been up since May</p>



<a name="178481736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481736">(Oct 18 2019 at 14:57)</a>:</h4>
<blockquote>
<p>you could argue they're like syntax highlighting files</p>
</blockquote>
<p>right, I made that analogy when I brought up our Emacs rust-mode.el repo</p>



<a name="178481738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481738">(Oct 18 2019 at 14:57)</a>:</h4>
<p>Conclusions so far:<br>
- we ignore the problematic test for now<br>
- we split the tests by debuginfo/debugger-pretty<br>
- consider moving them out of tree<br>
- eddyb has various ideas and PRs about MIR and debuginfo</p>



<a name="178481760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481760">(Oct 18 2019 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> if you find me someone who knows how these python scripts work, and remind me to dive into LLVM's DWARF building API, I can probably come up with a workable solution</p>



<a name="178481821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481821">(Oct 18 2019 at 14:58)</a>:</h4>
<p>the problem is that I can come up with a dozen hacks but I have no filter for which would be viable today</p>



<a name="178481855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481855">(Oct 18 2019 at 14:58)</a>:</h4>
<p>at best right now I can propose "do something with a trait"</p>



<a name="178481881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481881" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481881">(Oct 18 2019 at 14:58)</a>:</h4>
<p>which could very well be found in an issue with a 3-digit number for all I know</p>



<a name="178481909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481909">(Oct 18 2019 at 14:59)</a>:</h4>
<p>/me continues to be sad that <span class="user-mention" data-user-id="124287">@mw</span>  was not here</p>



<a name="178481946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481946">(Oct 18 2019 at 14:59)</a>:</h4>
<p>(hmm, zulip no longer highlights <code>@**mw**</code> ?) Update: it doesn't work after <code>/me</code></p>



<a name="178481969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178481969" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178481969">(Oct 18 2019 at 14:59)</a>:</h4>
<p>@mw&lt;TAB&gt; makes <span class="user-mention" data-user-id="124287">@mw</span> for me</p>



<a name="178482021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482021" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482021">(Oct 18 2019 at 15:00)</a>:</h4>
<p>manual: <span class="user-mention" data-user-id="124287">@mw</span></p>



<a name="178482041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482041">(Oct 18 2019 at 15:00)</a>:</h4>
<p>what the heck, I am writing <span class="user-mention" data-user-id="124287">@mw</span></p>



<a name="178482051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482051">(Oct 18 2019 at 15:00)</a>:</h4>
<p>(!)</p>



<a name="178482056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482056" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482056">(Oct 18 2019 at 15:00)</a>:</h4>
<p>#FunTimesWithZulip</p>



<a name="178482064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482064" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482064">(Oct 18 2019 at 15:00)</a>:</h4>
<p>okay sorry I'll play with this in the Zulip stream later</p>



<a name="178482120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482120">(Oct 18 2019 at 15:01)</a>:</h4>
<p>so I think we have the main action items for <a href="https://github.com/rust-lang/rust/issues/64343" target="_blank" title="https://github.com/rust-lang/rust/issues/64343">#64343</a> (namely, add an <code>// ignore</code> and open an issue)</p>



<a name="178482144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482144">(Oct 18 2019 at 15:01)</a>:</h4>
<p>do we have any action item for PR <a href="https://github.com/rust-lang/rust/issues/60826" target="_blank" title="https://github.com/rust-lang/rust/issues/60826">#60826</a> ?</p>



<a name="178482165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482165" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482165">(Oct 18 2019 at 15:01)</a>:</h4>
<p>since <span class="user-mention" data-user-id="119009">@eddyb</span> said that we may not want to land it, I think we need to wait before we take action</p>



<a name="178482218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482218">(Oct 18 2019 at 15:02)</a>:</h4>
<p>I'll write a comment on the PR</p>



<a name="178482422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482422" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482422">(Oct 18 2019 at 15:04)</a>:</h4>
<p>Is there any other point that anyone wants to raise? We are 3 minutes over, so no one should feel obligated to stick around</p>



<a name="178482442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178482442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178482442">(Oct 18 2019 at 15:04)</a>:</h4>
<p>(speaking of which, thank you to everyone in <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> for attending !!!)</p>



<a name="178483006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178483006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178483006">(Oct 18 2019 at 15:10)</a>:</h4>
<p>I was looking for relevant issues and found <a href="https://github.com/rust-lang/rust/issues/37504" target="_blank" title="https://github.com/rust-lang/rust/issues/37504">https://github.com/rust-lang/rust/issues/37504</a> (apparently even <code>&amp;[T]</code> is a problem, not just <code>Vec&lt;T&gt;</code>)</p>



<a name="178486679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178486679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178486679">(Oct 18 2019 at 15:50)</a>:</h4>
<p>the only other semi-relevant issue I can find is <a href="https://github.com/rust-lang/rust/issues/43334" target="_blank" title="https://github.com/rust-lang/rust/issues/43334">https://github.com/rust-lang/rust/issues/43334</a></p>



<a name="178492779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178492779" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178492779">(Oct 18 2019 at 17:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> btw I sketched a bit of the idea I had <a href="https://github.com/rust-lang/rust/issues/65564" target="_blank" title="https://github.com/rust-lang/rust/issues/65564">https://github.com/rust-lang/rust/issues/65564</a></p>



<a name="178522507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178522507" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178522507">(Oct 19 2019 at 01:21)</a>:</h4>
<p>(not sure if somebody is on this already, but can somebody open a PR with minutes or notes on the compiler-team repository?)</p>



<a name="178635737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178635737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178635737">(Oct 21 2019 at 08:35)</a>:</h4>
<p>Sorry for not attending. I was out sick the second half of last week <code>:(</code></p>



<a name="178655117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/design%20meeting%202019-10-18/near/178655117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/design.20meeting.202019-10-18.html#178655117">(Oct 21 2019 at 13:36)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> I totally understand</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
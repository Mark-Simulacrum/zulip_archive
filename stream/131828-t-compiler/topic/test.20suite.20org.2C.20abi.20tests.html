<html>
<head><meta charset="utf-8"><title>test suite org, abi tests · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html">test suite org, abi tests</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="173213881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173213881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173213881">(Aug 14 2019 at 15:34)</a>:</h4>
<p>I'm inclined to r+ <a href="https://github.com/rust-lang/rust/pull/62593" target="_blank" title="https://github.com/rust-lang/rust/pull/62593">https://github.com/rust-lang/rust/pull/62593</a> -- anybody have strong opinions? It moves abi related tests from <code>src/test/run-pass</code> into <code>src/test/run-pass/abi</code>. In some cases, also from directiories like <code>src/test/run-pass/struct</code> to <code>src/test/run-pass/abi/struct</code>. I'm not sure what the ideal org is but it seems like an improvement. <span class="user-mention" data-user-id="126931">@centril</span>, you may care about this...</p>



<a name="173213980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173213980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173213980">(Aug 14 2019 at 15:35)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> agree that it is better organization... but something weird is going on; it seems to be moving tests in the run-pass directory... but we removed it?</p>



<a name="173214047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173214047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173214047">(Aug 14 2019 at 15:36)</a>:</h4>
<p>(i.e. why is there not a merge conflict... will investigate)</p>



<a name="173214118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173214118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173214118">(Aug 14 2019 at 15:37)</a>:</h4>
<p>(oh no, we have a test in <a href="https://github.com/rust-lang/rust/blob/master/src/test/run-pass/generator/niche-in-generator.rs" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/test/run-pass/generator/niche-in-generator.rs">https://github.com/rust-lang/rust/blob/master/src/test/run-pass/generator/niche-in-generator.rs</a> that isn't being tested)</p>



<a name="173214270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173214270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173214270">(Aug 14 2019 at 15:38)</a>:</h4>
<p>(see <a href="https://github.com/rust-lang/rust/tree/master/src/test/run-pass" target="_blank" title="https://github.com/rust-lang/rust/tree/master/src/test/run-pass">https://github.com/rust-lang/rust/tree/master/src/test/run-pass</a> -- there's just a single test ^--- there)</p>



<a name="173214434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173214434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173214434">(Aug 14 2019 at 15:40)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> ^---</p>



<a name="173214696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173214696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173214696">(Aug 14 2019 at 15:43)</a>:</h4>
<p>It seems to <a href="https://github.com/rust-lang/rust/pull/59329" target="_blank" title="https://github.com/rust-lang/rust/pull/59329">always happen</a> when test suites are removed.</p>



<a name="173215040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173215040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173215040">(Aug 14 2019 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> any idea why the PR doesn't have a merge conflict tho?</p>



<a name="173215071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173215071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173215071">(Aug 14 2019 at 15:47)</a>:</h4>
<p>(I'll go move the generator test)</p>



<a name="173215816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173215816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173215816">(Aug 14 2019 at 15:55)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="123856">Vadim Petrochenkov</span> any idea why the PR doesn't have a merge conflict tho?</p>
</blockquote>
<p>git is file-based, not dir-based</p>



<a name="173215822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173215822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173215822">(Aug 14 2019 at 15:55)</a>:</h4>
<p>so it doesnt care if you removed the dir</p>



<a name="173215829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173215829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173215829">(Aug 14 2019 at 15:55)</a>:</h4>
<p>and there's no conflict on the file level</p>



<a name="173215925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173215925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173215925">(Aug 14 2019 at 15:56)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> oh, but so what happens if we merge the PR? does it get moved back to run-pass?</p>



<a name="173216139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216139">(Aug 14 2019 at 15:57)</a>:</h4>
<p>nope</p>



<a name="173216164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216164">(Aug 14 2019 at 15:57)</a>:</h4>
<p>git follows renames of files, but not of dirs -- it doesnt even have that concept</p>



<a name="173216195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216195">(Aug 14 2019 at 15:57)</a>:</h4>
<p>wait, what is "it"?</p>



<a name="173216259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216259">(Aug 14 2019 at 15:58)</a>:</h4>
<p>that old generator thing was likely a PR adding a <em>new</em> test getting rebased against the test suite rename</p>



<a name="173216272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216272">(Aug 14 2019 at 15:58)</a>:</h4>
<p>new file being created in a renamed dir, git doesnt even notice anything weird is going on</p>



<a name="173216279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216279">(Aug 14 2019 at 15:58)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> <a href="https://github.com/rust-lang/rust/pull/62593" target="_blank" title="https://github.com/rust-lang/rust/pull/62593">https://github.com/rust-lang/rust/pull/62593</a> reorganizes files in the <code>run-pass</code> dir, but that dir does not exist anymore (well... it does... but those files don't)</p>



<a name="173216339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216339">(Aug 14 2019 at 15:59)</a>:</h4>
<p>git could be "smart" enough that if one PR renames A to B, and then another one renames A to C, when the former gets rebased it results in a B -&gt; C rename</p>



<a name="173216402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216402">(Aug 14 2019 at 15:59)</a>:</h4>
<p>but I haven't tried. but that seems consistent with following renames.</p>



<a name="173216415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216415">(Aug 14 2019 at 15:59)</a>:</h4>
<p>(the github UI shows <code>src/test/run-pass/abi-sysv64-arg-passing.rs → src/test/run-pass/abi/abi-sysv64-arg-passing.rs</code> tho)</p>



<a name="173216484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216484">(Aug 14 2019 at 16:00)</a>:</h4>
<p>(I recently rebased something over some rename and was super-happy that that just worked. would have been extremely painful.)</p>



<a name="173216496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216496">(Aug 14 2019 at 16:00)</a>:</h4>
<blockquote>
<p>(the github UI shows <code>src/test/run-pass/abi-sysv64-arg-passing.rs → src/test/run-pass/abi/abi-sysv64-arg-passing.rs</code> tho)</p>
</blockquote>
<p>GH doesnt re-render when the target gets updated</p>



<a name="173216506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216506">(Aug 14 2019 at 16:00)</a>:</h4>
<p>author needs to rebase and force-push for an updated diff</p>



<a name="173216515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216515">(Aug 14 2019 at 16:00)</a>:</h4>
<p>ah</p>



<a name="173216526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173216526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173216526">(Aug 14 2019 at 16:01)</a>:</h4>
<p>I'll note that as a comment then</p>



<a name="173234451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/test%20suite%20org%2C%20abi%20tests/near/173234451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/test.20suite.20org.2C.20abi.20tests.html#173234451">(Aug 14 2019 at 19:32)</a>:</h4>
<p>good catch <span class="user-mention" data-user-id="126931">@centril</span> &lt;3</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
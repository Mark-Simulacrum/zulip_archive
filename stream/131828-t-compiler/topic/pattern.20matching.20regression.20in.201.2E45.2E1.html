<html>
<head><meta charset="utf-8"><title>pattern matching regression in 1.45.1 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html">pattern matching regression in 1.45.1</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="205520596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205520596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Fitzhardinge <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205520596">(Jul 30 2020 at 19:16)</a>:</h4>
<p>I just filed <a href="https://github.com/rust-lang/rust/issues/74954">https://github.com/rust-lang/rust/issues/74954</a> - pattern bindings are not resolving as being in scope. Seems like a blocker for 1.45.1 going out the door, and I want to make sure this is (now?) a kp. <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="205521038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205521038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205521038">(Jul 30 2020 at 19:20)</a>:</h4>
<p>Gah</p>



<a name="205521053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205521053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205521053">(Jul 30 2020 at 19:20)</a>:</h4>
<p>Cc <span class="user-mention" data-user-id="116083">@pnkfelix</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="205521075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205521075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205521075">(Jul 30 2020 at 19:21)</a>:</h4>
<p>I guess we'll be doing a .2 next week</p>



<a name="205521874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205521874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205521874">(Jul 30 2020 at 19:28)</a>:</h4>
<p>I don't understand how not a single test caught this</p>



<a name="205526092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205526092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205526092">(Jul 30 2020 at 20:06)</a>:</h4>
<p>amazing</p>



<a name="205526243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205526243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205526243">(Jul 30 2020 at 20:08)</a>:</h4>
<p>Anyway, I agree, lets revert the two pattern-related commits</p>



<a name="205526285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205526285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205526285">(Jul 30 2020 at 20:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> ^</p>



<a name="205526304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205526304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205526304">(Jul 30 2020 at 20:08)</a>:</h4>
<p>preparing artifacts now</p>



<a name="205526322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205526322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205526322">(Jul 30 2020 at 20:08)</a>:</h4>
<p>do we think we can do this for tomorrow? Do we want to delay till monday?</p>



<a name="205526328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205526328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205526328">(Jul 30 2020 at 20:08)</a>:</h4>
<p>(or later)</p>



<a name="205526559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205526559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205526559">(Jul 30 2020 at 20:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> ^</p>



<a name="205529997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205529997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205529997">(Jul 30 2020 at 20:42)</a>:</h4>
<p>I've put up <a href="https://github.com/rust-lang/rust/pull/74958">https://github.com/rust-lang/rust/pull/74958</a> and <a href="https://github.com/rust-lang/blog.rust-lang.org/pull/661">https://github.com/rust-lang/blog.rust-lang.org/pull/661</a></p>



<a name="205537281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205537281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205537281">(Jul 30 2020 at 21:56)</a>:</h4>
<p>Moved everything to target Monday</p>



<a name="205537615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205537615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205537615">(Jul 30 2020 at 22:00)</a>:</h4>
<p>there is also <a href="https://github.com/rust-lang/rust/issues/74427">https://github.com/rust-lang/rust/issues/74427</a> now :/</p>



<a name="205537621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205537621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205537621">(Jul 30 2020 at 22:00)</a>:</h4>
<p>but I'm still not clear about what that is</p>



<a name="205539980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205539980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205539980">(Jul 30 2020 at 22:27)</a>:</h4>
<p>I have a rough fix for these issues: <a href="https://github.com/JohnTitor/rust/tree/ptn-ice">https://github.com/JohnTitor/rust/tree/ptn-ice</a><br>
could I submit a PR to get some discussion/reviews if it seems reasonable?</p>



<a name="205540261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205540261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205540261">(Jul 30 2020 at 22:31)</a>:</h4>
<p><span class="user-mention" data-user-id="217081">@Yuki Okushi</span> I think at this point I'm opposed to stable/beta backports of fixes for the pattern ICE</p>



<a name="205540280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205540280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205540280">(Jul 30 2020 at 22:31)</a>:</h4>
<p>but to master seems great!</p>



<a name="205540346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205540346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205540346">(Jul 30 2020 at 22:32)</a>:</h4>
<p>yeah, I'm going to submit to master</p>



<a name="205541120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205541120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205541120">(Jul 30 2020 at 22:42)</a>:</h4>
<p>submitted <a href="https://github.com/rust-lang/rust/issues/74963">#74963</a></p>



<a name="205754331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205754331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205754331">(Aug 03 2020 at 02:15)</a>:</h4>
<p>okay, <a href="https://github.com/rust-lang/rust/issues/74963">#74963</a> is merged. given the previous fix is beta-nominated/accepted, it's worth to nominate too?</p>



<a name="205754735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205754735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205754735">(Aug 03 2020 at 02:25)</a>:</h4>
<p>We either need to nominate your fix, or at least apply the same revert as 1.45.2 to beta</p>



<a name="205754795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205754795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205754795">(Aug 03 2020 at 02:26)</a>:</h4>
<p>Or is beta still "pristine"? Then we should un-accept the troublesome patch</p>



<a name="205755005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205755005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205755005">(Aug 03 2020 at 02:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1/near/205754795">said</a>:</p>
<blockquote>
<p>Or is beta still "pristine"? Then we should un-accept the troublesome patch</p>
</blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/74557">#74557</a> isn't backported to beta yet afaik</p>



<a name="205885412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205885412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205885412">(Aug 04 2020 at 09:00)</a>:</h4>
<p>hm, so should we re-nominate <a href="https://github.com/rust-lang/rust/issues/74557">#74557</a> for un-accepting it? <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="205895602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205895602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205895602">(Aug 04 2020 at 11:31)</a>:</h4>
<p><span class="user-mention" data-user-id="217081">@Yuki Okushi</span> we can just drop the labels</p>



<a name="205895617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205895617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205895617">(Aug 04 2020 at 11:31)</a>:</h4>
<p>It hasn't been backported yet</p>



<a name="205921047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/pattern%20matching%20regression%20in%201.45.1/near/205921047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/pattern.20matching.20regression.20in.201.2E45.2E1.html#205921047">(Aug 04 2020 at 15:23)</a>:</h4>
<p>I've removed the beta labels.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Moving treat-err-as-bug tests to UI · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html">Moving treat-err-as-bug tests to UI</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="195241564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195241564" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195241564">(Apr 24 2020 at 20:35)</a>:</h4>
<p>have created this <a href="https://github.com/rust-lang/rust/issues/71531" title="https://github.com/rust-lang/rust/issues/71531">#71531</a> to move the only treat-err-as-bug test we have to UI</p>



<a name="195241652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195241652" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195241652">(Apr 24 2020 at 20:36)</a>:</h4>
<p>as I've explained there I'm not sure if it's a good idea to run it with <code>BACKTRACE=1</code></p>



<a name="195241721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195241721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195241721">(Apr 24 2020 at 20:37)</a>:</h4>
<p>are there normalization rules you could apply to fix that?</p>



<a name="195241739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195241739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195241739">(Apr 24 2020 at 20:37)</a>:</h4>
<p>(to remove the host specific information from the stack trace, that is)</p>



<a name="195242066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195242066" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195242066">(Apr 24 2020 at 20:41)</a>:</h4>
<p>Look for <code>normalize-stdout-test</code> and <code>normalize-stderr-test</code> in the current set of UI tests to see examples of what I am referring to.</p>



<a name="195242110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195242110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195242110">(Apr 24 2020 at 20:42)</a>:</h4>
<p>ahh right</p>



<a name="195242114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195242114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195242114">(Apr 24 2020 at 20:42)</a>:</h4>
<p>I think there's something</p>



<a name="195243246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243246">(Apr 24 2020 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> I wonder how you discard stuff you catched in the regex</p>



<a name="195243282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243282">(Apr 24 2020 at 20:54)</a>:</h4>
<p>? I think by just not including it?</p>



<a name="195243314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243314" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243314">(Apr 24 2020 at 20:54)</a>:</h4>
<p>i.e. you could just map the whole line to OHNOE</p>



<a name="195243368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243368">(Apr 24 2020 at 20:55)</a>:</h4>
<p>yeah</p>



<a name="195243370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243370">(Apr 24 2020 at 20:55)</a>:</h4>
<p>hehe</p>



<a name="195243382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243382">(Apr 24 2020 at 20:55)</a>:</h4>
<p>so it's happening the opposite</p>



<a name="195243391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243391" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243391">(Apr 24 2020 at 20:55)</a>:</h4>
<p>everything is discarded</p>



<a name="195243396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243396">(Apr 24 2020 at 20:55)</a>:</h4>
<p>see e.g. svh/svh-change-trait-bound.rs</p>



<a name="195243403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243403">(Apr 24 2020 at 20:55)</a>:</h4>
<p><code>// normalize-stderr-test "at /.*/src/backtrace/.*:[0-9]*" -&gt; "src/backtrace/FILENAME:LL"</code></p>



<a name="195243482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243482">(Apr 24 2020 at 20:56)</a>:</h4>
<p>Okay. so there's stuff you want included?</p>



<a name="195243502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243502">(Apr 24 2020 at 20:56)</a>:</h4>
<p>for those things, enclose them in parenthesis in the pattern</p>



<a name="195243531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243531" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243531">(Apr 24 2020 at 20:56)</a>:</h4>
<p>(again, see svh/svh-change-trait-bound.rs for an example)</p>



<a name="195243545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243545" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243545">(Apr 24 2020 at 20:56)</a>:</h4>
<p>ahh I see</p>



<a name="195243561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243561">(Apr 24 2020 at 20:57)</a>:</h4>
<p>and then <code>$1</code> for the first parenthesized thing, $2 for the second, etc</p>



<a name="195243583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243583" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243583">(Apr 24 2020 at 20:57)</a>:</h4>
<p>this is a relatively standard thing for regexp's to support, and very useful</p>



<a name="195243667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243667">(Apr 24 2020 at 20:58)</a>:</h4>
<p>yeah, it's working</p>



<a name="195243722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195243722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195243722">(Apr 24 2020 at 20:58)</a>:</h4>
<p>I've messed some stuff but it's ok now</p>



<a name="195244044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195244044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195244044">(Apr 24 2020 at 21:01)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/71531" title="https://github.com/rust-lang/rust/issues/71531">#71531</a> is ready then</p>



<a name="195244066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Moving%20treat-err-as-bug%20tests%20to%20UI/near/195244066" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Moving.20treat-err-as-bug.20tests.20to.20UI.html#195244066">(Apr 24 2020 at 21:01)</a>:</h4>
<p>modulo CI being green</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
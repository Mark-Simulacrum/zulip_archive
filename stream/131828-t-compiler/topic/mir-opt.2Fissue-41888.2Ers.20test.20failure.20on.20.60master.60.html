<html>
<head><meta charset="utf-8"><title>mir-opt/issue-41888.rs test failure on `master` · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html">mir-opt/issue-41888.rs test failure on `master`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264647418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264647418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264647418">(Dec 12 2021 at 22:30)</a>:</h4>
<p>I just updated my repo to <a href="https://github.com/rust-lang/rust/commit/6bda5b331cfe7e04e1fe348c58a928fc2b650f4f">6bda5b331cfe7e04e1fe348c58a928fc2b650f4f</a> ("Auto merge of <a href="https://github.com/rust-lang/rust/issues/90716">#90716</a> - euclio:libloading, r=cjgillot") and I'm getting this test failure running <code>./x.py test</code>:</p>
<div class="codehilite"><pre><span></span><code>---- [mir-opt] mir-opt/issue-41888.rs stdout ----
22
23      bb0: {
24          _9 = const false;                // scope 0 at $DIR/issue-41888.rs:7:9: 7:10
-           _7 = const false;                // scope 0 at $DIR/issue-41888.rs:7:9: 7:10
26          _8 = const false;                // scope 0 at $DIR/issue-41888.rs:7:9: 7:10
+           _7 = const false;                // scope 0 at $DIR/issue-41888.rs:7:9: 7:10
27          StorageLive(_1);                 // scope 0 at $DIR/issue-41888.rs:7:9: 7:10
28          StorageLive(_2);                 // scope 1 at $DIR/issue-41888.rs:8:8: 8:14
29          _2 = cond() -&gt; [return: bb1, unwind: bb11]; // scope 1 at $DIR/issue-41888.rs:8:8: 8:14

thread &#39;[mir-opt] mir-opt/issue-41888.rs&#39; panicked at &#39;Actual MIR output differs from expected MIR output /home/njn/dev/rust2/src/test/mir-opt/issue_41888.main.ElaborateDrops.after.mir&#39;, src/tools/compiletest/src/runtest.rs:3360:25
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    [mir-opt] mir-opt/issue-41888.rs
</code></pre></div>



<a name="264648108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264648108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264648108">(Dec 12 2021 at 22:48)</a>:</h4>
<p>It's a trivial reordering of two assignments. I updated the expected output file locally and now all tests pass. But I'm wondering how this passed tests on CI and got merged. Might it be non-deterministic?</p>



<a name="264652327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264652327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264652327">(Dec 13 2021 at 00:26)</a>:</h4>
<p>Some questions that might help with debugging:</p>
<ol>
<li>Do you have download-rustc enabled? If so, had you modified the rustc sources locally when you ran this build?</li>
<li>What architecture/OS are you on?</li>
<li>If you run <code>rm -r build/&lt;your-arch&gt;/stage*</code> and rerun <code>./x.py test</code>, do you still get this test failure? (That would help determine if it's non-deterministic.)</li>
</ol>



<a name="264652341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264652341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264652341">(Dec 13 2021 at 00:27)</a>:</h4>
<p>I just ran that test locally on the latest master (<a href="https://github.com/rust-lang/rust/commit/6bda5b331cfe7e04e1fe348c58a928fc2b650f4f">6bda5b331cfe7e04e1fe348c58a928fc2b650f4f</a>) and it passed. I'm using download-rustc (thus, these are CI artifacts), and I'm on Apple Silicon.</p>



<a name="264653465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653465">(Dec 13 2021 at 00:54)</a>:</h4>
<ol>
<li>No</li>
<li>x86-64/Linux</li>
<li>Coming...</li>
</ol>



<a name="264653476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653476">(Dec 13 2021 at 00:55)</a>:</h4>
<p>I included the test change in <a href="https://github.com/rust-lang/rust/pull/91844">https://github.com/rust-lang/rust/pull/91844</a> and the CI run failed</p>



<a name="264653535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653535">(Dec 13 2021 at 00:56)</a>:</h4>
<p>I always do <code>x.py clean</code> whenever I update my repos, so I'll be surprised if 3 changes anything</p>



<a name="264653808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653808">(Dec 13 2021 at 01:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> <a href="#narrow/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60/near/264653535">said</a>:</p>
<blockquote>
<p>I always do <code>x.py clean</code> whenever I update my repos, so I'll be surprised if 3 changes anything</p>
</blockquote>
<p>Ah, really? I almost never do that. I only do it if my build behaves funny <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="264653811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653811">(Dec 13 2021 at 01:02)</a>:</h4>
<p>It's interesting how people's workflows differ :)</p>



<a name="264653813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653813">(Dec 13 2021 at 01:02)</a>:</h4>
<p>(Looks like <code>x.py clean</code>removes much more than just those <code>stage*</code> dirs)</p>



<a name="264653824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653824">(Dec 13 2021 at 01:02)</a>:</h4>
<p>Yeah, <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> taught me to only remove the <code>stage*</code> dirs when possible since it avoids some rebuilds and redownloads</p>



<a name="264653832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653832">(Dec 13 2021 at 01:02)</a>:</h4>
<p>I have a machine with 28 virtual cores, so...</p>



<a name="264653841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264653841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264653841">(Dec 13 2021 at 01:03)</a>:</h4>
<p>Well, I see why you can run <code>x clean</code> all the time ;)</p>



<a name="264656548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264656548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264656548">(Dec 13 2021 at 02:08)</a>:</h4>
<p>(Yeah, my workflow changed completely when I went from a 10-year-old 4C4T CPU to a 1-year-old 16C32T CPU.  It's wonderful to not need to worry about whether LLVM will need a rebuild, or similar.)</p>



<a name="264684059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264684059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264684059">(Dec 13 2021 at 10:03)</a>:</h4>
<p>Alas, there still are plenty of sequential bottlenecks that just leave all the cores sit idle.</p>



<a name="264729423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264729423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264729423">(Dec 13 2021 at 16:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> <a href="#narrow/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60/near/264653535">said</a>:</p>
<blockquote>
<p>I always do <code>x.py clean</code> whenever I update my repos, so I'll be surprised if 3 changes anything</p>
</blockquote>
<p>If that’s the case, do you have enough information to replicate the two ouputs?</p>



<a name="264773318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264773318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264773318">(Dec 13 2021 at 21:36)</a>:</h4>
<p>Sorry, I don't understand the question</p>



<a name="264875583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264875583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264875583">(Dec 14 2021 at 15:35)</a>:</h4>
<p>I'm not sure how optimal the current impl is. I'd presume the derive generates a <code>match</code> expression, but I wonder if equal parts of match arms are merged. While this would likely not reduce instructions, it could still improve perf because the code might take less cache space.</p>



<a name="264928886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264928886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264928886">(Dec 14 2021 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-id="248599">@llogiq</span> wrong thread?</p>



<a name="264930280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264930280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264930280">(Dec 14 2021 at 21:43)</a>:</h4>
<p>Yep, sorry.</p>



<a name="264931339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264931339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264931339">(Dec 14 2021 at 21:51)</a>:</h4>
<p>I now am doing this, sigh:</p>
<div class="codehilite"><pre><span></span><code>function rtest {
    # Sigh, I get this failure all the time now
    cat &lt;&lt; EOF &gt; rtest.diff
diff --git a/src/test/mir-opt/issue_41888.main.ElaborateDrops.after.mir b/src/test/mir-opt/issue_418
88.main.ElaborateDrops.after.mir
--- a/src/test/mir-opt/issue_41888.main.ElaborateDrops.after.mir
+++ b/src/test/mir-opt/issue_41888.main.ElaborateDrops.after.mir
@@ -22,8 +22,8 @@ fn main() -&gt; () {

     bb0: {
         _9 = const false;                // scope 0 at \$DIR/issue-41888.rs:7:9: 7:10
-        _7 = const false;                // scope 0 at \$DIR/issue-41888.rs:7:9: 7:10
         _8 = const false;                // scope 0 at \$DIR/issue-41888.rs:7:9: 7:10
+        _7 = const false;                // scope 0 at \$DIR/issue-41888.rs:7:9: 7:10
         StorageLive(_1);                 // scope 0 at \$DIR/issue-41888.rs:7:9: 7:10
         StorageLive(_2);                 // scope 1 at \$DIR/issue-41888.rs:8:8: 8:14
         _2 = cond() -&gt; [return: bb1, unwind: bb11]; // scope 1 at $DIR/issue-41888.rs:8:8: 8:14
EOF

    echo &quot;patching src/test/mir-opt/issue_41888.main.ElaborateDrops.after.mir&quot;
    patch -p1 &lt; rtest.diff
    echo

    time ./x.py test

    echo &quot;unpatching src/test/mir-opt/issue_41888.main.ElaborateDrops.after.mir&quot;
    patch -p1 -R &lt; rtest.diff
    echo
}
</code></pre></div>



<a name="264931442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264931442" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264931442">(Dec 14 2021 at 21:52)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@nnethercote</span> you could run <code>git bisect</code> to see where the test failure was introduced</p>



<a name="264931446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264931446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264931446">(Dec 14 2021 at 21:52)</a>:</h4>
<p><span class="user-mention" data-user-id="118594">@Dylan MacKenzie (ecstatic-morse)</span> Do you know of any recent MIR opt changes that might be causing the test difference I'm seeing locally?</p>



<a name="264931459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264931459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264931459">(Dec 14 2021 at 21:52)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> true</p>



<a name="264936981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264936981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264936981">(Dec 14 2021 at 22:39)</a>:</h4>
<p>Not really. Maybe my recent MirPass refactor changed something, but it doesn't happen locally (or on CI), so I can't really investigate.</p>



<a name="264937297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264937297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264937297">(Dec 14 2021 at 22:42)</a>:</h4>
<p>Does it reproduce with a fresh checkout? (maybe you have an unusual config or env variable or something)</p>



<a name="264937338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264937338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264937338">(Dec 14 2021 at 22:42)</a>:</h4>
<p>It reproduces with a fresh checkout, and AFAIK my config isn't that unusual</p>



<a name="264937398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264937398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264937398">(Dec 14 2021 at 22:43)</a>:</h4>
<p>Could you paste the rustc command invocation for the failing test case?</p>
<div class="codehilite"><pre><span></span><code>/x.py test  src/test/mir-opt/
touch src/test/mir-opt/issue-41888.rs
env RUST_LOG=debug ./x.py test  src/test/mir-opt/
</code></pre></div>



<a name="264938972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264938972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264938972">(Dec 14 2021 at 22:58)</a>:</h4>
<p>@tm: output is too large to fit in a zulip message...</p>



<a name="264939041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264939041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264939041">(Dec 14 2021 at 22:59)</a>:</h4>
<p>I mean just the command for this single test case.</p>



<a name="264939090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264939090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264939090">(Dec 14 2021 at 23:00)</a>:</h4>
<p>Attached<br>
<a href="/user_uploads/4715/3OerKvyji41j516AzMFgT7Qc/x.txt">x.txt</a></p>



<a name="264939959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264939959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264939959">(Dec 14 2021 at 23:05)</a>:</h4>
<p>This?</p>
<div class="codehilite"><pre><span></span><code>command did not execute successfully: &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/stage0-tools-bin/compiletest&quot; &quot;--compile-lib-path&quot; &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/stage1/lib&quot; &quot;--run-lib-path&quot; &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib&quot; &quot;--rustc-path&quot; &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/stage1/bin/rustc&quot; &quot;--src-base&quot; &quot;/home/njn/dev/rust3/src/test/mir-opt&quot; &quot;--build-base&quot; &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/test/mir-opt&quot; &quot;--stage-id&quot; &quot;stage1-x86_64-unknown-linux-gnu&quot; &quot;--suite&quot; &quot;mir-opt&quot; &quot;--mode&quot; &quot;mir-opt&quot; &quot;--target&quot; &quot;x86_64-unknown-linux-gnu&quot; &quot;--host&quot; &quot;x86_64-unknown-linux-gnu&quot; &quot;--llvm-filecheck&quot; &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/llvm/build/bin/FileCheck&quot; &quot;--nodejs&quot; &quot;/home/njn/.nvm/versions/node/v14.15.1/bin/node&quot; &quot;--npm&quot; &quot;/home/njn/.nvm/versions/node/v14.15.1/bin/npm&quot; &quot;--host-rustcflags&quot; &quot;-Crpath -O -Cdebuginfo=0  -Lnative=/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/native/rust-test-helpers -Clink-arg=-fuse-ld=lld -Clink-arg=-Wl,--threads=1&quot; &quot;--target-rustcflags&quot; &quot;-Crpath -O -Cdebuginfo=0  -Lnative=/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/native/rust-test-helpers -Clink-arg=-fuse-ld=lld -Clink-arg=-Wl,--threads=1&quot; &quot;--docck-python&quot; &quot;/usr/bin/python&quot; &quot;--lldb-python&quot; &quot;/usr/bin/python&quot; &quot;--gdb&quot; &quot;/usr/bin/gdb&quot; &quot;--quiet&quot; &quot;--llvm-version&quot; &quot;13.0.0-rust-dev&quot; &quot;--llvm-components&quot; &quot;aarch64 aarch64asmparser aarch64codegen aarch64desc aarch64disassembler aarch64info aarch64utils aggressiveinstcombine all all-targets analysis arm armasmparser armcodegen armdesc armdisassembler arminfo armutils asmparser asmprinter avr avrasmparser avrcodegen avrdesc avrdisassembler avrinfo binaryformat bitreader bitstreamreader bitwriter bpf bpfasmparser bpfcodegen bpfdesc bpfdisassembler bpfinfo cfguard codegen core coroutines coverage debuginfocodeview debuginfodwarf debuginfogsym debuginfomsf debuginfopdb demangle dlltooldriver dwarflinker dwp engine executionengine extensions filecheck frontendopenacc frontendopenmp fuzzmutate globalisel hexagon hexagonasmparser hexagoncodegen hexagondesc hexagondisassembler hexagoninfo instcombine instrumentation interfacestub interpreter ipo irreader jitlink libdriver lineeditor linker lto m68k m68kasmparser m68kcodegen m68kdesc m68kdisassembler m68kinfo mc mca mcdisassembler mcjit mcparser mips mipsasmparser mipscodegen mipsdesc mipsdisassembler mipsinfo mirparser msp430 msp430asmparser msp430codegen msp430desc msp430disassembler msp430info native nativecodegen nvptx nvptxcodegen nvptxdesc nvptxinfo objcarcopts object objectyaml option orcjit orcshared orctargetprocess passes powerpc powerpcasmparser powerpccodegen powerpcdesc powerpcdisassembler powerpcinfo profiledata remarks riscv riscvasmparser riscvcodegen riscvdesc riscvdisassembler riscvinfo runtimedyld scalaropts selectiondag sparc sparcasmparser sparccodegen sparcdesc sparcdisassembler sparcinfo support symbolize systemz systemzasmparser systemzcodegen systemzdesc systemzdisassembler systemzinfo tablegen target textapi transformutils vectorize webassembly webassemblyasmparser webassemblycodegen webassemblydesc webassemblydisassembler webassemblyinfo webassemblyutils windowsmanifest x86 x86asmparser x86codegen x86desc x86disassembler x86info xray&quot; &quot;--cc&quot; &quot;&quot; &quot;--cxx&quot; &quot;&quot; &quot;--cflags&quot; &quot;&quot; &quot;--adb-path&quot; &quot;adb&quot; &quot;--adb-test-dir&quot; &quot;/data/tmp/work&quot; &quot;--android-cross-path&quot; &quot;&quot; &quot;--channel&quot; &quot;dev&quot;
expected success, got: exit status: 1
</code></pre></div>



<a name="264940077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264940077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264940077">(Dec 14 2021 at 23:06)</a>:</h4>
<p>Anyway, I've started bisecting</p>



<a name="264940323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264940323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264940323">(Dec 14 2021 at 23:07)</a>:</h4>
<p>I was thinking of:</p>
<div class="codehilite"><pre><span></span><code>compiletest::util: executing &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/stage1/bin/rustc&quot; &quot;/home/njn/dev/rust3/src/test/mir-opt/issue-41888.rs&quot; &quot;-Zthreads=1&quot; &quot;--target=x86_64-unknown-linux-gnu&quot; &quot;-Copt-level=1&quot; &quot;-Zdump-mir=all&quot; &quot;-Zmir-opt-level=4&quot; &quot;-Zvalidate-mir&quot; &quot;-Zdump-mir-exclude-pass-number&quot; &quot;-Zdump-mir-dir=/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/test/mir-opt/issue-41888&quot; &quot;-C&quot; &quot;prefer-dynamic&quot; &quot;--out-dir&quot; &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/test/mir-opt/issue-41888&quot; &quot;-Crpath&quot; &quot;-O&quot; &quot;-Cdebuginfo=0&quot; &quot;-Lnative=/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/native/rust-test-helpers&quot; &quot;-Clink-arg=-fuse-ld=lld&quot; &quot;-Clink-arg=-Wl,--threads=1&quot; &quot;-L&quot; &quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/test/mir-opt/issue-41888/auxiliary&quot;
</code></pre></div>



<a name="264940450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264940450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264940450">(Dec 14 2021 at 23:07)</a>:</h4>
<p>I don't have:  <code>"-Clink-arg=-fuse-ld=lld" "-Clink-arg=-Wl,--threads=1"</code>, but that doesn't seem to make any difference.</p>



<a name="264941640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264941640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264941640">(Dec 14 2021 at 23:12)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@nnethercote</span> grep <code>rustc</code> for <code>drop_flags_on_init</code>, you'll see it iterates over a <code>FxHashMap</code> when initializing drop flags to <code>false</code>,  which is what you're seeing. <del>How do we determine <code>FxHashMap</code> seeds?</del> <code>FxHashMap</code> uses a fixed seed, no env variable override AFAICT.</p>



<a name="264941714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264941714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264941714">(Dec 14 2021 at 23:12)</a>:</h4>
<p>I'm kind of surprised you're the only one hitting this.</p>



<a name="264941722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264941722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264941722">(Dec 14 2021 at 23:13)</a>:</h4>
<p>Maybe add a <code>trace!</code> to <code>FxHashMap::new</code> if it's not there already?</p>



<a name="264941800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264941800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264941800">(Dec 14 2021 at 23:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> <a href="#narrow/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60/near/264937338">said</a>:</p>
<blockquote>
<p>It reproduces with a fresh checkout, and AFAIK my config isn't that unusual</p>
</blockquote>
<p>Can you paste your config, or part of it?</p>



<a name="264941913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264941913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264941913">(Dec 14 2021 at 23:13)</a>:</h4>
<div class="codehilite"><pre><span></span><code>changelog-seen = 2
[llvm]
use-linker = &quot;lld&quot;
link-jobs = 2
release-debuginfo = true
[rust]
debuginfo-level = 1
use-lld = true
</code></pre></div>



<a name="264942162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264942162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264942162">(Dec 14 2021 at 23:14)</a>:</h4>
<p>If it's truly non-deterministic I mean, but maybe you've overridden <code>rustc-hash</code> somehow?</p>



<a name="264942650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264942650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264942650">(Dec 14 2021 at 23:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> <a href="#narrow/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60/near/264941913">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>changelog-seen = 2
[llvm]
use-linker = &quot;lld&quot;
link-jobs = 2
release-debuginfo = true
[rust]
debuginfo-level = 1
use-lld = true
</code></pre></div><br>
</p>
</blockquote>
<p>Yeah, nothing stands out to me as a problem</p>



<a name="264944108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944108">(Dec 14 2021 at 23:27)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@nnethercote</span> Can you compile with debug logging enabled and run <code>RUSTC_LOG=rustc_mir_transform::elaborate_drops=debug rustc +mytoolchain src/tests/mir-opt/issue-41888.rs 2&gt;&amp;1 | grep create_drop_flag</code>?</p>



<a name="264944285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944285">(Dec 14 2021 at 23:29)</a>:</h4>
<p>How do I enable debug logging?</p>



<a name="264944299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944299">(Dec 14 2021 at 23:30)</a>:</h4>
<p>That will log all the insertions to the hash map in question, so we can see if there's some non-determinism in MIR building or something. Also, I'm hesitiant to ask since it seems so obvious, but you did check <code>env</code> for anything with <code>RUST</code>, right?</p>



<a name="264944377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944377">(Dec 14 2021 at 23:30)</a>:</h4>
<p><code>debug-logging = true</code>, I think in section <code>[rust]</code></p>



<a name="264944386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944386">(Dec 14 2021 at 23:30)</a>:</h4>
<p>Or just <code>debug = true</code></p>



<a name="264944390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944390">(Dec 14 2021 at 23:30)</a>:</h4>
<p>Or alternately run as a new user, or with a different shell?</p>



<a name="264944448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944448">(Dec 14 2021 at 23:31)</a>:</h4>
<p>The problem manifested immediately after I updated on Monday, and has been consistent (across multiple clones) since then</p>



<a name="264944461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944461">(Dec 14 2021 at 23:31)</a>:</h4>
<p>Have you tried bisecting yet btw?</p>



<a name="264944569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944569">(Dec 14 2021 at 23:32)</a>:</h4>
<p>I'm in the middle of it, I'm getting so many different suggestions on how to investigate it's getting difficult to manage</p>



<a name="264944582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944582">(Dec 14 2021 at 23:32)</a>:</h4>
<p>I haven't managed to find a "good" revision yet</p>



<a name="264944740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944740">(Dec 14 2021 at 23:34)</a>:</h4>
<p>Sorry, I think we're all very curious about what the root cause is :D</p>



<a name="264944755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944755">(Dec 14 2021 at 23:34)</a>:</h4>
<p>I'll leave you to bisecting :)</p>



<a name="264944780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944780">(Dec 14 2021 at 23:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">Dylan MacKenzie (ecstatic-morse)</span> <a href="#narrow/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60/near/264942162">said</a>:</p>
<blockquote>
<p>If it's truly non-deterministic I mean, but maybe you've overridden <code>rustc-hash</code> somehow?</p>
</blockquote>
<p>With the recent blog post about different hashes tested on a compiler this almost begs the question :-).</p>



<a name="264944805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944805">(Dec 14 2021 at 23:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60/near/264944780">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="118594">Dylan MacKenzie (ecstatic-morse)</span> <a href="#narrow/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60/near/264942162">said</a>:</p>
<blockquote>
<p>If it's truly non-deterministic I mean, but maybe you've overridden <code>rustc-hash</code> somehow?</p>
</blockquote>
<p>With the recent blog post about different hashes tested on a compiler this almost begs the question :-).</p>
</blockquote>
<p>Yes, I wouldn't have asked if <span class="user-mention silent" data-user-id="120989">nnethercote</span> was a "normal" user.</p>



<a name="264944965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264944965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264944965">(Dec 14 2021 at 23:37)</a>:</h4>
<p>I have three <code>rust</code> clones, the problem has manifested on all of them after updating them all on Monday, my hash experiments were only in two of them</p>



<a name="264945041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264945041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264945041">(Dec 14 2021 at 23:38)</a>:</h4>
<p>Sure, it's conceivable, but I'll be surprised and intrigued if that turns out to be the cause</p>



<a name="264945406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264945406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264945406">(Dec 14 2021 at 23:43)</a>:</h4>
<p>Actually, you'll need to change that <code>debug</code> statement to test my hypothesis.</p>



<a name="264945485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264945485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264945485">(Dec 14 2021 at 23:44)</a>:</h4>
<p>Here's a patch</p>
<div class="codehilite" data-code-language="Darcs Patch"><pre><span></span><code>diff --git a/compiler/rustc_mir_transform/src/elaborate_drops.rs b/compiler/rustc_mir_transform/src/elaborate_drops.rs
index af13c734e5b..17107bcbf17 100644
<span class="gd">--- a/compiler/rustc_mir_transform/src/elaborate_drops.rs</span>
<span class="gi">+++ b/compiler/rustc_mir_transform/src/elaborate_drops.rs</span>
@@ -273,7 +273,7 @@ fn param_env(&amp;self) -&gt; ty::ParamEnv&lt;'tcx&gt; {
     fn create_drop_flag(&amp;mut self, index: MovePathIndex, span: Span) {
         let tcx = self.tcx;
         let patch = &amp;mut self.patch;
<span class="gd">-        debug!("create_drop_flag({:?})", self.body.span);</span>
<span class="gi">+        debug!("create_drop_flag({:?})", index);</span>
         self.drop_flags.entry(index).or_insert_with(|| patch.new_internal(tcx.types.bool, span));
     }
</code></pre></div>



<a name="264945532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264945532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264945532">(Dec 14 2021 at 23:45)</a>:</h4>
<p>My output is:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">DEBUG</span><span class="w"> </span><span class="n">rustc_mir_transform</span>::<span class="n">elaborate_drops</span><span class="w"> </span><span class="n">create_drop_flag</span><span class="p">(</span><span class="n">mp1</span><span class="p">)</span><span class="w"></span>
<span class="n">DEBUG</span><span class="w"> </span><span class="n">rustc_mir_transform</span>::<span class="n">elaborate_drops</span><span class="w"> </span><span class="n">create_drop_flag</span><span class="p">(</span><span class="n">mp7</span><span class="p">)</span><span class="w"></span>
<span class="n">DEBUG</span><span class="w"> </span><span class="n">rustc_mir_transform</span>::<span class="n">elaborate_drops</span><span class="w"> </span><span class="n">create_drop_flag</span><span class="p">(</span><span class="n">mp8</span><span class="p">)</span><span class="w"></span>
</code></pre></div>



<a name="264945734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264945734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264945734">(Dec 14 2021 at 23:47)</a>:</h4>
<p>If yours is the same, the problem is hashmap iteration order. If it's different, there's something deeper in <code>rustc</code> (<code>MoveData</code> or MIR building).</p>



<a name="264946067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946067">(Dec 14 2021 at 23:50)</a>:</h4>
<p>The iteration order of an <code>FxHashMap</code> depends on the host architecture (32 bit vs 64 bit)</p>



<a name="264946106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946106">(Dec 14 2021 at 23:51)</a>:</h4>
<p>See <a href="https://github.com/rust-lang/rust/issues/65042">https://github.com/rust-lang/rust/issues/65042</a></p>



<a name="264946230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946230">(Dec 14 2021 at 23:52)</a>:</h4>
<p>and <a href="https://github.com/rust-lang/rust/issues/63713">https://github.com/rust-lang/rust/issues/63713</a></p>



<a name="264946258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946258">(Dec 14 2021 at 23:53)</a>:</h4>
<p>The different seed is introduced here: <a href="https://github.com/rust-lang/rustc-hash/blob/5e09ea0a1c7ab7e4f9e27771f5a0e5a36c58d1bb/src/lib.rs#L64-L67">https://github.com/rust-lang/rustc-hash/blob/5e09ea0a1c7ab7e4f9e27771f5a0e5a36c58d1bb/src/lib.rs#L64-L67</a></p>



<a name="264946293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946293">(Dec 14 2021 at 23:53)</a>:</h4>
<p>I assume we're both on 64-bit, though, and the iteration order should be deterministic if the insertion order is the same, right?</p>



<a name="264946349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946349">(Dec 14 2021 at 23:54)</a>:</h4>
<p>Yes, if the insertion order is the same</p>



<a name="264946754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946754">(Dec 14 2021 at 23:59)</a>:</h4>
<p>I mean, I assume we'll end up changing this particular instance to something with a stable iteration order, but now I'm still curious what the root cause is.</p>



<a name="264946858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946858">(Dec 15 2021 at 00:00)</a>:</h4>
<p>I opened <a href="https://github.com/rust-lang/rust/issues/91943">https://github.com/rust-lang/rust/issues/91943</a> to track fixing that</p>



<a name="264946987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264946987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264946987">(Dec 15 2021 at 00:01)</a>:</h4>
<p>Serious question: is a 32-bit compiler ever built and used?</p>



<a name="264947087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947087">(Dec 15 2021 at 00:02)</a>:</h4>
<p>I think it's still a tier-1 platform for x86, right?</p>



<a name="264947124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947124">(Dec 15 2021 at 00:02)</a>:</h4>
<p>Yeah, it is: <a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html#tier-1-with-host-tools">https://doc.rust-lang.org/nightly/rustc/platform-support.html#tier-1-with-host-tools</a></p>



<a name="264947153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947153">(Dec 15 2021 at 00:02)</a>:</h4>
<p>I wonder if that's really necessary, or if providing cross-compilation to 32-bit would be enough</p>



<a name="264947172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947172">(Dec 15 2021 at 00:03)</a>:</h4>
<p>True, tier 1s are:</p>
<div class="codehilite"><pre><span></span><code>aarch64-unknown-linux-gnu   ARM64 Linux (kernel 4.2, glibc 2.17+) 1
i686-pc-windows-gnu 32-bit MinGW (Windows 7+)
i686-pc-windows-msvc    32-bit MSVC (Windows 7+)
i686-unknown-linux-gnu  32-bit Linux (kernel 2.6.32+, glibc 2.11+)
x86_64-apple-darwin 64-bit macOS (10.7+, Lion+)
x86_64-pc-windows-gnu   64-bit MinGW (Windows 7+)
x86_64-pc-windows-msvc  64-bit MSVC (Windows 7+)
x86_64-unknown-linux-gnu    64-bit Linux (kernel 2.6.32+, glibc 2.11+)
</code></pre></div>



<a name="264947197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/mir-opt/issue-41888.rs%20test%20failure%20on%20%60master%60/near/264947197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/131828-t-compiler/topic/mir-opt.2Fissue-41888.2Ers.20test.20failure.20on.20.60master.60.html#264947197">(Dec 15 2021 at 00:03)</a>:</h4>
<p>Still, I wonder if anybody is using those seriously</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
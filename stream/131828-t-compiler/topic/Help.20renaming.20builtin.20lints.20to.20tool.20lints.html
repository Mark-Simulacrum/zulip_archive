<html>
<head><meta charset="utf-8"><title>Help renaming builtin lints to tool lints · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html">Help renaming builtin lints to tool lints</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="221206757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221206757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221206757">(Dec 30 2020 at 11:42)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> So the <code>check_tool_name_for_backwards_compat</code> was implemented with only Clippy in mind, but could also be reused for rustdoc. This can be done, by modifying <a href="https://github.com/rust-lang/rust/blob/b9c403be11bef38638b38012be80444ad3f09dde/compiler/rustc_lint/src/context.rs#L382">this line</a> to also cover rustdoc. </p>
<p>What this would do is to check if there is a tool lint for the specified lint name and if there is, emit a warning <a href="https://github.com/rust-lang/rust/blob/b9c403be11bef38638b38012be80444ad3f09dde/compiler/rustc_lint/src/levels.rs#L301-L327">here</a>. (The warning message needs to be adapted, removing the mention of clippy) </p>
<p>To be more specific:<br>
If <code>#[allow(broken_intra_doc_links)]</code> is used anywhere and you would change all lints to be scoped with <code>rustdoc::</code> (+modify <a href="https://github.com/rust-lang/rust/blob/b9c403be11bef38638b38012be80444ad3f09dde/compiler/rustc_lint/src/context.rs#L382">this line</a>), a warning will be emitted for the <code>allow</code> attribute, but it will still work without adding <code>rustdoc::</code> to the lint name.</p>



<a name="221218803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221218803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221218803">(Dec 30 2020 at 15:06)</a>:</h4>
<p><span class="user-mention" data-user-id="264664">@flip1995</span> hmm, I tried this last night but it didn't work: <a href="https://github.com/jyn514/rust/commit/e31ac63c3198c0bc1c26fdb336a36e6e465c3f88">https://github.com/jyn514/rust/commit/e31ac63c3198c0bc1c26fdb336a36e6e465c3f88</a></p>



<a name="221218815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221218815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221218815">(Dec 30 2020 at 15:07)</a>:</h4>
<p>do I need to keep the existing <code>declare_lint!</code> calls in rustc_lint_defs?</p>



<a name="221222191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221222191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221222191">(Dec 30 2020 at 15:56)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> You have to use the <code>declare_tool_lint</code> macro. Clippy does this by defining its own macro: <a href="https://github.com/rust-lang/rust-clippy/blob/0d8a27a6f6a1b0cd69f531d34dfbda65bbcf1cfa/clippy_lints/src/lib.rs#L106-L108">https://github.com/rust-lang/rust-clippy/blob/0d8a27a6f6a1b0cd69f531d34dfbda65bbcf1cfa/clippy_lints/src/lib.rs#L106-L108</a></p>
<p>So you should be able to define the lints like this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">declare_tool_lint</span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">rustdoc</span>::<span class="n">BROKEN_INTRA_DOC_LINKS</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">Warn</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">"failures in resolving intra-doc link targets"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Note the <code>rustdoc::</code> in front of the lint name.</p>



<a name="221222322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221222322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221222322">(Dec 30 2020 at 15:58)</a>:</h4>
<p>(outdated)</p>



<a name="221223172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221223172" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221223172">(Dec 30 2020 at 16:09)</a>:</h4>
<p>ok, using <code>declare_tool_lint</code> now registers the lints properly, but it's still not picking up on the renaming</p>



<a name="221223236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221223236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221223236">(Dec 30 2020 at 16:10)</a>:</h4>
<p>I tried <code>register_renamed("broken_intra_doc_links", "rustdoc::broken_intra_doc_links");</code> which panicked with 'invalid renaming'</p>



<a name="221223329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221223329" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221223329">(Dec 30 2020 at 16:10)</a>:</h4>
<p>oh wait I added back the old lints lol, let me remove them again</p>



<a name="221223599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221223599" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221223599">(Dec 30 2020 at 16:12)</a>:</h4>
<p>You don't have to add <code>register_renamed</code> for those lints. This is magically checked in the rustc_lints::context module already.</p>



<a name="221224198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221224198" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221224198">(Dec 30 2020 at 16:21)</a>:</h4>
<p>didn't work unfortunately :/</p>
<div class="codehilite"><pre><span></span><code>warning: unknown lint: `non_autolinks`
 --&gt; src/test/rustdoc-ui/url-improvements.rs:1:9
  |
1 | #![deny(non_autolinks)]
  |         ^^^^^^^^^^^^^
  |
  = note: `#[warn(unknown_lints)]` on by default
</code></pre></div>



<a name="221224300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221224300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221224300">(Dec 30 2020 at 16:23)</a>:</h4>
<p>I think <code>check_tool_name_for_backwards_compat</code> might be related specifically to lint groups? I want it to register renames for individual lints</p>



<a name="221224884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221224884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221224884">(Dec 30 2020 at 16:30)</a>:</h4>
<p>this is being executed so I don't know what's going wrong :/</p>
<div class="codehilite"><pre><span></span><code>DEBUG rustc_lint::context checking rustdoc::non_autolinks for backwards compat
warning: unknown lint: `non_autolinks`
 --&gt; src/test/rustdoc-ui/url-improvements.rs:1:9
  |
1 | #![deny(non_autolinks)]
  |         ^^^^^^^^^^^^^
  |
  = note: `#[warn(unknown_lints)]` on by default
</code></pre></div>



<a name="221225233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225233">(Dec 30 2020 at 16:37)</a>:</h4>
<p>With which compiler stage are you testing this? Have you registered the lints with <code>store.register_lints([NON_AUTOLINKS, ...])</code>?</p>



<a name="221225250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225250">(Dec 30 2020 at 16:37)</a>:</h4>
<p>Can you push the code and send me a link to the branch?</p>



<a name="221225265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225265">(Dec 30 2020 at 16:37)</a>:</h4>
<p>I'm testing with stage 1. I called <code>register_group</code> but not <code>register_lints</code> - do I need both?</p>



<a name="221225273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225273" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225273">(Dec 30 2020 at 16:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221225250">said</a>:</p>
<blockquote>
<p>Can you push the code and send me a link to the branch?</p>
</blockquote>
<p>sure, one sec</p>



<a name="221225326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225326">(Dec 30 2020 at 16:38)</a>:</h4>
<p>Yeah, <code>register_lints</code> does the actual registering of the lint. <code>register_group</code> is optional, if you want to group lints.</p>



<a name="221225327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225327" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225327">(Dec 30 2020 at 16:38)</a>:</h4>
<p>Yeah, <code>register_lints</code> does the actual registering of the lint. <code>register_group</code> is optional, if you want to group lints.</p>



<a name="221225340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225340" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225340">(Dec 30 2020 at 16:38)</a>:</h4>
<p><a href="https://github.com/jyn514/rust/commits/rustdoc-lints">https://github.com/jyn514/rust/commits/rustdoc-lints</a></p>



<a name="221225347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225347" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225347">(Dec 30 2020 at 16:38)</a>:</h4>
<p>ah, ok</p>



<a name="221225611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225611" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225611">(Dec 30 2020 at 16:42)</a>:</h4>
<p>ayyy that did it <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
<div class="codehilite"><pre><span></span><code>warning: lint name `non_autolinks` is deprecated and may not have an effect in the future. Also `cfg_attr(cargo-clippy)` won&#39;t be necessary anymore
 --&gt; src/test/rustdoc-ui/url-improvements.rs:1:9
  |
1 | #![deny(non_autolinks)]
  |         ^^^^^^^^^^^^^ help: change it to: `rustdoc::non_autolinks`
  |
  = note: `#[warn(renamed_and_removed_lints)]` on by default
</code></pre></div>



<a name="221225615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225615" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225615">(Dec 30 2020 at 16:42)</a>:</h4>
<p>thank you <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="221225641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225641" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225641">(Dec 30 2020 at 16:43)</a>:</h4>
<p>it looks like this does have an effect though, right? Can I change the error to just suggest changing the name?</p>
<div class="codehilite"><pre><span></span><code>error: unneeded long form for URL
 --&gt; src/test/rustdoc-ui/url-improvements.rs:3:5
  |
3 | /// [http://aa.com](http://aa.com)
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use an automatic link instead: `&lt;http://aa.com&gt;`
  |
note: the lint level is defined here
 --&gt; src/test/rustdoc-ui/url-improvements.rs:1:9
  |
1 | #![deny(non_autolinks)]
  |         ^^^^^^^^^^^^^
</code></pre></div>



<a name="221225731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225731">(Dec 30 2020 at 16:44)</a>:</h4>
<p>Nice! Please also remove the mention of <code>cfg_attr(clippy)</code> from the message, while you're at it. This isn't a thing since 1 1/2 year or so anymore.</p>



<a name="221225741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225741">(Dec 30 2020 at 16:44)</a>:</h4>
<p>(duplicated)</p>



<a name="221225746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225746">(Dec 30 2020 at 16:45)</a>:</h4>
<p>(duplicated)</p>



<a name="221225754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225754">(Dec 30 2020 at 16:45)</a>:</h4>
<p>It has to have an effect, right?</p>



<a name="221225770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225770" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225770">(Dec 30 2020 at 16:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221225741">said</a>:</p>
<blockquote>
<p>(duplicated)</p>
</blockquote>
<p>yeah mobile zulip is awful <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="221225779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225779" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225779">(Dec 30 2020 at 16:45)</a>:</h4>
<p>This is just deprecating the lint, not actually removing it?</p>



<a name="221225832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225832">(Dec 30 2020 at 16:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">Léo Lanteri Thauvin</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221225779">said</a>:</p>
<blockquote>
<p>This is just deprecating the lint, not removing it</p>
</blockquote>
<p>right, what I mean is that <code>#[deny(non_autolinks)]</code> behaves the same as <code>deny(rustdoc::non_autolinks)</code></p>



<a name="221225848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225848">(Dec 30 2020 at 16:46)</a>:</h4>
<p>Isn't that desirable for a deprecation period?</p>



<a name="221225853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225853">(Dec 30 2020 at 16:46)</a>:</h4>
<p>Yes this still has an effect.  That's by design. It should be an alias. I think the massage that the attribute without the <code>rustdoc::</code> scope may not have an effect in the future is still fine?</p>



<a name="221225883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221225883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221225883">(Dec 30 2020 at 16:47)</a>:</h4>
<p>yeah, I misread it - it says "may not have an effect in the future", not "may not have an effect"</p>



<a name="221226027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226027" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226027">(Dec 30 2020 at 16:49)</a>:</h4>
<p>hmm but now there's a different issue:</p>
<div class="codehilite"><pre><span></span><code>error[E0710]: an unknown tool name found in scoped lint: `rustdoc::broken_intra_doc_links`
 --&gt; intra-doc/broken-reexport.rs:4:9
  |
4 | #![deny(rustdoc::broken_intra_doc_links)]
  |         ^^^^^^^
</code></pre></div>



<a name="221226035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226035">(Dec 30 2020 at 16:50)</a>:</h4>
<p>this is when running with rustc directly</p>



<a name="221226097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226097" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226097">(Dec 30 2020 at 16:50)</a>:</h4>
<p>You probably have to "register" <code>rustdoc</code> somewhere</p>



<a name="221226108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226108">(Dec 30 2020 at 16:50)</a>:</h4>
<p>how do I do that?</p>



<a name="221226111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226111" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226111">(Dec 30 2020 at 16:50)</a>:</h4>
<p>See <code>is_known_lint_tool</code></p>



<a name="221226112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226112" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226112">(Dec 30 2020 at 16:50)</a>:</h4>
<p>oh boooo</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">is_known_lint_tool</span><span class="p">(</span><span class="n">m_item</span>: <span class="nc">Ident</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">bool</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="n">sym</span>::<span class="n">clippy</span><span class="p">,</span><span class="w"> </span><span class="n">sym</span>::<span class="n">rustc</span><span class="p">].</span><span class="n">contains</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_item</span><span class="p">.</span><span class="n">name</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="221226121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226121">(Dec 30 2020 at 16:50)</a>:</h4>
<p>Oh yeah tool lints are only allowed for <code>rustc::</code> and <code>clippy::</code>. This is hardcoded somewhere. I couldn't find it before though.</p>



<a name="221226135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221226135" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221226135">(Dec 30 2020 at 16:51)</a>:</h4>
<p>Oh yeah, that's it. Just add rustdoc here.</p>



<a name="221227451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227451" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227451">(Dec 30 2020 at 17:06)</a>:</h4>
<p>another question, sorry to keep bothering you. Rustdoc is now ignoring unknown lints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#![deny(rustdoc::x)]</span><span class="w"></span>
<span class="c1">//~^ ERROR unknown lint</span>
<span class="cp">#![deny(rustdoc::intra_doc_link_resolution_failure)]</span><span class="w"></span>
<span class="c1">//~^ ERROR lint `intra_doc_link_resolution_failure` has been renamed</span>
</code></pre></div>
<p>^ that has no output</p>



<a name="221227485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227485">(Dec 30 2020 at 17:07)</a>:</h4>
<p>I think the lint system assumes anything starting with <code>rustdoc::</code> is valid? But I want it to give a warning instead.</p>



<a name="221227605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227605">(Dec 30 2020 at 17:08)</a>:</h4>
<p>Oh yeah, that's the thing with tool lints: If something is prefixed with a tool name, rustc assumes that this lint is available in the tool and never warns on it. The tool then has to deal with the possibility of a unknown tool lint itself.</p>



<a name="221227606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227606" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227606">(Dec 30 2020 at 17:08)</a>:</h4>
<p>Oh yeah, that's the thing with tool lints: If something is prefixed with a tool name, rustc assumes that this lint is available in the tool and never warns on it. The tool then has to deal with the possibility of a unknown tool lint itself.</p>



<a name="221227645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227645" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227645">(Dec 30 2020 at 17:08)</a>:</h4>
<p>Clippy has the <code>unknown_clippy_lints</code> for this.</p>



<a name="221227692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227692">(Dec 30 2020 at 17:09)</a>:</h4>
<p>that's frustrating :/</p>



<a name="221227701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227701" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227701">(Dec 30 2020 at 17:09)</a>:</h4>
<p>ok, let me look at <code>unknown_clippy_lints</code></p>



<a name="221227805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221227805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221227805">(Dec 30 2020 at 17:10)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust-clippy/blob/7a7399076ac7494f27a1fc4ffd377da33eb80484/clippy_lints/src/attrs.rs#L411">https://github.com/rust-lang/rust-clippy/blob/7a7399076ac7494f27a1fc4ffd377da33eb80484/clippy_lints/src/attrs.rs#L411</a></p>



<a name="221228173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221228173" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221228173">(Dec 30 2020 at 17:11)</a>:</h4>
<p>could we instead get rustc to warn on unknown lints if there's any lint for that tool registered?</p>



<a name="221228241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221228241" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221228241">(Dec 30 2020 at 17:12)</a>:</h4>
<p>then each tool doesn't have to copy paste this code</p>



<a name="221228613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221228613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221228613">(Dec 30 2020 at 17:14)</a>:</h4>
<p>That would be possible. But you'd have to implement a check for this. There probably was a reason why we decided to let it be handled by the tool back then, though...</p>



<a name="221228721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221228721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221228721">(Dec 30 2020 at 17:14)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/b9c403be11bef38638b38012be80444ad3f09dde/compiler/rustc_lint/src/levels.rs#L338">https://github.com/rust-lang/rust/blob/b9c403be11bef38638b38012be80444ad3f09dde/compiler/rustc_lint/src/levels.rs#L338</a></p>



<a name="221228929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221228929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221228929">(Dec 30 2020 at 17:16)</a>:</h4>
<p>heh, you added the comment: <a href="https://github.com/rust-lang/rust/commit/7b9388b7b5fcdbb2f7e7178dc0a533e3284184c5">https://github.com/rust-lang/rust/commit/7b9388b7b5fcdbb2f7e7178dc0a533e3284184c5</a></p>



<a name="221228983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221228983" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221228983">(Dec 30 2020 at 17:17)</a>:</h4>
<p>the closest thing I found was <a href="https://github.com/rust-lang/rust/pull/52851#discussion_r206079410">https://github.com/rust-lang/rust/pull/52851#discussion_r206079410</a> which doesn't seem very satisfying</p>



<a name="221229121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229121">(Dec 30 2020 at 17:18)</a>:</h4>
<p>shouldn't it just be the same behavior as a normal unknown lint?</p>



<a name="221229439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229439">(Dec 30 2020 at 17:22)</a>:</h4>
<p>Ah yeah, the argument was to keep it consistent with tool attributes, like <code>rustfmt::skip</code>: tools have to deal with unknown attributes. So also lint tools should deal with unknown lints.</p>
<p>2 1/2 years later, I think this is not the best solution and we should detect if it couldn't find the lint because it doesn't exist or because the tool isn't used.</p>
<p>We can just change this behavior, since <code>is_known_lint_tool</code> makes sure, that only specific tools are allowed to implement tool lints. (Good thing, we didn't stabilize the tool_lint feature)</p>



<a name="221229511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229511">(Dec 30 2020 at 17:23)</a>:</h4>
<p>doing that now</p>



<a name="221229592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229592" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229592">(Dec 30 2020 at 17:24)</a>:</h4>
<p>The <code>unknown_clippy_lints</code> lint will then have to be deprecated. I can do this for you, if you want.</p>



<a name="221229616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229616">(Dec 30 2020 at 17:24)</a>:</h4>
<p>that would be great! maybe changing this should be a separate PR from deprecating rustdoc's lints though <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="221229750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229750" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229750">(Dec 30 2020 at 17:26)</a>:</h4>
<p>Yeah I guess. Any idea how to check if lints from a tool are available? Maybe add a separate <code>LintStore::register_tool_lints</code> <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="221229789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229789">(Dec 30 2020 at 17:27)</a>:</h4>
<p>I was just going to do</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">lint_groups</span><span class="p">.</span><span class="n">any</span><span class="p">(</span><span class="o">|</span><span class="n">lint</span><span class="o">|</span><span class="w"> </span><span class="n">lint</span><span class="p">.</span><span class="n">starts_with</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"{}::"</span><span class="p">,</span><span class="w"> </span><span class="n">tool_name</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>



<a name="221229822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229822">(Dec 30 2020 at 17:27)</a>:</h4>
<p>less work for maintainers like me :P</p>



<a name="221229961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221229961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221229961">(Dec 30 2020 at 17:29)</a>:</h4>
<p>I think <code>self.by_name.any</code> would be better. A tool doesn't have to register a group for lints.</p>
<p>Also the edge case of a tool defining 0 lints should be covered in the tests.</p>



<a name="221230053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230053" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230053">(Dec 30 2020 at 17:30)</a>:</h4>
<p>hmm, I don't know how to detect a tool that defines 0 lints</p>



<a name="221230115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230115" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230115">(Dec 30 2020 at 17:31)</a>:</h4>
<p>do we need to support that? the only tool that does that is rustfmt and I don't think it uses lints at all; it's not registered in <code>is_known_lint_tool</code></p>



<a name="221230266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230266" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230266">(Dec 30 2020 at 17:33)</a>:</h4>
<p>We don't have to care about this yet, but it should be well defined once we stabilize tool_lints. Adding a regression test makes definitely sense though. (Also a FIXME for this case).</p>



<a name="221230321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230321">(Dec 30 2020 at 17:34)</a>:</h4>
<p>ah ok, I'm fine with a FIXME and a test showing a current behavior</p>



<a name="221230357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230357" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230357">(Dec 30 2020 at 17:34)</a>:</h4>
<p>Yeah that should be good enough for now. You can also write <code>// FIXME(flip1995): ...</code> if you want.</p>



<a name="221230646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230646">(Dec 30 2020 at 17:38)</a>:</h4>
<p>ooh this is <em>so</em> close</p>
<div class="codehilite"><pre><span></span><code>error: unknown lint: `x`
 --&gt; /home/joshua/rustc3/src/test/rustdoc-ui/unknown-renamed-lints.rs:7:9
  |
7 | #![deny(rustdoc::x)]
  |         ^^^^^^^^^^

error: unknown lint: `intra_doc_link_resolution_failure`
 --&gt; /home/joshua/rustc3/src/test/rustdoc-ui/unknown-renamed-lints.rs:9:9
  |
9 | #![deny(rustdoc::intra_doc_link_resolution_failure)]
  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</code></pre></div>



<a name="221230686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230686" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230686">(Dec 30 2020 at 17:38)</a>:</h4>
<p><code>intra_doc_link</code> I think I have to register myself since it was renamed (twice now), the first one just looks like a bug I introduced</p>



<a name="221230746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230746">(Dec 30 2020 at 17:39)</a>:</h4>
<p>I just noticed the <code>rustc3</code> folder <span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="221230757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230757" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230757">(Dec 30 2020 at 17:39)</a>:</h4>
<p>oh yeah I have a lot of copies lol</p>



<a name="221230785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230785" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230785">(Dec 30 2020 at 17:40)</a>:</h4>
<p>one is completely dedicated to <a href="https://github.com/rust-lang/rust/pull/79540">https://github.com/rust-lang/rust/pull/79540</a>, another is for rebasing random PRs so I don't destroy my build cache, the third one is for actually working on things</p>



<a name="221230880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230880" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230880">(Dec 30 2020 at 17:40)</a>:</h4>
<p>The compiler should still stay silent, if no lints were found for the tool.</p>



<a name="221230894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230894">(Dec 30 2020 at 17:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221230880">said</a>:</p>
<blockquote>
<p>The compiler should still stay silent, if no lints were found for the tool.</p>
</blockquote>
<p>right, this is running rustdoc</p>



<a name="221230908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230908" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230908">(Dec 30 2020 at 17:41)</a>:</h4>
<p>I'll add a test for the compiler directly in a sec, I'm still at the 'get things working' stage <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="221230911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230911" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230911">(Dec 30 2020 at 17:41)</a>:</h4>
<p>Hm, that's weird <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="221230917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230917">(Dec 30 2020 at 17:41)</a>:</h4>
<p>you should see all the warnings the compiler gives when building rustdoc itself right now <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="221230995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230995">(Dec 30 2020 at 17:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221230911">said</a>:</p>
<blockquote>
<p>Hm, that's weird <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>
</blockquote>
<p>the reason is that <code>intra_doc_resolution_failure</code> was renamed twice: once to <code>broken_intra_doc_links</code> and again to <code>rustdoc::broken_intra_doc_links</code></p>



<a name="221230997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221230997" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221230997">(Dec 30 2020 at 17:42)</a>:</h4>
<p>I need to figure out how to tell that to the lint machinery</p>



<a name="221231115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231115" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231115">(Dec 30 2020 at 17:44)</a>:</h4>
<blockquote>
<p>thread 'rustc' panicked at 'src/librustdoc/core.rs:484:24: invalid lint renaming of intra_doc_resolution_failure to broken_intra_doc_links', compiler/rustc_middle/src/util/bug.rs:35:26</p>
</blockquote>
<p><span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="221231125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231125">(Dec 30 2020 at 17:44)</a>:</h4>
<p>Having an alias from <code>rustdoc::intra_doc_resolution_failure</code> to <code>rustdoc::broken_intra_doc_links</code> is probably unnecessary, right?</p>



<a name="221231146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231146" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231146">(Dec 30 2020 at 17:44)</a>:</h4>
<p>yeah, that shouldn't be needed</p>



<a name="221231147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231147" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231147">(Dec 30 2020 at 17:44)</a>:</h4>
<p>Because people won't have <code>rustdoc::intra_doc_resolution_failure</code> in their codebases</p>



<a name="221231176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231176" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231176">(Dec 30 2020 at 17:45)</a>:</h4>
<p>I'd guess you have to change the alias for <code>intra_doc_resolution_failure</code> to use <code>rustdoc::broken_intra_doc_links</code>?</p>



<a name="221231198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231198" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231198">(Dec 30 2020 at 17:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">Léo Lanteri Thauvin</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221231176">said</a>:</p>
<blockquote>
<p>I'd guess you have to change the alias for <code>intra_doc_resolution_failure</code> to use <code>rustdoc::</code>?</p>
</blockquote>
<p>trying that</p>



<a name="221231317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231317">(Dec 30 2020 at 17:47)</a>:</h4>
<p>ayyyy</p>
<div class="codehilite"><pre><span></span><code>error: lint `intra_doc_link_resolution_failure` has been renamed to `rustdoc::broken_intra_doc_links`
 --&gt; /home/joshua/rustc3/src/test/rustdoc-ui/unknown-renamed-lints.rs:9:9
  |
9 | #![deny(intra_doc_link_resolution_failure)]
  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `rustdoc::broken_intra_doc_links`
  |
note: the lint level is defined here
 --&gt; /home/joshua/rustc3/src/test/rustdoc-ui/unknown-renamed-lints.rs:3:9
  |
3 | #![deny(renamed_and_removed_lints)]
  |         ^^^^^^^^^^^^^^^^^^^^^^^^^

error: unknown lint: `intra_doc_link_resolution_failure`
  --&gt; /home/joshua/rustc3/src/test/rustdoc-ui/unknown-renamed-lints.rs:14:9
   |
14 | #![deny(rustdoc::intra_doc_link_resolution_failure)]
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: did you mean: `intra_doc_link_resolution_failure`
</code></pre></div>



<a name="221231328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231328" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231328">(Dec 30 2020 at 17:47)</a>:</h4>
<p>best of both worlds :)</p>



<a name="221231457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231457">(Dec 30 2020 at 17:49)</a>:</h4>
<p>now if I could just get it to say 'unknown lint <code>rustdoc::x</code>' instead of 'unknown lint <code>x</code>' we'd be all set :)</p>



<a name="221231638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221231638" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221231638">(Dec 30 2020 at 17:52)</a>:</h4>
<p>yeah see it's especially confusing here because it would be valid if you used <code>rustdoc</code> alone:</p>
<div class="codehilite"><pre><span></span><code>warning: unknown lint: `rustdoc`
  --&gt; $DIR/check-fail.rs:4:9
   |
LL | #![deny(rustdoc::rustdoc)]
   |         ^^^^^^^^^^^^^^^^
</code></pre></div>



<a name="221232084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232084" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232084">(Dec 30 2020 at 17:58)</a>:</h4>
<p>Clippy uses <code>clippy::all</code> for the default set of lints.</p>



<a name="221232118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232118">(Dec 30 2020 at 17:58)</a>:</h4>
<p>(aaah, duplicate)</p>



<a name="221232274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232274">(Dec 30 2020 at 18:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221232084">said</a>:</p>
<blockquote>
<p>Clippy uses <code>clippy::all</code> for the default set of lints.</p>
</blockquote>
<p>I don't follow, sorry - how is that related? or are you suggesting that <code>rustdoc::all</code> should be an alias for the <code>rustdoc</code> lint group?</p>



<a name="221232382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232382">(Dec 30 2020 at 18:02)</a>:</h4>
<p>Does the <code>rustdoc</code> lint group already exist? Yeah, I think <code>rustdoc::all</code> would be better, because it will avoid the questions why you have to write <code>rustdoc</code> twice.</p>



<a name="221232407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232407">(Dec 30 2020 at 18:02)</a>:</h4>
<p>oh I was just planning to keep <code>deny(rustdoc)</code></p>



<a name="221232425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232425" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232425">(Dec 30 2020 at 18:02)</a>:</h4>
<p>And I think being consistent with the other tools is interesting</p>



<a name="221232432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232432">(Dec 30 2020 at 18:02)</a>:</h4>
<p>(the <code>rustdoc::rustdoc</code> thing is a <code>sed</code> command gone wrong <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> )</p>



<a name="221232439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232439">(Dec 30 2020 at 18:03)</a>:</h4>
<p>That being said <code>clippy::all</code> is also kind of controversial, because it  doesn't include all lints, just warn-by-default litns.</p>



<a name="221232482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232482">(Dec 30 2020 at 18:03)</a>:</h4>
<p>yeah I think I would prefer to stick with <code>deny(rustdoc)</code> for now</p>



<a name="221232507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232507" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232507">(Dec 30 2020 at 18:04)</a>:</h4>
<p>I would use <code>rustdoc::all</code>. But again, I don't want to get in the way here.</p>



<a name="221232604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232604">(Dec 30 2020 at 18:05)</a>:</h4>
<p>Out of curiosity, is there a reason to not have <code>clippy::*</code>?</p>



<a name="221232720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232720">(Dec 30 2020 at 18:06)</a>:</h4>
<p>does that syntax parse?</p>



<a name="221232729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232729">(Dec 30 2020 at 18:06)</a>:</h4>
<p>I think it would</p>



<a name="221232739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232739">(Dec 30 2020 at 18:06)</a>:</h4>
<p>Since the <code>clippy::*</code> part is a <code>Path</code></p>



<a name="221232871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232871">(Dec 30 2020 at 18:08)</a>:</h4>
<p>It would. But lint names and groups are just strings internally, not paths. So it isn't really supported by the compiler and making it work would be more of a hack than anything else.</p>



<a name="221232936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221232936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221232936">(Dec 30 2020 at 18:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/221231457">said</a>:</p>
<blockquote>
<p>now if I could just get it to say 'unknown lint <code>rustdoc::x</code>' instead of 'unknown lint <code>x</code>' we'd be all set :)</p>
</blockquote>
<p>got it</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/compiler/rustc_lint/src/levels.rs b/compiler/rustc_lint/src/levels.rs</span>
<span class="gh">index 5acc806a04d..eb585f5882e 100644</span>
<span class="gd">--- a/compiler/rustc_lint/src/levels.rs</span>
<span class="gi">+++ b/compiler/rustc_lint/src/levels.rs</span>
<span class="gu">@@ -380,6 +380,11 @@ pub(crate) fn push(</span>
                             src,
                             Some(li.span().into()),
                             |lint| {
<span class="gi">+                                let name = if let Some(tool_name) = tool_name {</span>
<span class="gi">+                                    format!("{}::{}", tool_name, name)</span>
<span class="gi">+                                } else {</span>
<span class="gi">+                                    name.to_string()</span>
<span class="gi">+                                };</span>
                                 let mut db = lint.build(&amp;format!("unknown lint: `{}`", name));
                                 if let Some(suggestion) = suggestion {
                                     db.span_suggestion(
</code></pre></div>



<a name="221233025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221233025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221233025">(Dec 30 2020 at 18:10)</a>:</h4>
<p>oh wait what</p>
<div class="codehilite"><pre><span></span><code>$ rustdoc --test check-attr.rs
error[E0710]: an unknown tool name found in scoped lint: `rustdoc::invalid_codeblock_attributes`
 --&gt; check-attr.rs:1:9
  |
1 | #![deny(rustdoc::invalid_codeblock_attributes)]
  |         ^^^^^^^
</code></pre></div>



<a name="221233150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221233150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221233150">(Dec 30 2020 at 18:12)</a>:</h4>
<p>oops ignore that, wrong version of rustdoc</p>



<a name="221233163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221233163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221233163">(Dec 30 2020 at 18:12)</a>:</h4>
<p>the <em>actual</em> issue is that <code>rustdoc --test</code> ignores unknown and renamed lints</p>



<a name="221233184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221233184" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221233184">(Dec 30 2020 at 18:12)</a>:</h4>
<p>which is probably an issue on rustdoc's end</p>



<a name="221233469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221233469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221233469">(Dec 30 2020 at 18:16)</a>:</h4>
<p>oh lol this is the issue <span class="user-mention silent" data-user-id="264664">flip1995</span> brought up before - in test mode, rustdoc doesn't register lints</p>



<a name="221233475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221233475" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221233475">(Dec 30 2020 at 18:16)</a>:</h4>
<p>I'll just register the lints in both modes</p>



<a name="221234057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221234057" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221234057">(Dec 30 2020 at 18:24)</a>:</h4>
<p>and that did it <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="221234107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221234107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221234107">(Dec 30 2020 at 18:25)</a>:</h4>
<p><span class="user-mention" data-user-id="264664">@flip1995</span> I'll open a PR with just the tool lint changes so you can deprecate the clippy lint</p>



<a name="221236394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221236394" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221236394">(Dec 30 2020 at 18:56)</a>:</h4>
<p><span class="user-mention" data-user-id="264664">@flip1995</span> took me longer than expect to clean things up but <a href="https://github.com/rust-lang/rust/pull/80524">https://github.com/rust-lang/rust/pull/80524</a></p>



<a name="221236472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221236472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221236472">(Dec 30 2020 at 18:57)</a>:</h4>
<p>I try to get to it tomorrow morning. If not it will have to wait until next year ;) So probably Saturday or Sunday.</p>



<a name="221236565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221236565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221236565">(Dec 30 2020 at 18:58)</a>:</h4>
<p>no rush, I still need to write test cases anyway</p>



<a name="221236571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221236571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221236571">(Dec 30 2020 at 18:58)</a>:</h4>
<p>and it probably should see feedback from t-compiler too</p>



<a name="221284722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221284722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221284722">(Dec 31 2020 at 11:35)</a>:</h4>
<p>This will be harder to get right, than expected. I left comments of my findings in the PR.</p>



<a name="221333791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221333791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221333791">(Jan 01 2021 at 03:58)</a>:</h4>
<p>left a reply</p>



<a name="221333795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221333795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221333795">(Jan 01 2021 at 03:58)</a>:</h4>
<p>(and building stage 2, but I don't expect it to be done tonight)</p>



<a name="221356581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/221356581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#221356581">(Jan 01 2021 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="264664">@flip1995</span> what do you think about allowing internal lints in tests? <a href="https://github.com/rust-lang/rust/pull/80573#issuecomment-753330760">https://github.com/rust-lang/rust/pull/80573#issuecomment-753330760</a></p>



<a name="222924604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924604">(Jan 15 2021 at 21:00)</a>:</h4>
<p><span class="user-mention" data-user-id="264664">@flip1995</span> how do I mark <code>unknown_clippy_lints</code> as removed/deprecated?</p>



<a name="222924672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924672" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924672">(Jan 15 2021 at 21:01)</a>:</h4>
<p>right now I think it will give duplicate warnings now that rustc warns properly on unknown lints</p>



<a name="222924699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924699">(Jan 15 2021 at 21:01)</a>:</h4>
<p>I can do this for you. That is faster than explaining it.</p>



<a name="222924717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924717" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924717">(Jan 15 2021 at 21:01)</a>:</h4>
<p>fair enough</p>



<a name="222924727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924727">(Jan 15 2021 at 21:01)</a>:</h4>
<p>let me give you push access</p>



<a name="222924754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924754">(Jan 15 2021 at 21:01)</a>:</h4>
<p>also left a comment in the PR about that</p>



<a name="222924820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924820" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924820">(Jan 15 2021 at 21:02)</a>:</h4>
<p>I do want to test first that the diagnostics are actually duplicated and things work as intended</p>



<a name="222924957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222924957" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222924957">(Jan 15 2021 at 21:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/222924727">said</a>:</p>
<blockquote>
<p>let me give you push access</p>
</blockquote>
<p>sent</p>



<a name="222925374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222925374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222925374">(Jan 15 2021 at 21:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/222924699">said</a>:</p>
<blockquote>
<p>I can do this for you. That is faster than explaining it.</p>
</blockquote>
<p>by the way, you may want to write down how to do this at some point</p>



<a name="222925389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222925389" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222925389">(Jan 15 2021 at 21:06)</a>:</h4>
<p>in case you go on vacation or something</p>



<a name="222925458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222925458" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222925458">(Jan 15 2021 at 21:07)</a>:</h4>
<p><del>wow "have to go on vacation" is like the most menacing way to write that <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> </del></p>



<a name="222925658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222925658" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222925658">(Jan 15 2021 at 21:09)</a>:</h4>
<p>oh oops I should really stop force-pushing now that we're working from the same branch</p>



<a name="222925674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222925674" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222925674">(Jan 15 2021 at 21:09)</a>:</h4>
<p>uhhhhh just <code>git pull --rebase</code> when you get a chance</p>



<a name="222931811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222931811" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222931811">(Jan 15 2021 at 22:04)</a>:</h4>
<p><span class="user-mention" data-user-id="264664">@flip1995</span> do you have time to do this today? I don't mind fumbling with it if you're busy</p>



<a name="222931853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222931853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222931853">(Jan 15 2021 at 22:05)</a>:</h4>
<p>this is blocking <a href="https://github.com/rust-lang/rust/pull/80527">https://github.com/rust-lang/rust/pull/80527</a> so I'd like to merge it relatively soon</p>



<a name="222931995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222931995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222931995">(Jan 15 2021 at 22:06)</a>:</h4>
<p>I'll do this once I've built the compiler and can test Clippy in rustc. Had to rebuild LLVM on the PC I'm currently on.</p>
<p>And I plan to add a <code>cargo dev deprecate</code> command to clippy, rather than writing doc <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="222932020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222932020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222932020">(Jan 15 2021 at 22:06)</a>:</h4>
<blockquote>
<p>Had to rebuild LLVM on the PC I'm currently on.</p>
</blockquote>
<p><span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span></p>



<a name="222932034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222932034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222932034">(Jan 15 2021 at 22:07)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/80932/">https://github.com/rust-lang/rust/pull/80932/</a> should help with that</p>



<a name="222934477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222934477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222934477">(Jan 15 2021 at 22:24)</a>:</h4>
<p>fyi <span class="user-mention" data-user-id="116122">@simulacrum</span> if you have time to review <a href="https://github.com/rust-lang/rust/issues/80932">#80932</a> ^ that would be amazing <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> the changes were relatively simple compared to all the other crazy bootstrap things I've been doing haha</p>



<a name="222934623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222934623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222934623">(Jan 15 2021 at 22:25)</a>:</h4>
<p>err I guess <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Downloading.20static.20LLVM.20on.20windows">https://rust-lang.zulipchat.com/#narrow/stream/182449-t-compiler.2Fhelp/topic/Downloading.20static.20LLVM.20on.20windows</a> would be a better stream</p>



<a name="222934786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222934786" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222934786">(Jan 15 2021 at 22:27)</a>:</h4>
<p>(and let me know if I should stop pinging you for reviews)</p>



<a name="222934845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222934845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222934845">(Jan 15 2021 at 22:27)</a>:</h4>
<p>no pinging is fine, but I won't have the time today I suspect. Hopefully going to knock out all my PRs this weekend though.</p>



<a name="222935547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222935547" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222935547">(Jan 15 2021 at 22:34)</a>:</h4>
<p>so <span class="user-mention" data-user-id="264664">@flip1995</span> I have a follow-up question: I rebased <a href="https://github.com/rust-lang/rust/pull/80527">https://github.com/rust-lang/rust/pull/80527</a> over <a href="https://github.com/rust-lang/rust/pull/80524">https://github.com/rust-lang/rust/pull/80524</a> just now and got the following error:</p>
<div class="codehilite"><pre><span></span><code>error: unknown lint: `non_autolinks`
</code></pre></div>
<p>This is the sort of thing that's meant to be caught by <code>check_tool_name_for_backwards_compat</code>, right? I think the issue is that rustdoc only registers lints when running <em>rustdoc</em>, not when running <em>rustc</em>. How do I tell rustc itself that the lint was renamed?</p>



<a name="222941070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941070">(Jan 15 2021 at 23:33)</a>:</h4>
<p>Hm. Maybe this was the actual reason, why we left the the handling of unknown lints to tools <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="222941543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941543">(Jan 15 2021 at 23:39)</a>:</h4>
<p>no no this is unrelated to the first PR</p>



<a name="222941550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941550">(Jan 15 2021 at 23:39)</a>:</h4>
<p>this is because I removed the built-in lint</p>



<a name="222941613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941613">(Jan 15 2021 at 23:40)</a>:</h4>
<p>and I am confused how this works for clippy but not rustdoc</p>



<a name="222941668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941668">(Jan 15 2021 at 23:41)</a>:</h4>
<p>Oh I think clippy lints had to be allowed with <code>cfg_attr(clippy-driver, allow(lint_name))</code>, so this was never a problem.</p>



<a name="222941676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941676">(Jan 15 2021 at 23:41)</a>:</h4>
<p>oh ugh I see</p>



<a name="222941726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941726">(Jan 15 2021 at 23:42)</a>:</h4>
<p>maybe just register the lints as removed in rustc?</p>



<a name="222941743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222941743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222941743">(Jan 15 2021 at 23:42)</a>:</h4>
<p>yeah, there's few enough I could do them one by one</p>



<a name="222942292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222942292" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222942292">(Jan 15 2021 at 23:49)</a>:</h4>
<p>and if <code>register_renamed</code> doesn't work I can do <code>register_removed("use rustdoc::x")</code> instead</p>



<a name="222942342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222942342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222942342">(Jan 15 2021 at 23:50)</a>:</h4>
<p>yup, why am I not surprised</p>
<div class="codehilite"><pre><span></span><code>thread &#39;rustc&#39; panicked at &#39;compiler/rustc_lint/src/lib.rs:329:11: invalid lint renaming of broken_intra_doc_links to rustdoc::broken_intra_doc_links&#39;, compiler/rustc_middle/src/util/bug.rs:35:26
</code></pre></div>



<a name="222942373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222942373" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222942373">(Jan 15 2021 at 23:50)</a>:</h4>
<p>Yeah you probably have to register them as removed in rustc and if possible as renamed in rustdoc. Not sure if you can do both though</p>



<a name="222942527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222942527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222942527">(Jan 15 2021 at 23:53)</a>:</h4>
<p>hmm, I wonder if <code>check_backwards_compat</code> will still work if it was marked as removed</p>



<a name="222942616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222942616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222942616">(Jan 15 2021 at 23:54)</a>:</h4>
<p>lol, truly the best help</p>
<div class="codehilite"><pre><span></span><code>warning: lint `non_autolinks` has been removed: `use rustdoc::{} instead`
</code></pre></div>



<a name="222943155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222943155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222943155">(Jan 16 2021 at 00:01)</a>:</h4>
<p>close enough:</p>
<div class="codehilite"><pre><span></span><code>warning: lint `non_autolinks` has been removed: use `rustdoc::non_autolinks` instead
</code></pre></div>



<a name="222943186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222943186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222943186">(Jan 16 2021 at 00:01)</a>:</h4>
<p>it won't enable the lint, but the lint already did nothing while running rustc anyway</p>



<a name="222944529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222944529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222944529">(Jan 16 2021 at 00:21)</a>:</h4>
<p>The only thing that isn't working is that for <code>clippy::All</code> doesn't produce a suggestion.</p>



<a name="222945141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222945141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222945141">(Jan 16 2021 at 00:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints/near/222943186">said</a>:</p>
<blockquote>
<p>it won't enable the lint, but the lint already did nothing while running rustc anyway</p>
</blockquote>
<p>I think that is fine. It just shouldn't be a hard error</p>



<a name="222945245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222945245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222945245">(Jan 16 2021 at 00:31)</a>:</h4>
<p>I will do the deprecation tomorrow. It's too late now.</p>



<a name="222991633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222991633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222991633">(Jan 16 2021 at 16:46)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> I pushed my code up. I also modified the <code>no_lint_suggestion</code> method a bit. The Clippy suggestion generation was actually more advanced, so I copied it over to rustc.</p>



<a name="222993325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222993325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222993325">(Jan 16 2021 at 17:15)</a>:</h4>
<p>awesome! thanks so much :) I left a review</p>



<a name="222998635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/Help%20renaming%20builtin%20lints%20to%20tool%20lints/near/222998635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/Help.20renaming.20builtin.20lints.20to.20tool.20lints.html#222998635">(Jan 16 2021 at 18:46)</a>:</h4>
<p>I think I addressed everything</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
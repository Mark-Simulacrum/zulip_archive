<html>
<head><meta charset="utf-8"><title>backport #74557 · t-compiler · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/index.html">t-compiler</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html">backport #74557</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204810163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204810163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204810163">(Jul 23 2020 at 15:10)</a>:</h4>
<p>I pushed <a href="https://github.com/rust-lang/rust/pull/74574/commits/d01e1093baf4d5ebe08a067a2a8e720e7fa7eb22">https://github.com/rust-lang/rust/pull/74574/commits/d01e1093baf4d5ebe08a067a2a8e720e7fa7eb22</a> for the delay_span_bug change discussed</p>



<a name="204810170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204810170" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204810170">(Jul 23 2020 at 15:10)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116083">@pnkfelix</span></p>



<a name="204833935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204833935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204833935">(Jul 23 2020 at 18:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> did you get a chance perhaps to confirm that the delay span bug in that commit is appropriate? Cc <span class="user-mention" data-user-id="119031">@Esteban Küber</span> as well</p>



<a name="204833979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204833979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204833979">(Jul 23 2020 at 18:19)</a>:</h4>
<p>let me see if I can check that now</p>



<a name="204833996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204833996" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204833996">(Jul 23 2020 at 18:19)</a>:</h4>
<p>thanks for checking in about it <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="204836104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836104" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836104">(Jul 23 2020 at 18:34)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> it looks good to me</p>



<a name="204836127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836127">(Jul 23 2020 at 18:34)</a>:</h4>
<p>okay, thanks! I'll approve the release PR then.</p>



<a name="204836136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836136" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836136">(Jul 23 2020 at 18:34)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> are you planning to put same change up on master too?</p>



<a name="204836146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836146" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836146">(Jul 23 2020 at 18:34)</a>:</h4>
<p>I can, yes</p>



<a name="204836155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836155">(Jul 23 2020 at 18:34)</a>:</h4>
<p>I think its probably a good idea</p>



<a name="204836158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836158">(Jul 23 2020 at 18:34)</a>:</h4>
<p>Wasn't... planning on it, exactly</p>



<a name="204836183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836183">(Jul 23 2020 at 18:34)</a>:</h4>
<p>but makes sense to do so</p>



<a name="204836235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836235" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836235">(Jul 23 2020 at 18:35)</a>:</h4>
<p>I mean, if you <em>don't</em> put it up on master</p>



<a name="204836266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836266" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836266">(Jul 23 2020 at 18:35)</a>:</h4>
<p>then I guess we'll just be relying on whatever release tests we run locally catching any "obvious" bugs</p>



<a name="204836269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836269">(Jul 23 2020 at 18:35)</a>:</h4>
<p>with the approach</p>



<a name="204836338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836338" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836338">(Jul 23 2020 at 18:35)</a>:</h4>
<p>yeah, I'll post a PR momentarily</p>



<a name="204836419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836419">(Jul 23 2020 at 18:36)</a>:</h4>
<p>(I don't know what sort of bugs; I suppose the most obvious one I could imagine is if the <code>Handler</code> is dropped somehow <em>before</em> the AST-lowering phase runs, and thus that would trigger the delay_span_bug (because AST-lowering wouldn't have gotten a chance to signal the error we expect it to.)</p>



<a name="204836484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836484" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836484">(Jul 23 2020 at 18:36)</a>:</h4>
<p>which is the kind of thing that I imagine we <em>would</em> catch quite quickly, I think.</p>



<a name="204836505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836505" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836505">(Jul 23 2020 at 18:36)</a>:</h4>
<p>even if we didn't put this on nightly</p>



<a name="204836561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836561">(Jul 23 2020 at 18:37)</a>:</h4>
<p>as long as we do run the test suites of the release channels. <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="204836624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/131828-t-compiler/topic/backport%20%2374557/near/204836624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/131828-t-compiler/topic/backport.20.2374557.html#204836624">(Jul 23 2020 at 18:37)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/74692">https://github.com/rust-lang/rust/pull/74692</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>::.oO(what is this? TurboWish? `::*`? `::.oO(?)`?) · turbowish · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/index.html">turbowish</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html">::.oO(what is this? TurboWish? `::*`? `::.oO(?)`?)</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="233950600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/233950600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#233950600">(Apr 10 2021 at 12:13)</a>:</h4>
<p>Hey there, anyone watching. One of the things AWS wants to invest in, for Rust, is a tool to help developers ensure that Rust lives up to its promise of being <em>fast</em>.</p>



<a name="233950720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/233950720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#233950720">(Apr 10 2021 at 12:15)</a>:</h4>
<p>as part of our investigations surrounding that, we think what our customers (who largely operate cloud services) need most right now are better tools for understanding why their async-await code is not performing up to expectations</p>



<a name="233950780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/233950780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#233950780">(Apr 10 2021 at 12:16)</a>:</h4>
<p>(but there are other clear places that <em>also</em> need improvement. For example, it can be really hard to use <code>perf</code> on optimized Rust code.)</p>



<a name="233950901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/233950901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#233950901">(Apr 10 2021 at 12:18)</a>:</h4>
<p>((and I personally would like to provide memory-profiling tools that leverage Rust's semantic model of ownership to give a richer understanding of memory usage than what you get out of the box with the usual tools built to work with C <em>et cetera</em>))</p>



<a name="234076838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234076838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234076838">(Apr 11 2021 at 21:15)</a>:</h4>
<blockquote>
<p>For example, it can be really hard to use perf on optimized Rust code.</p>
</blockquote>
<p>Do you have a link to something explaining what's hard about it? (I ask this as someone who's never used perf except through perf.rlo.)</p>



<a name="234077008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234077008" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234077008">(Apr 11 2021 at 21:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/284843-project-turbowish/topic/.3A.3A.2EoO.28what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO.28.3F.29.60.3F.29/near/233950901">said</a>:</p>
<blockquote>
<p>((and I personally would like to provide memory-profiling tools that leverage Rust's semantic model of ownership to give a richer understanding of memory usage than what you get out of the box with the usual tools built to work with C <em>et cetera</em>))</p>
</blockquote>
<p>So maybe something where it shows what parts of memory are owned by what functions? E.g., function <code>foo()</code> owns 100 MB of memory and then it narrows down the amount of code you have to look at to reduce memory usage?</p>



<a name="234077232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234077232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234077232">(Apr 11 2021 at 21:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/284843-project-turbowish/topic/.3A.3A.2EoO.28what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO.28.3F.29.60.3F.29/near/233950720">said</a>:</p>
<blockquote>
<p>as part of our investigations surrounding that, we think what our customers (who largely operate cloud services) need most right now are better tools for understanding why their async-await code is not performing up to expectations</p>
</blockquote>
<p>I've heard of tools like <code>coz</code>, is that sort of thing what you mean?</p>



<a name="234154027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234154027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234154027">(Apr 12 2021 at 13:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Camelid</span> <a href="#narrow/stream/284843-project-turbowish/topic/.3A.3A.2EoO.28what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO.28.3F.29.60.3F.29/near/234077232">said</a>:</p>
<blockquote>
<p>I've heard of tools like <code>coz</code>, is that sort of thing what you mean?</p>
</blockquote>
<p>No, I mean something more like what I described in <a href="https://github.com/rust-lang/wg-async-foundations/pull/138">https://github.com/rust-lang/wg-async-foundations/pull/138</a></p>



<a name="234155187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234155187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234155187">(Apr 12 2021 at 13:15)</a>:</h4>
<p>I'd also love some better memory profiling tools. The existing ones leave a lot to be desired. <code>heaptrack</code> has been the least painful one so far, but its interface is basically inscrutable.</p>



<a name="234165705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234165705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234165705">(Apr 12 2021 at 14:13)</a>:</h4>
<p>Using <code>perf</code> hasn't been too troublesome in my experience. I mean, sure... optimized code is fairly garbled even with source annotations. But that's not particularly surprising when you got a call tree 8 functions deep inlined into one and half of the stuff optimized away. At least it shows the inlined call tree!</p>



<a name="234173293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234173293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234173293">(Apr 12 2021 at 14:55)</a>:</h4>
<p>The way I think about turbowish is that it the goal is to create a family of tooling that gives users tons of information about their running rust programs</p>



<a name="234173385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234173385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234173385">(Apr 12 2021 at 14:56)</a>:</h4>
<p>not necessarily all at once</p>



<a name="234173416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234173416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234173416">(Apr 12 2021 at 14:56)</a>:</h4>
<p>in other words, I think eventually it would be great  to profile memory usage</p>



<a name="234173547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234173547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234173547">(Apr 12 2021 at 14:57)</a>:</h4>
<p>I'm also pretty keen on finding ways to integrate and track ownership, e.g. by walking the stack, so we can say things like "this stack frame owns this memory" or "the receiver for that <code>std::mpsc::channel</code> you are blocked on is owned by this thread and is found in this data structure"</p>



<a name="234173565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234173565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234173565">(Apr 12 2021 at 14:57)</a>:</h4>
<p>(sync things can deadlock too...)</p>



<a name="234173625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234173625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234173625">(Apr 12 2021 at 14:57)</a>:</h4>
<p>one thing I pointed out to <span class="user-mention" data-user-id="116083">@pnkfelix</span> that I think is really cool is that, in async functions, all of the stack is actually <em>on the heap</em> and located in data structures for which we have all the type information, we don't have to worry about scraping the stack (which is hard)</p>



<a name="234178903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234178903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234178903">(Apr 12 2021 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="330154">@The 8472</span> one of my plans … hopefully near term plans … is to actually do some interviews, or maybe even interactive screencasts, with various <code>perf</code> users</p>



<a name="234178974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234178974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234178974">(Apr 12 2021 at 15:23)</a>:</h4>
<p>Specifically: I know from experience (my own and of my colleagues) that <code>perf</code> <em>can</em> be useful, but it also can be totally unhelpful</p>



<a name="234179079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234179079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234179079">(Apr 12 2021 at 15:24)</a>:</h4>
<p>and it sometimes can even be unclear which state you’re in. (I.e., I sometimes say “Okay, if I dig a little deeper, is <code>perf</code> going to start illuminating things now?"</p>



<a name="234179174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234179174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234179174">(Apr 12 2021 at 15:24)</a>:</h4>
<p>Some weeks ago <span class="user-mention" data-user-id="116009">@nikomatsakis</span> claimed that in their experience, <code>perf</code> is a tool that either yields results for your problem immediately, or it won’t help at all</p>



<a name="234179216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234179216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234179216">(Apr 12 2021 at 15:25)</a>:</h4>
<p>Anyway: The idea behind the interviews/interactive screen casts</p>



<a name="234179245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234179245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234179245">(Apr 12 2021 at 15:25)</a>:</h4>
<p>is to see expert perf users in action</p>



<a name="234179319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234179319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234179319">(Apr 12 2021 at 15:25)</a>:</h4>
<p>preferably I want to get evidence of how <code>perf</code> is used well, on both <em>C/C++</em> <strong>and</strong> Rust projects</p>



<a name="234179402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234179402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234179402">(Apr 12 2021 at 15:26)</a>:</h4>
<p>that is, I want to know how great <code>perf</code> can be in the optimal setting for it (which I assume is C, probably compiled with <code>gdb</code>)</p>



<a name="234179476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234179476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234179476">(Apr 12 2021 at 15:26)</a>:</h4>
<p>and that way, I’ll have an idea of how far one might go with it <em>if</em> we fix foundational issues that prevent Rust from matching C in that space</p>



<a name="234188039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234188039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234188039">(Apr 12 2021 at 16:20)</a>:</h4>
<blockquote>
<p>Some weeks ago @nikomatsakis claimed that in their experience, perf is a tool that either yields results for your problem immediately, or it won’t help at all</p>
</blockquote>
<p>That's my experience with the <code>perf report</code> UI. But if you use a visualiser like hotspot then there's room for additional digging.</p>



<a name="234188509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234188509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234188509">(Apr 12 2021 at 16:23)</a>:</h4>
<p>On the other hand I would be totally lost if I wanted to do heap profiling. But I haven't heard of heaptrack before.</p>
<p>So maybe a starting point would be to collect recipes in a cookbook? Common approaches and tricks that people have? I only learned about hotspot through some reddit post, even though I had a stack overflow question open for two years asking for a decent perf UI.</p>



<a name="234189953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234189953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234189953">(Apr 12 2021 at 16:33)</a>:</h4>
<p>/me goes to check out hotspot</p>



<a name="234190162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234190162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234190162">(Apr 12 2021 at 16:34)</a>:</h4>
<p>hotspot is incredibly slow and uses incredible amounts of memory when running it on real-world apps. But when it does work, it works okay. Much better than perf report at least.</p>



<a name="234191210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234191210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234191210">(Apr 12 2021 at 16:41)</a>:</h4>
<p>my experience with perf is that the best results are obtained by going after the base samples and writing programs to process them; but I bet there are other great tools</p>



<a name="234191227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/284843-turbowish/topic/%3A%3A.oO%28what%20is%20this%3F%20TurboWish%3F%20%60%3A%3A%2A%60%3F%20%60%3A%3A.oO%28%3F%29%60%3F%29/near/234191227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/284843-turbowish/topic/.3A.3A.2EoO(what.20is.20this.3F.20TurboWish.3F.20.60.3A.3A*.60.3F.20.60.3A.3A.2EoO(.3F).60.3F).html#234191227">(Apr 12 2021 at 16:41)</a>:</h4>
<p>I love the idea of watching what expert perf users do :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
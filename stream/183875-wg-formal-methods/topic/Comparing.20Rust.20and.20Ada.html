<html>
<head><meta charset="utf-8"><title>Comparing Rust and Ada · wg-formal-methods · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/index.html">wg-formal-methods</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html">Comparing Rust and Ada</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="231768167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231768167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231768167">(Mar 25 2021 at 09:18)</a>:</h4>
<p>We recently published a CACM article on Rust:<br>
<a href="https://cacm.acm.org/magazines/2021/4/251364-safe-systems-programming-in-rust/fulltext">https://cacm.acm.org/magazines/2021/4/251364-safe-systems-programming-in-rust/fulltext</a><br>
Now a question (more of a comment, really) has come up pointing out that "safe systems programming" is also very much in the domain of Ada. Does anyone here know a good comparison of Rust and Ada? It is my understanding that Ada itself has no notion of ownership/borrowing, so where Rust shines when verifying memory management, Ada provides little support. Is that correct? (It is then often pointed out that Ada programs often use way fewer pointers than C++ or Rust programs would, but still, in terms of comparing language capabilities that seems like an important point.) What about concurrency; I read that newer versions of Ada have built-in "parallel blocks" but what does the type-checker do to avoid data races?<br>
And then there is Ada/SPARK, but that is backed by a theorem prover, so at this point we'd have to compare with Prusti or so, right? (Of course SPARK is much more mature that what Rust has in this space.)<br>
I've been curious about this myself for quite some time, and sadly never had the chance of having a long conversation with an Ada expert to get to the bottom of this.</p>



<a name="231768953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231768953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231768953">(Mar 25 2021 at 09:25)</a>:</h4>
<blockquote>
<p>It is my understanding that Ada itself has no notion of ownership/borrowing, so where Rust shines when verifying memory management, Ada provides little support. Is that correct?</p>
</blockquote>
<p>As far as I know, Ada has raw pointers, but no notion of ownership. However, Ada/SPARK recently got support for Rust like references with (Prusti) pledges.</p>



<a name="231769486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231769486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231769486">(Mar 25 2021 at 09:30)</a>:</h4>
<p>Maybe, <span class="user-mention" data-user-id="312719">@Xavier Denis</span> knows more since Ada/SPARK is based on Why3?</p>



<a name="231769928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231769928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231769928">(Mar 25 2021 at 09:34)</a>:</h4>
<p>(We're already chatting with Xavier's advisor, Jacques-Henri, about this -- but I was hoping to get some input from the wider community here.^^)</p>



<a name="231773360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231773360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231773360">(Mar 25 2021 at 10:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120791">RalfJ</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/231769928">said</a>:</p>
<blockquote>
<p>(We're already chatting with Xavier's advisor, Jacques-Henri, about this -- but I was hoping to get some input from the wider community here.^^)</p>
</blockquote>
<p>I see. I also would be curious to learn more about Ada and SPARK <span aria-label="smiling face" class="emoji emoji-263a" role="img" title="smiling face">:smiling_face:</span>.</p>



<a name="231773673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231773673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231773673">(Mar 25 2021 at 10:04)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> that’s no longer true! SPARK just added mutable borrows</p>



<a name="231773726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231773726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231773726">(Mar 25 2021 at 10:04)</a>:</h4>
<p>are we comparing Rust with Ada or SPARK now? ;)</p>



<a name="231773765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231773765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231773765">(Mar 25 2021 at 10:05)</a>:</h4>
<p>those seem like two different questions, no?</p>



<a name="231773789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231773789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231773789">(Mar 25 2021 at 10:05)</a>:</h4>
<p>the comment on the CACM site only talks about Ada</p>



<a name="231773828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231773828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231773828">(Mar 25 2021 at 10:05)</a>:</h4>
<p>but "Ada/SPARK is taking inspiration from Rust features" is certainly going to be part of our answer :)</p>



<a name="231775210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231775210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231775210">(Mar 25 2021 at 10:16)</a>:</h4>
<p>So spark is a subset of Ada</p>



<a name="231775212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231775212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231775212">(Mar 25 2021 at 10:16)</a>:</h4>
<p>And supports borrows in the rust sense</p>



<a name="231775213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231775213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231775213">(Mar 25 2021 at 10:16)</a>:</h4>
<p>And can verify programs using those</p>



<a name="231775214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231775214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231775214">(Mar 25 2021 at 10:16)</a>:</h4>
<p>I actually have one of the spark devs right next to me right now</p>



<a name="231775514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231775514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231775514">(Mar 25 2021 at 10:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120791">RalfJ</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/231773765">said</a>:</p>
<blockquote>
<p>those seem like two different questions, no?</p>
</blockquote>
<p>I have an impression that SPARK has a strong influence on the development of Ada. For example, Ada 2012 got first-class support for functional specifications. Therefore, I would not be surprised if an upcoming version of Ada would also have support for borrowing. I would say that both projects have a lot to learn from each other.</p>



<a name="231776368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231776368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231776368">(Mar 25 2021 at 10:26)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> they actually use a translation quite similar to RustHorn / Creusot and allow “prophetic specifications” like in creusot</p>



<a name="231776371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231776371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231776371">(Mar 25 2021 at 10:26)</a>:</h4>
<p>The SPARK being a subset of Ada comment is from the mouth of a SPARK dev</p>



<a name="231776869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231776869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231776869">(Mar 25 2021 at 10:31)</a>:</h4>
<p><a href="https://docs.adacore.com/spark2014-docs/html/ug/en/source/access.html#borrowing">https://docs.adacore.com/spark2014-docs/html/ug/en/source/access.html#borrowing</a></p>



<a name="231781136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231781136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231781136">(Mar 25 2021 at 11:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="312719">Xavier Denis</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/231776371">said</a>:</p>
<blockquote>
<p>The SPARK being a subset of Ada comment is from the mouth of a SPARK dev</p>
</blockquote>
<p>so it's a bit like misra-C vs C?</p>



<a name="231781341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231781341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231781341">(Mar 25 2021 at 11:06)</a>:</h4>
<p>OTOH it some regards it seems to be "more" than Ada, namely by adding some fancy type system features (including, recently, some inspired by Rust)</p>



<a name="231781392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231781392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231781392">(Mar 25 2021 at 11:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="312719">Xavier Denis</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/231776869">said</a>:</p>
<blockquote>
<p><a href="https://docs.adacore.com/spark2014-docs/html/ug/en/source/access.html#borrowing">https://docs.adacore.com/spark2014-docs/html/ug/en/source/access.html#borrowing</a></p>
</blockquote>
<p>I see no lifetimes there, so can I assume this is still much less flexible than what the borrow checker can do? for example, could you write the typed safe-to-use API of Rust's <code>Vec</code>?</p>



<a name="231781567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231781567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231781567">(Mar 25 2021 at 11:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="312719">Xavier Denis</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/231775214">said</a>:</p>
<blockquote>
<p>I actually have one of the spark devs right next to me right now</p>
</blockquote>
<p>ah that'd be great if they could comment on this. :D<br>
I am particularly wondering about concurrency -- do Ada or Ada+SPARK have mechanisms in place to ensure data-race freedom? Is there something equivalent to Rust's <code>Mutex</code>/<code>RwLock</code> that enables safe shared mutable state?</p>



<a name="231782655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231782655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231782655">(Mar 25 2021 at 11:17)</a>:</h4>
<p>Another aspect we're interested is formal proofs -- is there a formal model of Ada or SPARK with a proof of type safety, or anything like that?</p>



<a name="231785826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231785826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231785826">(Mar 25 2021 at 11:45)</a>:</h4>
<p>I told Yannick to sign up for Zulip so he should log on soon to give proper answers</p>



<a name="231786003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786003">(Mar 25 2021 at 11:46)</a>:</h4>
<p>(Happy to use other communication channels as well, e.g. our MPI Mattermost or email or whatever)</p>



<a name="231786060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786060">(Mar 25 2021 at 11:46)</a>:</h4>
<p>From my understanding of spark borrows they are much more “local” so they don’t need a complex borrow checker like rust</p>



<a name="231786078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786078">(Mar 25 2021 at 11:46)</a>:</h4>
<p>I’m no Ada expert though</p>



<a name="231786273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786273">(Mar 25 2021 at 11:48)</a>:</h4>
<p>And I believe they mean it’s a subset of Ada in the sense that a subset of Ada programs are valid spark</p>



<a name="231786337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786337">(Mar 25 2021 at 11:48)</a>:</h4>
<p>So imposing additional data flow analyses is no issue for them</p>



<a name="231786457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786457">(Mar 25 2021 at 11:49)</a>:</h4>
<p>right, but that still restricts what you can do in terms of abstraction</p>



<a name="231786530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786530">(Mar 25 2021 at 11:50)</a>:</h4>
<p>Yes it’s not equivalent to Rust</p>



<a name="231786589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786589">(Mar 25 2021 at 11:50)</a>:</h4>
<p>you could do a borrow-checker-like thing in C and carve out some appropriate "subset of C" that way, but where Rust shines is giving types to APIs that have interesting ownership patterns (such as <code>Vec</code>)</p>



<a name="231786591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786591">(Mar 25 2021 at 11:50)</a>:</h4>
<p>Also afaik they have no formal proof of type system soundness</p>



<a name="231786618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786618">(Mar 25 2021 at 11:51)</a>:</h4>
<p>and to get those types you need to add something (namely a more expressive type system), not just reject more programs</p>



<a name="231786686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786686">(Mar 25 2021 at 11:51)</a>:</h4>
<p>Agreed, but different use cases I think</p>



<a name="231786808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786808">(Mar 25 2021 at 11:52)</a>:</h4>
<p>I think Yannick will be best places to answer these questions</p>



<a name="231786871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231786871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231786871">(Mar 25 2021 at 11:53)</a>:</h4>
<p>I really only have a passing knowledge of SPARK, particularly in how they translate and reason on their borrows</p>



<a name="231803514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231803514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yannick Moy <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231803514">(Mar 25 2021 at 13:52)</a>:</h4>
<p>Very nice article btw! I was invited by <span class="user-mention" data-user-id="312719">@Xavier Denis</span> to answer questions on Ada and SPARK. SPARK is indeed a subset of Ada, like MISRA C is a subset of C (I even wrote a comparison about that at <a href="https://learn.adacore.com/courses/SPARK_for_the_MISRA_C_Developer/">https://learn.adacore.com/courses/SPARK_for_the_MISRA_C_Developer/</a>), but the goal with SPARK is to provide guarantees statically about the program, by static analysis and proof. Ada does not provide as many guarantees statically as Rust regarding dynamic memory and concurrency. Regarding pointers, its main focus is on pointers to the stack, which by typing can't become dangling pointers: you can declare local pointer types for pointer variables that _can_ point to a stack variable of the same or a less-nested scope, but can't point to a stack variable of a more-nested scope. You can also have a form of local memory reclamation by declaring a local pointer type with its own "memory pool" in which all dynamically allocated pointers of that type are allocated, which is freed when the scope is exited. The typing rules ensure that this does not lead again to dangling pointers. But there are no guarantees for more liberal use of dynamic allocation, in particular the "free" function is called Unchecked_Deallocation and opens the door to double-free or use-after-free, and you are not protected against memory leaks when not using a local "memory pool".  Similarly, Ada does not provide as many guarantees statically as Rust regarding concurrent access to shared data/resources. The safe way to access shared data/resources is to use "protected objects" (with their own lock) but nothing forces you to comply with it. The parallel features in the upcoming version of Ada are not implemented in GNAT/SPARK today and may not be for some time. </p>
<p>SPARK supports both pointers and concurrency safely by restricting what you can do. For concurrency, that means only accessing shared data that is "synchronized" (exact definition here: <a href="https://docs.adacore.com/live/wave/spark2014/html/spark2014_rm/tasks-and-synchronization.html">https://docs.adacore.com/live/wave/spark2014/html/spark2014_rm/tasks-and-synchronization.html</a> so that includes atomic objects and protected objects). For pointers, that means following a simple ownership policy modeled after Rust ownership policy. That allows us to deal with pointers in proof like we do for other data structures, without worrying about possible aliasing. The difficulty comes with mutating a linked data structure while traversing it, and here my colleague Claire Dross initially implemented last year the pledges from Prusti and recently replaced them with the prophecy variables that <span class="user-mention" data-user-id="312719">@Xavier Denis</span> is using in his PhD work. You can see an example of use of prophecy variables here: <a href="https://github.com/yannickmoy/am2sp/blob/db487410991cd5373c56f0f251013b85c2e5aef0/src/list_arith.adb#L34">https://github.com/yannickmoy/am2sp/blob/db487410991cd5373c56f0f251013b85c2e5aef0/src/list_arith.adb#L34</a> and the equivalent with pledges here: <a href="https://github.com/yannickmoy/am2sp/blob/0ecdec063a5f09aa246061154c8a6b560d87b85a/src/list_arith.adb#L35">https://github.com/yannickmoy/am2sp/blob/0ecdec063a5f09aa246061154c8a6b560d87b85a/src/list_arith.adb#L35</a> The SPARK User's Guide now contains a variety of typical loop invariants with prophecy variables: <a href="https://docs.adacore.com/live/wave/spark2014/html/spark2014_ug/en/source/loop.html">https://docs.adacore.com/live/wave/spark2014/html/spark2014_ug/en/source/loop.html</a> (just look for occurrences of "At_End").   </p>
<p>That being said, we'd like to include more static guarantees in Ada itself in the future (enforced only by compilation, while the current solution for SPARK is based on a mix of ownership checking and proof for things like non-null pointer dereference checks and absence of memory leaks), and of course we're looking at Rust as a main source of inspiration here!</p>



<a name="231804098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231804098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yannick Moy <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231804098">(Mar 25 2021 at 13:55)</a>:</h4>
<p>Also, regarding formalization, there is very little regarding how SPARK deals with pointers, published recently: <a href="https://hal.archives-ouvertes.fr/INRIA-SACLAY/hal-03094566v1">https://hal.archives-ouvertes.fr/INRIA-SACLAY/hal-03094566v1</a></p>



<a name="231808289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/231808289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#231808289">(Mar 25 2021 at 14:17)</a>:</h4>
<p><span class="user-mention" data-user-id="400488">@Yannick Moy</span> thanks a lot, that is very helpful :)</p>



<a name="261906447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261906447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roderick Chapman <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261906447">(Nov 18 2021 at 09:58)</a>:</h4>
<p>I seem to be joining this thread a bit late, but (like Yannick) I am one of the long-standing developers and users of SPARK, so happy to contribute. I am learning Rust right now, with a focus on "no_std" target systems and formal verification, so I'm very interested in things like Prusti, Crux-MIR, and RMC, all of which I hope to take a look at soon.</p>



<a name="261924607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261924607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261924607">(Nov 18 2021 at 13:11)</a>:</h4>
<p>What kinds of programs are you interested in verifying?</p>



<a name="261926722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261926722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roderick Chapman <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261926722">(Nov 18 2021 at 13:29)</a>:</h4>
<p>Cryptographic algorithms mostly. Google for "SPARKNaCl" to see what I did in lockdown... :-)</p>



<a name="261931696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261931696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261931696">(Nov 18 2021 at 14:11)</a>:</h4>
<p>I am also interested in formal verification of <code>no_std</code>-friendly cryptographic algorithms <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="261931707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261931707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roderick Chapman <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261931707">(Nov 18 2021 at 14:11)</a>:</h4>
<p>I just watched your talk from RW2021, so I'll add Creusot to my list of things to look at</p>



<a name="261938960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261938960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261938960">(Nov 18 2021 at 15:04)</a>:</h4>
<p>:) there's been pretty major work since then as well</p>



<a name="261939636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261939636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261939636">(Nov 18 2021 at 15:09)</a>:</h4>
<p>In particular we've added a fairly robust support for traits, which we heavily use to deal with things like <code>Ord</code> or <code>Eq</code>. We've proven a series of key algorithms using this. </p>
<p>A complete, polymorphic version of binary search (and several sorting algorithms) proven correct: </p>
<ul>
<li><a href="https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/vector/05_binary_search_generic.rs">https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/vector/05_binary_search_generic.rs</a></li>
<li><a href="https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/selection_sort_generic.rs">https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/selection_sort_generic.rs</a></li>
<li><a href="https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/heapsort_generic.rs">https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/heapsort_generic.rs</a></li>
<li><a href="https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/vector/02_gnome.rs">https://github.com/xldenis/creusot/blob/master/creusot/tests/should_succeed/vector/02_gnome.rs</a></li>
</ul>



<a name="261939865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261939865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261939865">(Nov 18 2021 at 15:11)</a>:</h4>
<p>We've also been developing a 'verification std'</p>



<a name="261939894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261939894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261939894">(Nov 18 2021 at 15:11)</a>:</h4>
<p><a href="https://github.com/xldenis/creusot/tree/master/creusot-contracts/src/logic">https://github.com/xldenis/creusot/tree/master/creusot-contracts/src/logic</a></p>



<a name="261940120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261940120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261940120">(Nov 18 2021 at 15:13)</a>:</h4>
<p>We've also shown that our approach scales better than traditional seperation logic approaches for C languages: we've proven a few examples that required manual coq proofs in frama-c</p>



<a name="261944990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261944990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261944990">(Nov 18 2021 at 15:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132721">Tony Arcieri</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/261931696">said</a>:</p>
<blockquote>
<p>I am also interested in formal verification of <code>no_std</code>-friendly cryptographic algorithms <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>
</blockquote>
<p>I am curious. What is actually formal verification of cryptographic algorithms? If I take the abstract description of say SHA-1 and then write rust code that exactly follows each step of this description that is equally likely to be correct as if I exactly follow each step in a formal verification language and then check that the rust code matches what is written in the formal verification language, right?</p>



<a name="261945671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261945671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alix Trieu <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261945671">(Nov 18 2021 at 15:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/261944990">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="132721">Tony Arcieri</span> <a href="#narrow/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada/near/261931696">said</a>:</p>
<blockquote>
<p>I am also interested in formal verification of <code>no_std</code>-friendly cryptographic algorithms <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>
</blockquote>
<p>I am curious. What is actually formal verification of cryptographic algorithms? If I take the abstract description of say SHA-1 and then write rust code that exactly follows each step of this description that is equally likely to be correct as if I exactly follow each step in a formal verification language and then check that the rust code matches what is written in the formal verification language, right?</p>
</blockquote>
<p>Your code would probably not be efficient, and open to side channel attacks if you did that, but yes, it would also be functionally correct.</p>



<a name="261946195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261946195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261946195">(Nov 18 2021 at 15:54)</a>:</h4>
<p>So it is basically proving that your optimized version is equivalent to the naive version?</p>



<a name="261951568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261951568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261951568">(Nov 18 2021 at 16:27)</a>:</h4>
<p>That's one form of proof called 'refinement' in literature</p>



<a name="261951587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261951587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261951587">(Nov 18 2021 at 16:27)</a>:</h4>
<p>Another key kind of proof is showing standard properties about your code</p>



<a name="261951625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261951625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261951625">(Nov 18 2021 at 16:27)</a>:</h4>
<p>Especially with crypto algorithms there are various properties you may want to guarantee</p>



<a name="261951769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261951769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261951769">(Nov 18 2021 at 16:28)</a>:</h4>
<p>a common technique is you write a naive and simple implementation, often as a pure functional program, and then prove an optimized refinement as an imperative program</p>



<a name="261951818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261951818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261951818">(Nov 18 2021 at 16:29)</a>:</h4>
<p>you can then prove properties on the functional version and get them for free on the imperative one (by refinement)</p>



<a name="261952094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261952094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261952094">(Nov 18 2021 at 16:30)</a>:</h4>
<p>in the case of crypto there are key properties you may want to show: non interference, forward secrecy, etc...</p>



<a name="261955524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261955524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261955524">(Nov 18 2021 at 16:54)</a>:</h4>
<p>equivalence proofs are definitely one of the main things I've been interested in pursuing</p>



<a name="261955691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261955691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261955691">(Nov 18 2021 at 16:55)</a>:</h4>
<p>especially being able to prove that SIMD backends are equivalent to a reference implementation for all possible inputs</p>



<a name="261990317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261990317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261990317">(Nov 18 2021 at 21:03)</a>:</h4>
<p>Gotcha. Thanks for the explanation everyone!</p>



<a name="261991923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/261991923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#261991923">(Nov 18 2021 at 21:16)</a>:</h4>
<p>here's an example of the sort of thing I'd like to be able to do: <a href="https://cr.yp.to/talks/2021.09.03/slides-djb-20210903-saferewrite-4x3.pdf">https://cr.yp.to/talks/2021.09.03/slides-djb-20210903-saferewrite-4x3.pdf</a></p>



<a name="262081065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262081065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pointerbender <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262081065">(Nov 19 2021 at 15:27)</a>:</h4>
<blockquote>
<p>with a focus on "no_std" target systems and formal verification</p>
</blockquote>
<blockquote>
<p>I am also interested in formal verification of no_std-friendly cryptographic algorithms</p>
</blockquote>
<p>To pile on here, I'm currently adding improved support for <code>#![no_std]</code>crates to <a href="https://www.youtube.com/watch?v=C9TTioH5JUg">Prusti</a>. Also, you may enjoy <a href="https://github.com/hacspec/hacspec">hacspec</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
<div class="youtube-video message_inline_image"><a data-id="C9TTioH5JUg" href="https://www.youtube.com/watch?v=C9TTioH5JUg"><img src="https://uploads.zulipusercontent.net/c3cafa82302827f083e074bcefa64b4b1c5d2fae/68747470733a2f2f692e7974696d672e636f6d2f76692f43395454696f48354a55672f64656661756c742e6a7067"></a></div>



<a name="262083013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262083013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262083013">(Nov 19 2021 at 15:42)</a>:</h4>
<p>I am a fan of both Prusti and Hacspec <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="262083202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262083202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262083202">(Nov 19 2021 at 15:43)</a>:</h4>
<p>would be quite happy to see something like equivalence proofs between something like a Cryptol or F* reference implementation of an algorithm and Hacspec, and then when there's a verified Rust reference implementation, trying to prove or at least proptest/fuzz equivalence to that</p>



<a name="262083245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262083245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262083245">(Nov 19 2021 at 15:43)</a>:</h4>
<p>with umm, other people who understand formal verification better than I do working on the former</p>



<a name="262083461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262083461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pointerbender <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262083461">(Nov 19 2021 at 15:45)</a>:</h4>
<p>That sounds neat <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="262092008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092008" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roderick Chapman <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092008">(Nov 19 2021 at 16:39)</a>:</h4>
<p>Thanks for that pointer to your talk from RVW this year.. I will certainly take a look. I hope to re-write some of SPARKNaCl (which is a port re-write of TweetNaCl) in no_std Rust soon to see what the various tools can do. I'll probably pick on the core of the curve25519 operations, since they are reasonably hard to prove, but I already know exactly what preconditions and loop invariants are required...</p>



<a name="262092202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roderick Chapman <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092202">(Nov 19 2021 at 16:41)</a>:</h4>
<p>I failed to get HacSpec to compile in no_std - I think its ByteSeq type depends on std::Vec so that's mildly show-stopping for now I think?</p>



<a name="262092458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092458">(Nov 19 2021 at 16:42)</a>:</h4>
<p>huh, weird.. should change that to be <code>alloc</code> at least</p>



<a name="262092702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092702" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092702">(Nov 19 2021 at 16:44)</a>:</h4>
<p>re: Prusti the main thing I'd like to try using it for is ensuring that a <code>no_std</code>-friendly subset of a crate is panic-free, although last time I tried to do that it didn't quite support all of the language features I needed to do that, although that was awhile ago</p>



<a name="262092778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092778">(Nov 19 2021 at 16:45)</a>:</h4>
<p>I've tried so many different approaches to ensuring code is panic-free in CI and I've never been happy with any of them</p>



<a name="262092795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092795">(Nov 19 2021 at 16:45)</a>:</h4>
<p>Prusti seems like the best so far though</p>



<a name="262092916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092916">(Nov 19 2021 at 16:46)</a>:</h4>
<p>there are a million little hacky crates that do things like try to find the panic handler symbols in the resulting executable and it's like "no that's not really helpful, I want you to show me where the code that might cause a panic is located"</p>



<a name="262092986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262092986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Arcieri <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262092986">(Nov 19 2021 at 16:46)</a>:</h4>
<p>should give it another go</p>



<a name="262094985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/183875-wg-formal-methods/topic/Comparing%20Rust%20and%20Ada/near/262094985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pointerbender <a href="https://zulip-archive.rust-lang.org/stream/183875-wg-formal-methods/topic/Comparing.20Rust.20and.20Ada.html#262094985">(Nov 19 2021 at 16:58)</a>:</h4>
<blockquote>
<p>Thanks for that pointer to your talk from RVW this year</p>
</blockquote>
<p>Ah that's not me, I thought it's just a nice quick introduction to Prusti <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
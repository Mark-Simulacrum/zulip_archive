<html>
<head><meta charset="utf-8"><title>upgrading to the new salsa · z-archived-t-compiler/wg-rls-2.0/chalk · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/index.html">z-archived-t-compiler/wg-rls-2.0/chalk</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html">upgrading to the new salsa</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="161481370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481370">(Mar 22 2019 at 20:34)</a>:</h4>
<p>So i'm <em>trying</em> to upgrade chalk to the latest salsa and I'm still failing to build with the latest nightly. I guess I need to try and figure this out :/</p>



<a name="161481427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481427">(Mar 22 2019 at 20:35)</a>:</h4>
<p>Ah, I guess that <span class="user-mention" data-user-id="129457">@Florian Diebold</span>'s work to make chalk build on stable will be quite useful here</p>



<a name="161481452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481452" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481452">(Mar 22 2019 at 20:35)</a>:</h4>
<p>Hmm, it fails on stable too</p>



<a name="161481542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481542">(Mar 22 2019 at 20:36)</a>:</h4>
<p><strong>oh</strong></p>



<a name="161481545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481545" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481545">(Mar 22 2019 at 20:36)</a>:</h4>
<p>chalk is not rust 2018</p>



<a name="161481555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481555">(Mar 22 2019 at 20:36)</a>:</h4>
<p>oh, it is</p>



<a name="161481594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481594" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481594">(Mar 22 2019 at 20:37)</a>:</h4>
<p>ah, but not the chalk-macros crate</p>



<a name="161481600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481600" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481600">(Mar 22 2019 at 20:37)</a>:</h4>
<p>(nope, that's .. not it)</p>



<a name="161481606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481606" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481606">(Mar 22 2019 at 20:38)</a>:</h4>
<p>which is good, I guess,</p>



<a name="161481644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481644" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481644">(Mar 22 2019 at 20:38)</a>:</h4>
<p>since that would be weird</p>



<a name="161481816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481816" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481816">(Mar 22 2019 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  re compiler bugs, <a href="https://github.com/rust-lang/rust/issues/58291" target="_blank" title="https://github.com/rust-lang/rust/issues/58291">https://github.com/rust-lang/rust/issues/58291</a> is driving me crazy :) Who would be the right person to poke? Or .... should I dig this myself? It could be fun, but I need some pointers :)</p>



<a name="161481846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481846">(Mar 22 2019 at 20:40)</a>:</h4>
<p>Ah, yeah, I heard about that before</p>



<a name="161481891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161481891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161481891">(Mar 22 2019 at 20:41)</a>:</h4>
<p>Hmm. Maybe <span class="user-mention" data-user-id="124287">@mw</span> -- maybe (I hate to say it) me.. looks like it might be related to trait matching stuff specifically</p>



<a name="161482324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161482324" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161482324">(Mar 22 2019 at 20:46)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> I'm going to add to my list to try and investigate, perhaps while traveling or at Rust LATAM next week -- one question is, do you know if this is a regression?</p>



<a name="161482332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161482332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161482332">(Mar 22 2019 at 20:46)</a>:</h4>
<p>since rust-analyzer builds on stable I guess you should be able to bisect a bit?</p>



<a name="161482349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161482349" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161482349">(Mar 22 2019 at 20:46)</a>:</h4>
<p>if it <em>is</em> a regression, then using cargo-bisect-rustc to find the problem and pin it down to a specific PR is always good</p>



<a name="161482379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161482379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161482379">(Mar 22 2019 at 20:47)</a>:</h4>
<p>I am not sure it is a regression. I've observed it for the first time at rust all hands</p>



<a name="161482400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161482400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161482400">(Mar 22 2019 at 20:47)</a>:</h4>
<p>I <em>think</em> that might be related to salsa update, but I'll check</p>



<a name="161483785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading%20to%20the%20new%20salsa/near/161483785" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/191167-z-archived-t-compiler/wg-rls-2.0/chalk/topic/upgrading.20to.20the.20new.20salsa.html#161483785">(Mar 22 2019 at 21:04)</a>:</h4>
<blockquote>
<p>I am not sure it is a regression. I've observed it for the first time at rust all hands</p>
</blockquote>
<p>ok. it'd be nice if it was :)</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Meetings-2022-02-16 · t-libs/meetings · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/index.html">t-libs/meetings</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html">Meetings-2022-02-16</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271420337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/271420337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#271420337">(Feb 10 2022 at 11:52)</a>:</h4>
<p>Hey <span class="user-group-mention" data-user-group-id="4493">@T-libs</span> <span class="user-group-mention" data-user-group-id="2645">@T-libs-api</span>, the topic of the <span class="user-group-mention" data-user-group-id="1977">@T-lang</span> meeting at <time datetime="2022-02-16T18:00:00Z">2022-02-16T19:00:00+01:00</time> is 'things the library team wants' (<a href="https://github.com/rust-lang/lang-team/issues/130">lang-team#130</a>). <span class="user-mention" data-user-id="239881">@Josh Triplett</span> and I will be preparing a short document for that, but we'd love your input. You're of course invited join the meeting as well if you have time. One of the things we want to talk about is reducing the amount of unstable features we use in the standard library, to make the standard library 'less special'. But also other language features that make maintaining libraries and designing APIs easier.</p>
<p>There's a <a href="https://hackmd.io/HPjGPC09RayylxGeaIfTew">very incomplete list</a> with some 'woud be really nice to have' things that have come up in our meetings. Feel free to add things, or add more details/background/motivation to the things already on there.</p>



<a name="271613576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/271613576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#271613576">(Feb 11 2022 at 17:58)</a>:</h4>
<p>callsite inlining directives? or is that more a T-compiler thing?</p>



<a name="271617471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/271617471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#271617471">(Feb 11 2022 at 18:26)</a>:</h4>
<p>A way to express all the marker traits we use for specialization more concisely would be nice. Maybe that's already covered by more powerful associated consts and more powerful const eval.<br>
It's often  <code>impl&lt;I&gt; TrustedFoo for Adapter&lt;I&gt; where INNER: TrustedFoo</code>, sometimes with some additional where clauses.</p>
<p>It would be more concise to have something like this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="nb">Iterator</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cp">#[rustc_specialization_marker]</span><span class="w"></span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TrustedFoo</span>: <span class="kt">bool</span> <span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="cp">#[rustc_specialization_marker]</span><span class="w"></span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TrustedBar</span>: <span class="kt">bool</span> <span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="cp">#[rustc_specialization_marker]</span><span class="w"></span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TrustedBaz</span>: <span class="kt">bool</span> <span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">I</span>: <span class="nb">Iterator</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">Iterator</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">AdapterA</span><span class="o">&lt;</span><span class="n">I</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="c1">// syntax maybe gets tricky if it had to be conditional on other traits, e.g. `I::Item: Copy`</span>
<span class="w">   </span><span class="c1">// but const eval would cover many existing cases at least</span>
<span class="w">   </span><span class="k">unsafe</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TrustedFoo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span>::<span class="n">TrustedBar</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">I</span>::<span class="n">TrustedBaz</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>



<span class="k">impl</span><span class="o">&lt;</span><span class="n">I</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">Iterator</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">AdapterB</span><span class="o">&lt;</span><span class="n">I</span><span class="o">&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">I</span>: <span class="nb">Iterator</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">I</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&gt;</span>::<span class="n">TrustedFoo</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// specializaing impl here</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>There would be some benefit of orthogonalizing some of those traits but there also seem to be concerns about the proliferation of marker traits. Having more concise way could help with that.</p>
<p>But specialization isn't even close to stable yet, so this isn't high priority.</p>



<a name="271952571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/271952571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#271952571">(Feb 15 2022 at 10:18)</a>:</h4>
<p>Another one, <code>#[sealed]</code> or something for extension Traits</p>



<a name="272031338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272031338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272031338">(Feb 15 2022 at 20:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/259402-t-libs.2Fmeetings/topic/Meetings-2022-02-16/near/271952571">said</a>:</p>
<blockquote>
<p><del>Another one, <code>#[sealed]</code> or something for extension Traits</del> nvm, I forgot about std::sealed</p>
</blockquote>
<p>Silly Q; what's <code>std::sealed</code>?  I don't see it in &lt;<a href="https://doc.rust-lang.org/nightly/std/#modules">https://doc.rust-lang.org/nightly/std/#modules</a>&gt;.</p>
<p>(Personally I'd be a fan of moving some of these conventions to "real" features.  Especially since something like <code>#[sealed]</code> could then have smarter coherence logic or better error messages directly, rather than needing to infer it by looking at a complicated web of visibility.)</p>



<a name="272031711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272031711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272031711">(Feb 15 2022 at 20:14)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/master/library/std/src/lib.rs#L626-L632">https://github.com/rust-lang/rust/blob/master/library/std/src/lib.rs#L626-L632</a><br>
it's private since sealing works by pub-in-private. I guess it could be turned into a macro that generates a macro-internal module...</p>



<a name="272031891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272031891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272031891">(Feb 15 2022 at 20:16)</a>:</h4>
<p>i agree that 'sealed traits' are a hack and it'd be nice to have a language feature for it</p>



<a name="272032004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272032004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272032004">(Feb 15 2022 at 20:17)</a>:</h4>
<p>like <code>non_exhaustive</code> but for traits</p>



<a name="272032142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272032142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272032142">(Feb 15 2022 at 20:18)</a>:</h4>
<p>yeah exactly. the sealed trait hack feels similar to how people were adding <code>#[doc(hidden)] __ExtraVariantToMakeThisEnumNonEhaustive,</code> to their enums before <code>#[non_exhaustive]</code> existed.</p>



<a name="272033102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033102">(Feb 15 2022 at 20:26)</a>:</h4>
<p><span class="user-mention" data-user-id="310399">@Mara</span> That came up in a lang meeting recently, and there was near-universal support for "yeah, let's add sealed traits".</p>



<a name="272033131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033131">(Feb 15 2022 at 20:26)</a>:</h4>
<p>One question was "does it make more sense to be an attribute or a keyword".</p>



<a name="272033165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033165">(Feb 15 2022 at 20:27)</a>:</h4>
<p><code>#[sealed] trait X ...</code> vs <code>sealed trait X</code>.</p>



<a name="272033181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033181">(Feb 15 2022 at 20:27)</a>:</h4>
<p>(where the latter would be spelled <code>k#sealed</code> until an edition)</p>



<a name="272033200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033200">(Feb 15 2022 at 20:27)</a>:</h4>
<p>I personally think <code>#[sealed]</code> makes sense, but I don't have a principled justification for one over the other.</p>



<a name="272033456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033456">(Feb 15 2022 at 20:29)</a>:</h4>
<p>The deciding factor is essentially: how likely is it that people are already using <code>sealed</code> as an identifier in their code. Even if we can add new keywords with an edition, we should only do so if we really have to because of the churn (nobody wants their code to be full of <code>r#sealed</code> after a cargo fix).</p>



<a name="272033534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033534">(Feb 15 2022 at 20:30)</a>:</h4>
<p>In this case an attribute is fine and there is no reason to insist on a keyword.</p>



<a name="272033636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033636">(Feb 15 2022 at 20:31)</a>:</h4>
<p>I don't think that's the only deciding factor. I also think there's some semantic information conveyed by whether something is an attribute or a keyword.</p>



<a name="272033648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033648">(Feb 15 2022 at 20:31)</a>:</h4>
<p>in most cases where we have a sealed trait, we implement the trait for exactly one type as an extension trait. it makes me wonder if extension traits should have language support. to not have to repeat the <code>trait </code> and <code>impl</code> block with all the same signatures, and also 'seal' it. i'm not sure if there are other useful things the compiler could do (for diagnostics for example) if it knows a trait is an extension trait for a single type.</p>



<a name="272033652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033652">(Feb 15 2022 at 20:31)</a>:</h4>
<p>In this case, sealed "feels" like attribute semantics.</p>



<a name="272033723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033723">(Feb 15 2022 at 20:31)</a>:</h4>
<p><span class="user-mention" data-user-id="310399">@Mara</span> In the cases where we have sealed traits for target-specific methods, I'd love to just stop doing that entirely, and have <code>cfg</code>ed inherent methods.</p>



<a name="272033740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033740">(Feb 15 2022 at 20:32)</a>:</h4>
<p>(also, i don't think any item or statement can start with <code>identifier trait</code> right? <code>sealed trait</code> can just work then, no?)</p>



<a name="272033795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033795">(Feb 15 2022 at 20:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/259402-t-libs.2Fmeetings/topic/Meetings-2022-02-16/near/272033723">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310399">Mara</span> In the cases where we have sealed traits for target-specific methods, I'd love to just stop doing that entirely, and have <code>cfg</code>ed inherent methods.</p>
</blockquote>
<p>sure, but you can't do that in other crates.</p>



<a name="272033835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033835">(Feb 15 2022 at 20:32)</a>:</h4>
<p>(extending a type of another crate, i mean)</p>



<a name="272033843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033843">(Feb 15 2022 at 20:32)</a>:</h4>
<p>Sure.</p>



<a name="272033872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033872">(Feb 15 2022 at 20:32)</a>:</h4>
<p><span class="user-mention" data-user-id="310399">@Mara</span> I still think <code>#[sealed]</code> should exist, as a mechanism, I'm just suggesting that we shouldn't use the "target-specific extension trait" approach in std.</p>



<a name="272033951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272033951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272033951">(Feb 15 2022 at 20:33)</a>:</h4>
<p>I think the only thing stopping us has been the portability lint question: extension traits flag code as only working on a specific target, using a method doesn't do so as obviously.</p>



<a name="272035165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272035165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272035165">(Feb 15 2022 at 20:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="143274">Amanieu</span> <a href="#narrow/stream/259402-t-libs.2Fmeetings/topic/Meetings-2022-02-16/near/272033456">said</a>:</p>
<blockquote>
<p>The deciding factor is essentially: how likely is it that people are already using <code>sealed</code> as an identifier in their code. Even if we can add new keywords with an edition, we should only do so if we really have to because of the churn (nobody wants their code to be full of <code>r#sealed</code> after a cargo fix).</p>
</blockquote>
<p>Note that <code>sealed</code> would apply to <em>items</em>, not as part of arbitrary expressions, and thus could be done as a contextual keyword.</p>
<p>And since it'd always be <code>sealed trait</code>, it's an easier contextual keyword than <code>union</code> currently is.</p>
<p>(That said, I don't think I have a well-formed opinion on whether <code>#[sealed] trait</code> or <code>sealed trait</code> is better.  I guess it gets to <code>dyn trait Foo</code> vs <code>#[dyn_capable] trait Foo</code> too...)</p>



<a name="272035585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272035585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272035585">(Feb 15 2022 at 20:48)</a>:</h4>
<p>To some extent, I feel like there's a degree of "can I ignore this when reading the item and still understand the item".</p>



<a name="272035599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272035599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272035599">(Feb 15 2022 at 20:48)</a>:</h4>
<p>Though I don't know that we consistently follow that.</p>



<a name="272040304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272040304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272040304">(Feb 15 2022 at 21:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/259402-t-libs.2Fmeetings/topic/Meetings-2022-02-16/near/272031711">said</a>:</p>
<blockquote>
<p>I guess it could be turned into a macro that generates a macro-internal module...</p>
</blockquote>
<p><a href="https://lib.rs/crates/sealed">https://lib.rs/crates/sealed</a></p>



<a name="272141836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272141836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272141836">(Feb 16 2022 at 16:44)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="4493">@T-libs</span> there's no special topic for today, and only one backport to discuss. Since there's already the libs-themed lang meeting in the hour before, let's skip the call this week and discuss the backport in text here. Next week I'm probably ready to give a detailed update on the improved mutexes/condvars and discuss implementation design decisions, so we can do another fun deep-dive then :)</p>



<a name="272141848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272141848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272141848">(Feb 16 2022 at 16:44)</a>:</h4>
<ul>
<li>[<a href="https://github.com/rust-lang/rust/pull/93436">93436</a>] <em>Update compiler_builtins to fix duplicate symbols in <code>armv7-linux-androideabi</code> rlib</em></li>
</ul>



<a name="272141962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272141962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272141962">(Feb 16 2022 at 16:45)</a>:</h4>
<p>other discussion on that backport: <a href="#narrow/stream/241545-t-release/topic/Backport.20for.201.2E59.20beta/near/271509994">https://rust-lang.zulipchat.com/#narrow/stream/241545-t-release/topic/Backport.20for.201.2E59.20beta/near/271509994</a></p>



<a name="272141982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272141982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272141982">(Feb 16 2022 at 16:45)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2645">@T-libs-api</span> meeting at <time datetime="2022-02-16T20:00:00Z">2022-02-16T21:00:00+01:00</time>, agenda: <a href="https://hackmd.io/je6I93XgQZGWFeXZdtZhfg">https://hackmd.io/je6I93XgQZGWFeXZdtZhfg</a> - there's not many issues to discuss (other than the infinite number of tracking issues ^^'), so i'd like to take some time to talk about some kind of 'roadmap'. not something with deadlines and targets, but some kind of theme/direction to work towards.</p>



<a name="272142314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272142314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272142314">(Feb 16 2022 at 16:48)</a>:</h4>
<p>And <span class="user-group-mention" data-user-group-id="4493">@T-libs</span> <span class="user-group-mention" data-user-group-id="2645">@T-libs-api</span>: the <span class="user-group-mention" data-user-group-id="1977">@T-lang</span> meeting at <time datetime="2022-02-16T18:00:00Z">2022-02-16T19:00:00+01:00</time> is about 'things the library team wants' (<a href="https://github.com/rust-lang/lang-team/issues/130">lang-team#130</a>). I'm right now writing the overview document based on the wishlist and the comments above,  which i'll post soon. Feel free to join the meeting. We probably won't go very deep, but instead just throw a ton of ideas at the lang team and see if anyone has any interesteing thoughts.</p>



<a name="272148658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272148658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272148658">(Feb 16 2022 at 17:28)</a>:</h4>
<p>That overview/document: <a href="https://hackmd.io/iIUKTpmPRlG-fBkjDl-nYQ">https://hackmd.io/iIUKTpmPRlG-fBkjDl-nYQ</a></p>



<a name="272148937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272148937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272148937">(Feb 16 2022 at 17:30)</a>:</h4>
<p>(Meeting announcement/link will be in <a class="stream" data-stream-id="213817" href="/#narrow/stream/213817-t-lang">#t-lang</a>.)</p>



<a name="272149209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272149209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272149209">(Feb 16 2022 at 17:31)</a>:</h4>
<p>Reading through now. Looks like a great summary, and great prose rather than just the bullets of the other doc. Thanks, <span class="user-mention" data-user-id="310399">@Mara</span>!</p>



<a name="272149403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272149403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272149403">(Feb 16 2022 at 17:33)</a>:</h4>
<p>One item raised an eyebrow for me:</p>
<blockquote>
<p>Similarly, adding <code>Index&lt;u8&gt; to [T]</code> breaks stuff.</p>
</blockquote>
<p>Even if we could do this <em>without</em> breaking stuff, that leaves the question of whether we <em>should</em>. I've seen (and been part of) several discussions about whether we <em>should</em> allow indexing with anything other than <code>usize</code>, and I don't think that's a settled question.</p>



<a name="272149773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272149773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272149773">(Feb 16 2022 at 17:35)</a>:</h4>
<p>sure. my <code>str::repeat</code> example is also not a settled question. but both are good examples of certain kinds of changes we want to make in general.</p>



<a name="272150663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272150663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272150663">(Feb 16 2022 at 17:41)</a>:</h4>
<p>Fair enough.</p>



<a name="272152051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272152051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272152051">(Feb 16 2022 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="310399">@Mara</span> Mind if I add a section for the target-feature-optimized functions bit?</p>



<a name="272152350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272152350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272152350">(Feb 16 2022 at 17:52)</a>:</h4>
<p>oh i forgot that one. sorry. sure</p>



<a name="272152438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272152438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272152438">(Feb 16 2022 at 17:52)</a>:</h4>
<p>np, I wanted to make sure in case I'd missed something (like that already being doable and my information being out of date).</p>



<a name="272170548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272170548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272170548">(Feb 16 2022 at 20:01)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2645">@T-libs-api</span> meeting time! <a href="https://meet.jit.si/rust-libs-meeting-crxoz2at8hiccp7b3ixf89qgxfymlbwr">https://meet.jit.si/rust-libs-meeting-crxoz2at8hiccp7b3ixf89qgxfymlbwr</a></p>



<a name="272170569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272170569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272170569">(Feb 16 2022 at 20:01)</a>:</h4>
<p>agenda/notes: <a href="https://hackmd.io/je6I93XgQZGWFeXZdtZhfg">https://hackmd.io/je6I93XgQZGWFeXZdtZhfg</a></p>



<a name="272179241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16/near/272179241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/259402-t-libs/meetings/topic/Meetings-2022-02-16.html#272179241">(Feb 16 2022 at 21:13)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="4493">@T-libs</span> I've marked <a href="https://github.com/rust-lang/rust/issues/93436">#93436</a> as beta-accepted. I saw <span class="user-mention" data-user-id="239881">@Josh Triplett</span> and <span class="user-mention" data-user-id="138448">@cuviper</span> were in favor of backporting it, and so am I. Didn't see any oposition to it from anyone.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
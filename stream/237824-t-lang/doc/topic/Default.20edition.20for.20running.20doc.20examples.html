<html>
<head><meta charset="utf-8"><title>Default edition for running doc examples · t-lang/doc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/237824-t-lang/doc/index.html">t-lang/doc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/237824-t-lang/doc/topic/Default.20edition.20for.20running.20doc.20examples.html">Default edition for running doc examples</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="262523102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/237824-t-lang/doc/topic/Default%20edition%20for%20running%20doc%20examples/near/262523102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrian Palacios <a href="https://zulip-archive.rust-lang.org/stream/237824-t-lang/doc/topic/Default.20edition.20for.20running.20doc.20examples.html#262523102">(Nov 23 2021 at 22:29)</a>:</h4>
<p>We have been working on a tool that automatically extracts and runs examples (code snippets) from different Rust books (reference, nomicon, etc.) through an alternative Rust back-end. There has been some confusion about the edition to be used by default.</p>
<p>As far as I know, 2015 is considered the default edition and all examples should be run using this edition. There is a way to annotate examples with a particular edition, but it appears only 6 out of the ~700 examples we are running make use of it. And 4 of them actually specify the 2015 edition, which made me think we should be using 2021 by default. So this is not clear to me.</p>
<p>For instance, the first example in <a href="https://doc.rust-lang.org/stable/reference/items/functions.html#async-functions">the async functions section from the reference</a> will run okay in 2018 or later but fail if using the 2015 edition. But this <a href="https://doc.rust-lang.org/rust-by-example/fn/closures/closure_examples/iter_any.html">runnable example in RBE</a> will only compile with 2015.</p>
<p>So one of those examples needs an annotation, right?</p>



<a name="262525268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/237824-t-lang/doc/topic/Default%20edition%20for%20running%20doc%20examples/near/262525268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/237824-t-lang/doc/topic/Default.20edition.20for.20running.20doc.20examples.html#262525268">(Nov 23 2021 at 22:49)</a>:</h4>
<p><span class="user-mention" data-user-id="396031">@Adrian Palacios</span> The default edition can be specified in <code>book.toml</code> (<a href="https://github.com/rust-lang/reference/blob/c0f222da23568477155991d391c9ce918e381351/book.toml#L13-L14">example</a>) similar to how you set the edition in <code>Cargo.toml</code>.</p>



<a name="262525298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/237824-t-lang/doc/topic/Default%20edition%20for%20running%20doc%20examples/near/262525298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/237824-t-lang/doc/topic/Default.20edition.20for.20running.20doc.20examples.html#262525298">(Nov 23 2021 at 22:49)</a>:</h4>
<p>If not specified, the default is 2015.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
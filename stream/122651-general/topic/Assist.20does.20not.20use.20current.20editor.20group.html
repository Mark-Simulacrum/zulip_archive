<html>
<head><meta charset="utf-8"><title>Assist does not use current editor group · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Assist.20does.20not.20use.20current.20editor.20group.html">Assist does not use current editor group</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269583130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Assist%20does%20not%20use%20current%20editor%20group/near/269583130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mossa <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Assist.20does.20not.20use.20current.20editor.20group.html#269583130">(Jan 27 2022 at 14:51)</a>:</h4>
<p>I noticed that if I used the assist for adding <code>derive()</code>, then the cursor jumps to the "first" editor group, and not the current one. I've tried to look here to see what is deciding the next location of the cursor, but I don't see the choice of editor in here: <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_derive.rs#L9">https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_derive.rs#L9</a></p>



<a name="269583735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Assist%20does%20not%20use%20current%20editor%20group/near/269583735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mossa <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Assist.20does.20not.20use.20current.20editor.20group.html#269583735">(Jan 27 2022 at 14:55)</a>:</h4>
<p>I tried the following to showcase this:<br>
New project.<br>
Open <a href="http://main.rs">main.rs</a>.<br>
Split into two windows.<br>
Then add a struct and invoke the assist <code>derive</code>. <br>
This is the resulting panic:</p>
<div class="codehilite"><pre><span></span><code>Panic context:
&gt;
version: db2a7087b 2021-12-13 stable
request: codeLens/resolve CodeLens {
    range: Range {
        start: Position {
            line: 6,
            character: 7,
        },
        end: Position {
            line: 6,
            character: 13,
        },
    },
    command: None,
    data: Some(
        Object({
            &quot;impls&quot;: Object({
                &quot;textDocument&quot;: Object({
                    &quot;uri&quot;: String(
                        &quot;file:///c:/Users/Tyler/AppData/Local/cargo-temp/tmp-YE34Vz/src/main.rs&quot;,
                    ),
                }),
                &quot;position&quot;: Object({
                    &quot;line&quot;: Number(
                        6,
                    ),
                    &quot;character&quot;: Number(
                        7,
                    ),
                }),
            }),
        }),
    ),
}

thread &#39;&lt;unnamed&gt;&#39; panicked at &#39;index out of bounds: the len is 6 but the index is 6&#39;, crates\ide_db\src\line_index.rs:106:Panic context:
&gt;
version: db2a7087b 2021-12-13 stable
request: codeLens/resolve CodeLens {
    range: Range {
        start: Position {
            line: 6,
            character: 7,
        },
        end: Position {
            line: 6,
            character: 13,
        },
    },
    command: None,
    data: Some(
        Object({
            &quot;references&quot;: Object({
                &quot;textDocument&quot;: Object({
                    &quot;uri&quot;: String(
                        &quot;file:///c:/Users/Tyler/AppData/Local/cargo-temp/tmp-YE34Vz/src/main.rs&quot;,
                    ),
                }),
                &quot;position&quot;: Object({
                    &quot;line&quot;: Number(
                        6,
                    ),
                    &quot;character&quot;: Number(
                        7,
                    ),
                }),
            }),
        }),
    ),
}

thread &#39;&lt;unnamed&gt;&#39; panicked at &#39;index out of bounds: the len is 6 but the index is 6&#39;, crates\ide_db\src\line_index.rs:9106
:9stack backtrace:

note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
stack backtrace:
[Error - 15.54.11] Request codeLens/resolve failed.
  Message: server panicked: index out of bounds: the len is 6 but the index is 6
  Code: -32603
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
[Error - 15.54.11] Request codeLens/resolve failed.
  Message: server panicked: index out of bounds: the len is 6 but the index is 6
  Code: -32603
</code></pre></div>



<a name="269583921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Assist%20does%20not%20use%20current%20editor%20group/near/269583921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mossa <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Assist.20does.20not.20use.20current.20editor.20group.html#269583921">(Jan 27 2022 at 14:56)</a>:</h4>
<p>This might be a proper issue. Let me know if I should post this on github.</p>



<a name="271103311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Assist%20does%20not%20use%20current%20editor%20group/near/271103311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Assist.20does.20not.20use.20current.20editor.20group.html#271103311">(Feb 08 2022 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="426680">@Mossa</span> yes, please file an issue if you can</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
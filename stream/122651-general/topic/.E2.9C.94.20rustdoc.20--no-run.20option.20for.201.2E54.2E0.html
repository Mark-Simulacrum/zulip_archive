<html>
<head><meta charset="utf-8"><title>✔ rustdoc --no-run option for 1.54.0 · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html">✔ rustdoc --no-run option for 1.54.0</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249129002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129002">(Aug 11 2021 at 16:03)</a>:</h4>
<p>In rustdoc for 1.54.0 there's a <code>--no-run</code> flag</p>
<div class="codehilite"><pre><span></span><code>--no-run        Compile doctests without running them
</code></pre></div>
<p>which I'd like to use but when I attempt to do so I run into</p>
<div class="codehilite"><pre><span></span><code>error: the `-Z unstable-options` flag must also be passed to enable the flag `no-run`
</code></pre></div>
<p>I'm wondering why it'd be in the <code>--help</code> output for this release and what it means for the implementing <a href="https://github.com/rust-lang/rust/pull/83857">PR</a>  to be a part of the <a href="https://github.com/rust-lang/rust/milestone/82">1.54.0 milestone</a>, yet, still only nightly toolchains can access it. Is this expected?</p>



<a name="249129199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129199">(Aug 11 2021 at 16:04)</a>:</h4>
<p>yes, that's expected. 1.54 is when it was implemented, not when it's stabilized.</p>



<a name="249129242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129242">(Aug 11 2021 at 16:05)</a>:</h4>
<p>it might be useful to note in the help that it's unstable, but I don't think there's a bug here</p>



<a name="249129430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129430">(Aug 11 2021 at 16:06)</a>:</h4>
<p>If that's what that means, then yeah, I'd say this is an issue in clarity. I feel like if I'm using a stable release then I shouldn't be shown unstable features.</p>



<a name="249129478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129478">(Aug 11 2021 at 16:06)</a>:</h4>
<p>But it's also weird to me that I need to use a nightly release to use unstable features</p>



<a name="249129527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129527">(Aug 11 2021 at 16:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343063">UebelAndre</span> <a href="#narrow/stream/122651-general/topic/rustdoc.20--no-run.20option.20for.201.2E54.2E0/near/249129478">said</a>:</p>
<blockquote>
<p>But it's also weird to me that I need to use a nightly release to use unstable features</p>
</blockquote>
<p>I don't know why that's surprising, that's how everything works</p>



<a name="249129533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129533">(Aug 11 2021 at 16:07)</a>:</h4>
<p>Why would the help message direct me to try <code>-Z unsable-options</code> if that's actually not doable with the current binary?</p>



<a name="249129586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129586">(Aug 11 2021 at 16:07)</a>:</h4>
<p>what would you have it do instead? say "switch to nightly"? that's what -Zunstable-options already does</p>



<a name="249129695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129695">(Aug 11 2021 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/122651-general/topic/rustdoc.20--no-run.20option.20for.201.2E54.2E0/near/249129527">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="343063">UebelAndre</span> <a href="#narrow/stream/122651-general/topic/rustdoc.20--no-run.20option.20for.201.2E54.2E0/near/249129478">said</a>:</p>
<blockquote>
<p>But it's also weird to me that I need to use a nightly release to use unstable features</p>
</blockquote>
<p>I don't know why that's surprising, that's how everything works</p>
</blockquote>
<p>I've had very little interaction with nightly features so I'm not familiar with how things work, necessarily.</p>



<a name="249129888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249129888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249129888">(Aug 11 2021 at 16:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/122651-general/topic/rustdoc.20--no-run.20option.20for.201.2E54.2E0/near/249129586">said</a>:</p>
<blockquote>
<p>what would you have it do instead? say "switch to nightly"? that's what -Zunstable-options already does</p>
</blockquote>
<p>I feel like I shouldn't be shown unstable options in <code>--help</code> if I'm not using a nightly toolchain. Or at least have a comment for each unstable flag in the help output</p>



<a name="249130054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249130054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249130054">(Aug 11 2021 at 16:10)</a>:</h4>
<p>rustc also shows unstable options for what it's worth:</p>
<div class="codehilite"><pre><span></span><code>$ rustc --help
        --edition 2015|2018|2021
                        Specify which edition of the compiler to use when compiling code.
$ rustc --edition 2021 src/lib.rs
error: the crate requires edition 2021, but the latest edition supported by this Rust version is 2018
</code></pre></div>



<a name="249130070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249130070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249130070">(Aug 11 2021 at 16:10)</a>:</h4>
<p>But again, I'm likely just late to the nightly party and am learning how things work for the first time</p>



<a name="249130232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249130232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249130232">(Aug 11 2021 at 16:12)</a>:</h4>
<p>I think it was nice to see that there are new flags, but it was annoying to not realize it was nightly only before running it. It's also not clear from release to release when things are stable</p>



<a name="249130327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249130327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249130327">(Aug 11 2021 at 16:12)</a>:</h4>
<p>I think tags in the help output would be a nice little bit of polish. But minor polish if that</p>



<a name="249130644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249130644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249130644">(Aug 11 2021 at 16:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343063">UebelAndre</span> has marked this topic as resolved.</p>



<a name="249132130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249132130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249132130">(Aug 11 2021 at 16:25)</a>:</h4>
<p>Last question, what is the criteria for stabilizing a feature?</p>



<a name="249132245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249132245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249132245">(Aug 11 2021 at 16:26)</a>:</h4>
<p>it varies from feature to feature, there should be a tracking issue for each</p>



<a name="249132320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249132320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249132320">(Aug 11 2021 at 16:26)</a>:</h4>
<p>the one for --no-run is <a href="https://github.com/rust-lang/rust/issues/87022">https://github.com/rust-lang/rust/issues/87022</a></p>



<a name="249132396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249132396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249132396">(Aug 11 2021 at 16:27)</a>:</h4>
<p>Thank you!</p>



<a name="249132545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249132545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249132545">(Aug 11 2021 at 16:28)</a>:</h4>
<p>(that should probably be part of the error that says to use <code>-Zunstable-options</code>)</p>



<a name="249140502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249140502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249140502">(Aug 11 2021 at 17:28)</a>:</h4>
<p>FWIW, I've been working on improving this same situation in Cargo, as it can be quite confusing for people unfamiliar with it. For help text, I've tried to ensure that every unstable flag says whether or not it is unstable in the help. In the past, we've hidden those options but found that was bad for discovery. I've also reworked Cargo's unstable messages to be different based on the channel. For example:</p>
<div class="codehilite"><pre><span></span><code>error: the `--unit-graph` flag is unstable, and only available on the nightly channel of Cargo, but this is the `beta` channel
See https://doc.rust-lang.org/book/appendix-07-nightly-rust.html for more information about Rust release channels.
See https://github.com/rust-lang/cargo/issues/8002 for more information about the `--unit-graph` flag.
</code></pre></div>
<p>vs on nightly:</p>
<div class="codehilite"><pre><span></span><code>error: the `--unit-graph` flag is unstable, pass `-Z unstable-options` to enable it
See https://github.com/rust-lang/cargo/issues/8002 for more information about the `--unit-graph` flag.
</code></pre></div>
<p>It is a bit hard to squeeze a complete explanation in an error message of what "nightly" is and how to install and use nightly. It's definitely not perfect, but hopefully an improvement from the old messages. It might be nice for rustc and rustdoc to consider something similar.</p>



<a name="249140804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249140804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249140804">(Aug 11 2021 at 17:30)</a>:</h4>
<p>could someone open an issue for that? I agree it would be nice to have</p>



<a name="249142238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249142238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249142238">(Aug 11 2021 at 17:40)</a>:</h4>
<p>I can try to get to that later today</p>



<a name="249142283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249142283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249142283">(Aug 11 2021 at 17:41)</a>:</h4>
<p>Also, does <code>rustdoc --test</code> produce a binary?</p>



<a name="249143307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249143307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249143307">(Aug 11 2021 at 17:48)</a>:</h4>
<p>it creates and runs a test binary, yes</p>



<a name="249143357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249143357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249143357">(Aug 11 2021 at 17:48)</a>:</h4>
<p>Where is that test binary located?</p>



<a name="249143380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249143380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249143380">(Aug 11 2021 at 17:48)</a>:</h4>
<p>not sure, sorry</p>



<a name="249143395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249143395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249143395">(Aug 11 2021 at 17:48)</a>:</h4>
<p>When I <code>cargo test --doc</code> I don't seem to see anything in <code>target/*</code></p>



<a name="249143431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249143431" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249143431">(Aug 11 2021 at 17:48)</a>:</h4>
<p>you need <code>--persist-doctests</code> for that I think</p>



<a name="249146009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249146009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249146009">(Aug 11 2021 at 18:06)</a>:</h4>
<p>How would I pass that to <code>rustdoc</code> though <code>cargo</code>? (Sorry for newb question)</p>



<a name="249146383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249146383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249146383">(Aug 11 2021 at 18:09)</a>:</h4>
<p>for this you would need <code>RUSTDOCFLAGS=--persist-doctests</code></p>



<a name="249146396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249146396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249146396">(Aug 11 2021 at 18:09)</a>:</h4>
<p>when you're not running tests you can use <code>cargo rustdoc -- --persist-doctests</code></p>



<a name="249147868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249147868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249147868">(Aug 11 2021 at 18:20)</a>:</h4>
<p>That leads to</p>
<div class="codehilite"><pre><span></span><code>user@Andres-MacBook-Pro state_machine % cargo rustdoc -- --persist-doctests
 Documenting state_machine v0.1.0 (/Users/user/state_machine)
error: the `-Z unstable-options` flag must also be passed to enable the flag `persist-doctests`

error: could not document `state_machine`

Caused by:
  process didn&#39;t exit successfully: `rustdoc --edition=2018 --crate-type lib --crate-name state_machine src/lib.rs -o /Users/user/state_machine/target/doc --error-format=json --json=diagnostic-rendered-ansi --persist-doctests -L dependency=/Users/user/state_machine/target/debug/deps --extern num_traits=/Users/user/state_machine/target/debug/deps/libnum_traits-6ad19075ce2c644b.rmeta --crate-version 0.1.0` (exit status: 1)
user@Andres-MacBook-Pro state_machine % cargo +nightly rustdoc -- -Z unstable-options --persist-doctests
    Checking num-traits v0.2.14
 Documenting state_machine v0.1.0 (/Users/user/state_machine)
error: too many file operands

error: could not document `state_machine`

Caused by:
  process didn&#39;t exit successfully: `rustdoc --edition=2018 --crate-type lib --crate-name state_machine src/lib.rs -o /Users/user/state_machine/target/doc --error-format=json --json=diagnostic-rendered-ansi -Z unstable-options --persist-doctests -L dependency=/Users/user/state_machine/target/debug/deps --extern num_traits=/Users/user/state_machine/target/debug/deps/libnum_traits-939654366aed8407.rmeta --crate-version 0.1.0` (exit status: 1)
</code></pre></div>



<a name="249148013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249148013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249148013">(Aug 11 2021 at 18:21)</a>:</h4>
<p>ok, so pass both options in RUSTDOCFLAGS</p>



<a name="249600942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249600942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249600942">(Aug 16 2021 at 15:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0/near/249140804">said</a>:</p>
<blockquote>
<p>could someone open an issue for that? I agree it would be nice to have</p>
</blockquote>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> sorry to ping, but where would I file an issue for this?</p>



<a name="249600972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249600972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249600972">(Aug 16 2021 at 15:07)</a>:</h4>
<p>(which project, specifically)</p>



<a name="249600987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249600987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249600987">(Aug 16 2021 at 15:07)</a>:</h4>
<p>rust-lang/rust</p>



<a name="249601810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249601810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249601810">(Aug 16 2021 at 15:13)</a>:</h4>
<p>Is this a feature request? Do I start a thread on <a href="https://internals.rust-lang.org/">https://internals.rust-lang.org/</a> ?</p>



<a name="249602405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249602405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249602405">(Aug 16 2021 at 15:17)</a>:</h4>
<p>Just opening an issue should be fine, this is more of a diagnostic tweak than a feature request</p>



<a name="249622313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/249622313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#249622313">(Aug 16 2021 at 17:46)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> internals is more for "is this a good idea at all"</p>



<a name="251062435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/251062435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#251062435">(Aug 28 2021 at 15:16)</a>:</h4>
<p>Probably a very lazy ticket description but opened <a href="https://github.com/rust-lang/rust/issues/88426">https://github.com/rust-lang/rust/issues/88426</a></p>



<a name="251062476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/251062476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#251062476">(Aug 28 2021 at 15:16)</a>:</h4>
<p>does that capture the desires here?</p>



<a name="251062481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20rustdoc%20--no-run%20option%20for%201.54.0/near/251062481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20rustdoc.20--no-run.20option.20for.201.2E54.2E0.html#251062481">(Aug 28 2021 at 15:16)</a>:</h4>
<p>(not quite sure what to write...)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
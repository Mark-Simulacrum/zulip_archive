<html>
<head><meta charset="utf-8"><title>How to set `target-os` and `target-family` · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/How.20to.20set.20.60target-os.60.20and.20.60target-family.60.html">How to set `target-os` and `target-family`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273544772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/How%20to%20set%20%60target-os%60%20and%20%60target-family%60/near/273544772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> AF <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/How.20to.20set.20.60target-os.60.20and.20.60target-family.60.html#273544772">(Feb 28 2022 at 19:56)</a>:</h4>
<p>Hello, I am using a custom target for my rust project and I want to make sure it forces <code>#[cfg(unix)] </code> and <code>target_os = "linux"</code> to be set as one.<br>
How do I do that?<br>
This is my target.json file:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"llvm-target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x86_64-unknown-none"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"target-endian"</span><span class="p">:</span><span class="w"> </span><span class="s2">"little"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"target-pointer-width"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"family "</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"unix"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"os"</span><span class="p">:</span><span class="w"> </span><span class="s2">"linux"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"arch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x86_64"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"data-layout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x86-64"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-mmx,+sse,+sse2,+sse3,+ssse3,+sse4.1,+sse4.2,-3dnow,-3dnowa,-avx,-avx2"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"disable-redzone"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"eliminate-frame-pointer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"linker-is-gnu"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"no-compiler-rt"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="nt">"executables"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Seems like family does not do anything</p>



<a name="273546099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/How%20to%20set%20%60target-os%60%20and%20%60target-family%60/near/273546099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> AF <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/How.20to.20set.20.60target-os.60.20and.20.60target-family.60.html#273546099">(Feb 28 2022 at 20:05)</a>:</h4>
<p>Found a solution:<br>
define target family as follows:</p>
<div class="codehilite"><pre><span></span><code>&quot;target-family&quot;: [
        &quot;unix&quot;
      ],
</code></pre></div>



<a name="273552449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/How%20to%20set%20%60target-os%60%20and%20%60target-family%60/near/273552449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/How.20to.20set.20.60target-os.60.20and.20.60target-family.60.html#273552449">(Feb 28 2022 at 20:56)</a>:</h4>
<p>What's the nature of the target? Does it have an OS, or is it standalone?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>cargo fix for non-edition lints? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html">cargo fix for non-edition lints?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254077544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254077544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254077544">(Sep 20 2021 at 16:26)</a>:</h4>
<p>I’m not sure where to put this. Is <code>cargo fix</code> supposed to do things for non-edition lints?</p>



<a name="254077810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254077810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254077810">(Sep 20 2021 at 16:28)</a>:</h4>
<p>In my case, running it prints the same warnings as <code>cargo check</code>, many instances of:</p>
<div class="codehilite"><pre><span></span><code>warning: associated constant `p1_tracked` should have an upper case name
  --&gt; hg-core/src/dirstate/entry.rs:29:15
   |
29 |         const p1_tracked = 1 &lt;&lt; 1;
   |               ^^^^^^^^^^ help: convert the identifier to upper case: `P1_TRACKED`
</code></pre></div>
<p>… but no source file is changed</p>



<a name="254077894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254077894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254077894">(Sep 20 2021 at 16:29)</a>:</h4>
<p>Since I have many constant names (copy-pasted from another language) I wouldn’t mind having a tool making them all upper case for me</p>



<a name="254080256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254080256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giacomo Stevanato <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254080256">(Sep 20 2021 at 16:45)</a>:</h4>
<p>It automatically fixes only those lints that have suggestions marked as <code>MachineApplicable</code>. <code>non_upper_case_globals</code> for example is only marked as <code>MaybeIncorrect</code>, so it is not automatically fixed. There's an open issue for improving this behaviour <a href="https://github.com/rust-lang/rustfix/issues/200">https://github.com/rust-lang/rustfix/issues/200</a></p>



<a name="254082900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254082900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254082900">(Sep 20 2021 at 17:01)</a>:</h4>
<p>Do we currently have any machine applicable lints that update all use sites?</p>



<a name="254083022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254083022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254083022">(Sep 20 2021 at 17:02)</a>:</h4>
<p>This looks non-trivial, since it probably needs to consider privacy as well.</p>



<a name="254223215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254223215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254223215">(Sep 21 2021 at 15:09)</a>:</h4>
<p>rust-analyser can rename a symbol and all of its uses</p>



<a name="254223285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254223285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254223285">(Sep 21 2021 at 15:10)</a>:</h4>
<p>in this case though there weren’t any use yet</p>



<a name="254223354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/cargo%20fix%20for%20non-edition%20lints%3F/near/254223354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Sapin <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/cargo.20fix.20for.20non-edition.20lints.3F.html#254223354">(Sep 21 2021 at 15:10)</a>:</h4>
<p>but yeah I can see new how applying the suggested change is not easy in the general case</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
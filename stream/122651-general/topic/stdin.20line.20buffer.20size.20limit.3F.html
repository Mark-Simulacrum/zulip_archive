<html>
<head><meta charset="utf-8"><title>stdin line buffer size limit? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/stdin.20line.20buffer.20size.20limit.3F.html">stdin line buffer size limit?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264232936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/stdin%20line%20buffer%20size%20limit%3F/near/264232936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/stdin.20line.20buffer.20size.20limit.3F.html#264232936">(Dec 08 2021 at 22:54)</a>:</h4>
<p>I have code that looks like:</p>
<div class="codehilite"><pre><span></span><code>            let mut input = String::new();
            std::io::stdin().read_to_string(&amp;mut input).unwrap();
</code></pre></div>
<p>If I run this, and try to type more than 1024 ASCII characters without any newlines, it just... doesn't let me. I can do this fine in my shell and Python's REPL, and I've also tried multiple terminal emulators. Why would this be occurring, is this a std issue?</p>



<a name="264270378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/stdin%20line%20buffer%20size%20limit%3F/near/264270378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/stdin.20line.20buffer.20size.20limit.3F.html#264270378">(Dec 09 2021 at 08:42)</a>:</h4>
<p>What operating system are you on? On macOS I can't enter more than 1024 characters in one line with e.g. <code>cat &gt; test.txt</code>either. This is a hard-coded limit of macOS terminals in canonical mode. On Linux that limit is 4096 characters (input after that limit is silently discarded). Bash and the Python REPL get around it by disabling the canonical mode and implementing specialized terminal handling in non-canonical mode.<br>
You can get around this in canonical mode by pressing Ctrl-D after typing part of the line. This will flush the current line buffer to the program. Ctrl-D will only send EOF if the line buffer is empty.</p>



<a name="264582416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/stdin%20line%20buffer%20size%20limit%3F/near/264582416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/stdin.20line.20buffer.20size.20limit.3F.html#264582416">(Dec 11 2021 at 20:20)</a>:</h4>
<blockquote>
<p>You can get around this in canonical mode by pressing Ctrl-D after typing part of the line. This will flush the current line buffer to the program. Ctrl-D will only send EOF if the line buffer is empty.</p>
</blockquote>
<p>Interesting, I didn't know that!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
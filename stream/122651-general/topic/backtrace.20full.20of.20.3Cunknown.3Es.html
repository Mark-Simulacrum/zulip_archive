<html>
<head><meta charset="utf-8"><title>backtrace full of &lt;unknown&gt;s · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html">backtrace full of &lt;unknown&gt;s</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="257460383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257460383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257460383">(Oct 14 2021 at 00:30)</a>:</h4>
<p>I'm on macOS (aarch64-darwin to be precise) and rustc 1.55.0, and running the <code>backtrace</code> example from the <code>backtrace</code> crate (on HEAD as of writing) just shows up as <code>&lt;unknown&gt;</code>s, like so:</p>
<div class="codehilite"><pre><span></span><code>   0: &lt;unknown&gt;
   1: &lt;unknown&gt;
   2: &lt;unknown&gt;
   3: &lt;unknown&gt;
   4: &lt;unknown&gt;
   5: &lt;unknown&gt;
   6: &lt;unknown&gt;
   7: &lt;unknown&gt;
   8: &lt;unknown&gt;
   9: &lt;unknown&gt;
  10: &lt;unknown&gt;
</code></pre></div>
<p>is this a bug, or am I doing something wrong? I've set <code>RUST_BACKTRACE=1</code> in case that does something (although I don't think it does when using <code>backtrace</code>, only <code>std::backtrace</code>...)</p>



<a name="257460933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257460933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257460933">(Oct 14 2021 at 00:37)</a>:</h4>
<p>Additionally, I've tried to use <code>backtrace::trace</code> and <code>backtrace::resolve_frame</code> to try to get any info on why this is failing, but <code>resolve_frame</code> doesn't seem to provide any failure info (it just doesn't call the callback)</p>



<a name="257462360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257462360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257462360">(Oct 14 2021 at 00:54)</a>:</h4>
<p>I can also reproduce this behavior with <code>std::backtrace</code> (rustc <code>d7c97a02d1215e4ef26c31cb72dbaf16fd548b2c</code>)</p>



<a name="257465130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257465130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257465130">(Oct 14 2021 at 01:28)</a>:</h4>
<p>also, if this is a bug (which I'm pretty sure it is by this point), where should I file it, <code>rust-lang/backtrace-rs</code> or <code>rust-lang/rust</code>? I think the former?</p>



<a name="257466469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257466469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257466469">(Oct 14 2021 at 01:43)</a>:</h4>
<p>backtrace-rs is better, yeah</p>



<a name="257466793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257466793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257466793">(Oct 14 2021 at 01:48)</a>:</h4>
<p>thanks! <a href="https://github.com/rust-lang/backtrace-rs/issues/443">https://github.com/rust-lang/backtrace-rs/issues/443</a></p>



<a name="257466800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257466800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257466800">(Oct 14 2021 at 01:48)</a>:</h4>
<p><del>that's a terrible title honestly, but I can't think of a better one atm</del></p>



<a name="257467654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257467654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257467654">(Oct 14 2021 at 01:58)</a>:</h4>
<p>FWIW your code snippet works (produces <code>name:</code> and <code>filename:</code> lines) on my machine:</p>
<div class="codehilite"><pre><span></span><code>rustc 1.55.0 (c8dfcfe04 2021-09-06)
binary: rustc
commit-hash: c8dfcfe046a7680554bf4eb612bad840e7631c4b
commit-date: 2021-09-06
host: x86_64-unknown-linux-gnu
release: 1.55.0
LLVM version: 12.0.1
</code></pre></div>



<a name="257468392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257468392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257468392">(Oct 14 2021 at 02:06)</a>:</h4>
<p>My hunch is that this is some macOS specific issue.</p>



<a name="257468536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257468536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257468536">(Oct 14 2021 at 02:08)</a>:</h4>
<p>What I'm not sure about is if this is an aarch64 issue or not.</p>



<a name="257468717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20full%20of%20%3Cunknown%3Es/near/257468717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Winter <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20full.20of.20.3Cunknown.3Es.html#257468717">(Oct 14 2021 at 02:11)</a>:</h4>
<p>changed the issue title to mention that it only fails on macOS (didn't want to say that without confirming even though I was pretty sure that was the case), thanks <span class="user-mention" data-user-id="271719">@Mario Carneiro</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
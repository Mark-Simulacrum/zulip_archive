<html>
<head><meta charset="utf-8"><title>MacOS ABI compatibility · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html">MacOS ABI compatibility</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265084801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/MacOS%20ABI%20compatibility/near/265084801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html#265084801">(Dec 15 2021 at 22:24)</a>:</h4>
<p>I'm not familiar with MacOS, so I have a small question. Given a binary compiled in MacOS 11, is it likely to work on 10.15? If not, should I use an older version of XCode to build it, or point a newer one to the older SDK? This is about compiling on GitHub Actions, they have a bunch of versions pre-installed.</p>



<a name="265084829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/MacOS%20ABI%20compatibility/near/265084829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html#265084829">(Dec 15 2021 at 22:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> has marked this topic as resolved.</p>



<a name="265084832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/MacOS%20ABI%20compatibility/near/265084832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html#265084832">(Dec 15 2021 at 22:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> has marked this topic as unresolved.</p>



<a name="265088162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/MacOS%20ABI%20compatibility/near/265088162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html#265088162">(Dec 15 2021 at 22:57)</a>:</h4>
<p>Set the <code>MACOSX_DEPLOYMENT_TARGET</code> environment variable to the desired minimum macOS version for the compilation/linking process. Rustc will pass the version to the LLVM backend and the linker will use it to ensure that all referenced symbols are available in the shared libraries for this version.</p>



<a name="265088867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/MacOS%20ABI%20compatibility/near/265088867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html#265088867">(Dec 15 2021 at 23:03)</a>:</h4>
<p>Thanks, that seems useful. What happens if it's not set?</p>



<a name="265090191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/MacOS%20ABI%20compatibility/near/265090191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html#265090191">(Dec 15 2021 at 23:15)</a>:</h4>
<p>If <code>MACOSX_DEPLOYMENT_TARGET</code> is not set the linker uses the SDK default, which is the minimum of the default version specified by the currently selected SDK and the current OS version. If you don't specify an SDK via the <code>SDKROOT</code> env variable the selected SDK is taken from the currently selected Xcode commandline tools version (which can be changed via <code>xcode-select</code>). And of course it varies with Xcode version.</p>



<a name="265117205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/MacOS%20ABI%20compatibility/near/265117205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/MacOS.20ABI.20compatibility.html#265117205">(Dec 16 2021 at 06:36)</a>:</h4>
<p>Thanks again. I can't test the binaries, but at least they build.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
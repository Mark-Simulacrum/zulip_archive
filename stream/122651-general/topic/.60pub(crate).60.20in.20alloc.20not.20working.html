<html>
<head><meta charset="utf-8"><title>`pub(crate)` in alloc not working · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.60pub(crate).60.20in.20alloc.20not.20working.html">`pub(crate)` in alloc not working</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273424709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%60pub%28crate%29%60%20in%20alloc%20not%20working/near/273424709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.60pub(crate).60.20in.20alloc.20not.20working.html#273424709">(Feb 27 2022 at 21:00)</a>:</h4>
<p>I'm experimenting with some changes in alloc, added a few <code>pub(crate)</code> associated consts/fns to <code>Box</code>, but supposedly they're private. I think this is some complication between <code>std::boxed::Box</code> and <code>alloc::boxed::Box</code> but I'm not sure exactly and Idk what to do about it</p>
<p><a href="https://github.com/rust-lang/rust/runs/5350748014?check_suite_focus=true">https://github.com/rust-lang/rust/runs/5350748014?check_suite_focus=true</a></p>



<a name="273425619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%60pub%28crate%29%60%20in%20alloc%20not%20working/near/273425619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.60pub(crate).60.20in.20alloc.20not.20working.html#273425619">(Feb 27 2022 at 21:17)</a>:</h4>
<p><code>Checking stage0 std test/bench/example targets</code> I would guess it is because for test target Box is re-export from std: <a href="https://github.com/rust-lang/rust/blob/6a705566166debf5eff88c57140df607fa409aaa/library/alloc/src/lib.rs#L194-L202">https://github.com/rust-lang/rust/blob/6a705566166debf5eff88c57140df607fa409aaa/library/alloc/src/lib.rs#L194-L202</a></p>



<a name="273425988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%60pub%28crate%29%60%20in%20alloc%20not%20working/near/273425988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.60pub(crate).60.20in.20alloc.20not.20working.html#273425988">(Feb 27 2022 at 21:25)</a>:</h4>
<p>Hmm. Right, so <code>alloc::Vec</code> can't depend on <code>std::boxed::Box</code> for the obvious reasons within the tests</p>



<a name="273426003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%60pub%28crate%29%60%20in%20alloc%20not%20working/near/273426003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.60pub(crate).60.20in.20alloc.20not.20working.html#273426003">(Feb 27 2022 at 21:25)</a>:</h4>
<p>Perhaps doing something similar to <code>Vec</code> would fix it?</p>



<a name="273427300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%60pub%28crate%29%60%20in%20alloc%20not%20working/near/273427300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.60pub(crate).60.20in.20alloc.20not.20working.html#273427300">(Feb 27 2022 at 21:54)</a>:</h4>
<p>Well, this then becomes a chase where things depend on vec...</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
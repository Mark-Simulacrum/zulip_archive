<html>
<head><meta charset="utf-8"><title>dev container · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html">dev container</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251731337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/dev%20container/near/251731337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html#251731337">(Sep 02 2021 at 15:11)</a>:</h4>
<p>I have a dev container in which i install rust from rustup</p>
<p>I have the problem that trying to compile a crate with it, e.g., using <code>docker run -v $(pwd):/src -w /src -u $(id -u):$(id -g) $IMAGE bash -c "cargo build"</code> errors with: </p>
<div class="codehilite"><pre><span></span><code>failed to create temporary file &#39;/usr/local/cargo/registry/index/.../.git/objects/pack/...&#39;: Permission denied; class=Os (2)
</code></pre></div>



<a name="251731460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/dev%20container/near/251731460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html#251731460">(Sep 02 2021 at 15:12)</a>:</h4>
<p>My <code>CARGO_HOME</code> is set in the container to <code>/usr/local/cargo</code></p>



<a name="251731507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/dev%20container/near/251731507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html#251731507">(Sep 02 2021 at 15:12)</a>:</h4>
<p>and I do give it <code>chmod a+rwx $CARGO_HOME</code> during the container build</p>



<a name="251734892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/dev%20container/near/251734892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html#251734892">(Sep 02 2021 at 15:35)</a>:</h4>
<p>Why do you set <code>CARGO_HOME</code> to <code>/usr/local/cargo</code> instead of the default <code>~/.cargo</code>?</p>



<a name="251735076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/dev%20container/near/251735076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html#251735076">(Sep 02 2021 at 15:36)</a>:</h4>
<p>That's what the official rust docker containers do <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="251735225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/dev%20container/near/251735225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html#251735225">(Sep 02 2021 at 15:37)</a>:</h4>
<p>I guess they assume that they run as root. You are setting a different user. Maybe you could use user namespaces instead?</p>



<a name="251735370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/dev%20container/near/251735370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/dev.20container.html#251735370">(Sep 02 2021 at 15:38)</a>:</h4>
<p>Thanks, i'll give that a try!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
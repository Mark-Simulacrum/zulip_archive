<html>
<head><meta charset="utf-8"><title>Lifetime elision/expansion of erased types · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Lifetime.20elision.2Fexpansion.20of.20erased.20types.html">Lifetime elision/expansion of erased types</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273320365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Lifetime%20elision/expansion%20of%20erased%20types/near/273320365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Hodge (Mutabah) <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Lifetime.20elision.2Fexpansion.20of.20erased.20types.html#273320365">(Feb 26 2022 at 05:47)</a>:</h4>
<p>More work on mrustc lifetime checking. Found the following code in 1.54's liballoc and couldn't find reference in the reference or the book as to how this is inferred to capture <code>'b</code>. I'm guessing that it just captures any lifetime mentioned in the ATYs, but would like confirmation.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="o">'</span><span class="na">b</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PairSlices</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="o">'</span><span class="na">b</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">remainder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">impl</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">b</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="273329705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Lifetime%20elision/expansion%20of%20erased%20types/near/273329705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Lifetime.20elision.2Fexpansion.20of.20erased.20types.html#273329705">(Feb 26 2022 at 09:29)</a>:</h4>
<p><a href="https://rust-lang.github.io/rfcs/1951-expand-impl-trait.html#scoping-for-type-and-lifetime-parameters">https://rust-lang.github.io/rfcs/1951-expand-impl-trait.html#scoping-for-type-and-lifetime-parameters</a></p>



<a name="273329911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Lifetime%20elision/expansion%20of%20erased%20types/near/273329911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Lifetime.20elision.2Fexpansion.20of.20erased.20types.html#273329911">(Feb 26 2022 at 09:31)</a>:</h4>
<p>So basically, all generic type parameters captured unconditionally, but lifetime parameters only when they're mentioned.</p>



<a name="273330045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Lifetime%20elision/expansion%20of%20erased%20types/near/273330045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Hodge (Mutabah) <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Lifetime.20elision.2Fexpansion.20of.20erased.20types.html#273330045">(Feb 26 2022 at 09:34)</a>:</h4>
<p>Neat, thanks. Will read the link and integrate</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Who should review changes to linkchecker? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html">Who should review changes to linkchecker?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249938285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249938285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249938285">(Aug 19 2021 at 03:39)</a>:</h4>
<p>For <a href="https://github.com/rust-lang/rust/pull/87073">https://github.com/rust-lang/rust/pull/87073</a> I made some changes to the logic in linkcheck (<a href="https://github.com/rust-lang/rust/pull/87073/commits/688174e88e4200617e8fb82241f7a41eb9ced602">https://github.com/rust-lang/rust/pull/87073/commits/688174e88e4200617e8fb82241f7a41eb9ced602</a>).  Who should review that? I think it's a reasonable change but I feel a little uncomfortable unilaterally approving it.</p>



<a name="249939159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939159">(Aug 19 2021 at 03:59)</a>:</h4>
<p>If you're asking about the Windows error check, I think it's probably fine.  An alternative would be to just check for <code>::</code> and not bother looking at the error code, but either way seems fine to me.</p>
<p>It looks like it needs to be formatted, though.</p>



<a name="249939240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939240">(Aug 19 2021 at 04:00)</a>:</h4>
<blockquote>
<p>It looks like it needs to be formatted, though.</p>
</blockquote>
<p>x.py fmt doesn't complain <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span> </p>
<div class="codehilite"><pre><span></span><code>[nix-shell:~/rustc3]$ x fmt src/tools/linkchecker/
Updating only changed submodules
Submodules updated in 0.01 seconds
    Finished dev [unoptimized + debuginfo] target(s) in 0.17s
skip untracked path main.rs during rustfmt invocations
Build completed successfully in 0:00:00

[nix-shell:~/rustc3]$ git d

[nix-shell:~/rustc3]$
</code></pre></div>



<a name="249939268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939268">(Aug 19 2021 at 04:00)</a>:</h4>
<p>hmm I wonder if that's related to the cfg</p>



<a name="249939389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939389">(Aug 19 2021 at 04:03)</a>:</h4>
<p>I don't think it is the cfg, <code>./x.py fmt</code> works for me.</p>



<a name="249939398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939398">(Aug 19 2021 at 04:03)</a>:</h4>
<p>that's so strange</p>



<a name="249939401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939401">(Aug 19 2021 at 04:03)</a>:</h4>
<p>well, I'll just manually format it</p>



<a name="249939450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939450">(Aug 19 2021 at 04:04)</a>:</h4>
<p>Why are there now links with <code>::</code>?</p>



<a name="249939477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939477">(Aug 19 2021 at 04:04)</a>:</h4>
<p>it's a broken link - are you asking why it's now broken?</p>



<a name="249939494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939494">(Aug 19 2021 at 04:04)</a>:</h4>
<p>it used to only be documented in std, but now that it's documented in core, the link to <code>alloc</code> doesn't resolve</p>



<a name="249939505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939505">(Aug 19 2021 at 04:04)</a>:</h4>
<p>and the alternative is to use relative links, which will break on re-exports</p>



<a name="249939506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939506">(Aug 19 2021 at 04:04)</a>:</h4>
<p>ah, I see</p>



<a name="249939598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939598">(Aug 19 2021 at 04:06)</a>:</h4>
<p>Please r? me on those changes at least, I'd like to take a look at the CARGO_PKG_NAME being necessary - likely can do so tomorrow.</p>



<a name="249939708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939708">(Aug 19 2021 at 04:08)</a>:</h4>
<p>CARGO_PKG_NAME is being used for links like this:</p>
<div class="codehilite"><pre><span></span><code> #[doc = concat!(&quot;[`exit`]: &quot;, include_str!(concat!(&quot;../../&quot;, env!(&quot;CARGO_PKG_NAME&quot;), &quot;/primitive_docs/process_exit.md&quot;)))]
</code></pre></div>



<a name="249939713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939713">(Aug 19 2021 at 04:09)</a>:</h4>
<p>I asked t-libs a couple times whether they had concerns but no one ever responded :(</p>



<a name="249939829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939829">(Aug 19 2021 at 04:11)</a>:</h4>
<p>Anything requiring new env variables for compilation (even if Cargo implicitly passes them) I'd appreciate a ping on, usually has relevance in a number of places.</p>



<a name="249939873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939873">(Aug 19 2021 at 04:12)</a>:</h4>
<p>gotcha, I can do that in the future :)</p>



<a name="249939880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/249939880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#249939880">(Aug 19 2021 at 04:12)</a>:</h4>
<p>yeah I probably should have realized when I had to update a run-make test</p>



<a name="250035129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035129">(Aug 19 2021 at 19:17)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> so I did <a href="https://github.com/Mark-Simulacrum/rust/commit/d41c141051ef83234257d8aa4d2e11224f778383">https://github.com/Mark-Simulacrum/rust/commit/d41c141051ef83234257d8aa4d2e11224f778383</a> locally and that seems to pass the src/test/rustdoc tests and work ok in the few links I clicked -- is there a reason you didn't do that? I feel like I'm missing something obvious?</p>



<a name="250035186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035186">(Aug 19 2021 at 19:17)</a>:</h4>
<p>I don't really see any docs or discussion of why CARGO_PKG_NAME helps</p>



<a name="250035327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035327">(Aug 19 2021 at 19:18)</a>:</h4>
<p>Umm. That probably works. Do the links work from the primitives re-exported in <code>std::primitive</code>?</p>



<a name="250035510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035510">(Aug 19 2021 at 19:19)</a>:</h4>
<p>Those aren't inlined, right?</p>



<a name="250035524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035524">(Aug 19 2021 at 19:19)</a>:</h4>
<p>So they're just the same pages</p>



<a name="250035562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035562">(Aug 19 2021 at 19:19)</a>:</h4>
<p>yup you're right</p>



<a name="250035596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035596">(Aug 19 2021 at 19:19)</a>:</h4>
<p>ok that's way simpler, let's do that <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> thanks for taking a look!</p>



<a name="250035603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035603">(Aug 19 2021 at 19:19)</a>:</h4>
<p>Anyway, if that works, happy to force push a squashed version to your branch</p>



<a name="250035615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250035615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250035615">(Aug 19 2021 at 19:19)</a>:</h4>
<p>(and r+)</p>



<a name="250037449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250037449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250037449">(Aug 19 2021 at 19:33)</a>:</h4>
<p>that would be great :) thank you!</p>



<a name="250045299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250045299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250045299">(Aug 19 2021 at 20:33)</a>:</h4>
<p>(done)</p>



<a name="250228778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228778">(Aug 21 2021 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I found why this broke - <code>include_str!</code> is relative to the current file, not the crate root, so <code>../primitive_docs</code> will always include the <code>std</code> version, not <code>core</code></p>



<a name="250228781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228781">(Aug 21 2021 at 17:40)</a>:</h4>
<p>I'm going to revert that change and set it back to waiting on review</p>



<a name="250228782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228782">(Aug 21 2021 at 17:40)</a>:</h4>
<p>hmm</p>



<a name="250228788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228788">(Aug 21 2021 at 17:40)</a>:</h4>
<p>honestly, I'd rather we just duplicate the file maybe?</p>



<a name="250228793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228793">(Aug 21 2021 at 17:41)</a>:</h4>
<p>like, with a CI check that they're the same</p>



<a name="250228794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228794">(Aug 21 2021 at 17:41)</a>:</h4>
<p>that's a <em>lot</em> of docs to duplicate :/</p>



<a name="250228801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228801">(Aug 21 2021 at 17:41)</a>:</h4>
<p>maybe even a symlink will work?</p>



<a name="250228802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228802">(Aug 21 2021 at 17:41)</a>:</h4>
<p>and you'd have to make the check smart and know that the links can be different</p>



<a name="250228806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228806">(Aug 21 2021 at 17:41)</a>:</h4>
<p>no, I mean, you don't need to change any of the contents, right?</p>



<a name="250228810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228810">(Aug 21 2021 at 17:41)</a>:</h4>
<p>oh oh I see, if you use <code>include_str!(../core/primitive_docs.rs)</code> from core the links will be right</p>



<a name="250228857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228857">(Aug 21 2021 at 17:42)</a>:</h4>
<p>er, not quite what I was thinking, but maybe</p>



<a name="250228858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228858">(Aug 21 2021 at 17:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F/near/250228801">said</a>:</p>
<blockquote>
<p>maybe even a symlink will work?</p>
</blockquote>
<p>do symlinks work on windows?</p>



<a name="250228860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228860">(Aug 21 2021 at 17:42)</a>:</h4>
<p>not sure</p>



<a name="250228867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228867">(Aug 21 2021 at 17:42)</a>:</h4>
<p>hmm my computer is still in the mail so I can't test on windows just now</p>



<a name="250228869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228869">(Aug 21 2021 at 17:42)</a>:</h4>
<p>but even just a <code>cp std/foo core/foo</code> would be fine with me, personally, and checked by tidy or something</p>



<a name="250228881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228881">(Aug 21 2021 at 17:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F/near/250228869">said</a>:</p>
<blockquote>
<p>but even just a <code>cp std/foo core/foo</code> would be fine with me, personally, and checked by tidy or something</p>
</blockquote>
<p>I would rather try to get symlinks working first if possible - that seems like less effort all around</p>



<a name="250228890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228890">(Aug 21 2021 at 17:43)</a>:</h4>
<p>let me see who helped with getting download-ci-llvm working on windows</p>



<a name="250228897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228897">(Aug 21 2021 at 17:43)</a>:</h4>
<p>in theory symlinks work - <a href="https://blogs.windows.com/windowsdeveloper/2016/12/02/symlinks-windows-10/">https://blogs.windows.com/windowsdeveloper/2016/12/02/symlinks-windows-10/</a></p>



<a name="250228943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228943">(Aug 21 2021 at 17:44)</a>:</h4>
<p>I'm not sure if the relative path in rustc "looks through" symlinks</p>



<a name="250228945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228945">(Aug 21 2021 at 17:44)</a>:</h4>
<blockquote>
<p>Starting with Windows 10 Insiders build 14972, symlinks can be created without needing to elevate the console as administrator.</p>
</blockquote>
<p>oh <em>wow</em></p>



<a name="250228948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228948">(Aug 21 2021 at 17:44)</a>:</h4>
<p>that's new</p>



<a name="250228949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228949">(Aug 21 2021 at 17:44)</a>:</h4>
<p>(nor am I sure what the <em>right</em> behavior is)</p>



<a name="250228954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228954">(Aug 21 2021 at 17:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F/near/250228943">said</a>:</p>
<blockquote>
<p>I'm not sure if the relative path in rustc "looks through" symlinks</p>
</blockquote>
<p>that much I can test on linux</p>



<a name="250228964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228964">(Aug 21 2021 at 17:45)</a>:</h4>
<p>It's best to avoid symlinks on Windows</p>



<a name="250228984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228984">(Aug 21 2021 at 17:45)</a>:</h4>
<p>hmm, does git support hard links?</p>



<a name="250228985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228985">(Aug 21 2021 at 17:45)</a>:</h4>
<p>or does it just treat them as copies?</p>



<a name="250228988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228988">(Aug 21 2021 at 17:45)</a>:</h4>
<p>hm, not sure, but seems unlikely</p>



<a name="250228999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250228999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250228999">(Aug 21 2021 at 17:46)</a>:</h4>
<p>Git does not do anything with hard links, it just treats them as copies.</p>



<a name="250229042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250229042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250229042">(Aug 21 2021 at 17:46)</a>:</h4>
<p>but honestly the "copy the file" behavior seems not terrible, ultimately it's not like these docs get edited that much</p>



<a name="250229043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250229043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250229043">(Aug 21 2021 at 17:46)</a>:</h4>
<p>ok, I'll write the tidy check</p>



<a name="250229168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250229168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250229168">(Aug 21 2021 at 17:49)</a>:</h4>
<p>ideally there should just be a single source</p>



<a name="250229217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250229217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250229217">(Aug 21 2021 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="303710">@Gary Guo</span> open to suggestions <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="250229236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250229236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250229236">(Aug 21 2021 at 17:50)</a>:</h4>
<p>I'll have a look at the PR later to see if I can come up some sensible suggestions</p>



<a name="250229255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250229255" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250229255">(Aug 21 2021 at 17:51)</a>:</h4>
<p>the commit you want is <a href="https://github.com/rust-lang/rust/pull/87073/commits/7dec1e7b440b1e0911550e43cfd5bcd0a2d709d1">https://github.com/rust-lang/rust/pull/87073/commits/7dec1e7b440b1e0911550e43cfd5bcd0a2d709d1</a>, I wouldn't recommend looking at the whole PR</p>



<a name="250231061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250231061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250231061">(Aug 21 2021 at 18:36)</a>:</h4>
<p>I wonder if we can introduce a special type of intradoc link, which allows a item path and a relative URL path</p>



<a name="250231143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Who%20should%20review%20changes%20to%20linkchecker%3F/near/250231143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Who.20should.20review.20changes.20to.20linkchecker.3F.html#250231143">(Aug 21 2021 at 18:38)</a>:</h4>
<p>I am not willing to introduce more hacks to rustdoc for this. There are plenty of other working alternatives.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
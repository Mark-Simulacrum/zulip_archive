<html>
<head><meta charset="utf-8"><title>Why does a Debug implementation not count as reading a field · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html">Why does a Debug implementation not count as reading a field</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267640772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267640772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267640772">(Jan 11 2022 at 20:31)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">dbg!</span><span class="p">(</span><span class="n">F</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">temp</span>: <span class="mf">10.0</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[derive(Debug)]</span><span class="w"></span>
<span class="k">struct</span> <span class="nc">F</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">temp</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>warning: field is never read: `temp`
 --&gt; src/main.rs:7:5
  |
7 |     temp: f32,
  |     ^^^^^^^^^
  |
  = note: `#[warn(dead_code)]` on by default
</code></pre></div>



<a name="267640843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267640843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267640843">(Jan 11 2022 at 20:31)</a>:</h4>
<p>Also, if you change it to <code>struct F(f32)</code>, the warning goes away</p>



<a name="267641003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267641003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267641003">(Jan 11 2022 at 20:33)</a>:</h4>
<p>See <a href="https://github.com/rust-lang/rust/issues/88900">https://github.com/rust-lang/rust/issues/88900</a></p>
<p>I suspect the tuple struct not linting is a bug, but not sure.</p>



<a name="267641682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267641682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267641682">(Jan 11 2022 at 20:39)</a>:</h4>
<blockquote>
<p>Might this also be the reason why rust 1.57.0 fails to build itself?</p>
</blockquote>
<p>LOL</p>



<a name="267641884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267641884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267641884">(Jan 11 2022 at 20:41)</a>:</h4>
<p>What's interesting about the root change to ignore the derived code in analysis is that I actually would like to use that myself for SNAFU.</p>



<a name="267641996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267641996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267641996">(Jan 11 2022 at 20:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116155">Jake Goulding</span> <a href="#narrow/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field/near/267640843">said</a>:</p>
<blockquote>
<p>Also, if you change it to <code>struct F(f32)</code>, the warning goes away</p>
</blockquote>
<p>Sounds like a bug.  There's a <em>use</em> in the function that's generated by the parens sugar, but it's a write not a <em>read</em>.</p>



<a name="267642113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267642113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267642113">(Jan 11 2022 at 20:43)</a>:</h4>
<p>I guess I'll open a new bug during my next training break.</p>



<a name="267642225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267642225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267642225">(Jan 11 2022 at 20:44)</a>:</h4>
<p>And see if there's a tracking issue for stabilizing something like <code>rustc_trivial_field_reads</code></p>



<a name="267653042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Why%20does%20a%20Debug%20implementation%20not%20count%20as%20reading%20a%20field/near/267653042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Why.20does.20a.20Debug.20implementation.20not.20count.20as.20reading.20a.20field.html#267653042">(Jan 11 2022 at 22:09)</a>:</h4>
<p>Opened <a href="https://github.com/rust-lang/rust/issues/92790">#92790</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Specialize on return type of a fn trait, e.g. `Fn() -&gt; T`? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Specialize.20on.20return.20type.20of.20a.20fn.20trait.2C.20e.2Eg.2E.20.60Fn().20-.3E.20T.60.3F.html">Specialize on return type of a fn trait, e.g. `Fn() -&gt; T`?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278603939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Specialize%20on%20return%20type%20of%20a%20fn%20trait%2C%20e.g.%20%60Fn%28%29%20-%3E%20T%60%3F/near/278603939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Specialize.20on.20return.20type.20of.20a.20fn.20trait.2C.20e.2Eg.2E.20.60Fn().20-.3E.20T.60.3F.html#278603939">(Apr 11 2022 at 19:22)</a>:</h4>
<p>Is it possible to specialize based on the return type of a <code>Fn</code>/<code>FnMut</code>/<code>FnOnce</code>? For example (ignoring if we want to do this for a moment -- it would need to justify itself and I'm not planning on doing it at the moment) specializing <code>sort_unstable_by_key</code> on the key type?</p>
<p>I wanted to do this but couldn't figure it out a while ago, and now it's come up again in another unrelated context. It seemed to be impossible at the time, but I don't <em>really</em> know what I'm doing with specialization. If it is possible, is there anything I should be looking at as a related  example (even only tangentially related -- I can fill in gaps, especially if I know it should be possible).</p>
<p>I think ideally I'm interested in the answer for min_specialization, but if it's possible only with the full version, that's at least useful to know.</p>



<a name="278609995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Specialize%20on%20return%20type%20of%20a%20fn%20trait%2C%20e.g.%20%60Fn%28%29%20-%3E%20T%60%3F/near/278609995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Specialize.20on.20return.20type.20of.20a.20fn.20trait.2C.20e.2Eg.2E.20.60Fn().20-.3E.20T.60.3F.html#278609995">(Apr 11 2022 at 20:14)</a>:</h4>
<p>You can't specialize on the Fn traits directly. But its output associated type could be linked to a generic parameter of a specialization helper trait, I think.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
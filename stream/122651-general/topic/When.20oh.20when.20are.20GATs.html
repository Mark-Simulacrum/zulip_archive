<html>
<head><meta charset="utf-8"><title>When oh when are GATs · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html">When oh when are GATs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273361512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273361512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273361512">(Feb 26 2022 at 20:33)</a>:</h4>
<p>I know this is the hardest question, but... when we gonna see stable GATs?</p>
<blockquote>
<p>we have high hopes we can stabilize this feature within the next couple months (<a href="https://blog.rust-lang.org/2021/08/03/GATs-stabilization-push.html">Aug. 3, 2021</a>)</p>
</blockquote>
<p>I have a library that could make use of GATs. It's still in local-only development, so I don't mind using a nightly feature for now, especially if I can help with the feature, but I don't particularly want to be stuck in nightly-only purgatory for "a long time".</p>



<a name="273361593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273361593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Conrad Ludgate <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273361593">(Feb 26 2022 at 20:35)</a>:</h4>
<p>Seconding this. It seems its just waiting for a decision about where clause location + enough time to verify no bugs. But theres some internal libraries we use at work that are going to look so clean with GATs</p>



<a name="273362439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273362439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273362439">(Feb 26 2022 at 20:54)</a>:</h4>
<p>I am not sure if that would be speed up things a bit but why not stabilize a minimal version of gat? Maybe with just one lifetime or something. It feels like we are waiting for fully fledged GAT with all corner cases taking care of whereas a lot of use cases could be unlocked with "minimal GAT"</p>



<a name="273362982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273362982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273362982">(Feb 26 2022 at 21:04)</a>:</h4>
<p>I think that the where clause location has been decided on</p>



<a name="273363058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273363058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273363058">(Feb 26 2022 at 21:06)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/90076#issuecomment-1020949582">https://github.com/rust-lang/rust/pull/90076#issuecomment-1020949582</a> yeah a month ago</p>



<a name="273363063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273363063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273363063">(Feb 26 2022 at 21:06)</a>:</h4>
<p>afaict its just actually _implementing_ the change</p>



<a name="273363072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273363072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273363072">(Feb 26 2022 at 21:07)</a>:</h4>
<p>the <code>GATS-blocking</code> label only lists rustdoc as the other blocker</p>



<a name="273363073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273363073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273363073">(Feb 26 2022 at 21:07)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/92341">#92341</a></p>



<a name="273363074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273363074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273363074">(Feb 26 2022 at 21:07)</a>:</h4>
<p>(no idea how up to date that label is)</p>



<a name="273363189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273363189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273363189">(Feb 26 2022 at 21:10)</a>:</h4>
<p>I think that if GATs are as close as they are that splitting them up is actually not going to make them come faster (there is a certain amount of overhead in splitting features up).</p>



<a name="273364169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273364169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273364169">(Feb 26 2022 at 21:33)</a>:</h4>
<p>Sure sounds like people are saying “soon“￼</p>



<a name="273371249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371249">(Feb 27 2022 at 00:09)</a>:</h4>
<p>A more "official" summary/update will be coming soon, but here's a brief one:</p>
<ul>
<li>There are a couple blockers that are "unresolved" fully, but only in that the PRs to resolve them just haven't been merged. (<a href="https://github.com/rust-lang/rust/issues/90076">#90076</a> to change the location of where clauses, <a href="https://github.com/rust-lang/rust/issues/94009">#94009</a> to add GATs functionality to rustdoc). These are just waiting on final review.</li>
<li>There are a number of issues that haven't been fully triaged for whether they rise to the level of <em>blocking</em>. Likely, the answer is <em>no</em> for probably all of them. A blocking issue at this point would be either 1) A major ergonomics issue (I don't think any of these are that) or 2) A bug that poses a backwards-compatibility hazard if stabilized as-is (more likely, but not a bit chance; it's more so just making sure we/I know the root cause of each of these issues).</li>
<li>There are some API design thoughts (<a href="https://github.com/rust-lang/generic-associated-types-initiative/issues/1">generic-associated-types-initiative#1</a>, <a href="https://github.com/rust-lang/generic-associated-types-initiative/issues/2">generic-associated-types-initiative#2</a>) that I personally think we really should spell out before stabilization. I don't think we should necessarily require them to be implemented or even require them <em>to be able to be implemented</em> (I think there might be some HRTB implied bounds issues to work through, for example), but I think we should know if there are any design choices that we are committing to <em>now</em> that would cause better ergonomics <em>later</em> (like, e.g., making <code>Iterator::Item</code> a GAT) to be impossible. Arguably, a lot of the things I foresee us wanting to do <em>someday</em> probably deserves an RFC.</li>
<li>Finally, we/I need to write a stabilization report. As part of this, we should should be thinking 1) What kind of patterns do we expect to work "perfectly"; what kind of patterns do we expect will work, but might run into problems (I imagine some HRTB-related things in this category); and what kind of patterns do we just don't expect to work at all yet (object safety, <code>LendingIterator</code> <code>for_each</code> and <code>filter</code>, <code>for&lt;T&gt;</code> all come to mind) 2) What is the current test coverage and how well represented are the patterns from (1) represented 3) Future work - much of this from the previous point, but I expect to touch on the second category from (1) a bit too.</li>
</ul>



<a name="273371318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371318">(Feb 27 2022 at 00:11)</a>:</h4>
<p>All this to say: very soon.</p>



<a name="273371372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371372">(Feb 27 2022 at 00:12)</a>:</h4>
<p>Please note: I still would love to see concrete/different use cases for GATs. Particularly, I'd love to see things like "I wanted to do this weird thing and it worked" and "I wanted to do this weird thing and it didn't work" and "This was a very simple thing, but it didn't work"</p>



<a name="273371382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371382">(Feb 27 2022 at 00:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281572">marmeladema</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273362439">said</a>:</p>
<blockquote>
<p>I am not sure if that would be speed up things a bit but why not stabilize a minimal version of gat? Maybe with just one lifetime or something. It feels like we are waiting for fully fledged GAT with all corner cases taking care of whereas a lot of use cases could be unlocked with "minimal GAT"</p>
</blockquote>
<p>Note that lifetime-only GATs can already be fully "emulated" using traits with lifetime arguments and HRTBs. Compare e.g. <a href="https://users.rust-lang.org/t/lifetime-conflicting-requirements/64070/4">this example</a>.</p>



<a name="273371440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371440">(Feb 27 2022 at 00:14)</a>:</h4>
<p>oh the <code>_Outlives</code> generic is a neat trick</p>



<a name="273371443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371443">(Feb 27 2022 at 00:14)</a>:</h4>
<p>i'd not come across that before, cool</p>



<a name="273371446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371446">(Feb 27 2022 at 00:14)</a>:</h4>
<p>The often-cited <code>LendingIterator</code> is also a case of a lifetime-only GAT, so technically people could develop and experiment with its API already, even on stable.</p>



<a name="273371533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371533">(Feb 27 2022 at 00:17)</a>:</h4>
<p>AFAICT most requests for GATs are for cases with lifetimes only, so I don't even fully understand the huge demand for getting GAT support ASAP. I couldn't immediately - of the top of my head - name a good use-case that involves actual type parameters, not lifetimes. I guess a lot of it is that existing stable workarounds are largely unknown.</p>



<a name="273371544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371544">(Feb 27 2022 at 00:17)</a>:</h4>
<p>I _really_ want GATs and ive spent a lot of time using the intermediate <code>trait</code> hack and  honestly the main reason I want  GATs is because it is so incredibly bad boilerplate wise trying to use the workarounds lol</p>



<a name="273371585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371585">(Feb 27 2022 at 00:18)</a>:</h4>
<p>but maybe the even more main reason is just that im hoping that as gats get developed more HRTB will become less buggy..</p>



<a name="273371671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371671">(Feb 27 2022 at 00:20)</a>:</h4>
<p>I feel like the workarounds are currently even more capable than the actual thing, still. With a <code>MyTrait: for&lt;'a&gt; HasGenericType&lt;'a&gt;</code> supertrait thing, you can at least write bounds such as <code>T: MyTrait + for&lt;'a&gt; HasGenericType&lt;'a, GenericType = FooBar&lt;'a&gt;&gt;</code>. Try doing this with a GAT... there's no syntax for it. No way to write something like<code>T: MyTrait&lt;for&lt;'a&gt; GenericType&lt;'a&gt; = FooBar&lt;'a&gt;&gt;</code> or whatever else would be a reasonable syntax. These limitations almost feel like a blocker to me.</p>



<a name="273371749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371749">(Feb 27 2022 at 00:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="280891">Frank Steffahn</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273371671">said</a>:</p>
<blockquote>
<p>Try doing this with a GAT... there's no syntax for it. No way to say <code>T: MyTrait&lt;for&lt;'a&gt; GenericType &lt;'a&gt; = FooBar&lt;'a&gt;&gt;</code> or something like that.</p>
</blockquote>
<p>That would be <code>T: for&lt;'a&gt; MyTrait&lt;GenericType&lt;'a&gt; = FooBar&lt;'a&gt;&gt;</code></p>



<a name="273371806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371806">(Feb 27 2022 at 00:24)</a>:</h4>
<p>Oh... that's a thing?</p>



<a name="273371898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371898">(Feb 27 2022 at 00:27)</a>:</h4>
<p>That's a thing</p>



<a name="273371975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371975">(Feb 27 2022 at 00:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273371372">said</a>:</p>
<blockquote>
<p>Please note: I still would love to see concrete/different use cases for GATs. Particularly, I'd love to see things like "I wanted to do this weird thing and it worked" and "I wanted to do this weird thing and it didn't work" and "This was a very simple thing, but it didn't work"</p>
</blockquote>
<p>Is there a specific place you're wanting people to give that feedback?</p>



<a name="273371979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371979">(Feb 27 2022 at 00:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273371898">said</a>:</p>
<blockquote>
<p>That's a thing</p>
</blockquote>
<p>Impressive. For some reason, I've never seen that before. And the compiler doesn't really help with suggestions either.</p>



<a name="273371994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273371994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273371994">(Feb 27 2022 at 00:29)</a>:</h4>
<p>It's a little weird, because that really <em>should</em> mean <code>for&lt;'a where 'a is WF&gt;</code> (meaning that the <code>'a</code> you pick results in everything to be WF)</p>



<a name="273372155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372155">(Feb 27 2022 at 00:30)</a>:</h4>
<p>So, like if you have a <code>type Item&lt;'a&gt; where Self: 'a</code>, that would be <code>I: for&lt;'a where I: 'a&gt; Iterator&lt;Item&lt;'a&gt; = ...&gt;</code></p>



<a name="273372163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372163">(Feb 27 2022 at 00:31)</a>:</h4>
<p>which is a big hurdle for making <code>Iterator::Item</code> a GAT</p>



<a name="273372170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372170">(Feb 27 2022 at 00:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273371975">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273371372">said</a>:</p>
<blockquote>
<p>Please note: I still would love to see concrete/different use cases for GATs. Particularly, I'd love to see things like "I wanted to do this weird thing and it worked" and "I wanted to do this weird thing and it didn't work" and "This was a very simple thing, but it didn't work"</p>
</blockquote>
<p>Is there a specific place you're wanting people to give that feedback?</p>
</blockquote>
<p>the GATS initiative repo</p>



<a name="273372184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372184">(Feb 27 2022 at 00:32)</a>:</h4>
<p><a href="https://github.com/rust-lang/generic-associated-types-initiative/issues/new/choose">https://github.com/rust-lang/generic-associated-types-initiative/issues/new/choose</a></p>



<a name="273372226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372226">(Feb 27 2022 at 00:32)</a>:</h4>
<p>oh thats pretty neat :)</p>



<a name="273372567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372567">(Feb 27 2022 at 00:42)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> </p>
<p>I played around with this syntax for a moment,</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#![feature(generic_associated_types)]</span><span class="w"></span>

<span class="k">trait</span><span class="w"> </span><span class="n">Tr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Ty</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">where</span><span class="w"></span>
<span class="w">        </span><span class="bp">Self</span>: <span class="o">'</span><span class="na">a</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">method</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Ty</span><span class="o">&lt;'</span><span class="nb">_</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nc">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Tr</span><span class="o">&lt;</span><span class="n">Ty</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">bar</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// the parameter type `T` may not live long enough</span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">bar</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nc">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Tr</span><span class="o">&lt;</span><span class="n">Ty</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>doesn't work, while the workaround does work:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">HasTy</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="n">_Outlives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="bp">Self</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Ty</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">type</span> <span class="nc">Ty</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">HasTy</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;&gt;</span>::<span class="n">Ty</span><span class="p">;</span><span class="w"></span>

<span class="k">trait</span><span class="w"> </span><span class="n">Tr</span>: <span class="nc">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">HasTy</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">method</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Ty</span><span class="o">&lt;'</span><span class="nb">_</span><span class="p">,</span><span class="w"> </span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nc">Tr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">HasTy</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="n">Ty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">bar</span>::<span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">bar</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nc">Tr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">for</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">HasTy</span><span class="o">&lt;'</span><span class="na">a</span><span class="p">,</span><span class="w"> </span><span class="n">Ty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="273372842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372842">(Feb 27 2022 at 00:48)</a>:</h4>
<p>This looks like <a href="https://github.com/rust-lang/rust/issues/93262">#93262</a></p>



<a name="273372860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372860">(Feb 27 2022 at 00:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273371994">said</a>:</p>
<blockquote>
<p>It's a little weird, because that really <em>should</em> mean <code>for&lt;'a where 'a is WF&gt;</code> (meaning that the <code>'a</code> you pick results in everything to be WF)</p>
</blockquote>
<p>and likely because of this</p>



<a name="273372922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/273372922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#273372922">(Feb 27 2022 at 00:50)</a>:</h4>
<p>I have some rambling <a href="#narrow/stream/144729-wg-traits/topic/Considering.20a.20GATified.20Iterator/near/272134734">here</a> where I've tried to think about this a bit. Thoughts would definitely be appreciated if you have any :)</p>



<a name="274100689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/274100689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#274100689">(Mar 04 2022 at 09:17)</a>:</h4>
<p>rustdoc PR for GAT has been merged 🥳</p>



<a name="274274698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/274274698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Drobnak <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#274274698">(Mar 06 2022 at 00:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/122651-general/topic/When.20oh.20when.20are.20GATs/near/273371372">said</a>:</p>
<blockquote>
<p>Please note: I still would love to see concrete/different use cases for GATs. Particularly, I'd love to see things like "I wanted to do this weird thing and it worked" and "I wanted to do this weird thing and it didn't work" and "This was a very simple thing, but it didn't work"</p>
</blockquote>
<p>I had a idea for implementing my dependency injection library (<a href="https://github.com/AzureMarker/shaku">shaku</a>) which was blocked on GATs, and would primarily use types instead of lifetimes. However, it's been so long since I thought about it that I forget the details <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span>.</p>



<a name="274296581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/274296581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> marmeladema <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#274296581">(Mar 06 2022 at 09:50)</a>:</h4>
<p>The where clause location change PR has been merged 🥳<br>
It was the last GAT blocking  issue right?</p>



<a name="274308425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/When%20oh%20when%20are%20GATs/near/274308425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/When.20oh.20when.20are.20GATs.html#274308425">(Mar 06 2022 at 14:23)</a>:</h4>
<p>Correct. Just need to triage remaining untriaged issues, do a bit of std API design, and write stabilization report</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
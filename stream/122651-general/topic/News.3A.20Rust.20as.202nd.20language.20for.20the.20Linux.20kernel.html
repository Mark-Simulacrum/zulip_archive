<html>
<head><meta charset="utf-8"><title>News: Rust as 2nd language for the Linux kernel · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html">News: Rust as 2nd language for the Linux kernel</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264689329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264689329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264689329">(Dec 13 2021 at 10:53)</a>:</h4>
<blockquote>
<p>Distros are the ones providing the toolchain</p>
</blockquote>
<p>I'm confused - where in the build process are you introducing RUSTC_BOOTSTRAP? If the distro has to provide it, that's fine, my objection is to the kernel taking a toolchain the distro <em>thinks</em> is stable and making it unstable.</p>



<a name="264689882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264689882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264689882">(Dec 13 2021 at 10:58)</a>:</h4>
<p>It's done in a <code>Makefile</code>, but presumably nothing would prevent adding a <code>CONFIG_THIS_RUST_IS_1_57_PINKY_PROMISE</code> that needs to be set in order to enable the code. But keep in mind that building the kernel with a too-new GCC can fail just as well.</p>



<a name="264733591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264733591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264733591">(Dec 13 2021 at 16:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264688166">said</a>:</p>
<blockquote>
<p>Nightlies don't get crater runs and they don't get targeted backports.</p>
</blockquote>
<p>And a stable version could get a backport that breaks unstable functionality. <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="264746513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264746513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264746513">(Dec 13 2021 at 18:04)</a>:</h4>
<p>We use <code>RUSTC_BOOTSTRAP</code> mainly for a modified version of <code>alloc</code>, plus a custom smart pointer. I think all features we use in rust-for-linux are used in the std. Thus I am not worried about a broken unstable functionality.</p>



<a name="264763450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264763450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264763450">(Dec 13 2021 at 20:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="382653">ojeda</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264677908">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264253840">said</a>:</p>
<blockquote>
<p>That's understandable! However, you're asking that tool to learn new tricks, so <em>someone</em> has to do the work. Until that happens, nightly is the right way to use experimental stuff.</p>
</blockquote>
<p>No, it is not "the right way", sorry. A stable release is better for our purposes than any given nightly.</p>
</blockquote>
<p>I feel like what might be some of the confusion is that stable with bootstrap on shouldn't really be considered "stable", it's more like a weird nightly in some ways.</p>



<a name="264764205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764205">(Dec 13 2021 at 20:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="273789">Benjamin Brittain</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264763450">said</a>:</p>
<blockquote>
<p>I feel like what might be some of the confusion is that stable with bootstrap on shouldn't really be considered "stable", it's more like a weird nightly in some ways.</p>
</blockquote>
<p>That might be because "stable" can mean two things:</p>
<ul>
<li>the APIs and interfaces will never change</li>
<li>it won't eat your cat</li>
</ul>
<p>For Rust-in-Linux the former is less important than in most Rust crates.</p>



<a name="264764388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764388">(Dec 13 2021 at 20:20)</a>:</h4>
<p>What's to say the unstable features aren't broken in some weird edge case on a stable release?</p>



<a name="264764419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764419">(Dec 13 2021 at 20:20)</a>:</h4>
<p>There is no guarantees it won't eat your cat though either. In some ways it could be more likely since it's actually a much less tested configuration</p>



<a name="264764458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764458">(Dec 13 2021 at 20:21)</a>:</h4>
<p>It's not much less tested than a nightly</p>



<a name="264764505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764505">(Dec 13 2021 at 20:21)</a>:</h4>
<p>add building linux to crater?</p>



<a name="264764541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764541">(Dec 13 2021 at 20:21)</a>:</h4>
<p>It's only used by one thing, <code>rustc</code>. So, yeah it is a lot less tested in practice.</p>



<a name="264764583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764583">(Dec 13 2021 at 20:21)</a>:</h4>
<p>lemme see if I can find the errors Mozilla ran into when they used to do this too</p>



<a name="264764672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764672">(Dec 13 2021 at 20:22)</a>:</h4>
<p><code>RUSTC_BOOTSTRAP</code> is used for the nightly. But the stable compiler itself is very well tested.</p>



<a name="264764678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764678">(Dec 13 2021 at 20:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="273789">Benjamin Brittain</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264764541">said</a>:</p>
<blockquote>
<p>It's only used by one thing, <code>rustc</code>. So, yeah it is a lot less tested in practice.</p>
</blockquote>
<p>Well, it's <em>supposed</em> to be only used by <code>rustc</code>.</p>



<a name="264764892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764892">(Dec 13 2021 at 20:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264764672">said</a>:</p>
<blockquote>
<p><code>RUSTC_BOOTSTRAP</code> is used for the nightly. But the stable compiler itself is very well tested.</p>
</blockquote>
<p>The compile behaving as expected is indeed tested, the features being tested as independent features less so.</p>



<a name="264764984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264764984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264764984">(Dec 13 2021 at 20:24)</a>:</h4>
<p>but as long as this is communicated and understood, yolo I guess</p>



<a name="264765027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264765027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264765027">(Dec 13 2021 at 20:24)</a>:</h4>
<p>It is indeed unlikely to bite Linux, it just seems like an odd choice</p>



<a name="264765143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264765143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264765143">(Dec 13 2021 at 20:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="273789">Benjamin Brittain</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264764892">said</a>:</p>
<blockquote>
<p>The compile behaving as expected is indeed tested, the features being tested as independent features less so.</p>
</blockquote>
<p>Sure, but overall that's not worse than using a nightly compiler.</p>



<a name="264765294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264765294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264765294">(Dec 13 2021 at 20:26)</a>:</h4>
<p><em>yes it is</em>. nightly is tested with those features enabled, stable is not tested with those features enabled</p>



<a name="264765503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264765503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264765503">(Dec 13 2021 at 20:28)</a>:</h4>
<p>Stable <em>was</em> tested with those features enabled when it was a nightly.</p>



<a name="264765511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264765511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264765511">(Dec 13 2021 at 20:28)</a>:</h4>
<p>Nightlys get considerable use from the community, with and without features being enabled. I'd find it likely that any arbitrary nightly  has a better chance of having issues with features being discovered and fixed, than beta or stable.</p>



<a name="264765639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264765639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264765639">(Dec 13 2021 at 20:29)</a>:</h4>
<p>Nightlies are used, but one specific nightly isn't. If I pick a random one from the last two months, there's almost zero chance it has a significant amount of users</p>



<a name="264765947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264765947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264765947">(Dec 13 2021 at 20:31)</a>:</h4>
<p>And I've used nightly for a long time. Specific versions might be fine, but I wouldn't say "nightly is well-tested, don't worry, it's fine to use it in the kernel".</p>



<a name="264766054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264766054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264766054">(Dec 13 2021 at 20:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264765503">said</a>:</p>
<blockquote>
<p>Stable <em>was</em> tested with those features enabled when it was a nightly.</p>
</blockquote>
<p>There is some distance between a stable and nightly. All the beta-backports.</p>



<a name="264766075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264766075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264766075">(Dec 13 2021 at 20:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264765503">said</a>:</p>
<blockquote>
<p>Stable <em>was</em> tested with those features enabled when it was a nightly.</p>
</blockquote>
<p>sorta, but also not because regressions are the most likely thing to be backported during the release train and they are most likely to fix things that interact with features</p>



<a name="264766140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264766140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264766140">(Dec 13 2021 at 20:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264766054">said</a>:</p>
<blockquote>
<p>There is some distance between a stable and nightly. All the beta-backports.</p>
</blockquote>
<p>Of course, but a pinned nightly won't get any backports either. Stable should be (ahem) strictly more stable.</p>



<a name="264766174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264766174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264766174">(Dec 13 2021 at 20:33)</a>:</h4>
<p>but stable != stable + <em>unstable features</em></p>



<a name="264766371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264766371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264766371">(Dec 13 2021 at 20:35)</a>:</h4>
<p>It seems unlikely that a nightly-only feature gets broken by a beta-backport. It's more likely to encounter problems in a random nightly. And, as mentioned before, there are other advantages to using stable, like easier packaging.</p>



<a name="264766791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264766791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264766791">(Dec 13 2021 at 20:39)</a>:</h4>
<p>And the packagers will know what they're doing. It's not a random crate off GitHub setting RUSTC_BOOTSTRAP in a build script</p>



<a name="264766991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264766991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264766991">(Dec 13 2021 at 20:41)</a>:</h4>
<p>I doubt that stable would recieve too many backports for regressions of unstable features (unless they were unstable features used by the stdlib and actually affected it).</p>



<a name="264767298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264767298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264767298">(Dec 13 2021 at 20:43)</a>:</h4>
<p>If that happens, the kernel and/or distro maintainers can upgrade to a newer compiler. Same as if it was using nightly.</p>



<a name="264767630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264767630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264767630">(Dec 13 2021 at 20:46)</a>:</h4>
<p>you mean upgrade to a... nightly? or a stable with custom patches? where on the release train are you imagining this being?</p>



<a name="264767708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264767708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264767708">(Dec 13 2021 at 20:47)</a>:</h4>
<p>to clarify, I do think this is <em>very unlikely</em></p>



<a name="264767784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264767784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264767784">(Dec 13 2021 at 20:47)</a>:</h4>
<p>but worth calling out the reasoning clearly somewhere with making it very clear this is an unsupported configuration</p>



<a name="264767969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264767969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264767969">(Dec 13 2021 at 20:49)</a>:</h4>
<p>Upgrade to whichever version works for upstream and/or distros, just as if it was using nightly from the start. And yeah, not only it's unlikely to happen, but:</p>
<ul>
<li>this will only matter in a couple of years</li>
<li>some unstable features will be stabilized by then</li>
<li>I doubt that the kernel will start  requiring new unstable features on a regular basis</li>
<li>some of the ones that are currently used can already be removed (if, say, rustc drops them)</li>
</ul>



<a name="264767984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264767984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264767984">(Dec 13 2021 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="273789">Benjamin Brittain</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264767784">said</a>:</p>
<blockquote>
<p>but worth calling out the reasoning clearly somewhere with making it very clear this is an unsupported configuration</p>
</blockquote>
<p>nightlies are unsupported too</p>



<a name="264768078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264768078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Brittain <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264768078">(Dec 13 2021 at 20:50)</a>:</h4>
<p>nightlies get built in the test infrastructure/crater, so they are supported to some degree</p>



<a name="264779661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264779661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264779661">(Dec 13 2021 at 22:24)</a>:</h4>
<p>It seems, based on this thread, like there might be an issue more of terminology than of approach. It's certainly true that stable is not any more likely to have stable nightly features than nightly is, and possibly even <em>less</em>. But we do often suggest to people who are using nightly features that they pin a nightly version. And if you're going to pin a nightly version, "same as the last stable" seems like as good an approach as any.</p>
<p>It seems like the <em>primary</em> point in dispute in this thread is that the Linux kernel may be presenting "stable using nightly features" as though it is in any way <em>more</em> stable regarding those features than nightly is. I don't have the impression that there'd be as much of a concern if it were made abundantly clear that this is still no more stable than nightly is.</p>



<a name="264885216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264885216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264885216">(Dec 14 2021 at 16:36)</a>:</h4>
<p>See also: <a href="#narrow/stream/122651-general/topic/versioned.20.2F.20pinned.20nightly/near/264145560">https://rust-lang.zulipchat.com/#narrow/stream/122651-general/topic/versioned.20.2F.20pinned.20nightly/near/264145560</a></p>
<p><span class="user-mention silent" data-user-id="232018">Daniel Henry-Mantilla</span> <a href="#narrow/stream/122651-general/topic/versioned.20.2F.20pinned.20nightly/near/264145560">said</a>:</p>
<blockquote>
<h3>How to achieve a versioned <code>nightly</code> as of today</h3>
<p>The only way, AFAIK, is to use a versioned <code>stable</code> approach, and then use <code>RUSTC_BOOTSTRAP=1</code> to imbue it with nightly / experimental capabilities. Again, seeing this as "stable" is a misnomer:</p>
<ul>
<li><code>rust-toolchain</code></li>
</ul>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="mf">1.57.0</span>
</code></pre></div>
<ul>
<li><code>.cargo/config</code></li>
</ul>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[env]</span>
<span class="n">RUSTC_BOOTSTRAP</span> <span class="o">=</span> <span class="s">"1"</span>
</code></pre></div>
<p>so as to achieve the semantics of:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">[</span><span class="n">rust</span><span class="o">-</span><span class="n">toolchain</span><span class="p">]</span><span class="w"></span>
<span class="n">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"nightly-1.57.0"</span><span class="w"></span>
</code></pre></div>
<p>And now: if <code>RUSTC_BOOTSTRAP</code> is so frowned upon, shouldn't there then be a proper alternative / way to achieve <code>nightly</code> versioning?</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/122651-general/topic/versioned.20.2F.20pinned.20nightly/near/264161767">said</a>:</p>
<blockquote>
<p>This is <span class="user-mention silent" data-user-id="119009">eddyb</span>'s suggestion of having two compilers built from the same commit (one stable and one allowing unstable features) and letting distros choose which they want to package.</p>
</blockquote>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Can you force cargo to have flatter output? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html">Can you force cargo to have flatter output?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249194425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249194425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249194425">(Aug 12 2021 at 03:34)</a>:</h4>
<p>Is there any way to make cargo skip all the sub-folders stuff in the target directory? I'd like the final output binary to just be at <code>target/name</code>, without a target folder or debug/release folder in the path.</p>



<a name="249194904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249194904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249194904">(Aug 12 2021 at 03:46)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span> no, but you can use --message-format json to have it tell you where it puts the binary</p>



<a name="249195531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249195531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249195531">(Aug 12 2021 at 04:00)</a>:</h4>
<p>well i do know where the bin is going, I'd just prefer it go some place shorter to type</p>



<a name="249246565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249246565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249246565">(Aug 12 2021 at 15:02)</a>:</h4>
<p>You could add a symlink in target/ maybe</p>



<a name="249246597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249246597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249246597">(Aug 12 2021 at 15:02)</a>:</h4>
<p>It will get deleted if you run cargo clean but it's better than nothing <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="249247358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249247358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249247358">(Aug 12 2021 at 15:08)</a>:</h4>
<p>To avoid it being deleted you could use a fake target-dir (<code>target/</code>) and a true one nested within it (<code>target/artifacts</code>):</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>target/
+- artifacts/ # &lt;- `target-dir`
    +- debug/
    +- release/ # &lt;--------+
+- ./binary # --symlinked--+
</code></pre></div>



<a name="249247521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249247521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249247521">(Aug 12 2021 at 15:09)</a>:</h4>
<p>But note that symlinks don't work for some stuff, such as <code>node.js</code> native modules; a hard link is required for that which is not robust to <code>cargo</code> rebuilds (not even incremental ones!). It would be nice if incremental builds attempted to overwrite the contents of the previous binary.</p>



<a name="249253281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249253281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249253281">(Aug 12 2021 at 15:53)</a>:</h4>
<blockquote>
<p>It would be nice if incremental builds attempted to overwrite the contents of the previous binary.</p>
</blockquote>
<p>This is deliberately not done at least for rlibs and rmeta files to ensure that another rustc can never read it while it is still being written. I wouldn't be surprised if linkers don't overwrite the contents either for about the same reason.</p>



<a name="249258226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20you%20force%20cargo%20to%20have%20flatter%20output%3F/near/249258226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20you.20force.20cargo.20to.20have.20flatter.20output.3F.html#249258226">(Aug 12 2021 at 16:33)</a>:</h4>
<p>Makes sense, thanks</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>backtrace  / track_caller when in stable ? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html">backtrace  / track_caller when in stable ?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="197003681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197003681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197003681">(May 09 2020 at 17:56)</a>:</h4>
<p>I believe 'backtrace' and 'track_caller' are currently nightly only but not in stable. Is there a timeline for when these features will be moved in to stable? (I have a code base that sometimes run into linking problems w/ nightly + incremental compile, but I also want to use these two features on.)</p>



<a name="197003841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197003841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197003841">(May 09 2020 at 18:00)</a>:</h4>
<p>if you are having trouble with nightly now you'll see that trouble on stable in 6-12 weeks unless someone fixes it on nightly in the mean time.</p>



<a name="197003843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197003843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197003843">(May 09 2020 at 18:00)</a>:</h4>
<p>so, please report these bugs :)</p>



<a name="197003856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197003856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197003856">(May 09 2020 at 18:01)</a>:</h4>
<p>I can't help with your actual question though, sorry. Maybe try finding the tracking issues to see what the outstanding concerns are?</p>



<a name="197003874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197003874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197003874">(May 09 2020 at 18:01)</a>:</h4>
<p>they should be <a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AC-tracking-issue" title="https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AC-tracking-issue">in this list</a></p>



<a name="197003947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197003947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197003947">(May 09 2020 at 18:02)</a>:</h4>
<p>I'm doing something like tdd in Rust, running a recompile + unit test ever 5-10 minutes. The 'bug' I run into is that on my 20-30k loc project, with incremental compile enabled, every few hours, rustc runs into a linking error. The only way to fix this linking error is a 'cargo clean', after which it rebuilds fine. The source code is not open source. I have no idea how to even begin filing a bug for this.</p>



<a name="197004022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004022">(May 09 2020 at 18:04)</a>:</h4>
<p>I've also had the occasional linking error with <code>cargo watch test</code>, but a <code>cargo clean</code> has always solved it.</p>



<a name="197004028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004028">(May 09 2020 at 18:04)</a>:</h4>
<p>This bug is non-deterministic, no idea how to reproduce, depends on some hidden state (cached compile units in target/debug) that may be GB's in size. I've been using nightly I think from he start, but this issue has pushed me to stable.</p>



<a name="197004042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004042">(May 09 2020 at 18:05)</a>:</h4>
<p>Are you on recent nightly?</p>



<a name="197004046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004046">(May 09 2020 at 18:05)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span> : Yeah, IntelliJ/Code are probably calling 'cargo test' behind the scenes. So I guess we've made the progress of narrowed it from 'cargo build' to 'cargo test' :-)</p>



<a name="197004048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004048">(May 09 2020 at 18:05)</a>:</h4>
<p>I seem to recall a similar bug being fixed by <span class="user-mention" data-user-id="116083">@pnkfelix</span> not too long ago...</p>



<a name="197004095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004095">(May 09 2020 at 18:06)</a>:</h4>
<p>I am on <code>rustc 1.44.0-nightly (7f3df5772 2020-04-16)</code></p>



<a name="197004112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004112">(May 09 2020 at 18:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> : It's currently uninstalled, but I think I did a "rustup toolchain install nightly" within the past few days (and got a link error after that in vs code)</p>



<a name="197004117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004117">(May 09 2020 at 18:07)</a>:</h4>
<p>hm okay</p>



<a name="197004145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004145">(May 09 2020 at 18:07)</a>:</h4>
<p>it's almost certainly an incremental bug -- one thing that may work is if you can catch it and the codebase is public you can create a zip / tarball of the project state as a whole (including target directory) and then post that in an issue</p>



<a name="197004195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004195">(May 09 2020 at 18:08)</a>:</h4>
<p>(this is pure speculation); I think one way to cause it involves trait names that overlap so if trait Foo1T nas a fn foo, and trait Foo2T has a fn foo, then there are situations where ...</p>



<a name="197004221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004221">(May 09 2020 at 18:09)</a>:</h4>
<p>(and some object impls both Foo1T and Foo2T)</p>



<a name="197004350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004350">(May 09 2020 at 18:10)</a>:</h4>
<p>I agree it's almost certainly an incremental issue. 'cargo clean' and/or rm target/debug has always fixed it</p>



<a name="197004471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004471">(May 09 2020 at 18:12)</a>:</h4>
<p>codebase is definitely not public; if I can manage to trigger the linking error again, would it be helpful to the compiler team ?</p>



<a name="197004495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004495">(May 09 2020 at 18:13)</a>:</h4>
<p>without having the code and a snapshot of the target directory probably no</p>



<a name="197004504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004504">(May 09 2020 at 18:13)</a>:</h4>
<p>unfortunately linker errors as a result of incremental without a reproduction that is reliable are pretty much impossible to fix I think</p>



<a name="197004601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zeroexcuses <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004601">(May 09 2020 at 18:14)</a>:</h4>
<p>good to know; also, is there some other linker that can be used for faster linking (during dev time)? for whatever reason, linking seems to take quite a bit of time these days</p>



<a name="197004775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004775">(May 09 2020 at 18:16)</a>:</h4>
<p>lld is the common recommendation</p>



<a name="197004777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/backtrace%20%20/%20track_caller%20when%20in%20stable%20%3F/near/197004777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F.html#197004777">(May 09 2020 at 18:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="299970">zeroexcuses</span> <a href="#narrow/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F/near/197004601" title="#narrow/stream/122651-general/topic/backtrace.20.20.2F.20track_caller.20when.20in.20stable.20.3F/near/197004601">said</a>:</p>
<blockquote>
<p>good to know; also, is there some other linker that can be used for faster linking (during dev time)? for whatever reason, linking seems to take quite a bit of time these days</p>
</blockquote>
<p>you might be interested in <a href="https://github.com/rust-lang/rust/issues/71515" title="https://github.com/rust-lang/rust/issues/71515">https://github.com/rust-lang/rust/issues/71515</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
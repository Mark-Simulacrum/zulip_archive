<html>
<head><meta charset="utf-8"><title>no_std · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/no_std.html">no_std</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270834891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/no_std/near/270834891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Salmon <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/no_std.html#270834891">(Feb 05 2022 at 16:10)</a>:</h4>
<p>im not really sure were to ask so im putting it in general.<br>
When i put</p>
<div class="codehilite"><pre><span></span><code>#![cfg_attr(not(test), no_std)]
</code></pre></div>
<p>at the top of my <a href="http://lib.rs">lib.rs</a> then only the </p>
<div class="codehilite"><pre><span></span><code>#[cfg(test)]
mod tests {
</code></pre></div>
<p>section can use std. and all seems fine, developing on my system that does have std. i have also added some deps<br>
but once i tried to use this lib on a project that cross compiles to a target without std i got a load of errors as it seems some of my deps do need std. is there a way to test that the whole lib inc deps can function without std before targeting a non std target?</p>



<a name="270835483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/no_std/near/270835483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/no_std.html#270835483">(Feb 05 2022 at 16:22)</a>:</h4>
<p>You could try compiling with with <code>-Zbuild-std=core,alloc</code> (requires nightly)</p>



<a name="270840840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/no_std/near/270840840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/no_std.html#270840840">(Feb 05 2022 at 18:08)</a>:</h4>
<p>Or try <code>cargo check</code> for a target that doesn't have <code>std</code> at all, like one of the thumbs. You probably won't even need cross tools if you don't have any *-sys dependencies.</p>



<a name="270840866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/no_std/near/270840866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/no_std.html#270840866">(Feb 05 2022 at 18:09)</a>:</h4>
<p>I guess that's not "before targeting a non std target" but it's really the best way to be sure.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
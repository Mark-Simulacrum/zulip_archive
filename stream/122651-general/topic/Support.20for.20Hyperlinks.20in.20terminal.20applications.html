<html>
<head><meta charset="utf-8"><title>Support for Hyperlinks in terminal applications · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html">Support for Hyperlinks in terminal applications</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259402398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259402398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francisco Tufro <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259402398">(Oct 28 2021 at 15:03)</a>:</h4>
<p>Hi, I'd like to know if this makes sense or not, but it's my understanding that console applications can add some escape characters to hint terminals that something can be clicked on as a hyperlink. In Ubuntu at least, this uses xdg-open to use the default application for a given file via mime-types.</p>
<p>I use this a lot to open files right from the error messages in other compilers.</p>
<p>It'd be rad if Rust compiler used these escape characters, I'd be happy to contribute this but would need some guidance to figure out different places where stdout gets a filename printed. How should I proceed? Thanks!</p>
<p>Here is a short article about this feature in gnome terminal: <a href="https://purpleidea.com/blog/2018/06/29/hyperlinks-in-gnome-terminal/">https://purpleidea.com/blog/2018/06/29/hyperlinks-in-gnome-terminal/</a></p>



<a name="259409578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259409578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259409578">(Oct 28 2021 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="453125">@Francisco Tufro</span> almost all the diagnostics should go through the <code>Session</code> object, which I think delegates to some code in <code>rustc_errors</code>. I'd take a look around there :)</p>



<a name="259409652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259409652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259409652">(Oct 28 2021 at 15:53)</a>:</h4>
<p>What happens if the terminal doesn't support those hyperlinks?</p>



<a name="259409905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259409905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259409905">(Oct 28 2021 at 15:55)</a>:</h4>
<p>I think this is a feature of the shell you're using. Example, I use <code>kitty</code> and it automatically makes all hyperlinks clickable and opens them with the default browser:<br>
<a href="https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks">https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks</a></p>



<a name="259409976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259409976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259409976">(Oct 28 2021 at 15:55)</a>:</h4>
<p>not sure how <del>rustdoc</del> (the output of rustc) itself can (or should) handle this feature</p>



<a name="259410126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259410126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259410126">(Oct 28 2021 at 15:56)</a>:</h4>
<p>If the terminal doesn't support them it should ignore them. There are a couple of buggy terminals that don't, but I don't think they're very common.</p>



<a name="259410154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259410154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259410154">(Oct 28 2021 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="250987">@apiraino</span> this isn't about rustdoc, it's for diagnostics</p>



<a name="259410212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259410212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259410212">(Oct 28 2021 at 15:57)</a>:</h4>
<p>I think hyperlinking things like error codes would be great.</p>



<a name="259410215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259410215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259410215">(Oct 28 2021 at 15:57)</a>:</h4>
<p>(yes, sorry fixed!)</p>



<a name="259410219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259410219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259410219">(Oct 28 2021 at 15:57)</a>:</h4>
<p>Also the hyperlink support you're talking about looks different, that uses heuristics iiuc</p>



<a name="259411505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259411505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259411505">(Oct 28 2021 at 16:05)</a>:</h4>
<p>/me wonders if the escape control characters would break machine parsing of the output</p>



<a name="259411909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259411909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francisco Tufro <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259411909">(Oct 28 2021 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="250987">apiraino</span> <a href="#narrow/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications/near/259409905">said</a>:</p>
<blockquote>
<p>I think this is a feature of the shell you're using. Example, I use <code>kitty</code> and it automatically makes all hyperlinks clickable and opens them with the default browser:<br>
<a href="https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks">https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks</a></p>
</blockquote>
<p>Yes and no. It's the terminal emulator, not the shell that must supports it, and usually, HTTP URLS are automatically parsed, but not files.</p>
<p>For example, using kitty, if you run <code>ls</code> you'll get a regular listing, but if you use <code>ls --hyperlink</code> you can now click on files to open them with the default application for the mime-type. That's a feature of <code>ls</code> relying on the terminal emulator support for hyperlinks, not a kitty-specific feature.</p>



<a name="259411988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259411988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francisco Tufro <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259411988">(Oct 28 2021 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications/near/259409578">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="453125">Francisco Tufro</span> almost all the diagnostics should go through the <code>Session</code> object, which I think delegates to some code in <code>rustc_errors</code>. I'd take a look around there :)</p>
</blockquote>
<p>Thanks! I´ll take a look!</p>



<a name="259412015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259412015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259412015">(Oct 28 2021 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="250987">@apiraino</span> machine parsing should be using JSON, not the human readable format</p>



<a name="259412334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259412334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259412334">(Oct 28 2021 at 16:11)</a>:</h4>
<p>oh right. Actually I chose the wrong wording: I was thinking to<code>grep</code>'ping stdout/stderr when bisecting an ICEs by reading the raw output (for example)</p>



<a name="259413386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259413386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259413386">(Oct 28 2021 at 16:18)</a>:</h4>
<p>That should still be using JSON though IMO</p>



<a name="259413409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259413409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259413409">(Oct 28 2021 at 16:18)</a>:</h4>
<p>jq makes json parsing not too hard</p>



<a name="259413454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259413454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259413454">(Oct 28 2021 at 16:19)</a>:</h4>
<p>And this wouldn't be substantially different from color control characters, which you'd already have to handle</p>



<a name="259413470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259413470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259413470">(Oct 28 2021 at 16:19)</a>:</h4>
<p>Doing it in shell with no extra deps makes parsing json annoying.</p>



<a name="259420535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259420535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259420535">(Oct 28 2021 at 17:04)</a>:</h4>
<p><code>rustc ... | grep</code> should be fine as long as any escape codes are conditional on <code>isatty</code> or similar</p>



<a name="259420544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Support%20for%20Hyperlinks%20in%20terminal%20applications/near/259420544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications.html#259420544">(Oct 28 2021 at 17:04)</a>:</h4>
<p>like we do for color codes</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
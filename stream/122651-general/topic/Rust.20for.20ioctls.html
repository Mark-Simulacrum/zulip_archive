<html>
<head><meta charset="utf-8"><title>Rust for ioctls · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rust.20for.20ioctls.html">Rust for ioctls</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="275841958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rust%20for%20ioctls/near/275841958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Larry Dewey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rust.20for.20ioctls.html#275841958">(Mar 18 2022 at 18:09)</a>:</h4>
<p>Hi everyone, I am currently working on porting over some C code which communicates with some hardware via ioctls. I am using the <code>nix</code> crate, and I <em>believe</em> I am utilizing it correctly, but I am getting an EFAULT (Invalid Address). Not that it is super relevant, but I am experiencing the same behavior within Python. I am printing out the integer generated by <code>_IOWR</code>, and it matches that same values (decimal and hex) generated by the C code, so I am at a bit of a loss. I have all of the structures as <code>[repr(C, packed)]</code> to make sure they match what C is doing, and the size looks the same as the C code, as well. Does anyone have experience with this crate, or working with ioctls, who might have some ideas of what I might be missing here? </p>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=e6dc85feb0e91bab9780e047d73d9376">Current Code Example</a></p>



<a name="275848875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rust%20for%20ioctls/near/275848875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rust.20for.20ioctls.html#275848875">(Mar 18 2022 at 19:06)</a>:</h4>
<p>I don't have much experience, but it looks like you're working with SEV, does the sev crate do what you need? <a href="https://crates.io/crates/sev">https://crates.io/crates/sev</a></p>



<a name="275848995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rust%20for%20ioctls/near/275848995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rust.20for.20ioctls.html#275848995">(Mar 18 2022 at 19:07)</a>:</h4>
<p>also, note that the Zulip is mostly for development on Rust itself, and is not generally for questions about using Rust. :) you may want <a href="http://users.rust-lang.org">users.rust-lang.org</a> , or <a href="https://discord.gg/rust-lang">https://discord.gg/rust-lang</a></p>



<a name="275849682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rust%20for%20ioctls/near/275849682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rust.20for.20ioctls.html#275849682">(Mar 18 2022 at 19:12)</a>:</h4>
<p>My understanding was that the general stream is an okay place for questions about using Rust, and if it isn't it would make a lot of sense to me if we made a stream for users to ask questions at too.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
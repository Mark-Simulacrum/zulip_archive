<html>
<head><meta charset="utf-8"><title>macOS rustup issues · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html">macOS rustup issues</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="204619717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204619717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204619717">(Jul 22 2020 at 00:45)</a>:</h4>
<p>I'm trying to fix some linking/build issues with the toolchain on macOS, hope this is the right place. Issues in rustup are: SDK/version mismatches, library install names, and missing library version numbers</p>



<a name="204619773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204619773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204619773">(Jul 22 2020 at 00:46)</a>:</h4>
<p>apologies if this isn't the right place</p>



<a name="204619865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204619865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204619865">(Jul 22 2020 at 00:47)</a>:</h4>
<p>I really just need to know how to pass linker flags to all the dylibs that get created during bootstrap</p>



<a name="204622582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204622582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204622582">(Jul 22 2020 at 01:37)</a>:</h4>
<p><span class="user-mention" data-user-id="324021">@stevej</span> see some of the env vars I set here <a href="https://github.com/shepmaster/rust/blob/silicon/silicon/README.md">https://github.com/shepmaster/rust/blob/silicon/silicon/README.md</a></p>



<a name="204622637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204622637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204622637">(Jul 22 2020 at 01:38)</a>:</h4>
<p>Though you say rustup and bootstrap; I don’t know how those two are connected.</p>



<a name="204622646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204622646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204622646">(Jul 22 2020 at 01:39)</a>:</h4>
<p>If you need to pass linker flags, there’s a -C option to rustc</p>



<a name="204622791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204622791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204622791">(Jul 22 2020 at 01:42)</a>:</h4>
<p>the rustup distribution for x86/darwin has the same issues. I'm trying to fix them by building from source</p>



<a name="204623127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204623127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204623127">(Jul 22 2020 at 01:51)</a>:</h4>
<p>Rust understands the SDKROOT and MACOSX_DEPLOYMENT_TARGET environment variables</p>



<a name="204623189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204623189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204623189">(Jul 22 2020 at 01:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> that's not my issue, for one, the install_names are wrong on two dylibs, .i.e absolute rather than relative</p>



<a name="204662346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204662346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204662346">(Jul 22 2020 at 13:06)</a>:</h4>
<p>Failing that, should I be asking somewhere else?</p>



<a name="204662783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204662783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204662783">(Jul 22 2020 at 13:10)</a>:</h4>
<p>you can ask the rustup team which is on the discord server</p>



<a name="204663252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204663252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204663252">(Jul 22 2020 at 13:15)</a>:</h4>
<p><span class="user-mention" data-user-id="120823">@DPC</span> I've probably confused the issue by mentioning rustup, it was only to point out that the issue also occurs in the official distribution of the toolchain, i.e. it's not a mistake I've made when trying to build it myself</p>



<a name="204663457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204663457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204663457">(Jul 22 2020 at 13:17)</a>:</h4>
<p>I've been at this for a couple of days, just looking for help which I'm happy to contribute back as a patch for macOS/darwin.</p>



<a name="204666016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204666016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204666016">(Jul 22 2020 at 13:39)</a>:</h4>
<p>You haven't really explained the problem well, how to reproduce it, what your special environment might be, etc. There's not a lot for people to go on to help with, AFAICT.</p>



<a name="204667536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204667536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204667536">(Jul 22 2020 at 13:49)</a>:</h4>
<p>I find this to be a common occurrence when I've been heads-down in a problem for a while — everything is "obvious" to me. Unfortunately, it's not obvious to most anyone else.</p>



<a name="204668138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204668138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204668138">(Jul 22 2020 at 13:53)</a>:</h4>
<p>(we're discussing a bit in <a class="stream" data-stream-id="241545" href="/#narrow/stream/241545-t-release">#t-release</a> on this)</p>



<a name="204668397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/macOS%20rustup%20issues/near/204668397" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> stevej <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/macOS.20rustup.20issues.html#204668397">(Jul 22 2020 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span> the line <a href="#narrow/stream/122651-general/topic/macOS.20rustup.20issues/near/204619865">https://rust-lang.zulipchat.com/#narrow/stream/122651-general/topic/macOS.20rustup.20issues/near/204619865</a> is the "problem", I stated it early</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>heterogeneous PartialEq on Option · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/heterogeneous.20PartialEq.20on.20Option.html">heterogeneous PartialEq on Option</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265924195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/heterogeneous%20PartialEq%20on%20Option/near/265924195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/heterogeneous.20PartialEq.20on.20Option.html#265924195">(Dec 23 2021 at 15:02)</a>:</h4>
<p>Is there any specific reason why <code>PartialEq</code> on <code>Option</code> forces LHS and RHS to have the same type?<br>
This means one can compare <code>&amp;OsStr</code> to <code>&amp;str</code> but not <code>Option&lt;&amp;OsStr&gt;</code> to <code>Option&lt;&amp;str&gt;</code>.</p>



<a name="265924330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/heterogeneous%20PartialEq%20on%20Option/near/265924330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/heterogeneous.20PartialEq.20on.20Option.html#265924330">(Dec 23 2021 at 15:04)</a>:</h4>
<p>Probably the usual inference problem -- I suspect that the heterogeneous one would stop inferring <code>x &lt; Some(10)</code> reliably.</p>



<a name="265924408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/heterogeneous%20PartialEq%20on%20Option/near/265924408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/heterogeneous.20PartialEq.20on.20Option.html#265924408">(Dec 23 2021 at 15:05)</a>:</h4>
<p>(I hope we one day find a good system for hinting such things better)</p>



<a name="265926791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/heterogeneous%20PartialEq%20on%20Option/near/265926791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/heterogeneous.20PartialEq.20on.20Option.html#265926791">(Dec 23 2021 at 15:34)</a>:</h4>
<p>Especially when one side is <code>None</code></p>



<a name="266945467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/heterogeneous%20PartialEq%20on%20Option/near/266945467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/heterogeneous.20PartialEq.20on.20Option.html#266945467">(Jan 05 2022 at 15:01)</a>:</h4>
<p>LOL, this was one of <a href="https://stackoverflow.com/q/30429801/155423">my first problems with Rust</a>. I even <a href="https://stackoverflow.com/questions/30429801/whats-the-most-idiomatic-way-to-test-two-options-for-equality-when-they-contain#comment97116593_30429920">tried to change it</a>, and it was definitely the <code>None</code> case that broke the entire world.</p>



<a name="266961150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/heterogeneous%20PartialEq%20on%20Option/near/266961150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/heterogeneous.20PartialEq.20on.20Option.html#266961150">(Jan 05 2022 at 17:03)</a>:</h4>
<p>Ah, and commented on by <strong>Mara</strong> in <a href="https://github.com/rust-lang/rust/issues/20063">https://github.com/rust-lang/rust/issues/20063</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Hardware raytracing in rust ðŸŽ‰ Â· general Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hardware.20raytracing.20in.20rust.20.F0.9F.8E.89.html">Hardware raytracing in rust ðŸŽ‰</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269989809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hardware%20raytracing%20in%20rust%20%F0%9F%8E%89/near/269989809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hardware.20raytracing.20in.20rust.20.F0.9F.8E.89.html#269989809">(Jan 31 2022 at 07:36)</a>:</h4>
<p>Just wanted to briefly share something really cool that has been a long time coming, hardware raytracing on the GPU fully in rust. After successfully making rust on the GPU a reality, i wanted to attempt something that (from my knowledge) has not been done before, hardware raytracing on CUDA without using CUDA C++. After a lot of pain, a lot of segfaults, a lot of stack overflows, and a lot of reading internal inline assembly, i was able to successfully do hardware raytracing fully in rust (both the CPU and the GPU code). I ported my toy gpu path tracer to it as a proof of concept, and the path tracer can now do:</p>
<ul>
<li>CPU (multithreaded),</li>
<li>GPU,</li>
<li>GPU (hardware)<br>
Sharing the same exact core code for the path tracing logic.</li>
</ul>
<p><a href="/user_uploads/4715/_Crivh52RXyQ4nYSpARAi8ze/Screenshot_583.png">Screenshot_583.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/_Crivh52RXyQ4nYSpARAi8ze/Screenshot_583.png" title="Screenshot_583.png"><img src="/user_uploads/4715/_Crivh52RXyQ4nYSpARAi8ze/Screenshot_583.png"></a></div><p>The result is that:</p>
<ul>
<li>Rust is now the only other language capable of hardware raytracing using existing CUDA pipelines.</li>
<li>The Rust CPU code is ~250 lines shorter than an equivalent OptiX C SDK example. (200 vs 500 lines).</li>
<li>The Rust code is much safer than the equivalent C++ code because it ensures buffers are the correct length and stuff like that.</li>
</ul>
<p>You can find the <a href="https://github.com/Rust-GPU/Rust-CUDA/blob/master/examples/cuda/gpu/path_tracer_gpu/src/optix.rs">GPU Code here</a> and the <a href="https://github.com/Rust-GPU/Rust-CUDA/blob/master/examples/cuda/cpu/path_tracer/src/optix/mod.rs">CPU Code here</a>. Exciting times ahead for GPU computing in rust <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="270055774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hardware%20raytracing%20in%20rust%20%F0%9F%8E%89/near/270055774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Riccardo D&#x27;Ambrosio <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hardware.20raytracing.20in.20rust.20.F0.9F.8E.89.html#270055774">(Jan 31 2022 at 16:03)</a>:</h4>
<p>Also made a reddit post on it with a bit more info <a href="https://www.reddit.com/r/rust/comments/sh4l9f/media_followup_to_my_previous_path_tracing_in/">https://www.reddit.com/r/rust/comments/sh4l9f/media_followup_to_my_previous_path_tracing_in/</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
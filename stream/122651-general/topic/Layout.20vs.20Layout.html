<html>
<head><meta charset="utf-8"><title>Layout vs Layout · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html">Layout vs Layout</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="253436940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253436940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253436940">(Sep 15 2021 at 15:49)</a>:</h4>
<p>since the Type layout section includes <code>repr(transparent)</code> as a layout modifier, which changes the ABI</p>



<a name="253437212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437212">(Sep 15 2021 at 15:50)</a>:</h4>
<p>you probably want to check the layout definition in the UCGs which has had more eyes thrown an it</p>



<a name="253437362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437362">(Sep 15 2021 at 15:51)</a>:</h4>
<p>Except that it has been repeatedly cautioned that the reference is official while the UCGs are not (yet).</p>



<a name="253437445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437445">(Sep 15 2021 at 15:51)</a>:</h4>
<p>The only real reference we have is <code>rustc</code>, and in <code>rustc</code> layout includes call ABI</p>



<a name="253437652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437652">(Sep 15 2021 at 15:52)</a>:</h4>
<p>anyways, i don't have anything more to say about this</p>



<a name="253437685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437685">(Sep 15 2021 at 15:53)</a>:</h4>
<p>thank you for derailing the thread to discuss a completely irrelevant topic</p>



<a name="253437735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437735">(Sep 15 2021 at 15:53)</a>:</h4>
<p>but rustc is allowed to pull the rug under our feet for things that aren't guaranteed somewhere.</p>



<a name="253437922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437922">(Sep 15 2021 at 15:54)</a>:</h4>
<p>I do not consider it irrelevant because depending on what you mean by "layout being the same" the argument being made can be quite different. And I have shown at least two places where layout only means size + alignment.</p>



<a name="253437963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253437963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hannahE2 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253437963">(Sep 15 2021 at 15:54)</a>:</h4>
<p>I've moved the discussion to a different thread</p>



<a name="253440630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253440630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253440630">(Sep 15 2021 at 16:08)</a>:</h4>
<p>Note: the reference is also unofficial</p>



<a name="253440919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253440919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253440919">(Sep 15 2021 at 16:10)</a>:</h4>
<p>Huh. Indeed, the introduction says so:</p>
<blockquote>
<p>Finally, this book is not normative. It may include details that are specific to rustc itself, and should not be taken as a specification for the Rust language. We intend to produce such a book someday, and until then, the reference is the closest thing we have to one.</p>
</blockquote>
<p>I never noticed that before.</p>



<a name="253440986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253440986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253440986">(Sep 15 2021 at 16:10)</a>:</h4>
<p>otoh it claims to be the "closest thing" ;)</p>



<a name="253441482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Layout%20vs%20Layout/near/253441482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Layout.20vs.20Layout.html#253441482">(Sep 15 2021 at 16:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/122651-general/topic/Layout.20vs.20Layout/near/253440630">said</a>:</p>
<blockquote>
<p>Note: the reference is also unofficial</p>
</blockquote>
<p>Hopefully not for too much longer (or we get a replacement that is normative).</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>✔ Needing help with linker scripts · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20Needing.20help.20with.20linker.20scripts.html">✔ Needing help with linker scripts</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264168957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20Needing%20help%20with%20linker%20scripts/near/264168957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Teln0 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20Needing.20help.20with.20linker.20scripts.html#264168957">(Dec 08 2021 at 15:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/122651-general/topic/Needing.20help.20with.20linker.20scripts/near/264020984">said</a>:</p>
<blockquote>
<p>Different UEFI implementations may allocate at different locations. Whatever value you choose for <code>/FIXED</code> there may be a UEFI implementation for which it won't work. You should probably have a bootloader or the binary itself map the kernel in the higher half of the address space after exiting boot services. Before exiting boot services the page tables are managed by the uefi firmware.</p>
</blockquote>
<p>I think that's what I'm going to do. I made a new binary that I embed in my efi executable</p>



<a name="264168980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20Needing%20help%20with%20linker%20scripts/near/264168980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20Needing.20help.20with.20linker.20scripts.html#264168980">(Dec 08 2021 at 15:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="312985">Teln0</span> has marked this topic as resolved.</p>



<a name="264251769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/%E2%9C%94%20Needing%20help%20with%20linker%20scripts/near/264251769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/.E2.9C.94.20Needing.20help.20with.20linker.20scripts.html#264251769">(Dec 09 2021 at 03:16)</a>:</h4>
<p><span class="user-mention" data-user-id="312985">@Teln0</span> As an aside, you may already know this, but exiting boot services is <em>very complicated</em> and the guidance provided by the UEFI spec is not at all sufficient for practical issues in real firmware. (The Linux kernel has a lot of workarounds there.)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>impl fn with recoverable errors · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html">impl fn with recoverable errors</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273348103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273348103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guillermo Céspedes <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273348103">(Feb 26 2022 at 15:53)</a>:</h4>
<p>Hi guys, I am blocked, can you help me understand how I can solve the following?<br>
I need that function dump(T) could return Result&lt;T, E&gt; or Option&lt;T&gt; to set the error flag if it returns the default value.<br>
<a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=35100865b8c83f80d4e531316e75c1b0">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=35100865b8c83f80d4e531316e75c1b0</a><br>
Thanks for your help!!</p>



<a name="273348364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273348364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LegionMammal978 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273348364">(Feb 26 2022 at 15:59)</a>:</h4>
<p>Do you want <code>dump</code> to set <code>error_flag</code> to <code>true</code> if and only if <code>v</code> is equal to <code>V::default()</code>?</p>



<a name="273348598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273348598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LegionMammal978 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273348598">(Feb 26 2022 at 16:00)</a>:</h4>
<p>Or if and only if <code>v.into()</code> is equal to <code>R::default()</code>?</p>



<a name="273348795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273348795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guillermo Céspedes <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273348795">(Feb 26 2022 at 16:05)</a>:</h4>
<p><span class="user-mention" data-user-id="429617">@LegionMammal978</span> if and only if v.into() is equal to R::default()</p>



<a name="273349480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273349480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LegionMammal978 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273349480">(Feb 26 2022 at 16:20)</a>:</h4>
<p>So if you want to keep the generic <code>dump</code> function, then a solution with <code>TryFrom</code> would probably work: <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=dcd25dec6490fb64099676008c297c71">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=dcd25dec6490fb64099676008c297c71</a></p>



<a name="273349484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273349484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LegionMammal978 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273349484">(Feb 26 2022 at 16:20)</a>:</h4>
<p>If I were writing it, though, I'd just put the destructuring logic in the <code>match</code> statements: <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=aeb7697dc9c985ec396540f28e3b8269">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=aeb7697dc9c985ec396540f28e3b8269</a></p>



<a name="273349504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273349504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LegionMammal978 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273349504">(Feb 26 2022 at 16:21)</a>:</h4>
<p>Naively detecting <code>R::default()</code> would prevent <code>0</code> or <code>""</code> from being retrieved from the map at all.</p>



<a name="273349933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273349933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LegionMammal978 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273349933">(Feb 26 2022 at 16:30)</a>:</h4>
<p>It's also possible with a more functional style, if that's what you prefer (although it's not for everyone): <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=6788defa76f50e8c402377de1e17cfb4">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=6788defa76f50e8c402377de1e17cfb4</a></p>



<a name="273350497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/impl%20fn%20with%20recoverable%20errors/near/273350497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guillermo Céspedes <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/impl.20fn.20with.20recoverable.20errors.html#273350497">(Feb 26 2022 at 16:41)</a>:</h4>
<p><span class="user-mention" data-user-id="429617">@LegionMammal978</span> I will study the solutions you send me. I had not used TryFrom/TryInto before, your collaboration is very useful, I was trying to do it and I couldn't. Thank you for your time in explaining me!!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>News: Progress in Rust as 2nd language for the Linux kernel · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html">News: Progress in Rust as 2nd language for the Linux kernel</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264095611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264095611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Dean (he/him) <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264095611">(Dec 08 2021 at 00:29)</a>:</h4>
<p><a href="https://lkml.org/lkml/2021/12/6/461">https://lkml.org/lkml/2021/12/6/461</a></p>



<a name="264095617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264095617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Dean (he/him) <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264095617">(Dec 08 2021 at 00:30)</a>:</h4>
<p><a href="https://lkml.org/lkml/2021/12/6/461">https://lkml.org/lkml/2021/12/6/461</a></p>



<a name="264100692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264100692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264100692">(Dec 08 2021 at 01:44)</a>:</h4>
<blockquote>
<p>Stable compiler &amp; Rust Edition 2021<br>
Customizing <code>core</code> and <code>alloc</code></p>
</blockquote>
<p>These seem mutually exclusive? Is the kernel using RUSTC_BOOTSTRAP or something?</p>



<a name="264101206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264101206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264101206">(Dec 08 2021 at 01:52)</a>:</h4>
<blockquote>
<p>a few unstable features we were using</p>
</blockquote>
<p>I'm going to guess so</p>



<a name="264101519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264101519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264101519">(Dec 08 2021 at 01:58)</a>:</h4>
<p><span class="user-mention" data-user-id="382653">@ojeda</span> what's the point of moving to stable if you're going to use RUSTC_BOOTSTRAP for unstable features?</p>



<a name="264101999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264101999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264101999">(Dec 08 2021 at 02:05)</a>:</h4>
<p>Version pinning</p>



<a name="264102161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264102161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264102161">(Dec 08 2021 at 02:07)</a>:</h4>
<p>We couldn't pin to a nightly version because that's not available from distributions.</p>



<a name="264105772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264105772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264105772">(Dec 08 2021 at 03:03)</a>:</h4>
<p>... Can people please stop using RUSTC_BOOTSTRAP unless they're rustc stdlib?</p>



<a name="264107720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264107720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264107720">(Dec 08 2021 at 03:34)</a>:</h4>
<p>What's your suggested alternative?</p>



<a name="264107793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264107793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264107793">(Dec 08 2021 at 03:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264101999">said</a>:</p>
<blockquote>
<p>Version pinning</p>
</blockquote>
<p>+, stable is the best nightly</p>



<a name="264108076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264108076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264108076">(Dec 08 2021 at 03:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264107720">said</a>:</p>
<blockquote>
<p>What's your suggested alternative?</p>
</blockquote>
<p>Use nightly and work to stabilize the stuff you need.</p>



<a name="264108139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264108139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264108139">(Dec 08 2021 at 03:40)</a>:</h4>
<p>which means it's not feasible in distros until then, so be it</p>



<a name="264108171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264108171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264108171">(Dec 08 2021 at 03:41)</a>:</h4>
<p>I say this as the Fedora rustc maintainer -- I don't want kernel bug reports for unstable stuff</p>



<a name="264111457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111457">(Dec 08 2021 at 04:41)</a>:</h4>
<p>Well, Rust usage in kernel will be staging (unstable) as well</p>



<a name="264111528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111528">(Dec 08 2021 at 04:42)</a>:</h4>
<p>And you're basically suggesting that Rust shouldn't be used in the kernel unless everything we use is stable</p>



<a name="264111581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111581">(Dec 08 2021 at 04:43)</a>:</h4>
<p>Given that we currently need to tailor liballoc (and want to tailor libcore) there's no way to not use RUSTC_BOOTSTRAP for now and near future.</p>



<a name="264111639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111639">(Dec 08 2021 at 04:44)</a>:</h4>
<p>Or, use nightly.</p>



<a name="264111674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111674">(Dec 08 2021 at 04:45)</a>:</h4>
<p>rustc stable w/ RUSTC_BOOTSTRAP is not stable.</p>



<a name="264111675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111675">(Dec 08 2021 at 04:45)</a>:</h4>
<p>That's not an option unless you ask all distros to ship a specific nightly version</p>



<a name="264111730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111730">(Dec 08 2021 at 04:46)</a>:</h4>
<p>Using unstable features is not an option unless they ship a specific nightly version anyways.</p>



<a name="264111748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111748">(Dec 08 2021 at 04:46)</a>:</h4>
<p>Since those features can be changed, or cease to exist, on a whim.</p>



<a name="264111761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111761">(Dec 08 2021 at 04:47)</a>:</h4>
<p>Rust-for-linux isn't pretending to be stable.</p>



<a name="264111783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111783">(Dec 08 2021 at 04:47)</a>:</h4>
<p>Except, its relying on stable rustc.</p>



<a name="264111784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111784">(Dec 08 2021 at 04:47)</a>:</h4>
<p>Version of stable compilers at least is something that can be anchored to.</p>



<a name="264111840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264111840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264111840">(Dec 08 2021 at 04:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257758">Connor Horman</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264111730">said</a>:</p>
<blockquote>
<p>Using unstable features is not an option unless they ship a specific nightly version anyways.</p>
</blockquote>
<p>We do pin to a specific stable Rust version though.</p>



<a name="264123992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264123992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264123992">(Dec 08 2021 at 08:19)</a>:</h4>
<p>Are you assuming the distro rustc doesn't change its stable version? Because I also rebase Fedora all the time, and I can get away with that because stable features are compatible.</p>



<a name="264126837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264126837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264126837">(Dec 08 2021 at 08:53)</a>:</h4>
<p>wouldn't it be better for the kernel to use <code>rustup</code> so it can pin a specific toolchain?</p>



<a name="264126961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264126961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264126961">(Dec 08 2021 at 08:54)</a>:</h4>
<p>is there really a need for the compiler <em>itself</em> to come from a distro package?</p>



<a name="264141507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264141507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264141507">(Dec 08 2021 at 11:20)</a>:</h4>
<p>The kernel has to be buildable without internet AFAIK. Rustup requires internet access to get a toolchain.</p>



<a name="264143160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264143160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Saparelli <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264143160">(Dec 08 2021 at 11:38)</a>:</h4>
<p>One similarly "requires" internet access to obtain a C compiler, presumably? Specify eg <a href="https://static.rust-lang.org/dist/2021-12-06/rustc-nightly-x86_64-unknown-linux-gnu.tar.gz">https://static.rust-lang.org/dist/2021-12-06/rustc-nightly-x86_64-unknown-linux-gnu.tar.gz</a> directly to bypass rustup, I guess.</p>



<a name="264147489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264147489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264147489">(Dec 08 2021 at 12:29)</a>:</h4>
<p>A C compiler is already part of the distribution build tools. Also the -gnu variant of rustc only works on glibc based distros, the -musl variant on musl based distros that dynamically link musl and none work at distros that statically link musl or use a different libc. For distros like nixos or guix it would require patching the dynamic linker location in the downloaded rustc version.</p>



<a name="264151402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264151402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264151402">(Dec 08 2021 at 13:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264111457">said</a>:</p>
<blockquote>
<p>Well, Rust usage in kernel will be staging (unstable) as well</p>
</blockquote>
<p>That argument seems iffy since it apparently wants a greater level of stability than nightly provides? Working on inconsistent definitions of unstable.</p>



<a name="264247465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264247465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wedson Almeida Filho <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264247465">(Dec 09 2021 at 02:01)</a>:</h4>
<p>We're trying to convince the kernel community to allow Rust as a first-class language. Part of what we're doing is changing the build system to accept Rust and building a lot of Rust abstractions for kernel concepts currently only exposed with C interfaces. There is a lot of work involved here, as I'm sure you all realise.</p>
<p>At the moment, we don't have enough people/cycles to work on that <em>and</em> "work to stabilise the stuff we need" from Rust. Rust is a tool for us.</p>
<p>We would love suggestions from you on how to do things better. "You can't do this with distros because I'm a maintainer of a distro" is honestly not the sort of thing I was expecting/hoping to see <em>here</em>. I had been told the Rust community was very welcoming.</p>



<a name="264247834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264247834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264247834">(Dec 09 2021 at 02:07)</a>:</h4>
<p>the way to do things better is to keep using nightly for now :/ using a stable compiler with RUSTC_BOOTSTRAP is not using a stable compiler.</p>
<p>I'm sorry if this wasn't the reaction you expected, but the whole reason feature-gates exist is because crates have broken due to nightly updates in the past: <a href="https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802">https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802</a></p>



<a name="264253455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264253455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264253455">(Dec 09 2021 at 03:49)</a>:</h4>
<p>I'm sorry if I was too blunt about that, to the point of rudeness. At a high level, I really am excited about seeing Rust in the kernel! But as a maintainer, I'm trying to explain why I think pinning a stable version is not feasible.</p>



<a name="264253604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264253604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264253604">(Dec 09 2021 at 03:52)</a>:</h4>
<p>Even if I agreed for you to yolo <code>RUSTC_BOOTSTRAP</code>, I don't want to be stuck unable to update the distro compiler when (not if) an unstable feature breaks the kernel.</p>



<a name="264253840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264253840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264253840">(Dec 09 2021 at 03:57)</a>:</h4>
<blockquote>
<p>At the moment, we don't have enough people/cycles to work on that <em>and</em> "work to stabilise the stuff we need" from Rust. Rust is a tool for us.</p>
</blockquote>
<p>That's understandable! However, you're asking that tool to learn new tricks, so <em>someone</em> has to do the work. Until that happens, nightly is the right way to use experimental stuff.</p>



<a name="264677303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264677303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ojeda <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264677303">(Dec 13 2021 at 08:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264253604">said</a>:</p>
<blockquote>
<p>Even if I agreed for you to yolo <code>RUSTC_BOOTSTRAP</code>, I don't want to be stuck unable to update the distro compiler when (not if) an unstable feature breaks the kernel.</p>
</blockquote>
<p>You can always provide a different toolchain for building the kernel, if you really want to start providing Rust-enabled kernels soon (it is experimental).</p>



<a name="264677908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264677908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ojeda <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264677908">(Dec 13 2021 at 09:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264253840">said</a>:</p>
<blockquote>
<p>That's understandable! However, you're asking that tool to learn new tricks, so <em>someone</em> has to do the work. Until that happens, nightly is the right way to use experimental stuff.</p>
</blockquote>
<p>No, it is not "the right way", sorry. A stable release is better for our purposes than any given nightly.</p>



<a name="264678404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264678404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ojeda <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264678404">(Dec 13 2021 at 09:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264247834">said</a>:</p>
<blockquote>
<p>the way to do things better is to keep using nightly for now :/ using a stable compiler with RUSTC_BOOTSTRAP is not using a stable compiler.</p>
<p>I'm sorry if this wasn't the reaction you expected, but the whole reason feature-gates exist is because crates have broken due to nightly updates in the past: <a href="https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802">https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802</a></p>
</blockquote>
<p>We are aware we depend on unstable features, and that code may need to change in some cases -- this is fine for us. But that is orthogonal to using tagged releases. In any case, if you really think using nightlies would be better for us, then please, by all means, tell us why.</p>



<a name="264678636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264678636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264678636">(Dec 13 2021 at 09:09)</a>:</h4>
<p><span class="user-mention" data-user-id="382653">@ojeda</span> What is your plan for informing distros that the kernel uses pinned versions and can't use the system toolchain? What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel? It's usually Rust that gets the hate mail when that happens.</p>



<a name="264678798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264678798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ojeda <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264678798">(Dec 13 2021 at 09:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264678636">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="382653">ojeda</span> What is your plan for informing distros that the kernel uses pinned versions and can't use the system toolchain? What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel? It's usually Rust that gets the hate mail when that happens.</p>
</blockquote>
<p>How does using nightlies change any of that?</p>



<a name="264678885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264678885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264678885">(Dec 13 2021 at 09:11)</a>:</h4>
<p>Using nightlies means that distros already know you're not using a toolchain packaged by the distro.</p>
<p>(Or if the distro does package it, they're very aware this is a pinned version that can't be upgraded without breakage.)</p>



<a name="264679264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264679264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ojeda <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264679264">(Dec 13 2021 at 09:15)</a>:</h4>
<p>No, sorry, that is not how it works. Distros do not take "kernels" blindly from "somewhere". They configure and build them. They have to make a concious decision to whether they want to enable or not every feature, including Rust support.</p>



<a name="264679461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264679461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ojeda <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264679461">(Dec 13 2021 at 09:17)</a>:</h4>
<p>And, by the way, it is not true that "you're not using a toolchain packaged by the distro". Distros are the ones deciding which toolchain will be used. They provide it -- we have no say on that.</p>



<a name="264679467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264679467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264679467">(Dec 13 2021 at 09:17)</a>:</h4>
<p>Also, distros will build <code>rustc</code> themselves, and will probably not like to keep around a random nightly nightly only for the kernel parts. It's more likely that they have an older stable version around than some nightly.</p>



<a name="264679817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264679817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264679817">(Dec 13 2021 at 09:21)</a>:</h4>
<p>But in practice I don't expect to see Rust support enabled in distros sooner than two years or so, hopefully more of the required <code>rustc</code> features will be stabilized by then</p>



<a name="264683509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264683509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264683509">(Dec 13 2021 at 09:58)</a>:</h4>
<p>I'm not a distro maintainer but I've work with one of them and I'm pretty sure that he would not like to have a stable release around (that is hacked to be a nightly) for any software and more for kernel. The "best" way for you would in my opinion to simply have a <a href="https://rust-lang.github.io/rustup/overrides.html#the-toolchain-file">rust-toolchain</a> in the repo that specified a pinned nightly, this way you (kernel) don't have to hack <code>rustc</code>, distro maintainers would know exactly which version you want (they can provide it or leave it to rustup) and the Rust maintainers will sleep peacefully knowing that their compiler was not intentionally misused by one of the biggest projects on the planet.</p>



<a name="264684051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264684051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264684051">(Dec 13 2021 at 10:03)</a>:</h4>
<p>Yeah, but distro maintainers will not package every nightly, while they're reasonably likely to package the stable releases, so there's a big chance they'll have <em>that</em> stable release the kernel needs already on hand. I doubt any of the major distros will use <code>rustup</code> for kernel builds.</p>



<a name="264684443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264684443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264684443">(Dec 13 2021 at 10:07)</a>:</h4>
<blockquote>
<p>What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel?</p>
</blockquote>
<p>That can happen regardless of whether you're using a stable or nightly version.</p>



<a name="264686142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264686142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264686142">(Dec 13 2021 at 10:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="382653">ojeda</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264677303">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264253604">said</a>:</p>
<blockquote>
<p>Even if I agreed for you to yolo <code>RUSTC_BOOTSTRAP</code>, I don't want to be stuck unable to update the distro compiler when (not if) an unstable feature breaks the kernel.</p>
</blockquote>
<p>You can always provide a different toolchain for building the kernel, if you really want to start providing Rust-enabled kernels soon (it is experimental).</p>
</blockquote>
<p>This seems like an important point. Do we anticipate distros will start trying to build the kernel with Rust support enabled even if it's experimental? I would assume not, but perhaps "experimental" connotes a different meaning for the kernel than I'm used to. </p>
<p>Assuming distros do not start enabling Rust in kernel support while it's still experimental, that would seem to resolve a lot of the concerns I've seen in this thread about <code>RUSTC_BOOSTRAP</code>...</p>



<a name="264686160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264686160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264686160">(Dec 13 2021 at 10:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264684051">said</a>:</p>
<blockquote>
<p>Yeah, but distro maintainers will not package every nightly, while they're reasonably likely to package the stable releases, so there's a big chance they'll have <em>that</em> stable release the kernel needs already on hand. I doubt any of the major distros will use <code>rustup</code> for kernel builds.</p>
</blockquote>
<p>You're asking for a particular version of stable, right ? If that the case, you (the kernel) and distro will need to be perfectly align. This is asking for a lot. For example archlinux, always update the rust compiler toolchain the next day(s) after the stable release but in you're case they will need to keep the version of some time because the kernel is using it and the rust and kernel release are not synchronize, but the worse part isn't even the fact that they will need to keep an old stable version (how also probably requires an old llvm, ...) but the fact that the kernel is hacking it making it more "stable" than what it really is.</p>



<a name="264686332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264686332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264686332">(Dec 13 2021 at 10:26)</a>:</h4>
<p>Arch already keeps older versions of some packages for exactly that kind of thing. Off the top of my head: python2, openssl-1.0, postgresql-old-upgrade, js68, nodejs-lts-erbium, nodejs-lts-fermium. And I'm sure there are plenty others.</p>



<a name="264686391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264686391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264686391">(Dec 13 2021 at 10:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264684443">said</a>:</p>
<blockquote>
<blockquote>
<p>What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel?</p>
</blockquote>
<p>That can happen regardless of whether you're using a stable or nightly version.</p>
</blockquote>
<p>Stable implies no breaking changes and backwards compatibility. Nightly doesn't have these guaranties.</p>



<a name="264686465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264686465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264686465">(Dec 13 2021 at 10:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264686332">said</a>:</p>
<blockquote>
<p>Arch already keeps older versions of some packages for exactly that kind of thing. Off the top of my head: python2, openssl-1.0, postgresql-old-upgrade.</p>
</blockquote>
<p>That doesn't mean that it a good thing or that it's okay to do it.</p>



<a name="264686955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264686955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264686955">(Dec 13 2021 at 10:32)</a>:</h4>
<blockquote>
<p>That doesn't mean that it a good thing or that it's okay to do it.</p>
</blockquote>
<p>It's a good thing given that they need those packages in the repos. They don't have a choice. But it's far easier to add a suffix and keep an older version of a package than to either:</p>
<ul>
<li>run <code>rustup</code> on the build server</li>
<li>package some random nightly Rust toolchain</li>
</ul>



<a name="264687297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264687297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264687297">(Dec 13 2021 at 10:35)</a>:</h4>
<p>But it probably doesn't matter too much. The Rust developers will do their thing, distro packages will do theirs, kernel developers will once again do theirs. Just like some distros don't like Rust very much, so will others do things that the Rust developers don't like.</p>



<a name="264687402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264687402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264687402">(Dec 13 2021 at 10:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264686955">said</a>:</p>
<blockquote>
<blockquote>
<p>That doesn't mean that it a good thing or that it's okay to do it.</p>
</blockquote>
<p>It's a good thing given that they need those packages in the repos. They don't have a choice. </p>
</blockquote>
<p>Exactly "they don't have a choice" and by forcing a stable release you don't give them a choise. Using a <code>rust-toolchain</code> file would give them a choise to either use <code>rustup</code> with the correct nightly or do the hacky thing with a stable version.</p>



<a name="264687423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264687423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264687423">(Dec 13 2021 at 10:36)</a>:</h4>
<p>You can still put a stable version in <code>rust-toolchain</code>, right?</p>



<a name="264687441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264687441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264687441">(Dec 13 2021 at 10:37)</a>:</h4>
<p>Yep</p>



<a name="264687704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264687704" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264687704">(Dec 13 2021 at 10:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264687297">said</a>:</p>
<blockquote>
<p>But it probably doesn't matter too much. The Rust developers will do their thing, distro packages will do theirs, kernel developers will once again do theirs. Just like some distros don't like Rust very much, so will others do things that the Rust developers don't like.</p>
</blockquote>
<p>It's very likely; but if you found a solution/compromise to the problem, it's very likely also that distro will use it. It will be better for everyone.</p>



<a name="264687826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264687826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264687826">(Dec 13 2021 at 10:40)</a>:</h4>
<blockquote>
<p>Exactly "they don't have a choice" and by forcing a stable release you don't give them a choise.</p>
</blockquote>
<p>I'm not forcing anyway to do anything. Distro maintainers will still be free to ignore <code>rust-toolchain</code> and compile with a patched nightly of their own (for example).</p>



<a name="264687908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264687908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264687908">(Dec 13 2021 at 10:41)</a>:</h4>
<p>Anyway, I have nothing to do with kernel development, but as a user I would rather run a kernel built using <code>RUSTC_BOOTSTRAP=1</code> than one built with a nightly compiler, simply because stable compilers are better tested.</p>



<a name="264688166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264688166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264688166">(Dec 13 2021 at 10:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264687908">said</a>:</p>
<blockquote>
<p>stable compilers are better tested.</p>
</blockquote>
<p>This also seems like an important point that was hinted at earlier. Nightlies don't get crater runs and they don't get targeted backports.</p>



<a name="264688363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264688363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264688363">(Dec 13 2021 at 10:45)</a>:</h4>
<blockquote>
<p>if you found a solution/compromise to the problem</p>
</blockquote>
<p>The solution is to stabilize those features, but frankly I don't see it happening too soon (see e.g. <code>-Zbuild-std</code>). Asking kernel developers to work on stabilizing these themselves won't make things better.</p>



<a name="264690372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/News%3A%20Progress%20in%20Rust%20as%202nd%20language%20for%20the%20Linux%20kernel/near/264690372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel.html#264690372">(Dec 13 2021 at 11:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264689882">said</a>:</p>
<blockquote>
<p>It's done in a <code>Makefile</code>, but presumably nothing would prevent adding a <code>CONFIG_THIS_RUST_IS_1_57_PINKY_PROMISE</code> that needs to be set in order to enable the code. But keep in mind that building the kernel with a too-new GCC can fail just as well.</p>
</blockquote>
<p>In that case, if it's must always be opt-in by distro or everyone using a stable release, it's fine for me. Not great but better than being stuck.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
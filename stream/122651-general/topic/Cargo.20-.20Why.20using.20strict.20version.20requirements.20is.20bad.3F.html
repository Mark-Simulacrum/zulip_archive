<html>
<head><meta charset="utf-8"><title>Cargo - Why using strict version requirements is bad? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html">Cargo - Why using strict version requirements is bad?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="256329028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256329028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256329028">(Oct 05 2021 at 22:28)</a>:</h4>
<p>Typically, using strict version requirements implies you're relying on unspecified implementation-details of the crate, or things that the crate is explicitly allowed to change in compatible versions (either by rust-semver, or explicit declaration by the crate). It also loses the ability to recieve patches, including security and soundness fixes, so it has downsides, and the benefits really only apply if you are doing specific things that you generally shouldn't be.</p>



<a name="256331643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256331643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256331643">(Oct 05 2021 at 22:55)</a>:</h4>
<p>Put another way: if you don't trust the crate to be correct about semver usage during future releases, why are you even using that dependency at all?</p>



<a name="256332897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256332897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Seppanen <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256332897">(Oct 05 2021 at 23:07)</a>:</h4>
<p>Some crates have policies that allow MSRV breakage in minor releases; pinning to an exact version seems to be the only way to preserve your own MSRV.</p>



<a name="256354983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256354983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256354983">(Oct 06 2021 at 04:11)</a>:</h4>
<p>True, which is why I don't ever trust any dependencies myself.</p>



<a name="256361135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256361135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> HeroicKatora <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256361135">(Oct 06 2021 at 05:51)</a>:</h4>
<p>A large amount of crates have a policy of MSRV breakage on a compatible version. There's no other way if you intend to ever reach a stable version (typically on 1.0). Due to 'newest compatible' resolution there is no good way to ensure rust-version compatibility afaik.</p>



<a name="256361143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256361143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256361143">(Oct 06 2021 at 05:51)</a>:</h4>
<p>Strict version dependencies are also really painful for Linux distributions.</p>



<a name="256361144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256361144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256361144">(Oct 06 2021 at 05:51)</a>:</h4>
<p>Since distributions typically only have one compatible version.</p>



<a name="256428429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256428429" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256428429">(Oct 06 2021 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="432852">@João M. Bezerra</span> you may also want to read this old issue <a href="https://github.com/rust-lang/cargo/issues/5340">https://github.com/rust-lang/cargo/issues/5340</a>.</p>



<a name="256432284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256432284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256432284">(Oct 06 2021 at 15:38)</a>:</h4>
<blockquote>
<p>A large amount of crates have a policy of MSRV breakage on a compatible version. There's no other way if you intend to ever reach a stable version (typically on 1.0). Due to 'newest compatible' resolution there is no good way to ensure rust-version compatibility afaik.</p>
</blockquote>
<p>Simply don't upgrade the MSRV within a compatible version. Use cargo features, or just have the occasional new major version. It's genuinely not the end of the world.</p>



<a name="256432461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256432461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256432461">(Oct 06 2021 at 15:39)</a>:</h4>
<p>Are older Rust versions officially supported?</p>



<a name="256436938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256436938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256436938">(Oct 06 2021 at 16:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F/near/256432284">said</a>:</p>
<blockquote>
<blockquote>
<p>A large amount of crates have a policy of MSRV breakage on a compatible version. There's no other way if you intend to ever reach a stable version (typically on 1.0). Due to 'newest compatible' resolution there is no good way to ensure rust-version compatibility afaik.</p>
</blockquote>
<p>Simply don't upgrade the MSRV within a compatible version. Use cargo features, or just have the occasional new major version. It's genuinely not the end of the world.</p>
</blockquote>
<p>The problem is that some crates don't do this. I've actually encountered this myself, and had to avoid using those crates.</p>



<a name="256437166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256437166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256437166">(Oct 06 2021 at 16:04)</a>:</h4>
<p>I completely agree with you Connor.</p>



<a name="256437427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256437427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256437427">(Oct 06 2021 at 16:06)</a>:</h4>
<p>(To be honest, I don't see the point of an MSRV guarantee from a library crate if it can be changed in a minor release)</p>



<a name="256437816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256437816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256437816">(Oct 06 2021 at 16:08)</a>:</h4>
<p>If a minor release cannot change MSRV then many crates wouldn't be able to upgrade their MSRV at all</p>



<a name="256437846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256437846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256437846">(Oct 06 2021 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203546">Laurențiu</span> <a href="#narrow/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F/near/256432461">said</a>:</p>
<blockquote>
<p>Are older Rust versions officially supported?</p>
</blockquote>
<p>No, but a number of crates support them for various reasons (to support binary distrbutions from system package managers is one, I use it so I can support bootstrapping with mrustc)</p>



<a name="256437869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256437869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256437869">(Oct 06 2021 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303710">Gary Guo</span> <a href="#narrow/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F/near/256437816">said</a>:</p>
<blockquote>
<p>If a minor release cannot change MSRV then many crates wouldn't be able to upgrade their MSRV at all</p>
</blockquote>
<p>Yes.</p>



<a name="256438008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256438008" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256438008">(Oct 06 2021 at 16:09)</a>:</h4>
<p>I don't think it's desirable that ecosystems are restricted to an old Rust version</p>



<a name="256438071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256438071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256438071">(Oct 06 2021 at 16:09)</a>:</h4>
<p>The alternative is you negate the benefit of having an MSRV guarantee, which is the ability to build on an older rust version.</p>



<a name="256438231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256438231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256438231">(Oct 06 2021 at 16:10)</a>:</h4>
<p>As I said, you can use off-by-default cargo features or you can issue new major versions. Both are entirely acceptable.</p>



<a name="256438332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256438332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256438332">(Oct 06 2021 at 16:11)</a>:</h4>
<p>Or if it's entirely internal, you can use <a href="http://build.rs">build.rs</a> to detect available features and enable them internally.</p>



<a name="256438694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256438694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256438694">(Oct 06 2021 at 16:13)</a>:</h4>
<p>With more feature gates it's painful to ensure that all combinations work</p>



<a name="256438802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256438802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256438802">(Oct 06 2021 at 16:14)</a>:</h4>
<p>IMO upgrading MSRV with minor release is reasonable, as long as it's not too frequent and the new MSRV is not too recent</p>



<a name="256438818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256438818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256438818">(Oct 06 2021 at 16:14)</a>:</h4>
<p>I'd find it more painful if my dependency updated and suddenly I can no longer build on a version I absolutely require (actually slightly more painful since both upgrading and downgrading for me ends up being a manual process).</p>



<a name="256439000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256439000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256439000">(Oct 06 2021 at 16:15)</a>:</h4>
<p>You can lock your dependencies</p>



<a name="256439496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256439496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256439496">(Oct 06 2021 at 16:18)</a>:</h4>
<p>I think a reasonable compromise is to say that a minor release can bump MSRV to the "latest - X" Rust version. E.g. X can be 9 so that it'll be buildable by a 1-year old compiler.</p>



<a name="256439625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256439625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256439625">(Oct 06 2021 at 16:19)</a>:</h4>
<p>Well, that depends on the downstream requrements.</p>



<a name="256439905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256439905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256439905">(Oct 06 2021 at 16:21)</a>:</h4>
<p>If a downstream distro don't want to update the compiler then probably they don't want to upgrade crates as well.</p>



<a name="256439990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256439990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256439990">(Oct 06 2021 at 16:22)</a>:</h4>
<p>Since compiler upgrade is also a minor release bump</p>



<a name="256440196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256440196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256440196">(Oct 06 2021 at 16:23)</a>:</h4>
<p>I am already quite frastrated when trying to contribute to some Rust projects and seeing their MSRV as 1.4X, which means that I can't use const generics.</p>



<a name="256440290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256440290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256440290">(Oct 06 2021 at 16:24)</a>:</h4>
<p>Keeping MSRV low forever is a big NO for me.</p>



<a name="256440423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256440423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256440423">(Oct 06 2021 at 16:25)</a>:</h4>
<p>Downstream doesn't mean distro necessarily. It can also be a crate. I currently have a project that MUST be 2 steps from a C++ compiler (for bootstrapping purposes, as it is a rust (among others) compiler project that doesn't want the rustc problem), which means that, at least right now, that's 1.39 (almost 2 years old). I can't update until either mrustc upgrades, or gcc-rs releases.</p>



<a name="256440497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256440497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256440497">(Oct 06 2021 at 16:25)</a>:</h4>
<p>If something says 35, but can upgrade in a minor version, I can't use it, because I need to guarantee it can build on 39 at least until I can bump the compatibility version.</p>



<a name="256440953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256440953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256440953">(Oct 06 2021 at 16:28)</a>:</h4>
<p>It sounds like MSRV-aware dependency resolution should work</p>



<a name="256441220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256441220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256441220">(Oct 06 2021 at 16:30)</a>:</h4>
<p>Sure, but that would have to be added. And supported. And suddenly you have the same problem.</p>



<a name="256441424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256441424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256441424">(Oct 06 2021 at 16:31)</a>:</h4>
<p>niche use cases shouldn't stop the whole ecosystems though</p>



<a name="256441578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256441578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256441578">(Oct 06 2021 at 16:32)</a>:</h4>
<p>I would not suggest one crate feature per language feature you use all separately optional.</p>
<p>What <code>tinyvec</code> does is offer features for compiler level and so one naturally implies the previous one.</p>



<a name="256442113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256442113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> HeroicKatora <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256442113">(Oct 06 2021 at 16:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F/near/256438231">said</a>:</p>
<blockquote>
<p>As I said, you can use off-by-default cargo features or you can issue new major versions. Both are entirely acceptable.</p>
</blockquote>
<p>There is no good mechanism for this either, at scale. First of all, this is hell to test. Second, this doesn't work if the new features requires upgrading to a new version of a (private) dependency unless you have two fully incompatible implementations based on those two versions. Which is hell to maintain. And lastly this negates any benefit you could reap from newer versions of Rust, stabiliy and readabilty alike. You're eternally damned to maintain that copy of <code>slice::copy_from_within</code> you made yourself.</p>



<a name="256442505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256442505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256442505">(Oct 06 2021 at 16:38)</a>:</h4>
<p>Maintaining an old branch to provide bugfixes only probably is easier</p>



<a name="256442977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256442977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> HeroicKatora <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256442977">(Oct 06 2021 at 16:40)</a>:</h4>
<p>That 'old' branch won't work if you intend to expand on a stable crate over time. It works for ZeroVer though.</p>



<a name="256444807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256444807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256444807">(Oct 06 2021 at 16:52)</a>:</h4>
<p>Then just have a new major version of the crate after a while</p>



<a name="256446152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256446152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> HeroicKatora <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256446152">(Oct 06 2021 at 17:01)</a>:</h4>
<p>Not for a compatibility crate. I'm sorry but why is it okay to expect something from crate authors that the language itself has explicitly barred itself from doing? That goes directly against to the argument of having 'a small std because there are crates'. The desire to have a true supplement to the standard library with similar commitment is real and just not possible.</p>



<a name="256446691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256446691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> HeroicKatora <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256446691">(Oct 06 2021 at 17:04)</a>:</h4>
<p>I would accept limitations for doing that, e.g. explicit attributes on use so that the compiler can verify the msrv against the stability attributes in std. But 'just bump major version' is not in the least satisfying.</p>



<a name="256447361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256447361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256447361">(Oct 06 2021 at 17:09)</a>:</h4>
<p>just... bump the minor version and maintain backwards compat stuff on the patch level? sure, they won't get new APIs, but they won't be getting them from std either.</p>



<a name="256447441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256447441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256447441">(Oct 06 2021 at 17:10)</a>:</h4>
<p>something has to give</p>



<a name="256447677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256447677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256447677">(Oct 06 2021 at 17:12)</a>:</h4>
<p>I'm fine with MSRV breaks in minor (but not patch) versions. Asking crate authors to keep supporting X-year old compilers which aren't even supported by the Rust project seems like optimizing for the bad use case.</p>



<a name="256447750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256447750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> HeroicKatora <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256447750">(Oct 06 2021 at 17:12)</a>:</h4>
<p>That breaks for downstream because their only option with such a policy is strict version requirements. Which is bad because it results in outdated dependencies.</p>



<a name="256448000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256448000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> HeroicKatora <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256448000">(Oct 06 2021 at 17:14)</a>:</h4>
<p>This wouldn't be an issue if crate resolution was sensitive to msrv. Then you can maintain (read: continuously test) even if your downstream dependencies move on to higher msrv in a minor version change; even without going nuclear option of having a &lt;= dependency specification.</p>



<a name="256451433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256451433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256451433">(Oct 06 2021 at 17:35)</a>:</h4>
<p>I think it would be reasonable for Cargo to support just ignoring crate versions with a declared rust-version higher than your current compiler version.</p>



<a name="256452666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256452666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256452666">(Oct 06 2021 at 17:43)</a>:</h4>
<p>iif there are good error messages when the resolution fails.</p>



<a name="256459193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Cargo%20-%20Why%20using%20strict%20version%20requirements%20is%20bad%3F/near/256459193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Cargo.20-.20Why.20using.20strict.20version.20requirements.20is.20bad.3F.html#256459193">(Oct 06 2021 at 18:21)</a>:</h4>
<p>also iff you can tell cargo about features that change minimum version</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
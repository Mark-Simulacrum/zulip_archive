<html>
<head><meta charset="utf-8"><title>Rustdoc code block for Github README · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html">Rustdoc code block for Github README</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249870666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249870666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Mosher <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249870666">(Aug 18 2021 at 15:54)</a>:</h4>
<p>Hi all, I had this idea after seeing the new feature in 1.54 for using <code>#![doc = include_str!("README.md")]</code>, which is: what if we could write markdown code blocks that can be tested by rustdoc but also rendered properly in Github?</p>
<p>Right now, rustdoc will treat any code-fenced block as Rust, and compile and run it:</p>
<div class="codehilite"><pre><span></span><code># fn main() {
println!(&quot;Hello, world!&quot;);
# }
</code></pre></div>
<p>This snippet should compile and run, but only <code>println!("Hello, world!");</code> should be rendered in html. If we were to put this code block in a README.md, however, Github would incorrectly render it with no syntax highlighting and without hiding the # lines. I'm wondering if it'd be possible to close this gap. I'm thinking there'd be two steps to this:</p>
<p>1) Come up with a new codeblock-fence-label that both rustdoc and Github know is rustdoc-syntax-rust, I'm thinking the easiest would be just "```rustdoc"</p>
<p>2) Get Github to implement markdown codeblock rendering for "```rustdoc" code fences. I don't know how likely it is for this to happen.</p>
<p>I guess I wanted to get people's thoughts on how useful this would be and/or how difficult to make it happen. Would this warrant an RFC? The outcome is largely dependent on collaboration with Github itself, so I wanted opinions first. I think  it'd be great to be able to test code blocks in READMEs, to get the same "hey, update your docs" effect there.</p>



<a name="249876129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Larry Dewey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876129">(Aug 18 2021 at 16:34)</a>:</h4>
<p>Hi All, is there an equivalent in Rust for C's __attribute__((mode(HI)))?</p>



<a name="249876282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Larry Dewey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876282">(Aug 18 2021 at 16:35)</a>:</h4>
<p>(for enums)</p>



<a name="249876438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876438">(Aug 18 2021 at 16:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="433828">Larry Dewey</span> <a href="#narrow/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README/near/249876129">said</a>:</p>
<blockquote>
<p>Hi All, is there an equivalent in Rust for C's __attribute__((mode(HI)))?</p>
</blockquote>
<p>Never seen that one. Is it like <code>#[repr(u16)]</code>?</p>



<a name="249876449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876449">(Aug 18 2021 at 16:36)</a>:</h4>
<p>Hm, <code>#[repr(u16)]</code>? Not sure if that's fully equivalent</p>



<a name="249876492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876492">(Aug 18 2021 at 16:37)</a>:</h4>
<p>Yeah, i've only seen it on <code>int</code>, never on enums.</p>



<a name="249876504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876504">(Aug 18 2021 at 16:37)</a>:</h4>
<p>I think this question is in the wrong place though.</p>



<a name="249876515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876515">(Aug 18 2021 at 16:37)</a>:</h4>
<p>(should be its own topic)</p>



<a name="249876616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876616" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Larry Dewey <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876616">(Aug 18 2021 at 16:38)</a>:</h4>
<p><span class="user-mention" data-user-id="209168">@Thom Chiovoloni</span> Sorry, still new here. Would it be more appropriate to make it a separate topic?</p>



<a name="249876636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Rustdoc%20code%20block%20for%20Github%20README/near/249876636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Rustdoc.20code.20block.20for.20Github.20README.html#249876636">(Aug 18 2021 at 16:38)</a>:</h4>
<p>Yes.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Type alias with default generic type · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html">Type alias with default generic type</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249503396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249503396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João M. Bezerra <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249503396">(Aug 15 2021 at 09:45)</a>:</h4>
<p>I was about to reopen an issue about type aliases, but I'm not sure if this is actually an issue or expected.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">MyOption</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">_foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyOption</span>::<span class="n">default</span><span class="p">();</span><span class="w">   </span><span class="c1">// Compile error, must specify T</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Isn't this code supposed to compile? <code>_foo</code> should be typed as <code>MyOption&lt;i32&gt;</code></p>



<a name="249503450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249503450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João M. Bezerra <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249503450">(Aug 15 2021 at 09:46)</a>:</h4>
<p>This compiles</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">_foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyOption</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span>::<span class="n">default</span><span class="p">();</span><span class="w"></span>
</code></pre></div>



<a name="249503517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249503517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lengyijun <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249503517">(Aug 15 2021 at 09:48)</a>:</h4>
<div class="codehilite"><pre><span></span><code>fn main() {
    type MyOption&lt;T = i32&gt; = Option&lt;T&gt;;
    let _foo:MyOption = Default::default();
}
</code></pre></div>



<a name="249503854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249503854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João M. Bezerra <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249503854">(Aug 15 2021 at 09:55)</a>:</h4>
<p>I do not comprehend why this works, but that doesn't, is it a limitation?</p>



<a name="249504706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249504706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249504706">(Aug 15 2021 at 10:16)</a>:</h4>
<p>defaults are only used in type position; if you leave out type args in expressions, they'll just be inferred (or not, as in this case)</p>



<a name="249504722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249504722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249504722">(Aug 15 2021 at 10:16)</a>:</h4>
<p>so... yes, it's a limitation</p>



<a name="249504725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249504725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249504725">(Aug 15 2021 at 10:17)</a>:</h4>
<p>I think there were some ideas/discussions about using defaults in inference fallback, but it's probably pretty hard to change backwards compatibly</p>



<a name="249504927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249504927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João M. Bezerra <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249504927">(Aug 15 2021 at 10:22)</a>:</h4>
<p>Thanks for the explanation, this one seems to be very specific to Default</p>



<a name="249505070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249505070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João M. Bezerra <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249505070">(Aug 15 2021 at 10:26)</a>:</h4>
<p>Is there a similar reason for <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=72600559c9f56c6ad6921d7434a97530">this</a> to not compile?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">MyOption</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyOption</span>::<span class="nb">None</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>It happened to me, and I gave up on using type aliases with enums for public types in my crate <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> .</p>



<a name="249505157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249505157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249505157">(Aug 15 2021 at 10:29)</a>:</h4>
<p>it's the same reason, there's nothing specific to Default in the first case</p>



<a name="249505158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249505158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249505158">(Aug 15 2021 at 10:29)</a>:</h4>
<p><code>let _: MyOption = MyOption::None</code> would work</p>



<a name="249505163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249505163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João M. Bezerra <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249505163">(Aug 15 2021 at 10:29)</a>:</h4>
<p>Oh, by "defaults" you mean T = i32, and not the trait <code>Default</code>, right?</p>



<a name="249505202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249505202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249505202">(Aug 15 2021 at 10:30)</a>:</h4>
<p>aah right yeah</p>



<a name="249506553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249506553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giacomo Stevanato <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249506553">(Aug 15 2021 at 11:05)</a>:</h4>
<p>This also doesn't compile, even through I kinda specified the generics</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">MyOption</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">_foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyOption</span>::<span class="o">&lt;&gt;</span>::<span class="n">default</span><span class="p">();</span><span class="w">   </span><span class="c1">// Compile error, must specify T</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="249507283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249507283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giacomo Stevanato <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249507283">(Aug 15 2021 at 11:23)</a>:</h4>
<p><code> &lt;MyOption&gt;::default()</code> seems to work</p>



<a name="249508360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249508360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Diebold <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249508360">(Aug 15 2021 at 11:49)</a>:</h4>
<p>yes, the first one doesn't really make a difference to the compiler; in the second one <code>MyOption</code> is in type position, so the defaults apply</p>



<a name="249509700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249509700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giacomo Stevanato <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249509700">(Aug 15 2021 at 12:20)</a>:</h4>
<p>I was trying to make the first one work and a test failed. Looks like if I have a type like <code>S&lt;'a, T&gt;</code> it is legal to do <code>S::&lt;'static&gt;::foo()</code> and doing so will result in the concrete type for <code>T</code> to be inferred.</p>



<a name="249526713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249526713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matt1992 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249526713">(Aug 15 2021 at 19:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="338379">Giacomo Stevanato</span> <a href="#narrow/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type/near/249506553">said</a>:</p>
<blockquote>
<p>This also doesn't compile, even through I kinda specified the generics</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">MyOption</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">_foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyOption</span>::<span class="o">&lt;&gt;</span>::<span class="n">default</span><span class="p">();</span><span class="w">   </span><span class="c1">// Compile error, must specify T</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>
<p>That one is because <code>::&lt;&gt;</code>is treated like not being written at all, meaning that they're still inferred.<br>
I think it should be treated like passing zero generic arguments, allowing them to take their default values, but it's too late to change that in this or 2021 edition.</p>



<a name="249970355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Type%20alias%20with%20default%20generic%20type/near/249970355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Type.20alias.20with.20default.20generic.20type.html#249970355">(Aug 19 2021 at 11:13)</a>:</h4>
<p>See also: <a href="https://users.rust-lang.org/t/what-does-assignment-in-a-generic-mean/63482/3?u=yandros">https://users.rust-lang.org/t/what-does-assignment-in-a-generic-mean/63482/3?u=yandros</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
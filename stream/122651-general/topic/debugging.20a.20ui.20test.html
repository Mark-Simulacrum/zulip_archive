<html>
<head><meta charset="utf-8"><title>debugging a ui test · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html">debugging a ui test</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="266447242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266447242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266447242">(Dec 30 2021 at 18:18)</a>:</h4>
<p>I use VS Code and have CodeLLDB installed. Off chance anyone has a configuration that will let me debug a specific UI test?</p>



<a name="266447804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266447804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266447804">(Dec 30 2021 at 18:26)</a>:</h4>
<p>doesn't the failing test emit the rustc invocation you can execute?</p>



<a name="266448067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266448067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266448067">(Dec 30 2021 at 18:30)</a>:</h4>
<p>I mean there's this?</p>
<p><code>"/home/jhpratt/code/rust/build/x86_64-unknown-linux-gnu/stage1/bin/rustc" "/home/jhpratt/code/rust/src/test/ui/deriving/deriving-const-default.rs" "-Zthreads=1" "--target=x86_64-unknown-linux-gnu" "--error-format" "json" "--json" "future-incompat" "-Ccodegen-units=1" "-Zui-testing" "-Zdeduplicate-diagnostics=no" "-C" "prefer-dynamic" "-o" "/home/jhpratt/code/rust/build/x86_64-unknown-linux-gnu/test/ui/deriving/deriving-const-default/a" "-Crpath" "-O" "-Cdebuginfo=0" "-Lnative=/home/jhpratt/code/rust/build/x86_64-unknown-linux-gnu/native/rust-test-helpers" "-L" "/home/jhpratt/code/rust/build/x86_64-unknown-linux-gnu/test/ui/deriving/deriving-const-default/auxiliary"</code></p>
<p>But it's rustc that I'm debugging, just using a UI test as something that I know fails. Specifically trying to figure out the exact call stack, but I don't think there's a way to do that directly.</p>



<a name="266448240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266448240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266448240">(Dec 30 2021 at 18:33)</a>:</h4>
<p>I suppose there's also the compiletest command, but that's somehow even longer.</p>



<a name="266448346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266448346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266448346">(Dec 30 2021 at 18:34)</a>:</h4>
<blockquote>
<p>But it's rustc that I'm debugging</p>
</blockquote>
<p>and that command invokes rustc? so running it under a debugger should work</p>



<a name="266448556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266448556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266448556">(Dec 30 2021 at 18:37)</a>:</h4>
<p>Meh, let's give it a shot. Worst case it doesn't work.</p>



<a name="266448942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266448942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266448942">(Dec 30 2021 at 18:42)</a>:</h4>
<p>idk if automatically breaks on unwind, maybe you have to set a breakpoint in a panic routine or something of interest</p>



<a name="266449033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266449033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266449033">(Dec 30 2021 at 18:44)</a>:</h4>
<p>It has the option for ordinary projects that use cargo. It's unfortunately not visible here.</p>



<a name="266449316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/debugging%20a%20ui%20test/near/266449316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/debugging.20a.20ui.20test.html#266449316">(Dec 30 2021 at 18:48)</a>:</h4>
<p>Neither the rustc nor the compiletest command worked as hoped</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
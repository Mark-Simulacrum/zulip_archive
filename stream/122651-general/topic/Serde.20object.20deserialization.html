<html>
<head><meta charset="utf-8"><title>Serde object deserialization · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html">Serde object deserialization</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251716939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251716939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Si <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251716939">(Sep 02 2021 at 13:44)</a>:</h4>
<p>I have a JSON stored in a .json file that looks like this:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
         <span class="nt">"key"</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">"field1"</span><span class="p">:</span> <span class="s2">"value"</span>
          <span class="p">},</span>
          <span class="err">...</span>
<span class="p">}</span>
</code></pre></div>
<p>So, it is a JSON-object, that contains multiple objects. How can I deserialize that and get Vec or Map for example?</p>



<a name="251719835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251719835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251719835">(Sep 02 2021 at 14:02)</a>:</h4>
<p>Something like <code>let foo: Vec&lt;(String, serde_json::Value)&gt; = serde_json::from_str(data)?;</code></p>



<a name="251720536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251720536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Si <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251720536">(Sep 02 2021 at 14:06)</a>:</h4>
<p>Thanks, I'll try that!</p>



<a name="251765114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251765114" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Si <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251765114">(Sep 02 2021 at 18:40)</a>:</h4>
<p>Update on the topic:  I tried some solutions but everything leads to the fact that I cannot use Vec as a type for that kinda JSON<br>
Error:  <code>Error("invalid type: map, expected a sequence", line: 1, column: 1)'</code></p>



<a name="251772547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251772547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251772547">(Sep 02 2021 at 19:28)</a>:</h4>
<p>Ah yes, that is a <code>{...}</code> not a <code>[...]</code>!<br>
<code>let foo: HashMap&lt;String, serde_json::Value&gt; = serde_json::from_str(data)?;</code></p>



<a name="251773168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251773168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251773168">(Sep 02 2021 at 19:32)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=05bc5a7845f46bd5b47a92b6e5a83a86">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=05bc5a7845f46bd5b47a92b6e5a83a86</a></p>



<a name="251773992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251773992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251773992">(Sep 02 2021 at 19:38)</a>:</h4>
<p>Tip: If you can't figure out what type to use, deserialize into a<code>serde_json::Value</code> and debug print.</p>



<a name="251774116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251774116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251774116">(Sep 02 2021 at 19:39)</a>:</h4>
<p>Also, you should try to use a struct if the JSON structure is well known.</p>



<a name="251774151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Serde%20object%20deserialization/near/251774151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Serde.20object.20deserialization.html#251774151">(Sep 02 2021 at 19:39)</a>:</h4>
<p><a href="https://transform.tools/json-to-rust-serde">https://transform.tools/json-to-rust-serde</a> can generate it for you.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Baking period? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html">Baking period?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267671345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267671345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267671345">(Jan 12 2022 at 01:20)</a>:</h4>
<p>Something like <code>explicit_generic_args_with_impl_trait</code> (<a href="https://github.com/rust-lang/rust/issues/83701">#83701</a>) has no apparent blockers and no design concerns (there's really only one way to do it), and it's been implemented since <a href="https://github.com/rust-lang/rust/issues/86176">#86176</a> landed in August. How long do features need to wait before being stabilized when in a situation like this? Asking both about this feature and more generally.</p>



<a name="267674995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267674995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267674995">(Jan 12 2022 at 02:22)</a>:</h4>
<p>Having only skimmed the issue, one concern I'd have is does this feature preclude allowing users to specify the types of <code>impl Trait</code> arguments in the future?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">impl</span><span class="w"> </span><span class="n">MyTrait</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">foo</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">//         ^^^^^^</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="267675027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267675027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267675027">(Jan 12 2022 at 02:23)</a>:</h4>
<p>Also, to (try to) answer your question, I think it varies a lot. Usually there needs to be a decent amount of successful use "in the wild" first.</p>



<a name="267675038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267675038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267675038">(Jan 12 2022 at 02:23)</a>:</h4>
<p>Internal use can qualify too. Is this feature used in the compiler? The standard library? Rustdoc or Clippy?</p>



<a name="267675093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267675093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267675093">(Jan 12 2022 at 02:24)</a>:</h4>
<p>(FWIW, I'm just stating what I've seen in practice; I don't know if there are any hard rules about this.)</p>



<a name="267679269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267679269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267679269">(Jan 12 2022 at 03:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/122651-general/topic/Baking.20period.3F/near/267674995">said</a>:</p>
<blockquote>
<p>Having only skimmed the issue, one concern I'd have is does this feature preclude allowing users to specify the types of <code>impl Trait</code> arguments in the future?</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span>: <span class="nc">impl</span><span class="w"> </span><span class="n">MyTrait</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">foo</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">//         ^^^^^^</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>
<p>This is disallowed. I think there's some consensus that <code>impl Trait</code> shouldn't be explicit specifiable. Back when the <code>impl Trait</code> is proposed it's suggested that this'd treated as a syntax sugar but with RPIT and TAIT I think people don't treat these as sugar for generics anymore.</p>



<a name="267679325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267679325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267679325">(Jan 12 2022 at 03:43)</a>:</h4>
<p>The thing that needs to be addressed is to create some informative diagnostics message when compiler rejects the code you mentioned.</p>



<a name="267679452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267679452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267679452">(Jan 12 2022 at 03:45)</a>:</h4>
<p>As the implementator of the feature gate I want its stablisation too, but I think the diagnostics improvement need to happen before stabilisation. I might have a go when I have time.</p>



<a name="267740584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Baking%20period%3F/near/267740584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Baking.20period.3F.html#267740584">(Jan 12 2022 at 15:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="245610">Jacob Pratt</span> <a href="#narrow/stream/122651-general/topic/Baking.20period.3F/near/267671345">said</a>:</p>
<blockquote>
<p>How long do features need to wait before being stabilized when in a situation like this?</p>
</blockquote>
<p>When there's not a design, there's no guarantee of anything.</p>
<p>The big question that jumps to mind here is between:</p>
<ul>
<li>APIT means it can't be turbofished, and</li>
<li>APIT adds anonymous parameters in occurrence order</li>
</ul>
<p>I've seen both suggested at different times.</p>
<p>Generally I think it needs someone to argue for a particular design.  A particularly common question was whether there should be a way to semver-compatibly switch between generics and APITs.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Test parallelism · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Test.20parallelism.html">Test parallelism</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267140654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Test%20parallelism/near/267140654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Test.20parallelism.html#267140654">(Jan 07 2022 at 01:32)</a>:</h4>
<p>Rust tests run in parallel by default. Also, AFAICT the test runner code can also run in parallel with tests. E.g. as if the test runner code is on the main thread and each test gets a thread spawned for it, or something similar.</p>
<p>But, if there is just one test, it seems like the test runner code never runs in parallel, and the single test runs on the main thread. Does that seem right?</p>
<p>I looked at the <code>run_tests()</code> function but it's a bit complicated, I'm having trouble confirming my observations in the code.</p>



<a name="267141120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Test%20parallelism/near/267141120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Test.20parallelism.html#267141120">(Jan 07 2022 at 01:40)</a>:</h4>
<p>I'm pretty sure it only uses the main thread if you set the concurrency to 1.  Like with <code>--test-threads</code> or <code>RUST_TEST_THREADS</code>.</p>



<a name="267146771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Test%20parallelism/near/267146771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Test.20parallelism.html#267146771">(Jan 07 2022 at 03:16)</a>:</h4>
<p>Ok, thanks</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
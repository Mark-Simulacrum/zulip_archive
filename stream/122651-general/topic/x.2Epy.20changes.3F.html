<html>
<head><meta charset="utf-8"><title>x.py changes? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html">x.py changes?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="206560130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206560130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206560130">(Aug 11 2020 at 10:30)</a>:</h4>
<p><code>./x.py build src/rustc</code> used to be the way to get a stage 2 toolchain. somehow that does not seem to work any more. I think I read some rumors about recent x.py changes, are those true?</p>



<a name="206560156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206560156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206560156">(Aug 11 2020 at 10:31)</a>:</h4>
<p>ah, this is probably <a href="https://github.com/rust-lang/rust/pull/73964">https://github.com/rust-lang/rust/pull/73964</a>. is there any way I could have known about this? given that such changes affect basically everyone working on rustc, maybe we should have a way to point them out to people. that would save a lot of time debugging very weird things where stuff stops working without me changing anything.^^<br>
(in this case I got miri build failures that made no sense at all -- it was using a waaay outdated rustc.)</p>



<a name="206560410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206560410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206560410">(Aug 11 2020 at 10:34)</a>:</h4>
<p>Looks like the new way to do this is <code>./x.py --stage 2 build src/rustc</code></p>



<a name="206560458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206560458" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lzutao <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206560458">(Aug 11 2020 at 10:35)</a>:</h4>
<p>I agree this should ping all the team members. One way to know about changes like this is watching <a href="https://github.com/rust-lang/compiler-team">https://github.com/rust-lang/compiler-team</a> .</p>



<a name="206561001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206561001" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206561001">(Aug 11 2020 at 10:43)</a>:</h4>
<p>hm, about half the issues there sound like I'd might want to know about them</p>



<a name="206561005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206561005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206561005">(Aug 11 2020 at 10:43)</a>:</h4>
<p>probably less, TBH</p>



<a name="206648715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206648715" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206648715">(Aug 12 2020 at 00:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120791">RalfJ</span> <a href="#narrow/stream/122651-general/topic/x.2Epy.20changes.3F/near/206560156">said</a>:</p>
<blockquote>
<p>ah, this is probably <a href="https://github.com/rust-lang/rust/pull/73964">https://github.com/rust-lang/rust/pull/73964</a>. is there any way I could have known about this? given that such changes affect basically everyone working on rustc, maybe we should have a way to point them out to people. that would save a lot of time debugging very weird things where stuff stops working without me changing anything.^^<br>
(in this case I got miri build failures that made no sense at all -- it was using a waaay outdated rustc.)</p>
</blockquote>
<p>I filed an MCP and it was open for about 15 days. There was also a zulip stream in <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Improve.20defaults.20in.20x.2Epy.20compiler-team.23326">https://rust-lang.zulipchat.com/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Improve.20defaults.20in.20x.2Epy.20compiler-team.23326</a>.</p>
<p>Is there anything else I could/should have done?</p>



<a name="206648727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206648727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206648727">(Aug 12 2020 at 00:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120791">RalfJ</span> <a href="#narrow/stream/122651-general/topic/x.2Epy.20changes.3F/near/206560410">said</a>:</p>
<blockquote>
<p>Looks like the new way to do this is <code>./x.py --stage 2 build src/rustc</code></p>
</blockquote>
<p>yeah, that should have the same behavior as before</p>



<a name="206648890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206648890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206648890">(Aug 12 2020 at 00:45)</a>:</h4>
<p>maybe I could have pinged rust-lang/compiler on the MCP? that seems reasonable if it was tagged as T-compiler</p>



<a name="206648915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206648915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206648915">(Aug 12 2020 at 00:46)</a>:</h4>
<blockquote>
<p>Is there anything else I could/should have done?</p>
</blockquote>
<p>maybe an internal post or a post somewhere else could be helpful (or updating forge)</p>



<a name="206648990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206648990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206648990">(Aug 12 2020 at 00:47)</a>:</h4>
<p>I did update rustc-dev-guide: <a href="https://github.com/rust-lang/rustc-dev-guide/pull/813">https://github.com/rust-lang/rustc-dev-guide/pull/813</a>. There wasn't much relevant on forge I think</p>



<a name="206648997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206648997" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206648997">(Aug 12 2020 at 00:47)</a>:</h4>
<p>an internals post sounds like a good idea</p>



<a name="206649006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206649006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206649006">(Aug 12 2020 at 00:47)</a>:</h4>
<p>especially for things that affect the <em>whole</em> compiler team, not just the people working on a specific part</p>



<a name="206649862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206649862" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206649862">(Aug 12 2020 at 01:03)</a>:</h4>
<p>or you could do an Inside Rust post</p>



<a name="206650319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206650319" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206650319">(Aug 12 2020 at 01:11)</a>:</h4>
<p>do you think that's still useful a couple weeks after the fact? I'm happy to write up a post</p>



<a name="206651448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206651448" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206651448">(Aug 12 2020 at 01:35)</a>:</h4>
<p>I think the blog post would make sense.  I feel like it's more reasonable to expect people to see something there than on IRLO, since IRLO can get flooded sometimes.</p>
<p>(I wasn't aware of this, but only rarely change std/rustc, as an anecdotal data point.)</p>



<a name="206651763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206651763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206651763">(Aug 12 2020 at 01:42)</a>:</h4>
<p>sounds good, please ping me if I haven't made a PR by sunday :)</p>



<a name="206652128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206652128" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206652128">(Aug 12 2020 at 01:50)</a>:</h4>
<p>(always ready to ping people <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span> )</p>



<a name="206657191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206657191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206657191">(Aug 12 2020 at 03:41)</a>:</h4>
<p>no ping necessary :) <a href="https://github.com/rust-lang/blog.rust-lang.org/pull/666">https://github.com/rust-lang/blog.rust-lang.org/pull/666</a></p>



<a name="206721682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206721682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206721682">(Aug 12 2020 at 17:04)</a>:</h4>
<p>I don't follow every MCP as most of them do not affect me. But maybe I should?</p>



<a name="206722267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206722267" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206722267">(Aug 12 2020 at 17:09)</a>:</h4>
<p>Yeah I've wondered about that. They are announced in compiler team meetings - I think it's probably good practice to at least look once at all MCPs for people involved with compiler development</p>



<a name="206722608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206722608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206722608">(Aug 12 2020 at 17:12)</a>:</h4>
<p>OTOH this change affects way more than just people that are even loosely affiliated with the compiler team</p>



<a name="206722615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206722615" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206722615">(Aug 12 2020 at 17:12)</a>:</h4>
<p>it affects almost all contributors</p>



<a name="206734871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206734871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206734871">(Aug 12 2020 at 18:50)</a>:</h4>
<p>+1 -- it seems like a good change, but it's also changing the recommended way for people to build the library or the docs locally, which would impact people I certainly wouldn't expect to be watching "compiler".</p>



<a name="206747859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206747859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206747859">(Aug 12 2020 at 20:34)</a>:</h4>
<p>It’s a user-facing change ( for some value of user)</p>



<a name="206822817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206822817" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206822817">(Aug 13 2020 at 14:40)</a>:</h4>
<p>the blog PR is still waiting on review btw - maybe <span class="user-mention" data-user-id="120791">@RalfJ</span> is interested in taking a look?</p>



<a name="206822839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/x.py%20changes%3F/near/206822839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/122651-general/topic/x.2Epy.20changes.3F.html#206822839">(Aug 13 2020 at 14:40)</a>:</h4>
<p><a href="https://github.com/rust-lang/blog.rust-lang.org/pull/666">https://github.com/rust-lang/blog.rust-lang.org/pull/666</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
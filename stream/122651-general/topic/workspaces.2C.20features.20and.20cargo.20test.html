<html>
<head><meta charset="utf-8"><title>workspaces, features and cargo test · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/workspaces.2C.20features.20and.20cargo.20test.html">workspaces, features and cargo test</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="184825751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/workspaces%2C%20features%20and%20cargo%20test/near/184825751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/workspaces.2C.20features.20and.20cargo.20test.html#184825751">(Jan 05 2020 at 00:14)</a>:</h4>
<p>I'm a bit confused about certain behavior, and not sure if I have a mistake or I found a bug. The following all refers to this branch: <a href="https://github.com/Nashenas88/coi/tree/features" target="_blank" title="https://github.com/Nashenas88/coi/tree/features">https://github.com/Nashenas88/coi/tree/features</a> . I have a workspace, and the main crate, coi, has multiple features, one of which causes a feature of a dependency to turn on and off (async feature of coi-derive). I have several crates in my workspace that are used solely to test that my crate's functionality works with all combination of features. Going into each directory and running <code>cargo test</code> works as expected. <a href="https://gist.github.com/Nashenas88/50d7e99e78805ad1a50c239cf6fb2930" target="_blank" title="https://gist.github.com/Nashenas88/50d7e99e78805ad1a50c239cf6fb2930">https://gist.github.com/Nashenas88/50d7e99e78805ad1a50c239cf6fb2930</a> Running <code>cargo test</code> at the root of the workspace does not: <a href="https://travis-ci.org/Nashenas88/coi/jobs/632791155" target="_blank" title="https://travis-ci.org/Nashenas88/coi/jobs/632791155">https://travis-ci.org/Nashenas88/coi/jobs/632791155</a> . Does running <code>cargo test</code> at the workspace root only compile each crate once and then reuse them, ignoring the feature requirements of the other crates? Or is there some detail I'm missing?</p>



<a name="184831713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/workspaces%2C%20features%20and%20cargo%20test/near/184831713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/workspaces.2C.20features.20and.20cargo.20test.html#184831713">(Jan 05 2020 at 03:42)</a>:</h4>
<p>Maybe this is still an unsolved issue? This comment from a while back seems to imply so: <a href="https://github.com/rust-lang/cargo/issues/6195#issuecomment-431613030" target="_blank" title="https://github.com/rust-lang/cargo/issues/6195#issuecomment-431613030">https://github.com/rust-lang/cargo/issues/6195#issuecomment-431613030</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
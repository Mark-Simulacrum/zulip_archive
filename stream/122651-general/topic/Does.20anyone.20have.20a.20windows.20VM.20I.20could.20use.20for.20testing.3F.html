<html>
<head><meta charset="utf-8"><title>Does anyone have a windows VM I could use for testing? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html">Does anyone have a windows VM I could use for testing?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252915289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252915289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252915289">(Sep 11 2021 at 15:07)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/87073">https://github.com/rust-lang/rust/pull/87073</a> has been repeatedly failing only on windows, and I don't have a way to test it locally. Does anyone have a VM they don't mind me having access to? It doesn't have to be super fast, it's just that my laptop only has 8 GB RAM which is not nearly enough to build rustc while also running a VM.</p>



<a name="252916987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252916987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252916987">(Sep 11 2021 at 15:35)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> I don't have a VM for you to use, but I might suggest using <code>// no-prefer-dynamic</code></p>



<a name="252916993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252916993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252916993">(Sep 11 2021 at 15:35)</a>:</h4>
<p>By default, dependencies are built as dylibs</p>



<a name="252917007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917007">(Sep 11 2021 at 15:35)</a>:</h4>
<p>And I don't think that works well with <code>#![no_std]</code></p>



<a name="252917035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917035">(Sep 11 2021 at 15:36)</a>:</h4>
<p>Right, that was the next thing I was going to try. I wanted a way to test it without having to wait for the bors queue again</p>



<a name="252917071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917071">(Sep 11 2021 at 15:36)</a>:</h4>
<p>Ah.  I can test it locally if you want, I have a pretty fast machine.</p>



<a name="252917094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917094">(Sep 11 2021 at 15:37)</a>:</h4>
<p>modifying the CI script to run the windows tests might work.</p>



<a name="252917183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917183">(Sep 11 2021 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> that would be great, thank you!</p>



<a name="252917206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917206">(Sep 11 2021 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="330154">@The 8472</span> do you happen to know how to do that?src/ci is pretty intimidating <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="252917423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917423">(Sep 11 2021 at 15:42)</a>:</h4>
<p>It's <code>src/ci/github/ci.yml</code> and copy the job from the <code>auto</code> section to the <code>pr</code> section. <a href="https://github.com/rust-lang/rust/blob/master/src/ci/github-actions/ci.yml#L279-L299">https://github.com/rust-lang/rust/blob/master/src/ci/github-actions/ci.yml#L279-L299</a><br>
And then run <code>./x.py run src/tools/expand-yaml-anchors</code> and push the generated <code>.github/workflows/ci.yml</code></p>



<a name="252917680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252917680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252917680">(Sep 11 2021 at 15:46)</a>:</h4>
<p>I know this works for running other linux CI jobs that don't normally run in PRs. I'm not 100% sure if this works for windows ones.</p>



<a name="252919076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252919076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252919076">(Sep 11 2021 at 16:11)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> Adding this to <code>auxiliary/issue-15318.rs</code> worked for me:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// no-prefer-dynamic</span>
<span class="cp">#![crate_type = </span><span class="s">"rlib"</span><span class="cp">]</span><span class="w"></span>
</code></pre></div>
<p>And yea, you can also add windows/macos jobs to the PR section, it doesn't matter there.</p>



<a name="252919091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252919091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252919091">(Sep 11 2021 at 16:11)</a>:</h4>
<p>Thanks for checking! isn't rlib the default?</p>



<a name="252919149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252919149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252919149">(Sep 11 2021 at 16:12)</a>:</h4>
<p>No, bin is the default.</p>



<a name="252919157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Does%20anyone%20have%20a%20windows%20VM%20I%20could%20use%20for%20testing%3F/near/252919157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Does.20anyone.20have.20a.20windows.20VM.20I.20could.20use.20for.20testing.3F.html#252919157">(Sep 11 2021 at 16:12)</a>:</h4>
<p>(with <code>no-prefer-dynamic</code>)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Beginner: Associated type question · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html">Beginner: Associated type question</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="248826826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Beginner%3A%20Associated%20type%20question/near/248826826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ilya Kamenshchikov <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html#248826826">(Aug 09 2021 at 10:16)</a>:</h4>
<p>Hello!</p>



<a name="248826967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Beginner%3A%20Associated%20type%20question/near/248826967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ilya Kamenshchikov <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html#248826967">(Aug 09 2021 at 10:18)</a>:</h4>
<p>This code is breaking for me:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Problem</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">S</span><span class="p">;</span><span class="w"> </span><span class="c1">//Solution</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">score</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">solution</span>: <span class="nc">Self</span>::<span class="n">S</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f32</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="k">trait</span><span class="w"> </span><span class="n">BlackboxOptimizer</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">P</span>: <span class="nc">Problem</span><span class="p">;</span><span class="w"> </span><span class="c1">//Problem</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">get_problem</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">P</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">best_solution</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">P</span>::<span class="n">S</span><span class="p">;</span><span class="w">  </span><span class="c1">// Breaks here: S not found in Self::P</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">best_score</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f32</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">get_problem</span><span class="p">().</span><span class="n">score</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">best_solution</span><span class="p">())</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>My logic is that, since P has trait bound "Problem", I should be able to access associated type S from P</p>



<a name="248827840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Beginner%3A%20Associated%20type%20question/near/248827840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html#248827840">(Aug 09 2021 at 10:30)</a>:</h4>
<p>this works</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Problem</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">S</span><span class="p">;</span><span class="w"> </span><span class="c1">//Solution</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">score</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">solution</span>: <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">S</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f32</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="k">trait</span><span class="w"> </span><span class="n">BlackboxOptimizer</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">P</span>: <span class="nc">Problem</span><span class="p">;</span><span class="w"> </span><span class="c1">//Problem</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">get_problem</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">P</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">best_solution</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="o">&lt;</span><span class="bp">Self</span>::<span class="n">P</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Problem</span><span class="o">&gt;</span>::<span class="n">S</span><span class="p">;</span><span class="w">  </span><span class="c1">// Breaks here: S not found in Self::P</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">best_score</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">f32</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">get_problem</span><span class="p">().</span><span class="n">score</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">best_solution</span><span class="p">())</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="248828115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Beginner%3A%20Associated%20type%20question/near/248828115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html#248828115">(Aug 09 2021 at 10:33)</a>:</h4>
<p>iirc the reason that <code>Type::Assoc1::Assoc2</code> does not work but instead needs <code>&lt;Type::Assoc1 as Trait&gt;::Assoc2</code> is that we (currently) figure out which trait an associated type belongs to during name resolution, which happens quite early during compilation. That means that we can't yet reason about which traits are implemented and so on without some hacks.</p>
<p>So even though <code>Assoc2</code> might be unambiguous we still require explicit annotations by the user</p>



<a name="248828665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Beginner%3A%20Associated%20type%20question/near/248828665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ilya Kamenshchikov <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html#248828665">(Aug 09 2021 at 10:40)</a>:</h4>
<p>Got it, many thanks!! I'll publish your explanation on SO for google to cache this answer ;) let me know if you are not OK with publishing it. <a href="https://stackoverflow.com/questions/68710642/cant-access-an-associated-type/68710643#68710643">https://stackoverflow.com/questions/68710642/cant-access-an-associated-type/68710643#68710643</a></p>



<a name="248828779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Beginner%3A%20Associated%20type%20question/near/248828779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html#248828779">(Aug 09 2021 at 10:42)</a>:</h4>
<p>sure <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> go ahead</p>
<p>wrt your answer: <code>&lt;Self::X as B&gt;::A</code> does also work, fully qualified syntax should only be needed starting with the second associated type in a row</p>



<a name="248863311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Beginner%3A%20Associated%20type%20question/near/248863311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question.html#248863311">(Aug 09 2021 at 15:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="377928">Ilya Kamenshchikov</span> <a href="#narrow/stream/122651-general/topic/Beginner.3A.20Associated.20type.20question/near/248828665">said</a>:</p>
<blockquote>
<p>Got it, many thanks!! I'll publish your explanation on SO for google to cache this answer ;) let me know if you are not OK with publishing it. <a href="https://stackoverflow.com/questions/68710642/cant-access-an-associated-type/68710643#68710643">https://stackoverflow.com/questions/68710642/cant-access-an-associated-type/68710643#68710643</a></p>
</blockquote>
<p>Dupe: <a href="https://stackoverflow.com/questions/66226345/why-are-nested-associated-type-paths-considered-ambiguous">https://stackoverflow.com/questions/66226345/why-are-nested-associated-type-paths-considered-ambiguous</a> <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
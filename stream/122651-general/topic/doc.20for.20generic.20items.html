<html>
<head><meta charset="utf-8"><title>doc for generic items · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/doc.20for.20generic.20items.html">doc for generic items</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="263533010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/doc%20for%20generic%20items/near/263533010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank King <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/doc.20for.20generic.20items.html#263533010">(Dec 03 2021 at 03:54)</a>:</h4>
<p>Hi folks, I'm using const generics, and try to add docs for the const generic param, like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Foo</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// Some doc</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span>
<span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>But problems are that <code>cargo doc</code>does not display the doc for <code>N</code> in <code>Foo</code>.</p>
<p>And the wrose thing is, when I use rustfmt to format the code, it becomes</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Foo</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// Some doc</span>
<span class="w">    </span><span class="sd">/// Some doc const N: usize</span>
<span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>which is really weird. </p>
<p>I think this issue is related to rustdoc, const generics, and rustfmt, so I cannot select a specific zulip stream to talk about this, and thus I opened a topic in <a class="stream" data-stream-id="122651" href="/#narrow/stream/122651-general">#general</a> .</p>



<a name="263534072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/doc%20for%20generic%20items/near/263534072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/doc.20for.20generic.20items.html#263534072">(Dec 03 2021 at 04:14)</a>:</h4>
<p>Docs are currently ignored on generic (type, lifetime, or const) parameters. It's a bug that there's no warning, but funnily enough it was fixed just a few days ago. So your example (on nightly) now emits this warning:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">warning</span>: <span class="nc">unused</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="n">comment</span><span class="w"></span>
<span class="w"> </span><span class="o">-</span>-&gt; <span class="nc">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">2</span>:<span class="mi">5</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="sd">/// Some doc</span>
<span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">^^^^^^^^^^^^</span><span class="w"></span>
<span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span>
  <span class="o">|</span><span class="w">          </span><span class="o">-</span><span class="w"> </span><span class="n">rustdoc</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">generic</span><span class="w"> </span><span class="n">parameters</span><span class="w"></span>
<span class="w">  </span><span class="o">|</span><span class="w"></span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">note</span>: <span class="err">`</span><span class="cp">#[warn(unused_doc_comments)]</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="w"></span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">use</span><span class="w"> </span><span class="err">`</span><span class="c1">//` for a plain comment</span>
</code></pre></div>



<a name="263534104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/doc%20for%20generic%20items/near/263534104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/doc.20for.20generic.20items.html#263534104">(Dec 03 2021 at 04:15)</a>:</h4>
<p>However, the rustfmt behavior seems like a bug. I suggest opening an issue at rust-lang/rustfmt on GitHub.</p>



<a name="263534227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/doc%20for%20generic%20items/near/263534227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank King <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/doc.20for.20generic.20items.html#263534227">(Dec 03 2021 at 04:17)</a>:</h4>
<p>Thanks! I will open a bug later.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
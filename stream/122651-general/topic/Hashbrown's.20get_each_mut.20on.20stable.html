<html>
<head><meta charset="utf-8"><title>Hashbrown&#x27;s get_each_mut on stable · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html">Hashbrown&#x27;s get_each_mut on stable</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251426865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251426865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251426865">(Aug 31 2021 at 17:52)</a>:</h4>
<p>(a) Where's a good place to talk about this?<br>
(b) Hashbrown's <a href="https://docs.rs/hashbrown/0.11.2/hashbrown/struct.HashMap.html#method.get_each_mut"><code>get_each_mut</code></a> is behind the <code>nightly</code> flag, but it seems like that should work on stable Rust now that <code>min_const_generics</code> are stable. Would it be possible to split that out of the nightly feature flag and into its own?</p>



<a name="251432144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251432144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251432144">(Aug 31 2021 at 18:23)</a>:</h4>
<p>You might want to take a look at <a href="https://github.com/rust-lang/rust/issues/83608">#83608</a> doing the same for slices, there was some discussion around sorting to ensure the uniqueness of keys.</p>



<a name="251441683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251441683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251441683">(Aug 31 2021 at 19:18)</a>:</h4>
<p>That seems like a useful thing for the hashbrown maintainers to look at to decide on what API they want, but I'm asking a slightly different thing, which is just decoupling the current implementation from the nightly flag. It could still be under a _different_ flag.</p>
<p>Not sure how hashbrown treats feature flags / semver intersection</p>



<a name="251466587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251466587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251466587">(Aug 31 2021 at 21:54)</a>:</h4>
<blockquote>
<p>(a) Where's a good place to talk about this?</p>
</blockquote>
<p>I don't know for sure, but you could try <a class="stream" data-stream-id="219381" href="/#narrow/stream/219381-t-libs">#t-libs</a> since IIUC it's a rust-lang crate.</p>



<a name="251605831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251605831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251605831">(Sep 01 2021 at 18:22)</a>:</h4>
<p>hashbrown will most likely switch to the API in <a href="https://github.com/rust-lang/rust/issues/83608">#83608</a> instead of the current <code>get_each_mut</code>.</p>



<a name="251607631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251607631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251607631">(Sep 01 2021 at 18:34)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> thanks! But, again, that's not quite my question: I want access to it on stable.</p>



<a name="251610192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610192">(Sep 01 2021 at 18:51)</a>:</h4>
<p>I'd be happy to accept a PR which changes the API to match <code>get_many_mut</code>, after which I can publish a new major version of hashbrown which has this API available on stable.</p>



<a name="251610269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610269">(Sep 01 2021 at 18:52)</a>:</h4>
<p>The reason for the nightly flag is that const generics were still unstable at the time the feature was added.</p>



<a name="251610546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610546">(Sep 01 2021 at 18:54)</a>:</h4>
<p>Certainly, I get that. That's why I said "should work on stable Rust now that <code>min_const_generics</code> are stable"</p>



<a name="251610593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610593">(Sep 01 2021 at 18:54)</a>:</h4>
<p>but that needs to consider MSRV as well</p>



<a name="251610626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610626">(Sep 01 2021 at 18:54)</a>:</h4>
<p>It sounds like you are saying that this Hashbrown function will not become available on stable until a new major version that also include the proposed API change.</p>



<a name="251610704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610704" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610704">(Sep 01 2021 at 18:55)</a>:</h4>
<p>(IMO a dedicated feature flag could have higher MSRV though)</p>



<a name="251610756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610756">(Sep 01 2021 at 18:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/122651-general/topic/Hashbrown's.20get_each_mut.20on.20stable/near/251610593">said</a>:</p>
<blockquote>
<p>but that needs to consider MSRV as well</p>
</blockquote>
<p>Absolutely, but the MSRV policy isn't listed in the README or anywhere immediately obvious to me in the repo.</p>



<a name="251610988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251610988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251610988">(Sep 01 2021 at 18:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/122651-general/topic/Hashbrown's.20get_each_mut.20on.20stable/near/251610704">said</a>:</p>
<blockquote>
<p>(IMO a dedicated feature flag could have higher MSRV though)</p>
</blockquote>
<p>Yep, that's what I meant by "split that out of the nightly feature flag and into its own".</p>



<a name="251611016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251611016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251611016">(Sep 01 2021 at 18:57)</a>:</h4>
<p>there's a badge at the top of the README, and a statement in the change log, but I don't know about a policy for updating that</p>



<a name="251611190"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251611190" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251611190">(Sep 01 2021 at 18:58)</a>:</h4>
<p>So there is. Unfortunately it doesn't say that it's the minimum version or get found searching for MSRV, so I did not see it.</p>



<a name="251611555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Hashbrown%27s%20get_each_mut%20on%20stable/near/251611555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Hashbrown&#x27;s.20get_each_mut.20on.20stable.html#251611555">(Sep 01 2021 at 19:00)</a>:</h4>
<p>It's sort of implied by the Rust versions checked in CI, but you're right, it should be properly documented.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
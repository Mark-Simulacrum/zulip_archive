<html>
<head><meta charset="utf-8"><title>Can the module system be changed? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html">Can the module system be changed?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264304996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264304996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arun Kumar <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264304996">(Dec 09 2021 at 14:01)</a>:</h4>
<p>Is it possible for the development  team to change the module system? The current module system isn't very intuitive and is a bad programming paradigm.</p>



<a name="264306597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264306597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264306597">(Dec 09 2021 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="459117">@Arun Kumar</span> what concrete changes would make it easier to learn or use? It's not <em>impossible</em> to change but it's a very large task, it has to wait for an edition and it gives an impression of instability because people have to learn the new system.</p>



<a name="264306867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264306867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arun Kumar <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264306867">(Dec 09 2021 at 14:14)</a>:</h4>
<p>implement the module system as a key value pair. Where key is the module name with which we can access with respect to crate. Th key should be the module name and value should be the path to the file.</p>
<p>Under the hood we should be process this key-value pair to build  the file into <br>
 modules</p>



<a name="264307141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264307141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264307141">(Dec 09 2021 at 14:16)</a>:</h4>
<p>You mean, making <code>#[path = "..."]</code> mandatory? That seems a lot of boilerplate - you can already use it today if you find the current system confusing</p>



<a name="264307262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264307262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arun Kumar <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264307262">(Dec 09 2021 at 14:17)</a>:</h4>
<div class="codehilite"><pre><span></span><code>[
{name: &quot;my_module1&quot;, path:&quot;/path/to/thefile1&quot;},
{name: &quot;my_module2&quot;, path:&quot;/path/to/thefile2&quot;}
{name: &quot;my_module3&quot;, path:&quot;/path/to/thefile3&quot;}
]
</code></pre></div>
<p>use the above description to build the modules and we access the those modules using the <code>  use crate::my_module1::my_function</code> syntax</p>



<a name="264307472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264307472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arun Kumar <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264307472">(Dec 09 2021 at 14:19)</a>:</h4>
<p>or we declare the module definition in cargo.toml file and during build time it auto builds based on that definition in the cargo.toml file</p>



<a name="264307712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264307712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arun Kumar <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264307712">(Dec 09 2021 at 14:21)</a>:</h4>
<p>Do away with the mod key word. File is anyway the right abstraction for modules.</p>



<a name="264307799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264307799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264307799">(Dec 09 2021 at 14:21)</a>:</h4>
<p>Yeah, that's too large a change to reasonably be made</p>



<a name="264308919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264308919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264308919">(Dec 09 2021 at 14:29)</a>:</h4>
<p>Keep in mind that what seems like the "obvious right abstraction" to you, might be  less obvious for other users of the language. There are scenarios like macro- or build script-generated modules, which might be harder to achieve with your approach. Also, listing every file in <code>Cargo.toml</code>, or potentially having <code>mod b</code> in <code>a.rs</code> and <code>mod a</code> in <code>b.rs</code> is not great.</p>



<a name="264309106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264309106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264309106">(Dec 09 2021 at 14:30)</a>:</h4>
<p>But crates work similarly to what you're proposing (at a different granularity, of course), so maybe you actually want a Cargo workspace.</p>



<a name="264310799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264310799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arun Kumar <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264310799">(Dec 09 2021 at 14:42)</a>:</h4>
<p>Let me check Cargo workspace</p>



<a name="264332320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264332320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264332320">(Dec 09 2021 at 17:06)</a>:</h4>
<p>Why do you think the current state is a bad programming paradigm?</p>



<a name="264336792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264336792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264336792">(Dec 09 2021 at 17:34)</a>:</h4>
<blockquote>
<p>Do away with the mod key word.</p>
</blockquote>
<p>This breaks stability guarantees so it's a non-starter.</p>
<blockquote>
<p>File is anyway the right abstraction for modules.</p>
</blockquote>
<p>As someone who has written a fair amount of Rust, I disagree.</p>



<a name="264337052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264337052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264337052">(Dec 09 2021 at 17:36)</a>:</h4>
<p>It's the other way around. Modules are an abstraction that happens to also enable using external files easily.</p>



<a name="264353226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264353226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264353226">(Dec 09 2021 at 19:23)</a>:</h4>
<p><span class="user-mention" data-user-id="459117">@Arun Kumar</span> The module system was tweaked for the 2018 edition.  More changes are not impossible, but before proposing any concrete changes I'd suggest that you read the history of that.  Many things were discussed, including the possibility of having <code>foo.rs</code> get compiled even without <code>mod foo;</code>.  So unless the material facts have changed, I don't see a different outcome as likely.</p>



<a name="264353420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264353420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264353420">(Dec 09 2021 at 19:25)</a>:</h4>
<p>From a Rust teacher's perspective, the module system _is_ divisive. 50% of people have no major issues with it, 50% do. It's a matter of how your brain is structured.</p>
<p>My hypothesis is that it's all about which language(s) you learned "module systems" with first.</p>



<a name="264353529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264353529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264353529">(Dec 09 2021 at 19:26)</a>:</h4>
<p>so for every person who hates it, there's another that enjoys (or at least tolerates) it. I count myself in that group.</p>



<a name="264353544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264353544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264353544">(Dec 09 2021 at 19:26)</a>:</h4>
<p>I had trouble with modules at first because I didn't realize <code>mod</code> and <code>use</code> did different things</p>



<a name="264353554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264353554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264353554">(Dec 09 2021 at 19:26)</a>:</h4>
<p>once I figured that out it wasn't too hard</p>



<a name="264354581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264354581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264354581">(Dec 09 2021 at 19:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116155">Jake Goulding</span> <a href="#narrow/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F/near/264353420">said</a>:</p>
<blockquote>
<p>My hypothesis is that it's all about which language(s) you learned "module systems" with first.</p>
</blockquote>
<p>Interesting. Personally my experience is that it depends on which problem you're trying to solve first. If it's "I want to modularize my API" then you'll do well, if it's "my file's getting too big" you might be in for disappointment</p>



<a name="264356534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264356534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264356534">(Dec 09 2021 at 19:49)</a>:</h4>
<p>Yeah, if someone's been taught "different types go in different files" in previous languages, they're unlikely to intuit the <code>mod foo; pub use foo::*;</code> dance.</p>
<p>Whereas if you show up trying to introduce privacy boundaries, you'll be pretty happy with it.</p>



<a name="264362959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264362959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264362959">(Dec 09 2021 at 20:39)</a>:</h4>
<p>The only time i care about modules is when the file gets too big and the module system of rust suits me perfectly so I'm not sure I follow you <span class="user-mention" data-user-id="310518">@Jake</span></p>



<a name="264365970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264365970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264365970">(Dec 09 2021 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116155">Jake Goulding</span> <a href="#narrow/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F/near/264353420">said</a>:</p>
<blockquote>
<p>From a Rust teacher's perspective, the module system _is_ divisive. 50% of people have no major issues with it, 50% do. It's a matter of how your brain is structured.</p>
<p>My hypothesis is that it's all about which language(s) you learned "module systems" with first.</p>
</blockquote>
<p>Yeah, this is why I tried to underscore that I feel Rust's system is somewhat better for the problems Rust aims to solve, and... prooobably less great for a lot of other things.</p>
<p>imo it feels intuitive <strong>enough</strong> to me now, but I do remember fighting with it for a week until I was able to slot it in. But I come from a... highly... uh... <strong>unstructured</strong> language (YavaScript... we got both ESM and CJS, and tbh both have fairly weirdly specific and verbose exports/imports too, tbh).</p>



<a name="264366287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264366287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264366287">(Dec 09 2021 at 21:06)</a>:</h4>
<p>Once I realized that the <code>mod</code> and <code>use</code> dance  is like perfectly designed for composing with attributes like <code>#[cfg]</code> and thus having a bunch of conditionally compiled modules in a file, and thus slots <strong>very</strong> nicely in where a bunch of C's ifdefs would go, it suddenly made sense.</p>



<a name="264370067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264370067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264370067">(Dec 09 2021 at 21:36)</a>:</h4>
<p>I do <em>personally</em> think we might be better off if Rust just automatically picked up all <code>.rs</code> files as modules without requiring <code>mod</code>, at the expense of making it a little more complex to do complex <code>cfg</code> dances around modules. But I also think I'm hesitant to have more churn in this area.</p>



<a name="264371219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264371219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264371219">(Dec 09 2021 at 21:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F/near/264362959">said</a>:</p>
<blockquote>
<p>The only time i care about modules is when the file gets too big and the module system of rust suits me perfectly so I'm not sure I follow you <span class="user-mention silent" data-user-id="310518">Jake</span></p>
</blockquote>
<p>I don't mean to imply that the module system does a bad job of this, it's perfectly up to the task, what I mean instead is that it's design is clearly not primarily designed as a solution to this problem.</p>
<p>For example, say someone just wants to split their one source file up into two: They now have to do three different things, depending on where they are. In <code>mymod.rs</code> they have to put <code>mod submod;</code> and <code>use submod::*;</code>, in <code>submod.rs</code> they have to do nothing, and everywhere else they need to do <code>use mymod::*;</code> (or some variations of this, but you get the point). This is cofusing and complicated at first because its not really clear how the solution maps naturally to the problem, but once you realize that actually you're just defining a namespace, everything is sort of obvious. On the other hand, if you actually walk in going "hey, I want to namespace a part of my API" the solution is a super easy: "put things behind a <code>mod</code>".</p>
<p>Other languages do this differently. For example, in C, if you go "hey, I'd like to split my file into two." The solution is to write a header file, and then <code>#include</code> it everywhere you need it. This is much more "uniform" a solution for this problem than Rust's. On the other hand, if you want to namespace stuff, uhhh... good luck with that.</p>
<p>Now of course <span class="user-mention" data-user-id="116155">@Jake Goulding</span> could just be right, that this is basically equivalent to a language difference, ie the problem you run into is the one you're used to solving in the language you come from</p>



<a name="264371880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264371880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264371880">(Dec 09 2021 at 21:50)</a>:</h4>
<p>Well, if all you wanted is to split the source file you could use <code>include!()</code> <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span></p>



<a name="264373415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264373415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264373415">(Dec 09 2021 at 22:02)</a>:</h4>
<p>So what I do is:</p>
<ul>
<li>cut out a portion of <code>mymod.rs</code>, put that into <code>submod.rs</code></li>
<li>also put <code>use super::*;</code> in <code>submod.rs</code></li>
<li>add <code>mod submod; pub use submod::*;</code> to <code>mymod.rs</code>.</li>
</ul>
<p>and the rest of the world doesn't notice the difference at all.</p>
<p>which isn't to say i never use modules for other reasons, such as the occasional feature gates and rustdoc organization, but in terms of keeping files from getting too large the workflow is quite quick and painless.</p>
<p>though, yeah, it's non-obvious to learn this the first time you learn it. but you can put it in a book or whatever and people can just learn the trick.</p>



<a name="264373620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264373620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Khionu Sybiern <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264373620">(Dec 09 2021 at 22:03)</a>:</h4>
<p>Maybe this could be put in Rust by Example</p>



<a name="264373674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264373674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Khionu Sybiern <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264373674">(Dec 09 2021 at 22:03)</a>:</h4>
<p>I also had to figure out this pattern</p>



<a name="264374341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264374341" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264374341">(Dec 09 2021 at 22:08)</a>:</h4>
<p>When making a sub-module like this, it's sometimes desirable to make the sub-module be pub, but in that case you generally still <em>also</em> have the <code>use</code> globs. The fact that the sub-module is pub changes how the rustdoc renders the content though so you can (sometimes) get cleaner docs with a public module.</p>



<a name="264374451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264374451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264374451">(Dec 09 2021 at 22:09)</a>:</h4>
<p>But i like very flat crate organization. I would certainly never in my life have designed <code>alloc::alloc::alloc</code> ;3c</p>



<a name="264375574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264375574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264375574">(Dec 09 2021 at 22:18)</a>:</h4>
<p>While we are in the anecdotal realm, I want to point out that the module system felt very natural to me. One thing I've noticed for some people is that many examples in the book use inline modules for self-contained examples, but truth be told, and especially for people coming from other languages, inline modules can be surprising.</p>
<p>So maybe start with clear examples with only <code>;</code>-modules, and once that has sunk in, explain that one can even just inline those in some cases. The completely opposite teaching strategy is to only start with inline modules, and then say that <code>mod name;</code> is <code>mod name { include!("name.rs" or "name/mod.rs"); }</code>.</p>
<p>Also, I think I've never had to deal with / or encountered a <code>;</code>-module <em>inside</em> an inline module: that could indeed be confusing.</p>



<a name="264375612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264375612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264375612">(Dec 09 2021 at 22:19)</a>:</h4>
<p>Finally, and after some thought, I realize one thing: for the namespace / fs parallelism tobe <strong>consistent</strong> I find that only picking <code>name/mod.rs</code> files (no <code>name.rs</code> shorthand), when starting, could help quite a lot!</p>



<a name="264375628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264375628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264375628">(Dec 09 2021 at 22:19)</a>:</h4>
<p>(and have <code>lib.rs</code> be named <code>mod.rs</code> as well)</p>



<a name="264375883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264375883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264375883">(Dec 09 2021 at 22:21)</a>:</h4>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>src/
  mod.rs  <span class="c1"># items at the root of the crate (`crate::*`) since matched by `src/*` blob</span>
  foo/ <span class="c1"># the foo namespace</span>
    mod.rs  <span class="c1"># items at `crate::foo::*` since file matched by `src/foo/*` blob</span>
    bar/ <span class="c1"># the bar namespace</span>
      mod.rs  <span class="c1"># items at `crate::foo::bar::*` since file matched by `src/foo/bar/*` blob</span>
</code></pre></div>



<a name="264377304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264377304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Denton <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264377304">(Dec 09 2021 at 22:34)</a>:</h4>
<p>On that note, a little while ago <a href="https://github.com/rust-lang/rust/commit/fc0fd9ae5d6d0c31393b773e6b36cc01cb87ccc7">I made this</a>. Mostly as a joke. Understanding it requires you to know that Windows NTFS filesystem allows adding data to directory files. So you can have a "<a href="http://foo.rs">foo.rs</a>" that's both a source file and a directory containing other source files. I thought it was a natural fit for Rust <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>. But obviously I'm not seriously proposing it.</p>



<a name="264378802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264378802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264378802">(Dec 09 2021 at 22:47)</a>:</h4>
<p><span class="user-mention" data-user-id="260325">@Chris Denton</span> That's great. :)</p>



<a name="264379415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264379415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264379415">(Dec 09 2021 at 22:54)</a>:</h4>
<p>Given that the module system was reworked once and opinions are still divided about whether that was a good thing, I'd be <em>very</em> wary about changing it again <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="264379447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264379447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264379447">(Dec 09 2021 at 22:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260325">Chris Denton</span> <a href="#narrow/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F/near/264377304">said</a>:</p>
<blockquote>
<p>On that note, a little while ago <a href="https://github.com/rust-lang/rust/commit/fc0fd9ae5d6d0c31393b773e6b36cc01cb87ccc7">I made this</a>. Mostly as a joke. Understanding it requires you to know that Windows NTFS filesystem allows adding data to directory files. So you can have a "<a href="http://foo.rs">foo.rs</a>" that's both a source file and a directory containing other source files. I thought it was a natural fit for Rust <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>. But obviously I'm not seriously proposing it.</p>
</blockquote>
<p>This is simultaneously amazing and horrifying.</p>



<a name="264439006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264439006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264439006">(Dec 10 2021 at 12:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260325">Chris Denton</span> <a href="#narrow/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F/near/264377304">said</a>:</p>
<blockquote>
<p>On that note, a little while ago <a href="https://github.com/rust-lang/rust/commit/fc0fd9ae5d6d0c31393b773e6b36cc01cb87ccc7">I made this</a>. Mostly as a joke. Understanding it requires you to know that Windows NTFS filesystem allows adding data to directory files. So you can have a "<a href="http://foo.rs">foo.rs</a>" that's both a source file and a directory containing other source files. I thought it was a natural fit for Rust <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>. But obviously I'm not seriously proposing it.</p>
</blockquote>
<p><span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> More like Windows FFS filesystem</p>



<a name="264468293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264468293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264468293">(Dec 10 2021 at 16:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260325">Chris Denton</span> <a href="#narrow/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F/near/264377304">said</a>:</p>
<blockquote>
<p>On that note, a little while ago <a href="https://github.com/rust-lang/rust/commit/fc0fd9ae5d6d0c31393b773e6b36cc01cb87ccc7">I made this</a>.</p>
</blockquote>
<p>Are those Alternate Data Streams? Nice!</p>



<a name="264469020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469020">(Dec 10 2021 at 16:10)</a>:</h4>
<p>Ah, you could do something like that with xattrs under various unixes too. But not all of them, so not a cross-platform solution yet.</p>



<a name="264469083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469083">(Dec 10 2021 at 16:11)</a>:</h4>
<p>And xattrs have a much lower size limit, don't they?</p>



<a name="264469207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469207">(Dec 10 2021 at 16:11)</a>:</h4>
<p>64k ought to be enough for anybody</p>



<a name="264469379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469379">(Dec 10 2021 at 16:12)</a>:</h4>
<p>If not, you can just split your source code file into multiple and ... oh no we've come full circle</p>



<a name="264469619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469619">(Dec 10 2021 at 16:14)</a>:</h4>
<p>You could chain multiple attributes</p>



<a name="264469651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469651">(Dec 10 2021 at 16:14)</a>:</h4>
<p>Paginated source format, not the same as modules.</p>



<a name="264469686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469686">(Dec 10 2021 at 16:14)</a>:</h4>
<p>Just split it into submodules, they'll be different files with their own xattrs</p>



<a name="264469821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469821">(Dec 10 2021 at 16:15)</a>:</h4>
<p>but those are different scopes, which we wanted to avoid</p>



<a name="264469884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Can%20the%20module%20system%20be%20changed%3F/near/264469884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Can.20the.20module.20system.20be.20changed.3F.html#264469884">(Dec 10 2021 at 16:16)</a>:</h4>
<p>so clearly pagination within a single scope is the correct solution</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
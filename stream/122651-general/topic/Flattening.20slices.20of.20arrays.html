<html>
<head><meta charset="utf-8"><title>Flattening slices of arrays · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/index.html">general</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html">Flattening slices of arrays</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="276746768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276746768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276746768">(Mar 26 2022 at 21:29)</a>:</h4>
<p>I discussed the idea of a <code>flatten</code> method to convert <code>[[T; N]]</code> to <code>[T]</code> on URLO (<a href="https://users.rust-lang.org/t/is-there-t-n-flatten/73350">link</a>). I was interested in proposing/implementing this, and <span class="user-mention" data-user-id="125270">@scottmcm</span> said</p>
<ol>
<li>I could bring it up here if I was interested in more input, which I am</li>
<li>Adding methods to builtin-types such as slices can be hard because of "silly reasons"</li>
</ol>
<p>I am interested in thoughts, (there was discussion of using safe transmute, which is interesting), but I also don't know what weirdness and "silly reasons" there are/may be.</p>



<a name="276746770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276746770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276746770">(Mar 26 2022 at 21:29)</a>:</h4>
<p>(also this is my first time ever using zulip so I really hope I did this right)</p>



<a name="276746998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276746998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276746998">(Mar 26 2022 at 21:33)</a>:</h4>
<p>The idea of having flatten working on <code>[A]</code> where A can be safely transmuted into <code>[T; N]</code> does look good too, but safe transmute is not yet stable, and even if flatten took <code>[[T; N]]</code>, it could be modified to take <code>[A]</code> instead later</p>



<a name="276747445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276747445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276747445">(Mar 26 2022 at 21:44)</a>:</h4>
<p>Yeah, zulip can take a bit to get used to (though I quite like it).  Make sure you've been to the "subscribe to more streams" at the bottom left to find everything -- you might be interested in <a class="stream" data-stream-id="219381" href="/#narrow/stream/219381-t-libs">#t-libs</a> and <a class="stream" data-stream-id="182449" href="/#narrow/stream/182449-t-compiler.2Fhelp">#t-compiler/help</a> , for example.  (But here is probably fine.)</p>
<blockquote>
<p>but I also don't know what weirdness and "silly reasons" there are/may be.</p>
</blockquote>
<p>New <code>impl</code> blocks on slices require new lang items.  You can see an example of how to do that in <span class="user-mention silent" data-user-id="239881">Josh Triplett</span>'s PR here: <a href="https://github.com/rust-lang/rust/pull/93397/files">https://github.com/rust-lang/rust/pull/93397/files</a></p>
<blockquote>
<p>where <code>A</code> can be safely transmuted into <code>[T; N]</code> does look good too</p>
</blockquote>
<p>It has the downside of creating ambiguity, though.  I'd much rather be able to just <code>.flatten()</code> than have to say <code>.flatten::&lt;f32, 4&gt;()</code> because it's <em>safe</em> to also flatten that as <code>.flatten::&lt;u16, 8&gt;()</code> -- that latter is so rarely what I'd actually want that I think full safe transmute isn't actually desirable in such a method.</p>



<a name="276747805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276747805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276747805">(Mar 26 2022 at 21:53)</a>:</h4>
<p>That's a good point, maybe a transmuting-flatten would be better suited for either an external crate, or a dedicated<code>transmute_slice</code>/<code>safe_align_to</code> method</p>



<a name="276747884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276747884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276747884">(Mar 26 2022 at 21:54)</a>:</h4>
<p>Especially since they could easily be combined -- like <code>.safe_transmute::&lt;[u16; 8]&gt;().flatten()</code>.</p>



<a name="276748085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276748085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276748085">(Mar 26 2022 at 21:59)</a>:</h4>
<p>One way to make it <em>slightly</em> more general while still not needing annotation would be to have a no-type-parameter trait to bound on it.  Like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">unsafe</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">CanonicalArrayRepr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Element</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">LEN</span>: <span class="kt">usize</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">unsafe</span><span class="w"> </span><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="n">CanonicalArrayRepr</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">;</span><span class="w"> </span><span class="n">N</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">LEN</span>: <span class="kt">usize</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Which would also be convenient since then you wouldn't need the new <code>lang_item</code>s.</p>
<p>But that wouldn't actually be more general unless the trait were <code>pub</code>lic, and I don't know whether the library team would want such a thing -- <code>core</code> is quite conservative around traits.</p>



<a name="276748733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276748733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276748733">(Mar 26 2022 at 22:12)</a>:</h4>
<p>I think the direct <code>[[T; N]]</code> to <code>[T]</code> is the best option. It does just one thing which is easy to understand, and isn't too overloaded with features. To me, flattening a slice and converting <code>[Color]</code> -&gt; <code>[u8]</code> feel like logically distinct operations.</p>



<a name="276748751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/276748751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#276748751">(Mar 26 2022 at 22:13)</a>:</h4>
<p>(given <code>#[repr(C)] Color { r: u8, g: u8, b: u8 }</code>)</p>



<a name="277467846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277467846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277467846">(Apr 01 2022 at 19:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/122651-general/topic/Flattening.20slices.20of.20arrays/near/276747445">said</a>:</p>
<blockquote>
<p>New <code>impl</code> blocks on slices require new lang items. </p>
</blockquote>
<p>That makes sense, but <a href="https://github.com/rust-lang/rust/commit/afbecc0f68c4dcfc4878ba5bcb1ac942544a1bdc">this commit</a> is really confusing me. I can't even find any context for it</p>



<a name="277468337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277468337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277468337">(Apr 01 2022 at 19:37)</a>:</h4>
<p>Context: <a href="https://github.com/rust-lang/rust/commit/bef6f3e895beede5bfd5ba4bb12898615c156d59">https://github.com/rust-lang/rust/commit/bef6f3e895beede5bfd5ba4bb12898615c156d59</a><br>
looks like this was reworked recently</p>



<a name="277468377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277468377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277468377">(Apr 01 2022 at 19:37)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/94963">https://github.com/rust-lang/rust/pull/94963</a></p>



<a name="277468544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277468544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277468544">(Apr 01 2022 at 19:39)</a>:</h4>
<p>thanks!</p>



<a name="277469592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277469592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277469592">(Apr 01 2022 at 19:50)</a>:</h4>
<p>Oh, nice!  That will make things way easier.</p>



<a name="277469990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277469990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277469990">(Apr 01 2022 at 19:54)</a>:</h4>
<p>excuse me while I try to remember how to make a commit without botching the submodules</p>



<a name="277470514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277470514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277470514">(Apr 01 2022 at 19:59)</a>:</h4>
<p>(My suggestion is to never <code>merge</code> in <code>master</code> ever; always <code>rebase</code>.)</p>



<a name="277472049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277472049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277472049">(Apr 01 2022 at 20:12)</a>:</h4>
<p>I haven't even committed anything yet but the submodules are already giving me a hassle</p>



<a name="277472131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277472131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277472131">(Apr 01 2022 at 20:13)</a>:</h4>
<p>there's submodule changes for <code>src/llvm-project</code>, <code>src/tools/cargo</code>, and <code>src/tools/miri</code> but they aren't being fixed by <code>x.py</code></p>



<a name="277472245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277472245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277472245">(Apr 01 2022 at 20:14)</a>:</h4>
<p>on the master branch</p>



<a name="277472345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277472345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277472345">(Apr 01 2022 at 20:15)</a>:</h4>
<p>Did you do a <code>git submodule update</code>? (If not, you may wish to)</p>



<a name="277472406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277472406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277472406">(Apr 01 2022 at 20:16)</a>:</h4>
<p>It may be the case that git says "your submodules should be at revision X" but your on disk is at revision Y.</p>



<a name="277472469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277472469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277472469">(Apr 01 2022 at 20:16)</a>:</h4>
<p>I just tried that and nothing happened (also TIL that command exists :P)</p>



<a name="277472475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277472475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277472475">(Apr 01 2022 at 20:16)</a>:</h4>
<p>I did run out of disk space during a branch change, is it possible that's causing problems?</p>



<a name="277473226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277473226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277473226">(Apr 01 2022 at 20:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/122651-general/topic/Flattening.20slices.20of.20arrays/near/277470514">said</a>:</p>
<blockquote>
<p>(My suggestion is to never <code>merge</code> in <code>master</code> ever; always <code>rebase</code>.)</p>
</blockquote>
<p><del>in <code>master</code></del></p>



<a name="277474452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277474452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277474452">(Apr 01 2022 at 20:34)</a>:</h4>
<p>merges are good. rebases are good. people generally don't want to spend time learning when one should be used over the other.</p>



<a name="277474572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277474572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277474572">(Apr 01 2022 at 20:36)</a>:</h4>
<blockquote>
<p>there's submodule changes</p>
</blockquote>
<p>What do you see, specifically?</p>



<a name="277474659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277474659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277474659">(Apr 01 2022 at 20:37)</a>:</h4>
<p>For example, I just pulled the master branch and I see things like</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
    modified:   src/doc/book (new commits)
    modified:   src/doc/embedded-book (new commits)
</code></pre></div>
<p>After a <code>git submodule update</code>, those lines are gone.</p>



<a name="277478004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277478004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277478004">(Apr 01 2022 at 21:09)</a>:</h4>
<p>oh, sorry, I just re-cloned the repo, so I can't check now</p>



<a name="277480049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277480049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277480049">(Apr 01 2022 at 21:29)</a>:</h4>
<p>Not sure what to do about this</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>error[E0390]: only a single inherent implementation marked with `#[lang = "slice"]` is allowed for the `[T]` primitive
    --&gt; library\core\src\slice\mod.rs:3997:1
     |
3997 | / impl&lt;T, const N: usize&gt; [[T; N]] {
3998 | |     pub fn flatten(&amp;self) -&gt; &amp;[T] {
3999 | |         unsafe {
4000 | |             let len = if crate::mem::size_of::&lt;T&gt;() == 0 {
...    |
4022 | |     }
4023 | | }
     | |_^
     |
     = help: consider using a trait to implement these methods
</code></pre></div>
<p>It's suggesting a trait but I'm too not sure about that</p>



<a name="277480227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277480227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277480227">(Apr 01 2022 at 21:31)</a>:</h4>
<p>Does it need a new lang item anyway..?</p>



<a name="277488855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277488855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277488855">(Apr 01 2022 at 23:05)</a>:</h4>
<p>haha! it works!</p>



<a name="277488858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277488858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277488858">(Apr 01 2022 at 23:05)</a>:</h4>
<p>I did add a new lang item</p>



<a name="277488861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277488861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277488861">(Apr 01 2022 at 23:05)</a>:</h4>
<p>that fixed it</p>



<a name="277494822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277494822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277494822">(Apr 02 2022 at 00:44)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/95579">https://github.com/rust-lang/rust/pull/95579</a></p>



<a name="277495661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277495661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277495661">(Apr 02 2022 at 01:01)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/95579#discussion_r840984849">They're going to need <code>unstable</code> attributes</a>, two questions:</p>
<ol>
<li>Do I need to define the feature anywhere else, or does it just need to go in the attribute?</li>
<li>What issue do I set it to?</li>
</ol>



<a name="277495739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277495739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277495739">(Apr 02 2022 at 01:03)</a>:</h4>
<p>do I need to make a tracking issue for it?</p>



<a name="277495810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277495810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277495810">(Apr 02 2022 at 01:04)</a>:</h4>
<p>Just the attribute is enough.  Here's an example: <a href="https://github.com/rust-lang/rust/pull/95218/files#diff-246941135168fbc44fce120385ee9c3156e08a1c3e2697985b56dcb8d728eedeR1789">https://github.com/rust-lang/rust/pull/95218/files#diff-246941135168fbc44fce120385ee9c3156e08a1c3e2697985b56dcb8d728eedeR1789</a></p>



<a name="277495902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277495902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277495902">(Apr 02 2022 at 01:06)</a>:</h4>
<p>You can make a tracking issue now (it's an option in <a href="https://github.com/rust-lang/rust/issues/new/choose">https://github.com/rust-lang/rust/issues/new/choose</a>) or just leave the number a placeholder -- <a href="https://github.com/scottmcm/rust/commit/f4076dd9edb6a8abe227eb41085c853a173c0490#diff-b5736412f785f181ff3fcd768a2ea5f3bc1c6313af38a0094e5ef49c0e489c4fR190">I use 88888888</a> -- for new pending reviewer feedback, and make the tracking issue later.  Up to you.</p>



<a name="277496024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277496024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277496024">(Apr 02 2022 at 01:08)</a>:</h4>
<p>(If you're curious: for <em>language</em> features it's more complicated, see <a href="https://rustc-dev-guide.rust-lang.org/implementing_new_features.html#stability-in-code">https://rustc-dev-guide.rust-lang.org/implementing_new_features.html#stability-in-code</a>, but for library features just adding it in the attribute suffices.)</p>



<a name="277496035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277496035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277496035">(Apr 02 2022 at 01:08)</a>:</h4>
<p>Thanks :)</p>



<a name="277498211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277498211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277498211">(Apr 02 2022 at 01:48)</a>:</h4>
<p>is it possible to set you as the reviewer? If so, can I, and how do I?</p>



<a name="277498221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277498221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277498221">(Apr 02 2022 at 01:49)</a>:</h4>
<p>err, Assignee*</p>



<a name="277498335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277498335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277498335">(Apr 02 2022 at 01:52)</a>:</h4>
<p><code>r? @scottmcm</code></p>



<a name="277498368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122651-general/topic/Flattening%20slices%20of%20arrays/near/277498368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyborus <a href="https://zulip-archive.rust-lang.org/stream/122651-general/topic/Flattening.20slices.20of.20arrays.html#277498368">(Apr 02 2022 at 01:52)</a>:</h4>
<p>thanks</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>semantically disambiguate impls · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html">semantically disambiguate impls</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267664968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/267664968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#267664968">(Jan 12 2022 at 00:02)</a>:</h4>
<p>Just wanted to note that <span class="user-mention" data-user-id="316352">@pierwill</span> is working on a PR (<a href="https://github.com/rust-lang/rust/issues/92745">#92745</a>) that implements part of <a href="https://github.com/rust-lang/rust/issues/92052">#92052</a>, to semantically disambiguate impl IDs. Please post here, on the PR, or on the issue if you have any feedback or concerns with this change.</p>



<a name="267665049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/267665049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#267665049">(Jan 12 2022 at 00:03)</a>:</h4>
<p>It is somewhat of a breaking change, but in most cases the IDs were already extremely unstable anyway since they were just arbitrary numeric suffixes.</p>



<a name="267665088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/267665088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#267665088">(Jan 12 2022 at 00:03)</a>:</h4>
<p>And all that will break is that links to the old impl IDs will now go to the top of the page.</p>



<a name="267957243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/267957243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#267957243">(Jan 14 2022 at 01:36)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> <span class="user-mention" data-user-id="132040">@Manish Goregaokar</span> <span class="user-mention" data-user-id="315412">@jsha</span> are you all okay with the new anchor formatting? I want to make sure it looks good to you before <span class="user-mention" data-user-id="316352">@pierwill</span> goes to the trouble to update all the links in the stdlib.</p>



<a name="267959418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/267959418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#267959418">(Jan 14 2022 at 02:08)</a>:</h4>
<p>This PR, right? <a href="https://github.com/rust-lang/rust/pull/92745/">https://github.com/rust-lang/rust/pull/92745/</a></p>
<p>Looks great to me.</p>



<a name="267990555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/267990555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#267990555">(Jan 14 2022 at 09:37)</a>:</h4>
<p>Looks good to me as well. I see that we are a few of us that have to update all std doc links <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span></p>



<a name="268021851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268021851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268021851">(Jan 14 2022 at 14:40)</a>:</h4>
<p>Will this break intra docs link? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="268022801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268022801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268022801">(Jan 14 2022 at 14:48)</a>:</h4>
<p>Intra-doc links don't link to impls themselves.</p>



<a name="268034496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268034496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268034496">(Jan 14 2022 at 16:09)</a>:</h4>
<p>28k broken links.</p>



<a name="268034562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268034562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268034562">(Jan 14 2022 at 16:10)</a>:</h4>
<p>Might need to write a tool for this...</p>



<a name="268034724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268034724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268034724">(Jan 14 2022 at 16:11)</a>:</h4>
<div class="codehilite"><pre><span></span><code>errors found: 28853
found some broken links
</code></pre></div>
<p><span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="268035489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268035489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268035489">(Jan 14 2022 at 16:16)</a>:</h4>
<p>Good luck :-.</p>



<a name="268037360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268037360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268037360">(Jan 14 2022 at 16:29)</a>:</h4>
<p>I wonder: can we accept these broken anchors temporarily, and create an epic, breaking the links up into say 50 chunks of 500, and work on them incrementally and enlist volunteers?</p>



<a name="268039149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268039149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268039149">(Jan 14 2022 at 16:41)</a>:</h4>
<p>no</p>



<a name="268039173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268039173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268039173">(Jan 14 2022 at 16:42)</a>:</h4>
<p>because it'd mean broken docs</p>



<a name="268039229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268039229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268039229">(Jan 14 2022 at 16:42)</a>:</h4>
<p>and such things tend to remain for a long time</p>



<a name="268039321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268039321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268039321">(Jan 14 2022 at 16:43)</a>:</h4>
<p>you can write a small python script to go through <code>library/**.rs</code> and check for every line starting with <code>///</code> or <code>//!</code> and check for <code>impl-</code> things</p>



<a name="268039356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268039356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268039356">(Jan 14 2022 at 16:43)</a>:</h4>
<p>so you have most things migrated automatically</p>



<a name="268039379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268039379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268039379">(Jan 14 2022 at 16:43)</a>:</h4>
<p>and after that, I expect around 100 remaining</p>



<a name="268043559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268043559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268043559">(Jan 14 2022 at 17:13)</a>:</h4>
<p>lgtm <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="268045153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268045153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268045153">(Jan 14 2022 at 17:26)</a>:</h4>
<p>Okay! I'll look into a script. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="268045629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268045629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268045629">(Jan 14 2022 at 17:29)</a>:</h4>
<p>oh sorry, my LGTM was a response to Noah above</p>



<a name="268045647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268045647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268045647">(Jan 14 2022 at 17:29)</a>:</h4>
<p>but yeah let's do a script</p>



<a name="268055172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268055172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268055172">(Jan 14 2022 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> how would this python script figure out what the _new_ target is?</p>
<p>I'm surprised there is so much breakage in the std lib. That suggests there is more direct linking to impls than I previously thought. Could we see a sample of some of them?</p>



<a name="268055300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268055300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268055300">(Jan 14 2022 at 18:46)</a>:</h4>
<p>Another possibility to spread out the breakage: We can have JS handle it. In other words, if it sees a fragment <code>#impl-9</code>, it looks through the DOM for elements starting with <code>#impl-</code>, and picks the 9th one. We wouldn't want to keep it around forever, but it would allow us to do fixups gradually.</p>



<a name="268062941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268062941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268062941">(Jan 14 2022 at 19:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315412">jsha</span> <a href="#narrow/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls/near/268055172">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> how would this python script figure out what the _new_ target is?</p>
<p>I'm surprised there is so much breakage in the std lib. That suggests there is more direct linking to impls than I previously thought. Could we see a sample of some of them?</p>
</blockquote>
<p>We can make the script a bit smarter and look at the DOM like how the URL checker is doing. There aren't that many <code>impl-*</code> IDs in the DOM</p>



<a name="268063009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268063009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268063009">(Jan 14 2022 at 19:49)</a>:</h4>
<p>I'm strongly opposed to adding a JS script ontop to "fix" this as this code will remain forever because no one will fix the underlying issue</p>



<a name="268067056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268067056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268067056">(Jan 14 2022 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="316352">@pierwill</span> I suspect the number of broken links you see is not actually because there are a lot of internal links to <code>#impl-</code> in the stdlib _doccomments_.</p>
<p>Instead, I suspect there is something broken in your PR's automatic generation of internal links (mainly from the sidebar). That's the only thing that could account for such a huge number of broken links. Well, that or the link checker disagrees about some matter of URL encoding.</p>
<p>Here's a way I checked for explicit links to <code>#impl-</code> in doccomments. You can see it's only a small handful of files:</p>
<div class="codehilite"><pre><span></span><code>$ rg &#39;#impl-&#39; library -l
library/stdarch/crates/stdarch-verify/arm-intrinsics.html
library/core/src/hash/mod.rs
library/core/src/char/convert.rs
library/core/src/option.rs
library/core/src/result.rs
</code></pre></div>



<a name="268067641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268067641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268067641">(Jan 14 2022 at 20:25)</a>:</h4>
<p>I was going to say the same thing as <span class="user-mention" data-user-id="315412">@jsha</span>; there's no way there are 28K manually-written broken links</p>



<a name="268103462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268103462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268103462">(Jan 15 2022 at 04:15)</a>:</h4>
<p>Thanks for filing <a href="https://github.com/rust-lang/rust/issues/92916">https://github.com/rust-lang/rust/issues/92916</a> <span class="user-mention" data-user-id="315412">@jsha</span> ! I'll comment there if I think of any ideas for improvement.</p>



<a name="268572683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268572683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268572683">(Jan 19 2022 at 17:14)</a>:</h4>
<p>Okay, let's get this done. <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span> </p>
<p>I haven't looked at this in a few days. I read your comment <span class="user-mention" data-user-id="315412">@jsha</span> <a href="https://github.com/rust-lang/rust/pull/92745#issuecomment-1013925955">https://github.com/rust-lang/rust/pull/92745#issuecomment-1013925955</a> </p>
<p>To confirm that I understand: </p>
<blockquote>
<p>Instead, I suspect there is something broken in your PR's automatic generation of internal links (mainly from the sidebar). </p>
</blockquote>
<p>The code you link to in GH is where the fix needs to happen for this?</p>



<a name="268572730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268572730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268572730">(Jan 19 2022 at 17:14)</a>:</h4>
<p>I'll see if I can figure it out <span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="268574152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268574152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268574152">(Jan 19 2022 at 17:24)</a>:</h4>
<p>Seems like there's some duplicate code here from what I was working on before maybe? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="268574443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268574443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268574443">(Jan 19 2022 at 17:26)</a>:</h4>
<p>Maybe can use <code>get_id_for_impl</code> <a href="https://github.com/pierwill/rust/blob/a6f6b2f9865206309d54822299fb4c5889fa5920/src/librustdoc/html/render/mod.rs#L1995">here</a>?</p>



<a name="268575285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268575285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268575285">(Jan 19 2022 at 17:32)</a>:</h4>
<p>Looks like we need the type being implemented in <a href="https://github.com/pierwill/rust/blob/a6f6b2f9865206309d54822299fb4c5889fa5920/src/librustdoc/html/render/mod.rs#L1993-L1995">this <code>format!</code></a>... not sure how to get that, though...</p>



<a name="268575673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268575673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pierwill <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268575673">(Jan 19 2022 at 17:34)</a>:</h4>
<p>Maybe <code>it.impl_item.name</code>?</p>



<a name="268587584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268587584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268587584">(Jan 19 2022 at 19:01)</a>:</h4>
<p>Yes, you understand correctly - I _think_ (on brief looking) that the code I linked is where the fix needs to happen. One way I'd do a quick check for something like that - change the code to always emit "#foo", then check generated docs to see <code>#foo</code> shows up where you expect. :-)</p>



<a name="268587743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268587743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268587743">(Jan 19 2022 at 19:02)</a>:</h4>
<p>and I wouldn't be surprised if there is duplicate code - there is a lot of duplicate (or near-duplicate) code in rustdoc.</p>



<a name="268587820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/semantically%20disambiguate%20impls/near/268587820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/semantically.20disambiguate.20impls.html#268587820">(Jan 19 2022 at 19:02)</a>:</h4>
<blockquote>
<p>Maybe can use get_id_for_impl here?</p>
</blockquote>
<p>Yes, I think that's the right idea.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
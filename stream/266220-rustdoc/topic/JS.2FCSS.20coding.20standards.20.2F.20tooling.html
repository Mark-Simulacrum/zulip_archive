<html>
<head><meta charset="utf-8"><title>JS/CSS coding standards / tooling · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html">JS/CSS coding standards / tooling</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271770683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271770683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271770683">(Feb 13 2022 at 23:03)</a>:</h4>
<p>Been wondering a few things about Rustdoc's static frontend files.</p>
<ol>
<li>
<p>What are the standards around JS features that are allowed? For example, are classes considered ok? Is there a specific set of browser targets that must be supported?</p>
</li>
<li>
<p>What is the reason why Rustdoc doesn't use any modern frontend tooling at build time? For instance, using Sass instead of CSS, or using Typescript instead of Javascript. Is it just because it wasn't initially designed with these in mind, or because y'all want to avoid making the rustdoc build process more complex, or something else? It makes sense that Rustdoc users shouldn't have to install these tools to use Rustdoc. But I do think the Rustdoc codebase quality could be improved by adopting these tools.</p>
</li>
</ol>



<a name="271772578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271772578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271772578">(Feb 13 2022 at 23:46)</a>:</h4>
<blockquote>
<p>What are the standards around JS features that are allowed? For example, are classes considered ok? Is there a specific set of browser targets that must be supported?</p>
</blockquote>
<p><a href="https://rust-lang.github.io/rfcs/1985-tiered-browser-support.html">https://rust-lang.github.io/rfcs/1985-tiered-browser-support.html</a></p>
<blockquote>
<p>Goal: Ensure functionality of our web content for 80% of users.<br>
last 2 Chrome versions<br>
last 1 Firefox version<br>
Firefox ESR<br>
last 1 Safari version<br>
last 1 iOS version<br>
last 1 Edge version<br>
last 1 UCAndroid version</p>
</blockquote>
<p>ES6 features are okay now, but we haven't updated a lot of our idioms. Classes should be fine. Keep in mind that each feature we use needs to be learned by each of our frontend engineers. :-)</p>
<p>I'm slightly negative on adding Sass and Typescript mainly for reasons of not wanting to add layers of complexity. (Though I will grant that I haven't learned either of those tools, so naturally they seem like excess complexity to me :-D)</p>



<a name="271772745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271772745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271772745">(Feb 13 2022 at 23:50)</a>:</h4>
<p>FWIW, one of the main reasons I've historically pushed back against tooling like Sass or Typescript is the relatively high cost of ensuring that tooling is installed if you're e.g. hacking away at std docs, or if we pre-compile ensuring that rustdoc developers at least have it. My (albeit historical, 5-6 years ago) experience with these tools is that they're not the most streamlined to obtain, at least if your primary environment is Rust and you're not interfacing with those tools already.</p>



<a name="271773028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271773028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271773028">(Feb 13 2022 at 23:58)</a>:</h4>
<blockquote>
<p>I'm slightly negative on adding Sass and Typescript mainly for reasons of not wanting to add layers of complexity. (Though I will grant that I haven't learned either of those tools, so naturally they seem like excess complexity to me :-D)</p>
</blockquote>
<p>That makes sense. Sass I think would be a very high ROI addition. In my experience,  variables and nested rules help reduce a lot of CSS boilerplate. Typescript maybe less so since the codebase isn't that large. IMO React would be a much more valuable investment, since there's a lot of view-model conflation and manual HTML construction in the codebase. But that would be a pretty big rewrite.</p>
<blockquote>
<p>My (albeit historical, 5-6 years ago) experience with these tools is that they're not the most streamlined to obtain, at least if your primary environment is Rust and you're not interfacing with those tools already.</p>
</blockquote>
<p>I don't think this is as big an issue today. We already require Rustdoc devs to install eslint via npm. Sass, typescript, react, etc. are all easily installable through npm as well.</p>



<a name="271773059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271773059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271773059">(Feb 13 2022 at 23:59)</a>:</h4>
<p>Is eslint required? It was my impression that the rules we enabled there were pretty minimal, largely focused on the compat (tiered browser support)</p>



<a name="271773166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271773166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271773166">(Feb 14 2022 at 00:00)</a>:</h4>
<p>eslint is also a little towards the pre-compiled bit I referenced, where if you're not editing rustdoc JS in a significant way, you don't need it. But presumably Sass and Typescript wouldn't necessarily fall under the same boat, since they're effectively compilers, right?</p>



<a name="271773308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271773308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271773308">(Feb 14 2022 at 00:03)</a>:</h4>
<p>Eslint is required for testing, since <code>./x.py test tidy</code> runs it. You're right in that it's not in the compilation pipeline like Sass/Typescript would be.</p>



<a name="271773465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271773465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271773465">(Feb 14 2022 at 00:07)</a>:</h4>
<p>it does?</p>



<a name="271773480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271773480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271773480">(Feb 14 2022 at 00:07)</a>:</h4>
<p>I don't have it installed and tidy seems to run just fine for me</p>



<a name="271773530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271773530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271773530">(Feb 14 2022 at 00:08)</a>:</h4>
<p>AFAICT, x.py never references it -- CI checks it, but that's all</p>



<a name="271774882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271774882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271774882">(Feb 14 2022 at 00:39)</a>:</h4>
<p>Oh you're right, for some reason I thought it was part of the toolchain. But I think that's just my local customizations so I don't forget to lint. It would be nice for tidy to run eslint if it exists, certainly!</p>



<a name="271774953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271774953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271774953">(Feb 14 2022 at 00:40)</a>:</h4>
<p>Regardless, eslint is <em>effectively</em> required for rustdoc devs if you want your code to pass CI.</p>



<a name="271775826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271775826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271775826">(Feb 14 2022 at 01:00)</a>:</h4>
<p>Well, or local modifications - and just running past CI. I suspect many simple JS edits wouldn't need to install it, whereas with typescript we'd either need to keep the compiled code checked in or force anyone generating docs locally to have that toolchain.</p>



<a name="271805635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271805635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271805635">(Feb 14 2022 at 10:06)</a>:</h4>
<p>It's also why I don't want typescript and sass. Additional tools that could be tricky to install (windows, looking at you). The benefit isn't bigger than the disadvantages imo.</p>



<a name="271807121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271807121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271807121">(Feb 14 2022 at 10:20)</a>:</h4>
<blockquote>
<p>In my experience, variables and nested rules help reduce a lot of CSS boilerplate.</p>
</blockquote>
<p>CSS has variables now though. Together with <code>rem</code>, <code>matches</code> and <code>unset</code> that reduces the need for CSS templating languages compared to the past.</p>



<a name="271820507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/JS/CSS%20coding%20standards%20/%20tooling/near/271820507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/JS.2FCSS.20coding.20standards.20.2F.20tooling.html#271820507">(Feb 14 2022 at 12:42)</a>:</h4>
<p>I've been planning to use HTML vars for a while (for the themes for example). It's in my todo list. :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
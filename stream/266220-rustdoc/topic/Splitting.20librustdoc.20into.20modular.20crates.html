<html>
<head><meta charset="utf-8"><title>Splitting librustdoc into modular crates · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Splitting.20librustdoc.20into.20modular.20crates.html">Splitting librustdoc into modular crates</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="275305609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Splitting%20librustdoc%20into%20modular%20crates/near/275305609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andy Russell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Splitting.20librustdoc.20into.20modular.20crates.html#275305609">(Mar 14 2022 at 22:19)</a>:</h4>
<p>Hey all, librustdoc can be annoying to work on due to long compile times. I was thinking it would be helpful to split it into smaller crates (<code>librustdoc_types</code>, <code>librustdoc_html</code>, <code>librustdoc_json</code>, etc.) to lessen those compile times.</p>
<p>First off, does anyone know why librustdoc lives in <code>src</code> in the rust repository, instead of in the tools directory? Is there a technical reason or is it just legacy organization?</p>



<a name="275307297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Splitting%20librustdoc%20into%20modular%20crates/near/275307297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Splitting.20librustdoc.20into.20modular.20crates.html#275307297">(Mar 14 2022 at 22:38)</a>:</h4>
<blockquote>
<p>Hey all, librustdoc can be annoying to work on due to long compile times. I was thinking it would be helpful to split it into smaller crates (<code>librustdoc_types</code>, <code>librustdoc_html</code>, <code>librustdoc_json</code>, etc.) to lessen those compile times.</p>
</blockquote>
<p>The JSON part is already its own crate. As for splitting types out, seems a bit weird considering it's most of rustdoc. For HTML, why not. But I'm not sure it'll improve compile time...</p>
<blockquote>
<p>First off, does anyone know why librustdoc lives in <code>src</code> in the rust repository, instead of in the tools directory? Is there a technical reason or is it just legacy organization?</p>
</blockquote>
<p>Because it's not a tool so to speak but not really part of the compiler either as far as I can tell.</p>



<a name="275412636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Splitting%20librustdoc%20into%20modular%20crates/near/275412636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nixon Enraght-Moony <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Splitting.20librustdoc.20into.20modular.20crates.html#275412636">(Mar 15 2022 at 18:04)</a>:</h4>
<blockquote>
<p>The JSON part is already its own crate.</p>
</blockquote>
<p>Not realy, it's just the types. All the generation lives in the main crate (<a href="https://github.com/rust-lang/rust/tree/master/src/librustdoc/json">https://github.com/rust-lang/rust/tree/master/src/librustdoc/json</a>)</p>



<a name="275609141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Splitting%20librustdoc%20into%20modular%20crates/near/275609141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Splitting.20librustdoc.20into.20modular.20crates.html#275609141">(Mar 17 2022 at 05:32)</a>:</h4>
<p>I've thought about splitting rustdoc into crates before, and it may make sense for some parts, but it's also really nice to have it all be one crate since we get dead code warnings, better control over privacy, etc.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
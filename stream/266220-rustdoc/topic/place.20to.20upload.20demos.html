<html>
<head><meta charset="utf-8"><title>place to upload demos · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html">place to upload demos</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="258847040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258847040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258847040">(Oct 23 2021 at 22:57)</a>:</h4>
<p>I've found it very useful to be able to upload demos of PRs I'm working on. Would other rustdoc team members find it useful if I ran a small server with room for y'all to upload similar demos?</p>



<a name="258847102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258847102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258847102">(Oct 23 2021 at 22:59)</a>:</h4>
<p>I don't make PRs often enough for it to be useful to me :( but it seems like a good idea in general</p>



<a name="258847274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258847274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258847274">(Oct 23 2021 at 23:02)</a>:</h4>
<p>at least in theory it shouldn't be that hard for us to convert try build artifacts into a browsable doc.rust-lang.org-like website, but it definitely needs some engineering investment.</p>



<a name="258849479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258849479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258849479">(Oct 24 2021 at 00:07)</a>:</h4>
<p>I would find it very useful as well!</p>



<a name="258851638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851638">(Oct 24 2021 at 01:10)</a>:</h4>
<p>I've tended to stick to the rustdoc "backend" (i.e., not the UI), but given that I'm getting a bit more involved with the frontend, having a way to upload demos would be useful. <span class="user-mention silent" data-user-id="116122">simulacrum</span>'s idea sounds useful and would take out the manual labor and local build time involved in setting up and updating the demo yourself. Though if you're iterating on the UI, having to continuously rerun <code>try</code> sounds like it could be frustrating since it takes a while.</p>



<a name="258851654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851654">(Oct 24 2021 at 01:11)</a>:</h4>
<p>Yeah, try's not ideal, but it's a start. Once the logic is there making it faster is an orthogonal problem (with potentially easy solutions, like a dedicated docs-try or w/e builder)</p>



<a name="258851780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851780">(Oct 24 2021 at 01:15)</a>:</h4>
<p>Isn't try just slow because it's building a full stage2 compiler and tools?</p>



<a name="258851791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851791">(Oct 24 2021 at 01:15)</a>:</h4>
<p>(I don't know much about the try infra, so correct me if I'm wrong.)</p>



<a name="258851853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851853">(Oct 24 2021 at 01:16)</a>:</h4>
<p>yeah, essentially</p>



<a name="258851856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851856">(Oct 24 2021 at 01:16)</a>:</h4>
<p>these days it's also PGO for rustc + LLVM which is another couple rebuilds that aren't strictly necessary</p>



<a name="258851859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851859">(Oct 24 2021 at 01:16)</a>:</h4>
<p>for docs-only we could be much faster</p>



<a name="258851953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851953">(Oct 24 2021 at 01:19)</a>:</h4>
<p>Ah, I see what you mean. I thought you meant extra hardware, not just another container</p>



<a name="258851956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851956">(Oct 24 2021 at 01:19)</a>:</h4>
<p>And we could potentially use download-rustc too to make it faster</p>



<a name="258851960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851960">(Oct 24 2021 at 01:19)</a>:</h4>
<p>So altogether it could be ~5 or so minutes</p>



<a name="258851978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258851978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258851978">(Oct 24 2021 at 01:20)</a>:</h4>
<p>(We'd use <code>download-rustc = "if-unchanged"</code> so it'd still work if you changed rustc)</p>



<a name="258913561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258913561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258913561">(Oct 25 2021 at 03:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/place.20to.20upload.20demos/near/258849479">said</a>:</p>
<blockquote>
<p>I would find it very useful as well!</p>
</blockquote>
<p>Alright, I've set up a server at <a href="https://rustdoc.crud.net/GuillaumeGomez/">https://rustdoc.crud.net/GuillaumeGomez/</a>. You should be able to do: <code>rsync -avu build/x86_64-unknown-linux-gnu/doc guillaumegomez@rustdoc.crud.net:/var/www/html/GuillaumeGomez/example-branch/</code>, and it will show up at <a href="https://rustdoc.crud.net/GuillaumeGomez/">https://rustdoc.crud.net/GuillaumeGomez/</a>. I've preloaded .ssh/authorized_keys with your pubkeys from <a href="https://github.com/GuillaumeGomez.keys">https://github.com/GuillaumeGomez.keys</a>; feel free to change that if you want different keys.</p>



<a name="258913635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258913635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258913635">(Oct 25 2021 at 03:34)</a>:</h4>
<p>Here's an adaptation simple script I use to sync the std docs for the current branch to a directory with the same branch name:</p>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> -feuo pipefail

<span class="nv">BRANCH</span><span class="o">=</span><span class="k">$(</span>git branch --show-current<span class="k">)</span>
./x.py doc --stage <span class="m">2</span> library/std
rsync -avuz  --delete build/x86_64-unknown-linux-gnu/doc/ <span class="s2">&quot;rustdoc.crud.net:/var/www/html/GuillaumeGomez/</span><span class="si">${</span><span class="nv">BRANCH</span><span class="si">}</span><span class="s2">/&quot;</span>
</code></pre></div>
<p>Note: please use for short-term hosting of demos; I'd like to be able to rebuild or take down the server without worry about long-term hosted content.</p>



<a name="258927694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/place%20to%20upload%20demos/near/258927694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/place.20to.20upload.20demos.html#258927694">(Oct 25 2021 at 08:05)</a>:</h4>
<p>Nice thanks! I'll put that somewhere to not forget.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
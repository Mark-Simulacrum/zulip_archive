<html>
<head><meta charset="utf-8"><title>block doc comments broken? · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html">block doc comments broken?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="230074877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230074877" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230074877">(Mar 12 2021 at 18:18)</a>:</h4>
<p>I just noticed in a recent PR on <code>displaydoc</code> that doc attributes from block comments seem to have changed how they're parsed or somethng</p>



<a name="230074880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230074880" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230074880">(Mar 12 2021 at 18:18)</a>:</h4>
<p><a href="https://github.com/yaahc/displaydoc/pull/22/checks?check_run_id=2091047604">https://github.com/yaahc/displaydoc/pull/22/checks?check_run_id=2091047604</a></p>



<a name="230074919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230074919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230074919">(Mar 12 2021 at 18:18)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="sd">/**</span>
<span class="sd">     * Variant4 wants to have a lot of lines</span>
<span class="sd">     *</span>
<span class="sd">     * Lets see how this works out for it</span>
<span class="sd">     */</span><span class="w"></span>
<span class="w">    </span><span class="n">Variant4</span><span class="p">,</span><span class="w"></span>
</code></pre></div>



<a name="230074944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230074944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230074944">(Mar 12 2021 at 18:18)</a>:</h4>
<p>This used to pass with this assert</p>



<a name="230074952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230074952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230074952">(Mar 12 2021 at 18:18)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">assert_display</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">Happy</span>::<span class="n">Variant4</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">"Variant4 wants to have a lot of lines</span><span class="se">\n\n</span><span class="s"> Lets see how this works out for it"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
</code></pre></div>



<a name="230074987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230074987" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230074987">(Mar 12 2021 at 18:19)</a>:</h4>
<p>but now we get this</p>



<a name="230074999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230074999" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230074999">(Mar 12 2021 at 18:19)</a>:</h4>
<div class="codehilite"><pre><span></span><code>---- does_it_print stdout ----
thread &#39;does_it_print&#39; panicked at &#39;assertion failed: `(left == right)`
  left: `&quot;Variant4 wants to have a lot of lines\n\n Lets see how this works out for it&quot;`,
 right: `&quot;* Variant4 wants to have a lot of lines\n     *\n     * Lets see how this works out for it&quot;`&#39;, tests/happy.rs:37:5
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="230075145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230075145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230075145">(Mar 12 2021 at 18:20)</a>:</h4>
<p>the right and left are swapped because of how I implemented <code>assert_display</code> but the "right" side here is the output of the display method for Variant4</p>



<a name="230075174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230075174" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230075174">(Mar 12 2021 at 18:20)</a>:</h4>
<p>and it is including the <code>*</code> and whitespace before the <code>*</code> on the doc comment</p>



<a name="230075215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230075215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230075215">(Mar 12 2021 at 18:21)</a>:</h4>
<p>Is this the intended behaviour?</p>



<a name="230091703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230091703" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230091703">(Mar 12 2021 at 20:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby</span> <a href="#narrow/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F/near/230075215">said</a>:</p>
<blockquote>
<p>Is this the intended behaviour?</p>
</blockquote>
<p>most likely this is because of <a href="https://blog.guillaume-gomez.fr/articles/2020-11-11+New+doc+comment+handling+in+rustdoc">https://blog.guillaume-gomez.fr/articles/2020-11-11+New+doc+comment+handling+in+rustdoc</a></p>



<a name="230102815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230102815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230102815">(Mar 12 2021 at 21:44)</a>:</h4>
<p>makes sense</p>



<a name="230102821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230102821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230102821">(Mar 12 2021 at 21:44)</a>:</h4>
<p>looks like it wasn't intended then</p>



<a name="230102841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230102841" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230102841">(Mar 12 2021 at 21:44)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span></p>



<a name="230102853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230102853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230102853">(Mar 12 2021 at 21:45)</a>:</h4>
<p>should I go ahead and open an issue for this?</p>



<a name="230102907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230102907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230102907">(Mar 12 2021 at 21:45)</a>:</h4>
<p>What wasn't intended?</p>



<a name="230102910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230102910" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230102910">(Mar 12 2021 at 21:45)</a>:</h4>
<p>Let me check quickly</p>



<a name="230103043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230103043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230103043">(Mar 12 2021 at 21:46)</a>:</h4>
<p>Ah the "js-like" comments</p>



<a name="230103124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230103124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230103124">(Mar 12 2021 at 21:47)</a>:</h4>
<p>I don't remember what I did for them but I think that there isn't supposed to have "*" at the start of every line. I can't find a test about it though...</p>



<a name="230103447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230103447" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230103447">(Mar 12 2021 at 21:50)</a>:</h4>
<p>So yes, simply remove the '*' at the start and it should work just fine.</p>



<a name="230103531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230103531" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230103531">(Mar 12 2021 at 21:50)</a>:</h4>
<p>or you can use <code>#[doc = "..."]</code> too. Under-used but works very nicely. :)</p>



<a name="230103685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230103685" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230103685">(Mar 12 2021 at 21:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F/near/230103447">said</a>:</p>
<blockquote>
<p>So yes, simply remove the '*' at the start and it should work just fine.</p>
</blockquote>
<p>I think we should change rustdoc to do this automatically</p>



<a name="230103743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230103743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230103743">(Mar 12 2021 at 21:52)</a>:</h4>
<p>adding <code>*</code> at the start is the most common way to write these comments</p>



<a name="230104410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104410">(Mar 12 2021 at 21:58)</a>:</h4>
<p>Not really. And also, those comments are pretty rare (I saw them "in the wild" only twice including today). I removed all the dark magic and I'm not sure it's a good idea to bring it back.</p>



<a name="230104415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104415">(Mar 12 2021 at 21:58)</a>:</h4>
<p>It used to do so, right?</p>



<a name="230104439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104439">(Mar 12 2021 at 21:58)</a>:</h4>
<p>older versions of rustc remove these despite it showing up as one attribute</p>



<a name="230104462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104462" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104462">(Mar 12 2021 at 21:58)</a>:</h4>
<p>either way we're going to have to manually strip some of these on our side</p>



<a name="230104466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104466">(Mar 12 2021 at 21:58)</a>:</h4>
<p>so its not super urgent</p>



<a name="230104475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104475" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104475">(Mar 12 2021 at 21:58)</a>:</h4>
<p>That's a good question, I don't remember and I'm too tired to check now</p>



<a name="230104483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104483" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104483">(Mar 12 2021 at 21:58)</a>:</h4>
<p>because we didn't catch this before it went into stable</p>



<a name="230104518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104518">(Mar 12 2021 at 21:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F/near/230104475">said</a>:</p>
<blockquote>
<p>That's a good question, I don't remember and I'm too tired to check now</p>
</blockquote>
<p>no i mean, I know for certain it did</p>



<a name="230104532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104532" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104532">(Mar 12 2021 at 21:59)</a>:</h4>
<p>our testsuite verifies this</p>



<a name="230104544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230104544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230104544">(Mar 12 2021 at 21:59)</a>:</h4>
<p>rustdoc was doing weird things on the doc comments before, so it's possible that it was doing something to handle this case too.</p>



<a name="230105025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230105025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230105025">(Mar 12 2021 at 22:01)</a>:</h4>
<p>Weirdly enough, my PR doesn't seem like it removed it: <a href="https://github.com/rust-lang/rust/pull/78400/files">https://github.com/rust-lang/rust/pull/78400/files</a></p>



<a name="230105281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230105281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230105281">(Mar 12 2021 at 22:02)</a>:</h4>
<p>But the fact that there weren't tests to enforce this behavior is a bit annoying...</p>



<a name="230105711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230105711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230105711">(Mar 12 2021 at 22:03)</a>:</h4>
<p>So, back to this, I don't think we should handle this in rustdoc. I don't like having dark magic in doc comments (and in my mind, doc comments are very different than code comments), but since <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> disagrees, it seems worthwhile to ask to the other rustdoc team members what they think about it.</p>



<a name="230106407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230106407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230106407">(Mar 12 2021 at 22:07)</a>:</h4>
<blockquote>
<p>(and in my mind, doc comments are very different than code comments),</p>
</blockquote>
<p>I don't see how this is super relevant - the reason I think we should support this is because other documentation systems do, like javadoc and doxygen</p>



<a name="230106456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230106456" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230106456">(Mar 12 2021 at 22:07)</a>:</h4>
<p>it seems weird to remove a feature and require the user to use a new syntax just because it's a little harder to maintain</p>



<a name="230106763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230106763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230106763">(Mar 12 2021 at 22:08)</a>:</h4>
<p>And I don't thinkgthat taking other systems as reference is always relevant. The problem here is that it'll allow stuff like this:</p>
<div class="codehilite"><pre><span></span><code>/// * hello
/// * aloa
/// * toudoum
</code></pre></div>
<p>And there, instead of a list you'll get the '*' removed.</p>



<a name="230106803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230106803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230106803">(Mar 12 2021 at 22:08)</a>:</h4>
<p>ok, so only do this for <code>/**</code> style comments</p>



<a name="230106830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230106830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230106830">(Mar 12 2021 at 22:09)</a>:</h4>
<p>One change in how we handle doc comments is always impacting the other ones unfortunately</p>



<a name="230106942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230106942" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230106942">(Mar 12 2021 at 22:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F/near/230106830">said</a>:</p>
<blockquote>
<p>One chance in how we doc comments is always impacting the other ones unfortunately</p>
</blockquote>
<p>I don't see why that has to be true? we could encode the original syntax in the metadata or just parse it on-demand</p>



<a name="230107148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230107148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230107148">(Mar 12 2021 at 22:10)</a>:</h4>
<p>The problem is that we can mix different kind of doc comments. That would mean that we should handle all kinds on their own instead of handling all of them as one</p>



<a name="230107266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230107266" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230107266">(Mar 12 2021 at 22:10)</a>:</h4>
<p>I think you should see how it used to be done before the regression</p>



<a name="230107831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230107831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230107831">(Mar 12 2021 at 22:13)</a>:</h4>
<p>I see how it can be done, it's just that I'm not a big fan <strong>at all</strong></p>



<a name="230107847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230107847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230107847">(Mar 12 2021 at 22:13)</a>:</h4>
<p>It brought many issues</p>



<a name="230107888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230107888" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230107888">(Mar 12 2021 at 22:13)</a>:</h4>
<p>for example:</p>



<a name="230108175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108175">(Mar 12 2021 at 22:14)</a>:</h4>
<div class="codehilite"><pre><span></span><code>/// hello
/**  this
  *  is
  * weid!
  */
///next
</code></pre></div>
<p>In your opinion, what happens there?</p>



<a name="230108301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108301">(Mar 12 2021 at 22:15)</a>:</h4>
<p>how many spaces should we remove from the start of each line if we don't keep the "context" in all comment kinds?</p>



<a name="230108523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108523">(Mar 12 2021 at 22:16)</a>:</h4>
<p>I think it should use the same rules as normal <code>///</code> comments, but with the <code>*</code> treated as the start of the line</p>



<a name="230108637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108637" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108637">(Mar 12 2021 at 22:16)</a>:</h4>
<p>Why should it? :3</p>



<a name="230108682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108682">(Mar 12 2021 at 22:16)</a>:</h4>
<p>That creates inconsistency in itself</p>



<a name="230108684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108684" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108684">(Mar 12 2021 at 22:16)</a>:</h4>
<p>now you're just being difficult lol</p>



<a name="230108704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108704">(Mar 12 2021 at 22:17)</a>:</h4>
<p>A bit sorry :p</p>



<a name="230108783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108783" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108783">(Mar 12 2021 at 22:17)</a>:</h4>
<p>It's just that I already had this conversation with Misdreavus before they implemented it. At the time I didn't see any reason to oppose because it seemed like a good improvement. In the end it was a nightmare.</p>



<a name="230108863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108863">(Mar 12 2021 at 22:18)</a>:</h4>
<p>What we're discussing is less "advanced" but remains the same kind of handling. So before going full in, I really want to be sure it won't be something that we need to remove once again</p>



<a name="230108898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108898" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108898">(Mar 12 2021 at 22:18)</a>:</h4>
<p>I really don't think we should be removing stable features ever</p>



<a name="230108939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108939">(Mar 12 2021 at 22:19)</a>:</h4>
<p>whether or not this was a good idea the first time, we can't just throw our hands up and refuse to deal with it</p>



<a name="230108988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230108988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230108988">(Mar 12 2021 at 22:19)</a>:</h4>
<p>I agree with you on that point. It's very surprising that we had no test for that though (which is why we only hear about it now)</p>



<a name="230187216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230187216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230187216">(Mar 13 2021 at 20:34)</a>:</h4>
<p>Sorry for not understanding what you said... Way too tired to code I think. Things might get better in two weeks. It'll impact rustdoc I think so I keep you up to date if there is anything.</p>
<p>Anyway, you seem to be tired too. Try to take some time off too!</p>



<a name="230188714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230188714" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230188714">(Mar 13 2021 at 21:03)</a>:</h4>
<p>I think you meant to send that as a DM :P but I appreciate it <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="230312378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/230312378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#230312378">(Mar 15 2021 at 08:58)</a>:</h4>
<p>Well, like I said: very tired. XD</p>



<a name="233551433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233551433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233551433">(Apr 07 2021 at 19:57)</a>:</h4>
<p>following up on this, I'm opening an issue on this regression and it appears to have been introduced in rust 1.47</p>



<a name="233551441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233551441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233551441">(Apr 07 2021 at 19:57)</a>:</h4>
<p>so a while ago now</p>



<a name="233551548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233551548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233551548">(Apr 07 2021 at 19:58)</a>:</h4>
<p>looks like this blog post <a href="https://blog.guillaume-gomez.fr/articles/2020-11-11+New+doc+comment+handling+in+rustdoc">https://blog.guillaume-gomez.fr/articles/2020-11-11+New+doc+comment+handling+in+rustdoc</a> is from 4 months ago so that maybe checks out??</p>



<a name="233551597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233551597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233551597">(Apr 07 2021 at 19:58)</a>:</h4>
<p>at this point I'm not positive if this is the source of the regression since it happened further back than expected</p>



<a name="233552331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233552331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233552331">(Apr 07 2021 at 20:03)</a>:</h4>
<p>follow up issue</p>



<a name="233552333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233552333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233552333">(Apr 07 2021 at 20:03)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/83982">https://github.com/rust-lang/rust/issues/83982</a></p>



<a name="233553562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233553562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233553562">(Apr 07 2021 at 20:12)</a>:</h4>
<p>I honestly don't know how we can handle that... It seems to be the expected behaviour to me but if it worked before, it's a breaking change. Don't know why we ever supported the js-like doc comments. :-/</p>



<a name="233553786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233553786" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233553786">(Apr 07 2021 at 20:14)</a>:</h4>
<p>Wait I feel like we discussed breaking the js-comments and decided not to</p>



<a name="233553803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233553803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233553803">(Apr 07 2021 at 20:14)</a>:</h4>
<p>but maybe i'm wrong</p>



<a name="233553820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233553820" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233553820">(Apr 07 2021 at 20:14)</a>:</h4>
<p>i feel like i recall discussing js comments</p>



<a name="233553944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233553944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233553944">(Apr 07 2021 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F/near/233553562">said</a>:</p>
<blockquote>
<p>I honestly don't know how we can handle that... It seems to be the expected behaviour to me but if it worked before, it's a breaking change. Don't know why we ever supported the js-like doc comments. :-/</p>
</blockquote>
<p>I keep telling you you can just look at how we did it before</p>



<a name="233555668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233555668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233555668">(Apr 07 2021 at 20:27)</a>:</h4>
<p>We changed the way we handle doc comments at least three times. So which before are you referring to? (and what we handle too)</p>



<a name="233555843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233555843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233555843">(Apr 07 2021 at 20:29)</a>:</h4>
<p>ok well it turns out this is completely unrelated to rustdoc so it's a moot point <a href="https://github.com/rust-lang/rust/issues/83982#issuecomment-815240014">https://github.com/rust-lang/rust/issues/83982#issuecomment-815240014</a></p>



<a name="233555854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233555854" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233555854">(Apr 07 2021 at 20:29)</a>:</h4>
<p>And apparently I didn't break it from <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> 's comment. Phew, great work everyone! Time to sleep now :)</p>



<a name="233555959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/block%20doc%20comments%20broken%3F/near/233555959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F.html#233555959">(Apr 07 2021 at 20:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/block.20doc.20comments.20broken.3F/near/233553786">said</a>:</p>
<blockquote>
<p>Wait I feel like we discussed breaking the js-comments and decided not to</p>
</blockquote>
<p>I remember having this discussion too but don't remember when or the outcome</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
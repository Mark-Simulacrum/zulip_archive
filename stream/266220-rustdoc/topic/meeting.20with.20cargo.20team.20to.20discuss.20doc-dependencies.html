<html>
<head><meta charset="utf-8"><title>meeting with cargo team to discuss doc-dependencies · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html">meeting with cargo team to discuss doc-dependencies</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273783552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273783552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273783552">(Mar 02 2022 at 10:17)</a>:</h4>
<p>Hi everyone! I think most of you are aware about <a href="https://github.com/rust-lang/cargo/issues/8905">https://github.com/rust-lang/cargo/issues/8905</a>. Recently, <span class="user-mention" data-user-id="327095">@Urgau</span> worked on <a href="https://github.com/rust-lang/cargo/pull/10435">https://github.com/rust-lang/cargo/pull/10435</a> to fix it but considering how big of a change it was, it was closed until we discuss about it more in details to come up with a plan.</p>
<p>So the idea here would be to have a talk with the cargo team to present our needs and try to see with them what we could do.</p>
<p>cc  <span class="user-group-mention" data-user-group-id="3139">@T-cargo</span>  <span class="user-group-mention" data-user-group-id="3925">@T-rustdoc</span></p>



<a name="273847644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273847644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273847644">(Mar 02 2022 at 17:46)</a>:</h4>
<p>I think first _we_ should discuss to be sure where we as a team stand here. I tend to agree with a lot of what josh has said there.</p>
<p>We have to start out with concrete use cases that are not being handled right now, determine if we want them to be supported, and discuss potential solutions _within_ rustdoc</p>



<a name="273847717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273847717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273847717">(Mar 02 2022 at 17:46)</a>:</h4>
<p>I definitely am skeptical of the "use a cargo feature" thing, but i'm also wondering to what extent this is an actual problem</p>



<a name="273847788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273847788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273847788">(Mar 02 2022 at 17:47)</a>:</h4>
<p>proc macro docs are definitely a problem, but also i can't see how that would be fixed without a circular dep</p>



<a name="273857434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273857434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273857434">(Mar 02 2022 at 18:48)</a>:</h4>
<p>The biggest case I can think of (apart from the proc macro) is in case you're providing an API with some parts behind features. You'd need to enable this crate's features in order to have them appear in the docs, it cannot be done automatically unfortunately. <code>cfg(doc)</code> was supposed to fix that but we realized that it couldn't because it was only applied to the top crate and not the dependencies. A good example is with the gtk-rs crates which enable the <code>dox</code> feature to be able provide documentation "fully".</p>



<a name="273857520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273857520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273857520">(Mar 02 2022 at 18:49)</a>:</h4>
<p>Also, can you tell me more about the circular dep please? I think I missed this issue.</p>



<a name="273857939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273857939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273857939">(Mar 02 2022 at 18:52)</a>:</h4>
<p>About the <code>dev-dependencies</code>, I think it's fine to use them for rustdoc as well. We just need a way to have doc-specific features too I think</p>



<a name="273860264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273860264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273860264">(Mar 02 2022 at 19:05)</a>:</h4>
<p>I don't have context for this discussion. Could someone explain the issue this is trying to solve?</p>



<a name="273861367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273861367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273861367">(Mar 02 2022 at 19:12)</a>:</h4>
<p>I don't think dev-dependencies are a good idea for this</p>



<a name="273861384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273861384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273861384">(Mar 02 2022 at 19:13)</a>:</h4>
<p>(I left a comment on the issue saying why)</p>



<a name="273861407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273861407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273861407">(Mar 02 2022 at 19:13)</a>:</h4>
<p>Also I don't understand your use case</p>



<a name="273866590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273866590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273866590">(Mar 02 2022 at 19:51)</a>:</h4>
<p>Let me try to explain a bit more by using gtk-rs crates. So we handle versions by using features. So if you want to use 3.18 for example, you have to enable <code>v3_18</code>. However, since it now has the higher version, it means it'll get API that could be behind the feature for its dependencies. However, since gtk-rs provides all crates, we handle that nicely. The problem now for generating documentation is as follows: we can't use <code>cfg(doc)</code> on items behind the feature because they might use items in a dependency behind a feature as well. So if we want them, we have to enable them too. And for that, we need to create a <code>dox</code> feature. If we had a <code>doc-default</code> setting in <code>Cargo.toml</code>, we could remove <code>dox</code> altogether and enable all features when generating documentation.</p>
<p>Sorry I tried to make it more clear but not sure if I succeeded...</p>



<a name="273871790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273871790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273871790">(Mar 02 2022 at 20:28)</a>:</h4>
<p>Sorry, I don't really follow. Could you give a specific example of an item in your gtk-rs crates that runs into issues with the status quo?</p>



<a name="273872711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273872711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273872711">(Mar 02 2022 at 20:35)</a>:</h4>
<p>(Or that would run into issues if <code>cfg(doc)</code> worked on dependencies and <code>dev-dependencies</code> were available for doc?)</p>



<a name="273874966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273874966" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273874966">(Mar 02 2022 at 20:53)</a>:</h4>
<p>Sure! So let's say you have this in <code>glib</code>:</p>
<div class="codehilite"><pre><span></span><code>#[cfg(any(feature = &quot;v3_7&quot;, feature = &quot;dox&quot;)]
pub struct Type() {}
</code></pre></div>
<p>and this in <code>gtk</code>:</p>
<div class="codehilite"><pre><span></span><code>#[cfg(any(feature = &quot;v3_7&quot;, feature = &quot;dox&quot;)]
pub fn foo(t: Type) {}
</code></pre></div>
<p>So when documenting <code>gtk</code>, if you enable <code>dox</code>, it needs to enable <code>glib/dox</code> too otherwise it'll fail.</p>



<a name="273875019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273875019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273875019">(Mar 02 2022 at 20:53)</a>:</h4>
<p>But it's always manual. So by default, you never see <code>foo</code> or <code>Type</code> in any of the two crates.</p>



<a name="273875123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273875123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273875123">(Mar 02 2022 at 20:54)</a>:</h4>
<p>with a <code>doc-default = ["v3_7"]</code>, we can completely remove the need for <code>dox</code></p>



<a name="273875156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273875156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273875156">(Mar 02 2022 at 20:54)</a>:</h4>
<p>(and switch back to <code>cfg(doc)</code> for imports)</p>



<a name="273875526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273875526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273875526">(Mar 02 2022 at 20:57)</a>:</h4>
<p>Why can glib not use <code>cfg(doc)</code>, and gtk use <code>cfg(doc)</code> as well?</p>



<a name="273875554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273875554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273875554">(Mar 02 2022 at 20:57)</a>:</h4>
<p>So that both of them always show all items when documenting?</p>



<a name="273878112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273878112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273878112">(Mar 02 2022 at 21:15)</a>:</h4>
<p>wait, i still don't understand. you can do this with feature dependencies</p>



<a name="273878268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273878268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273878268">(Mar 02 2022 at 21:16)</a>:</h4>
<p>i feel like what y'all are doing here is a little bit weird; and rather specific to your project</p>



<a name="273878342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273878342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273878342">(Mar 02 2022 at 21:17)</a>:</h4>
<p>i think we need to step back further away from _solutions_ and onto the _problems_ that we're trying to solve. <code>feature = dox</code> is a solution.</p>



<a name="273878461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273878461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273878461">(Mar 02 2022 at 21:18)</a>:</h4>
<p>the problem _as far as i can tell_, is that you want all of the features to show up when documenting: is this not a use case for <code>--all-features</code>? I feel like this is pretty standard amongst the rust community: build your docs with <code>--all-features</code>. dependencies don't get that but that's fine, you're not using those functions</p>



<a name="273878494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273878494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273878494">(Mar 02 2022 at 21:18)</a>:</h4>
<p>Like i think we really need to see a more worked out explanation of the use case and the various possible solutions here</p>



<a name="273881188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273881188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273881188">(Mar 02 2022 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/273875526">said</a>:</p>
<blockquote>
<p>Why can glib not use <code>cfg(doc)</code>, and gtk use <code>cfg(doc)</code> as well?</p>
</blockquote>
<p>Because glib isn't compiled with <code>cfg(doc)</code>, so that prevents gtk to use the items behind the features</p>



<a name="273881556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273881556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273881556">(Mar 02 2022 at 21:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/273878461">said</a>:</p>
<blockquote>
<p>the problem _as far as i can tell_, is that you want all of the features to show up when documenting: is this not a use case for <code>--all-features</code>? I feel like this is pretty standard amongst the rust community: build your docs with <code>--all-features</code>. dependencies don't get that but that's fine, you're not using those functions</p>
</blockquote>
<p>I don't think it's a good idea to rest on <code>--all-features</code> because for some crates, some features are mutually exclusive (even though they should be only additive but that's another debate).</p>



<a name="273881709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273881709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273881709">(Mar 02 2022 at 21:42)</a>:</h4>
<p>Another example I can give is:</p>
<p>You're writing an application using gtk-rs (or sdl2, same problem). You don't really know where to start so you generate their documentation. Bad luck: you only have the default features, a huge part of it is missing.</p>



<a name="273881798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273881798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273881798">(Mar 02 2022 at 21:43)</a>:</h4>
<p>For me, the problem is really that we can't specify which features should be enabled when running <code>cargo doc</code></p>



<a name="273881942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273881942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273881942">(Mar 02 2022 at 21:44)</a>:</h4>
<p>With features, we can then have optional dependencies. Along the years, we got a few people asking for new markdown extensions like supporting latex because it's really problematic to do it with proc-macro since it'd have to be present all the times or to be done through a feature.</p>



<a name="273882469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273882469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273882469">(Mar 02 2022 at 21:49)</a>:</h4>
<p>Oh and <span class="user-mention" data-user-id="210267">@Nemo157</span> explained a bit more things on the issue too</p>



<a name="273885747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273885747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273885747">(Mar 02 2022 at 22:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/273881188">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/273875526">said</a>:</p>
<blockquote>
<p>Why can glib not use <code>cfg(doc)</code>, and gtk use <code>cfg(doc)</code> as well?</p>
</blockquote>
<p>Because glib isn't compiled with <code>cfg(doc)</code>, so that prevents gtk to use the items behind the features</p>
</blockquote>
<p>That seems like a description of what was proposed to be treated as a bug and fixed, if possible.</p>



<a name="273885828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273885828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273885828">(Mar 02 2022 at 22:13)</a>:</h4>
<p>When building documentation for gtk, which depends on glib, we'd enable anything with <code>cfg(doc)</code> attached in both gtk and glib, so gtk could cross-reference glib docs successfully.</p>



<a name="273886126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273886126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael notriddle Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273886126">(Mar 02 2022 at 22:16)</a>:</h4>
<p>That's blocked on the ability to produce <code>rmeta</code> files for crates that don't type check, isn't it?</p>



<a name="273890565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273890565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273890565">(Mar 02 2022 at 22:53)</a>:</h4>
<p>I think I'm slightly confused. With <code>cfg(doc)</code> it <em>would</em> typecheck, wouldn't it?</p>



<a name="273890607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273890607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273890607">(Mar 02 2022 at 22:54)</a>:</h4>
<p>Oh. Is the issue that you wouldn't want to use that same rmeta file for a non-doc compilation?</p>



<a name="273890720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273890720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273890720">(Mar 02 2022 at 22:54)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> If done then yes, it'd be fixed (which would be awesome!). I'm still curious on how we will differentiate with non-doc (aka tests) builds but that's another debate I think</p>



<a name="273891058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273891058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael notriddle Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273891058">(Mar 02 2022 at 22:57)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span>  rustdoc deliberately swallows typechecking errors in function bodies. <a href="https://github.com/rust-lang/rust/pull/73566">https://github.com/rust-lang/rust/pull/73566</a></p>



<a name="273891141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273891141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273891141">(Mar 02 2022 at 22:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> As far as I understand cargo use <code>-Cmetadata</code> to create the <code>rmeta</code> when documenting, so it's not a problem as the metadata (just a number) can just be different.</p>



<a name="273891218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273891218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273891218">(Mar 02 2022 at 22:58)</a>:</h4>
<p><span class="user-mention" data-user-id="210053">@Michael notriddle Howell</span> Oh, I see. Yeah, the API surface area and cross-references would typecheck, but the internals might not.</p>



<a name="273891290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273891290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273891290">(Mar 02 2022 at 22:58)</a>:</h4>
<p>A mechanism to rapidly capture <em>only</em> the API surface area would be generally useful, not just for rustdoc, but that's a larger change.</p>



<a name="273891385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273891385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273891385">(Mar 02 2022 at 22:59)</a>:</h4>
<p>I just checked with my prototype and it has different <code>-Cmetadata</code> when checking and checking for documenting;</p>



<a name="273891518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273891518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273891518">(Mar 02 2022 at 23:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/273891290">said</a>:</p>
<blockquote>
<p>A mechanism to rapidly capture <em>only</em> the API surface area would be generally useful, not just for rustdoc, but that's a larger change.</p>
</blockquote>
<p>Isn't this rustdoc json ?</p>



<a name="273891675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273891675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael notriddle Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273891675">(Mar 02 2022 at 23:00)</a>:</h4>
<p>It's not just the ability to capture only the API surface area. It's the ability for rustc to ingest only the API surface area, without crashing because it expects other stuff to be there that's absent.</p>



<a name="273892061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273892061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273892061">(Mar 02 2022 at 23:03)</a>:</h4>
<p>Right, that's what I mean about it being generally useful for other things as well.</p>



<a name="273892167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/273892167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael notriddle Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#273892167">(Mar 02 2022 at 23:04)</a>:</h4>
<p>It's also the reason why rustdoc json isn't sufficient. It needs to contain MIR for const functions, but not MIR for anything else.</p>



<a name="274288882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274288882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274288882">(Mar 06 2022 at 06:30)</a>:</h4>
<p>yeah overall i think for diagnostics and for docs we need better ways to talk about API surface areas, and part of the problem is that <code>cfg</code> is not powerful enough here. Ideally IMO we'd have different _types_ of <code>cfg</code>, e.g. different CFGs attrs for "different API", "new API", and "different implementation" . I may have posted about this somewhere before, i don't remember anymore, but it's something i've wanted for ages</p>



<a name="274289074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289074">(Mar 06 2022 at 06:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/273881798">said</a>:</p>
<blockquote>
<p>For me, the problem is really that we can't specify which features should be enabled when running <code>cargo doc</code></p>
</blockquote>
<p>you can on <a href="http://docs.rs">docs.rs</a> , and i think that's what's recommended</p>



<a name="274289113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289113">(Mar 06 2022 at 06:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/273881556">said</a>:</p>
<blockquote>
<p>I don't think it's a good idea to rest on <code>--all-features</code> because for some crates, some features are mutually exclusive (even though they should be only additive but that's another debate).</p>
</blockquote>
<p>Yeah, this is a problem. My understanding of the general thing the community does is:</p>
<p>- tell <a href="http://docs.rs">docs.rs</a> to build the maximum set of features possible for the crate (usually, <code>--all-features</code>)<br>
 - downstream crates may not get all features in their locally built docs, but that's _fine_, they will when cross-linking on <a href="http://docs.rs">docs.rs</a>, and if they don't use a feature in their own deps then it's kinda fine if the docs don't get built</p>



<a name="274289122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289122">(Mar 06 2022 at 06:36)</a>:</h4>
<p>like, i think i _still_ don't understand the precise problem here, because your statement of the problem is still framed in terms of the _particular_ solution gtk-rs has picked (<code>feature = "dox"</code>). But maybe I've missed something!</p>



<a name="274289130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289130">(Mar 06 2022 at 06:37)</a>:</h4>
<p>and i'm wary of us pushing for a solution to a problem involved in the implementation of _that_ solution. this is why i'm asking for a step back and a statement of the problem</p>



<a name="274289201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289201">(Mar 06 2022 at 06:39)</a>:</h4>
<p>here's what i <em>think</em> the problem seems to be, reading between the lines:</p>
<ul>
<li>Y'all want all features to show up in the docs</li>
<li>Y'all want all features to show up in the docs even when used as a _dependency_ with only some features enabled</li>
</ul>
<p>is this accurate?</p>



<a name="274289268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289268">(Mar 06 2022 at 06:41)</a>:</h4>
<p>overall i'm a bit skeptical of the second goal there. the first goal seems quite reasonable (and already is well supported by <a href="http://docs.rs">docs.rs</a>), but for the second goal: for locally built docs; it seems fine if not all features are documented in deps, only the visible ones?</p>



<a name="274289530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289530">(Mar 06 2022 at 06:48)</a>:</h4>
<p>and on <a href="http://docs.rs">docs.rs</a> stuff works fine for this, and cross-links work fine. in my experience folks use <a href="http://docs.rs">docs.rs</a> for doc discovery and the locally built docs are largely used for the crates they are actively working on as opposed to doc discovery in deps, so it's not a huge deal if APIs are missing in the deps because a feature isn't enabled. maybe i'm wrong on this.</p>



<a name="274289540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274289540" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274289540">(Mar 06 2022 at 06:49)</a>:</h4>
<p>a thing that i _do_ find annoying is that _super_ often intra-doc links are written with <code>--all-features</code> in mind, and so you get warnings from workspace deps (since the crate you built got all features, but not its deps, and the ones in the same workspace still warn). I have wondered about special syntax for intra-doc links where either you can declare the link resolution as fallible, or, even better, you can declare a feature that needs to be enabled for it to work, and the link will render with a tooltip. Though tbh that's a feature that can _technically_ be written as its own proc macro if not for the fact that a lot of feature flags exist solely for the purpose of not bringing in <code>syn</code> :)</p>



<a name="274313376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274313376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael (notriddle) Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274313376">(Mar 06 2022 at 16:01)</a>:</h4>
<blockquote>
<p>Though tbh that's a feature that can _technically_ be written as its own proc macro</p>
</blockquote>
<p>The general problem, as I see it, is exactly because of weaknesses in proc macros as rustdoc plugins.</p>
<p>We (or, at least, I) want to be able to pull in stuff like KaTeX or Mermaid.JS as dependencies of their rustdocs, without them becoming dependencies of the actual code. For something like a math kernel, "KaTeX rustdocs" might be the only proc macro used in the library at all, and you definitely don't want to force a dependency on <code>syn</code> and <code>quick-js</code> just for that.</p>
<p>Naively, it seems like any solution to the KaTeX problem would also solve the GTK problem, since whatever preprocessing step KaTeX uses to convert TeX code to HTML can also be used by GTK to find the complete LGPL docs in a lookup table.</p>



<a name="274314905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274314905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274314905">(Mar 06 2022 at 16:38)</a>:</h4>
<p>@*<em>Michael (notriddle) Howell</em> hmm that comment was in the space of intra doc links only, but that's an interesting point</p>
<p>but proc macros used for docs seem rare and also don't seem to be Guillaume's issue</p>



<a name="274320686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274320686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274320686">(Mar 06 2022 at 18:27)</a>:</h4>
<p>My issue is that we need to pass the feature manually for gtk-rs because there is no way currently to set "doc-features". But what <span class="user-mention" data-user-id="210053">@Michael (notriddle) Howell</span> described is an issue I've heard a lot about: people don't want proc-macro for docs to be needed if you're not building docs (which is the most common I heard about with LaTeX).</p>



<a name="274326229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274326229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274326229">(Mar 06 2022 at 20:23)</a>:</h4>
<p>That seems like it would be addressed by dev-dependencies.</p>



<a name="274329372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274329372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274329372">(Mar 06 2022 at 21:33)</a>:</h4>
<p>That sounds good to me as long as we have a way to setup things for rustdoc too</p>



<a name="274329380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274329380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274329380">(Mar 06 2022 at 21:34)</a>:</h4>
<p>(either it is done with dev-dependencies or not, doesn't matter)</p>



<a name="274445856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274445856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274445856">(Mar 07 2022 at 19:36)</a>:</h4>
<p>i think i'm strongly against dev-dependencies being used when building rmetas for doc dependencies.</p>
<p>people write dev-dependencies with the assumption that they're the ones running it on their own CIs and environments. we _never_ have a scenario where building a crate requires building dependency dev-deps. dev-deps have relaxed semver requirements, too (because of this current situation). it's not unusual for crates to set up special environments for some dev-dep stuff especially around C builds</p>
<p>my worry is that rustdoc will simply _not work_ if we're building all the transitive dev-deps because there will be crates that make assumptions in their dev-deps (having env vars set, having C libraries installed, that kind of stuff).</p>



<a name="274446031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274446031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274446031">(Mar 07 2022 at 19:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274320686">said</a>:</p>
<blockquote>
<p>My issue is that we need to pass the feature manually for gtk-rs because there is no way currently to set "doc-features".</p>
</blockquote>
<p>I repeat, again, this is framed in terms of your attempted _solution_, whereas I still do not understand the core problem you are trying to fix.</p>
<p>Can you speak in terms of the desired end result, and follow your logic from there?</p>



<a name="274465265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274465265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274465265">(Mar 07 2022 at 22:06)</a>:</h4>
<p><span class="user-mention" data-user-id="132040">@Manish Goregaokar</span> You have to have dev-deps installed for cargo test. Why is that not a problem for test, but it is a problem for doc?</p>



<a name="274465284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274465284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274465284">(Mar 07 2022 at 22:06)</a>:</h4>
<p>( I'm hoping the answer isn't just that we don't expect test to work for random crates.)</p>



<a name="274465589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274465589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274465589">(Mar 07 2022 at 22:09)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> because i believe the suggestion here is for dev-deps to be enabled on _all crates_ transitively when building docs</p>
<p>one never runs tests on dependency crates in the usual course of development</p>



<a name="274465638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274465638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274465638">(Mar 07 2022 at 22:09)</a>:</h4>
<p>Ah, I see.</p>



<a name="274465745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274465745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274465745">(Mar 07 2022 at 22:10)</a>:</h4>
<p>I don't feel like that's a complete non-starter, but I understand how it's different now, thank you.</p>



<a name="274465809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274465809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274465809">(Mar 07 2022 at 22:10)</a>:</h4>
<p>but also i fear problems on <a href="http://docs.rs">docs.rs</a> since it likely cannot give the ability to salvage broken dev-dep builds when the dev-deps need C dependencies</p>



<a name="274513056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274513056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274513056">(Mar 08 2022 at 09:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274446031">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274320686">said</a>:</p>
<blockquote>
<p>My issue is that we need to pass the feature manually for gtk-rs because there is no way currently to set "doc-features".</p>
</blockquote>
<p>I repeat, again, this is framed in terms of your attempted _solution_, whereas I still do not understand the core problem you are trying to fix.</p>
<p>Can you speak in terms of the desired end result, and follow your logic from there?</p>
</blockquote>
<p>I can take another example with the sdl2 crate: when documenting, you want all features to be enabled in order to have documentation for all parts of the crate (like <code>image</code> or <code>audio</code>).</p>



<a name="274524398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274524398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274524398">(Mar 08 2022 at 10:55)</a>:</h4>
<p>(and some of thee features could bring in dependencies)</p>



<a name="274562356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274562356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274562356">(Mar 08 2022 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> sure but why is transitivity needed?</p>



<a name="274562471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274562471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274562471">(Mar 08 2022 at 16:08)</a>:</h4>
<p>the problem you state is solved by --all-features or a documented dox feature as you're using</p>



<a name="274562528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274562528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274562528">(Mar 08 2022 at 16:09)</a>:</h4>
<p>so I need to know more about the problem space</p>



<a name="274562536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274562536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274562536">(Mar 08 2022 at 16:09)</a>:</h4>
<p>But that requires the user to pass it themselves. Unlike when running test, you can't have a default config</p>



<a name="274562581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274562581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274562581">(Mar 08 2022 at 16:09)</a>:</h4>
<p>I'm sorry, I'm so bad at explaining &gt;&lt;</p>



<a name="274563032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274563032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274563032">(Mar 08 2022 at 16:12)</a>:</h4>
<p>So there are 2 issues:</p>
<ul>
<li>We can't have features enabled/disabled "by default" when running <code>cargo doc</code> because the doc profile doesn't allow it (contrary to the dev profile).</li>
<li>We can't have dependencies specific to <code>cargo doc</code>.</li>
</ul>
<p>So for example, in sdl2, if someone runs <code>cargo doc</code> they won't have the full docs unless they manually enable them.</p>
<p>Another use case: <code>cfg(doc)</code> is mostly useless because the dependencies need to have a feature enabled in some cases. In gtk-rs, we use the <code>dox</code> feature to enable all of them so the dependencies are built with the needed features.</p>



<a name="274563625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274563625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274563625">(Mar 08 2022 at 16:15)</a>:</h4>
<p>okay</p>



<a name="274563837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274563837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274563837">(Mar 08 2022 at 16:17)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> why is it a big problem that the user has to pass it in themselves? Most of the time only the maintainers of a crate are running cargo doc on it, everyone else uses <a href="http://docs.rs">docs.rs</a> (and <a href="http://docs.rs">docs.rs</a> already lets you configure features)</p>



<a name="274563887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274563887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274563887">(Mar 08 2022 at 16:17)</a>:</h4>
<p>I'll point out, this is an issue for running tests too, you need to --all-features sometimes</p>



<a name="274564057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564057">(Mar 08 2022 at 16:18)</a>:</h4>
<p>(also fwiw no profile lets you set features)</p>



<a name="274564099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564099">(Mar 08 2022 at 16:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274564057">said</a>:</p>
<blockquote>
<p>(also fwiw no profile lets you set features)</p>
</blockquote>
<p>Ah my bad, I thought it was possible...</p>



<a name="274564105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564105">(Mar 08 2022 at 16:18)</a>:</h4>
<p>Also, so far I don't see why this feature needs to be transitive</p>



<a name="274564241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564241">(Mar 08 2022 at 16:19)</a>:</h4>
<p>Because of reexport.</p>



<a name="274564243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564243">(Mar 08 2022 at 16:19)</a>:</h4>
<p>I feel like you're talking about a larger issue around defaults (affects tests AND docs) that has historically not been considered an issue because the people who maintain a crate know what to do</p>



<a name="274564388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564388">(Mar 08 2022 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="327095">@Urgau</span> this is unhelpful</p>



<a name="274564448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564448">(Mar 08 2022 at 16:20)</a>:</h4>
<p>Taking my gtk-rs use case as example for the why it'd be needed again: we use the <code>dox</code> feature to enable versions (like <code>3_22</code>). So if you have:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[cfg(any(doc, feature = </span><span class="s">"v3_22"</span><span class="cp">)]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">arg</span>: <span class="nc">deps</span>::<span class="n">item_only_in_3_22</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>It won't work out of the blue.</p>



<a name="274564483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564483">(Mar 08 2022 at 16:20)</a>:</h4>
<p>So we use <code>dox</code> to go around this limitation.</p>



<a name="274564521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564521">(Mar 08 2022 at 16:21)</a>:</h4>
<p>right, I understand that</p>



<a name="274564586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564586">(Mar 08 2022 at 16:21)</a>:</h4>
<p>I still don't see where transitivity comes from this</p>



<a name="274564690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564690">(Mar 08 2022 at 16:22)</a>:</h4>
<p>I get that cfg(doc) is useless here. Let's move on from that</p>



<a name="274564745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564745">(Mar 08 2022 at 16:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274563837">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> why is it a big problem that the user has to pass it in themselves? Most of the time only the maintainers of a crate are running cargo doc on it, everyone else uses <a href="http://docs.rs">docs.rs</a> (and <a href="http://docs.rs">docs.rs</a> already lets you configure features)</p>
</blockquote>
<p>I'd argue that if you are traveling or in a place with no internet connection, then you can only use whatever you have locally. You don't always have access to <a href="http://docs.rs">docs.rs</a>. So making it easier for both crates maintainers and users to "control" how doc is built by default would be a nice improvement</p>



<a name="274564876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564876">(Mar 08 2022 at 16:23)</a>:</h4>
<p>And also, sometimes, docs built on <a href="http://docs.rs">docs.rs</a> are useless (gtk-rs again ^^')</p>



<a name="274564910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274564910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274564910">(Mar 08 2022 at 16:23)</a>:</h4>
<p>because of some restrictions or whatever (completely other debate)</p>



<a name="274565029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565029">(Mar 08 2022 at 16:24)</a>:</h4>
<p>and sometimes you are working with a crate which hasn't been published yet and want to have its documentation.</p>



<a name="274565035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565035">(Mar 08 2022 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="132040">@Manish Goregaokar</span> (I was responding to your previous comment).<br>
If you have a "core" crate that is reexported in there children and you want to document "core" with some specific feature but only for the documentation you can't.</p>



<a name="274565071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565071">(Mar 08 2022 at 16:24)</a>:</h4>
<p>Well, there are many use cases where having local documentation makes sense</p>



<a name="274565085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565085">(Mar 08 2022 at 16:24)</a>:</h4>
<p>of course</p>



<a name="274565300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565300">(Mar 08 2022 at 16:26)</a>:</h4>
<p>The biggest issue being described is that for example if you want to render latex, you have to use the latex crate which uses a proc-macro. And it doesn't make much sense to force it on every user if you don't use it.</p>



<a name="274565366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565366">(Mar 08 2022 at 16:26)</a>:</h4>
<p>Does it give you a better understanding or am I completely missing what you were asking?</p>



<a name="274565472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565472">(Mar 08 2022 at 16:27)</a>:</h4>
<p>y'all aren't doing that though</p>



<a name="274565485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565485">(Mar 08 2022 at 16:27)</a>:</h4>
<p>i understand notriddle's problem just fine</p>



<a name="274565524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565524">(Mar 08 2022 at 16:27)</a>:</h4>
<p>and i understand that sometimes folks need local docs</p>



<a name="274565646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565646">(Mar 08 2022 at 16:28)</a>:</h4>
<p>for the local doc case what i think most people do is either <code>--all-features</code> or check CONTRIBUTING.md for <code>--feature dox</code> or whatever</p>



<a name="274565667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565667">(Mar 08 2022 at 16:28)</a>:</h4>
<p>this doesn't explain why it needs to be transitive</p>



<a name="274565779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565779">(Mar 08 2022 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="327095">@Urgau</span> yes but you don't need doc default features to be transitive for that, you define your feature deps</p>



<a name="274565793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565793">(Mar 08 2022 at 16:29)</a>:</h4>
<p>Then maybe I'm not understanding: by "it needs to be transitive", you mean "why does it needs to be impacted on the dependencies as well"?</p>



<a name="274565805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565805">(Mar 08 2022 at 16:29)</a>:</h4>
<p>yes</p>



<a name="274565816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565816">(Mar 08 2022 at 16:29)</a>:</h4>
<p>okay, let me rephrase</p>



<a name="274565847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565847">(Mar 08 2022 at 16:29)</a>:</h4>
<p>because most of your solutions have had this property and you have been asking for this property before</p>



<a name="274565888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565888">(Mar 08 2022 at 16:29)</a>:</h4>
<p>let's say i have a crate <code>foo</code></p>



<a name="274565896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565896">(Mar 08 2022 at 16:30)</a>:</h4>
<p>and it depends on gtk-rs</p>



<a name="274565964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274565964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274565964">(Mar 08 2022 at 16:30)</a>:</h4>
<p>do _you_ (not notriddle, ignore the latex case for now)</p>



<a name="274566035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566035">(Mar 08 2022 at 16:30)</a>:</h4>
<p>do _you_ need <code>cargo doc</code> on <code>foo</code> to enable to <code>dox</code> feature on gtk-rs too</p>



<a name="274566037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566037">(Mar 08 2022 at 16:30)</a>:</h4>
<p>and why</p>



<a name="274566162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566162">(Mar 08 2022 at 16:31)</a>:</h4>
<p>It depends if <code>foo</code> is a library or a binary. If it's a library, it's very likely that you have different versions (handled with features). If it's a binary you don't really care since the version of <code>gtk-rs</code> is set in stone</p>



<a name="274566384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566384">(Mar 08 2022 at 16:32)</a>:</h4>
<p>So if you want to document all versions of <code>foo</code>, you have to use a higher version of <code>gtk-rs</code> as well.</p>



<a name="274566472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566472">(Mar 08 2022 at 16:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274565779">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="327095">Urgau</span> yes but you don't need doc default features to be transitive for that, you define your feature deps</p>
</blockquote>
<p>yeah, but that only works if you define it in your feature deps, you may not want to enable a feature by default in your deps but want that feature do be enable by default for doc</p>



<a name="274566669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566669">(Mar 08 2022 at 16:34)</a>:</h4>
<p>okay, but this sounds like <code>foo</code> will have a bunch of features that transitively enable features on gtk-rs, and now it's <code>foo</code>'s problem to figure out how it wants to do doc defaults</p>



<a name="274566700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566700">(Mar 08 2022 at 16:34)</a>:</h4>
<p>like, it doesn't sound like we need doc defaults to be transitive</p>



<a name="274566770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566770">(Mar 08 2022 at 16:35)</a>:</h4>
<p>instead, whatever solution we need for doc defaults works here too</p>



<a name="274566847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566847">(Mar 08 2022 at 16:35)</a>:</h4>
<p>That would make things simpler and remove some pain points. Just like what we do for <a href="http://docs.rs">docs.rs</a> in the end</p>



<a name="274566897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566897">(Mar 08 2022 at 16:36)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> without getting too far into a solution, how big a deal would it be for _profiles_ to define default features. all of them. for local development only, not handled in dependencies. some way to make it work for workspaces.</p>



<a name="274566942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566942">(Mar 08 2022 at 16:36)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> correct. this is why i was pushing back against the solutions earlier, they seemed to be solving problems i couldn't see</p>



<a name="274566992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274566992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274566992">(Mar 08 2022 at 16:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274566897">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> without getting too far into a solution, how big a deal would it be for _profiles_ to define default features. all of them. for local development only, not handled in dependencies</p>
</blockquote>
<p>That would solve the latex issue so that'd be a very nice start :)</p>



<a name="274567023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567023">(Mar 08 2022 at 16:37)</a>:</h4>
<p>actually it _doesn't_ solve the latex issue, not that well</p>



<a name="274567054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567054">(Mar 08 2022 at 16:37)</a>:</h4>
<p>Ah? Why not? If latex is optional, wouldn't it fix it?</p>



<a name="274567110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567110">(Mar 08 2022 at 16:37)</a>:</h4>
<p>Then the doc profile would enable the dep. What am I missing?</p>



<a name="274567349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567349">(Mar 08 2022 at 16:39)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> yeah but if <code>foo</code> uses a crate <code>mathy_stuff</code> this means <code>foo</code> _needs to know_ to enable this feature. that's _kinda_ fine  to me but i wouldn't claim we have fully solved the problem :)</p>



<a name="274567368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567368">(Mar 08 2022 at 16:39)</a>:</h4>
<p>whereas in your case <code>foo</code> already knows which dep features it uses</p>



<a name="274567472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567472">(Mar 08 2022 at 16:40)</a>:</h4>
<p>Oh I see. So once again we're back to the transitive issue.</p>



<a name="274567485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567485">(Mar 08 2022 at 16:40)</a>:</h4>
<p>well</p>



<a name="274567527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567527">(Mar 08 2022 at 16:40)</a>:</h4>
<p>also the reason i propose this for _all_ profiles is that this has been a problem for <code>cargo test</code> for ages</p>



<a name="274567618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567618">(Mar 08 2022 at 16:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274567472">said</a>:</p>
<blockquote>
<p>Oh I see. So once again we're back to the transitive issue.</p>
</blockquote>
<p>we  might be, however i'm not sure if we have to consider "this dependency is heavy but only needed for docs" to be a huge deal</p>



<a name="274567626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567626">(Mar 08 2022 at 16:41)</a>:</h4>
<p>I thought it was already done for <code>cargo test</code> because I remember a discussion about it years ago. My bad.</p>



<a name="274567694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567694">(Mar 08 2022 at 16:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274567618">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274567472">said</a>:</p>
<blockquote>
<p>Oh I see. So once again we're back to the transitive issue.</p>
</blockquote>
<p>we  might be, however i'm not sure if we have to consider "this dependency is heavy but only needed for docs" to be a huge deal</p>
</blockquote>
<p>It's problematic if the crate is changing source code.</p>



<a name="274567773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567773">(Mar 08 2022 at 16:42)</a>:</h4>
<p>oh i mean you would still <code>cfg(doc)</code> it , the problem just becomes that there's a useless dep being pulled in :)</p>



<a name="274567808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274567808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274567808">(Mar 08 2022 at 16:42)</a>:</h4>
<p>that's not a _huge_ problem in my book</p>



<a name="274568000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274568000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274568000">(Mar 08 2022 at 16:43)</a>:</h4>
<p>No I meant like your source code could be updated literally.</p>



<a name="274568121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274568121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274568121">(Mar 08 2022 at 16:44)</a>:</h4>
<p>In gtk-rs we put back the doc comments into the source code (which is why it doesn't work on <a href="http://docs.rs">docs.rs</a> because it's read only).</p>



<a name="274568177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274568177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274568177">(Mar 08 2022 at 16:45)</a>:</h4>
<p>As for latex, I'm not sure. But if they update source code, it means it'll be rebuilt every time, so not great either.</p>



<a name="274568411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274568411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274568411">(Mar 08 2022 at 16:46)</a>:</h4>
<p>Ah no right! The problem with latex is that it's pulling in a C dependency which could be problematic.</p>



<a name="274735111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274735111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274735111">(Mar 09 2022 at 18:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies/near/274568411">said</a>:</p>
<blockquote>
<p>Ah no right! The problem with latex is that it's pulling in a C dependency which could be problematic.</p>
</blockquote>
<p><span class="user-mention" data-user-id="132040">@Manish Goregaokar</span>  Not sure if you saw it but it was the actual issue with latex ^</p>



<a name="274743013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274743013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274743013">(Mar 09 2022 at 19:53)</a>:</h4>
<p>yeah i got that</p>



<a name="274743058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274743058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274743058">(Mar 09 2022 at 19:53)</a>:</h4>
<p>i do think "proc macro for docs" is a rather weird use case and we have to decide if we really want to support that well</p>



<a name="274743066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274743066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274743066">(Mar 09 2022 at 19:53)</a>:</h4>
<p>and when i say "we" i include cargo</p>



<a name="274743167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/meeting%20with%20cargo%20team%20to%20discuss%20doc-dependencies/near/274743167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/meeting.20with.20cargo.20team.20to.20discuss.20doc-dependencies.html#274743167">(Mar 09 2022 at 19:54)</a>:</h4>
<p>The problem isn't the proc macro here but the C library which is used by the proc macro.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
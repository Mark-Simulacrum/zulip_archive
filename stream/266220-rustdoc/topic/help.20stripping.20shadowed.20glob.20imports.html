<html>
<head><meta charset="utf-8"><title>help stripping shadowed glob imports · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/help.20stripping.20shadowed.20glob.20imports.html">help stripping shadowed glob imports</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252305213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/help%20stripping%20shadowed%20glob%20imports/near/252305213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ali MJ Al-Nasrawy <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/help.20stripping.20shadowed.20glob.20imports.html#252305213">(Sep 07 2021 at 13:31)</a>:</h4>
<p>Hi, I claimed <a href="https://github.com/rust-lang/rust/issues/70380">#70380</a> as my first issue and I'd like to have some input on my suggested solution.</p>
<p>The problem is here in <a href="https://github.com/rust-lang/rust/blob/385f8e2078b00282a7a7ffcd58aad17b405f57bf/src/librustdoc/visit_ast.rs#L196">this code</a>, which adds glob imported items unconditionally to the module</p>
<p>I would fix this by adding <code>shadowable</code> flag to  <code>doctree::Module</code> items and then have a second pass <a href="https://github.com/rust-lang/rust/blob/385f8e2078b00282a7a7ffcd58aad17b405f57bf/src/librustdoc/visit_ast.rs#L104">here</a> to strinp shadowed symbols.</p>
<p>Would that be ok?  Any other suggestion?</p>



<a name="252309990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/help%20stripping%20shadowed%20glob%20imports/near/252309990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/help.20stripping.20shadowed.20glob.20imports.html#252309990">(Sep 07 2021 at 14:03)</a>:</h4>
<p>I don't have time to look into it right now, but I suggest looking at how <a href="https://github.com/rust-lang/rust/pull/83872">https://github.com/rust-lang/rust/pull/83872</a> did it</p>



<a name="252310062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/help%20stripping%20shadowed%20glob%20imports/near/252310062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/help.20stripping.20shadowed.20glob.20imports.html#252310062">(Sep 07 2021 at 14:03)</a>:</h4>
<p>Also, why would you need a second pass? Why not just strip the item immediately?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Building rustdoc out of tree #79540 · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html">Building rustdoc out of tree #79540</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="218227437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218227437" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218227437">(Nov 29 2020 at 19:53)</a>:</h4>
<p>one issue is that the <code>rust-toolchain</code> file will be constantly out of date, since rustc is always breaking :/</p>



<a name="218227444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218227444" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218227444">(Nov 29 2020 at 19:53)</a>:</h4>
<p>not much I can do about that though, other than toolstate</p>



<a name="218228072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228072">(Nov 29 2020 at 20:07)</a>:</h4>
<p>Does this mean that we just have to rebuild rustdoc each time we update nightly?</p>



<a name="218228075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228075">(Nov 29 2020 at 20:07)</a>:</h4>
<p>yes</p>



<a name="218228125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228125">(Nov 29 2020 at 20:08)</a>:</h4>
<p>That's seems reasonable (even if slightly annoying). If someone is developing  on rustdoc, I don't think he will need to update nightly every day</p>



<a name="218228130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228130">(Nov 29 2020 at 20:08)</a>:</h4>
<p>well, almost every day <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="218228134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228134">(Nov 29 2020 at 20:08)</a>:</h4>
<p>see above about toolstate</p>



<a name="218228137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228137">(Nov 29 2020 at 20:08)</a>:</h4>
<p>rustc changes frequently</p>



<a name="218228151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228151">(Nov 29 2020 at 20:09)</a>:</h4>
<p>also when rebasing it will download a new toolchain too, since rebasing changes the version of rustc you're building against</p>



<a name="218228405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228405" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228405">(Nov 29 2020 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree/near/218228151">said</a>:</p>
<blockquote>
<p>also when rebasing it will download a new toolchain too, since rebasing changes the version of rustc you're building against</p>
</blockquote>
<p>the reason that doesn't normally rebuild is x.py has some logic that say "just pretend all master toolchains are the same" <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> which has its own issues <a href="https://github.com/rust-lang/rust/issues/76720">https://github.com/rust-lang/rust/issues/76720</a></p>



<a name="218228480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228480">(Nov 29 2020 at 20:17)</a>:</h4>
<p>ok, so here are the flags <code>x.py</code> invokes compiletest with:</p>
<div class="codehilite"><pre><span></span><code>running: &quot;/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/stage0-tools-bin/compiletest&quot; &quot;--compile-lib-path&quot; &quot;/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/stage1/lib&quot; &quot;--run-lib-path&quot; &quot;/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib&quot; &quot;--rustc-path&quot; &quot;/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/stage1/bin/rustc&quot; &quot;--rustdoc-path&quot; &quot;/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/stage1/bin/rustdoc&quot; &quot;--src-base&quot; &quot;/home/joshua/rustc2/src/test/rustdoc&quot; &quot;--build-base&quot; &quot;/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/test/rustdoc&quot; &quot;--stage-id&quot; &quot;stage1-x86_64-unknown-linux-gnu&quot; &quot;--suite&quot; &quot;rustdoc&quot; &quot;--mode&quot; &quot;rustdoc&quot; &quot;--target&quot; &quot;x86_64-unknown-linux-gnu&quot; &quot;--host&quot; &quot;x86_64-unknown-linux-gnu&quot; &quot;--llvm-filecheck&quot; &quot;/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/ci-llvm/bin/FileCheck&quot; &quot;--host-rustcflags&quot; &quot;-Crpath -O -Cdebuginfo=0 -Zunstable-options  -Lnative=/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/native/rust-test-helpers&quot; &quot;--target-rustcflags&quot; &quot;-Crpath -O -Cdebuginfo=0 -Zunstable-options  -Lnative=/home/joshua/rustc2/build/x86_64-unknown-linux-gnu/native/rust-test-helpers&quot; &quot;--docck-python&quot; &quot;/usr/bin/python&quot; &quot;--lldb-python&quot; &quot;/usr/bin/python&quot; &quot;--gdb&quot; &quot;/usr/bin/gdb&quot; &quot;self&quot; &quot;--verbose&quot; &quot;--quiet&quot; &quot;--llvm-version&quot; &quot;11.0.0-rust-1.49.0-nightly&quot; &quot;--llvm-components&quot; &quot;aarch64 aarch64asmparser aarch64codegen aarch64desc aarch64disassembler aarch64info aarch64utils aggressiveinstcombine all all-targets analysis arm armasmparser armcodegen armdesc armdisassembler arminfo armutils asmparser asmprinter avr avrasmparser avrcodegen avrdesc avrdisassembler avrinfo binaryformat bitreader bitstreamreader bitwriter cfguard codegen core coroutines coverage debuginfocodeview debuginfodwarf debuginfogsym debuginfomsf debuginfopdb demangle dlltooldriver dwarflinker engine executionengine extensions frontendopenmp fuzzmutate globalisel hexagon hexagonasmparser hexagoncodegen hexagondesc hexagondisassembler hexagoninfo instcombine instrumentation interpreter ipo irreader jitlink libdriver lineeditor linker lto mc mca mcdisassembler mcjit mcparser mips mipsasmparser mipscodegen mipsdesc mipsdisassembler mipsinfo mirparser msp430 msp430asmparser msp430codegen msp430desc msp430disassembler msp430info native nativecodegen nvptx nvptxcodegen nvptxdesc nvptxinfo objcarcopts object objectyaml option orcerror orcjit passes powerpc powerpcasmparser powerpccodegen powerpcdesc powerpcdisassembler powerpcinfo profiledata remarks riscv riscvasmparser riscvcodegen riscvdesc riscvdisassembler riscvinfo riscvutils runtimedyld scalaropts selectiondag sparc sparcasmparser sparccodegen sparcdesc sparcdisassembler sparcinfo support symbolize systemz systemzasmparser systemzcodegen systemzdesc systemzdisassembler systemzinfo tablegen target textapi transformutils vectorize webassembly webassemblyasmparser webassemblycodegen webassemblydesc webassemblydisassembler webassemblyinfo windowsmanifest x86 x86asmparser x86codegen x86desc x86disassembler x86info xray&quot; &quot;--cc&quot; &quot;&quot; &quot;--cxx&quot; &quot;&quot; &quot;--cflags&quot; &quot;&quot; &quot;--adb-path&quot; &quot;adb&quot; &quot;--adb-test-dir&quot; &quot;/data/tmp/work&quot; &quot;--android-cross-path&quot; &quot;&quot;
</code></pre></div>



<a name="218228482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228482">(Nov 29 2020 at 20:17)</a>:</h4>
<p>I'm hoping not all of those are actually necessary</p>



<a name="218228524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228524" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228524">(Nov 29 2020 at 20:18)</a>:</h4>
<p>let me see how clippy does this</p>



<a name="218228555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228555">(Nov 29 2020 at 20:20)</a>:</h4>
<p>oh boy <a href="https://github.com/rust-lang/rust-clippy/blob/master/tests/compile-test.rs">https://github.com/rust-lang/rust-clippy/blob/master/tests/compile-test.rs</a></p>



<a name="218228777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228777">(Nov 29 2020 at 20:25)</a>:</h4>
<p>ok, I'm going to steal a page from clippy's book and use the stable version instead of the in-tree compile test</p>



<a name="218228782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228782" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228782">(Nov 29 2020 at 20:26)</a>:</h4>
<p>it will rebuild a little more but I don't expect anyone to use both</p>



<a name="218228826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218228826" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218228826">(Nov 29 2020 at 20:26)</a>:</h4>
<p>the in-tree one is only meant to be used as a binary and I would rather not put a build system in for the tests themselves</p>



<a name="218229022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229022">(Nov 29 2020 at 20:31)</a>:</h4>
<p><span class="user-mention" data-user-id="132040">@Manish Goregaokar</span> does compiletest_rs have a way to run ui tests for rustdoc?</p>



<a name="218229025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229025">(Nov 29 2020 at 20:31)</a>:</h4>
<p>telling it rustdoc is actually rustc seems doomed to failure</p>



<a name="218229177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229177" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229177">(Nov 29 2020 at 20:34)</a>:</h4>
<p>... is it still maintained? april was a while ago ...</p>



<a name="218229206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229206" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229206">(Nov 29 2020 at 20:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree/near/218228130">said</a>:</p>
<blockquote>
<p>well, almost every day <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>Do you really update your nightly every day?</p>



<a name="218229212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229212">(Nov 29 2020 at 20:35)</a>:</h4>
<p>actually I just realized this will be missing all the diff stuff I just added to rustdoc which is really unfortunate <a href="https://github.com/rust-lang/rust/pull/78752">https://github.com/rust-lang/rust/pull/78752</a> - does <code>compiletest_rs</code> sync with the upstream version at all?</p>



<a name="218229251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229251">(Nov 29 2020 at 20:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281841">Robin Moussu</span> <a href="#narrow/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree/near/218229206">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree/near/218228130">said</a>:</p>
<blockquote>
<p>well, almost every day <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>Do you really update your nightly every day?</p>
</blockquote>
<p>I don't use nightly at all, but you'd have to to build rustdoc without x.py</p>



<a name="218229253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229253" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229253">(Nov 29 2020 at 20:36)</a>:</h4>
<p>you need the version of nightly that matches the source you have in-tree</p>



<a name="218229270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229270">(Nov 29 2020 at 20:37)</a>:</h4>
<p>ah, yes. I was in the shoes of someone who build rustdoc, not use it for documenting rustc. Then yes, it's kind of anoying.</p>



<a name="218229289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229289" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229289">(Nov 29 2020 at 20:37)</a>:</h4>
<p>building is what matters, not documenting</p>



<a name="218229290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229290" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229290">(Nov 29 2020 at 20:38)</a>:</h4>
<p>rustdoc is using rustc's internal APIs</p>



<a name="218229354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229354">(Nov 29 2020 at 20:39)</a>:</h4>
<p>but why do you need to build rustdoc as frequently? The CI nighly build, but no humans. Or am I missing something obvious?</p>



<a name="218229367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229367">(Nov 29 2020 at 20:39)</a>:</h4>
<p>I don't understand - are you asking whether I build <em>rustdoc</em> almost every day?</p>



<a name="218229369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229369">(Nov 29 2020 at 20:39)</a>:</h4>
<p>(yes)</p>



<a name="218229499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229499" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229499">(Nov 29 2020 at 20:42)</a>:</h4>
<p>Usually when I work on something, I fetch the master, work on it for as much time as needed, then (if needed) fetch again master, and rebase my branch. If I was working on rustdoc, I don't think I would fetch the master branch every day, unless I know something I'm working on depends on someone else work. I would fetch more realistically about one time a week I think. (this assume a somewhat stable codebase).</p>



<a name="218229520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229520">(Nov 29 2020 at 20:43)</a>:</h4>
<p>oh I see what you mean - you're asking if I <em>rebase</em> every day</p>



<a name="218229525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229525">(Nov 29 2020 at 20:43)</a>:</h4>
<blockquote>
<p>are you asking whether I build <em>rustdoc</em> almost every day?</p>
</blockquote>
<p>rustdoc with up-to-date source fresh from the day</p>



<a name="218229527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229527">(Nov 29 2020 at 20:43)</a>:</h4>
<p>it depends on the PRs I'm working on, I probably rebase a lot more than most contirbutors</p>



<a name="218229533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229533" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229533">(Nov 29 2020 at 20:43)</a>:</h4>
<p>Ah, then yes, it would be really annoying for you.</p>



<a name="218229534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229534">(Nov 29 2020 at 20:43)</a>:</h4>
<p>I'd say probably almost every day though, yeah</p>



<a name="218229539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229539">(Nov 29 2020 at 20:43)</a>:</h4>
<p>I got a new computer just so it wouldn't take as long to build rustc <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="218229608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229608">(Nov 29 2020 at 20:44)</a>:</h4>
<p>especially for big PRs that need changes to rustc internals, and I need to compare before and after</p>



<a name="218229627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229627">(Nov 29 2020 at 20:45)</a>:</h4>
<p>(note that I'm being very careful throughout this whole discussion to not change the process of building with x.py at all)</p>



<a name="218229676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218229676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Moussu <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218229676">(Nov 29 2020 at 20:46)</a>:</h4>
<p>Anyway, it's time for me to eat, have a great day</p>



<a name="218232577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218232577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218232577">(Nov 29 2020 at 21:53)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/79540">https://github.com/rust-lang/rust/pull/79540</a></p>



<a name="218241410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218241410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218241410">(Nov 30 2020 at 01:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree/near/218229022">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="132040">Manish Goregaokar</span> does compiletest_rs have a way to run ui tests for rustdoc?</p>
</blockquote>
<p>no idea. IMO we should actually move compiletest out of tree and stop maintaining it in tree</p>



<a name="218241427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218241427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218241427">(Nov 30 2020 at 01:45)</a>:</h4>
<p>oh I was actually thinking the other way, turning compiletest in-tree into a library and changing clippy to use a git dependency</p>



<a name="218241433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218241433" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218241433">(Nov 30 2020 at 01:46)</a>:</h4>
<p>that's less work for both sides: no more syncs, and it's easy to modify in-tree if needed</p>



<a name="218241481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218241481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218241481">(Nov 30 2020 at 01:46)</a>:</h4>
<p>(although I was even thinking of cargo changes, but we don't need to wait for those: <a href="#narrow/stream/246057-t-cargo/topic/Depend.20on.20a.20binary.3F">https://rust-lang.zulipchat.com/#narrow/stream/246057-t-cargo/topic/Depend.20on.20a.20binary.3F</a>)</p>



<a name="218241549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218241549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218241549">(Nov 30 2020 at 01:48)</a>:</h4>
<p>the current plan for <em>rustdoc</em> is actually to use x.py still though <a href="https://github.com/rust-lang/rust/pull/79540">https://github.com/rust-lang/rust/pull/79540</a></p>



<a name="218616627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218616627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218616627">(Dec 02 2020 at 20:42)</a>:</h4>
<p>this is currently blocked on me figuring out how to slot things into rustbuild's caching, which is based on TypeId of all things: <a href="https://github.com/rust-lang/rust/pull/79540#issuecomment-735942001">https://github.com/rust-lang/rust/pull/79540#issuecomment-735942001</a></p>



<a name="218764240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218764240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218764240">(Dec 03 2020 at 22:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you happen to have time to suggest an approach? no rush, but I don't want to jump into coding when I don't know how you want it tackled</p>



<a name="218764355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218764355" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218764355">(Dec 03 2020 at 22:32)</a>:</h4>
<p>uh not right this minute but if you want to assign me and set waiting-on-review I hope to schedule some review time this weekend, can engage more then (leave a comment too)</p>



<a name="218764392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/218764392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#218764392">(Dec 03 2020 at 22:33)</a>:</h4>
<p>sounds great, thanks!</p>



<a name="220994581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/220994581" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#220994581">(Dec 27 2020 at 05:26)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> I have a christmas present for you :) <a href="https://github.com/rust-lang/rust/pull/79540">https://github.com/rust-lang/rust/pull/79540</a> is working</p>



<a name="221011398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221011398" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221011398">(Dec 27 2020 at 14:55)</a>:</h4>
<p>Awesome! \o/</p>



<a name="221012296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012296">(Dec 27 2020 at 15:22)</a>:</h4>
<p>lol I tried to rebase this over a 6-month old commit to see what would break and even git got confused - it was a commit from rustc_codegen_cranelift before the submodule sync <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="221012305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012305" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012305">(Dec 27 2020 at 15:22)</a>:</h4>
<p>Don't try stuff like that! :o</p>



<a name="221012318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012318">(Dec 27 2020 at 15:23)</a>:</h4>
<p>when I have too much problems, I simply switch to master and then either port commits by hand (sometimes it works better) or cherry-pick them</p>



<a name="221012320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012320" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012320">(Dec 27 2020 at 15:23)</a>:</h4>
<p>well in practice it probably doesn't matter, but if someone tries this with an old enough commit it will break: </p>
<blockquote>
<p>This will break if you rebase an old enough branch (I think commits are kept at most 160 days?). This should fail gracefully and build from source in that case, possibly suggesting to rebase to a later commit.</p>
</blockquote>



<a name="221012324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012324" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012324">(Dec 27 2020 at 15:23)</a>:</h4>
<p>my oldest rebase was years late</p>



<a name="221012326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012326">(Dec 27 2020 at 15:23)</a>:</h4>
<p>it was horrible haha</p>



<a name="221012438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012438">(Dec 27 2020 at 15:27)</a>:</h4>
<p>well the difference is this will break <em>before</em> the rebase</p>



<a name="221012439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221012439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221012439">(Dec 27 2020 at 15:27)</a>:</h4>
<p>just by the passage of time</p>



<a name="221013014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221013014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221013014">(Dec 27 2020 at 15:45)</a>:</h4>
<blockquote>
<p>Since tracing is loaded from sysroot, it will be compiled with static_max_level_info even for rustdoc's own debugging.</p>
</blockquote>
<p>by the way, if someone has ideas for fixing this, please let me know</p>



<a name="221032096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221032096" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221032096">(Dec 28 2020 at 01:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540/near/221013014">said</a>:</p>
<blockquote>
<blockquote>
<p>Since tracing is loaded from sysroot, it will be compiled with static_max_level_info even for rustdoc's own debugging.</p>
</blockquote>
<p>by the way, if someone has ideas for fixing this, please let me know</p>
</blockquote>
<p>Ask in <a class="stream" data-stream-id="182449" href="/#narrow/stream/182449-t-compiler.2Fhelp">#t-compiler/help</a>? Probably unlikely someone will find the question here :)</p>



<a name="221078434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221078434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221078434">(Dec 28 2020 at 17:57)</a>:</h4>
<p><a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/Rustc.20loads.20sysroot.20artifacts.20before.20cargo.20ones.3F">https://rust-lang.zulipchat.com/#narrow/stream/182449-t-compiler.2Fhelp/topic/Rustc.20loads.20sysroot.20artifacts.20before.20cargo.20ones.3F</a></p>



<a name="221081663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221081663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221081663">(Dec 28 2020 at 18:39)</a>:</h4>
<p>and already solved! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="221081687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/221081687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#221081687">(Dec 28 2020 at 18:39)</a>:</h4>
<p>down to 3 issues, only one of which I consider blocking</p>



<a name="222019825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/222019825" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#222019825">(Jan 08 2021 at 00:11)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you have a minute to look at <a href="https://github.com/rust-lang/rust/pull/79540#issuecomment-751953277">https://github.com/rust-lang/rust/pull/79540#issuecomment-751953277</a> ?</p>



<a name="222019849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/222019849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#222019849">(Jan 08 2021 at 00:11)</a>:</h4>
<p>not right now, it's in my queue of prs. hopefully tomorrow or this weekend.</p>



<a name="222019856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/222019856" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#222019856">(Jan 08 2021 at 00:11)</a>:</h4>
<p>sounds great, thanks!</p>



<a name="222097342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/222097342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#222097342">(Jan 08 2021 at 17:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I saw you left a review, thanks. It was mostly focused on the implementation - could you take a look at <a href="https://github.com/rust-lang/rust/pull/79540#issuecomment-751953277">https://github.com/rust-lang/rust/pull/79540#issuecomment-751953277</a> ? I think it's a better approach but it means a lot of the current code will change.</p>



<a name="222097365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/222097365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#222097365">(Jan 08 2021 at 17:04)</a>:</h4>
<p>yes I am coming back to that</p>



<a name="222123829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Building%20rustdoc%20out%20of%20tree%20%2379540/near/222123829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/Building.20rustdoc.20out.20of.20tree.20.2379540.html#222123829">(Jan 08 2021 at 20:48)</a>:</h4>
<p>(probably tomorrow morning)</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>unstable features · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html">unstable features</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260579378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260579378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260579378">(Nov 07 2021 at 15:16)</a>:</h4>
<p>Rustdoc has a lot of unstable features. A lot of them haven't gone through RFC and are of questionable utility (is anyone actually using <code>--disable-minification</code> or <code>--sort-modules-by-appearance</code>?). I think we should go through them and sort them into 3 categories:</p>
<ul>
<li>should stabilize soon, just need feedback from people using them on nightly</li>
<li>need an RFC to keep</li>
<li>burn with fire</li>
</ul>
<p>and to avoid people getting mad their favorite feature is being removed we can say "we'll readd this if it goes through RFC".</p>
<p>I have opinions on which should stay and go, but before I list them all, does that basic idea sound good?</p>



<a name="260579608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260579608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260579608">(Nov 07 2021 at 15:21)</a>:</h4>
<p>here are the current unstable options:</p>
<div class="codehilite"><pre><span></span><code>$ rg &#39;unstable\(&quot;&#39; src/librustdoc/lib.rs
291:        unstable(&quot;extern-html-root-url&quot;, |o| {
300:        unstable(&quot;extern-html-root-takes-precedence&quot;, |o| {
325:        unstable(&quot;document-hidden-items&quot;, |o| {
332:        unstable(&quot;test-run-directory&quot;, |o| {
376:        unstable(&quot;markdown-before-content&quot;, |o| {
385:        unstable(&quot;markdown-after-content&quot;, |o| {
410:        unstable(&quot;Z&quot;, |o| {
414:        unstable(&quot;playground-url&quot;, |o| {
423:        unstable(&quot;display-doctest-warnings&quot;, |o| {
433:        unstable(&quot;sort-modules-by-appearance&quot;, |o| {
450:        unstable(&quot;default-setting&quot;, |o| {
471:        unstable(&quot;resource-suffix&quot;, |o| {
510:        unstable(&quot;disable-minification&quot;, |o| {
528:        unstable(&quot;index-page&quot;, |o| {
531:        unstable(&quot;enable-index-page&quot;, |o| {
534:        unstable(&quot;static-root-path&quot;, |o| {
543:        unstable(&quot;disable-per-crate-search&quot;, |o| {
550:        unstable(&quot;persist-doctests&quot;, |o| {
558:        unstable(&quot;show-coverage&quot;, |o| {
565:        unstable(&quot;enable-per-target-ignores&quot;, |o| {
572:        unstable(&quot;runtool&quot;, |o| {
580:        unstable(&quot;runtool-arg&quot;, |o| {
588:        unstable(&quot;test-builder&quot;, |o| {
591:        unstable(&quot;check&quot;, |o| o.optflagmulti(&quot;&quot;, &quot;check&quot;, &quot;Run rustdoc checks&quot;)),
592:        unstable(&quot;generate-redirect-map&quot;, |o| {
599:        unstable(&quot;emit&quot;, |o| {
607:        unstable(&quot;no-run&quot;, |o| {
610:        unstable(&quot;show-type-layout&quot;, |o| {
613:        unstable(&quot;nocapture&quot;, |o| {
616:        unstable(&quot;generate-link-to-definition&quot;, |o| {
623:        unstable(&quot;scrape-examples-output-path&quot;, |o| {
631:        unstable(&quot;scrape-examples-target-crate&quot;, |o| {
639:        unstable(&quot;with-examples&quot;, |o| {
$ rg debugging_opts src/librustdoc/lib.rs
src/librustdoc/clean/mod.rs
1364:    if !cx.tcx.sess.opts.debugging_opts.normalize_docs {
$ rg is_unstable_enabled src/librustdoc/ -C2
src/librustdoc/config.rs
393-        if !matches!(matches.opt_str(&quot;output-format&quot;).as_deref(), None | Some(&quot;html&quot;))
394-            &amp;&amp; !matches.opt_present(&quot;show-coverage&quot;)
395:            &amp;&amp; !nightly_options::is_unstable_enabled(matches)
396-        {
397-            rustc_session::early_error(
$ rg doc compiler/rustc_feature/src/active.rs
    /// Allows `#[doc(notable_trait)]`.
    /// Renamed from `doc_spotlight`.
    (active, doc_notable_trait, &quot;1.52.0&quot;, Some(45040), None),
    /// Allows `#[doc(cfg(...))]`.
    (active, doc_cfg, &quot;1.21.0&quot;, Some(43781), None),
    /// Allows `#[doc(masked)]`.
    (active, doc_masked, &quot;1.21.0&quot;, Some(44027), None),
    /// Allows using `#[doc(keyword = &quot;...&quot;)]`.
    (active, doc_keyword, &quot;1.28.0&quot;, Some(51315), None),
    /// Allows using `pointer` and `reference` in intra-doc links
    (active, intra_doc_pointers, &quot;1.51.0&quot;, Some(80896), None),
    /// Allows using doc(primitive) without a future-incompat warning
    (active, doc_primitive, &quot;1.56.0&quot;, Some(88070), None),
    /// Allows `#[doc(cfg_hide(...))]`.
    (active, doc_cfg_hide, &quot;1.57.0&quot;, Some(43781), None),
    /// Tells rustdoc to automatically generate `#[doc(cfg(...))]`.
    (active, doc_auto_cfg, &quot;1.58.0&quot;, Some(43781), None),
</code></pre></div>



<a name="260580231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260580231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260580231">(Nov 07 2021 at 15:32)</a>:</h4>
<p>(a bunch of these don't even have tracking issues)</p>



<a name="260581517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260581517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260581517">(Nov 07 2021 at 15:59)</a>:</h4>
<p>Sounds good to me!</p>



<a name="260582615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260582615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260582615">(Nov 07 2021 at 16:19)</a>:</h4>
<p>I like the general concept. I have used <code>--disable-minification</code> during rustdoc dev. It's been useful so that when I load a page in the browser and look at CSS or JS, it actually has multiple lines. I also used it so I could edit CSS and JS in-place in a doc tree, then copy them back into the rustdoc source when I was satisfied. However, I'm okay getting rid of it for now. What I really want long term is a rustdoc "dev mode" that does a few things:</p>
<ul>
<li>Live-reloads JS and CSS without having to rebuild rustdoc</li>
<li>Disables minification</li>
</ul>
<p>Also, a bit of tangent: right now we transform our main CSS and JS before display. That makes it hard to edit JS and CSS "in-place" and copy it back, since you wind up with spurious diffs. I'd love to figure out a way for our main CSS and JS to get copied straight through, and have the small stuff that needs modifications come in somewhere else - maybe inline, or from a smaller auxiliary file.</p>



<a name="260582733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260582733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260582733">(Nov 07 2021 at 16:21)</a>:</h4>
<p>yeah, adding a compile-time "dev mode" feature seems like a better approach than exposing this to all users</p>



<a name="260584692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260584692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260584692">(Nov 07 2021 at 17:03)</a>:</h4>
<p>Oh my, that is a lot of unstable features!</p>



<a name="260584695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260584695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260584695">(Nov 07 2021 at 17:03)</a>:</h4>
<p>Trimming them down sounds good.</p>



<a name="260584763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260584763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260584763">(Nov 07 2021 at 17:04)</a>:</h4>
<p>Some of them might be unstable because they're only used internally (e.g., in <code>std</code>), I think.</p>



<a name="260735679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260735679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260735679">(Nov 08 2021 at 23:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/266220-rustdoc/topic/unstable.20features/near/260584763">said</a>:</p>
<blockquote>
<p>Some of them might be unstable because they're only used internally (e.g., in <code>std</code>), I think.</p>
</blockquote>
<p>definitely - but I think at a minimum they should have a tracking issue explaining why they're necessary, and some of them can hopefully be removed at some point (e.g. <code>--emit=toolchain-specific</code> should go away once <a href="https://github.com/rust-lang/docs.rs/issues/1181">https://github.com/rust-lang/docs.rs/issues/1181</a> is fixed)</p>



<a name="260736013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/260736013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#260736013">(Nov 08 2021 at 23:53)</a>:</h4>
<p>I wrote up a draft of how I was going to categorize these and somehow deleted it by accident :( will try to make time sometime in the next week</p>



<a name="266072186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072186">(Dec 25 2021 at 19:28)</a>:</h4>
<p>following up on this, since <a href="https://github.com/rust-lang/rust/pull/92273">https://github.com/rust-lang/rust/pull/92273</a> reminded me of it: I'd like to suggest that we do FCP for new unstable flags / features when they're first implemented, rather than when stabilizing</p>



<a name="266072279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072279">(Dec 25 2021 at 19:31)</a>:</h4>
<p>we could "enforce" that by moving the flags in <a href="http://lib.rs">lib.rs</a> out to a separate <a href="http://flags.rs">flags.rs</a> file and having highfive ping either the reviewer or the whole team to say it should go through FCP</p>



<a name="266072409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072409">(Dec 25 2021 at 19:35)</a>:</h4>
<p>oh and merry christmas all <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="266072791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072791">(Dec 25 2021 at 19:45)</a>:</h4>
<p>I think moving the flags into a separate file is a good idea, but I don't think we should change when we do our FCP.</p>



<a name="266072835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072835">(Dec 25 2021 at 19:46)</a>:</h4>
<p>hmm, why not?</p>



<a name="266072836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072836">(Dec 25 2021 at 19:46)</a>:</h4>
<p>For one, it'd be inconsistent with the other teams (libs, compiler, ...).</p>



<a name="266072841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072841">(Dec 25 2021 at 19:46)</a>:</h4>
<p>Also, the whole reason we have unstable features is that we want to gain experience with them before committing to them.</p>



<a name="266072864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072864">(Dec 25 2021 at 19:47)</a>:</h4>
<p>And an FCP is a great way to have the whole team sign off on the commitment.</p>



<a name="266072865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072865">(Dec 25 2021 at 19:47)</a>:</h4>
<p>Agreed, I think it's a good thing to try thing out in the "unstable" space and when we reach an acceptable state, we open an FCP</p>



<a name="266072869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072869">(Dec 25 2021 at 19:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/266220-rustdoc/topic/unstable.20features/near/266072864">said</a>:</p>
<blockquote>
<p>And an FCP is a great way to have the whole team sign off on the commitment.</p>
</blockquote>
<p>sure - we could do an FCP both before and after</p>



<a name="266072870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072870">(Dec 25 2021 at 19:47)</a>:</h4>
<p>There's no (or very little) commitment inherent in adding an unstable feature.</p>



<a name="266072873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072873">(Dec 25 2021 at 19:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/266220-rustdoc/topic/unstable.20features/near/266072870">said</a>:</p>
<blockquote>
<p>There's no (or very little) commitment inherent in adding an unstable feature.</p>
</blockquote>
<p>this isn't true in practice though!</p>



<a name="266072913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072913">(Dec 25 2021 at 19:48)</a>:</h4>
<blockquote>
<p>sure - we could do an FCP both before and after</p>
</blockquote>
<p>I'm fine with that.</p>



<a name="266072914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072914">(Dec 25 2021 at 19:48)</a>:</h4>
<p>if we removed <code>--persist-doctests</code> or something we'd get lots of people mad at us that we broke it</p>



<a name="266072920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072920">(Dec 25 2021 at 19:48)</a>:</h4>
<p>even though it's absolutely just meant to be for trying things out</p>



<a name="266072928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072928">(Dec 25 2021 at 19:48)</a>:</h4>
<p><a href="http://docs.rs">docs.rs</a> makes this worse because people essentially treat unstable features as if they're stable, like doc(cfg)</p>



<a name="266072947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072947">(Dec 25 2021 at 19:49)</a>:</h4>
<p>Well maybe we need something like the reverse of RUSTC_BOOTSTRAP?</p>



<a name="266072993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072993">(Dec 25 2021 at 19:50)</a>:</h4>
<p>Like, <a href="http://docs.rs">docs.rs</a> uses nightly rustdoc, but you have to manually opt into "nightly mode"</p>



<a name="266072998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266072998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266072998">(Dec 25 2021 at 19:50)</a>:</h4>
<p>I would rather just not add the feature in the first place :/ if we added a gate now, that still breaks everything currently on nightly</p>



<a name="266073007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266073007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266073007">(Dec 25 2021 at 19:51)</a>:</h4>
<p>if we were just now writing rustdoc and didn't have to worry about backwards compatibility I'd agree with you</p>



<a name="266073010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266073010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266073010">(Dec 25 2021 at 19:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/unstable.20features/near/266072928">said</a>:</p>
<blockquote>
<p><a href="http://docs.rs">docs.rs</a> makes this worse because people essentially treat unstable features as if they're stable, like doc(cfg)</p>
</blockquote>
<p>Don't people still need to use <code>#![feature(...)]</code>?</p>



<a name="266073019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266073019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266073019">(Dec 25 2021 at 19:51)</a>:</h4>
<p>yes, but with <code>#[cfg_attr(docs_rs, feature(...))]</code>, it shows up in blog posts even</p>



<a name="266073067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266073067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266073067">(Dec 25 2021 at 19:52)</a>:</h4>
<p>Still... they are explicitly opting into a feature</p>



<a name="266073104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266073104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266073104">(Dec 25 2021 at 19:53)</a>:</h4>
<p>That's something I don't really agree with <span class="user-mention" data-user-id="232545">@Joshua Nelson</span>, but unfortunately, <a href="http://docs.rs">docs.rs</a> is making this split very difficult</p>



<a name="266173986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266173986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266173986">(Dec 27 2021 at 13:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/unstable.20features/near/266073104">said</a>:</p>
<blockquote>
<p>That's something I don't really agree with <span class="user-mention silent" data-user-id="232545">Joshua Nelson</span>, but unfortunately, <a href="http://docs.rs">docs.rs</a> is making this split very difficult</p>
</blockquote>
<p>you don't agree that people would get mad if we broke unstable features? or that there's little commitment to adding an unstable feature? or that we should do FCP both when adding a feature and just before stabilization?</p>



<a name="266177092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/unstable%20features/near/266177092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/unstable.20features.html#266177092">(Dec 27 2021 at 14:38)</a>:</h4>
<p>Clarification incoming: we used to go through RFC/FCP after the unstable option was implemented so we could iterate without worrying about breaking things. The fact that <a href="http://docs.rs">docs.rs</a> relies on nightly rustdoc is making this complicated now because it prevents us to use this process now.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
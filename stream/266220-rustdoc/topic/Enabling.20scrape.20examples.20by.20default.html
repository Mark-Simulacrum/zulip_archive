<html>
<head><meta charset="utf-8"><title>Enabling scrape examples by default · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html">Enabling scrape examples by default</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270305617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270305617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270305617">(Feb 01 2022 at 23:20)</a>:</h4>
<p>There was some confusion in my <a href="https://github.com/rust-lang/cargo/pull/10343">Cargo PR</a> about when/how the scrape examples feature would be enabled.</p>
<p>I think that once the feature is stabilized, it should be enabled by default when you run <code>cargo doc</code>. If it requires a flag, I suspect most people would never use it. </p>
<p>It will definitely increase the height of any given item's documentation. But if someone wants to skim the documentation top-to-bottom, I think it's already true today that they either need to use the section-minimize <code>[-]</code> mechanism, or they use the table of contents in the left sidebar. </p>
<p>Additionally, I think if the entire section is hidden behind an expander, a lot of people will never use it. I just today ran a study where I watched someone write Rust code while using documentation with scraped examples. Even with the first example being shown by default, they still didn't notice it or the "more examples" button until I pointed it out.</p>
<p>cc <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span></p>



<a name="270306359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306359">(Feb 01 2022 at 23:26)</a>:</h4>
<p>Again, I'm sorry. And I think you're right about making it enabled by default. It's just that the intent changes.</p>



<a name="270306477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306477">(Feb 01 2022 at 23:27)</a>:</h4>
<p>So currently, with your feature there is one example displayed and we can expand to see more of them. What I suggest is to hide them all by default in a "see examples where this item is used" and when expanded, we display all of them.</p>



<a name="270306483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306483">(Feb 01 2022 at 23:27)</a>:</h4>
<p>Does it sound reasonable?</p>



<a name="270306524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306524">(Feb 01 2022 at 23:27)</a>:</h4>
<p>That would at least prevent to increase the page total height crazily and provide a nice information as well.</p>



<a name="270306628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306628">(Feb 01 2022 at 23:28)</a>:</h4>
<p>Also cc <span class="user-mention" data-user-id="315412">@jsha</span> since you're our expert here :)</p>



<a name="270306631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306631">(Feb 01 2022 at 23:28)</a>:</h4>
<p>So one thing I've been thinking about lately - it might be good to give each method its own page? For instance that's how MDN does it: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node#methods">https://developer.mozilla.org/en-US/docs/Web/API/Node#methods</a></p>



<a name="270306664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306664">(Feb 01 2022 at 23:28)</a>:</h4>
<p>That is, not its own page just for scrape-examples, but its own page in general.</p>



<a name="270306720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306720">(Feb 01 2022 at 23:29)</a>:</h4>
<p>That would explode the number of files</p>



<a name="270306757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306757">(Feb 01 2022 at 23:29)</a>:</h4>
<p>But to the specific issue - I think <span class="user-mention" data-user-id="265377">@Will Crichton</span> is right that if we hide examples by default they are not very useful.</p>



<a name="270306862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306862">(Feb 01 2022 at 23:30)</a>:</h4>
<p>Hum ok...</p>



<a name="270306938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270306938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270306938">(Feb 01 2022 at 23:31)</a>:</h4>
<p>We could reduce the size of the minimized viewer. Right now it shows a maximum of 10 lines, but that could be e.g. 5 instead.</p>



<a name="270307094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270307094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270307094">(Feb 01 2022 at 23:32)</a>:</h4>
<p>I have two "issues" with this: I already told the first (I think making something very apparent, would somewhat fix the issue) but it seems I'm the only one so it's fine, but the second is that it would make doc examples mostly useless (which might be a good or bad thing, not sure). Doc examples are also tests, so not sure on the impact there</p>



<a name="270307104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270307104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270307104">(Feb 01 2022 at 23:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="265377">Will Crichton</span> <a href="#narrow/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default/near/270306938">said</a>:</p>
<blockquote>
<p>We could reduce the size of the minimized viewer. Right now it shows a maximum of 10 lines, but that could be e.g. 5 instead.</p>
</blockquote>
<p>That could be an idea, indeed!</p>



<a name="270307337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270307337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270307337">(Feb 01 2022 at 23:35)</a>:</h4>
<p><del>On a side note: I still think that the help link on <strong>every</strong> example is way too much. Again, it increases the page size for a very small gain.</del></p>
<p>EDIT: I actually see it on <a href="https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and">https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and</a> but not in the rustdoc source code. Nevermind then!</p>



<a name="270307822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270307822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270307822">(Feb 01 2022 at 23:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default/near/270307094">said</a>:</p>
<blockquote>
<p>I have two "issues" with this: [...] the second is that it would make doc examples mostly useless (which might be a good or bad thing, not sure). Doc examples are also tests, so not sure on the impact there</p>
</blockquote>
<p>I think doc examples still have a role. A scraped example isn't necessarily pedagogic -- it's just an instance of usage, that may be complicated by all kinds of context. Whereas a doc example can be designed to help specifically explain the item being documented.</p>



<a name="270307890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270307890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270307890">(Feb 01 2022 at 23:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default/near/270307337">said</a>:</p>
<blockquote>
<p><del>On a side note: I still think that the help link on <strong>every</strong> example is way too much. Again, it increases the page size for a very small gain.</del></p>
<p>EDIT: I actually see it on <a href="https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and">https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and</a> but not in the rustdoc source code. Nevermind then!</p>
</blockquote>
<p>That feature is still in a PR: <a href="https://github.com/rust-lang/rust/pull/93217">https://github.com/rust-lang/rust/pull/93217</a></p>



<a name="270308237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270308237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270308237">(Feb 01 2022 at 23:42)</a>:</h4>
<p>I'll comment on the PR directly then, thanks for the pointer!</p>
<blockquote>
<p>I think doc examples still have a role. A scraped example isn't necessarily pedagogic -- it's just an instance of usage, that may be complicated by all kinds of context. Whereas a doc example can be designed to help specifically explain the item being documented.</p>
</blockquote>
<p>Well, I guess we'll see how it'll unroll in the end.</p>
<p>My main worry is that the page size will dramatically increase but I guess it's not really a valid argument. I like having usage in examples too. <em>sigh</em></p>
<p>Well, let's try to minimize the impact on the global height and it's fine for me. Thanks a lot for working on this feature, I really like it. :)</p>



<a name="270612659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270612659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270612659">(Feb 03 2022 at 20:28)</a>:</h4>
<p>FWIW, I like the current approach of just showing one example by default and having a toggle to show more.</p>



<a name="270612679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270612679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270612679">(Feb 03 2022 at 20:28)</a>:</h4>
<p>Also, we can always tweak this later, even after stabilization.</p>



<a name="270612798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270612798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270612798">(Feb 03 2022 at 20:29)</a>:</h4>
<p>One small nitpick: the current phrasing of the heading is "Examples found in repository". Would "Examples found in crate" be better, or would it be confusing because it doesn't (yet) show examples found in the actual crate source code?</p>



<a name="270617992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270617992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270617992">(Feb 03 2022 at 21:08)</a>:</h4>
<p>Examples can be found outside the crate being documented, if there are multiple crates in the Cargo workspace.</p>



<a name="270618052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Enabling%20scrape%20examples%20by%20default/near/270618052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default.html#270618052">(Feb 03 2022 at 21:09)</a>:</h4>
<p>Yeah, ok</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
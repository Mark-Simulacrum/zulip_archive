<html>
<head><meta charset="utf-8"><title>documenting FFI · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html">documenting FFI</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264094741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264094741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264094741">(Dec 08 2021 at 00:19)</a>:</h4>
<p>I work on the rustls-ffi project, which provides C bindings to the Rust library <code>rustls</code>. I've been trying to figure out how best to do documentation. So far I'm just offering the header file as documentation, and cbindgen carries through my doccomments: <a href="https://github.com/rustls/rustls-ffi/blob/main/src/rustls.h">https://github.com/rustls/rustls-ffi/blob/main/src/rustls.h</a>.</p>
<p>But that's not very organized. It's one big file.</p>
<p>Rustdoc probably isn't the best choice either, though it does remarkably well - with the one big exception that the function signatures are written Rust-style, rather than C-style. <a href="https://docs.rs/rustls-ffi/latest/rustls_ffi/connection/struct.rustls_connection.html">https://docs.rs/rustls-ffi/latest/rustls_ffi/connection/struct.rustls_connection.html</a></p>
<p>Anyhow, bit of a shot in the dark, but does anyone know of good tooling for maintaining docs for a C library, particularly one generated from Rust code with doccomments?</p>



<a name="264095062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264095062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264095062">(Dec 08 2021 at 00:22)</a>:</h4>
<p>The best C docs I've seen are curl's, which are maintained in a Sphinx file separate from the code. I think rustdoc or Sphinx are probably the best you'll get, unless you want to try something experimental</p>



<a name="264095430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264095430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264095430">(Dec 08 2021 at 00:27)</a>:</h4>
<p>Someone in #black-magic on the community discord might have better suggestions</p>



<a name="264101977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264101977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264101977">(Dec 08 2021 at 02:05)</a>:</h4>
<p><span class="user-mention" data-user-id="315412">@jsha</span> I like using rustdoc, though you may also be interested in rust-diplomat/diplomat, which is still under active development but it does work and can produce sphinx docs</p>



<a name="264102059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264102059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264102059">(Dec 08 2021 at 02:06)</a>:</h4>
<p>n.b. it does not currently have a C backend that has an idiomatic API (the C support is very low level and optimized for other languages being able to shim over it), and it does not currently support free functions</p>



<a name="264102585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264102585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264102585">(Dec 08 2021 at 02:14)</a>:</h4>
<p>thanks! great tip, I'll check it out. Do you have any such crates you document using rustdoc that I could take a look at?</p>



<a name="264103742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264103742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264103742">(Dec 08 2021 at 02:31)</a>:</h4>
<p>Oh, <span class="user-mention" data-user-id="315412">@jsha</span> you could also try mdbook, which is basically Sphinx with a rust flavor</p>



<a name="264106913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264106913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264106913">(Dec 08 2021 at 03:23)</a>:</h4>
<p><span class="user-mention" data-user-id="315412">@jsha</span> the ICU4X FFI module (ffi/diplomat) uses diplomat but is also just rustdoc documented  <a href="https://unicode-org.github.io/icu4x-docs/doc/icu_capi/">https://unicode-org.github.io/icu4x-docs/doc/icu_capi/</a></p>



<a name="264106935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/documenting%20FFI/near/264106935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/documenting.20FFI.html#264106935">(Dec 08 2021 at 03:23)</a>:</h4>
<p>I believe the Stylo FFI was also rustdoc documented but we didn't publish that anywhere</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
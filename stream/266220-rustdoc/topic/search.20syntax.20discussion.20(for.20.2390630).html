<html>
<head><meta charset="utf-8"><title>search syntax discussion (for #90630) · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html">search syntax discussion (for #90630)</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268072345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072345">(Jan 14 2022 at 21:02)</a>:</h4>
<p>Ok, that's good to know, I had no idea that existed!</p>



<a name="268072349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072349">(Jan 14 2022 at 21:02)</a>:</h4>
<p>trait bounds (generics is a better match in my head ^^')</p>



<a name="268072396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072396">(Jan 14 2022 at 21:03)</a>:</h4>
<p>You even had a function get them: <a href="https://github.com/rust-lang/rust/blob/master/src/librustdoc/html/static/js/search.js#L297-L310">https://github.com/rust-lang/rust/blob/master/src/librustdoc/html/static/js/search.js#L297-L310</a></p>



<a name="268072404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072404">(Jan 14 2022 at 21:03)</a>:</h4>
<p>well, have</p>



<a name="268072452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072452">(Jan 14 2022 at 21:03)</a>:</h4>
<p>what does <code>string&lt;u8&gt;</code> mean?</p>



<a name="268072548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072548">(Jan 14 2022 at 21:04)</a>:</h4>
<p>a type with a name matching <code>string</code> which has a generic (ie trait bound) matching <code>u8</code></p>



<a name="268072621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072621">(Jan 14 2022 at 21:05)</a>:</h4>
<p>Can you give an example of a function that would come up when you search for <code>string&lt;u8&gt;</code>?</p>



<a name="268072635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072635">(Jan 14 2022 at 21:05)</a>:</h4>
<p>so if you have <code>struct string&lt;T: Debug&gt;</code>, then the corresponding search is <code>string&lt;debug&gt;</code></p>



<a name="268072678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072678">(Jan 14 2022 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="307537">@Noah Lev</span> just made the example ^</p>



<a name="268072679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072679">(Jan 14 2022 at 21:05)</a>:</h4>
<p>So <code>string&lt;u8&gt;</code> would match <code>struct string&lt;T: u8&gt;</code> -- it's nonsensical in this particular case?</p>



<a name="268072702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072702" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072702">(Jan 14 2022 at 21:05)</a>:</h4>
<p>if you have a <code>u8</code> trait, then yes</p>



<a name="268072788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072788">(Jan 14 2022 at 21:06)</a>:</h4>
<p>Maybe a more realistic example would be <code>Cow&lt;ToOwned&gt;</code> which would return <a href="https://doc.rust-lang.org/nightly/std/borrow/enum.Cow.html">https://doc.rust-lang.org/nightly/std/borrow/enum.Cow.html</a> ?</p>



<a name="268072877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072877">(Jan 14 2022 at 21:07)</a>:</h4>
<p>Absolutely yes</p>



<a name="268072910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072910">(Jan 14 2022 at 21:07)</a>:</h4>
<p>It doesn't seem to come up in the results though... is that just a bug in the current (i.e., nightly) implementation?</p>



<a name="268072970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072970">(Jan 14 2022 at 21:08)</a>:</h4>
<p>yep</p>



<a name="268072986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072986">(Jan 14 2022 at 21:08)</a>:</h4>
<p>the current implementation is just a pile of bugs on top of bugs</p>



<a name="268072989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268072989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268072989">(Jan 14 2022 at 21:08)</a>:</h4>
<p>is it a bug in the current implementation, or is it not currently implemented?</p>



<a name="268073007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073007">(Jan 14 2022 at 21:08)</a>:</h4>
<p>I don't see it in the help text for the current implementation.</p>



<a name="268073033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073033">(Jan 14 2022 at 21:09)</a>:</h4>
<p>Btw: I'm keeping a running list of features <a href="https://github.com/rust-lang/rust/pull/90630#issuecomment-1013474609">here</a> as we discuss :)</p>



<a name="268073063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073063">(Jan 14 2022 at 21:09)</a>:</h4>
<p>it's tested in <code>src/test/rustdoc-js/generics.js</code></p>



<a name="268073080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073080">(Jan 14 2022 at 21:09)</a>:</h4>
<p>So it's just buggy ^^'</p>



<a name="268073198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073198">(Jan 14 2022 at 21:10)</a>:</h4>
<p>and it recently got a fix as of June this year: <a href="https://github.com/rust-lang/rust/pull/86659">https://github.com/rust-lang/rust/pull/86659</a></p>



<a name="268073201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073201">(Jan 14 2022 at 21:10)</a>:</h4>
<p>Is searching argument types supported currently (i.e., pre-this-PR)?</p>



<a name="268073296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073296">(Jan 14 2022 at 21:11)</a>:</h4>
<p>(I mean in the search syntax, not in the search tabs)</p>



<a name="268073349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073349">(Jan 14 2022 at 21:12)</a>:</h4>
<p>it's more general</p>



<a name="268073366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073366">(Jan 14 2022 at 21:12)</a>:</h4>
<p>we don't have a search for arguments specifically</p>



<a name="268073407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073407">(Jan 14 2022 at 21:12)</a>:</h4>
<p>for example if your query is <code>string</code>, we will compare <code>string</code> to the item name, its arguments and its returned types</p>



<a name="268073441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073441">(Jan 14 2022 at 21:13)</a>:</h4>
<p>the only specific one currently is for returned types with the <code>-&gt;</code></p>



<a name="268073450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073450">(Jan 14 2022 at 21:13)</a>:</h4>
<p>And here's the original PR adding generics support in search: <a href="https://github.com/rust-lang/rust/pull/45673">https://github.com/rust-lang/rust/pull/45673</a></p>



<a name="268073499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073499">(Jan 14 2022 at 21:13)</a>:</h4>
<p>(Btw I just renamed this topic)</p>



<a name="268073810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073810">(Jan 14 2022 at 21:16)</a>:</h4>
<p>Are those all the features currently supported in search?</p>



<a name="268073820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073820">(Jan 14 2022 at 21:16)</a>:</h4>
<p>(To the best of your knowledge)</p>



<a name="268073849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073849">(Jan 14 2022 at 21:17)</a>:</h4>
<p>I think we didn't forget one</p>



<a name="268073912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073912">(Jan 14 2022 at 21:17)</a>:</h4>
<p>Ok, now what are the features supported by this PR?</p>



<a name="268073928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073928">(Jan 14 2022 at 21:17)</a>:</h4>
<p>Are there any removals/changes or are they all additions?</p>



<a name="268073993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268073993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268073993">(Jan 14 2022 at 21:18)</a>:</h4>
<p>Ah right, we forgot one! the <code>;</code></p>



<a name="268074024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074024">(Jan 14 2022 at 21:18)</a>:</h4>
<p>we can have multi-queries currently, I removed it in my rework</p>



<a name="268074035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074035">(Jan 14 2022 at 21:18)</a>:</h4>
<p>you mean <code>,</code>?</p>



<a name="268074057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074057">(Jan 14 2022 at 21:18)</a>:</h4>
<p>let me check</p>



<a name="268074092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074092">(Jan 14 2022 at 21:19)</a>:</h4>
<p>e.g. <a href="https://doc.rust-lang.org/nightly/std/index.html?search=str%2Cu8">https://doc.rust-lang.org/nightly/std/index.html?search=str%2Cu8</a></p>



<a name="268074153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074153">(Jan 14 2022 at 21:19)</a>:</h4>
<p>it's the comma, you're right</p>



<a name="268074169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074169">(Jan 14 2022 at 21:19)</a>:</h4>
<p>And it behaves as an OR?</p>



<a name="268074172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074172">(Jan 14 2022 at 21:19)</a>:</h4>
<p>(I saw it in <code>test/rustdoc-js-std/multi-query.js</code>)</p>



<a name="268074236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074236">(Jan 14 2022 at 21:20)</a>:</h4>
<p>no, it merges the best results from all queries</p>



<a name="268074246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074246">(Jan 14 2022 at 21:20)</a>:</h4>
<p>What does that mean?</p>



<a name="268074308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074308">(Jan 14 2022 at 21:20)</a>:</h4>
<p>we print 200 items in each tab, so if you have <code>u8,string</code>, it'll print the best from both <code>u8</code> and <code>string</code> queries until the 200 is reached</p>



<a name="268074315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074315">(Jan 14 2022 at 21:20)</a>:</h4>
<p>(insert by lev distance)</p>



<a name="268074345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074345">(Jan 14 2022 at 21:21)</a>:</h4>
<p>But aren't queries always sorted by lev distance?</p>



<a name="268074348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074348">(Jan 14 2022 at 21:21)</a>:</h4>
<p>I think that means the same thing as an OR :-)</p>



<a name="268074359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074359">(Jan 14 2022 at 21:21)</a>:</h4>
<p>hum does it?</p>



<a name="268074371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074371">(Jan 14 2022 at 21:21)</a>:</h4>
<p>oh well, maybe</p>



<a name="268074402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074402">(Jan 14 2022 at 21:21)</a>:</h4>
<p>you have both queries results mixed in the end</p>



<a name="268074418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074418">(Jan 14 2022 at 21:21)</a>:</h4>
<p>not one or the other is what I tried to say</p>



<a name="268074429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074429" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074429">(Jan 14 2022 at 21:22)</a>:</h4>
<p>anyhow, during review on the big PR we decided to remove it, and I think it is now removed in the big PR.</p>



<a name="268074493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074493">(Jan 14 2022 at 21:22)</a>:</h4>
<p>yes, in the big PR I always intended to remove it</p>



<a name="268074583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074583">(Jan 14 2022 at 21:23)</a>:</h4>
<p>Yeah, OR means it searches for both of them</p>



<a name="268074700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074700">(Jan 14 2022 at 21:24)</a>:</h4>
<p>How exactly did quotes behave <em>before</em> this PR? IIRC they worked in an unintuitive way</p>



<a name="268074739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074739">(Jan 14 2022 at 21:24)</a>:</h4>
<p>they look for exactly what you provided</p>



<a name="268074782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074782">(Jan 14 2022 at 21:25)</a>:</h4>
<p>so if you have <code>"hello toto"</code>, it will look for items named <code>hello toto</code></p>



<a name="268074821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074821">(Jan 14 2022 at 21:25)</a>:</h4>
<p>But how do they behave in these cases: <code>"cow&lt;toowned"</code>, <code>"-&gt; String"</code>, etc.</p>



<a name="268074887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074887">(Jan 14 2022 at 21:26)</a>:</h4>
<p>it looks for the content between the quotes</p>



<a name="268074890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074890">(Jan 14 2022 at 21:26)</a>:</h4>
<p>Example: <a href="https://doc.rust-lang.org/nightly/std/index.html?search=%22cow%3Czzzzzzz%3E%22">https://doc.rust-lang.org/nightly/std/index.html?search=%22cow%3Czzzzzzz%3E%22</a></p>
<p>This seems to ignore what's inside the <code>&lt;&gt;</code> even though it's a quoted string. That's probably a bug.</p>



<a name="268074903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074903">(Jan 14 2022 at 21:26)</a>:</h4>
<p>no no, what's inside the <code>""</code> is taken as is</p>



<a name="268074915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074915">(Jan 14 2022 at 21:26)</a>:</h4>
<p>no internal parsing until the end of the string</p>



<a name="268074942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074942">(Jan 14 2022 at 21:26)</a>:</h4>
<p>then why does <code>cow&lt;zzzzzz&gt;</code> match <code>Cow</code>?</p>



<a name="268074944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074944">(Jan 14 2022 at 21:26)</a>:</h4>
<p>I kept it the same in the big PR too</p>



<a name="268074960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074960">(Jan 14 2022 at 21:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315412">jsha</span> <a href="#narrow/stream/266220-rustdoc/topic/search.20syntax.20discussion.20.28for.20.2390630.29/near/268074942">said</a>:</p>
<blockquote>
<p>then why does <code>cow&lt;zzzzzz&gt;</code> match <code>Cow</code>?</p>
</blockquote>
<p>O.O</p>



<a name="268074967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268074967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268074967">(Jan 14 2022 at 21:27)</a>:</h4>
<p>a bug XD</p>



<a name="268075113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075113">(Jan 14 2022 at 21:28)</a>:</h4>
<p>the joys of using <code>split</code> :3</p>



<a name="268075382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075382">(Jan 14 2022 at 21:30)</a>:</h4>
<p>It looks like in the new PR, <code>"cow&lt;toowned&gt;"</code> shows no results. Is that because it's treating the inside of the quotes as an exact item name?</p>



<a name="268075423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075423">(Jan 14 2022 at 21:30)</a>:</h4>
<p>it takes everything until it finds the other quote</p>



<a name="268075447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075447">(Jan 14 2022 at 21:31)</a>:</h4>
<p>so in this case, it'll look for items named <code>cow&lt;toowner&gt;</code></p>



<a name="268075622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075622" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075622">(Jan 14 2022 at 21:32)</a>:</h4>
<p>Why does <code>add(string)</code> not return <code>string::add</code> in the new PR?</p>



<a name="268075708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075708">(Jan 14 2022 at 21:33)</a>:</h4>
<p>if <code>string::add</code> is taking a <code>string</code> argument, then it's a bug</p>



<a name="268075815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075815">(Jan 14 2022 at 21:35)</a>:</h4>
<p>It actually takes a <code>str</code>, but it still doesn't come up in the results with <code>add(str)</code></p>



<a name="268075846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075846">(Jan 14 2022 at 21:35)</a>:</h4>
<p>This is what I mean about unnecessary complexity; the feature is quite buggy, but we're not even sure it's useful</p>



<a name="268075847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075847">(Jan 14 2022 at 21:35)</a>:</h4>
<p>try <code>add(str)</code> then</p>



<a name="268075862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075862">(Jan 14 2022 at 21:35)</a>:</h4>
<p>no, it's as expected</p>



<a name="268075863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075863">(Jan 14 2022 at 21:35)</a>:</h4>
<p>I did, it doesn't work</p>



<a name="268075883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075883">(Jan 14 2022 at 21:35)</a>:</h4>
<p>if we have more than one argument, then we switch to "exact matches only"</p>



<a name="268075892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075892">(Jan 14 2022 at 21:35)</a>:</h4>
<p>ah?</p>



<a name="268075896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075896">(Jan 14 2022 at 21:35)</a>:</h4>
<p>then it's a bug</p>



<a name="268075998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075998">(Jan 14 2022 at 21:36)</a>:</h4>
<p>funnily enough, <code>str -&gt; string</code> finds it</p>



<a name="268075999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268075999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268075999">(Jan 14 2022 at 21:36)</a>:</h4>
<p>likewise, <code>from(str)</code> doesn't show <code>String::from</code></p>



<a name="268078814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268078814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268078814">(Jan 14 2022 at 22:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/266220-rustdoc/topic/search.20syntax.20discussion.20.28for.20.2390630.29/near/268075999">said</a>:</p>
<blockquote>
<p>likewise, <code>from(str)</code> doesn't show <code>String::from</code></p>
</blockquote>
<p>I wonder if it has something to do with the <code>&amp;</code>...</p>



<a name="268088565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268088565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268088565">(Jan 14 2022 at 23:37)</a>:</h4>
<p>Seems like we're moving forward. Next will be what we want to keep/remove/improve I guess. Thanks to both of you for taking the time to walk through this</p>



<a name="268089646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268089646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael notriddle Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268089646">(Jan 14 2022 at 23:52)</a>:</h4>
<p>If rustdoc strips tuples from the search index, then it ought to strip refs, too.</p>



<a name="268128169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/268128169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#268128169">(Jan 15 2022 at 14:24)</a>:</h4>
<p>I think it's being discarded completely. To be confirmed</p>



<a name="270980217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/270980217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#270980217">(Feb 07 2022 at 13:50)</a>:</h4>
<p>I'm back so maybe let's finish this discussion? What syntax do we want exactly for <a href="https://github.com/rust-lang/rust/pull/90630">https://github.com/rust-lang/rust/pull/90630</a> (as a first step)?</p>
<p>Taking the comment from <span class="user-mention" data-user-id="307537">@Noah Lev</span> :</p>
<blockquote>
<ul>
<li>plain name search: <code>foo</code>, <code>foo::bar</code></li>
<li>quotes (exact match?): <code>"foo"</code>, <code>"cow&lt;zzz&gt;"</code></li>
<li>itemtype filtering: <code>struct:foo</code>, <code>enum:bar</code></li>
<li>trait bounds: <code>foo&lt;debug&gt;</code> (matches <code>struct Foo&lt;T: Debug&gt;</code>)</li>
<li>return types: <code>-&gt; String</code> (matches functions returning <code>String</code>)</li>
<li>argument types: <code>(String)</code></li>
<li>function names and types: (doesn't seem to work properly currently)</li>
</ul>
</blockquote>
<p>I think we didn't want the argument types in this implementation? So basically, some examples of what would work (I find it a bit simpler to read/go through) than writing the full supported syntax but if you prefer I can instead write the syntax):</p>
<ul>
<li><code>a</code></li>
<li><code>a&lt;c&gt;</code></li>
<li><code>-&gt; b</code></li>
<li><code>-&gt; b&lt;c&gt;</code></li>
<li><code>a&lt;c&gt; -&gt; b</code></li>
<li><code>struct:b</code></li>
<li><code>struct: -&gt; b</code></li>
<li><code>struct: a -&gt; b</code></li>
<li><code>"a"&lt;c&gt; -&gt; b</code></li>
</ul>
<p>What is not supported:</p>
<ul>
<li><code>a&lt;"b"&gt;</code> (quotes in generics/trait bounds)</li>
<li><code>a&lt;b&lt;c&gt;&gt;</code> (generics in generics)</li>
<li><code>(a)</code> (argument types)</li>
</ul>



<a name="270985593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/270985593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#270985593">(Feb 07 2022 at 14:28)</a>:</h4>
<p>Orthogonal to the above, but I'd love search to be case sensitive if the input is mixed case</p>



<a name="270987306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/270987306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#270987306">(Feb 07 2022 at 14:41)</a>:</h4>
<p>We save all data as lowercase currently</p>



<a name="270987335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/270987335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#270987335">(Feb 07 2022 at 14:41)</a>:</h4>
<p>Might be worth an update after the parser has been updated</p>



<a name="271035495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/271035495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#271035495">(Feb 07 2022 at 20:11)</a>:</h4>
<p>Welcome back! Let's split this into two steps:</p>
<ul>
<li>
<p>To land <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a>, it should be a pure refactoring. It should not add or remove any syntax at all. That's the purpose of the exercise we went through to clarify what the current syntax is.</p>
</li>
<li>
<p>After <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a> is landed, we can pursue changing the search syntax if we want to. We should have a clear idea of goals. For instance, a goal might be "the current search syntax is confusing and hard to learn," or "the current search syntax is ambiguous," or "the current search syntax does not support features that we think are important to support."</p>
</li>
</ul>
<p>I actually have some ideas for <a href="https://github.com/rust-lang/rust/issues/2">#2</a> there but I'd like to settle on <a href="https://github.com/rust-lang/rust/issues/1">#1</a> first.</p>



<a name="271036837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/271036837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#271036837">(Feb 07 2022 at 20:23)</a>:</h4>
<p>Can I still remove the current support of multi queries? :3</p>



<a name="271339866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/271339866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#271339866">(Feb 09 2022 at 20:06)</a>:</h4>
<p>How about you open a separate PR that removes support for multi-queries from the current implementation? Then the refactoring doesn't need to deal with it.</p>



<a name="271360249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/271360249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#271360249">(Feb 09 2022 at 22:57)</a>:</h4>
<p>Oh. That's a good idea!</p>



<a name="271360629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/271360629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#271360629">(Feb 09 2022 at 23:00)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/90630">https://github.com/rust-lang/rust/pull/90630</a> is ready but I'll comment on it that I'll remove the multi-query in another PR first.</p>



<a name="274469103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/274469103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael (notriddle) Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#274469103">(Mar 07 2022 at 22:38)</a>:</h4>
<p>How many of the still-open discussion threads on <a href="https://github.com/rust-lang/rust/pull/90630">https://github.com/rust-lang/rust/pull/90630</a> are still applicable? Several of them say that a function needs a sentence describing what it does, but there has been a doc comment added sometime between then and now, so it looks like it's been resolved.</p>



<a name="274513111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/274513111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#274513111">(Mar 08 2022 at 09:08)</a>:</h4>
<p>In the end, there is no change for the syntax as of now. It's just waiting for someone to make the final review.</p>



<a name="275919317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275919317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275919317">(Mar 19 2022 at 17:04)</a>:</h4>
<p>I'm coming back for review on this. I'm still confused by what the _current_ implementation of "generics" search is supposed to be. </p>
<p>In the conversation above we came to the conclusion that <code>foo&lt;bar&gt;</code> meant "a type named <code>foo</code>, with <code>bar</code> in its trait bounds." But I think that's wrong.</p>
<p>I looked at the current test cases for generics search:</p>
<p><a href="https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics.js">https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics.js</a><br>
<a href="https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics.rs">https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics.rs</a></p>
<p><a href="https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-trait.js">https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-trait.js</a><br>
<a href="https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-trait.rs">https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-trait.rs</a></p>
<p><a href="https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-multi-trait.js">https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-multi-trait.js</a><br>
<a href="https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-multi-trait.rs">https://github.com/rust-lang/rust/blob/master/src/test/rustdoc-js/generics-multi-trait.rs</a></p>
<p>It looks like generics are only really supported for "in args" and "in return types". It makes a lot of sense there! If I want to find something that returns <code>Vec&lt;u8&gt;</code>, I'm not interested in something that returns <code>Vec&lt;String&gt;</code>. And this works as expected in nightly docs (tab over to "in return types" and see Vec::from) <a href="https://doc.rust-lang.org/nightly/std/string/struct.String.html?search=vec%3Cu8%3E">https://doc.rust-lang.org/nightly/std/string/struct.String.html?search=vec%3Cu8%3E</a></p>
<p>So I propose this documentation for how generics should work in search:</p>
<ul>
<li>For "in args" and "in return types" searches, <code>foo&lt;a, b c&gt;</code> will match a parameter that has a concrete type <code>foo</code> instantiated with parameters <code>a</code>, <code>b</code>, and <code>c</code>, ignoring any lifetime parameters.</li>
<li>For "in names" searches, <code>foo&lt;a, b, c&gt;</code> is an error.</li>
</ul>



<a name="275919378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275919378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275919378">(Mar 19 2022 at 17:05)</a>:</h4>
<p>Also I should clarify what I mean by "has a concrete type <code>foo</code>": has a concrete type where the last element of the path is an exact match for <code>foo</code>.</p>



<a name="275924527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275924527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael (notriddle) Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275924527">(Mar 19 2022 at 19:04)</a>:</h4>
<blockquote>
<p>In the conversation above we came to the conclusion that foo&lt;bar&gt; meant "a type named foo, with bar in its trait bounds." But I think that's wrong.</p>
</blockquote>
<p>More importantly, I don't think that would actually work. The search index doesn't actually include generic information except for function calls (<a href="https://github.com/notriddle/notriddle-rustdoc-test/blob/4e3c18a4c3f115f73d029ddffdd5e0d9a386c755/trait-test-rs/doc/search-index.js">proof</a> by showing that a trait, <code>Read</code>, is never mentioned in the search index at all despite being named in the struct's definition), and, even if it did, a lot of libstd types include trait bounds only on impl blocks (which have no representation in the search index at all), not on the actual types.</p>



<a name="275930445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275930445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275930445">(Mar 19 2022 at 21:24)</a>:</h4>
<p>We currently don't have the "in names" search with generics normally since there is more than one element</p>



<a name="275930446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275930446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275930446">(Mar 19 2022 at 21:24)</a>:</h4>
<p>to be confirmed though</p>



<a name="275930457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275930457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275930457">(Mar 19 2022 at 21:24)</a>:</h4>
<p>for example if you have "a&lt;b&gt;", then it's automatically not a name search anymore (but again to be confirmed!)</p>



<a name="275930530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275930530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275930530">(Mar 19 2022 at 21:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210053">Michael (notriddle) Howell</span> <a href="#narrow/stream/266220-rustdoc/topic/search.20syntax.20discussion.20.28for.20.2390630.29/near/275924527">said</a>:</p>
<blockquote>
<blockquote>
<p>In the conversation above we came to the conclusion that foo&lt;bar&gt; meant "a type named foo, with bar in its trait bounds." But I think that's wrong.</p>
</blockquote>
<p>More importantly, I don't think that would actually work. The search index doesn't actually include generic information except for function calls (<a href="https://github.com/notriddle/notriddle-rustdoc-test/blob/4e3c18a4c3f115f73d029ddffdd5e0d9a386c755/trait-test-rs/doc/search-index.js">proof</a> by showing that a trait, <code>Read</code>, is never mentioned in the search index at all despite being named in the struct's definition), and, even if it did, a lot of libstd types include trait bounds only on impl blocks (which have no representation in the search index at all), not on the actual types.</p>
</blockquote>
<p>It's because it's constraint, not a bound. I made this distinction a long time ago. We can discuss it into integrating this information though?</p>



<a name="275930541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275930541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275930541">(Mar 19 2022 at 21:26)</a>:</h4>
<p>Thanks to both of you for the review! I'll try to update the PR tomorrow.</p>



<a name="275930953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275930953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael (notriddle) Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275930953">(Mar 19 2022 at 21:37)</a>:</h4>
<p>The problem is, even if we "fixed" that, it would not do what you want on the standard library. <code>HashMap&lt;Hash&gt;</code>, for example, can't possibly resolve to the HashMap struct, because HashMap doesn't actually have any constraints at all. Only the impl blocks do, and they have no representation in the search index.</p>



<a name="275936364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275936364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275936364">(Mar 19 2022 at 23:46)</a>:</h4>
<p>true</p>



<a name="275951258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275951258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275951258">(Mar 20 2022 at 06:30)</a>:</h4>
<p>I'm coming to the conclusion that a lot of the complexity in the parser is due to the "in parameters" and "in return types" functionality.</p>
<p>For name searches, there isn't really any reason to support arbitrary Rust syntax.</p>
<p>But to match a function based on its parameter types, the user has to be able to type just about any syntax that can be part of a Rust type (as seen in a parameter type).</p>
<p>Perhaps our approach here is wrong. search-index.js represents function parameters in an already-parsed way, and then the rustdoc search query parser tries to re-parse function parameters in the same way, and then semantically match the two against each other.</p>
<p>It seems like it would be simpler for search-index.js to represent function parameters as simple strings, and use simple string matching against them.</p>



<a name="275951742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275951742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275951742">(Mar 20 2022 at 06:45)</a>:</h4>
<p>(which of course we could do after landing <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a>; I'm not proposing to fully rewrite <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a> at this point)</p>



<a name="275952214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275952214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275952214">(Mar 20 2022 at 06:59)</a>:</h4>
<p>Getting more specific: to be correct for "in parameters" and "in return types" searches, I think the rustdoc query parser would need to be able to parse the <code>Type</code> syntax described at <a href="https://doc.rust-lang.org/reference/types.html#type-expressions">https://doc.rust-lang.org/reference/types.html#type-expressions</a>.</p>
<p>Also, as a side note that document nailed down a terminology issue that's been slightly bugging me in reading <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a>. The variable names and comments in the parser frequently say "generics", but that's ambiguous: is it talking about generic parameters, or generic arguments? I believe every place that we deal with generics in the rustdoc search code, it's related to function parameters or return types. So we always mean "generic arguments" and should describe them as such.</p>
<p>generic arguments: <a href="https://doc.rust-lang.org/reference/paths.html#paths-in-expressions">https://doc.rust-lang.org/reference/paths.html#paths-in-expressions</a><br>
generic type parameters: <a href="https://doc.rust-lang.org/reference/types/parameters.html">https://doc.rust-lang.org/reference/types/parameters.html</a></p>



<a name="275964600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275964600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275964600">(Mar 20 2022 at 12:32)</a>:</h4>
<p>That would greatly increase the complexity to support rust syntax (because the rust syntax is quite big).</p>



<a name="275964855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275964855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275964855">(Mar 20 2022 at 12:38)</a>:</h4>
<blockquote>
<p>It seems like it would be simpler for search-index.js to represent function parameters as simple strings, and use simple string matching against them.</p>
</blockquote>
<p>They are basically. We added what types they were and their generics afterward.</p>
<blockquote>
<p>Also, as a side note that document nailed down a terminology issue that's been slightly bugging me in reading <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a>. The variable names and comments in the parser frequently say "generics", but that's ambiguous: is it talking about generic parameters, or generic arguments? I believe every place that we deal with generics in the rustdoc search code, it's related to function parameters or return types. So we always mean "generic arguments" and should describe them as such.</p>
</blockquote>
<p>It's an oversimplification that came from me. But yes, we're always talking about the bounds of the arguments ("generic arguments" is a bit misleading in my opinion).</p>



<a name="275965263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275965263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275965263">(Mar 20 2022 at 12:46)</a>:</h4>
<blockquote>
<p>(which of course we could do after landing <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a>; I'm not proposing to fully rewrite <a href="https://github.com/rust-lang/rust/issues/90630">#90630</a> at this point)</p>
</blockquote>
<p>I think once we'll have it, we can formalize a new syntax for the search. Since we'll have a parser, it'll be much simpler. :)</p>



<a name="275982541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275982541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275982541">(Mar 20 2022 at 19:02)</a>:</h4>
<p>Aha! With this update and your recent comments on the PR, I think I properly understand now:</p>
<p><a href="https://github.com/rust-lang/rust/pull/90630#discussion_r830616525">https://github.com/rust-lang/rust/pull/90630#discussion_r830616525</a><br>
<a href="https://github.com/rust-lang/rust/pull/90630#discussion_r830617102">https://github.com/rust-lang/rust/pull/90630#discussion_r830617102</a><br>
<a href="https://github.com/rust-lang/rust/pull/90630#discussion_r830617500">https://github.com/rust-lang/rust/pull/90630#discussion_r830617500</a></p>
<p>So if I search for <code>Foo&lt;Bar&gt;</code> In Parameters, there are two possibilities:</p>
<ul>
<li><code>Bar</code> is a concrete type, and this will match functions like <code>fn zoop(a: Foo&lt;Bar&gt;)</code></li>
<li><code>Bar</code> is a trait, and this will match functions like <code>fn blub&lt;T: Bar&gt;(a: Foo&lt;T&gt;)</code>. And presumably <code>fn yow&lt;T: Bar + Baz + Qux&gt;(a: Foo&lt;T&gt;)</code>. Will it also match <code>fn sput(a: Foo&lt;impl Bar&gt;)</code>?</li>
</ul>



<a name="275982740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275982740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275982740">(Mar 20 2022 at 19:06)</a>:</h4>
<p>I think part of why this is confusing is that it looks a lot like Rust syntax but the semantics are different in an important way. In general, if you see <code>Foo&lt;Bar&gt;</code> in Rust code, <code>Bar</code> is always one of:</p>
<ul>
<li>A concrete type</li>
<li>A type parameter (usually named like <code>T</code>, <code>A</code>, etc)</li>
</ul>
<p>But I think <code>Bar</code> is never a trait in Rust code, right?</p>



<a name="275982897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275982897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275982897">(Mar 20 2022 at 19:10)</a>:</h4>
<p>Similarly if I search for <code>Bar</code> In Parameters, there are the same two possibilities: <code>Bar</code> could be a concrete type or <code>Bar</code> could be a trait.</p>
<p>So for instance that would match <code>fn nurt&lt;T: Bar&gt;(a: T)</code>. Is that covered by the "generics" code in search.js even though <code>Bar</code> has no angle brackets?</p>



<a name="275983454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/275983454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#275983454">(Mar 20 2022 at 19:23)</a>:</h4>
<p>Yes, in any case, it matches both traits and types, either they're a bound or a type (so <code>Vec&lt;T&gt;</code> or Vec&lt;u8&gt;<code> or </code>T`.</p>



<a name="276076712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276076712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276076712">(Mar 21 2022 at 16:20)</a>:</h4>
<p>I tried to formalize those rules to understand them better. Are these correct?</p>
<p>Rule 1: A simple query "foo" in an In Parameters search matches a function F if, for any of F's parameters with type X, one of the following is true:</p>
<ul>
<li>X is a concrete type, and "foo" name-matches[1] X.</li>
<li>X is a type with generic parameters, and is instantiated such that one of those parameters is a concrete type that name-matches X.</li>
<li>F has a generic parameter G with trait bounds such that one of the traits that bounds G name-matches "foo"; _and_ X is a type with generic parameters; _and_ one of those parameters is assigned to G.</li>
</ul>
<p>Rule 2: A query with generics "foo&lt;bar, baz, ...&gt;" in an In Parameters search matches a function F if, for any of F's parameters with type X, _all_ of the following are true:</p>
<ul>
<li>X is a concrete type, and "foo" name-matches X.</li>
<li>X is a type with generic parameters, and has the same number of generic parameters as there are elements within the brackets after "foo" ("bar", "baz", ...)</li>
<li>For each of X's generic parameters G, the corresponding element within the brackets of the search matches G according to either rule 1 or rule 2.</li>
</ul>
<p>[1]: A string S name-matches a type X if: S == the fully qualified path of X; or S == the last component of the fully-qualified path of X.</p>



<a name="276102399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276102399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276102399">(Mar 21 2022 at 19:31)</a>:</h4>
<p>I'm not exactly sure it is. Let me try to formalize it with my words:</p>
<p>Rule 1: simple query "foo"</p>
<ul>
<li>It'll compute levenshtein distance on all items. If the item has generics, it'll try to match generics as well and take the lowest distance.</li>
<li>If the item is a function, it'll go through its arguments and returned values and run the previous point.</li>
</ul>
<p>Rule 2: a bit less simple query "foo&lt;A&gt;"</p>
<p>Mostly the same as before except that it won't use levenshtein distance anymore, only exact matches.</p>
<p>Rule 3: multiple arguments query "foo -&gt; ret"</p>
<p>Still exact match, but now we compare "foo" to the item name and to its arguments and we compare "ret" to the returned values.</p>



<a name="276106546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276106546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael (notriddle) Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276106546">(Mar 21 2022 at 20:06)</a>:</h4>
<blockquote>
<p>If the item has generics, it'll try to match generics as well and take the lowest distance.</p>
</blockquote>
<p>This remark is a bit confusing to me. As far as I can tell by looking through the code, the search index only preserves this information for function arguments, not most items.</p>
<p>For example, I tried searching <code>Vec&lt;u8&gt;</code> with the code in your branch. The "in parameters" and "in return types" tabs look great, but the "in names" section looks like this:</p>
<p><a href="/user_uploads/4715/K-tKwIbXg9hMmycYwgTnamAv/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/K-tKwIbXg9hMmycYwgTnamAv/image.png" title="image.png"><img src="/user_uploads/4715/K-tKwIbXg9hMmycYwgTnamAv/image.png"></a></div>



<a name="276112791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276112791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276112791">(Mar 21 2022 at 20:59)</a>:</h4>
<p>Because generics mismatch are not "eliminatory" I think. Should they?</p>



<a name="276117079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276117079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael (notriddle) Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276117079">(Mar 21 2022 at 21:34)</a>:</h4>
<p>Are you saying that generics info for the struct is actually included in the search index? I can't find it, but I'm willing to be proven wrong!</p>



<a name="276126411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276126411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276126411">(Mar 21 2022 at 23:21)</a>:</h4>
<p>I'll check that tomorrow</p>



<a name="276130502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276130502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276130502">(Mar 22 2022 at 00:20)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> your formalization isn't precise enough for me to understand:</p>
<blockquote>
<p>Rule 1: simple query "foo"<br>
It'll compute levenshtein distance on all items. If the item has generics, it'll try to match generics as well and take the lowest distance.</p>
</blockquote>
<p>What does "all items" mean? What does "try to match generics" mean?</p>
<p>Maybe I can try restating this:</p>
<p>Rule 1: A simple query "foo" in an In Parameters search and a function F, the _score_ of F is the minimum of the Levenshtein distance between "foo" and any of the following:</p>
<ul>
<li>The base name of the type of each parameter of F</li>
<li>The base name of the type assigned to each type parameter of each parameter of F (and so on for those type parameters, recursively)</li>
<li>Any trait bound on any type variable in the definition of F</li>
</ul>
<p>If the _score_ of F is less than MAX_LEV_DISTANCE + 1, "foo" matches F and will be included in the search results. Additionally, the search results will be sorted in order of increasing score (lower score means a better match).</p>
<p>Note: I'm specifically just talking about In Parameters, and not In Return Types or "both" (<code>foo -&gt; bar</code>), because it's simpler and once I've figured out how to formalize how it works, it's easy to extend to those other types of searches.</p>



<a name="276130546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276130546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276130546">(Mar 22 2022 at 00:21)</a>:</h4>
<p>"base name" in the above means: the final element of an item's path. Does that have a more precise name in Rust?</p>
<p>Similarly, is there a term for "the type assigned to a type's type parameters"? For instance <code>u8</code> in <code>Vec&lt;u8&gt;</code>?</p>



<a name="276165246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276165246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276165246">(Mar 22 2022 at 10:07)</a>:</h4>
<blockquote>
<p>Similarly, is there a term for "the type assigned to a type's type parameters"? For instance u8 in Vec&lt;u8&gt;?</p>
</blockquote>
<p>I call them generics for this reason. ^^'</p>



<a name="276165287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276165287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276165287">(Mar 22 2022 at 10:07)</a>:</h4>
<p>I agree with the explanation you have this time.</p>



<a name="276186376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276186376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276186376">(Mar 22 2022 at 13:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210053">Michael (notriddle) Howell</span> <a href="#narrow/stream/266220-rustdoc/topic/search.20syntax.20discussion.20.28for.20.2390630.29/near/276117079">said</a>:</p>
<blockquote>
<p>Are you saying that generics info for the struct is actually included in the search index? I can't find it, but I'm willing to be proven wrong!</p>
</blockquote>
<p>Just checked and you are right. The generics are not generated for types (I think they should though but let's keep it for later). So currently, the generics aren't checked on plain types.</p>



<a name="276225082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276225082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276225082">(Mar 22 2022 at 17:27)</a>:</h4>
<blockquote>
<p>Similarly, is there a term for "the type assigned to a type's type parameters"? For instance u8 in Vec&lt;u8&gt;?<br>
I call them generics for this reason</p>
</blockquote>
<p>What do you mean "this reason"? Are you saying "there is no term for the type assigned to a type's type parameters"?</p>



<a name="276226883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276226883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael (notriddle) Howell <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276226883">(Mar 22 2022 at 17:39)</a>:</h4>
<blockquote>
<p>I think they should though</p>
</blockquote>
<p>I don't think they should be, because I don't think they'd be very useful. There are two reasons why I think so</p>
<ol>
<li>
<p>A lot of generic types don't actually have bounded generics, even if they are unusable without type parameters that implement certain traits. For example, HashMap.</p>
</li>
<li>
<p><a href="https://github.com/ndmitchell/hoogle/blob/master/README.md#searching">Hoogle</a> doesn't seem to support it. They describe things in terms of "search-by-name" and "search-by-type", and whenever I <a href="https://hoogle.haskell.org/?hoogle=%3A%3A+Ord+a+&amp;scope=set%3Astackage">try to do search-by-type</a>, I only seem to get functions, not typeclasses or data. I'm not a Haskeller, though, so I might be doing it wrong.</p>
</li>
</ol>



<a name="276244958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276244958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276244958">(Mar 22 2022 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315412">jsha</span> <a href="#narrow/stream/266220-rustdoc/topic/search.20syntax.20discussion.20.28for.20.2390630.29/near/276225082">said</a>:</p>
<blockquote>
<blockquote>
<p>Similarly, is there a term for "the type assigned to a type's type parameters"? For instance u8 in Vec&lt;u8&gt;?<br>
I call them generics for this reason</p>
</blockquote>
<p>What do you mean "this reason"? Are you saying "there is no term for the type assigned to a type's type parameters"?</p>
</blockquote>
<p>More precisely, by generics I mean the result from the inlining we're doing. For example, when you have <code>fn foo&lt;T: Clone + Bar&gt;(f: Vec&lt;T&gt;)</code>, the end result from the search perspective kinda looks like this: <code>fn foo(f: Vec&lt;Clone, Bar&gt;)</code>. It's not really a trait bound, more like a list of generics like we have in other languages (hence the term I'm using).</p>



<a name="276244994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20syntax%20discussion%20%28for%20%2390630%29/near/276244994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20syntax.20discussion.20(for.20.2390630).html#276244994">(Mar 22 2022 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210053">Michael (notriddle) Howell</span> <a href="#narrow/stream/266220-rustdoc/topic/search.20syntax.20discussion.20.28for.20.2390630.29/near/276226883">said</a>:</p>
<blockquote>
<blockquote>
<p>I think they should though</p>
</blockquote>
<p>I don't think they should be, because I don't think they'd be very useful. There are two reasons why I think so</p>
<ol>
<li>
<p>A lot of generic types don't actually have bounded generics, even if they are unusable without type parameters that implement certain traits. For example, HashMap.</p>
</li>
<li>
<p><a href="https://github.com/ndmitchell/hoogle/blob/master/README.md#searching">Hoogle</a> doesn't seem to support it. They describe things in terms of "search-by-name" and "search-by-type", and whenever I <a href="https://hoogle.haskell.org/?hoogle=%3A%3A+Ord+a+&amp;scope=set%3Astackage">try to do search-by-type</a>, I only seem to get functions, not typeclasses or data. I'm not a Haskeller, though, so I might be doing it wrong.</p>
</li>
</ol>
</blockquote>
<p>That's a good point. Well, in any case it's a discussion we can have later on. :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
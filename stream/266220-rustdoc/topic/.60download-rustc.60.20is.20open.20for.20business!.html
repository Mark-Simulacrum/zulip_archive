<html>
<head><meta charset="utf-8"><title>`download-rustc` is open for business! · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html">`download-rustc` is open for business!</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="227551705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/227551705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#227551705">(Feb 24 2021 at 05:53)</a>:</h4>
<p>Since the beta bump today, <code>download-rustc</code> should work out of the box :) It speeds up compile times by a factor of about 60 by downloading rustc instead of compiling it from source. I encourage you to try it out! You can enable it by adding <code>download-rustc = true</code> under <code>[rust]</code> in config.toml. There's a list of known issues at <a href="https://github.com/rust-lang/rust/issues/81930">https://github.com/rust-lang/rust/issues/81930</a>; if you run into something not on the list, please report it.</p>
<p>Happy hunting!</p>



<a name="227566213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/227566213" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#227566213">(Feb 24 2021 at 08:49)</a>:</h4>
<p>Finally! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="227572546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/227572546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Poliorcetics <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#227572546">(Feb 24 2021 at 09:46)</a>:</h4>
<p>I haven’t tested this yet, but how does it interact with modifications to rustc when the feature is on ? Like adding a rustdoc specific-feature that need to exists in the <a href="http://active.rs">active.rs</a> file of rustc</p>



<a name="227600115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/227600115" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#227600115">(Feb 24 2021 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="307289">@Poliorcetics</span> it doesn't. If you need to change rustc you'll have to turn it off. It will warn you if you have changes to <code>compiler/</code>.</p>



<a name="227600486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/227600486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Poliorcetics <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#227600486">(Feb 24 2021 at 13:51)</a>:</h4>
<p>Oh <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span> Time to keep two copies of the rust git maybe <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="227600663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/227600663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#227600663">(Feb 24 2021 at 13:52)</a>:</h4>
<p><code>git worktree</code>!</p>



<a name="227706417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/227706417" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#227706417">(Feb 25 2021 at 01:55)</a>:</h4>
<p>Yes, Git worktrees are <em>amazing</em>! I can't emphasize enough how great they are.</p>



<a name="228088874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/228088874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> CraftSpider <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#228088874">(Feb 27 2021 at 23:01)</a>:</h4>
<p>I just got <code>Not running bootstrap::test::RustdocJson because its artifacts have been downloaded from CI (</code>download-rustc<code> is set)</code>, which seems undesirable. Any fix for this?</p>



<a name="228088944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/228088944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#228088944">(Feb 27 2021 at 23:02)</a>:</h4>
<p><span class="user-mention" data-user-id="319144">@CraftSpider</span> cherry pick<br>
<a href="https://github.com/rust-lang/rust/pull/82480">https://github.com/rust-lang/rust/pull/82480</a></p>



<a name="228418724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/228418724" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#228418724">(Mar 02 2021 at 14:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!/near/228088944">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="319144">CraftSpider</span> cherry pick<br>
<a href="https://github.com/rust-lang/rust/pull/82480">https://github.com/rust-lang/rust/pull/82480</a></p>
</blockquote>
<p>this has now been merged :)</p>



<a name="231171261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/231171261" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nelson J Morais <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#231171261">(Mar 20 2021 at 21:00)</a>:</h4>
<p>first try  and built a rustdoc in less then two minutes. add to that the package metadata for rust-analyzer, <code>rustc_private = true</code> in Cargo.toml of librustdoc and theres code completion in-tree for all the code i've looked at so far.<br>
really good <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="231224766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/231224766" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#231224766">(Mar 21 2021 at 16:03)</a>:</h4>
<p>btw this will be broken this week because it's release week: <a href="https://github.com/rust-lang/rust/issues/81930">https://github.com/rust-lang/rust/issues/81930</a></p>



<a name="231225497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/231225497" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#231225497">(Mar 21 2021 at 16:17)</a>:</h4>
<p>you can work around it by cherry-picking <a href="https://github.com/rust-lang/rust/pull/83350">https://github.com/rust-lang/rust/pull/83350</a></p>



<a name="231228762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/231228762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#231228762">(Mar 21 2021 at 17:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!/near/231224766">said</a>:</p>
<blockquote>
<p>btw this will be broken this week because it's release week: <a href="https://github.com/rust-lang/rust/issues/81930">https://github.com/rust-lang/rust/issues/81930</a></p>
</blockquote>
<p>oh oops I take it back, <a href="https://github.com/rust-lang/rust/issues/83350">#83350</a> was already approved <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> thank you <span class="user-mention silent" data-user-id="116122">simulacrum</span> !</p>



<a name="231229774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/231229774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nelson J Morais <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#231229774">(Mar 21 2021 at 17:37)</a>:</h4>
<p>ok, thanks for the heads up. I see you already working on fixing that release week issue here: <a href="https://github.com/rust-lang/rust/issues/81930#issuecomment-803611902">https://github.com/rust-lang/rust/issues/81930#issuecomment-803611902</a> ?</p>



<a name="231270459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%60download-rustc%60%20is%20open%20for%20business%21/near/231270459" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/266220-rustdoc/topic/.60download-rustc.60.20is.20open.20for.20business!.html#231270459">(Mar 22 2021 at 07:10)</a>:</h4>
<p>ok I just spent far too much time on this and I think everything is in flight for this to be turned on by default :)</p>
<ul>
<li><a href="https://github.com/rust-lang/rust/pull/82739">https://github.com/rust-lang/rust/pull/82739</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/83368">https://github.com/rust-lang/rust/pull/83368</a></li>
<li><a href="https://github.com/rust-lang/rust/pull/83370">https://github.com/rust-lang/rust/pull/83370</a></li>
</ul>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
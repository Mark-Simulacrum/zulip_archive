<html>
<head><meta charset="utf-8"><title>✔ Debugging Rustdoc · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html">✔ Debugging Rustdoc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="247838498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/247838498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#247838498">(Aug 01 2021 at 03:53)</a>:</h4>
<p>Hi! Possibly stupid question: how do I get output from <code>dbg!</code> invocations within rustdoc?</p>



<a name="247838839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/247838839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#247838839">(Aug 01 2021 at 04:03)</a>:</h4>
<p>I got it to work, but it's a bit unpleasant. I have to manually specify the library paths at the moment.</p>



<a name="247838905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/247838905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#247838905">(Aug 01 2021 at 04:05)</a>:</h4>
<p>Ahh, figured it out.</p>



<a name="247838911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/247838911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#247838911">(Aug 01 2021 at 04:05)</a>:</h4>
<p>Sorry to bother y'all!</p>



<a name="247838914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/247838914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#247838914">(Aug 01 2021 at 04:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417924">inquisitivecrystal</span> has marked this topic as resolved.</p>



<a name="248675026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248675026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248675026">(Aug 06 2021 at 22:18)</a>:</h4>
<p>By the way, what was the solution you came up with? I've never managed to get <code>dbg!</code> to work within rustdoc—I always use <code>debug!</code> (which is a logging macro I think provided by <code>tracing</code>).</p>



<a name="248678626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248678626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248678626">(Aug 06 2021 at 23:05)</a>:</h4>
<p>That's really strange, dbg should work fine</p>



<a name="248680398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248680398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248680398">(Aug 06 2021 at 23:33)</a>:</h4>
<p>Hmm, maybe my config.toml is configured such that the output is being swallowed or something...</p>



<a name="248697165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248697165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248697165">(Aug 07 2021 at 05:14)</a>:</h4>
<p>There should be no possible way to configure that. Dbg writes directly to stderr.</p>



<a name="248712692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248712692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248712692">(Aug 07 2021 at 11:53)</a>:</h4>
<p><code>dbg!</code> only works on debug builds, maybe you're building in release mode?</p>



<a name="248715493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715493">(Aug 07 2021 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> that is not the case, it works unconditionally</p>



<a name="248715544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715544">(Aug 07 2021 at 13:06)</a>:</h4>
<p>I never saw a <code>dbg!</code> statement when I debugged rustdoc :-/</p>



<a name="248715545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715545">(Aug 07 2021 at 13:06)</a>:</h4>
<p>You're thinking of debug! which is controlled by <code>debug-logging</code> and off by default in release mode</p>



<a name="248715556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715556">(Aug 07 2021 at 13:07)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> yes, because they get removed before merging <em>because</em> they log unconditionally</p>



<a name="248715566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715566">(Aug 07 2021 at 13:07)</a>:</h4>
<p>no I meant when I added myself for tests</p>



<a name="248715623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715623">(Aug 07 2021 at 13:08)</a>:</h4>
<p>Maybe it's worth checking if I didn't change the local config somehow for rustdoc...</p>



<a name="248715627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715627">(Aug 07 2021 at 13:08)</a>:</h4>
<p>Are you sure the test suite wasn't just hiding the output? dbg! goes through the exact same output as eprintln!</p>



<a name="248715634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715634">(Aug 07 2021 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> my whole point is that hiding the output through config.toml shouldn't be possible</p>



<a name="248715646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248715646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248715646">(Aug 07 2021 at 13:09)</a>:</h4>
<p>Hum, that might be it. And I was simply thinking that they maybe updated their <code>cargo.toml</code></p>



<a name="248906542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/248906542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#248906542">(Aug 09 2021 at 20:53)</a>:</h4>
<p>I just tested it, and <code>dbg!</code> <em>does</em> work for me! I'm not sure why it hadn't worked before, but I'm glad it does now.</p>



<a name="249445433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/249445433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#249445433">(Aug 14 2021 at 06:57)</a>:</h4>
<p>I'm sorry, I wish I saw this sooner. The problem I had is that it seems that rustdoc won't rerun if you add a <code>dbg!</code> somewhere, so I had to clean the old doc build to get rustdoc to rerun. Otherwise, it seemed like it was just giving me cached output from a previous run. I don't know if that was the actual problem, but cleaning the old docs seemed like it fixed it.</p>



<a name="249445435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/249445435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#249445435">(Aug 14 2021 at 06:57)</a>:</h4>
<p>I could just be totally wrong though.</p>



<a name="249462357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/249462357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#249462357">(Aug 14 2021 at 14:27)</a>:</h4>
<p>That seems possible. I try to avoid cargo altogether when modifying rustdoc, I find it pretty hard to predict when it will rerun the binary</p>



<a name="249462359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/%E2%9C%94%20Debugging%20Rustdoc/near/249462359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/.E2.9C.94.20Debugging.20Rustdoc.html#249462359">(Aug 14 2021 at 14:27)</a>:</h4>
<p>Especially since it doesn't notice when the binary changes on disk</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
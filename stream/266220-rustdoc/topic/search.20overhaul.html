<html>
<head><meta charset="utf-8"><title>search overhaul · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html">search overhaul</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260183360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183360">(Nov 03 2021 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> I've seen it mentioned a couple places you're working on an overhaul of search. Is there an open issue for that work? I'm curious to know what aspects you're overhauling!</p>



<a name="260183377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183377">(Nov 03 2021 at 19:16)</a>:</h4>
<p>I think Guillaume's about to open a PR with it.</p>



<a name="260183400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183400">(Nov 03 2021 at 19:16)</a>:</h4>
<p>IIUC, most of it is a rewrite of the frontend to use a better parser.</p>



<a name="260183463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183463">(Nov 03 2021 at 19:17)</a>:</h4>
<p>I think this is the branch: <a href="https://github.com/GuillaumeGomez/rust/tree/improve-rustdoc-search">https://github.com/GuillaumeGomez/rust/tree/improve-rustdoc-search</a></p>



<a name="260183466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183466">(Nov 03 2021 at 19:17)</a>:</h4>
<p>The biggest one is having a real parsing</p>



<a name="260183478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183478">(Nov 03 2021 at 19:17)</a>:</h4>
<p>and yes, it's the branch :)</p>



<a name="260183537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183537">(Nov 03 2021 at 19:18)</a>:</h4>
<p>I'm currently adding tests for the JS parser</p>



<a name="260183574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183574">(Nov 03 2021 at 19:18)</a>:</h4>
<p>then once I'm confident enough on the parser behaviour, I'll extend tests for the queries</p>



<a name="260183602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183602">(Nov 03 2021 at 19:18)</a>:</h4>
<p>but with this you should already have a good enough idea of what I'm trying to achieve ;)</p>



<a name="260183662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183662">(Nov 03 2021 at 19:19)</a>:</h4>
<p>requests like: <code>from(result&lt;str&gt;) -&gt; result&lt;str, str&gt;</code> will finally completely work</p>



<a name="260183746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260183746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260183746">(Nov 03 2021 at 19:20)</a>:</h4>
<p>or even stuff like <code>Option&lt;Result&lt;Option&lt;"Whatever"&lt;i32&gt;&gt;&gt;</code> should work as well</p>



<a name="260185875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260185875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260185875">(Nov 03 2021 at 19:35)</a>:</h4>
<blockquote>
<p><code>Option&lt;Result&lt;Option&lt;"Whatever"&lt;i32&gt;&gt;&gt;</code></p>
</blockquote>
<p>Do those quotes mean it must match verbatim? I assume it's not supposed to match string literals ;)</p>



<a name="260185895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260185895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260185895">(Nov 03 2021 at 19:35)</a>:</h4>
<p>Speaking of, how does your new query parser handle const generics?</p>



<a name="260195849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260195849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260195849">(Nov 03 2021 at 20:52)</a>:</h4>
<p>euuuh, no idea?</p>



<a name="260195902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260195902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260195902">(Nov 03 2021 at 20:52)</a>:</h4>
<p>when there is an element surrounded with double quotes, it means literal search for it</p>



<a name="260195925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260195925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260195925">(Nov 03 2021 at 20:52)</a>:</h4>
<p>as for now I target generics and items' name</p>



<a name="260195936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260195936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260195936">(Nov 03 2021 at 20:52)</a>:</h4>
<p>we can always extend it later on</p>



<a name="260195961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260195961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260195961">(Nov 03 2021 at 20:52)</a>:</h4>
<p>the goal is mostly to clean up all this mess to simplify it a bit</p>



<a name="260455096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260455096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260455096">(Nov 05 2021 at 19:43)</a>:</h4>
<p>And the PR is now ready! \o/ I'll ask some help from <span class="user-mention" data-user-id="315412">@jsha</span> to have documentation online :)</p>



<a name="260458656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/search%20overhaul/near/260458656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/search.20overhaul.html#260458656">(Nov 05 2021 at 20:12)</a>:</h4>
<p>PR is here: <a href="https://github.com/rust-lang/rust/pull/90630">https://github.com/rust-lang/rust/pull/90630</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
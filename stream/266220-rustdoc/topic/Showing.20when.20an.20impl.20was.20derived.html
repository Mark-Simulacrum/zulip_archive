<html>
<head><meta charset="utf-8"><title>Showing when an impl was derived · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html">Showing when an impl was derived</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268737527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268737527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268737527">(Jan 20 2022 at 18:35)</a>:</h4>
<p>(I split this to a different topic)</p>
<p>Now that we have pages for the derives, like &lt;<a href="https://doc.rust-lang.org/std/clone/macro.Clone.html">https://doc.rust-lang.org/std/clone/macro.Clone.html</a>&gt;, I think this is interesting.  That would be a great place to put more about what deriving it means, and the <code>impl</code> could link to the derive macro for the trait.</p>
<p>That'd need the proc macro infrastructure to record this stuff somewhere, but that seems plausible.  (So you know whether it came from <code>derive_more</code>'s Clone or <code>std</code>'s or whatever.)</p>
<p>Someone new to the trait can always click through to see what methods are available.</p>



<a name="268739720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268739720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268739720">(Jan 20 2022 at 18:50)</a>:</h4>
<p>Things could be made far far shorter by cutting down on all the normal fanciness and just making a terse bulleted list of trait/method</p>
<p>eg</p>
<ul>
<li>Clone: clone, clone_from</li>
<li>Copy</li>
<li>PartialEq: eq, ne</li>
<li>Default: default</li>
<li>Send</li>
</ul>
<p>And we could even say ", and other default methods" if the default methods list is long (such as Iterator)</p>



<a name="268740052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268740052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268740052">(Jan 20 2022 at 18:52)</a>:</h4>
<p>As it is, for many things I don't even attempt to look in the body of a lot of the "primitive ish" type docs half the time because it's just a torrent of noise if there's a deref (strings and vecs and so on) or if there's a lot of trait impls (such as with number types or bitfield types).</p>



<a name="268740139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268740139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268740139">(Jan 20 2022 at 18:53)</a>:</h4>
<p>It's actually better for the user to look in the tiny left scroll bar because that keeps things to just the traits implemented, in a terse format.</p>



<a name="268740438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268740438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268740438">(Jan 20 2022 at 18:55)</a>:</h4>
<p>And if a thing implements Iterator then wow that's a huuuuuge pile of stuff that's not going to be helpful to nearly anyone.</p>



<a name="268740599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268740599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268740599">(Jan 20 2022 at 18:56)</a>:</h4>
<p>Like when a thing is an iterator, what you care about is what comes out of the <code>next</code> method. That's basically it. The rest is just the same iterator stuff over and over.</p>



<a name="268741598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268741598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268741598">(Jan 20 2022 at 19:03)</a>:</h4>
<p>You did say you were concerned that a beginner wouldn't know about a particular method on a particular trait sometimes, and I am also concerned about that.</p>
<p>However, I think the way to fix that is to more strongly emphasize traits being largely <em>predictable</em>.<br>
If I see code calling <code>obj.clone()</code> I'm going to assume it's the Clone::clone method for that type, and <strong>things are very weird if that's not the case</strong>. If there's a method named clone that's not part of the Clone trait then that's very weird and the library author should have written down something about what's going on there.</p>
<p>Accordingly, we can leverage the predictable nature of these common traits. If the docs have just a bullet point that says "this type can be cloned" with a link, new users will be able to click the link and learn what that means and then when the next type says the exact same short message they'll immediately understand "oh this is the same as before" and accelerate their understanding of the type.</p>



<a name="268741862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268741862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268741862">(Jan 20 2022 at 19:05)</a>:</h4>
<p>Similarly, basically no one needs to see the signature for <code>Debug::fmt</code> on a type for the 1000th time. It should just say "this type implements Debug"</p>



<a name="268742096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268742096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268742096">(Jan 20 2022 at 19:07)</a>:</h4>
<p>Basically I don't think that every single type should show full details of every single method it supports, the docs should focus on <em>what is special about this type</em>.</p>



<a name="268742705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268742705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268742705">(Jan 20 2022 at 19:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived/near/268741862">said</a>:</p>
<blockquote>
<p>Similarly, basically no one needs to see the signature for <code>Debug::fmt</code> on a type for the 1000th time. It should just say "this type implements Debug"</p>
</blockquote>
<p>But then you can't look on the page if <code>fmt</code> is implemented either. :-/</p>



<a name="268743295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268743295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268743295">(Jan 20 2022 at 19:17)</a>:</h4>
<p>I don't understand your meaning</p>



<a name="268743335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268743335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268743335">(Jan 20 2022 at 19:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived/near/268742096">said</a>:</p>
<blockquote>
<p>[...] the docs should focus on <em>what is special about this type</em>.</p>
</blockquote>
<p>One idea: maybe this could leverage something about whether there's any doc comments on the impl methods?  Like it's worth showing details about &lt;<a href="https://doc.rust-lang.org/nightly/std/collections/struct.BinaryHeap.html#impl-From%3CVec%3CT%2C%20Global%3E%3E">https://doc.rust-lang.org/nightly/std/collections/struct.BinaryHeap.html#impl-From%3CVec%3CT%2C%20Global%3E%3E</a>&gt; because that has something to say about the impl.  Whereas most <code>Clone</code> impls don't have anything useful to say.</p>
<p>Aside: I just looked at nightly docs, and wow, new left bar looks great.</p>



<a name="268743484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268743484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268743484">(Jan 20 2022 at 19:18)</a>:</h4>
<p>Yes trait impls with docs on them should be highlighted compared to trait impls without them for sure.</p>



<a name="268743539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268743539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268743539">(Jan 20 2022 at 19:19)</a>:</h4>
<p>Though I'm not sure RA does this right now :(</p>



<a name="268752873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268752873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268752873">(Jan 20 2022 at 20:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived/near/268743295">said</a>:</p>
<blockquote>
<p>I don't understand your meaning</p>
</blockquote>
<p>I mean doing ctrl+F then typing "fmt". If the <code>fmt</code> method isn't present on the page, only the trait name <code>Debug</code>, then you can't look for one of its methods.</p>



<a name="268754408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268754408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268754408">(Jan 20 2022 at 20:41)</a>:</h4>
<p>well i said to put it as one trait per line and then a list of each trait's methods in my example bulleted list</p>



<a name="268754887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268754887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268754887">(Jan 20 2022 at 20:45)</a>:</h4>
<p>Ah sorry, I misunderstood</p>



<a name="268754949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268754949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268754949">(Jan 20 2022 at 20:45)</a>:</h4>
<p>and the exact layout is not even that important</p>



<a name="268755105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268755105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268755105">(Jan 20 2022 at 20:47)</a>:</h4>
<p>My point I want to focus on is that right now docs to do with trait impls are poor because there's way too much info over and over with no indication when things are "normal" and when things are "unusual".</p>



<a name="268787422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Showing%20when%20an%20impl%20was%20derived/near/268787422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Showing.20when.20an.20impl.20was.20derived.html#268787422">(Jan 21 2022 at 02:17)</a>:</h4>
<p>Perhaps we could render it as</p>
<div class="codehilite"><pre><span></span><code>impl Debug for MyType {
  fn fmt
}
</code></pre></div>
<p>and then link <code>fmt</code> to <code>Debug::fmt</code>. That would allow us to distinguish between associated types and methods in the list, e.g.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
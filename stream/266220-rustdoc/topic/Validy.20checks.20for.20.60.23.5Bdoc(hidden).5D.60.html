<html>
<head><meta charset="utf-8"><title>Validy checks for `#[doc(hidden)]` · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Validy.20checks.20for.20.60.23.5Bdoc(hidden).5D.60.html">Validy checks for `#[doc(hidden)]`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278317290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Validy%20checks%20for%20%60%23%5Bdoc%28hidden%29%5D%60/near/278317290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fmease <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Validy.20checks.20for.20.60.23.5Bdoc(hidden).5D.60.html#278317290">(Apr 08 2022 at 15:03)</a>:</h4>
<p>I've noticed you can put <code>#[doc(hidden)]</code> on associated items in trait impls regardless of whether the corresp. item in the trait declaration is hidden or not and rustdoc ignores it (still displaying the assoc. item):</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">Tr</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">fn</span> <span class="nf">f</span><span class="p">();</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Ty</span><span class="p">;</span><span class="w"></span>
<span class="k">impl</span><span class="w"> </span><span class="n">Tr</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Ty</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cp">#[doc(hidden)]</span><span class="w"> </span><span class="k">fn</span> <span class="nf">f</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="c1">//               ^^^^^^^^^^^^^^ currently allowed</span>
</code></pre></div>
<p>IMO, rustdoc should emit a warning saying it has no effect and it is going to be treated as a hard error in the future. Even if the assoc. item in the trait declaration is <code>#[doc(hidden)]</code>, we should emit the same warning.<br>
What do you think?</p>



<a name="278317972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Validy%20checks%20for%20%60%23%5Bdoc%28hidden%29%5D%60/near/278317972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Validy.20checks.20for.20.60.23.5Bdoc(hidden).5D.60.html#278317972">(Apr 08 2022 at 15:09)</a>:</h4>
<p>It should definitely.</p>



<a name="278317995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Validy%20checks%20for%20%60%23%5Bdoc%28hidden%29%5D%60/near/278317995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Validy.20checks.20for.20.60.23.5Bdoc(hidden).5D.60.html#278317995">(Apr 08 2022 at 15:09)</a>:</h4>
<p>Just like we do for doc comments documenting nothing</p>



<a name="278318042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Validy%20checks%20for%20%60%23%5Bdoc%28hidden%29%5D%60/near/278318042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Validy.20checks.20for.20.60.23.5Bdoc(hidden).5D.60.html#278318042">(Apr 08 2022 at 15:09)</a>:</h4>
<p>There is code for that in <code>compiler/rustc_lint</code> iirc</p>



<a name="278319731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Validy%20checks%20for%20%60%23%5Bdoc%28hidden%29%5D%60/near/278319731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fmease <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Validy.20checks.20for.20.60.23.5Bdoc(hidden).5D.60.html#278319731">(Apr 08 2022 at 15:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/266220-rustdoc/topic/Validy.20checks.20for.20.60.23.5Bdoc.28hidden.29.5D.60/near/278318042">said</a>:</p>
<blockquote>
<p>There is code for that in <code>compiler/rustc_lint</code> iirc</p>
</blockquote>
<p>Great, thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>ui test perf · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html">ui test perf</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271768527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/ui%20test%20perf/near/271768527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html#271768527">(Feb 13 2022 at 22:17)</a>:</h4>
<p>@_<strong>Joshua Nelson|232545</strong> <a href="#narrow/stream/122651-general/topic/Glacier.20but.20for.20non-ICE.20bugs/near/266263171">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/122651-general/topic/Glacier.20but.20for.20non-ICE.20bugs/near/266222116">said</a>:</p>
<blockquote>
<p>yeah, considering what they're doing UI tests run damn fast. ~130 CPU-milliseconds  per test.</p>
</blockquote>
<p>rustdoc UI tests are like 10x slower than this for some reason, it would be nice to track down why</p>
</blockquote>
<p>Do you mean src/test/rustdoc or src/test/rustdoc-ui? because the latter are only ~5 slower for me</p>



<a name="271770099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/ui%20test%20perf/near/271770099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html#271770099">(Feb 13 2022 at 22:52)</a>:</h4>
<p>The latter I assume. But both are slow</p>



<a name="271770178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/ui%20test%20perf/near/271770178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html#271770178">(Feb 13 2022 at 22:54)</a>:</h4>
<p>For the first it's because we need to generate docs and check the generated DOM</p>



<a name="271913616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/ui%20test%20perf/near/271913616" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html#271913616">(Feb 15 2022 at 01:14)</a>:</h4>
<p>I've been meaning to look into the performance issues with the non-UI tests for rustdoc for a while now because it really is quite slow</p>



<a name="271952780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/ui%20test%20perf/near/271952780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html#271952780">(Feb 15 2022 at 10:20)</a>:</h4>
<p>From profiles it looks like it's doing a lot of metadata loading, more than regular UI tests, the call tree under <code>rustdoc::passes::collect_trait_impls::collect_trait_impls</code></p>



<a name="271966066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/ui%20test%20perf/near/271966066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html#271966066">(Feb 15 2022 at 12:25)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/93954">https://github.com/rust-lang/rust/pull/93954</a> might help with some of the tests, at least.</p>



<a name="272098518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/ui%20test%20perf/near/272098518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nixon Enraght-Moony <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/ui.20test.20perf.html#272098518">(Feb 16 2022 at 10:37)</a>:</h4>
<p>That will only effect <code>src/test/rustdoc-json</code></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
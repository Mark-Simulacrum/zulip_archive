<html>
<head><meta charset="utf-8"><title>Merging Impl Blocks · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html">Merging Impl Blocks</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269762335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269762335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269762335">(Jan 28 2022 at 16:30)</a>:</h4>
<p>Would it be possible, perhaps as a flag, for rustdoc to merge impl blocks in the HTML output?</p>
<p>For example, <a href="https://docs.rs/wide/latest/wide/struct.f32x4.html">https://docs.rs/wide/latest/wide/struct.f32x4.html</a>, this has 3 different "impl f32x4" blocks, but that's basically not important to users of the crate. An accident of having a sprawling crate with many contributors. It would be nice if I could just set some flag and have rustdoc put them together for me.</p>



<a name="269774608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269774608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269774608">(Jan 28 2022 at 17:50)</a>:</h4>
<p>It 's "complicated" in case an impl block is documented.</p>



<a name="269777939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269777939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269777939">(Jan 28 2022 at 18:10)</a>:</h4>
<p>If it only merged undocumented blocks that would still be a great improvement.</p>
<p>Particularly since nearly no one documents the impl blocks themselves.</p>



<a name="269788157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269788157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269788157">(Jan 28 2022 at 19:18)</a>:</h4>
<p>Different <em>inherent</em> impl blocks seem particularly uninteresting, since I would generally expect any documentation to be on the type instead of the <code>impl Foo {</code> block.</p>
<p>Going a step further, I tend to find bounds on impl blocks to be confusing.  Especially if you use the sidebar to jump to a method and then you can't tell that you're in a block that has extra bounds on some of the type parameters.  I'd almost rather any bounds from them just be merged into the function bounds, for rustdoc purposes.  (This was less the case back when almost everything on <code>Cell</code> needed <code>Copy</code> and almost everything on <code>HashMap</code> needed <code>K: Eq+Hash</code>, but now that a bunch of the bounds have been weakened the groupings seem pretty unhelpeful -- especially since they sometimes put <code>unwrap_or</code> and <code>unwrap_or_default</code> in very different places.)</p>



<a name="269804803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269804803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269804803">(Jan 28 2022 at 21:25)</a>:</h4>
<p>I was just discussing this with <span class="user-mention" data-user-id="315412">@jsha</span> recently. We'd like to merge inherent impl blocks and automatically categorize (and thus sort) them based on whether they're constructors, destructors, mutators, or readers (partially custom terminology that I just came up with <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> ).</p>



<a name="269841327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269841327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269841327">(Jan 29 2022 at 05:41)</a>:</h4>
<p>Just remember that if it's an automatic assessment then Cell or anything Cell-like will probably screw up the assessment.</p>
<p>Particularly, I asked about this because I've got many OS calls that take HWND (or some other "handle/token" value) as the first param and so I was going to rustify them as being methods on HWND that all just take <code>self</code> and do whatever, and all the little impl blocks would end up getting spread all over several modules and sub-modules. Since they're all <code>(self, other arg) -&gt; LibResult&lt;Type&gt;</code> or whatever, i don't think any sort of auto-detect system would be able to make much sense of things.</p>



<a name="269866091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269866091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269866091">(Jan 29 2022 at 14:02)</a>:</h4>
<p>There's also this related item: <a href="https://github.com/rust-lang/rust/issues/85492">https://github.com/rust-lang/rust/issues/85492</a></p>
<p>My plan there had been to group by impl, so we'd have three repeating groups. But moving the impl bounds onto the methods is an interesting idea! It would mean a lot of repetition on the methods.</p>
<p>Another idea: When you're scrolling a PR in GitHub, there's a stickied item at the top that says what file you're in. It's remarkably subtle and unintrusive. I've considered doing the same for <code>impl</code> headings. I wound up concluding it's not the right thing - I don't want too many sticky bars. But I figured I'd toss it out there and see if folks find it worth refining.</p>



<a name="269885972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269885972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269885972">(Jan 29 2022 at 20:13)</a>:</h4>
<p>I think the sticky bar is at least worth a mockup to see how it feels.</p>



<a name="269919827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269919827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269919827">(Jan 30 2022 at 08:33)</a>:</h4>
<p>I like the sticky header bar idea</p>



<a name="269922629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/Merging%20Impl%20Blocks/near/269922629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/Merging.20Impl.20Blocks.html#269922629">(Jan 30 2022 at 09:35)</a>:</h4>
<p>That would be very problematic on <a href="http://docs.rs">docs.rs</a> like <span class="user-mention" data-user-id="315412">@jsha</span> said (and I agree)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
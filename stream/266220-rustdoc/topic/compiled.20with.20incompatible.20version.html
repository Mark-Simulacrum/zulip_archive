<html>
<head><meta charset="utf-8"><title>compiled with incompatible version · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/compiled.20with.20incompatible.20version.html">compiled with incompatible version</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="267780239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/compiled%20with%20incompatible%20version/near/267780239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/compiled.20with.20incompatible.20version.html#267780239">(Jan 12 2022 at 20:18)</a>:</h4>
<p>lately when I switch branches and build docs I often get an error like this one:</p>
<div class="codehilite"><pre><span></span><code>$ RUST_BACKTRACE=1 ./x.py doc library/std                                                                                                                                                     Updating only changed submodules
Updating submodule src/tools/miri
Submodule path &#39;src/tools/miri&#39;: checked out &#39;deb9bfd24648d50142ab29b810175837c4718885&#39;
  Submodules updated in 0.08 seconds
extracting /home/jsha/rust/rust/build/cache/e4b1d5841494d6eb7f4944c91a057e16b0f0a9ea/rust-std-nightly-x86_64-unknown-linux-gnu.tar.xz
extracting /home/jsha/rust/rust/build/cache/e4b1d5841494d6eb7f4944c91a057e16b0f0a9ea/rustc-nightly-x86_64-unknown-linux-gnu.tar.xz
extracting /home/jsha/rust/rust/build/cache/e4b1d5841494d6eb7f4944c91a057e16b0f0a9ea/rustc-dev-nightly-x86_64-unknown-linux-gnu.tar.xz
Building rustbuild
    Finished dev [unoptimized] target(s) in 0.09s
Documenting stage2 std (x86_64-unknown-linux-gnu)
Building rustdoc for stage2 (x86_64-unknown-linux-gnu)
   Compiling rustdoc v0.0.0 (/home/jsha/rust/rust/src/librustdoc)
error[E0514]: found crate `tracing` compiled by an incompatible version of rustc
  --&gt; src/librustdoc/lib.rs:23:1
   |
23 | extern crate tracing;
   | ^^^^^^^^^^^^^^^^^^^^^
   |
   = help: please recompile that crate using this compiler (rustc 1.60.0-nightly (e4b1d5841 2022-01-11)) (consider running `cargo clean` first)
   = note: the following crate versions were found:
           crate `tracing` compiled by rustc 1.60.0-nightly (f7bb8e367 2022-01-09): /home/jsha/rust/rust/build/x86_64-unknown-linux-gnu/stage1-tools/x86_64-unknown-linux-gnu/release/deps/libtracing-dc3dfe641f9dba3a.rmeta

error[E0514]: found crate `itertools` compiled by an incompatible version of rustc
 --&gt; src/librustdoc/html/render/write_shared.rs:9:5
  |
9 | use itertools::Itertools;
...
</code></pre></div>
<p>(many, many more errors follow)</p>
<p><code>x.py clean</code> fixes it. I have the <code>tools</code> config profile set up.</p>
<p>Any idea what's up? Have others run into this?</p>



<a name="267780615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/compiled%20with%20incompatible%20version/near/267780615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/compiled.20with.20incompatible.20version.html#267780615">(Jan 12 2022 at 20:21)</a>:</h4>
<p>Yeah I get that sometimes. FYI, a tip that I learned from Joshua is to use <code>rm -r build/&lt;your-arch&gt;/stage*</code>; it avoids redownloading stuff, rebuilding internal tooling, etc.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
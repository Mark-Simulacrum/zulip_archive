<html>
<head><meta charset="utf-8"><title>render_item is now the slowest thing in rustdoc · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html">render_item is now the slowest thing in rustdoc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250245536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/render_item%20is%20now%20the%20slowest%20thing%20in%20rustdoc/near/250245536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html#250245536">(Aug 22 2021 at 00:37)</a>:</h4>
<p>This is new!</p>
<div class="codehilite"><pre><span></span><code>&gt; summarize summarize stm32f3-110131.mm_profdata
+-------------------------------------------------+-----------+-----------------+----------+------------+
| Item                                            | Self time | % of total time | Time     | Item count |
+-------------------------------------------------+-----------+-----------------+----------+------------+
| render_item                                     | 8.56s     | 25.022          | 8.60s    | 18799      |
+-------------------------------------------------+-----------+-----------------+----------+------------+
| get_blanket_impls                               | 3.16s     | 9.225           | 4.79s    | 14179      |
+-------------------------------------------------+-----------+-----------------+----------+------------+
| get_auto_trait_impls                            | 3.07s     | 8.985           | 3.32s    | 14179      |
+-------------------------------------------------+-----------+-----------------+----------+------------+
| expand_crate                                    | 2.07s     | 6.060           | 2.16s    | 1          |
+-------------------------------------------------+-----------+-----------------+----------+------------+
| create_renderer                                 | 1.93s     | 5.637           | 1.93s    | 1          |
+-------------------------------------------------+-----------+-----------------+----------+------------+
| evaluate_obligation                             | 1.89s     | 5.532           | 1.90s    | 352623     |
+-------------------------------------------------+-----------+-----------------+----------+------------+
| build_local_trait_impl                          | 1.01s     | 2.941           | 1.01s    | 155236     |
+-------------------------------------------------+-----------+-----------------+----------+------------+
</code></pre></div>



<a name="250245544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/render_item%20is%20now%20the%20slowest%20thing%20in%20rustdoc/near/250245544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html#250245544">(Aug 22 2021 at 00:37)</a>:</h4>
<p>this is actually really good, render_item has the most room for improvement</p>



<a name="250245551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/render_item%20is%20now%20the%20slowest%20thing%20in%20rustdoc/near/250245551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html#250245551">(Aug 22 2021 at 00:38)</a>:</h4>
<p>the others are hard to change</p>



<a name="250246850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/render_item%20is%20now%20the%20slowest%20thing%20in%20rustdoc/near/250246850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html#250246850">(Aug 22 2021 at 01:06)</a>:</h4>
<p>memory usage looks about equally split between <code>run_format</code> and <code>run_global_context</code><br>
<a href="/user_uploads/4715/ASoG99rUQJYGod7dT8iOEtwk/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/ASoG99rUQJYGod7dT8iOEtwk/image.png" title="image.png"><img src="/user_uploads/4715/ASoG99rUQJYGod7dT8iOEtwk/image.png"></a></div>



<a name="250246877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/render_item%20is%20now%20the%20slowest%20thing%20in%20rustdoc/near/250246877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html#250246877">(Aug 22 2021 at 01:07)</a>:</h4>
<p>I guess render <em>is</em> the slowest part of rustdoc after all ;)</p>



<a name="250247455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/render_item%20is%20now%20the%20slowest%20thing%20in%20rustdoc/near/250247455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html#250247455">(Aug 22 2021 at 01:22)</a>:</h4>
<p>Do you have any measurements from compiling <code>std</code> or another crate? I know <code>stmf32</code> is more of a stress test than an average, so I'm curious what the measurements are for more average crates.</p>



<a name="250247462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/render_item%20is%20now%20the%20slowest%20thing%20in%20rustdoc/near/250247462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/render_item.20is.20now.20the.20slowest.20thing.20in.20rustdoc.html#250247462">(Aug 22 2021 at 01:23)</a>:</h4>
<p>not on hand, but you could measure them with -Zself-profile pretty easily</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
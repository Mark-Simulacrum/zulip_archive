<html>
<head><meta charset="utf-8"><title>red in code examples · rustdoc · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/index.html">rustdoc</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html">red in code examples</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="263667593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263667593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263667593">(Dec 03 2021 at 23:38)</a>:</h4>
<p>While I've got people's attention on color, I did want to bring up one small aspect of code examples:</p>
<p><a href="https://rustdoc.crud.net/jsha/fewer-colors/std/iter/trait.Iterator.html#method.intersperse">https://rustdoc.crud.net/jsha/fewer-colors/std/iter/trait.Iterator.html#method.intersperse</a></p>
<p>We currently use red to mark attributes, bool values, and values from the prelude (e.g. Some, None). There are three issues with this:</p>
<ul>
<li>attributes and values don't have anything in common, so it's confusing to color them the same</li>
<li>red is a very attention-grabbing color and usually means "danger" (and we use it that way on no_compile examples)</li>
<li>it's not clear that values from the prelude should get such distinct treatment relative to other values (which are unmarked)</li>
</ul>



<a name="263667776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263667776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263667776">(Dec 03 2021 at 23:41)</a>:</h4>
<p>I just noticed that in the above link, the associated type <code>Item</code> is not the purple color of structs/enums. Weren't we going to make them all the same? (Also, can you add a GUI test that things like <code>extern type</code>s get the same color?)</p>



<a name="263668013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263668013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263668013">(Dec 03 2021 at 23:44)</a>:</h4>
<p>ah yeah I should comment on associated types in the PR / zulip thread</p>



<a name="263696326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263696326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263696326">(Dec 04 2021 at 09:53)</a>:</h4>
<p>I think it's pretty standard for syntax highlighters to specially highlight prelude things</p>



<a name="263696329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263696329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263696329">(Dec 04 2021 at 09:53)</a>:</h4>
<p>the choice of color, though, yeah i'm not sure</p>



<a name="263721066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263721066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263721066">(Dec 04 2021 at 17:32)</a>:</h4>
<p>Note that it's not prelude things in general that are highlighted with red, just "prelude values", which AFAICT is Some, None, Ok, Err (not technically values, but the CSS class is prelude-val.</p>
<p>I'm running vscode with rust-analyzer, and it colors those items the same as any other ident - unmarked.</p>



<a name="263723487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263723487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263723487">(Dec 04 2021 at 18:16)</a>:</h4>
<p>Hmm? All of those are values (well, both values and patterns, rustc calls them <code>Ctor</code>s)</p>



<a name="263724903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263724903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263724903">(Dec 04 2021 at 18:46)</a>:</h4>
<p>fair enough, sounds like I have my terminology wrong. I would have called them enum variants. Question: How can <code>Some</code> be a value if it's not complete (it needs an inner value)?</p>



<a name="263726339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263726339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263726339">(Dec 04 2021 at 19:11)</a>:</h4>
<p>It's a function, you can pass it to another function expecting a <code>fn(T) -&gt; Option&lt;T&gt;</code> parameter</p>



<a name="263727032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263727032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263727032">(Dec 04 2021 at 19:25)</a>:</h4>
<p>oh, now I get it! so all functions are values. but methods aren't values, which is why there are no methods marked with <code>prelude-val</code>.</p>
<p>it looks like the only other function in the prelude is <code>drop</code>, which isn't currently getting the <code>prelude-val</code> treatment: <a href="https://doc.rust-lang.org/stable/std/mem/fn.drop.html">https://doc.rust-lang.org/stable/std/mem/fn.drop.html</a>.</p>



<a name="263727257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263727257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263727257">(Dec 04 2021 at 19:30)</a>:</h4>
<p>Hmm, methods are values too - it seems weird to treat them inconsistently</p>



<a name="263727337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263727337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263727337">(Dec 04 2021 at 19:32)</a>:</h4>
<p>(e.g. <code>Option::unwrap(Some(0))</code> is legal)</p>



<a name="263727449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263727449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263727449">(Dec 04 2021 at 19:34)</a>:</h4>
<p>in general, I think "prelude / non-prelude" is not the right distinction to mark, anyhow. Instead something like "current crate / other crate" or "item being documented / other items" would probably be a more useful distinction. Or not marking out any idents as special, which is what rust-analyzer seems to do and what I think is common syntax highlighting practice.</p>



<a name="263739788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263739788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263739788">(Dec 05 2021 at 00:19)</a>:</h4>
<p>Methods are values but with the dot syntax they're not being invoked as values</p>



<a name="263739790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263739790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263739790">(Dec 05 2021 at 00:19)</a>:</h4>
<p>The important distinction being with the dot syntax they don't have to be in scope</p>



<a name="263739794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263739794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263739794">(Dec 05 2021 at 00:19)</a>:</h4>
<p>I think "this is a name from the local value scope" (including preludes) is a fine distinction to hold</p>



<a name="263739842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263739842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263739842">(Dec 05 2021 at 00:20)</a>:</h4>
<p>But overall I'd look at what editors do before changing stuff: I think this distinction is commonly maintained elsewhere</p>



<a name="263741858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263741858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263741858">(Dec 05 2021 at 01:16)</a>:</h4>
<blockquote>
<p>I'm running vscode with rust-analyzer, and it colors those items the same as any other ident - unmarked.</p>
</blockquote>
<p>What do you mean by "unmarked"? I'm also running VS Code with Rust Analyzer, but I have semantic highlighting enabled (which is the default AFAICT, since I didn't manually enable it), so e.g. methods are colored red and types are colored purple.</p>



<a name="263743583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263743583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263743583">(Dec 05 2021 at 01:59)</a>:</h4>
<p>oh, interesting! I am using the "Solarized Light" theme, which I guess flattens some of those distinctions. But switching over to "Visual Studio Light" I see now what you're talking about.</p>
<p>Solarized Light:</p>
<p><a href="/user_uploads/4715/FiCKffW86FDm5WV967_VOf2R/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/FiCKffW86FDm5WV967_VOf2R/image.png" title="image.png"><img src="/user_uploads/4715/FiCKffW86FDm5WV967_VOf2R/image.png"></a></div><p>Visual Studio Light:</p>
<p><a href="/user_uploads/4715/9VqS5Fgnw7C8-G_QNhPCnb6p/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/9VqS5Fgnw7C8-G_QNhPCnb6p/image.png" title="image.png"><img src="/user_uploads/4715/9VqS5Fgnw7C8-G_QNhPCnb6p/image.png"></a></div>



<a name="263746936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/266220-rustdoc/topic/red%20in%20code%20examples/near/263746936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jsha <a href="https://zulip-archive.rust-lang.org/stream/266220-rustdoc/topic/red.20in.20code.20examples.html#263746936">(Dec 05 2021 at 03:35)</a>:</h4>
<blockquote>
<p>I think "this is a name from the local value scope" (including preludes) is a fine distinction to hold</p>
</blockquote>
<p>Is this equivalent to any unqualified ident? So for instance:</p>
<div class="codehilite"><pre><span></span><code>let mut x = 10;
x = x + 10;
</code></pre></div>
<p>In this case <code>x</code> would get the same distinction as <code>Some</code>, <code>None</code>, and <code>drop</code>? And also <code>String</code> in <code>let x = String::from_utf8(vec![240, 159, 146, 150])</code>?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
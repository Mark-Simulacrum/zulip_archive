<html>
<head><meta charset="utf-8"><title>Help with Rustup · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html">Help with Rustup</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250764570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250764570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250764570">(Aug 26 2021 at 12:38)</a>:</h4>
<p>I'd need some help with the rustup this week: <a href="https://github.com/rust-lang/rust-clippy/issues/7604">rust-clippy#7604</a>. </p>
<p>Going over the PR and reviewing the changes would already be a really helpful first step. </p>
<p>I also still have a test failure for <code>manual_map</code>.  I assume it's a failed attempt at merging <a href="https://github.com/rust-lang/rust/issues/7531">#7531</a> into the rustup... <span class="user-mention" data-user-id="360405">@Cameron Steffen</span> you reviewed this PR, so maybe you can help out here.</p>
<p><span class="user-mention" data-user-id="360405">@Cameron Steffen</span> I'm also not 100% sure if I got your collapsible_match fix right. You used the <code>LocalUsedVisitor</code> in the fix in the Rust repo, but that doesn't exist anymore...</p>



<a name="250766630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250766630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250766630">(Aug 26 2021 at 12:55)</a>:</h4>
<p>collapsible_match looks good...</p>



<a name="250766706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250766706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250766706">(Aug 26 2021 at 12:55)</a>:</h4>
<p>(shared instance of the visitor was not important)</p>



<a name="250771400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250771400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250771400">(Aug 26 2021 at 13:27)</a>:</h4>
<p>hmm for manual_map it might be better to start over from the clippy repo version</p>



<a name="250771457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250771457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250771457">(Aug 26 2021 at 13:28)</a>:</h4>
<p>too much refactoring in the let-expression PR</p>



<a name="250771595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250771595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250771595">(Aug 26 2021 at 13:29)</a>:</h4>
<p>I can try fixing it</p>



<a name="250772507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250772507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250772507">(Aug 26 2021 at 13:34)</a>:</h4>
<p>is the toolchain version wrong? ExprKind::Let patterns aren't compiling</p>



<a name="250776745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250776745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250776745">(Aug 26 2021 at 14:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360405">Cameron Steffen</span> <a href="#narrow/stream/257328-clippy/topic/Help.20with.20Rustup/near/250772507">said</a>:</p>
<blockquote>
<p>is the toolchain version wrong? ExprKind::Let patterns aren't compiling</p>
</blockquote>
<p>Ooops, forgot to push the rust-toolchain file update. I just pushed it (2021-08-21 is the toolchain you'll need)</p>



<a name="250783864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250783864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250783864">(Aug 26 2021 at 14:46)</a>:</h4>
<p>you mean 08-26? :)</p>



<a name="250785843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250785843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250785843">(Aug 26 2021 at 14:57)</a>:</h4>
<p>found the issue. capture_local_usage needs to be updated with ExprKind::Let</p>



<a name="250786053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250786053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250786053">(Aug 26 2021 at 14:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360405">Cameron Steffen</span> <a href="#narrow/stream/257328-clippy/topic/Help.20with.20Rustup/near/250783864">said</a>:</p>
<blockquote>
<p>you mean 08-26? :)</p>
</blockquote>
<p>Yes :D </p>
<p>If you have a fix, just push it to my PR.</p>



<a name="250787757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250787757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250787757">(Aug 26 2021 at 15:09)</a>:</h4>
<p>pushed a commit</p>



<a name="250787841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250787841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250787841">(Aug 26 2021 at 15:09)</a>:</h4>
<p>brought manual_match closer to what it was prevously, and reused <code>IfLetOrMatch</code></p>



<a name="250789894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250789894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250789894">(Aug 26 2021 at 15:23)</a>:</h4>
<p>Great, thanks! Now there are only some dogfood errors. I can fix them myself <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="250790504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250790504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250790504">(Aug 26 2021 at 15:27)</a>:</h4>
<p>I might have that...</p>



<a name="250790568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250790568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250790568">(Aug 26 2021 at 15:27)</a>:</h4>
<p>pushed :)</p>



<a name="250790594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250790594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250790594">(Aug 26 2021 at 15:27)</a>:</h4>
<p>still a changelog error though</p>



<a name="250792363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250792363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250792363">(Aug 26 2021 at 15:39)</a>:</h4>
<p>I'll let you finish it :)</p>



<a name="250794412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250794412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250794412">(Aug 26 2021 at 15:52)</a>:</h4>
<p>Ah thanks! Now the "missing docs in private items" of the "higher" module is left to fix. I don't think we should just disable this lint...</p>



<a name="250823944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250823944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250823944">(Aug 26 2021 at 19:11)</a>:</h4>
<p>So I figured out why the new higher functions are named hir and sometimes ast. The idea was - ast means "original code contains <code>if let</code>" and hir means "the HIR has <code>if let</code>, but could be from expansion". But I think this is wrong - higher should be for parsing pre-expansion things. So I propose renaming these functions to parse, like I already did with IfLetOrMatch::parse.</p>



<a name="250824214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Help%20with%20Rustup/near/250824214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Help.20with.20Rustup.html#250824214">(Aug 26 2021 at 19:13)</a>:</h4>
<p>I also removed <code>IfLet::ast</code> in <a href="https://github.com/rust-lang/rust/issues/88163">#88163</a> cause it caused false positives</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
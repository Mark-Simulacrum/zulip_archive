<html>
<head><meta charset="utf-8"><title>rewind over seek from start - new lint · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html">rewind over seek from start - new lint</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277484505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277484505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel RB <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277484505">(Apr 01 2022 at 22:11)</a>:</h4>
<p>Hello! I'm pretty new to Rust and this is is my first time trying to contribute to clippy. I'm trying to understand what I have to do for <a href="https://github.com/rust-lang/rust-clippy/issues/8600">this new lint</a> and I have a few questions. </p>
<p>I figured out I'll break down this lint into three problems:</p>
<ol>
<li>Check that the type implements the <code>std::io::Seek</code> trait.</li>
<li>Check that the function being called is <code>seek()</code>.</li>
<li>Check if the argument of <code>seek</code> is <code>std::io::SeekFrom::Start(0)</code>.</li>
</ol>
<p>Now to my questions, I'm still trying to figure out how everything works so sorry if these are dumb questions:</p>
<ol>
<li>Does my approach make sense? I'm still not sure on how I'll do each step but just knowing I'm in the right track will help me know what to look for.</li>
<li>Does this need to be a <code>LateLintPass</code> lint? I imagine it has to be since we need to some information on types.</li>
<li>I couldn't find any other similar lint but does anybody know of a similar lint I could look at for inspiration?</li>
</ol>
<p>I will probably have more questions in a near future but  I'm excited to learn more Rust so thanks for any help!</p>



<a name="277485309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485309">(Apr 01 2022 at 22:21)</a>:</h4>
<p>You will want to combine steps 1 and 2 and make sure the function is Seek::seek as implemented for that type. Otherwise you will accidentally lint when a type has both an inherent <code>seek</code> method and implements Seek.</p>



<a name="277485344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485344">(Apr 01 2022 at 22:21)</a>:</h4>
<p>The lint on atomic functions is sort of related, let me find a link</p>



<a name="277485476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel RB <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485476">(Apr 01 2022 at 22:23)</a>:</h4>
<p>Cool thanks, that makes sense</p>



<a name="277485552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485552">(Apr 01 2022 at 22:23)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/84039/files#diff-7b162caf96f4886d206bcbace379df34e22230599c8920968b8dd50dc0d3ee4cR1434">https://github.com/rust-lang/rust/pull/84039/files#diff-7b162caf96f4886d206bcbace379df34e22230599c8920968b8dd50dc0d3ee4cR1434</a></p>



<a name="277485697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485697">(Apr 01 2022 at 22:25)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="490599">@Daniel RB</span>, welcome to Clippy.</p>
<p>You can also take a look at <a href="https://github.com/rust-lang/rust-clippy/tree/master/clippy_lints/src/methods"><code>clippy_lints::methods</code></a> module to first match with the function name and then start the type and argument checking. That lint pass uses a <code>LateLintPass</code> since we need type information, that was a correct assumption <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="277485803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel RB <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485803">(Apr 01 2022 at 22:26)</a>:</h4>
<p>Thanks guys! This is all very helpful</p>



<a name="277485814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Macleod <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485814">(Apr 01 2022 at 22:26)</a>:</h4>
<p><code>useless_asref</code> would be a pretty similar one to look at</p>



<a name="277485822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/rewind%20over%20seek%20from%20start%20-%20new%20lint/near/277485822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/rewind.20over.20seek.20from.20start.20-.20new.20lint.html#277485822">(Apr 01 2022 at 22:26)</a>:</h4>
<p><a href="https://rust-lang.github.io/rust-clippy/master/index.html#manual_split_once"><code>manual_split_once</code></a> might be a similar lint, as it checks for a function with a specific argument. Or <a href="https://rust-lang.github.io/rust-clippy/master/index.html#repeat_once"><code>repeat_once</code></a>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
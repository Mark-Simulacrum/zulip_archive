<html>
<head><meta charset="utf-8"><title>Meeting 2022-02-22 · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html">Meeting 2022-02-22</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272821286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272821286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272821286">(Feb 22 2022 at 15:46)</a>:</h4>
<p>Meeting <time datetime="2022-02-22T16:00:00Z">2022-02-22T17:00:00+01:00</time> </p>
<p>Agenda:</p>
<ul>
<li>Add lint for holding a tracing Span Guard Across an .await <a href="https://github.com/rust-lang/rust-clippy/issues/8434">clippy#8434</a> </li>
<li>tests: default to more threads for ui-tests <a href="https://github.com/rust-lang/rust-clippy/issues/8451">clippy#8451</a> </li>
<li>Release</li>
<li>...?</li>
</ul>



<a name="272821363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272821363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272821363">(Feb 22 2022 at 15:47)</a>:</h4>
<p>T-13min</p>



<a name="272823876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272823876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272823876">(Feb 22 2022 at 16:02)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="272824490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272824490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272824490">(Feb 22 2022 at 16:05)</a>:</h4>
<p>Hi all, sorry forgot about the time again</p>



<a name="272824593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272824593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272824593">(Feb 22 2022 at 16:06)</a>:</h4>
<p>So first, I want to talk about the PR <a href="https://github.com/rust-lang/rust-clippy/issues/8434">clippy#8434</a> adding a lint for an external crate</p>



<a name="272824667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272824667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272824667">(Feb 22 2022 at 16:06)</a>:</h4>
<p>it is now closed. But I think we should establish a policy here.</p>



<a name="272824804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272824804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272824804">(Feb 22 2022 at 16:07)</a>:</h4>
<p>I suggest something along the lines of "must be correctness issue and the crate must be popular enough".</p>



<a name="272824982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272824982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272824982">(Feb 22 2022 at 16:08)</a>:</h4>
<p>I'm open to ideas here. But we can also discuss outside of the meeting.</p>



<a name="272824986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272824986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272824986">(Feb 22 2022 at 16:08)</a>:</h4>
<p>don't / didn't we already have some kind of crate suggestion lint? something about bits..?</p>



<a name="272824991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272824991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272824991">(Feb 22 2022 at 16:08)</a>:</h4>
<p>Wouldn't a good solution here be to make the lint configurable, e.g. lint for certain given paths held across <code>.await</code>?</p>



<a name="272825009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825009">(Feb 22 2022 at 16:08)</a>:</h4>
<p>I don't remember</p>



<a name="272825078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825078">(Feb 22 2022 at 16:09)</a>:</h4>
<p>We have a bytecount lint that was made allow-by-default after people complained. We also have two regex lints AFAIR.</p>



<a name="272825146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825146">(Feb 22 2022 at 16:09)</a>:</h4>
<p>ah yes, bytecount</p>



<a name="272825241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825241">(Feb 22 2022 at 16:10)</a>:</h4>
<p>regex, serde (really old lints), tokio an parking_lot are the external crates with lints in Clippy</p>



<a name="272825274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825274">(Feb 22 2022 at 16:10)</a>:</h4>
<p>I think lints about crates that are under the rust-lang umbrella are not very questionable :)</p>



<a name="272825316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825316">(Feb 22 2022 at 16:10)</a>:</h4>
<p>I think for <code>bytecount</code> we only suggest to use that crate instead?</p>



<a name="272825347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825347">(Feb 22 2022 at 16:10)</a>:</h4>
<p>Re makeing the lint configurable, this way it wouldn't be crate-specific, but crate maintainers could opt to have their config parts documented.</p>



<a name="272825439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825439">(Feb 22 2022 at 16:11)</a>:</h4>
<p>we might also consider having some guide for cases like "I want my crate to be more popular, so lets just make a clippy lint that suggests its use"..?</p>



<a name="272825544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825544">(Feb 22 2022 at 16:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="217864">matthiaskrgr</span> <a href="#narrow/stream/257328-clippy/topic/Meeting.202022-02-22/near/272825274">said</a>:</p>
<blockquote>
<p>I think lints about crates that are under the rust-lang umbrella are not very questionable :)</p>
</blockquote>
<p>The problem is that if any path should change of an item that we want to lint, the lint will stop working. This is true for crates inside and outside the rust-lang org</p>



<a name="272825655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825655">(Feb 22 2022 at 16:13)</a>:</h4>
<p>(That's not an option for the bytecount lint – I wrote that one when I was very enthusiastic about bytecount's performance benefits)</p>



<a name="272825664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825664">(Feb 22 2022 at 16:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="217864">matthiaskrgr</span> <a href="#narrow/stream/257328-clippy/topic/Meeting.202022-02-22/near/272825439">said</a>:</p>
<blockquote>
<p>we might also consider having some guide for cases like "I want my crate to be more popular, so lets just make a clippy lint that suggests its use"..?</p>
</blockquote>
<p>We shouldn't suggest specific crates as a general rule. It should be a really rare exception if we do so IMO</p>



<a name="272825777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825777">(Feb 22 2022 at 16:13)</a>:</h4>
<p>But making such a lint configurable might be a good idea.</p>



<a name="272825808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825808">(Feb 22 2022 at 16:14)</a>:</h4>
<p>@flip1995 making the lints configurable would mean maintainers could document when paths change thus keeping the lint current.</p>



<a name="272825881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825881">(Feb 22 2022 at 16:14)</a>:</h4>
<p>Yeah, with that approach we would avoid that we have to maintain those paths</p>



<a name="272825892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825892" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825892">(Feb 22 2022 at 16:14)</a>:</h4>
<p>I will suggest that in the PR.</p>



<a name="272825908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272825908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272825908">(Feb 22 2022 at 16:14)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="272826077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826077">(Feb 22 2022 at 16:15)</a>:</h4>
<p>Ok next thing would be the the ui-tests PR</p>



<a name="272826164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826164">(Feb 22 2022 at 16:16)</a>:</h4>
<p>but all the people that attend todays meeting already commented on it</p>



<a name="272826188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826188">(Feb 22 2022 at 16:16)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust-clippy/pull/8451">https://github.com/rust-lang/rust-clippy/pull/8451</a></p>



<a name="272826281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826281">(Feb 22 2022 at 16:17)</a>:</h4>
<p>So if you couldn't attend today's meeting and are reading this, please have a look at <a href="https://github.com/rust-lang/rust-clippy/issues/8451">clippy#8451</a> and leave your opinion :)</p>



<a name="272826313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826313">(Feb 22 2022 at 16:17)</a>:</h4>
<p>About that one I'm still undecided. It seems that it takes more CPU time when accumulating over all cores. I wonder whether that's an artifact of the measurement or if there are some contended resources at play.</p>



<a name="272826416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826416">(Feb 22 2022 at 16:18)</a>:</h4>
<p>Or is it that the test runner should really use threads instead of cores by default?</p>



<a name="272826621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826621">(Feb 22 2022 at 16:19)</a>:</h4>
<p>I think the test runner currently uses cores. Because if I run it on our server at work where cores=threads I almost get no speedup.</p>



<a name="272826662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826662">(Feb 22 2022 at 16:19)</a>:</h4>
<p>even it if manages to somehow "steal" more cputime from a system, I would not be worried about it for now because the tests run for only  &lt; 1 min</p>



<a name="272826756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826756">(Feb 22 2022 at 16:19)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust-clippy/runs/5264660706?check_suite_focus=true#step:7:815">https://github.com/rust-lang/rust-clippy/runs/5264660706?check_suite_focus=true#step:7:815</a></p>



<a name="272826903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826903">(Feb 22 2022 at 16:20)</a>:</h4>
<p>of course more tests will be added over time</p>



<a name="272826946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826946">(Feb 22 2022 at 16:20)</a>:</h4>
<p>So if someone changed the test runner to use threads, the PR would be moot?</p>



<a name="272826984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272826984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272826984">(Feb 22 2022 at 16:21)</a>:</h4>
<p>Yes</p>



<a name="272827219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827219">(Feb 22 2022 at 16:22)</a>:</h4>
<p>I could probably even check a couple of env vars and explicitly disable the n=thread_count IF we know we are on ci, but I wouldn't be completely comfy with that tbh</p>



<a name="272827357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827357">(Feb 22 2022 at 16:22)</a>:</h4>
<p>I don't think we have to be concerned about the CI. GHA will only give us a limited amount of threads</p>



<a name="272827382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827382">(Feb 22 2022 at 16:22)</a>:</h4>
<p>Is there any particular reason for choosing cores over threads?</p>



<a name="272827436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827436">(Feb 22 2022 at 16:23)</a>:</h4>
<p>The only thing I can think of is to not block other tasks on the machine?</p>



<a name="272827497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827497">(Feb 22 2022 at 16:23)</a>:</h4>
<p>That's the OS's task, not ours.</p>



<a name="272827500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827500">(Feb 22 2022 at 16:23)</a>:</h4>
<p>if you are extremely io-bound, cores might be faster than threads?</p>



<a name="272827641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827641">(Feb 22 2022 at 16:24)</a>:</h4>
<p>Maybe looking into the compiletest-rs code there is a commit giving a reason why compile-test uses cores instead of threads?</p>



<a name="272827818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827818">(Feb 22 2022 at 16:25)</a>:</h4>
<p>Maybe other people know more about this and give insights here.</p>



<a name="272827937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272827937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272827937">(Feb 22 2022 at 16:26)</a>:</h4>
<p>I don't see anything about either cores, cpus or threads.</p>



<a name="272828081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828081">(Feb 22 2022 at 16:27)</a>:</h4>
<p>Ok, then let's hope someone else knows about it. :D</p>



<a name="272828099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828099">(Feb 22 2022 at 16:27)</a>:</h4>
<p>The compiletest runner seems to be sequential.</p>



<a name="272828109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828109">(Feb 22 2022 at 16:27)</a>:</h4>
<p><a href="https://github.com/Manishearth/compiletest-rs/blob/4ab843a1dc6ed9a82657d86d22397c6c5bb95b01/src/header.rs#L411">https://github.com/Manishearth/compiletest-rs/blob/4ab843a1dc6ed9a82657d86d22397c6c5bb95b01/src/header.rs#L411</a></p>



<a name="272828120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828120">(Feb 22 2022 at 16:27)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="272828224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828224">(Feb 22 2022 at 16:27)</a>:</h4>
<p>Ah, I forgot to search for uppercase.</p>



<a name="272828421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828421">(Feb 22 2022 at 16:29)</a>:</h4>
<p>I guess that makes sense, as having too many compilers running in parallel might be too resource-consuming.</p>



<a name="272828626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828626">(Feb 22 2022 at 16:30)</a>:</h4>
<p>So is the number of concurrent tests just handled by <code>libtest</code> and compile-test just hands it down to that?</p>



<a name="272828894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828894">(Feb 22 2022 at 16:32)</a>:</h4>
<p>Does clippy even parallelize?</p>



<a name="272828990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272828990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272828990">(Feb 22 2022 at 16:32)</a>:</h4>
<p>No, but I think compiletest just runs multiple instances of <code>clippy-driver</code></p>



<a name="272829413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829413">(Feb 22 2022 at 16:35)</a>:</h4>
<p>Last point is "Release". And with that just the question if you have anything on your radar that we need to address/backport/...?</p>
<p>Otherwise we can <span class="user-mention" data-user-id="261224">@triagebot</span> end-meeting</p>



<a name="272829415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829415">(Feb 22 2022 at 16:35)</a>:</h4>
<p>Does anyone have something to bring up?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if you're ready to end the meeting.</p>



<a name="272829661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829661">(Feb 22 2022 at 16:37)</a>:</h4>
<p>So re the test PR I'm going to merge it, then ask around why the number of cores was chosen. If that changes, we can still revert.</p>



<a name="272829695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829695">(Feb 22 2022 at 16:37)</a>:</h4>
<p>SGTM!</p>



<a name="272829749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829749">(Feb 22 2022 at 16:37)</a>:</h4>
<p>Ok then, thanks for attending! Have a nice rest of your week. <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="272829823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829823">(Feb 22 2022 at 16:38)</a>:</h4>
<blockquote>
<p>No, but I think compiletest just runs multiple instances of clippy-driver</p>
</blockquote>
<p>yeah, if you like slowmo: <code>RUST_TEST_THREADS=1 cargo test</code></p>



<a name="272829898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829898">(Feb 22 2022 at 16:38)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="272829943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/272829943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#272829943">(Feb 22 2022 at 16:39)</a>:</h4>
<p>ftr; I was initially trying out clippys tests with <code>cargo nextest</code>to see if it would give some interesting speedup <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="273271221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Meeting%202022-02-22/near/273271221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Meeting.202022-02-22.html#273271221">(Feb 25 2022 at 19:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/257328-clippy/topic/Meeting.202022-02-22/near/272824804">said</a>:</p>
<blockquote>
<p>I suggest something along the lines of "must be correctness issue and the crate must be popular enough".</p>
</blockquote>
<p>I've skimmed over the last meeting. I'm good with having a general policy like this. I think we should add a section for lint policies or general guidelines to the Clippy book to have one single point of truth for the future <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
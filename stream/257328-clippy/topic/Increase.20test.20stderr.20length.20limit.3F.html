<html>
<head><meta charset="utf-8"><title>Increase test stderr length limit? · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html">Increase test stderr length limit?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250368553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250368553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250368553">(Aug 23 2021 at 15:33)</a>:</h4>
<p>We limit test stderr test files to 200 lines. This seems overly restrictive, especially for lints that print multiple lines of code/suggestions. Bumped into the limit here <a href="https://github.com/rust-lang/rust-clippy/pull/7584">https://github.com/rust-lang/rust-clippy/pull/7584</a>. Can we maybe increase the limit to 300 lines?</p>



<a name="250368895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250368895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250368895">(Aug 23 2021 at 15:36)</a>:</h4>
<p>why have a limit at all?</p>



<a name="250369498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250369498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250369498">(Aug 23 2021 at 15:40)</a>:</h4>
<p>"Smaller files are easier to manage." But I wouldn't be sad if the limit were removed.</p>



<a name="250369541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250369541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250369541">(Aug 23 2021 at 15:41)</a>:</h4>
<p>^not an actual quote</p>



<a name="250369558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250369558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250369558">(Aug 23 2021 at 15:41)</a>:</h4>
<p>yeah it seems weird to do that for autogenerated files, I can understand it for source files</p>



<a name="250369940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250369940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250369940">(Aug 23 2021 at 15:44)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3456">@T-clippy</span></p>



<a name="250370349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250370349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250370349">(Aug 23 2021 at 15:47)</a>:</h4>
<p>I think the limit made sense when we tested multiple lints in the same test file. The thought behind that rule was to encourage splitting those test files up, so it's easier to find test cases.</p>
<p>Since we now mostly test one lint in one file/dir, I'd be fine to remove this rule.</p>



<a name="250371936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250371936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250371936">(Aug 23 2021 at 15:59)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust-clippy/pull/7593">https://github.com/rust-lang/rust-clippy/pull/7593</a></p>



<a name="250372998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250372998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ThibsG <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250372998">(Aug 23 2021 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="369415">@xFrednet</span> ah maybe I will undo splitting tests in <a href="https://github.com/rust-lang/rust-clippy/pull/7463">https://github.com/rust-lang/rust-clippy/pull/7463</a> <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="250373451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250373451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250373451">(Aug 23 2021 at 16:10)</a>:</h4>
<p>FWIW I think it's still good to split lint tests if they are really long and if you can find a way to logically separate them</p>



<a name="250373778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250373778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250373778">(Aug 23 2021 at 16:12)</a>:</h4>
<p>yeah i'm fine with removing it</p>



<a name="250374552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250374552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250374552">(Aug 23 2021 at 16:19)</a>:</h4>
<p>Same it sounds reasonable <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="250444830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Increase%20test%20stderr%20length%20limit%3F/near/250444830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Phil H <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F.html#250444830">(Aug 24 2021 at 05:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264664">flip1995</span> <a href="#narrow/stream/257328-clippy/topic/Increase.20test.20stderr.20length.20limit.3F/near/250370349">said</a>:</p>
<blockquote>
<p>I think the limit made sense when we tested multiple lints in the same test file. The thought behind that rule was to encourage splitting those test files up, so it's easier to find test cases for lints.</p>
</blockquote>
<p>Yeah, I think that was the main reason behind it. Multiple lints in the stderr output made changes much harder to work with. Fine with removing the limit as well now.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
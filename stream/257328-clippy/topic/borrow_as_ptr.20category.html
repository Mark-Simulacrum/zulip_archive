<html>
<head><meta charset="utf-8"><title>borrow_as_ptr category · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html">borrow_as_ptr category</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="266865305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/266865305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#266865305">(Jan 04 2022 at 21:24)</a>:</h4>
<p>What do folks think about the category for <a href="https://github.com/rust-lang/rust-clippy/pull/8210#pullrequestreview-844017443">https://github.com/rust-lang/rust-clippy/pull/8210#pullrequestreview-844017443</a> ?</p>



<a name="266868629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/266868629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#266868629">(Jan 04 2022 at 21:49)</a>:</h4>
<p>style</p>



<a name="266901669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/266901669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Newcomb <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#266901669">(Jan 05 2022 at 06:10)</a>:</h4>
<p>In general, style. Correctness only in a few cases which should probably be a different lint. The only cases I can think of are unaligned values, uninitialized values, and values for which a mutable reference already exists.</p>



<a name="266960226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/266960226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#266960226">(Jan 05 2022 at 16:57)</a>:</h4>
<p>Oh yeah, definitely not correctness, I'm wondering about style vs pedantic</p>



<a name="266984810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/266984810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Macleod <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#266984810">(Jan 05 2022 at 20:11)</a>:</h4>
<p>Style wise I prefer <code>as</code> (where fine to do so), so my thought would <code>pedantic</code> or maybe even <code>restriction</code></p>



<a name="267211270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/267211270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Guerinoni <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#267211270">(Jan 07 2022 at 16:43)</a>:</h4>
<p>Update PR with style :)</p>



<a name="267223107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/267223107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#267223107">(Jan 07 2022 at 18:19)</a>:</h4>
<p>Thinking about this more, maybe it is too opinionated for style. I didn't consider that the macro is needed for certain cases but not all. My thinking was that <code>as</code> is error prone in general, and so if there's a neat way to avoid <code>as</code> then it's good style...?</p>



<a name="267239528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/267239528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Guerinoni <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#267239528">(Jan 07 2022 at 20:33)</a>:</h4>
<p>How can I improve it?</p>



<a name="267284491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/267284491" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Guerinoni <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#267284491">(Jan 08 2022 at 08:40)</a>:</h4>
<p>Is <code>restriction</code> more accurate?</p>



<a name="267433531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/267433531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#267433531">(Jan 10 2022 at 12:44)</a>:</h4>
<p>I would put this lint into <code>pedantic</code> at least. The problematic cases, that could lead to UB would warrant this lint to be at least warn-by-default (<code>suspicious</code>?). But most of the time this is not really a correctness problem. I would start this lint for the general case in <code>pedantic</code> and then think about if we should split out a second lint that only triggers on packed structs or maybe uninit.</p>



<a name="267495023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/borrow_as_ptr%20category/near/267495023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Guerinoni <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/borrow_as_ptr.20category.html#267495023">(Jan 10 2022 at 20:27)</a>:</h4>
<p>Thanks filip for feedback, I just updated the PR to pedantic category :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Infinite loop in 1.61-beta.1 · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html">Infinite loop in 1.61-beta.1</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278579584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278579584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Émile Grégoire <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278579584">(Apr 11 2022 at 16:27)</a>:</h4>
<p>Hi to all! We have a project that runs clippy stable and beta on every PR and since 1.61-beta.1, it gets stuck in what seems to be an infinite loop. Before opening an issue, I wanted to pinpoint where it gets stuck and have a simpler repro case (because the current project isn't small), but I might need your help for that.</p>
<p>I cloned the rust-clippy repo and build it, but I'm not sure how to run it in debug while it checks my other workspace.</p>



<a name="278579687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278579687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Émile Grégoire <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278579687">(Apr 11 2022 at 16:28)</a>:</h4>
<p>FYI, this is a CI run that exhibits the infinite loop: <a href="https://github.com/stepfunc/dnp3/runs/5975207751?check_suite_focus=true">https://github.com/stepfunc/dnp3/runs/5975207751?check_suite_focus=true</a></p>



<a name="278581249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278581249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278581249">(Apr 11 2022 at 16:38)</a>:</h4>
<p>you probably don't need to build from source to get a simpler repo and find where it's stuck - normally I debug infinite loops by running it under gdb for a couple seconds and then getting a backtrace of wherever it happens to be</p>



<a name="278581702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278581702" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Émile Grégoire <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278581702">(Apr 11 2022 at 16:42)</a>:</h4>
<p>I see. And how do you get it to run in another directory? I'm used to just running <code>cargo clippy</code> in my repo, but the <code>clippy-driver</code> seems to want something else.</p>



<a name="278583132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278583132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278583132">(Apr 11 2022 at 16:51)</a>:</h4>
<p><code>cargo clippy -vv</code> should print the exact command that cargo runs</p>



<a name="278585172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278585172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278585172">(Apr 11 2022 at 17:04)</a>:</h4>
<p>You can try <code>cargo dev lint</code> (In clippy's repo directory)</p>



<a name="278585345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278585345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278585345">(Apr 11 2022 at 17:06)</a>:</h4>
<p>I'm not sure if that works for a project though. Otherwise you can take a look at out docs for <a href="https://github.com/rust-lang/rust-clippy/blob/master/doc/basics.md#install-from-source">Install from source</a></p>



<a name="278595075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278595075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Macleod <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278595075">(Apr 11 2022 at 18:14)</a>:</h4>
<p>It does now, added that recently</p>



<a name="278610940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278610940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Émile Grégoire <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278610940">(Apr 11 2022 at 20:19)</a>:</h4>
<p>Thank you all for your help! I was able to identify the culprint lint. I don't have the required knowledge to figure out what's wrong, but at least I was able to open a more precise issue. See <a href="https://github.com/rust-lang/rust-clippy/issues/8689">https://github.com/rust-lang/rust-clippy/issues/8689</a></p>



<a name="278611205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278611205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278611205">(Apr 11 2022 at 20:21)</a>:</h4>
<p>awesome! <span class="user-mention" data-user-id="325787">@Émile Grégoire</span> if you could post the backtrace you saw in gdb, that would be super helpful as well :)</p>



<a name="278612193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Infinite%20loop%20in%201.61-beta.1/near/278612193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Émile Grégoire <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Infinite.20loop.20in.201.2E61-beta.2E1.html#278612193">(Apr 11 2022 at 20:28)</a>:</h4>
<p>Done, although I'm not sure how useful it will be.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
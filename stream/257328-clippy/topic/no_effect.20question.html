<html>
<head><meta charset="utf-8"><title>no_effect question · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/no_effect.20question.html">no_effect question</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250511415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/no_effect%20question/near/250511415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/no_effect.20question.html#250511415">(Aug 24 2021 at 16:37)</a>:</h4>
<p>Should we extend <code>no_effect</code> to cover <em>any</em> code that doesn't do anything? A few incoming lints are for <code>&amp;*ref_expr</code> and <code>let _ = no_effect_expr;</code> and <code>ref_option.as_deref()</code>.</p>



<a name="250513680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/no_effect%20question/near/250513680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/no_effect.20question.html#250513680">(Aug 24 2021 at 16:52)</a>:</h4>
<p>Could also include <code>ref_in_deref</code>, <code>identity_op</code>, <code>temporary_assignment</code>, <code>unnecessary_cast </code>, <code>unused_unit</code>, <code>useless_asref</code>, maybe more. Seems unnecessary to create a new lint for every pattern of code that is a noop.</p>



<a name="250578468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/no_effect%20question/near/250578468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Wright <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/no_effect.20question.html#250578468">(Aug 25 2021 at 04:15)</a>:</h4>
<p>You lose the ability to allow them individually if you merge them all. It's also easier to look up the documentation if the lints are more granular. Might still be a good idea though.</p>



<a name="250598684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/no_effect%20question/near/250598684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/no_effect.20question.html#250598684">(Aug 25 2021 at 09:45)</a>:</h4>
<p>Yeah that is probably too aggressive. How about <code>useless_call</code> for any method or function call doing nothing like <code>as_(de)ref</code>, or an unused constructor call?</p>



<a name="250641948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/no_effect%20question/near/250641948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/no_effect.20question.html#250641948">(Aug 25 2021 at 16:14)</a>:</h4>
<p>or keep the status quo :)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
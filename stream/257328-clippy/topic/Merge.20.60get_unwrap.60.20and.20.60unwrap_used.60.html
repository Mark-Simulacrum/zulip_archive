<html>
<head><meta charset="utf-8"><title>Merge `get_unwrap` and `unwrap_used` · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Merge.20.60get_unwrap.60.20and.20.60unwrap_used.60.html">Merge `get_unwrap` and `unwrap_used`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265158282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Merge%20%60get_unwrap%60%20and%20%60unwrap_used%60/near/265158282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takayuki Nakata <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Merge.20.60get_unwrap.60.20and.20.60unwrap_used.60.html#265158282">(Dec 16 2021 at 13:52)</a>:</h4>
<p>Can we merge <a href="https://rust-lang.github.io/rust-clippy/master/index.html#get_unwrap"><code>get_unwrap</code></a> and <a href="https://rust-lang.github.io/rust-clippy/master/index.html#unwrap_used"><code>unwrap_used</code></a> into one? There seems to be no reason to treat <code>get</code> specially. The related issue is <a href="https://github.com/rust-lang/rust-clippy/issues/8124">https://github.com/rust-lang/rust-clippy/issues/8124</a>.</p>



<a name="265170400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Merge%20%60get_unwrap%60%20and%20%60unwrap_used%60/near/265170400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Merge.20.60get_unwrap.60.20and.20.60unwrap_used.60.html#265170400">(Dec 16 2021 at 15:16)</a>:</h4>
<p>Those two lints do different things. The <code>get_unwrap</code> suggests to use indexing instead of <code>get().unwrap()</code>, which can still panic. The <code>unwrap_used</code> lint is meant to warn on <strong>all</strong> uses of <code>unwrap</code> in order for them to get removed and replaced with some non- or explicit-panicking error handling.</p>



<a name="265237243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Merge%20%60get_unwrap%60%20and%20%60unwrap_used%60/near/265237243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takayuki Nakata <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Merge.20.60get_unwrap.60.20and.20.60unwrap_used.60.html#265237243">(Dec 16 2021 at 23:58)</a>:</h4>
<p>Oh, you're right. I overlooked the detail of the suggestion's message. Thanks!</p>



<a name="265237747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Merge%20%60get_unwrap%60%20and%20%60unwrap_used%60/near/265237747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takayuki Nakata <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Merge.20.60get_unwrap.60.20and.20.60unwrap_used.60.html#265237747">(Dec 17 2021 at 00:03)</a>:</h4>
<p>So, it seems to be okay to allow <code>unwrap_used</code> to detect <code>get(i).unwrap()</code> and <code>get_mut(i).unwrap()</code>. Is that okay?<br>
The related PR is <a href="https://github.com/rust-lang/rust-clippy/pull/8125">https://github.com/rust-lang/rust-clippy/pull/8125</a>.</p>



<a name="265273291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Merge%20%60get_unwrap%60%20and%20%60unwrap_used%60/near/265273291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Merge.20.60get_unwrap.60.20and.20.60unwrap_used.60.html#265273291">(Dec 17 2021 at 09:40)</a>:</h4>
<p>Yeah, IMO this is fine, because <code>unwrap_used</code> is a restriction lint which has to be explicitly enabled. So it should lint on every use of <code>unwrap</code>, like it is documented.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
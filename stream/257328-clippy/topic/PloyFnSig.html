<html>
<head><meta charset="utf-8"><title>PloyFnSig · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/PloyFnSig.html">PloyFnSig</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="249313685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/PloyFnSig/near/249313685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lengyijun <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/PloyFnSig.html#249313685">(Aug 13 2021 at 01:51)</a>:</h4>
<p>I wonder how to extract lifetime relation from <code>mir::PolyFnSig</code>.<br>
In <code>fn foo&lt;'c,'a:'c,'b:'c&gt;(x:&amp;'a S,y:&amp;'b S)-&gt;&amp;'c S</code>, I want to get (a,c),(b,c)</p>
<h1>Motivate</h1>
<p><code>redundant_clone</code></p>



<a name="249313929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/PloyFnSig/near/249313929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/PloyFnSig.html#249313929">(Aug 13 2021 at 01:56)</a>:</h4>
<p>I'm not personally familiar with the code, but poking around a bit it looks like <code>PolyFnSig</code> represents the type of a function after instantiation, meaning that it only includes late-bound lifetimes, and I think there are no lifetime relations on these</p>



<a name="249314500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/PloyFnSig/near/249314500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lengyijun <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/PloyFnSig.html#249314500">(Aug 13 2021 at 02:07)</a>:</h4>
<p>Yesterday I spent almost whole day on it. I wish I had asked yesterday.  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="249315010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/PloyFnSig/near/249315010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/PloyFnSig.html#249315010">(Aug 13 2021 at 02:20)</a>:</h4>
<p>From what I can tell, the actual where clauses are stored in <code>hir::WhereClause</code>, which is stored in the HIR and available to some clippy lints like <code>elided_lifetimes</code>. After typechecking this turns into <code>ty::GenericPredicates</code>, but I'm not sure that this is actually stored anywhere permanent</p>



<a name="249315097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/PloyFnSig/near/249315097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/PloyFnSig.html#249315097">(Aug 13 2021 at 02:22)</a>:</h4>
<p>well, there is the <code>predicates_of</code> query, so you can maybe just treat that as a black box</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
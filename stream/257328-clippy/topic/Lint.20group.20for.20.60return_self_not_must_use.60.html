<html>
<head><meta charset="utf-8"><title>Lint group for `return_self_not_must_use` · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html">Lint group for `return_self_not_must_use`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268075617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268075617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268075617">(Jan 14 2022 at 21:32)</a>:</h4>
<p>Since adding <code>return_self_not_must_use</code> in <a href="https://github.com/rust-lang/rust-clippy/issues/8071">clippy#8071</a> we have a discussion about the lint group (clippy::style) in <a href="https://github.com/rust-lang/rust-clippy/issues/8197">clippy#8197</a> and a bit of uncertainty about the way traits should be handled <a href="https://github.com/rust-lang/rust-clippy/issues/8222">clippy#8222</a>. Currently, the lint is in beta, meaning that the lint group can be changed before stable.</p>
<p>I was a bit uncertain about the correct lint group in the review but agreed that it makes sense to have it warn by default. After reading the discussion I'm leaning towards moving the lint to <code>clippy::pedantic</code> as I would by now describe the lint as rather strict. Does anyone have any thoughs?</p>



<a name="268075649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268075649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268075649">(Jan 14 2022 at 21:33)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span></p>



<a name="268075792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268075792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268075792">(Jan 14 2022 at 21:34)</a>:</h4>
<p>I'd prefer to have it warn by default, otherwise it'd be mostly useless</p>



<a name="268075807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268075807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268075807">(Jan 14 2022 at 21:34)</a>:</h4>
<p>as for the category, no preference (as long as it warns by default)</p>



<a name="268076072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076072">(Jan 14 2022 at 21:37)</a>:</h4>
<p><code>clippy::pedantic</code> would mean that it's allow by default. The lint group dictates the lint level. I think that having it in <code>clippy::pedantic</code> would still be sufficient. At least I enable that group for my hobby projects as well, and I believe others do too. By now I just feel like the lint is a little too subjective to be warn by default.</p>



<a name="268076246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076246">(Jan 14 2022 at 21:39)</a>:</h4>
<p>It's actually extremely rare for people to run something else than <code>cargo clippy</code></p>



<a name="268076279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076279">(Jan 14 2022 at 21:39)</a>:</h4>
<p>Hmm, I for one tend to run <code>cargo clippy</code> with a lot of flags, locally and in CI</p>



<a name="268076299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076299">(Jan 14 2022 at 21:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268076279">said</a>:</p>
<blockquote>
<p>Hmm, I for one tend to run <code>cargo clippy</code> with a lot of flags, locally and in CI</p>
</blockquote>
<p>I'm not really surprised haha</p>



<a name="268076303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076303">(Jan 14 2022 at 21:39)</a>:</h4>
<p>E.g., I pass <code>-A clippy::style</code> and manually re-enable certain style lints</p>



<a name="268076456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076456">(Jan 14 2022 at 21:41)</a>:</h4>
<p>Maybe I'm more particular about linting than some people, but I suspect allowing and denying different lints is still quite common</p>



<a name="268076670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076670">(Jan 14 2022 at 21:43)</a>:</h4>
<p>The only thing I do is silencing some clippy lints, but that's pretty much it</p>



<a name="268076698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076698">(Jan 14 2022 at 21:43)</a>:</h4>
<p>Sounds similar then?</p>



<a name="268076706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076706">(Jan 14 2022 at 21:43)</a>:</h4>
<p>at least gstreamer-rs and gtk-rs just run <code>cargo clippy</code></p>



<a name="268076732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076732">(Jan 14 2022 at 21:43)</a>:</h4>
<p><span class="user-mention" data-user-id="307537">@Noah Lev</span> I meant in the code, not on the command line</p>



<a name="268076733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076733">(Jan 14 2022 at 21:43)</a>:</h4>
<p>I just allow all style lints because otherwise new ones break my CI</p>



<a name="268076816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076816">(Jan 14 2022 at 21:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268076732">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> I meant in the code, not on the command line</p>
</blockquote>
<p>Sure, but it accomplishes the same thing, no? The only difference is that putting it in the code makes everyone else's clippy runs change</p>



<a name="268076859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076859">(Jan 14 2022 at 21:44)</a>:</h4>
<p>Anyway... it's not that important</p>



<a name="268076887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268076887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268076887">(Jan 14 2022 at 21:45)</a>:</h4>
<p>Not sure if we said the same thing but whatever XD</p>



<a name="268077247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268077247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268077247">(Jan 14 2022 at 21:48)</a>:</h4>
<p><span class="user-mention" data-user-id="369415">@xFrednet</span> I re-read the issue about this lint: people are not really complaining about the lint usefulness but that they don't see how useful it is for them because they didn't forget to use a returned type. It seems very subjective and is exactly why I wrote this lint in the first place: to prevent users to even potentially forget about it</p>



<a name="268077903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268077903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268077903">(Jan 14 2022 at 21:55)</a>:</h4>
<p>I personally try to enable as many lints as possible and try my best to change my code in accordance with the lint, only resorting to <code>#[allow]</code> when I fail to do so within a reasonable amount of time.</p>



<a name="268078285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268078285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268078285">(Jan 14 2022 at 21:58)</a>:</h4>
<p>It'd be interesting to have some more precise numbers. Did clippy ever run a survey to get this information? I'd be very interested in the results outside of the crate I know/use</p>



<a name="268079662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268079662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268079662">(Jan 14 2022 at 22:08)</a>:</h4>
<p><a href="https://github.com/search?q=allow%28clippy%3A%3Areturn_self_not_must_use%29&amp;type=code">https://github.com/search?q=allow%28clippy%3A%3Areturn_self_not_must_use%29&amp;type=code</a><br>
<span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="268079887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268079887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268079887">(Jan 14 2022 at 22:10)</a>:</h4>
<p>It completely kills the whole point of this lint T_T</p>



<a name="268079918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268079918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268079918">(Jan 14 2022 at 22:10)</a>:</h4>
<p>maybe I should remove the <code>&amp;self</code> check as suggested?</p>



<a name="268079931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268079931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268079931">(Jan 14 2022 at 22:10)</a>:</h4>
<p>"make clippy happy" * adds allow(clippy::...) into the codebase* lol</p>



<a name="268079945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268079945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268079945">(Jan 14 2022 at 22:10)</a>:</h4>
<p>I don't think it's a good idea but I really don't want this lint to not warn by default</p>



<a name="268080083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268080083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268080083">(Jan 14 2022 at 22:12)</a>:</h4>
<p>getting feedback on clippy is not that easy, I guess a lot of people look at their CI and think "does it take me more than 5 minutes to fix this"</p>



<a name="268080131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268080131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268080131">(Jan 14 2022 at 22:12)</a>:</h4>
<p>maybe you can ask on twitter what people thing about the lint in general? :)</p>



<a name="268080210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268080210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268080210">(Jan 14 2022 at 22:13)</a>:</h4>
<p>That would be a good start indeed</p>



<a name="268080669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268080669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268080669">(Jan 14 2022 at 22:15)</a>:</h4>
<p>here we go: <a href="https://twitter.com/imperioworld_/status/1482114081985372160">https://twitter.com/imperioworld_/status/1482114081985372160</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/imperioworld_/status/1482114081985372160"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/92c7fed36eb16b6ca352f69719793754e95df472/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313130373339323833343738373737383536302f62493151665459685f6e6f726d616c2e706e67"></a><p>I recently added the <a href="https://twitter.com/rustlang">@rustlang</a> clippy lint <a href="https://t.co/VIvWubgYn4">https://rust-lang.github.io/rust-clippy/master/#return_self_not_must_use</a> and I'd like to have your opinion!

It seems to have some mixed feedback. What do you like/dislike about it? Do you have false positives?</p><span>- Guillaume Gomez (@imperioworld_)</span></div></div>



<a name="268081253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268081253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268081253">(Jan 14 2022 at 22:21)</a>:</h4>
<p>Let's see if we get some feedback. I think that the level of configuration also depends on the project type. On small hobby projects I only apply the warn by default lints and ignore the rest. On bigger code bases that the lint is aimed for it#s better to add <code>#![warn(clippy::pedantic)]</code>. A <a href="https://github.com/search?q=warn%28clippy%3A%3Apedantic%29&amp;type=code">quick search on GitHub</a> results in 2K results</p>



<a name="268082064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082064">(Jan 14 2022 at 22:29)</a>:</h4>
<p>I'm realizing that it makes mostly sense on libraries, not on binaries</p>



<a name="268082084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082084">(Jan 14 2022 at 22:29)</a>:</h4>
<p>is there a way to check that in clippy?</p>



<a name="268082118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082118">(Jan 14 2022 at 22:29)</a>:</h4>
<p>the <code>crate_type</code> thing would come in very handy</p>



<a name="268082215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082215">(Jan 14 2022 at 22:30)</a>:</h4>
<p>I wonder if it'd be better to remove this lint and replace it with a lint that warns at use sites? I.e., if you have a function that returns <code>Self</code> and call it but ignore the result, it gives a warning?</p>



<a name="268082266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082266">(Jan 14 2022 at 22:30)</a>:</h4>
<p>So it'd kind of be like "automatically" applying the <code>#[must_use]</code></p>



<a name="268082322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082322">(Jan 14 2022 at 22:31)</a>:</h4>
<p>I do like the idea of this lint, but I just ran it on a private project and it generated a ton of warnings</p>



<a name="268082346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082346">(Jan 14 2022 at 22:31)</a>:</h4>
<p>but then you're required to use clippy from the user, not from the provider</p>



<a name="268082414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082414">(Jan 14 2022 at 22:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268082064">said</a>:</p>
<blockquote>
<p>I'm realizing that it makes mostly sense on libraries, not on binaries</p>
</blockquote>
<p>FWIW, I use workspaces for large projects and thus have a lot of libraries that behave like binaries</p>



<a name="268082483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082483">(Jan 14 2022 at 22:32)</a>:</h4>
<p>so an improvement but not the solution</p>



<a name="268082486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082486">(Jan 14 2022 at 22:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268082346">said</a>:</p>
<blockquote>
<p>but then you're required to use clippy from the user, not from the provider</p>
</blockquote>
<p>True, but it'd reduce the number of perceived false positives -- i.e., when a function isn't <code>#[must_use]</code>, but it's clear from context (e.g., its name) that you need to use the result</p>



<a name="268082566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082566">(Jan 14 2022 at 22:33)</a>:</h4>
<p>the idea is to enforce it through the compiler, not through the linter</p>



<a name="268082576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082576">(Jan 14 2022 at 22:33)</a>:</h4>
<p>I really don't know what to do in here...</p>



<a name="268082727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082727">(Jan 14 2022 at 22:35)</a>:</h4>
<p><span class="user-mention" data-user-id="307537">@Noah Lev</span> also, for such libraries, it still makes sense</p>



<a name="268082745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082745">(Jan 14 2022 at 22:35)</a>:</h4>
<p>it doesn't make sense for binaries still</p>



<a name="268082771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082771">(Jan 14 2022 at 22:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268082727">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> also, for such libraries, it still makes sense</p>
</blockquote>
<p>Sorry, I don't think I follow. Which libraries? Do you mean in workspaces?</p>



<a name="268082835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082835">(Jan 14 2022 at 22:36)</a>:</h4>
<p>yes in workspaces</p>



<a name="268082973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268082973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268082973">(Jan 14 2022 at 22:38)</a>:</h4>
<p>In some cases, yes; but in my particular case, the code is mainly in separate libraries to improve compile times. If rustc were faster, I might just have them all in one crate</p>



<a name="268083209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083209">(Jan 14 2022 at 22:40)</a>:</h4>
<blockquote>
<p>I'd prefer to have it warn by default, otherwise it'd be mostly useless</p>
</blockquote>
<p>This could be said about any lint.</p>



<a name="268083399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083399">(Jan 14 2022 at 22:42)</a>:</h4>
<p>absolutely!</p>



<a name="268083413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083413">(Jan 14 2022 at 22:42)</a>:</h4>
<p>Binaries or libraries within a workspace with a small number of usages - these are cases where the value of the lint is questionable. That fits squarely in pedantic IMO.</p>



<a name="268083484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083484">(Jan 14 2022 at 22:43)</a>:</h4>
<p>So then do you say that all lints in pedantic should be warn by default because otherwise they are mostly useless?</p>



<a name="268083488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083488">(Jan 14 2022 at 22:43)</a>:</h4>
<p>that makes me sad because it'll not be used then but if no one wants it I don't want to fight more than necessary. I made my point ^^'</p>



<a name="268083506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083506">(Jan 14 2022 at 22:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360405">Cameron Steffen</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268083484">said</a>:</p>
<blockquote>
<p>So then do you say that all lints in pedantic should be warn by default because otherwise they are mostly useless?</p>
</blockquote>
<p>I consider them as useless yes</p>



<a name="268083675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083675">(Jan 14 2022 at 22:45)</a>:</h4>
<p>Or more like "border-line improvements"</p>



<a name="268083702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268083702" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268083702">(Jan 14 2022 at 22:45)</a>:</h4>
<p>they're not useless in itself, they have their use case too</p>



<a name="268084238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268084238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268084238">(Jan 14 2022 at 22:51)</a>:</h4>
<p>In that case we should rather make it easier for people to find these lints then to make all of them warn by default</p>



<a name="268084254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268084254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268084254">(Jan 14 2022 at 22:51)</a>:</h4>
<p>Hypothetically if all code were public crates on <a href="http://crates.io">crates.io</a>, then warn-by-default would make sense. Unfortunately we have to consider the "average" of all cases.</p>



<a name="268084403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268084403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268084403">(Jan 14 2022 at 22:52)</a>:</h4>
<p>I suppose you could make the case that public crates are "first class" use cases?</p>



<a name="268085275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268085275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268085275">(Jan 14 2022 at 23:00)</a>:</h4>
<p>I actually don't think that they are. Most of my projects before Clippy were just some small hobby crates. Even Clippy while being public is net meant to be used as a library. Maybe <code>clippy_utils</code> is, but either way we have these lints warn by default.</p>



<a name="268085496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268085496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268085496">(Jan 14 2022 at 23:03)</a>:</h4>
<p>Maybe we should add a <em>Suggestions</em> section to the Clippy book (once it's done) that discusses the use of lint groups and when to enable them. Having a <em>Suggestions</em> section would also be good for cases like <a href="https://github.com/rust-lang/rust-clippy/issues/7494">clippy#7494</a></p>



<a name="268085607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268085607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268085607">(Jan 14 2022 at 23:04)</a>:</h4>
<p>My impression of Clippy users (unsubstantiated) is that people who are willing to take the time to run clippy in the first place are oftentimes also interested in seeing what <em>all</em> the lints have to say.</p>



<a name="268085647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268085647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268085647">(Jan 14 2022 at 23:05)</a>:</h4>
<p>I recall there's another discussion about documenting a set of lints as "you may want to turn these on for your production code"</p>



<a name="268085663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268085663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268085663">(Jan 14 2022 at 23:05)</a>:</h4>
<p>Yes that's <a href="https://github.com/rust-lang/rust-clippy/issues/7494">clippy#7494</a></p>



<a name="268086043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268086043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268086043">(Jan 14 2022 at 23:09)</a>:</h4>
<p>Yeah, improving lint discoverability sounds like a good idea to me. I usually allow all style lints, but then deny specific ones, since I disagree with many of them. Maybe it'd be good to have an "uncontroversial-style" category?</p>



<a name="268086067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268086067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268086067">(Jan 14 2022 at 23:09)</a>:</h4>
<p>E.g., I could imagine the struct field shorthand lint (<code>x: x</code> -&gt; <code>x</code>) going in that category</p>



<a name="268086122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268086122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268086122">(Jan 14 2022 at 23:10)</a>:</h4>
<p>Or, at least "less controversial style"</p>



<a name="268086547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268086547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268086547">(Jan 14 2022 at 23:14)</a>:</h4>
<p>style is <em>supposed</em> to be uncontroversial lol. I'd be intereseted to know which ones you disagree with so we can consider changing them. Related: <a href="https://github.com/rust-lang/rust-clippy/issues/7666">clippy#7666</a></p>



<a name="268086766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268086766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268086766">(Jan 14 2022 at 23:16)</a>:</h4>
<p>The biggest one is "collapsible if"</p>



<a name="268086937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268086937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268086937">(Jan 14 2022 at 23:18)</a>:</h4>
<p>yup - I can see that as pedantic</p>



<a name="268087103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268087103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268087103">(Jan 14 2022 at 23:20)</a>:</h4>
<p>There are some others, but that's the one that bothers me the most:</p>
<ul>
<li><code>single_match</code> (sometimes I think a <code>match</code> is more readable)</li>
<li><code>let_and_return</code> (it can improve clarity to assign a name to the return value)</li>
<li><code>len_zero</code> (I find <code>&gt; 0</code> more readable than <code>!foo.is_empty()</code>, because it's easy to miss the <code>!</code>)</li>
<li><code>new_without_default</code> (perhaps valuable for libraries, but not for internal code)</li>
</ul>



<a name="268087201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268087201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268087201">(Jan 14 2022 at 23:21)</a>:</h4>
<p>Actually, I just realized I mixed "collapsible if" up with "collapsible else if". "collapsible if" doesn't bother me as much (although I don't think nesting <code>if</code> blocks is always a bad thing); "collapsible else if" is the one that drives me nuts <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span></p>



<a name="268088456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268088456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268088456">(Jan 14 2022 at 23:36)</a>:</h4>
<p>I agree with all these lints :)</p>



<a name="268089080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268089080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268089080">(Jan 14 2022 at 23:44)</a>:</h4>
<p>single_match - not sure why you'd ever disagree with that. its strictly less verbose. maybe I would need to see an example<br>
let_and_return - I strongly agree with this lint. The function name should describe the return value. IMO this is "very Rusty" style.<br>
len_zero - I can see how cases that require <code>!</code> are more controversial - that could split the lint<br>
new_without_default - yeah that seems pedantic to me</p>



<a name="268089511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268089511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268089511">(Jan 14 2022 at 23:50)</a>:</h4>
<blockquote>
<p>single_match - not sure why you'd ever disagree with that. its strictly less verbose. maybe I would need to see an example</p>
</blockquote>
<p>Two main reasons:</p>
<ol>
<li><code>if let</code> can generate really long lines (that are then broken by rustfmt) because the scrutinee and the patterns are on the same line. I like how <code>match</code> separates them.</li>
<li>Sometimes I want to explicitly handle all cases, even if I do nothing. <code>if let</code> basically turns off exhaustiveness checking.</li>
</ol>



<a name="268089658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268089658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268089658">(Jan 14 2022 at 23:52)</a>:</h4>
<blockquote>
<p>let_and_return - I strongly agree with this lint. The function name should describe the return value. IMO this is "very Rusty" style.</p>
</blockquote>
<p>Sometimes you have a pattern match with many different cases, and each one has a slightly different meaning that you want to make clear.</p>
<p>Another situation is when I have a sequence of manipulations to a value and I want the last version to be named as well:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foo</span><span class="p">();</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bar</span><span class="p">(</span><span class="n">x1</span><span class="p">);</span><span class="w"></span>
<span class="n">x2</span><span class="w"></span>
</code></pre></div>



<a name="268090310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268090310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268090310">(Jan 15 2022 at 00:01)</a>:</h4>
<blockquote>
<ol start="2">
<li>Sometimes I want to explicitly handle all cases, even if I do nothing. <code>if let</code> basically turns off exhaustiveness checking.</li>
</ol>
</blockquote>
<p>If it triggers on an exhaustive match I'd say that's a bug.</p>
<blockquote>
<p>Sometimes you have a pattern match with many different cases, and each one has a slightly different meaning that you want to make clear.</p>
</blockquote>
<p>Do you mean <code>let name = match { ... }; return name;</code>?</p>



<a name="268090908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268090908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cameron Steffen <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268090908">(Jan 15 2022 at 00:10)</a>:</h4>
<p>Reported <a href="https://github.com/rust-lang/rust-clippy/issues/8282">clippy#8282</a></p>



<a name="268091359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268091359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268091359">(Jan 15 2022 at 00:16)</a>:</h4>
<p><a href="https://github.com/matthiaskrgr/cargo-cache/blob/master/src/main.rs#L53">https://github.com/matthiaskrgr/cargo-cache/blob/master/src/main.rs#L53</a> <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="268091494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268091494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268091494">(Jan 15 2022 at 00:18)</a>:</h4>
<p>but yeah, the <code>collapsible_if</code> but also <code>too_many_arguments</code> can be quite spammy, to an extend that it is hard to spot other more interesting lints in between :/</p>



<a name="268093986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268093986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268093986">(Jan 15 2022 at 00:58)</a>:</h4>
<p>I actually like <code>too_many_arguments</code>. I sometimes <code>allow</code> it on certain functions, but I think it's helpful to have a threshold of "no, please don't add any more arguments <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>" <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="268094150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268094150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268094150">(Jan 15 2022 at 01:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="217864">matthiaskrgr</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268091359">said</a>:</p>
<blockquote>
<p><a href="https://github.com/matthiaskrgr/cargo-cache/blob/master/src/main.rs#L53">https://github.com/matthiaskrgr/cargo-cache/blob/master/src/main.rs#L53</a> <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>
</blockquote>
<p>I too dislike <code>upper_case_acronyms</code>. I have a type alias called <code>AST</code>, which I don't really think is better as <code>Ast</code>.</p>



<a name="268100576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268100576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268100576">(Jan 15 2022 at 03:01)</a>:</h4>
<p>FWIW—and maybe this is a known issue—I've also run into some false positives with <code>needless_collect</code> where the collect is actually needed because of the borrow-checker. I'm not sure how easy that'd be to "fix" though.</p>
<p>I like <code>needless_collect</code> a lot otherwise though :)</p>



<a name="268256950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268256950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268256950">(Jan 17 2022 at 11:15)</a>:</h4>
<p>Regarding the lint level: My first instinct was that this lint should be <code>pedantic</code>. I see the argument, that this is something that  adding <code>must_use</code> to builders can be considered good style. </p>
<p>In its current form, I would put this lint into <code>pedantic</code>, because it is just too aggressive. With the suggestion on only linting in libraries and (from twitter) only linting externally visible functions, I think the argument of having this lint warn-by-default is stronger.</p>
<p>That this lint is aimed at libraty providers and not users should be documented. </p>
<p>There's also the question if adding a <code>must_use</code> attribute to a public function/type has to be considered as a breaking change regarding semver.</p>



<a name="268258754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268258754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268258754">(Jan 17 2022 at 11:35)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> FYI: We decided to move the lint to <code>pedantic</code> for now <a href="https://github.com/rust-lang/rust-clippy/issues/8302">clippy#8302</a>. I'm open to move it back to <code>style</code> (or another warn-by-default group) once it is a bit more restricted.</p>
<p>(To decrease warnings another idea would be to only lint once per type. It doesn't really help to lint on all methods of a builder pattern type)</p>



<a name="268262087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268262087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268262087">(Jan 17 2022 at 12:08)</a>:</h4>
<p>It's fine. Thanks!</p>



<a name="268305534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268305534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268305534">(Jan 17 2022 at 19:02)</a>:</h4>
<blockquote>
<p>With the suggestion on only linting in libraries and (from twitter) only linting externally visible functions, I think the argument of having this lint warn-by-default is stronger.</p>
</blockquote>
<p>I can see the advantage of, if you explicitly enable the lint, wanting to have it lint <em>all</em> functions, including private helpers, to improve static checking even for local code. So, hardcoding the ignoring also seems somewhat non-optimal.</p>



<a name="268360109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268360109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268360109">(Jan 18 2022 at 08:53)</a>:</h4>
<p>Good point, we can always make that configurable. But I think the default of public-only + warn-by-default is better than all-functions + allow-by-default (current impl)</p>



<a name="268743111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20group%20for%20%60return_self_not_must_use%60/near/268743111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60.html#268743111">(Jan 20 2022 at 19:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> <a href="#narrow/stream/257328-clippy/topic/Lint.20group.20for.20.60return_self_not_must_use.60/near/268076246">said</a>:</p>
<blockquote>
<p>It's actually extremely rare for people to run something else than <code>cargo clippy</code></p>
</blockquote>
<p>This does not match what i've seen in most projects: Clippy is _intended_ to be used with lots of twiddling of lint levels, and most projects seem to do this. Note that you don't _have_ to twiddle the lint levels at the CLI level, you can do it in source too; and a lot of projects _do_ run <code>cargo clippy</code> but toggle stuff in source, which for the purposes of this discussion is the same</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
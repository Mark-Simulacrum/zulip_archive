<html>
<head><meta charset="utf-8"><title>Lint for `AsyncWrite`? rust-clippy#8179 · clippy · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/index.html">clippy</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20for.20.60AsyncWrite.60.3F.20rust-clippy.238179.html">Lint for `AsyncWrite`? rust-clippy#8179</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="266334152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20for%20%60AsyncWrite%60%3F%20rust-clippy%238179/near/266334152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20for.20.60AsyncWrite.60.3F.20rust-clippy.238179.html#266334152">(Dec 29 2021 at 10:34)</a>:</h4>
<p>Hello, in <a href="https://github.com/rust-lang/rust-clippy/issues/8179">clippy#8179</a> it was suggested to expand the <a href="https://rust-lang.github.io/rust-clippy/master/index.html#unused_io_amount"><code>unused_io_amount</code></a> lint to also cover <code>AsyncWrite</code> traits. Do we want to add this, as those traits are not part of the standard library? I think it would be reasonable to support <code>futures::io::AsyncWrite</code> as <code>futures-rs</code> is an official rust-lang crate that's used often enough.</p>
<p>Does anyone have any thoughts on the matter?</p>
<p>(See <a href="https://github.com/rust-lang/rust-clippy/issues/8179">clippy#8179</a> for more context)</p>



<a name="266334579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20for%20%60AsyncWrite%60%3F%20rust-clippy%238179/near/266334579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20for.20.60AsyncWrite.60.3F.20rust-clippy.238179.html#266334579">(Dec 29 2021 at 10:41)</a>:</h4>
<p>We have lints for the <code>regex</code> crate, so why not for the <code>futures</code> crate?</p>



<a name="266334895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20for%20%60AsyncWrite%60%3F%20rust-clippy%238179/near/266334895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20for.20.60AsyncWrite.60.3F.20rust-clippy.238179.html#266334895">(Dec 29 2021 at 10:47)</a>:</h4>
<p>I thought we avoided lints for crates besides the standard library, but I might have misunderstood something <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="266335215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20for%20%60AsyncWrite%60%3F%20rust-clippy%238179/near/266335215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20for.20.60AsyncWrite.60.3F.20rust-clippy.238179.html#266335215">(Dec 29 2021 at 10:52)</a>:</h4>
<p>No, we don't exactly avoid lints for crates, but they should be often used. Otherwise, they could be allow-by-default lints, but there's still no hard rules against them.</p>



<a name="266335358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20for%20%60AsyncWrite%60%3F%20rust-clippy%238179/near/266335358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> xFrednet <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20for.20.60AsyncWrite.60.3F.20rust-clippy.238179.html#266335358">(Dec 29 2021 at 10:55)</a>:</h4>
<p>Good to know <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> Thank you for the feedback. The Author also asked about the <code>AsyncWrite</code> trait of <code>tokio</code>, what are your thoughts on that? The lint logic would remain the same as only one additional path would be checked for this and tokio is also stable AFAIK</p>



<a name="266337191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257328-clippy/topic/Lint%20for%20%60AsyncWrite%60%3F%20rust-clippy%238179/near/266337191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> llogiq <a href="https://zulip-archive.rust-lang.org/stream/257328-clippy/topic/Lint.20for.20.60AsyncWrite.60.3F.20rust-clippy.238179.html#266337191">(Dec 29 2021 at 11:22)</a>:</h4>
<p>I think there's enough tokio usage to warrant inclusion.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
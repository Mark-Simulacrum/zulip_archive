<html>
<head><meta charset="utf-8"><title>Deciding the rough semantics of assignment · t-compiler/wg-mir-opt · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/index.html">t-compiler/wg-mir-opt</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Deciding.20the.20rough.20semantics.20of.20assignment.html">Deciding the rough semantics of assignment</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277946570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Deciding%20the%20rough%20semantics%20of%20assignment/near/277946570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Deciding.20the.20rough.20semantics.20of.20assignment.html#277946570">(Apr 05 2022 at 21:34)</a>:</h4>
<p>Is making a decision on <a href="https://github.com/rust-lang/rust/issues/68364">#68364</a> in the near future possible? Or at least a partial decision? I don't think that this has to be blocked on the Rust memory model, because the semantics of an MIR assignment are different from a Rust assignment already.</p>
<p>Specifically, my stake is documented in <a href="https://github.com/rust-lang/rust/issues/95700">#95700</a> . It's difficult to write an optimization without knowing what the rules are around this area. On top of that, if the rules are as Ralf suggests (or similar), then there is at least one missing dataflow state that is not reported by analysis.</p>



<a name="277946686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Deciding%20the%20rough%20semantics%20of%20assignment/near/277946686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Deciding.20the.20rough.20semantics.20of.20assignment.html#277946686">(Apr 05 2022 at 21:35)</a>:</h4>
<p>If we wanted to make a decision here, I don't think it requires defining what "retag" means - we can just say that it is roughly a mutation of the computed place, and it's sufficient to guarantee the properties that backends want</p>



<a name="277977959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Deciding%20the%20rough%20semantics%20of%20assignment/near/277977959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Deciding.20the.20rough.20semantics.20of.20assignment.html#277977959">(Apr 06 2022 at 05:46)</a>:</h4>
<p>We can certainly use your PR as motivation for changing those (unratified) rules</p>



<a name="277977978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Deciding%20the%20rough%20semantics%20of%20assignment/near/277977978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Deciding.20the.20rough.20semantics.20of.20assignment.html#277977978">(Apr 06 2022 at 05:47)</a>:</h4>
<p>But we have to be able to check rules in miri, otherwise that's kind of problematic</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
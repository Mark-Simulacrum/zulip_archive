<html>
<head><meta charset="utf-8"><title>keep stage · t-compiler/wg-mir-opt · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/index.html">t-compiler/wg-mir-opt</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html">keep stage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="194385864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194385864" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194385864">(Apr 17 2020 at 00:57)</a>:</h4>
<p>hah</p>



<a name="194385868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194385868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194385868">(Apr 17 2020 at 00:57)</a>:</h4>
<p><code>--keep-stage</code> is not your friend!!</p>



<a name="194385917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194385917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194385917">(Apr 17 2020 at 00:58)</a>:</h4>
<p>/me has never used it, nor felt the need to use it</p>



<a name="194385924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194385924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194385924">(Apr 17 2020 at 00:58)</a>:</h4>
<p>incremental is nice and libstd only takes like a minute to build at stage1</p>



<a name="194386361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386361" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386361">(Apr 17 2020 at 01:07)</a>:</h4>
<p>the information you're omitting is that you have 62356 cores :P</p>



<a name="194386374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386374">(Apr 17 2020 at 01:07)</a>:</h4>
<p>libstd should take a minute to build with just <code>-j8</code> IIRC</p>



<a name="194386379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386379">(Apr 17 2020 at 01:07)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="194386416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386416">(Apr 17 2020 at 01:08)</a>:</h4>
<p>or maybe I'm misremembering</p>



<a name="194386440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386440" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386440">(Apr 17 2020 at 01:08)</a>:</h4>
<p>Yeah just over on my 16 cores</p>



<a name="194386460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386460" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386460">(Apr 17 2020 at 01:09)</a>:</h4>
<p>And keep stage was never really intended for compiler development</p>



<a name="194386501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386501" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386501">(Apr 17 2020 at 01:10)</a>:</h4>
<p>Mostly for std, to make it easier to iterate on std in stage 1 without a compiler rebuild</p>



<a name="194386545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386545" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386545">(Apr 17 2020 at 01:11)</a>:</h4>
<p>can't wait to have a proper workflow for that</p>



<a name="194386550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386550">(Apr 17 2020 at 01:11)</a>:</h4>
<p>I just wish we thought through the implications of master builds earlier :P</p>



<a name="194386555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386555">(Apr 17 2020 at 01:11)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> oh damn we can tag nightlies into git</p>



<a name="194386560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386560">(Apr 17 2020 at 01:11)</a>:</h4>
<p>or keep a <code>nightly</code> branch</p>



<a name="194386575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386575">(Apr 17 2020 at 01:11)</a>:</h4>
<p>tagging is nice because it allows you to use a nightly with a specific date explicitly</p>



<a name="194386620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386620" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386620">(Apr 17 2020 at 01:12)</a>:</h4>
<p>oops this is getting offtopic fast :P</p>



<a name="194386799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386799">(Apr 17 2020 at 01:16)</a>:</h4>
<p>Yeah, we can. There's someone working on getting regular cargo builds working (vs x.py)</p>



<a name="194386803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386803">(Apr 17 2020 at 01:16)</a>:</h4>
<p>I should check on that</p>



<a name="194386834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194386834" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194386834">(Apr 17 2020 at 01:17)</a>:</h4>
<p>right, I saw that, hope it all works out</p>



<a name="194467079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467079">(Apr 17 2020 at 16:36)</a>:</h4>
<p>keep-stage is still absolutely essential when working on miri with rustc changes</p>



<a name="194467140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467140">(Apr 17 2020 at 16:36)</a>:</h4>
<p>I can do <code>--keep-stage 0</code> and then it only rebuilds stage 1, so when I change librsutc_mir just a few crates, before I can build miri against the new stage 2 toolchain</p>



<a name="194467192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467192">(Apr 17 2020 at 16:37)</a>:</h4>
<p>but yeah libstd only takes a minute here as well so I hardly ever use keep-stage to just skip libstd</p>



<a name="194467232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467232">(Apr 17 2020 at 16:37)</a>:</h4>
<p>but until <a href="https://github.com/rust-lang/rust/issues/52856" title="https://github.com/rust-lang/rust/issues/52856">https://github.com/rust-lang/rust/issues/52856</a> is resolved please keep keep-stage :D</p>



<a name="194467340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467340" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467340">(Apr 17 2020 at 16:38)</a>:</h4>
<p>probably blocked on subtree-ing miri :P</p>



<a name="194467374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467374">(Apr 17 2020 at 16:38)</a>:</h4>
<p>or maybe not</p>



<a name="194467427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467427">(Apr 17 2020 at 16:39)</a>:</h4>
<p>or do you mean you want to build miri out of tree?</p>



<a name="194467532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467532" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467532">(Apr 17 2020 at 16:40)</a>:</h4>
<p><code>rustdoc</code> for example works fine being built at stage0 into <code>stage1/bin/rustdoc</code> and using it to run rustdoc tests at stage1</p>



<a name="194467609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467609" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467609">(Apr 17 2020 at 16:40)</a>:</h4>
<p>i.e. <code>./x.py test --stage 1 src/test/rustdoc{,-ui}</code> builds the compiler once, builds <code>rustdoc</code> and runs the tests</p>



<a name="194467650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467650">(Apr 17 2020 at 16:41)</a>:</h4>
<p>theoretically we can do the same for miri</p>



<a name="194467682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467682">(Apr 17 2020 at 16:41)</a>:</h4>
<p>the last comment in the issue mentions proc macros, which have since been fixed I guess</p>



<a name="194467704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467704">(Apr 17 2020 at 16:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> likely understands the situation better than me though</p>



<a name="194467853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467853">(Apr 17 2020 at 16:42)</a>:</h4>
<p>Yeah you shouldn't need a stage 2 toolchain for miri I think, though we may not quite be setup right for that</p>



<a name="194467941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467941" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467941">(Apr 17 2020 at 16:43)</a>:</h4>
<p>Probably fixable though</p>



<a name="194467944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467944">(Apr 17 2020 at 16:43)</a>:</h4>
<p>out of tree will sadly always be harder because <del>the stage0 toolchain isn't exposed to allow building e.g. build scripts</del></p>



<a name="194467966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467966">(Apr 17 2020 at 16:43)</a>:</h4>
<p>wait no that should be fine. even proc macros maybe</p>



<a name="194467973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194467973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194467973">(Apr 17 2020 at 16:43)</a>:</h4>
<p>/me forgets what the edge case is</p>



<a name="194468055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194468055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194468055">(Apr 17 2020 at 16:44)</a>:</h4>
<p>oh miri itself would have to be built by the stage0 toolchain to link against the same rustc_driver that <code>stage1/bin/rustc</code> uses</p>



<a name="194585496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194585496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194585496">(Apr 19 2020 at 08:13)</a>:</h4>
<p>yeah I was thinking out-of-tree</p>



<a name="194585501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194585501" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194585501">(Apr 19 2020 at 08:13)</a>:</h4>
<p>I could move my work in-tree though for these cases I guess. (with subtree miri switching between out-of and in-tree might be harder but I'm sure there'll be ways.)</p>



<a name="194585559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/keep%20stage/near/194585559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/keep.20stage.html#194585559">(Apr 19 2020 at 08:15)</a>:</h4>
<p>so are you saying <code>./x.py --stage 1 test src/tools/miri</code> should work these days, or could be made to work with minor adjustments to rustbuild? well that would be cool :D</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
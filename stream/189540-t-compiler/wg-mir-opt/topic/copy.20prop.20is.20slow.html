<html>
<head><meta charset="utf-8"><title>copy prop is slow · t-compiler/wg-mir-opt · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/index.html">t-compiler/wg-mir-opt</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/copy.20prop.20is.20slow.html">copy prop is slow</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="184397644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/copy%20prop%20is%20slow/near/184397644" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/copy.20prop.20is.20slow.html#184397644">(Dec 29 2019 at 00:31)</a>:</h4>
<p>No idea if copy prop is still slow, but I found this gem: <a href="https://github.com/rust-lang/rust/issues/36673" target="_blank" title="https://github.com/rust-lang/rust/issues/36673">https://github.com/rust-lang/rust/issues/36673</a></p>



<a name="184397646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/copy%20prop%20is%20slow/near/184397646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/copy.20prop.20is.20slow.html#184397646">(Dec 29 2019 at 00:31)</a>:</h4>
<p>in MIR terms this issue is ancient</p>



<a name="185579557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/copy%20prop%20is%20slow/near/185579557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Björn Steinbrink <a href="https://rust-lang.github.io/zulip_archive/stream/189540-t-compiler/wg-mir-opt/topic/copy.20prop.20is.20slow.html#185579557">(Jan 14 2020 at 09:54)</a>:</h4>
<p>Yeah, looking at the code, it's still slow. I tried improving that sometime last year, adding a rather crude hack to update the def-use chains instead of recreating them (which is what makes this pass so slow). But it's also limited in the cases it can handle which made the gains from running the pass rather marginal and I didn't have the time to finish the work I started in a way that's suitable for a PR.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
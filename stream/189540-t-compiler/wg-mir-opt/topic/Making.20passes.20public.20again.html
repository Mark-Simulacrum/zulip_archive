<html>
<head><meta charset="utf-8"><title>Making passes public again · t-compiler/wg-mir-opt · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/index.html">t-compiler/wg-mir-opt</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html">Making passes public again</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271284213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Making%20passes%20public%20again/near/271284213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html#271284213">(Feb 09 2022 at 14:19)</a>:</h4>
<p>Hi! </p>
<p>A while ago, MIR opt passes were part of the public api, which was convenient for me as it enabled me to run specific, custom sets of passes as part of my verification backend (notably <code>SImplifyCfg</code>). At some point, they were made private again, would it be possible to add them (or at least a limited set of them) back to the public api?</p>



<a name="271284345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Making%20passes%20public%20again/near/271284345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html#271284345">(Feb 09 2022 at 14:20)</a>:</h4>
<p>Two I can cite off the top of my head that I would find useful are <code>SimplifyCfg</code> and <code>RemoveFalseEdges</code> but in general the other 'cleanup' passes would be nice.</p>



<a name="271291088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Making%20passes%20public%20again/near/271291088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html#271291088">(Feb 09 2022 at 15:04)</a>:</h4>
<p>I don't see an issue as long as we're not committing to a stable API or anything like that.</p>



<a name="271291472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Making%20passes%20public%20again/near/271291472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html#271291472">(Feb 09 2022 at 15:07)</a>:</h4>
<p>no ofc not, but i don't think any part of <code>rustc</code> makes that guarantee to external drivers</p>



<a name="271291486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Making%20passes%20public%20again/near/271291486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html#271291486">(Feb 09 2022 at 15:07)</a>:</h4>
<p>I'll write a PR</p>



<a name="271291784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Making%20passes%20public%20again/near/271291784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html#271291784">(Feb 09 2022 at 15:09)</a>:</h4>
<p>Feel free to r? me!</p>



<a name="271293464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/Making%20passes%20public%20again/near/271293464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xavier Denis <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/Making.20passes.20public.20again.html#271293464">(Feb 09 2022 at 15:21)</a>:</h4>
<p>done!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>miri error · t-compiler/wg-mir-opt · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/index.html">t-compiler/wg-mir-opt</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html">miri error</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="171400472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171400472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171400472">(Jul 22 2019 at 03:32)</a>:</h4>
<p>Running latest miri (on a trivial <code>fn main() {}</code> even), I get this error:</p>



<a name="171400474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171400474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171400474">(Jul 22 2019 at 03:32)</a>:</h4>
<p><a href="https://gist.github.com/c7afa2a62fa5d44aa1718bba14f36322" target="_blank" title="https://gist.github.com/c7afa2a62fa5d44aa1718bba14f36322">https://gist.github.com/c7afa2a62fa5d44aa1718bba14f36322</a></p>



<a name="171400483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171400483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171400483">(Jul 22 2019 at 03:33)</a>:</h4>
<p>this is with latest rustc master (self-compiled) and latest miri master (compiled using that rustc)</p>



<a name="171400489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171400489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171400489">(Jul 22 2019 at 03:33)</a>:</h4>
<p>any ideas what could be happening?</p>



<a name="171475462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171475462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171475462">(Jul 22 2019 at 22:57)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> <span class="user-mention" data-user-id="120791">@RalfJ</span> ^</p>



<a name="171475518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171475518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171475518">(Jul 22 2019 at 22:58)</a>:</h4>
<p>hard to tell if it's a change to miri or to rustc that caused this.</p>



<a name="171482884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171482884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171482884">(Jul 23 2019 at 01:36)</a>:</h4>
<p>sorry, just saw <a href="https://github.com/rust-lang/rust/pull/62823" target="_blank" title="https://github.com/rust-lang/rust/pull/62823">https://github.com/rust-lang/rust/pull/62823</a></p>



<a name="171482888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171482888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171482888">(Jul 23 2019 at 01:36)</a>:</h4>
<p>seems to be that, ignore me!</p>



<a name="171501559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171501559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171501559">(Jul 23 2019 at 09:08)</a>:</h4>
<p>yes, that should be fixed by the next Miri update :)</p>



<a name="171501599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171501599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171501599">(Jul 23 2019 at 09:09)</a>:</h4>
<p>for the future, "latest Miri" is somewhat ambiguous -- do you mean the latest shipped with rustup, or the latest in the repo? In this case it was rustup I suppose, because last-i-checked the repo is green.</p>



<a name="171522318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171522318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171522318">(Jul 23 2019 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> sorry, I mean HEAD of master branch. maybe using it together with the HEAD of rustc master was the issue. either way, applying your patch locally fixed it, cheers.</p>



<a name="171526349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171526349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171526349">(Jul 23 2019 at 14:57)</a>:</h4>
<p>that patch only updates the version in rustc, which is shipped with rustup</p>



<a name="171526355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171526355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171526355">(Jul 23 2019 at 14:57)</a>:</h4>
<p>it doesnt affect miri master</p>



<a name="171526372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171526372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171526372">(Jul 23 2019 at 14:57)</a>:</h4>
<p>oh wait it also patches libstd</p>



<a name="171526390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171526390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171526390">(Jul 23 2019 at 14:57)</a>:</h4>
<p>I guess you are building miri via <code>x.py</code>? that makes all the difference</p>



<a name="171557840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/189540-t-compiler/wg-mir-opt/topic/miri%20error/near/171557840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Regueiro <a href="https://zulip-archive.rust-lang.org/stream/189540-t-compiler/wg-mir-opt/topic/miri.20error.html#171557840">(Jul 23 2019 at 21:04)</a>:</h4>
<p>I merged the patch manually, so... :-)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
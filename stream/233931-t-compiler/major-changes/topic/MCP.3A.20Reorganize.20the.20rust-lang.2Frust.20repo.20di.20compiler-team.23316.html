<html>
<head><meta charset="utf-8"><title>MCP: Reorganize the rust-lang/rust repo di compiler-team#316 · t-compiler/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/index.html">t-compiler/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html">MCP: Reorganize the rust-lang/rust repo di compiler-team#316</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="201490181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201490181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201490181">(Jun 20 2020 at 18:18)</a>:</h4>
<p>A new proposal has been announced <a href="https://github.com/rust-lang/compiler-team/issues/316">#316</a>. It will be brought up at the next meeting.</p>



<a name="201496574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201496574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201496574">(Jun 20 2020 at 20:43)</a>:</h4>
<p>Moving comment by <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> from gh:</p>
<blockquote>
<p>+1, but this involves too many teams and too much bikeshedding at the same time, starting with librustc_* crates would be more manageable.</p>
</blockquote>



<a name="201496617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201496617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201496617">(Jun 20 2020 at 20:44)</a>:</h4>
<p>For my part, starting with just the <code>compiler/</code> crates and opening another MCP for the next part seems reasonable</p>



<a name="201859292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201859292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201859292">(Jun 24 2020 at 15:03)</a>:</h4>
<p>Incremental ftw</p>



<a name="201859299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201859299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201859299">(Jun 24 2020 at 15:03)</a>:</h4>
<p>I agree that seems fine</p>



<a name="201875001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201875001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201875001">(Jun 24 2020 at 17:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316/near/201859299">said</a>:</p>
<blockquote>
<p>I agree that seems fine</p>
</blockquote>
<p>Sorry, I didn't quite understand what you mean. Do you mean <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> 's idea of splitting seems fine?</p>



<a name="201883173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201883173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201883173">(Jun 24 2020 at 18:09)</a>:</h4>
<p>I would be interested in working on this</p>



<a name="201987598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/201987598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#201987598">(Jun 25 2020 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span class="user-mention" data-user-id="120823">@DPC</span> I've updated the MCP as per feedback. Please let me know what you think.</p>



<a name="202019309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202019309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202019309">(Jun 25 2020 at 20:17)</a>:</h4>
<p>I think we should not touch tests and llvm now.</p>



<a name="202019467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202019467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202019467">(Jun 25 2020 at 20:18)</a>:</h4>
<p>Sorting out compiler tests and non-compiler tests is a separate project, also I'm not sure they should be in the compiler directory?</p>



<a name="202019551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202019551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202019551">(Jun 25 2020 at 20:19)</a>:</h4>
<p>llvm-project should be top-level, IMO.<br>
LLVM is a separate project that is larger that all the compiler crates combined, not a part of any crate's build and is built separately.</p>



<a name="202019782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202019782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202019782">(Jun 25 2020 at 20:21)</a>:</h4>
<p>No idea what to do with "rustc/ -&gt; bin/rustc/", is it an idiomatic directory structure for projects with multiple libraries and a binary?</p>



<a name="202019948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202019948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202019948">(Jun 25 2020 at 20:23)</a>:</h4>
<p>Also see <a href="https://github.com/rust-lang/rust/pull/73265#issuecomment-643311357">https://github.com/rust-lang/rust/pull/73265#issuecomment-643311357</a> regarding naming (std vs compiler).</p>



<a name="202020037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202020037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202020037">(Jun 25 2020 at 20:23)</a>:</h4>
<p>I will say that I am feeling pretty unenthusiastic about having energy to pull together consensus here myself</p>



<a name="202020714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202020714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202020714">(Jun 25 2020 at 20:29)</a>:</h4>
<p>That's why I said "starting with <code>librustc_*</code> crates would be more manageable" in <a href="https://github.com/rust-lang/compiler-team/issues/316#issuecomment-647031988">https://github.com/rust-lang/compiler-team/issues/316#issuecomment-647031988</a> (no llvm, no tests, librustc_* literally).<br>
No consensus building is necessary for them (except the top-level directory name perhaps) (assuming the std PR has landed and set the example).</p>



<a name="202023022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202023022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202023022">(Jun 25 2020 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316/near/202020037">said</a>:</p>
<blockquote>
<p>I will say that I am feeling pretty unenthusiastic about having energy to pull together consensus here myself</p>
</blockquote>
<p>I won't lie... neither am I. But I do think this is a concretely useful thing to do.</p>



<a name="202023090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202023090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202023090">(Jun 25 2020 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123856">Vadim Petrochenkov</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316/near/202019551">said</a>:</p>
<blockquote>
<p>llvm-project should be top-level, IMO.<br>
LLVM is a separate project that is larger that all the compiler crates combined, not a part of any crate's build and is built separately.</p>
</blockquote>
<p>I guess the reason I suggested putting this here is that I associate LLVM with the compiler, and it seems natural to put it with the compiler src</p>



<a name="202023220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202023220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202023220">(Jun 25 2020 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123856">Vadim Petrochenkov</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316/near/202019782">said</a>:</p>
<blockquote>
<p>No idea what to do with "rustc/ -&gt; bin/rustc/", is it an idiomatic directory structure for projects with multiple libraries and a binary?</p>
</blockquote>
<p>Hmm... good question... actually, now that <code>librustc</code> is <code>librustc_middle</code>, we can probably leave the binary as <code>rustc</code></p>



<a name="202023388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202023388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202023388">(Jun 25 2020 at 20:52)</a>:</h4>
<p>So I guess a major questions is <strong>how much do people care about the exact naming?</strong></p>



<a name="202023461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202023461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202023461">(Jun 25 2020 at 20:53)</a>:</h4>
<p>If we do something reasonable and idiomatic enough, does it need to be discussed too much?</p>



<a name="202027963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202027963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202027963">(Jun 25 2020 at 21:33)</a>:</h4>
<p>Well, I care <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="202028325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202028325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202028325">(Jun 25 2020 at 21:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123856">Vadim Petrochenkov</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316/near/202020714">said</a>:</p>
<blockquote>
<p>That's why I said "starting with <code>librustc_*</code> crates would be more manageable" in <a href="https://github.com/rust-lang/compiler-team/issues/316#issuecomment-647031988">https://github.com/rust-lang/compiler-team/issues/316#issuecomment-647031988</a> (no llvm, no tests, librustc_* literally).<br>
No consensus building is necessary for them (except the top-level directory name perhaps) (assuming the std PR has landed and set the example).</p>
</blockquote>
<p>Hm I find it hard to reconcile this with you caring about the exact naming -- it seems like if there's at least one person who does care about exact naming then we do need some level of consensus building? (Or maybe two, I guess).</p>



<a name="202042817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202042817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202042817">(Jun 26 2020 at 00:56)</a>:</h4>
<p><span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> It would be helpful to know more precisely what your concerns are. For example, is it conciseness? idiomaticness? or something else?</p>



<a name="202116146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202116146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202116146">(Jun 26 2020 at 17:02)</a>:</h4>
<p>Yeah, all of that. If I don't like some of proposed changes, I'll try to motivate why.</p>



<a name="202116234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/202116234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#202116234">(Jun 26 2020 at 17:03)</a>:</h4>
<p>Right now I don't have any concerns about moving std and then <code>librustc_*</code> directories using the same scheme as std.</p>



<a name="204090238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204090238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204090238">(Jul 16 2020 at 14:24)</a>:</h4>
<p>so... do we split the MCP or just approve it with the "don't do it all at once" constraint?</p>



<a name="204090604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204090604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204090604">(Jul 16 2020 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123856">Vadim Petrochenkov</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316/near/202019782">said</a>:</p>
<blockquote>
<p>No idea what to do with "rustc/ -&gt; bin/rustc/", is it an idiomatic directory structure for projects with multiple libraries and a binary?</p>
</blockquote>
<p>personally I dislike nested directory structures, especially when there's only 3 files in the folder</p>



<a name="204090654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204090654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204090654">(Jul 16 2020 at 14:27)</a>:</h4>
<p>perf just undid a change like this: <a href="https://github.com/rust-lang/rustc-perf/pull/684">https://github.com/rust-lang/rustc-perf/pull/684</a></p>



<a name="204833741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204833741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204833741">(Jul 23 2020 at 18:17)</a>:</h4>
<p>Sorry for the slow response here... bandwidth has been low</p>



<a name="204833768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204833768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204833768">(Jul 23 2020 at 18:17)</a>:</h4>
<p>I'm planning to close this MCP and open a more targetted one</p>



<a name="204833796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204833796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204833796">(Jul 23 2020 at 18:17)</a>:</h4>
<p>For just the compiler crates</p>



<a name="204833872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204833872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204833872">(Jul 23 2020 at 18:18)</a>:</h4>
<p>But I'm not sure when I will get around to that</p>



<a name="204963574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/204963574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#204963574">(Jul 24 2020 at 20:36)</a>:</h4>
<p>I forget where, but someone mentioned in a PR that having <code>std</code> and <code>compiler</code> seems a little inconsistent: I would expect either (<code>std</code> and <code>rustc</code>) or (<code>library</code> and <code>compiler</code>) or something (with preference for the first option).</p>



<a name="205141556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205141556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205141556">(Jul 27 2020 at 16:55)</a>:</h4>
<p>I'm really happy to see the reorganization changes: would it also be possible to move llvm and compiler-rt into <code>third_party/</code> or something? It's very annoying to grep code with those living where they do.</p>



<a name="205147645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205147645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205147645">(Jul 27 2020 at 17:52)</a>:</h4>
<p><span class="user-mention" data-user-id="132040">@Manish Goregaokar</span> I added a .ignore file for myself so that ripgrep ignores those paths (also stdarch because I don't personally care about it)</p>



<a name="205147727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205147727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205147727">(Jul 27 2020 at 17:52)</a>:</h4>
<p>Ah good plan. Still think it should be separate though :)</p>



<a name="205147735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205147735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205147735">(Jul 27 2020 at 17:52)</a>:</h4>
<p>that doesn't help people who use grep instead of ripgrep <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span> and it's also more setup</p>



<a name="205147757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205147757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205147757">(Jul 27 2020 at 17:52)</a>:</h4>
<p>oh for sure</p>



<a name="205147810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205147810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205147810">(Jul 27 2020 at 17:53)</a>:</h4>
<p>Just saying there's a temporary solution that probably helps a good portion of rustc devs who I presume are probably using ripgrep :)</p>



<a name="205149106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205149106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205149106">(Jul 27 2020 at 18:05)</a>:</h4>
<p>/me tends to use <code>git grep</code>, which can search or not-search submodules with an option.</p>



<a name="205149859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205149859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205149859">(Jul 27 2020 at 18:12)</a>:</h4>
<p>I usually <em>do</em> want to search in submodules like rustfmt and clippy and miri, but not in the LLVM ones. Sometimes <code>-trust</code> is enough, but it's annoying to have to add that all the time or think about whether that's appropriate.</p>



<a name="205195761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205195761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205195761">(Jul 28 2020 at 03:46)</a>:</h4>
<p>I opened a new MCP with the narrower scope of just moving compiler stuff: <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Move.20the.20compiler.20to.20a.20new.20.60compiler.2F.60.20di.E2.80.A6.20compiler-team.23336">https://rust-lang.zulipchat.com/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Move.20the.20compiler.20to.20a.20new.20.60compiler.2F.60.20di.E2.80.A6.20compiler-team.23336</a></p>



<a name="205195768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/MCP%3A%20Reorganize%20the%20rust-lang/rust%20repo%20di%20compiler-team%23316/near/205195768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/MCP.3A.20Reorganize.20the.20rust-lang.2Frust.20repo.20di.20compiler-team.23316.html#205195768">(Jul 28 2020 at 03:46)</a>:</h4>
<p>I added an unresolved question regarding where to put <code>llvm-project</code>, though I like the idea of not putting it with the other compiler stuff for grep-ability</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
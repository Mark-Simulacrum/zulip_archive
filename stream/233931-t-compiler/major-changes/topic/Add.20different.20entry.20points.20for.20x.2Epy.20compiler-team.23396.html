<html>
<head><meta charset="utf-8"><title>Add different entry points for x.py compiler-team#396 · t-compiler/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/index.html">t-compiler/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html">Add different entry points for x.py compiler-team#396</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="221366708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221366708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221366708">(Jan 01 2021 at 20:10)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/compiler-team/issues/396">Add different entry points for x.py #396</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="221366751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221366751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221366751">(Jan 01 2021 at 20:12)</a>:</h4>
<p>previous discussion in <a href="#narrow/stream/131828-t-compiler/topic/different.20entry.20points.20for.20x.2Epy">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/different.20entry.20points.20for.20x.2Epy</a> ; if someone with admin access could combine the streams that would be great.</p>



<a name="221366825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221366825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221366825">(Jan 01 2021 at 20:13)</a>:</h4>
<p>I don't think this is describing the steps completely as I was expecting, the experimental nature and starting with std only is missing. It also has same name for all the scripts, whereas I think different names are indeed better.</p>



<a name="221366883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221366883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221366883">(Jan 01 2021 at 20:14)</a>:</h4>
<p>I updated the names</p>



<a name="221366890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221366890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221366890">(Jan 01 2021 at 20:14)</a>:</h4>
<p>I'll change it to say I'll implement std first</p>



<a name="221366967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221366967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221366967">(Jan 01 2021 at 20:16)</a>:</h4>
<p>done</p>



<a name="221366982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221366982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221366982">(Jan 01 2021 at 20:16)</a>:</h4>
<p>I don't feel super strongly about the naming, happy to bikeshed that</p>



<a name="221372922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221372922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221372922">(Jan 01 2021 at 22:48)</a>:</h4>
<blockquote>
<p>It would be great to have smaller commands that are focused on specific groups of contributors</p>
</blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> to that, but as an alternative, we could also consider things like <code>x.py bikesheds</code> -- like <code>x.py std-addition</code> that builds and tests the appropriate things for that kind of contribution.</p>



<a name="221372939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221372939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221372939">(Jan 01 2021 at 22:49)</a>:</h4>
<p>if you want to use the existing x.py I would rather expand default profiles to have a 'default filter'</p>



<a name="221372945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221372945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221372945">(Jan 01 2021 at 22:49)</a>:</h4>
<p>so that <code>x.py build</code> for <code>profile = "library"</code>, which already defaults to only stage 0, would additionally default to a <code>library/std</code> filter</p>



<a name="221372946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221372946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221372946">(Jan 01 2021 at 22:49)</a>:</h4>
<p>and then we really can give people a command to copy paste</p>



<a name="221372950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221372950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221372950">(Jan 01 2021 at 22:49)</a>:</h4>
<p><a href="#narrow/stream/131828-t-compiler/topic/the.20rustc-dev-guide.20is.20confusing/near/221141303">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/the.20rustc-dev-guide.20is.20confusing/near/221141303</a></p>



<a name="221378606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221378606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221378606">(Jan 02 2021 at 01:41)</a>:</h4>
<p>What do you mean by 'profile'?</p>



<a name="221378643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221378643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221378643">(Jan 02 2021 at 01:42)</a>:</h4>
<p>is that something you would set in <code>config.toml</code>?</p>



<a name="221381930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221381930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221381930">(Jan 02 2021 at 03:32)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> yes, profiles are what <code>x.py setup</code> sets to have persistent state</p>



<a name="221381991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221381991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221381991">(Jan 02 2021 at 03:34)</a>:</h4>
<p>But you can write them manually too. The profiles currently are compiler, library, codegen, and user. I also plan to add <code>tools</code> once <a href="https://github.com/rust-lang/rust/pull/79540">https://github.com/rust-lang/rust/pull/79540</a> is merged.</p>



<a name="221382005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/221382005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#221382005">(Jan 02 2021 at 03:35)</a>:</h4>
<p>(zulip doesn't let me edit this late: "default profiles" is a typo, it should just say "profiles")</p>



<a name="234531962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/234531962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#234531962">(Apr 14 2021 at 16:36)</a>:</h4>
<p>Head-up! As per <a href="https://forge.rust-lang.org/compiler/mcp.html#when-should-major-change-proposals-be-closed">MCP policy</a>, this MCP will soon be closed for inactivity.</p>
<p>Should instead the discussion go on, please don't hesitate to add comments here or on <a href="https://github.com/rust-lang/compiler-team/issues/396">github</a>. <br>
Else, you don't have to do anything, I will take care of closing it soon.</p>



<a name="234532161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/234532161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#234532161">(Apr 14 2021 at 16:37)</a>:</h4>
<p>I think we could make <em>some</em> improvement here. I don't know if it necessarily has to be different entrypoints.</p>



<a name="234532272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/234532272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#234532272">(Apr 14 2021 at 16:38)</a>:</h4>
<p>maybe x.py could be more aggressive about giving warnings/errors if you're doing something that doesn't make sense for the current profile?</p>



<a name="245318368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318368">(Jul 08 2021 at 14:10)</a>:</h4>
<p>@oli do you think the architectural choice of putting the wrapper scripts in subdirectories is the main problem with this?</p>



<a name="245318453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318453">(Jul 08 2021 at 14:11)</a>:</h4>
<p>My  issue with <code>x.py</code> is really that there's no find project root and execute things from ther.</p>



<a name="245318489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318489">(Jul 08 2021 at 14:11)</a>:</h4>
<p>e.g. I end up in <code>/src/tests</code> and want to <code>x.py test ...</code> and it doesn't work.</p>



<a name="245318566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318566">(Jul 08 2021 at 14:12)</a>:</h4>
<p>So this proposal wouldn't help me in any way.</p>



<a name="245318574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318574">(Jul 08 2021 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> in response to your question -- "yes" for me too, I intentionally haven't seconded this. I'm still at least a little uncertain about continuing to expand the flexibility and interfaces to x.py without an owner that can review changes and spend time on it more holistically; I don't really have that ability.</p>



<a name="245318656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318656">(Jul 08 2021 at 14:12)</a>:</h4>
<p>I feel like it's only going half way. Ideally it would be like git or similar tools, they operate relative to their directory, but are aware of the entire repo</p>



<a name="245318789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318789">(Jul 08 2021 at 14:13)</a>:</h4>
<p>like... you would just run <code>x.py test</code> in <code>src/test/ui/consts</code> and it would just run the tests in there. and if you do <code>x.py test issue-43.rs</code> it would just run that test in that folder</p>



<a name="245318809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318809">(Jul 08 2021 at 14:14)</a>:</h4>
<p>similarly for tools and libstd and ...</p>



<a name="245318945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245318945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245318945">(Jul 08 2021 at 14:14)</a>:</h4>
<p>I think in theory you're not wrong, but in practice I at least am very hesitant to move us in such a direction with the current maintenance budget on x.py</p>



<a name="245319005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319005">(Jul 08 2021 at 14:15)</a>:</h4>
<p>does this MCP as written help with that?</p>



<a name="245319028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319028">(Jul 08 2021 at 14:15)</a>:</h4>
<p>will managing it become easier?</p>



<a name="245319061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319061">(Jul 08 2021 at 14:15)</a>:</h4>
<p>no, it's why I didn't second it</p>



<a name="245319127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319127">(Jul 08 2021 at 14:16)</a>:</h4>
<p>I think this MCP is likely to make things harder by adding more modes of use to x.py</p>



<a name="245319146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319146">(Jul 08 2021 at 14:16)</a>:</h4>
<p>as long as the current workflows are not affected, adding more workflows for no cost but a few scripts that forward to the root with arguments seems ok</p>



<a name="245319261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319261">(Jul 08 2021 at 14:17)</a>:</h4>
<p>I think strictly wrapper scripts is not too bad, but it's still adding some complexity, and usually we end up wanting some "special" behavior in my experience once we start differentiating some entrypoint</p>



<a name="245319293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319293">(Jul 08 2021 at 14:17)</a>:</h4>
<p>right, feature creep</p>



<a name="245319305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319305">(Jul 08 2021 at 14:17)</a>:</h4>
<p>followed by maintenance creep</p>



<a name="245319443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319443">(Jul 08 2021 at 14:18)</a>:</h4>
<p>well... I don't think having a few extra mostly-undocument wrapper scripts lying around is problematic...</p>



<a name="245319496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319496">(Jul 08 2021 at 14:19)</a>:</h4>
<p>if it makes ppls lives easier, let's do it</p>



<a name="245319886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245319886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245319886">(Jul 08 2021 at 14:21)</a>:</h4>
<p>I agree the addition seems low cost at first glance, but it feels like it starts peeking into a can of worms :)</p>



<a name="245321134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245321134" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245321134">(Jul 08 2021 at 14:30)</a>:</h4>
<p>the alternative is people maintaining random scripts in their IDE that make their workflow effective, which also isn't great. idk, we can always revisit if it becomes a problem?</p>



<a name="245342282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245342282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245342282">(Jul 08 2021 at 17:08)</a>:</h4>
<p>could you distribute the wrapper script that does this (just search for x.py) with rustup?</p>



<a name="245363776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245363776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245363776">(Jul 08 2021 at 19:59)</a>:</h4>
<p>There's already a wrapper script in-tree in src/tools/x. I guess we could distribute it with rustup but that kind of seems like overkill.</p>



<a name="245364004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245364004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245364004">(Jul 08 2021 at 20:00)</a>:</h4>
<p>Honestly looking back I don't know how useful this idea was, I  like <span class="user-mention" data-user-id="124288">@oli</span>'s idea that x.py is per-directory. But that means people using that currently will have different behavior (I know <span class="user-mention" data-user-id="116083">@pnkfelix</span> uses a bunch of different dirs).</p>



<a name="245364057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245364057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245364057">(Jul 08 2021 at 20:00)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> x test ... works from any directory</p>



<a name="245364251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245364251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245364251">(Jul 08 2021 at 20:02)</a>:</h4>
<p>I'll make sure to file bugs if I find myself hitting issues with it.</p>



<a name="245364528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/245364528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#245364528">(Jul 08 2021 at 20:04)</a>:</h4>
<p>It doesn't do very much, I would be shocked if it had bugs. But anything's possible haha</p>



<a name="246585492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246585492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246585492">(Jul 20 2021 at 13:43)</a>:</h4>
<p>One thing I’ll mention here:</p>



<a name="246585525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246585525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246585525">(Jul 20 2021 at 13:43)</a>:</h4>
<p>We may want to take a more holistic view of how we might revise the build infrastructure</p>



<a name="246586420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246586420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246586420">(Jul 20 2021 at 13:50)</a>:</h4>
<p>(At least, I saw at least one person respond on a poll about “if you wanted to contribute to rustc, but then opted not to, why?”, with the response “x.py”)</p>



<a name="246596350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246596350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246596350">(Jul 20 2021 at 14:34)</a>:</h4>
<p>I have several times just wanted to use <code>cargo build</code> on a crate and would have loved it if some rustup config scheme would have just given me the right stage0 rustc and it would have "just worked" like working on a regular crate</p>



<a name="246618864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246618864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246618864">(Jul 20 2021 at 16:56)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> <code>cd compiler/rustc &amp;&amp; cargo +beta build -p rustc_mir</code></p>



<a name="246618882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246618882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246618882">(Jul 20 2021 at 16:56)</a>:</h4>
<p>(or whatever crate you want)</p>



<a name="246618929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246618929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246618929">(Jul 20 2021 at 16:56)</a>:</h4>
<p>That won't integrate with x.py's build cache though</p>



<a name="246652120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246652120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246652120">(Jul 20 2021 at 21:17)</a>:</h4>
<p>If that more-or-less works, caching aside, that'd be great.</p>



<a name="246662920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246662920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246662920">(Jul 20 2021 at 23:26)</a>:</h4>
<p>hmm, so I take it back, it doesn't work because rustc only supports being built with the in-tree standard library</p>



<a name="246662944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246662944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246662944">(Jul 20 2021 at 23:27)</a>:</h4>
<p>cc <a href="#narrow/stream/131828-t-compiler/topic/Building.20rustc.20with.20beta.20libstd">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/Building.20rustc.20with.20beta.20libstd</a></p>



<a name="246662962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246662962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246662962">(Jul 20 2021 at 23:27)</a>:</h4>
<p><code>cargo +nightly build</code> should work 90% of the time though (it worked for me just now)</p>



<a name="246663232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246663232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246663232">(Jul 20 2021 at 23:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396/near/246585525">said</a>:</p>
<blockquote>
<p>We may want to take a more holistic view of how we might revise the build infrastructure</p>
</blockquote>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> what do you mean by a more holistic view? Were you thinking of doing a survey of how people use x.py or something?</p>



<a name="246663251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/246663251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#246663251">(Jul 20 2021 at 23:31)</a>:</h4>
<p>I get that x.py is hard to use but we can't fix that without making changes</p>



<a name="248688652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/248688652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#248688652">(Aug 07 2021 at 01:54)</a>:</h4>
<p>I have another idea: What about making "rustup"  rustbuild-aware?  By leaving a <code>rust-toolchain</code> file in tree, saying "bootstrap" or something, rustup automatically defers work to x.py, invoking rustbuild from there and dwim.</p>



<a name="248698311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/248698311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#248698311">(Aug 07 2021 at 05:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116458">@Charles Lew</span> that's <a href="https://github.com/rust-lang/rust/issues/76419">https://github.com/rust-lang/rust/issues/76419</a>, but I don't see how it helps: you still need to configure stages somehow, rustup doesn't know stages exist.</p>



<a name="248698484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/248698484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#248698484">(Aug 07 2021 at 05:49)</a>:</h4>
<p>Oh i just meant that instead of putting <code>*.py</code> everywhere, <code>rustup</code> might be able to locate <code>x.py</code> alongside with the workspace <code>Cargo.toml</code>, and rustbuild should be able to infer what to do according to the current directory.</p>



<a name="248698537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/248698537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#248698537">(Aug 07 2021 at 05:50)</a>:</h4>
<p>Or maybe <code>cargo</code> can do this too, i don't know.</p>



<a name="248715481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20different%20entry%20points%20for%20x.py%20compiler-team%23396/near/248715481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396.html#248715481">(Aug 07 2021 at 13:05)</a>:</h4>
<p>I don't see how that could be possible. Rustup does not know what build system you use, for all it knows you could be using make (rust-lang/rust used to a while ago).</p>
<p>Inferring what to do based on the directory seems vaguely fine to me but I do think it will quickly get confusing if you have different config.tomls in different directories.</p>
<p>I suggested always using the top level config.toml a while back but that didn't work either since some people were intentionally using per-directory configs.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
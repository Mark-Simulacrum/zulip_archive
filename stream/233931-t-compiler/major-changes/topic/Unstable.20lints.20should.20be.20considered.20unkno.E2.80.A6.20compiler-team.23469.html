<html>
<head><meta charset="utf-8"><title>Unstable lints should be considered unkno… compiler-team#469 · t-compiler/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/index.html">t-compiler/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html">Unstable lints should be considered unkno… compiler-team#469</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260886743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/260886743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#260886743">(Nov 10 2021 at 01:07)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/compiler-team/issues/469">Unstable lints should be considered unknown #469</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="260974945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/260974945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#260974945">(Nov 10 2021 at 11:13)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> for the general principle that in the stable compiler, a nightly feature should be similar to a non-existent feature.</p>



<a name="260974975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/260974975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#260974975">(Nov 10 2021 at 11:13)</a>:</h4>
<p>People shouldn't become <em>worse</em> off when something has been implemented than when it didn't exist.</p>



<a name="260990887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/260990887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#260990887">(Nov 10 2021 at 13:49)</a>:</h4>
<p>This frustrates me in cargo too, I tried to use whatever the key is for "don't optimize build dependencies" and it was just a warning in old versions, but a hard error on <em>just</em> slightly outdated versions of cargo</p>



<a name="261039559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261039559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261039559">(Nov 10 2021 at 19:12)</a>:</h4>
<p>Wait so the process of upgrading a compiler was actually easier before I fixed up must_not_suspend and make it unstable?</p>



<a name="261040450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261040450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261040450">(Nov 10 2021 at 19:19)</a>:</h4>
<p>essentially yes :(</p>



<a name="261158250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261158250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261158250">(Nov 11 2021 at 16:55)</a>:</h4>
<p>thats brutal <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="261551770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261551770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Koloski <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261551770">(Nov 15 2021 at 20:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116883">@tmandry</span> has <a href="https://github.com/rust-lang/compiler-team/issues/469#issuecomment-969262549">offered to review</a> any changes, so if someone would be willing to second it I can move ahead with this change <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="261962960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261962960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261962960">(Nov 18 2021 at 17:43)</a>:</h4>
<p>I do prefer the first suggested solution here and am willing to second this, but am a bit confused by its description.<br>
Afaict what you want to do is the following:</p>
<p>change the handling of unstable lints to be a special case of the general <code>unknown_lints</code> case, probably by using the same lint but adding a note that the lint is unstable or something. By default <code>allow(unknown_lints)</code> will allow the usage of unstable lints.</p>
<p>I do not understand this section here though: "This has the downside that re-stabilizing the lint will cause a build breakage, but there is an upgrade path out of this and it shouldn't be a problem."</p>
<p>Before re-stabilizing the lint we have both <code>allow(unknown_lints)</code> and a <code>warn/allow(must_not_suspend)</code> or something like that. If we now stabilize <code>must_not_suspend</code> the <code>warn</code> or <code>allow</code> is used again <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> not sure how that would cause build breakage which isn't strictly desirable (e.g. when using <code>deny(must_not_suspend)</code>)</p>



<a name="261966641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261966641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Koloski <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261966641">(Nov 18 2021 at 18:07)</a>:</h4>
<p>Sure, I'll clarify as much as possible and will happily edit the issue to reflect discussion here.</p>
<p>The note about re-stabilizing the lint causing a build breakage is not very clear. It it just meant to acknowledge that stabilizing the lint will bring us back to the original situation. I apologize for a lack of clarity here and will update the issue.</p>



<a name="261967809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261967809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Koloski <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261967809">(Nov 18 2021 at 18:17)</a>:</h4>
<p>Updated now</p>



<a name="261968886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/261968886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#261968886">(Nov 18 2021 at 18:26)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="492">@T-compiler</span>: Proposal <a href="https://github.com/rust-lang/compiler-team/issues/469#issuecomment-973141095">#469</a> has been seconded, and will be approved in 10 days if no objections are raised.</p>



<a name="263361428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Unstable%20lints%20should%20be%20considered%20unkno%E2%80%A6%20compiler-team%23469/near/263361428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Unstable.20lints.20should.20be.20considered.20unkno.E2.80.A6.20compiler-team.23469.html#263361428">(Dec 01 2021 at 21:40)</a>:</h4>
<p>This proposal has been accepted: <a href="https://github.com/rust-lang/compiler-team/issues/469">#469</a>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Rename `rustc_ty` compiler-team#387 · t-compiler/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/index.html">t-compiler/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html">Rename `rustc_ty` compiler-team#387</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="217178799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217178799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217178799">(Nov 18 2020 at 18:44)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/compiler-team/issues/387">Rename <code>rustc_ty</code> #387</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="217179111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217179111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217179111">(Nov 18 2020 at 18:47)</a>:</h4>
<p>what should it be renamed to? <code>rustc_ty_utils</code>? does any part of the compiler directly use that crate or is it just used through queries?</p>



<a name="217179294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217179294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217179294">(Nov 18 2020 at 18:49)</a>:</h4>
<p>It looks like only <a href="https://github.com/rust-lang/rust/blob/da897dfb6daa268a965d2d73620316ba56020a19/compiler/rustc_interface/Cargo.toml#L44"><code>rustc_interface</code> directly depends on it</a></p>



<a name="217179528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217179528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217179528">(Nov 18 2020 at 18:50)</a>:</h4>
<p>And only to call its <code>provide</code> function</p>



<a name="217179729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217179729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217179729">(Nov 18 2020 at 18:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="211727">Jonas Schievink</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387/near/217179111">said</a>:</p>
<blockquote>
<p>what should it be renamed to? <code>rustc_ty_utils</code>?</p>
</blockquote>
<p><code>rustc_ty_utils</code> is also what I had in mind</p>



<a name="217180794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217180794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217180794">(Nov 18 2020 at 19:00)</a>:</h4>
<p>is there any reason not to make the <code>ty</code> module you're extracting out of <code>rustc_middle</code> also include what's currently <code>rustc_ty</code>?</p>



<a name="217180831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217180831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217180831">(Nov 18 2020 at 19:00)</a>:</h4>
<p>or maybe just move it into <code>rustc_interface</code> directly?</p>



<a name="217183435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217183435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217183435">(Nov 18 2020 at 19:19)</a>:</h4>
<p><code>rustc_ty</code> depends on <code>rustc_middle</code>. <code>rustc_ty_library</code> (or <code>rustc_ty</code> in the future) will be the opposite: <code>rustc_middle</code> will depend on <em>it</em></p>



<a name="217185260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217185260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217185260">(Nov 18 2020 at 19:32)</a>:</h4>
<p>Side note: hopefully extracting the type library will speed up bootstrap times!</p>



<a name="217188231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217188231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217188231">(Nov 18 2020 at 19:56)</a>:</h4>
<p>That's an added bonus, yes</p>



<a name="217195389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217195389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217195389">(Nov 18 2020 at 20:56)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> The end goal is to have a library that’s independent from rustc, this <code>rustc_ty_library</code> is just a step forward</p>



<a name="217195976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217195976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217195976">(Nov 18 2020 at 21:00)</a>:</h4>
<p>Wait I'm confused, how can rustc_ty (the new one you're proposing) be independent if it depends on rustc_middle?</p>



<a name="217196314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196314">(Nov 18 2020 at 21:03)</a>:</h4>
<p>The whole thing is to make it independent <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="217196399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196399">(Nov 18 2020 at 21:03)</a>:</h4>
<p>I am really not following the proposal then, sorry. What is it suggesting and what is the goal?</p>



<a name="217196507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196507">(Nov 18 2020 at 21:04)</a>:</h4>
<p>Also to be clear it’s not what I’m proposing, it’s what’s been on the WG-traits’s mind for a long time</p>



<a name="217196555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196555">(Nov 18 2020 at 21:04)</a>:</h4>
<p>This proposal is just proposing to rename the current <code>rustc_ty</code> to something else</p>



<a name="217196665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196665">(Nov 18 2020 at 21:05)</a>:</h4>
<p>If the long term goal is to have a shared library for data types, maybe it should be named <code>rustc_ty_data</code></p>



<a name="217196697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196697">(Nov 18 2020 at 21:06)</a>:</h4>
<p>And then rustc_ty doesn't need to be renamed</p>



<a name="217196795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196795">(Nov 18 2020 at 21:06)</a>:</h4>
<p>Or there could be rustc_ty_utils and rustc_ty_data maybe, but turning one crate into another sounds very confusing</p>



<a name="217196886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217196886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217196886">(Nov 18 2020 at 21:07)</a>:</h4>
<p>Also honestly I think rustc_ty is a confusing name (for the current library) regardless</p>



<a name="217197888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217197888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217197888">(Nov 18 2020 at 21:17)</a>:</h4>
<p>yeah changing it to <code>rustc_ty_utils</code> sounds like an all-around win now that I know what it does</p>



<a name="217201569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217201569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217201569">(Nov 18 2020 at 21:52)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> if you're still confused, let me see if I can clarify</p>



<a name="217201837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217201837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217201837">(Nov 18 2020 at 21:55)</a>:</h4>
<p>So, the eventual goal is to have Chalk and rustc have a shared type library (and it'll will probably look close to what <code>chalk-ir</code> has today). While we haven't completely decided yet where exactly that will live, wg-traits has decided to start moving things out of <code>rustc_middle</code> into an independent crate and <code>rustc_middle</code> will depend on it.</p>



<a name="217298730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217298730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217298730">(Nov 19 2020 at 16:58)</a>:</h4>
<p>Hmm</p>



<a name="217298802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217298802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217298802">(Nov 19 2020 at 16:58)</a>:</h4>
<p><code>rustc_ty</code> feels like the name I <em>expect</em> but I hear folks saying it's confusing</p>



<a name="217298886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217298886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217298886">(Nov 19 2020 at 16:59)</a>:</h4>
<p>well the confusing thing is that there's already a crate with that name</p>



<a name="217299044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299044">(Nov 19 2020 at 17:00)</a>:</h4>
<p>I was going to suggest that a general type library could just be rust_ty (note: no c) but that seems like it'd be very confusing</p>



<a name="217299104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299104">(Nov 19 2020 at 17:00)</a>:</h4>
<p>(since presumably the same general types could be used in rust-analyzer and such, as we explicitly aim at "generality" here)</p>



<a name="217299179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299179">(Nov 19 2020 at 17:01)</a>:</h4>
<p>I was wondering about the <code>rustc_</code> prefix</p>



<a name="217299215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299215">(Nov 19 2020 at 17:01)</a>:</h4>
<p>this is aiming to be a "reusable abstraction", but ultimately it <em>is</em> "the rust compiler's representation of types"</p>



<a name="217299223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299223">(Nov 19 2020 at 17:01)</a>:</h4>
<p>so rustc_ seems ok</p>



<a name="217299260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299260">(Nov 19 2020 at 17:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387/near/217298886">said</a>:</p>
<blockquote>
<p>well the confusing thing is that there's already a crate with that name</p>
</blockquote>
<p>what does this crate do today?</p>



<a name="217299317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299317">(Nov 19 2020 at 17:02)</a>:</h4>
<p>it's also true that this library will cover things that are not types</p>



<a name="217299323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299323">(Nov 19 2020 at 17:02)</a>:</h4>
<p>e.g., trait references</p>



<a name="217299360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299360">(Nov 19 2020 at 17:02)</a>:</h4>
<p>so maybe there's a more general name, but I'm not sure what it is</p>



<a name="217299365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217299365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217299365">(Nov 19 2020 at 17:02)</a>:</h4>
<p>"terms"</p>



<a name="217326275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217326275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217326275">(Nov 19 2020 at 20:30)</a>:</h4>
<p>Okay, so let's make a solid plan going forward. It sounds like there's good support <em>here</em> to rename <code>rustc_ty</code> to <code>rustc_ty_utils</code>. Can someone second this MCP? And <span class="user-mention" data-user-id="255061">@Léo Lanteri Thauvin</span> maybe make a PR for that?</p>



<a name="217326333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217326333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217326333">(Nov 19 2020 at 20:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> can you look at <a href="https://github.com/rust-lang/rust/issues/79169">#79169</a>, particularly in regards to the <code>rustc_data_structures</code> comment</p>



<a name="217326365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217326365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217326365">(Nov 19 2020 at 20:31)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="492">@T-compiler</span>: Proposal <a href="https://github.com/rust-lang/compiler-team/issues/387#issuecomment-730620179">#387</a> has been seconded, and will be approved in 10 days if no objections are raised.</p>



<a name="217326395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217326395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217326395">(Nov 19 2020 at 20:31)</a>:</h4>
<p>rustc_ty_utils seems reasonable and uncontroversial, seconded</p>



<a name="217327692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217327692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217327692">(Nov 19 2020 at 20:42)</a>:</h4>
<p>Filed <a href="https://github.com/rust-lang/rust/issues/79212">#79212</a></p>



<a name="217327726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217327726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217327726">(Nov 19 2020 at 20:43)</a>:</h4>
<p>(I don't even think this really needs an MCP if the only use is in rustc_interface)</p>



<a name="217328964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217328964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217328964">(Nov 19 2020 at 20:54)</a>:</h4>
<p>Okay yeah that diff is tiny, and according to <a href="https://forge.rust-lang.org/compiler/mcp.html#what-constitutes-a-major-change">https://forge.rust-lang.org/compiler/mcp.html#what-constitutes-a-major-change</a> no MCP is required. I'll r+ once CI is fixed.</p>



<a name="217329863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217329863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217329863">(Nov 19 2020 at 21:02)</a>:</h4>
<p>Should I just close the MCP?</p>



<a name="217330032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217330032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217330032">(Nov 19 2020 at 21:04)</a>:</h4>
<p>I think so?</p>



<a name="217333979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217333979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217333979">(Nov 19 2020 at 21:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387/near/217326333">said</a>:</p>
<blockquote>
<p>can you look at <a href="https://github.com/rust-lang/rust/issues/79169">#79169</a>, particularly in regards to the <code>rustc_data_structures</code> comment</p>
</blockquote>
<p>I saw it. I feel like that crate probably wants to be broken up.</p>



<a name="217337427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217337427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217337427">(Nov 19 2020 at 22:07)</a>:</h4>
<p>how about naming it <code>rust-typesystem</code>?</p>



<a name="217337436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217337436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217337436">(Nov 19 2020 at 22:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> yeah, I feel like eventually we should split out a minimal set of things needed from that crate, and make it a dependency of chalk-ir</p>



<a name="217412936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217412936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217412936">(Nov 20 2020 at 15:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="229517">Jacob Lifshay</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387/near/217337427">said</a>:</p>
<blockquote>
<p>how about naming it <code>rust-typesystem</code>?</p>
</blockquote>
<p>I...kind of like this</p>



<a name="217412959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217412959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217412959">(Nov 20 2020 at 15:12)</a>:</h4>
<p>it's not really the whole <em>type system</em> but it is definitely the "IR" for the type system</p>



<a name="217412974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/217412974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#217412974">(Nov 20 2020 at 15:12)</a>:</h4>
<p>type_ir might be another possible name</p>



<a name="218501850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218501850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218501850">(Dec 02 2020 at 00:36)</a>:</h4>
<p>Okay, so I'm trying to think about how to move forward with this. Specifically with regards to <code>rustc_data_structures</code> and other potential new required dependencies for <code>chalk-ir</code></p>



<a name="218501868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218501868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218501868">(Dec 02 2020 at 00:37)</a>:</h4>
<p>So, from <code>rustc_data_structures</code>, we will probably need <code>HashStable</code>. I don't know what else.</p>



<a name="218501982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218501982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218501982">(Dec 02 2020 at 00:38)</a>:</h4>
<p>But, we also probably need at least some of <code>rustc_serialize</code> because of <code>TyEncodable</code>/<code>TyDecodable</code></p>



<a name="218501983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218501983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218501983">(Dec 02 2020 at 00:38)</a>:</h4>
<p>IIRC the ObligationForest is only used in <code>rustc_trait_selection</code>, right? Does it make sense to move it there?</p>



<a name="218502062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502062">(Dec 02 2020 at 00:39)</a>:</h4>
<p>Well, I don't know how far we'll get trying to move things <em>out</em> of <code>rustc_data_structures</code> into other parts of rustc</p>



<a name="218502129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502129">(Dec 02 2020 at 00:40)</a>:</h4>
<p>If anything, I imagine we'll probably want to move like a minimal set of things to a crate that <code>chalk-ir</code> depends on</p>



<a name="218502145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502145">(Dec 02 2020 at 00:40)</a>:</h4>
<p>If <code>HashStable</code> is the only thing we need from there, that's easy</p>



<a name="218502160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502160">(Dec 02 2020 at 00:40)</a>:</h4>
<p><code>FxHashSet</code>/<code>FxHashMap</code> are actually in <code>rustc_hash</code>, and we already depend on that</p>



<a name="218502197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502197">(Dec 02 2020 at 00:41)</a>:</h4>
<p>Something farther down the line to maybe thing about is <code>ParamEnv</code>, which uses <code>CopyTaggedPtr</code></p>



<a name="218502811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502811">(Dec 02 2020 at 00:50)</a>:</h4>
<p>Actually...could we just move <code>HashStable</code> into <code>rustc_hash</code>?</p>



<a name="218502885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502885">(Dec 02 2020 at 00:51)</a>:</h4>
<p>It shouldn't make <em>any</em> difference for rustc itself, since everything refers to it through <code>rustc_data_structure</code> reexports</p>



<a name="218502931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502931">(Dec 02 2020 at 00:52)</a>:</h4>
<p>It would make anyone who is currently using rustc_hash start to pull in a bit more</p>



<a name="218502936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502936">(Dec 02 2020 at 00:52)</a>:</h4>
<p>but, that's probably okay</p>



<a name="218502993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218502993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218502993">(Dec 02 2020 at 00:53)</a>:</h4>
<p>huh, there's a surprising number of people using rustc_hash <a href="https://crates.io/crates/rustc_hash/reverse_dependencies">https://crates.io/crates/rustc_hash/reverse_dependencies</a></p>



<a name="218503018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503018" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503018">(Dec 02 2020 at 00:53)</a>:</h4>
<p>but like, I wouldn't expect <code>HashStable</code> to be giant, if it is we can always make it a cargo feature or something</p>



<a name="218503214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503214">(Dec 02 2020 at 00:56)</a>:</h4>
<p>huh TIL about that reverse deps feature</p>



<a name="218503242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503242">(Dec 02 2020 at 00:56)</a>:</h4>
<p>yeah it's useful :)</p>



<a name="218503247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503247">(Dec 02 2020 at 00:56)</a>:</h4>
<p>Just looking at the top ones:</p>



<a name="218503254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503254">(Dec 02 2020 at 00:57)</a>:</h4>
<p>hashbrown only uses it in a test</p>



<a name="218503286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503286">(Dec 02 2020 at 00:57)</a>:</h4>
<p>bindgen actually uses it</p>



<a name="218503354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503354">(Dec 02 2020 at 00:58)</a>:</h4>
<p>Anyways, yeah, I'm gonna go ahead and open a PR for this. I'll put it under a feature gate,</p>



<a name="218503994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218503994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218503994">(Dec 02 2020 at 01:07)</a>:</h4>
<p>Oh but <code>rustc_hash</code> is so tiny :( and not even in-tree</p>



<a name="218590612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218590612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218590612">(Dec 02 2020 at 17:29)</a>:</h4>
<p>So, who actually "maintains" rustc-hash? I.e. can make the decision whether or not it's okay to expand it to include the hash_stable mod from rustc_data_structures?</p>



<a name="218590677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218590677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218590677">(Dec 02 2020 at 17:29)</a>:</h4>
<p>According to <a href="http://crates.io">crates.io</a> it's <code>T-core</code> and <code>T-compiler</code></p>



<a name="218590787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218590787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218590787">(Dec 02 2020 at 17:30)</a>:</h4>
<p>Do you think this warrants a T-compiler MCP?</p>



<a name="218591218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218591218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218591218">(Dec 02 2020 at 17:33)</a>:</h4>
<p>Maybe?</p>



<a name="218591578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218591578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218591578">(Dec 02 2020 at 17:35)</a>:</h4>
<p>As much as I <em>like</em> the MCP process, I feel like to a certain extent, we should maybe just get a bit broader approval for the ty library related things. We've already sort of discussed it at length in wg-traits. This in particular seems to be more a "just check in with relevant people" sort of thing. But I don't know</p>



<a name="218591687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218591687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218591687">(Dec 02 2020 at 17:36)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116009">@nikomatsakis</span> since you did the initial commits of rustc-hash, and are obviously relevant for everything else</p>



<a name="218591828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218591828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218591828">(Dec 02 2020 at 17:37)</a>:</h4>
<p><em>In the meantime</em>, <span class="user-mention" data-user-id="255061">@Léo Lanteri Thauvin</span> can you adjust your type library PR for two things:</p>



<a name="218591884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218591884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218591884">(Dec 02 2020 at 17:37)</a>:</h4>
<ul>
<li>Change the name from <code>rustc_type_library</code> to <code>rustc_type_ir</code></li>
</ul>



<a name="218591978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218591978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218591978">(Dec 02 2020 at 17:38)</a>:</h4>
<ul>
<li>Make it depend on <code>rustc_data_structures</code> and put the relevant <code>HashStable</code> impls there</li>
</ul>



<a name="218592025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592025">(Dec 02 2020 at 17:38)</a>:</h4>
<p>Sure</p>



<a name="218592036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592036">(Dec 02 2020 at 17:38)</a>:</h4>
<p>I figure that'll get split at <em>some</em> point in <em>some</em> way, but for now it's fine to start</p>



<a name="218592433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592433">(Dec 02 2020 at 17:41)</a>:</h4>
<p>(This next statement is opinion and not necessarily what we should do) You could also reexport all of that library under <code>rustc_middle::ty::ir</code></p>



<a name="218592463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592463">(Dec 02 2020 at 17:42)</a>:</h4>
<p>So instead of <code>ty::INNERMOST</code> you could do <code>ty::ir::INNERMOST</code></p>



<a name="218592586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592586">(Dec 02 2020 at 17:42)</a>:</h4>
<p>(Though you could just as easily reexport at <code>rustc_middle::ty</code> and not change most code)</p>



<a name="218592668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592668">(Dec 02 2020 at 17:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387/near/218592463">said</a>:</p>
<blockquote>
<p>So instead of <code>ty::INNERMOST</code> you could do <code>ty::ir::INNERMOST</code></p>
</blockquote>
<p>Seems a bit lengthy to me though, but <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="218592736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592736">(Dec 02 2020 at 17:43)</a>:</h4>
<p>Yeah, that's my concern too. For now, can you just reexport all at <code>rustc_middle::ty</code>?</p>



<a name="218592752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592752">(Dec 02 2020 at 17:43)</a>:</h4>
<p>So almost all code doesn't change</p>



<a name="218592795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218592795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218592795">(Dec 02 2020 at 17:44)</a>:</h4>
<p>Then at some future date, we can remove that reexport</p>



<a name="218618194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Rename%20%60rustc_ty%60%20compiler-team%23387/near/218618194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Rename.20.60rustc_ty.60.20compiler-team.23387.html#218618194">(Dec 02 2020 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> if you get a chance, can you take a look at <a href="https://github.com/rust-lang/rust/issues/79169">#79169</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
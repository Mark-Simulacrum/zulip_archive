<html>
<head><meta charset="utf-8"><title>Add a weak warning lint level compiler-team#509 · t-compiler/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/index.html">t-compiler/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html">Add a weak warning lint level compiler-team#509</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278706630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278706630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278706630">(Apr 12 2022 at 15:08)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/compiler-team/issues/509">Add a weak warning lint level #509</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="278706878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278706878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278706878">(Apr 12 2022 at 15:10)</a>:</h4>
<p>Do you have an example lint that would benefit from this?</p>



<a name="278706910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278706910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278706910">(Apr 12 2022 at 15:10)</a>:</h4>
<blockquote>
<p>The rationale is that people do not want the warnings to occupy the terminal (when compiling/running), but still have them displayed in editors.</p>
</blockquote>
<p>Isn't there already a way to do this? I'm pretty sure rustfix uses this.</p>



<a name="278707443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278707443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278707443">(Apr 12 2022 at 15:13)</a>:</h4>
<p>I think there is an alternative way to do this, yeah. People can just use <code>-A some_lint</code> for cli arguments to avoid displaying the warnings.</p>



<a name="278707458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278707458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278707458">(Apr 12 2022 at 15:13)</a>:</h4>
<p>ah yeah here we go <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_errors/diagnostic/struct.Diagnostic.html#method.tool_only_span_suggestion">https://doc.rust-lang.org/nightly/nightly-rustc/rustc_errors/diagnostic/struct.Diagnostic.html#method.tool_only_span_suggestion</a></p>



<a name="278707547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278707547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278707547">(Apr 12 2022 at 15:14)</a>:</h4>
<p>this is not configurable for users</p>



<a name="278707676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278707676" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278707676">(Apr 12 2022 at 15:15)</a>:</h4>
<p>ah, I missed that you also want to add <code>#![weak_warn(LINTS_OR_LINT_GROUPS)]</code> (that should just be behind a feature gate IMO, not a <code>-Zflag</code>)</p>



<a name="278707980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278707980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278707980">(Apr 12 2022 at 15:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361356">fee1-dead</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509/near/278707443">said</a>:</p>
<blockquote>
<p>I think there is an alternative way to do this, yeah. People can just use <code>-A some_lint</code> for cli arguments to avoid displaying the warnings.</p>
</blockquote>
<p>yeah, or if they don't want to have to configure cargo they can use <code>#![allow(some_lint)]</code> and then configure rust-analyzer to use <code>-Wsome_lint</code></p>



<a name="278707994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278707994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278707994">(Apr 12 2022 at 15:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125294">Aaron Hill</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509/near/278706878">said</a>:</p>
<blockquote>
<p>Do you have an example lint that would benefit from this?</p>
</blockquote>
<p>I can't think of one. I remember people suggesting info lints for clippy but that seems orthogonal with this.</p>
<p>I think that I just want something "in between" <code>allow</code>and <code>warn</code>. I want to be reminded that there are unused fields, but I don't want the compile to yell at me and highlight all the unused fields I have declared.</p>



<a name="278708024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708024">(Apr 12 2022 at 15:17)</a>:</h4>
<blockquote>
<p>I want to be reminded that there are unused fields, but I don't want the compile to yell at me and highlight all the unused fields I have declared.</p>
</blockquote>
<p><code>cargo check -q</code></p>



<a name="278708180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708180">(Apr 12 2022 at 15:18)</a>:</h4>
<p><code>bacon</code> also has this built-in, it will collapse warnings by default <a href="https://github.com/Canop/bacon">https://github.com/Canop/bacon</a></p>



<a name="278708297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708297">(Apr 12 2022 at 15:19)</a>:</h4>
<p>I tried <code>cargo check -q</code> and it doesn't hide warnings</p>



<a name="278708360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708360">(Apr 12 2022 at 15:19)</a>:</h4>
<p>hmm, I'm trying to remember how I did this before, I could have sworn there's a flag for one-line warnings</p>



<a name="278708377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708377">(Apr 12 2022 at 15:19)</a>:</h4>
<p>I want to consider some warnings as more serious and some as less.</p>



<a name="278708405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708405">(Apr 12 2022 at 15:19)</a>:</h4>
<p>ah, <code>--error-format short</code></p>



<a name="278708581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708581">(Apr 12 2022 at 15:20)</a>:</h4>
<p>You mean <code>--message-format short</code>? Still doesn't work</p>



<a name="278708625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708625">(Apr 12 2022 at 15:21)</a>:</h4>
<p>no. <code>RUSTFLAGS="--error-format short"</code></p>



<a name="278708664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708664">(Apr 12 2022 at 15:21)</a>:</h4>
<p>but yeah it doesn't do exactly what you're asking, it's for all warnings</p>



<a name="278708826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708826">(Apr 12 2022 at 15:22)</a>:</h4>
<p>cargo won't support this. It says "error: Option 'error-format' given more than once"</p>



<a name="278708878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708878">(Apr 12 2022 at 15:22)</a>:</h4>
<p>anyways I'll go offline now. I think I have made my point</p>



<a name="278708904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278708904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278708904">(Apr 12 2022 at 15:23)</a>:</h4>
<p>Is "weak warning" even the right thing? In a previous discussion it was suggested to add an info level instead.</p>



<a name="278718146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%20a%20weak%20warning%20lint%20level%20compiler-team%23509/near/278718146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/Add.20a.20weak.20warning.20lint.20level.20compiler-team.23509.html#278718146">(Apr 12 2022 at 16:34)</a>:</h4>
<p>I don't think it makes sense to implement this until we have at least one example of a lint that would benefit from it</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
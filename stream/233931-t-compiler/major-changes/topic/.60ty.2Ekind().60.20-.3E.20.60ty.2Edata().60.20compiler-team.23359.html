<html>
<head><meta charset="utf-8"><title>`ty.kind()` -&gt; `ty.data()` compiler-team#359 · t-compiler/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/index.html">t-compiler/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html">`ty.kind()` -&gt; `ty.data()` compiler-team#359</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="210184490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/210184490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#210184490">(Sep 15 2020 at 20:16)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/compiler-team/issues/359"><code>ty.kind()</code> -&gt; <code>ty.data()</code> #359</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="210189534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/210189534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#210189534">(Sep 15 2020 at 20:57)</a>:</h4>
<p>The convention is currently to have <code>X</code> and <code>XKind</code> when you have an enum where one or more fields are shared between enum variants. Those are placed in <code>X</code> together with a field named <code>kind</code> which is an <code>XKind</code> enum. <code>Ty</code>/<code>TyKind</code> is an example of this. <code>TyS</code> has a <code>flags</code> and <code>outer_exclusive_binder</code> field in addition to kind. If you change <code>TyKind</code>, you should also change all other uses of <code>XKind</code>.</p>



<a name="210286601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/210286601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#210286601">(Sep 16 2020 at 16:26)</a>:</h4>
<p>This is a good point! Just searching through rustc, you find a <em>lot</em> of <code>XKind</code>. But, I actually don't think it makes sense to change most of them.</p>



<a name="210286833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/210286833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#210286833">(Sep 16 2020 at 16:28)</a>:</h4>
<p>For <code>Ty</code>, <code>Region</code>, and <code>Const</code>, we actually expect these to be <em>interned</em>, whereas the others I don't think so</p>



<a name="210286956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/210286956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#210286956">(Sep 16 2020 at 16:29)</a>:</h4>
<p>It's a <em>little</em> weird for <code>TyS</code> right now, since we intern <em>that</em>, not <code>TyKind</code> (compared to Chalk, where we don't track flags or outer_exclusive_binder at all right now)</p>



<a name="210394155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/210394155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#210394155">(Sep 17 2020 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> Yes, I agree it'd be best to change it consistently, and to be honest I'd be ok with that.</p>



<a name="210394226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/210394226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#210394226">(Sep 17 2020 at 14:04)</a>:</h4>
<p>The convention doesn't scale to <em>interning</em>, basically, which is "similar but different"</p>



<a name="211681896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211681896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211681896">(Sep 29 2020 at 20:46)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="119009">@eddyb</span> -- any thoughts on this? maybe you want to second? or object? :)</p>



<a name="211681934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211681934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211681934">(Sep 29 2020 at 20:46)</a>:</h4>
<p>I guess we should settle whether we are <em>just changing interned things</em> or <em>all enums</em></p>



<a name="211681943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211681943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211681943">(Sep 29 2020 at 20:46)</a>:</h4>
<p>I'd be inclined to the former</p>



<a name="211681963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211681963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211681963">(Sep 29 2020 at 20:47)</a>:</h4>
<p>I think the former makes sense</p>



<a name="211923877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211923877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211923877">(Oct 01 2020 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I don't mind it either way</p>



<a name="211923894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211923894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211923894">(Oct 01 2020 at 15:02)</a>:</h4>
<p>as long as it's not <code>sty</code> :P</p>



<a name="211926957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211926957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211926957">(Oct 01 2020 at 15:20)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> then second it :)</p>



<a name="211927178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211927178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211927178">(Oct 01 2020 at 15:22)</a>:</h4>
<p>my preference is being able to say <code>Ty::Foo</code> instead of <code>TyKind::Foo</code> or <code>TyData::Foo</code></p>



<a name="211927215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211927215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211927215">(Oct 01 2020 at 15:22)</a>:</h4>
<p>but none seem bothersome</p>



<a name="211927472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/211927472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#211927472">(Oct 01 2020 at 15:24)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="492">@T-compiler</span>: Proposal <a href="https://github.com/rust-lang/compiler-team/issues/359#issuecomment-702212107">#359</a> has been seconded, and will be approved in 10 days if no objections are raised.</p>



<a name="212908740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212908740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212908740">(Oct 10 2020 at 10:03)</a>:</h4>
<blockquote>
<p>If you change TyKind, you should also change all other uses of XKind.</p>
</blockquote>
<p>That would be enormous churn.</p>



<a name="212908781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212908781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212908781">(Oct 10 2020 at 10:04)</a>:</h4>
<p>Why is the property of being interned is important for naming here?</p>



<a name="212908931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212908931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212908931">(Oct 10 2020 at 10:09)</a>:</h4>
<p>I'm in favor of keeping <code>TyKind</code> because everything else is <code>FooKind</code>, it brings inconsistency, and the motivation for renaming is not strong.<br>
(I don't usually work with compiler parts where it's used though.)</p>



<a name="212909066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212909066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212909066">(Oct 10 2020 at 10:13)</a>:</h4>
<p>I'm talking about <a href="https://github.com/rust-lang/rust/issues/77768">#77768</a> specifically which renames <code>enum TyKind</code> to <code>enum TyData</code>, perhaps some future changes that I'm not aware of are supposed to turn it from a regression into an improvement?</p>



<a name="212909243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212909243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212909243">(Oct 10 2020 at 10:18)</a>:</h4>
<p>If there are plans to introduce some <code>trait GetFromTheInternedThingToDataThatWasInterned { fn data() -&gt; Self::Assoc; }</code> like <a href="https://github.com/rust-lang/compiler-team/issues/359">https://github.com/rust-lang/compiler-team/issues/359</a> tells, then the trait's <code>fn data</code> can still return <code>.kind</code> for specific instances?</p>



<a name="212912922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212912922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pachi <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212912922">(Oct 10 2020 at 12:02)</a>:</h4>
<p>AFAICT, it's trying to make rustc and chalk naming consistent.</p>



<a name="212916863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212916863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212916863">(Oct 10 2020 at 13:44)</a>:</h4>
<p>The end goal is to have a shared type library, this was a bikeshed between TyKind in rustc and TyData in chalk</p>



<a name="212917155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212917155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212917155">(Oct 10 2020 at 13:52)</a>:</h4>
<p>seems like it would be less churn to rename <code>TyData</code> -&gt; <code>TyKind</code> in chalk</p>



<a name="212917426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212917426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212917426">(Oct 10 2020 at 13:59)</a>:</h4>
<p>I agree with <span class="user-mention silent" data-user-id="123856">Vadim Petrochenkov</span> that I don't really see much benefit here</p>



<a name="212918554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212918554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212918554">(Oct 10 2020 at 14:29)</a>:</h4>
<p>So, the eventual goal is that it's not just <code>TyKind</code> that gets "interned" (I put this in quotes because there are many things that are actually interned, but I'm specifically talking about interned, <em>with respect to the shared type library</em>).If you look at chalk-ir, which we imagine we look something like the eventual shared type library, you'll find the <code>Interner</code> trait. This knows about multiple types of interned data: tys, regions, <em>substitutions</em>, etc. The point of this is that while <code>TyKind</code> -&gt; <code>TyData</code> may not make a ton of sense in isolation, it makes much more sense when you consider the general pattern: you wouldn't necessarily call it <code>SubstitutionKind</code>. I can understand that this seems like churn, but there is a goal here.</p>



<a name="212918606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212918606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212918606">(Oct 10 2020 at 14:30)</a>:</h4>
<p>Another point to make: I would argue that comparing <code>TyKind</code> to all the other "Kind"s is not completely fair, <em>if you consider that only a very small subset of these are interned</em></p>



<a name="212919016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212919016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212919016">(Oct 10 2020 at 14:40)</a>:</h4>
<p>I guess my question is why 'TyData' is more clear than 'TyKind'. I don't know what interning has to do with it.</p>



<a name="212919756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212919756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212919756">(Oct 10 2020 at 15:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123856">Vadim Petrochenkov</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359/near/212908931">said</a>:</p>
<blockquote>
<p>I'm in favor of keeping <code>TyKind</code> because everything else is <code>FooKind</code>, it brings inconsistency, and the motivation for renaming is not strong.<br>
(I don't usually work with compiler parts where it's used though.)</p>
</blockquote>
<p>Also, <em>maybe</em>, if we aim to have a shared type library, the rest of the rustc internals should not matter</p>



<a name="212920768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212920768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212920768">(Oct 10 2020 at 15:27)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> <code>TyData</code> is not necessarily more (or less imo) clear than <code>TyKind</code> in isolation, but in terms of the expected shared type library, its consist with the other things that we want to be a part of that. "Interning" is..maybe not the best word choice. But the chalk-ir <code>Interner</code> is the trait that "keeps trait of" all those parts.</p>



<a name="212920827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212920827" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212920827">(Oct 10 2020 at 15:29)</a>:</h4>
<p><a href="https://rust-lang.github.io/chalk/book/types/role_of_interner.html?highlight=interner#the-role-of-the-interner">https://rust-lang.github.io/chalk/book/types/role_of_interner.html?highlight=interner#the-role-of-the-interner</a></p>



<a name="212921857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212921857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212921857">(Oct 10 2020 at 15:55)</a>:</h4>
<p>I see, it's a "data" in generic interner context</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Interner</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">InternedTy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyRef</span><span class="o">&lt;</span><span class="n">TyKind</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">TyData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TyKind</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">intern_ty</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">data</span>: <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">TyData</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">InternedTy</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">ty_data</span><span class="p">(</span><span class="n">data</span>: <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">InternedTy</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">TyData</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="212921906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212921906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212921906">(Oct 10 2020 at 15:56)</a>:</h4>
<p>But that interned data type happens to be a concrete <code>enum  TyKind</code>.</p>



<a name="212921999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212921999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212921999">(Oct 10 2020 at 15:59)</a>:</h4>
<p>But the concrete data type could be, for example, a struct with some common data attached to each kind</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span> <span class="nc">TyKindAndSpan</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">kind</span>: <span class="nc">TyKind</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">span</span>: <span class="nc">Span</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>then the interner interface would look like this</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Interner</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">InternedTy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyRef</span><span class="o">&lt;</span><span class="n">TyKindAndSpan</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">TyData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TyKindAndSpan</span><span class="o">&lt;</span><span class="bp">Self</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">intern_ty</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">data</span>: <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">TyData</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">InternedTy</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">ty_data</span><span class="p">(</span><span class="n">data</span>: <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">InternedTy</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">TyData</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="212922296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212922296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212922296">(Oct 10 2020 at 16:07)</a>:</h4>
<p>Looks like right now the concrete data type in rustc is not even <code>TyKind</code> but rather <code>TyS</code>?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">TyS</span><span class="o">&lt;'</span><span class="na">tcx</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// ...</span>
<span class="w">    </span><span class="n">kind</span>: <span class="nc">TyKind</span><span class="o">&lt;'</span><span class="na">tcx</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// ...</span>
<span class="w">    </span><span class="n">flags</span>: <span class="nc">TypeFlags</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// ...</span>
<span class="w">    </span><span class="n">outer_exclusive_binder</span>: <span class="nc">ty</span>::<span class="n">DebruijnIndex</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">trait</span><span class="w"> </span><span class="n">Interner</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">InternedTy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyRef</span><span class="o">&lt;</span><span class="n">TyS</span><span class="o">&lt;..</span><span class="p">.</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">TyData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TyS</span><span class="o">&lt;..</span><span class="p">.</span><span class="o">&gt;&gt;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">intern_ty</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">data</span>: <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">TyData</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">InternedTy</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">ty_data</span><span class="p">(</span><span class="n">data</span>: <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">InternedTy</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Self</span>::<span class="n">TyData</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Are there any reasons why do you intern <code>TyKind</code> specifically and not "<code>TyKind</code> + common fields" which is the equivalent of current <code>TyS</code>?</p>



<a name="212923207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212923207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212923207">(Oct 10 2020 at 16:28)</a>:</h4>
<hr>
<p>So, I guess my conclusion here would be to use the "data" terminology in the generic interner context, keep <code>TyKind</code> for the concrete enum and map one to another through a type alias, associated type, or through <code>struct TyData { kind: TyKind }</code> + <code>fn kind(self) -&gt; &amp;TyKind { &amp;self.ty_data().kind }</code>.</p>



<a name="212924041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924041">(Oct 10 2020 at 16:51)</a>:</h4>
<p>So, first off, on mobile, so my response here might be as thorough as I might want</p>



<a name="212924104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924104">(Oct 10 2020 at 16:53)</a>:</h4>
<p>I'm trying to think about how to best put my thoughts into words</p>



<a name="212924182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924182">(Oct 10 2020 at 16:55)</a>:</h4>
<p>I guess, the question here is: do we want <code>Ty</code> to be different than the other interned types</p>



<a name="212924201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924201">(Oct 10 2020 at 16:55)</a>:</h4>
<p>Specifically, you do bring up a good point about the <code>TypeFlags</code></p>



<a name="212924243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924243">(Oct 10 2020 at 16:56)</a>:</h4>
<p>This isn't something we support in chalk right now, but we definitely plan on it soonish</p>



<a name="212924254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924254">(Oct 10 2020 at 16:56)</a>:</h4>
<p>But, when we do, what is it going to look like?</p>



<a name="212924287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924287">(Oct 10 2020 at 16:57)</a>:</h4>
<p>(I'm ignore outer_exclusive_binder at the moment, because I think any logic we have here extends)</p>



<a name="212924436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924436">(Oct 10 2020 at 17:00)</a>:</h4>
<p>We either have two functions on <code>Interner</code>: <code>ty_data(interned_ty) -&gt; TyData</code> and <code>ty_flags(interned_ty) -&gt; TypeFlags</code>, where TyData is the enum (so it could also be <code>ty_kind(...) -&gt; TyKind</code>)</p>



<a name="212924476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924476">(Oct 10 2020 at 17:01)</a>:</h4>
<p>Or we instead have <code>TyData</code> look like our rustc's TyS. And then to get the enum, it's a field access.</p>



<a name="212924574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924574">(Oct 10 2020 at 17:02)</a>:</h4>
<p>The former means we avoid the notion of having that concrete struct in the shared type library</p>



<a name="212924816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924816">(Oct 10 2020 at 17:04)</a>:</h4>
<p>The latter makes that each "interned thing" gets one function in <code>Interner</code> (two if you thing intern/data)</p>



<a name="212924961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212924961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212924961">(Oct 10 2020 at 17:05)</a>:</h4>
<p>But the latter also means that for Tys every time we want to match on the data we do <code>match ty.data(interner).kind</code></p>



<a name="212925122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212925122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212925122">(Oct 10 2020 at 17:06)</a>:</h4>
<p>But maybe that's what we want, since we might want to do <code>let ty_data = ty.data(...); &lt;something with ty_data.flags&gt;; match ty_data.kind</code></p>



<a name="212925330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212925330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212925330">(Oct 10 2020 at 17:08)</a>:</h4>
<p>However, do we want to be consistent with <code>Region</code>? Should <code>region_data</code> return a struct with a <code>kind</code> field? Or an enum directly?</p>



<a name="212925996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212925996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212925996">(Oct 10 2020 at 17:20)</a>:</h4>
<p>What about things like <code>substitution_data</code>? These return structs currently that has functions like <code>as_slice</code>, <code>iter</code>, etc.</p>



<a name="212926013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212926013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212926013">(Oct 10 2020 at 17:21)</a>:</h4>
<p>I also just briefly looked over some of the things in Interner. Of those that are not an interned slice, there's a good mix of enums and not enums</p>



<a name="212926331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/212926331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#212926331">(Oct 10 2020 at 17:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359/near/212924476">said</a>:</p>
<blockquote>
<p>Or we instead have <code>TyData</code> look like our rustc's TyS. And then to get the enum, it's a field access.</p>
</blockquote>
<p>I am somewhat more convinced that <em>this</em> is maybe the right approach. I would like to hear what <span class="user-mention" data-user-id="116009">@nikomatsakis</span> thinks. (And of course anyone else). I'm not particularly set on any one approach. I just want to make sure we're thinking about where it and other things are heading in the future, not where they are <em>right now</em>.</p>



<a name="213041754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213041754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213041754">(Oct 12 2020 at 14:00)</a>:</h4>
<p>Hey all -- catching up. I'm definitely sensitive to not wanting churn.</p>



<a name="213041836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213041836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213041836">(Oct 12 2020 at 14:00)</a>:</h4>
<p>And I do expect that chalk will require flags and some of the other "goodies" that rustc has</p>



<a name="213041869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213041869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213041869">(Oct 12 2020 at 14:00)</a>:</h4>
<p>I've got some time marked up later to spend on chalk, so I'll try to sketch this out in a bit more detail and circle back to this thread then</p>



<a name="213711204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213711204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bram van den Heuvel <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213711204">(Oct 18 2020 at 15:24)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> gentle reminder!</p>



<a name="213786959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213786959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213786959">(Oct 19 2020 at 13:44)</a>:</h4>
<p>Thanks!</p>



<a name="213790306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213790306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213790306">(Oct 19 2020 at 14:07)</a>:</h4>
<p>OK so, I think that the answer is that <code>ty.data()</code> ought to yield the <strong>enum</strong>, in my opinion</p>



<a name="213790327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213790327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213790327">(Oct 19 2020 at 14:07)</a>:</h4>
<p>This is how I think it should be setup:</p>



<a name="213790514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213790514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213790514">(Oct 19 2020 at 14:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359/near/212924436">said</a>:</p>
<blockquote>
<p>We either have two functions on <code>Interner</code>: <code>ty_data(interned_ty) -&gt; TyData</code> and <code>ty_flags(interned_ty) -&gt; TypeFlags</code>, where TyData is the enum (so it could also be <code>ty_kind(...) -&gt; TyKind</code>)</p>
</blockquote>
<p>basically this, I guess</p>



<a name="213790689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213790689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213790689">(Oct 19 2020 at 14:09)</a>:</h4>
<p>I think my reasoning for this is that it's relatively rare that we want to use the flags, so typing <code>match ty.data().kind { .. }</code> all the time is kind of overkill</p>



<a name="213790789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213790789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213790789">(Oct 19 2020 at 14:10)</a>:</h4>
<p>but also, idk, it just "feels right" to me that the <code>Ty&lt;I&gt;</code> gives access to methods on the type, and one of those is to be able to match against precisely what kind of type it is</p>



<a name="213790941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213790941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213790941">(Oct 19 2020 at 14:11)</a>:</h4>
<p>the only advantage I see to <code>ty.data().kind</code> is that we <em>could</em> have an optional trait for rustc that allows you to call <code>data</code> without providing a tcx, and we could implement the <code>Deref</code> trait for <code>Ty&lt;I&gt;</code> if that trait is implemented, which would <em>then</em> permit one to write <code>match ty.kind {</code>  just as we do today basically</p>



<a name="213790971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213790971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213790971">(Oct 19 2020 at 14:11)</a>:</h4>
<p>but in chalk you'd have to write <code>ty.data(tcx).kind</code></p>



<a name="213791091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213791091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213791091">(Oct 19 2020 at 14:12)</a>:</h4>
<p>that said, we could do the same trick but make it "deref" to the <code>TyData</code> enum, so that one writes <code>match *ty { </code>, which might be even <em>nicer</em> :) -- well, it's a bit "hacky"</p>



<a name="213791297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213791297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213791297">(Oct 19 2020 at 14:13)</a>:</h4>
<p>I guess at the end of the day I don't care that much about the name and if we want to keep the <code>kind</code> name to avoid churn I'd be fine with that, but I generally do like the uniformity of <code>data()</code> to access the interned data, even for slices etc, and I generally like not using the term "kind" which has a meaning in type theory</p>



<a name="213791373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213791373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213791373">(Oct 19 2020 at 14:14)</a>:</h4>
<p>but I don't think it's a big deal; I don't think the use of kind is particularly confusing, for example, and it's not a term we use in rustc (we use <code>GenericArg</code>, which I think is better)</p>



<a name="213791467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213791467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213791467">(Oct 19 2020 at 14:14)</a>:</h4>
<p>another option would be to defer a bit the renaming and push first on other aspects of aligning the two types -- most notably trying to adjust the set of rustc/chalk variants to be closer together</p>



<a name="213805893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213805893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213805893">(Oct 19 2020 at 15:48)</a>:</h4>
<p>Okay, so for <em>this</em> MCP, what is the path forward?</p>



<a name="213840256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213840256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213840256">(Oct 19 2020 at 20:23)</a>:</h4>
<p>Basically I think I still prefer to accept as originally proposed</p>



<a name="213840278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213840278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213840278">(Oct 19 2020 at 20:23)</a>:</h4>
<p>Ultimately though this is a bit of a bikeshed</p>



<a name="213841070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213841070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213841070">(Oct 19 2020 at 20:29)</a>:</h4>
<p>personally I think if it's not a <em>clear</em> improvement it's not worth the churn</p>



<a name="213841101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213841101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213841101">(Oct 19 2020 at 20:29)</a>:</h4>
<p>for the same reason renaming <code>compiler/rustc_ast</code> to <code>compiler/ast</code> isn't worth it</p>



<a name="213843257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213843257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213843257">(Oct 19 2020 at 20:46)</a>:</h4>
<p>the question becomes "what to do with slice elements". I guess we can just have two conversions -- call it <code>kind()</code> if it yields an enum, <code>data()</code> otherwise</p>



<a name="213850270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/213850270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#213850270">(Oct 19 2020 at 21:43)</a>:</h4>
<p>i'm okay with postponing this rename until we get more parity between rustc and Chalk in regards to the structure of types, adding flags, etc.</p>



<a name="214115662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/214115662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#214115662">(Oct 21 2020 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> Should we close the MCP and the implementation PR?</p>



<a name="214115798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/214115798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#214115798">(Oct 21 2020 at 21:14)</a>:</h4>
<p>Yes, I think so :(</p>



<a name="214115833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/214115833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#214115833">(Oct 21 2020 at 21:15)</a>:</h4>
<p>Sorry again <span class="user-mention" data-user-id="323979">@Bram van den Heuvel</span></p>



<a name="214116538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/214116538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#214116538">(Oct 21 2020 at 21:22)</a>:</h4>
<p>At least <a href="https://github.com/rust-lang/rust/pull/77482">you're not alone</a> <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="214117238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/%60ty.kind%28%29%60%20-%3E%20%60ty.data%28%29%60%20compiler-team%23359/near/214117238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/233931-t-compiler/major-changes/topic/.60ty.2Ekind().60.20-.3E.20.60ty.2Edata().60.20compiler-team.23359.html#214117238">(Oct 21 2020 at 21:28)</a>:</h4>
<p>Think of it this way: If the PR wasn't opened, we would probably still be on the question of <em>should we</em></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
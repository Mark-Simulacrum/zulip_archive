<html>
<head><meta charset="utf-8"><title>Add 32-bit and 64-bit stderr/stdout files… compiler-team#365 · t-compiler/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/index.html">t-compiler/major changes</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html">Add 32-bit and 64-bit stderr/stdout files… compiler-team#365</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="210656886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/210656886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#210656886">(Sep 20 2020 at 08:58)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/compiler-team/issues/365">Add 32-bit and 64-bit stderr/stdout files for ui tests #365</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="210657830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/210657830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#210657830">(Sep 20 2020 at 09:26)</a>:</h4>
<p><span class="user-mention" data-user-id="256313">@Hameer Abbasi</span> this is the discussion zulip for the MCP. The issues are not meant for discussion of the content, only of procedure</p>



<a name="210657954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/210657954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#210657954">(Sep 20 2020 at 09:30)</a>:</h4>
<p>Copying over the <a href="#narrow/stream/146212-t-compiler.2Fconst-eval/topic/Looking.20for.20help.20on.20.2353325/near/210657121">concern on another thread</a> for visibility: It'd be hard to generate <code>*.32bit.stderr</code> files on macOS 10.15+ due to <a href="https://support.apple.com/en-us/HT208436">32-bit binaries being forbidden</a>.</p>



<a name="210658020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/210658020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#210658020">(Sep 20 2020 at 09:32)</a>:</h4>
<p>so we can't use this feature for running tests. I didn't even think about running tests at all, we should just forbid that if used together with that feature, in order to make cross compilation as feasible as possible</p>



<a name="210658030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/210658030" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#210658030">(Sep 20 2020 at 09:32)</a>:</h4>
<p>building for another target should be unproblematic</p>



<a name="212218939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/212218939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#212218939">(Oct 04 2020 at 11:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365/near/210658030">said</a>:</p>
<blockquote>
<p>building for another target should be unproblematic</p>
</blockquote>
<p>usually building for another target requires being able to link for that target, which is tricky</p>



<a name="212218961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/212218961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#212218961">(Oct 04 2020 at 11:28)</a>:</h4>
<p>Miri gets away with it by doing check-only builds of the standard library and the crate</p>



<a name="212218990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/212218990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#212218990">(Oct 04 2020 at 11:28)</a>:</h4>
<p>I don't know how to build for other targets without <code>xargo-check</code></p>



<a name="212660469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/212660469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#212660469">(Oct 08 2020 at 08:33)</a>:</h4>
<p>This is in the context of UI tests. Do separate <code>*.rs</code> files need linking? If so, this is a problem. If only separate crates need linking; then we're good, as UI tests are all in one crate.</p>



<a name="212663689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/212663689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#212663689">(Oct 08 2020 at 09:08)</a>:</h4>
<p>I think the problem is that we can't even get a <code>libstd</code> compiled</p>



<a name="212663741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/212663741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#212663741">(Oct 08 2020 at 09:08)</a>:</h4>
<p>(or well, linked)</p>



<a name="212912600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/212912600" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#212912600">(Oct 10 2020 at 11:53)</a>:</h4>
<p>indeed, libstd needs linking</p>



<a name="213918697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/213918697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#213918697">(Oct 20 2020 at 13:30)</a>:</h4>
<p>So... for this specific issue, all we need to be able to do is to link for the 32-bit or 64-bit target of the same platform. Alternatively, can we find a 32 bit platform that every host is able to link for?</p>



<a name="224390560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/224390560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#224390560">(Jan 28 2021 at 20:48)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="492">@T-compiler</span>: Proposal <a href="https://github.com/rust-lang/compiler-team/issues/365#issuecomment-769380293">#365</a> has been seconded, and will be approved in 10 days if no objections are raised.</p>



<a name="225390466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/233931-t-compiler/major%20changes/topic/Add%2032-bit%20and%2064-bit%20stderr/stdout%20files%E2%80%A6%20compiler-team%23365/near/225390466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/233931-t-compiler/major-changes/topic/Add.2032-bit.20and.2064-bit.20stderr.2Fstdout.20files.E2.80.A6.20compiler-team.23365.html#225390466">(Feb 06 2021 at 06:41)</a>:</h4>
<p>I have an implementation of this over at <a href="https://github.com/rust-lang/rust/issues/81817">#81817</a>.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
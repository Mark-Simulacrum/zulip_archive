<html>
<head><meta charset="utf-8"><title>Justification for noalias with mutable references · t-lang/wg-unsafe-code-guidelines · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/index.html">t-lang/wg-unsafe-code-guidelines</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html">Justification for noalias with mutable references</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="278044521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278044521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alban Reynaud <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278044521">(Apr 06 2022 at 15:49)</a>:</h4>
<p>Hello,<br>
I recently had an email discussion with Felix Klock, who mentioned the fact that (if I understand correctly), mutable references are marked as non-aliasable, so the compiler can make optimizations based on this: <a href="https://github.com/rust-lang/rust/pull/82834">https://github.com/rust-lang/rust/pull/82834</a></p>
<p>As it is possible to bypass the "uniqueness" of mutable references with unsafe code, some uses of unsafe code should trigger an undefined behavior. Thus, an aliasing model for Rust should be needed. From what I understand, Stacked Borrow (SB) is such a proposal for an aliasing model, but as far as I know, SB has not (yet?) been accepted as the official aliasing model for Rust. Thus, I wonder what is the justification for this optimization.</p>
<p>Felix advised me to call this question on this stream. Thus, does this optimization rely on SB? Does it rely on another aliasing model? Or has is been written without an official model, because it passes the test? Or did I misunderstand what the pull request <a href="https://github.com/rust-lang/rust/issues/82834">#82834</a> is?</p>
<p>I am a newbie, so I apologize if my question is clumsy or if I misunderstood the issue.</p>



<a name="278047336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278047336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278047336">(Apr 06 2022 at 16:08)</a>:</h4>
<p>I don't think <code>noalias</code> is actually special here. It's in general a good question how Rust code can have any optimizations performed on it - either by rustc, or by LLVM, or by their interaction - without a stable memory model. The resolution to this is that right now we sort of just do "reasonable" optimizations that we think the memory model should definitely allow</p>



<a name="278055129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278055129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278055129">(Apr 06 2022 at 17:03)</a>:</h4>
<p>The optimization (adding <code>noalias</code> to <code>&amp;mut</code> and <code>Box</code>) exists without any formal model or proof. It is based entirely on the fact that it seems like this was already disallowed and nobody has opened an issue about how it broke their code yet.</p>



<a name="278055283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278055283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278055283">(Apr 06 2022 at 17:04)</a>:</h4>
<p>Note that SB is probably much more restrictive than <code>noalias</code> needs. I say probably because nobody is sure what <code>noalias</code> means.</p>



<a name="278065607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278065607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278065607">(Apr 06 2022 at 18:21)</a>:</h4>
<p>also, don't forget that <code>noalias</code> is applied to <code>&amp;T</code> as well for <code>T: Freeze</code> (contains no <code>UnsafeCell</code>)</p>



<a name="278065632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278065632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278065632">(Apr 06 2022 at 18:21)</a>:</h4>
<p>(I have no idea whether SB speaks to that side of things...)</p>



<a name="278074056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278074056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278074056">(Apr 06 2022 at 19:29)</a>:</h4>
<p><span class="user-mention" data-user-id="492399">@Alban Reynaud</span> techically speaking the justification for <code>noalias</code> is this item in the <a href="https://doc.rust-lang.org/reference/behavior-considered-undefined.html">Rust UB list</a>: it is UB to...</p>
<blockquote>
<p>Breaking the pointer aliasing rules. &amp;mut T and &amp;T follow LLVM’s scoped noalias model, except if the &amp;T contains an UnsafeCell&lt;U&gt;.</p>
</blockquote>



<a name="278074126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278074126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278074126">(Apr 06 2022 at 19:29)</a>:</h4>
<p>now that definition is extremely vague and directly references a concrete backend, which nobody is happy with, so it will be replaced by Stacked Borrows or one of its successors one day.</p>



<a name="278074549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278074549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278074549">(Apr 06 2022 at 19:32)</a>:</h4>
<blockquote>
<p>and nobody has opened an issue about how it broke their code yet.</p>
</blockquote>
<p>They have, multiple times <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> — <a href="https://stackoverflow.com/q/57259126/155423">Why does the Rust compiler not optimize code assuming that two mutable references cannot alias?</a></p>



<a name="278075555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278075555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278075555">(Apr 06 2022 at 19:40)</a>:</h4>
<p>that's the opposite question though ;)</p>



<a name="278077092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278077092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278077092">(Apr 06 2022 at 19:53)</a>:</h4>
<p>Is it? It was disabled <em>because</em> someone opened issues stating that adding <code>noalias</code> broke their code.</p>



<a name="278077258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278077258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278077258">(Apr 06 2022 at 19:55)</a>:</h4>
<p>Timeline: the optimization was applied, issues filed about how it broke code, optimization disabled, someone posted the question.</p>



<a name="278077317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278077317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278077317">(Apr 06 2022 at 19:55)</a>:</h4>
<p>The answer links to the two occurrences / issues that I'm aware of.</p>



<a name="278078604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278078604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278078604">(Apr 06 2022 at 20:04)</a>:</h4>
<p>Weren't the complaints all root-caused to LLVM bugs, as opposed to Rust code not following the vague implied noalias rules?</p>



<a name="278081000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278081000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278081000">(Apr 06 2022 at 20:22)</a>:</h4>
<p>Sure, but what's the operational benefit of the difference?</p>



<a name="278089139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278089139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278089139">(Apr 06 2022 at 21:32)</a>:</h4>
<p>buggy user code vs buggy compiler makes a big difference. we can fix the compiler much more easily than user code.</p>



<a name="278105945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278105945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278105945">(Apr 07 2022 at 00:58)</a>:</h4>
<p>But for 99.9% of Rust users, <code>rustc</code> and LLVM are both "the compiler", so I feel like I'm missing your points. </p>
<p>The binary <code>rustc</code> took user-provided code and produced malfunctioning code because  <code>noalias</code> was applied. The user "opened an issue about how it broke their code". We fixed the issue by changing the compiler (disabling <code>noalias</code> in rustc) and then changing the compiler (fixing LLVM).</p>
<p>This process happened two unique times, as documented in the SO Q&amp;A. What piece am I missing? Is there a joke or something that is going over my head?</p>



<a name="278107322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278107322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Quy Nguyen <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278107322">(Apr 07 2022 at 01:22)</a>:</h4>
<p>I think the difference is that noalias has broken is not because people misunderstand how to write Rust and it breaks, but because the compiler is broken.</p>
<p>I guess the closest analogy would be (say SB was normative), code passing MIRI and then getting miscompiled, versus code not passing MIRI (and getting miscompiled) because MIRI/SB is too strict.</p>



<a name="278109902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278109902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278109902">(Apr 07 2022 at 02:12)</a>:</h4>
<p>If users wrote UB that didn't matter in practice until <code>noalias</code> was applied, then they either have to fix it or we have to adjust our rules to make their behavior defined.</p>
<p>If the compiler has a <code>noalias</code> bug, in rustc or LLVM, then we have to fix that. AFAIK this was the situation.</p>
<p>Either way, reverts gave us time to figure it out.</p>



<a name="278353289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278353289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278353289">(Apr 08 2022 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116155">@Jake Goulding</span>  in the future, if "user-provided code [is turned into] malfunctioning code because noalias was applied", we might close the issue as wontfix if the user code has a bug (namely, violating our aliasing rules)</p>



<a name="278358150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278358150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278358150">(Apr 08 2022 at 20:28)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> certainly, but I still don't see how that invalidates my point.</p>



<a name="278358180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278358180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278358180">(Apr 08 2022 at 20:28)</a>:</h4>
<p>well that is the difference between "miscompiling" code due to compiler bugs vs user UB. I thought that was the question?</p>



<a name="278358277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278358277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278358277">(Apr 08 2022 at 20:29)</a>:</h4>
<p>I'm literally responding to the above point:</p>
<blockquote>
<p>nobody has opened an issue about how [adding <code>noalias</code> to <code>&amp;mut</code> and <code>Box</code>] broke their code yet.</p>
</blockquote>
<p>I'm saying that, yes, they have. Twice in fact.</p>



<a name="278358378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278358378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278358378">(Apr 08 2022 at 20:30)</a>:</h4>
<p>Maybe that poster meant something other than the words they typed?</p>



<a name="278358845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278358845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278358845">(Apr 08 2022 at 20:34)</a>:</h4>
<p>I was mostly respond to this question of yours<br>
<span class="user-mention silent" data-user-id="116155">Jake Goulding</span> <a href="#narrow/stream/136281-t-lang.2Fwg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references/near/278081000">said</a>:</p>
<blockquote>
<p>Sure, but what's the operational benefit of the difference?</p>
</blockquote>



<a name="278358934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278358934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278358934">(Apr 08 2022 at 20:35)</a>:</h4>
<p>I think in the text you quote, by "it" (the thing you expanded in [...]) they mean the optimizations we actually consider legitimate</p>



<a name="278359004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359004">(Apr 08 2022 at 20:36)</a>:</h4>
<p>we don't have reports of <em>those</em> breaking code, AFAIK</p>



<a name="278359035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359035">(Apr 08 2022 at 20:36)</a>:</h4>
<p>I assume that is partially because we dont do that many of them ;) and we keep disabling them to fix incorrect optimizations</p>



<a name="278359466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359466">(Apr 08 2022 at 20:40)</a>:</h4>
<p>And... you lost me again.</p>
<blockquote>
<p>the optimizations we actually consider legitimate<br>
we don't have reports of those breaking code</p>
</blockquote>
<p>I pointed to two issues where our usage of <code>noalias</code> broke code and was reported.</p>
<p>It sounds like you are both adding an implicit conditional akin to "and the implementation of the optimization is correct", but that seems too handwavy for me. Too close to</p>
<blockquote>
<p>Beware of bugs in the above code; I have only proved it correct, not tried it</p>
</blockquote>



<a name="278359551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359551">(Apr 08 2022 at 20:41)</a>:</h4>
<blockquote>
<p>I pointed to two issues where our usage of noalias broke code and was reported.</p>
</blockquote>
<p>yes but the breakage was not due to legimiate optimizations</p>



<a name="278359566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359566">(Apr 08 2022 at 20:41)</a>:</h4>
<p>it was due to buggy optimizations</p>



<a name="278359623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359623">(Apr 08 2022 at 20:42)</a>:</h4>
<p>I'm aware that it may seem like I'm being unnecessarily difficult about this, but that's not my intention. <span aria-label="innocent" class="emoji emoji-1f607" role="img" title="innocent">:innocent:</span></p>



<a name="278359661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359661">(Apr 08 2022 at 20:42)</a>:</h4>
<blockquote>
<p>It sounds like you are both adding an implicit conditional akin to "and the implementation of the optimization is correct", but that seems too handwavy for me.</p>
</blockquote>
<p>I mean, I think for a bug report against the compiler, the question whether the compiler is correct seems rather relevant?</p>



<a name="278359764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278359764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278359764">(Apr 08 2022 at 20:43)</a>:</h4>
<p>when someone reports "your software does X" as a bug, then the first thing you do is figure out if X is intended behavior of the software or not, isnt it?</p>



<a name="278360343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360343">(Apr 08 2022 at 20:49)</a>:</h4>
<p>Sure. And from one perspective it was: Because we had <code>&amp;mut</code> or <code>Box</code> or whatever, we added <code>noalias</code>.</p>



<a name="278360370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360370">(Apr 08 2022 at 20:49)</a>:</h4>
<p>no it was definitely not intended behavior</p>



<a name="278360392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360392">(Apr 08 2022 at 20:49)</a>:</h4>
<p>we didn't add <code>noalias</code> thinking: literally anything this does to the code is what we want it to do</p>



<a name="278360532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360532">(Apr 08 2022 at 20:50)</a>:</h4>
<p>nobody in their right mind would say "I enabled this thing and then upstream code produces wrong results but that is clearly intended because I enabled the thing", right? that just makes no sense</p>



<a name="278360557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360557">(Apr 08 2022 at 20:51)</a>:</h4>
<p>I honestly have no idea where you are coming from or going for with this :/</p>



<a name="278360708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360708">(Apr 08 2022 at 20:52)</a>:</h4>
<p>Again, I'm being <em>very</em> literal.</p>
<p>Statement A: "No one has filed bugs saying that Optimization Z has caused problems"<br>
Statement B: "Here are some bugs where people said Optimization Z has caused problems"</p>



<a name="278360742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360742">(Apr 08 2022 at 20:53)</a>:</h4>
<p>those were two different Z</p>



<a name="278360773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360773">(Apr 08 2022 at 20:53)</a>:</h4>
<p>How so?</p>



<a name="278360790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360790">(Apr 08 2022 at 20:53)</a>:</h4>
<p>the problems were optimization Z', which had bugs</p>



<a name="278360884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360884">(Apr 08 2022 at 20:54)</a>:</h4>
<p>I think we are going in cycles so I doubt much more is going to come out of this discussion <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="278360947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278360947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278360947">(Apr 08 2022 at 20:54)</a>:</h4>
<p>It's perhaps true, and again, I'm not trying to be difficult. I'm equally as frustrated as I assume you are <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="278361059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361059">(Apr 08 2022 at 20:55)</a>:</h4>
<p>There was a literal statement which I attempted to refute. I think you and <strong>Ben Kimock (Saethlin)</strong>  may be looking at the problem with <a href="https://devblogs.microsoft.com/oldnewthing/20110512-00/?p=10683">compiler-colored glasses on</a>, while I'm looking at it from user-colored glasses.</p>



<a name="278361171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361171">(Apr 08 2022 at 20:56)</a>:</h4>
<p>Most people don't <em>care</em> if the optimization is fundamentally incorrect or if its "just" implemented incorrectly — the code they put in came out broken.</p>
<p>Yes, it was great that we could turn off the usage of <code>noalias</code> and then fix LLVM, but the entire optimization, as presented to the user, was busted.</p>



<a name="278361468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361468">(Apr 08 2022 at 20:59)</a>:</h4>
<p>If the original statement was "no one has ever filed a bug stating that the ideal implementation of an optimization (which is not what is present in the compiler today) has broken their code", then, sure, that'd be true, but also not very useful.</p>



<a name="278361622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361622" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361622">(Apr 08 2022 at 21:00)</a>:</h4>
<p>I personally find it hard to empathize with the user-colored glasses because so many of the users I've seen who actually interact with implementors already have compiler-colored glasses. I always see people who open the conversation asking if this is a bug in their code or a bug in the compiler, or who are ready to accept either.</p>



<a name="278361735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361735">(Apr 08 2022 at 21:01)</a>:</h4>
<p>I'm not making a judgement. I just suspect that whatever our userbase is like, we suffer from massive biases in our interactions</p>



<a name="278361779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361779">(Apr 08 2022 at 21:01)</a>:</h4>
<p>That sounds a lot like survivor bias <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>. The people who get to the point of opening an issue against the compiler are a different group than those that don't.</p>



<a name="278361967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361967">(Apr 08 2022 at 21:02)</a>:</h4>
<p>Yeah, that could be. Or it could be that C and C++ are so steeped in UB as a part of the language, which fundamentally blurs the line unless you have a checker or very good knowledge of your code and the rules</p>



<a name="278361990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278361990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278361990">(Apr 08 2022 at 21:03)</a>:</h4>
<p>There's also room for "user reports that our less-than-perfect optimization broke their code when <code>noalias</code> was applied, and we determined that the optimization was correct."</p>



<a name="278362028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278362028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278362028">(Apr 08 2022 at 21:03)</a>:</h4>
<p>If the original statement was "no one has ever filed a bug stating that the <strong>concept</strong> of this optimization would break their code (but some have filed issues about the implementation)" I also wouldn't have spoken up.</p>



<a name="278362140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278362140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278362140">(Apr 08 2022 at 21:04)</a>:</h4>
<p>Otherwise we get into No True <del>Scotsman</del> Optimization territory.</p>



<a name="278362250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278362250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Quy Nguyen <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278362250">(Apr 08 2022 at 21:05)</a>:</h4>
<p>I think some of us interpreted the meaning  as "no one filed a bug stating [the justification behind] the optimization would break their code", which explains this long song and dance :P. (Ah you just said that, dang internet)</p>



<a name="278363712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification%20for%20noalias%20with%20mutable%20references/near/278363712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Justification.20for.20noalias.20with.20mutable.20references.html#278363712">(Apr 08 2022 at 21:20)</a>:</h4>
<p>yeah, as a user when your code doesn't do what you think it should, I appreciate it can be hard to figure out if this is a compiler bug or UB. a huge part of my work has the goal of improving that situation. ;)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
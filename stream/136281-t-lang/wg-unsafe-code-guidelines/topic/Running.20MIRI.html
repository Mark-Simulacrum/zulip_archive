<html>
<head><meta charset="utf-8"><title>Running MIRI · t-lang/wg-unsafe-code-guidelines · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/index.html">t-lang/wg-unsafe-code-guidelines</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html">Running MIRI</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260666563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260666563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260666563">(Nov 08 2021 at 14:51)</a>:</h4>
<p>Is there some ready-to-use script to run MIRI on the test suite of some crates and the standard library? Not to test MIRI, but to periodically test the crates.</p>



<a name="260667131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260667131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260667131">(Nov 08 2021 at 14:54)</a>:</h4>
<p>Is that even practical? I wonder how long the tests of the standard library take to run with MIRI.</p>



<a name="260670214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260670214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pointerbender <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260670214">(Nov 08 2021 at 15:15)</a>:</h4>
<p>I think they have a cronjob running somewhere. There is a bot that posts to #miri on Zulip when it detects a regression.</p>



<a name="260670747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260670747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pointerbender <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260670747">(Nov 08 2021 at 15:18)</a>:</h4>
<p>I'm not sure what command exactly runs in the cronjob, but it might be this script <a href="https://github.com/rust-lang/miri/blob/master/ci.sh">https://github.com/rust-lang/miri/blob/master/ci.sh</a></p>



<a name="260673021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260673021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260673021">(Nov 08 2021 at 15:34)</a>:</h4>
<p>Uh, thanks! But that seems to test MIRI. To put it in another way, is there a script that would allow to reproduce the evaluation of the Stacked Borrows paper? I mean the "[we] ran large parts of the Rust standard library test suite in the interpreter to validate that the model permits enough real-world unsafe Rust code" part. The <a href="https://zenodo.org/record/3541779">artifact</a> seems to only contain the Coq proofs, not scripts to reproduce the MIRI runs. But they must be somewhere.</p>



<a name="260674844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260674844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pointerbender <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260674844">(Nov 08 2021 at 15:47)</a>:</h4>
<p>Hmm I'm browsing now but can't seem to find it either (I was not involved in that work btw, just a big fan of it <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>  ) I was hoping they keep it somewhere in their university repositories: <a href="https://gitlab.mpi-sws.org/explore/projects">https://gitlab.mpi-sws.org/explore/projects</a></p>



<a name="260888077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260888077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260888077">(Nov 10 2021 at 01:27)</a>:</h4>
<p><code>cargo miri test</code> runs the test suite of the local crate</p>



<a name="260888139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260888139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260888139">(Nov 10 2021 at 01:28)</a>:</h4>
<p>we have some setup at <a href="https://github.com/rust-lang/miri-test-libstd">https://github.com/rust-lang/miri-test-libstd</a> to run the libcore and liballoc test suites in Miri</p>



<a name="260888196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260888196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260888196">(Nov 10 2021 at 01:29)</a>:</h4>
<p>and yes that is the script that the cited claim in the Stacked Borrows paper is based on. I admit we did not make this as clear as we should have in the paper and its accompanying material.</p>



<a name="260959108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running%20MIRI/near/260959108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Federico Poli <a href="https://zulip-archive.rust-lang.org/stream/136281-t-lang/wg-unsafe-code-guidelines/topic/Running.20MIRI.html#260959108">(Nov 10 2021 at 08:37)</a>:</h4>
<p>Great, thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
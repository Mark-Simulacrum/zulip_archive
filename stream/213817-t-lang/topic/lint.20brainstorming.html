<html>
<head><meta charset="utf-8"><title>lint brainstorming · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html">lint brainstorming</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277184100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184100">(Mar 30 2022 at 18:03)</a>:</h4>
<p>followup to today's design meeting on Lint Policy</p>



<a name="277184193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184193">(Mar 30 2022 at 18:04)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> and <span class="user-mention" data-user-id="116009">@nikomatsakis</span> both said that we'd probably benefit from further brainstorming (both async and sync). That's what this topic is for</p>



<a name="277184284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184284">(Mar 30 2022 at 18:04)</a>:</h4>
<p>also thanks <span class="user-mention" data-user-id="116083">@pnkfelix</span> for preparing that doc, it was really good :)</p>



<a name="277184321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184321">(Mar 30 2022 at 18:05)</a>:</h4>
<p>"thought provoking"</p>



<a name="277184349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184349">(Mar 30 2022 at 18:05)</a>:</h4>
<p>I guess the first question posed is: What are the goals of lang team activity here? (The doc tried to lay out what the goals are for Rust's lint system itself, but I'm now realizing that is slightly distinct from what <em>our team's goals</em> are in having this discussion.</p>



<a name="277184389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184389">(Mar 30 2022 at 18:05)</a>:</h4>
<p>interesting question</p>



<a name="277184405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184405">(Mar 30 2022 at 18:06)</a>:</h4>
<p>I was going to say that I wanted to start a hackmd to categories goals of lints</p>



<a name="277184452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184452">(Mar 30 2022 at 18:06)</a>:</h4>
<p>but I think your question is good</p>



<a name="277184488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184488">(Mar 30 2022 at 18:06)</a>:</h4>
<p>My doc was written with a goal of "lets reduce lang team burden here."</p>



<a name="277184512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184512">(Mar 30 2022 at 18:06)</a>:</h4>
<p>and I think most people were <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> on that. :)</p>



<a name="277184531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184531">(Mar 30 2022 at 18:06)</a>:</h4>
<p>my overriding goal is to have clearer standards for approving lints and deciding how to handle the various kinds of situations that arise</p>



<a name="277184550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184550">(Mar 30 2022 at 18:06)</a>:</h4>
<p>(but then there was push back on how to get there. <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> )</p>



<a name="277184559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184559">(Mar 30 2022 at 18:06)</a>:</h4>
<p>I was very frustrated around the edition with "every lint is its own special snowflake"</p>



<a name="277184630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184630">(Mar 30 2022 at 18:07)</a>:</h4>
<p>I think it would be good for us to have fewer "progressions" for things and a more standard idea for "when should this be deny-by-default" (for example) vs "hard error"</p>



<a name="277184658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184658">(Mar 30 2022 at 18:07)</a>:</h4>
<p>this in turn I think leads to lower team burden</p>



<a name="277184662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184662">(Mar 30 2022 at 18:07)</a>:</h4>
<p>I find it interesting that people noted that Clippy doesn't have sufficient reach. I know <em>I</em> don't have clippy turned on by default, but I've always assumed that I was an <em>exception</em> on that front.</p>



<a name="277184741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184741">(Mar 30 2022 at 18:08)</a>:</h4>
<p>It occurs to me that the rust survey may help answer that more definitively</p>



<a name="277184745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184745">(Mar 30 2022 at 18:08)</a>:</h4>
<p>(and the fact that I saw myself as an exception there is probably reflective of bias in whom I hang out with.)</p>



<a name="277184766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184766">(Mar 30 2022 at 18:08)</a>:</h4>
<p>but my take on clippy is not so much about <em>Reach</em> as it is-- if I were designing this system from scratch, is clippy what I would do?</p>



<a name="277184770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184770">(Mar 30 2022 at 18:08)</a>:</h4>
<p>(I don't think so)</p>



<a name="277184789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184789">(Mar 30 2022 at 18:08)</a>:</h4>
<p>that is, I don't think I would have a separate <code>cargo clippy</code> command instead of having categories in rustc</p>



<a name="277184807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184807">(Mar 30 2022 at 18:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/213817-t-lang/topic/lint.20brainstorming/near/277184630">said</a>:</p>
<blockquote>
<p>I think it would be good for us to have fewer "progressions" for things and a more standard idea for "when should this be deny-by-default" (for example) vs "hard error"</p>
</blockquote>
<p>what do you mean by "fewer progressions" ? like, fewer states, in terms of the arc of shifting from "warn-by-default" to "deny-by-default" etc?</p>



<a name="277184823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184823">(Mar 30 2022 at 18:09)</a>:</h4>
<p>I <em>do</em> think having a separate repo and set of people who focuson lints is great</p>



<a name="277184833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277184833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277184833">(Mar 30 2022 at 18:09)</a>:</h4>
<p>and that the work that has gone into clippy is very important</p>



<a name="277185031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185031">(Mar 30 2022 at 18:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/213817-t-lang/topic/lint.20brainstorming/near/277184807">said</a>:</p>
<blockquote>
<p>what do you mean by "fewer progressions" ? like, fewer states, in terms of the arc of shifting from "warn-by-default" to "deny-by-default" etc?</p>
</blockquote>
<p>what I mean is that it always felt like we were starting from a "blank slate" in deciding how to handle each case</p>



<a name="277185038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185038">(Mar 30 2022 at 18:10)</a>:</h4>
<p>versus picking from a fixed menu</p>



<a name="277185056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185056">(Mar 30 2022 at 18:10)</a>:</h4>
<p>ah okay</p>



<a name="277185072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185072">(Mar 30 2022 at 18:10)</a>:</h4>
<p>FWIW, I also never run clippy myself.  It's possible it's gotten better since last I tried it, though -- it's been quite a while.</p>



<a name="277185144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185144">(Mar 30 2022 at 18:11)</a>:</h4>
<p>historically I have been annoyed about things like the "unnecessary parens" lint (uh, hello, I think I know where parens are required, I chose to put that there...) but I've been trying to get over myself lately ;)</p>



<a name="277185171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185171">(Mar 30 2022 at 18:11)</a>:</h4>
<p>and running clippy on some projects (in CI/CD no less)</p>



<a name="277185180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185180">(Mar 30 2022 at 18:11)</a>:</h4>
<p>yes. Like I said, the whole doc was a trojan horse</p>



<a name="277185197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185197">(Mar 30 2022 at 18:11)</a>:</h4>
<p>but you all left my present outside the castle walls.</p>



<a name="277185202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185202">(Mar 30 2022 at 18:11)</a>:</h4>
<p>it's been quite nice</p>



<a name="277185210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185210">(Mar 30 2022 at 18:12)</a>:</h4>
<p>(or catapulted it back at me)</p>



<a name="277185343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185343">(Mar 30 2022 at 18:13)</a>:</h4>
<p><a href="https://hackmd.io/eSo424-6SW-iXXfGZ2yVDQ">https://hackmd.io/eSo424-6SW-iXXfGZ2yVDQ</a></p>



<a name="277185421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185421">(Mar 30 2022 at 18:13)</a>:</h4>
<p>FWIW I'd be happy to see some lints delegated to the style team, once we charter the style team.</p>



<a name="277185479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185479">(Mar 30 2022 at 18:14)</a>:</h4>
<p>e.g. any new lints in the family of "how to name/capitalize things".</p>



<a name="277185488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185488">(Mar 30 2022 at 18:14)</a>:</h4>
<p>I <em>absolutely</em> type <code>if (foo) {</code> regularly.  But I think it's overall worth telling people to just fix that -- especially since there's a nice structured suggestion that's always right.  I also regularly type <code>struct Foo { x: i32 };</code>, which even blocks my unit test run, but I don't mind that one either -- it's also a trivial fix, and doing it now is fine.</p>



<a name="277185578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185578">(Mar 30 2022 at 18:15)</a>:</h4>
<p>what I (used to) type a lot would be</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">if</span><span class="p">.(</span><span class="w"></span>
<span class="w">    </span><span class="n">SomethingComplex</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">    </span><span class="n">SomethingElseComplex</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">    </span><span class="n">SomethingElse</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="277185586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185586">(Mar 30 2022 at 18:15)</a>:</h4>
<p>I've kind of given up on it</p>



<a name="277185635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185635">(Mar 30 2022 at 18:15)</a>:</h4>
<p>Out of curiosity, was the motivation because your editor wasn't indenting "properly" otherwise, and adding the parens tricked the editor into lining things up?</p>



<a name="277185733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185733">(Mar 30 2022 at 18:16)</a>:</h4>
<p>A big part of this is turnaround time, I think.</p>
<p>If it comes back in under, say, 2 seconds saying "hey, you forgot this", it's fine to just have people fix it right away.  And it's often even faster than that, for stuff that doesn't need type information and thus the editor can typically prompt for it even without something as complex as R-A.</p>



<a name="277185748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185748">(Mar 30 2022 at 18:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/213817-t-lang/topic/lint.20brainstorming/near/277185635">said</a>:</p>
<blockquote>
<p>Out of curiosity, was the motivation because your editor wasn't indenting "properly" otherwise, and adding the parens tricked the editor into lining things up??</p>
</blockquote>
<p>I don't remember</p>



<a name="277185754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185754">(Mar 30 2022 at 18:16)</a>:</h4>
<p>I just like things broken out onto lines</p>



<a name="277185760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185760">(Mar 30 2022 at 18:16)</a>:</h4>
<p>and it looks funny to me to not end a line in a paren, I think</p>



<a name="277185821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277185821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277185821">(Mar 30 2022 at 18:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/213817-t-lang/topic/lint.20brainstorming/near/277185343">said</a>:</p>
<blockquote>
<p><a href="https://hackmd.io/eSo424-6SW-iXXfGZ2yVDQ">https://hackmd.io/eSo424-6SW-iXXfGZ2yVDQ</a></p>
</blockquote>
<p>I'm brainstorming on goals here</p>



<a name="277186830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277186830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277186830">(Mar 30 2022 at 18:24)</a>:</h4>
<p>I dropped a note like this in the doc, but on <code>-Dwarnings</code>, I think part of the problem is that we do have occasional places where real problems are still warnings.</p>
<p>I'd like there to be <em>more</em> deny-by-default lints for suspicious cases, even if convention-based.</p>
<p>As one possible example, any unreachable match arm <em>that creates a binding that doesn't start with <code>_</code></em>, or a match with <em>multiple catch-all arms</em>, or something like that.  An unreachable <code>_ =&gt; ...</code> arm is often fine.  But an unreachable <code>Wrapping(val) =&gt;</code> is really sketchy, but not a deny today.</p>



<a name="277186848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277186848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277186848">(Mar 30 2022 at 18:24)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust-clippy">https://github.com/rust-lang/rust-clippy</a></p>



<a name="277186861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277186861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277186861">(Mar 30 2022 at 18:24)</a>:</h4>
<p>gotta remember to compare against that</p>



<a name="277197721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277197721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277197721">(Mar 30 2022 at 19:59)</a>:</h4>
<blockquote>
<p>I don't think I would have a separate <code>cargo clippy</code> command</p>
</blockquote>
<p>I always assumed that clippy came into being because the process of adding lints to rustc was too onerous. In my mind, it's the same as how <code>cargo dylint</code> came around — too onerous / impossible to create crate-specific lints.</p>



<a name="277197904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277197904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277197904">(Mar 30 2022 at 20:00)</a>:</h4>
<p>A recent trainee asked "why does the compiler warn about unidiomatic capitalization instead of Clippy" and I didn't have a <em>great</em> answer. I handwaved it with "rustc lints should have low false positive, clippy lints may be a bit looser"</p>



<a name="277198060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277198060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277198060">(Mar 30 2022 at 20:02)</a>:</h4>
<blockquote>
<p>what I (used to) type a lot would be</p>
</blockquote>
<p>I cannot <em>stand</em> multiline conditionals for <code>if</code> and friends. I'll break them out into a variable/closure/function 90% of the time. <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="277200949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277200949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277200949">(Mar 30 2022 at 20:34)</a>:</h4>
<p>Multiline conditionals are the one place I dislike K&amp;R braces, yeah.</p>



<a name="277223538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277223538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277223538">(Mar 31 2022 at 01:42)</a>:</h4>
<p>A random reflection after today’s meeting: one point I was trying to make was that Rust sometimes uses lints for pedagogical purposes: to teach someone about some feature they might not know about, but isn’t <em>necessarily</em> correlated with an error. (Consider e.g. the <code>while true { … }</code> thing). <em>But</em>, reflecting on Josh’s comment about issued lints representing technical debt: I am now actively wondering whether it might be simply <em>wrong</em> to equate “pedagogical opportunity” with “technical debt”</p>



<a name="277223573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277223573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277223573">(Mar 31 2022 at 01:43)</a>:</h4>
<p>To be clear; some things flagged by lints <em>do</em> represent tech debt. But I strongly suspect some things they flag are simply <em>not</em>. (Like our old friend “unused parens”)</p>



<a name="277224041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224041">(Mar 31 2022 at 01:53)</a>:</h4>
<p>So I could imagine such a feature also being used to teach users about things that are not even actionable in the source code - for example, getting people who write an unsafe block to run miri and read the rustonomicon. Right now, there's no way for the compiler to tell users about those things</p>



<a name="277224474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224474">(Mar 31 2022 at 02:01)</a>:</h4>
<p>Part of what I then wondered was: “For pedagogy: is the lint model simply wrong? Should it take on a model more like the “Tip of the Day”, where the first time each day you run <code>rustc</code> on a project, it selects <em>one random instance</em> of all the pedagogical lints that fired for that build. A kind of “did you know that you could be writing <code>if x &gt; y { … }</code> instead of <code>if (x &gt; y) { … }</code>; but then on subsequent builds for the rest of the day, it <em>stops trying to provide that kind of help</em> (unless someone asks for the helper to come back and give more tutorials)</p>



<a name="277224477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224477">(Mar 31 2022 at 02:02)</a>:</h4>
<p>I bet video games get this right.</p>



<a name="277224539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224539">(Mar 31 2022 at 02:03)</a>:</h4>
<p>(This of course conflicts with the “promote norms” that josh was stressing in the meeting.)</p>



<a name="277224540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224540" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224540">(Mar 31 2022 at 02:03)</a>:</h4>
<p>My favorite Clippy lint is the “it looks like you are writing <code>slice::swap</code>” one</p>



<a name="277224654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224654">(Mar 31 2022 at 02:05)</a>:</h4>
<p>And I’d be really annoyed if the compiler (which is the same as Clippy to a large chunk of users) knew I was writing something sub optimal and <em>chose to not tell me</em> until X random days had passed. After I had copy pasta it all through my code.</p>



<a name="277224728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224728">(Mar 31 2022 at 02:06)</a>:</h4>
<p>If you were doing that, I’d want it the first time it sees you write the suboptimal code. Closer to Rust analyzer.</p>



<a name="277224738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224738">(Mar 31 2022 at 02:07)</a>:</h4>
<p>So this might be the kind of thing that integrating IDEs might help resolve. The compiler sometimes tells you about stuff on the command line, but always makes this information available to the IDE which can display a little info bubble</p>



<a name="277224844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224844">(Mar 31 2022 at 02:08)</a>:</h4>
<p>Think of working with a pair programmer that waits until you are done with your thought then says “that’s good, but check out this function”</p>
<p>It’d be even better if you could say “I want to do X” and the compiler says to check out Y and Z.</p>



<a name="277224887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277224887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277224887">(Mar 31 2022 at 02:09)</a>:</h4>
<p>Have you used GitHub Copilot? I haven’t, but friends have and share some pretty amazing things it suggests.</p>



<a name="277225239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277225239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277225239">(Mar 31 2022 at 02:16)</a>:</h4>
<p>Yeah, if we could get something like this working, I would be a massive fan. I also don't run clippy right now, and do wonder how much I miss out on because of it</p>



<a name="277234215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277234215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277234215">(Mar 31 2022 at 05:14)</a>:</h4>
<p>I think the core problem is that for any lint that's not "hey, you should just update this right now", spitting a bunch of things onto the console is the wrong way to do it.  (Overstatement for emphasis: and thus clippy shouldn't exist.)</p>
<p>I've mentioned this <a href="https://internals.rust-lang.org/t/linter-pushing-it-too-far-return-self-not-must-use/16008/11?u=scottmcm">before</a>, but I think Resharper does a great job of this for C#.  </p>
<p>For everything it can tell you, right where it's showing it it gives a "configure severity" menu easily accessible &lt;<a href="https://www.jetbrains.com/help/resharper/Code_Analysis__Configuring_Warnings.html#change_severity">https://www.jetbrains.com/help/resharper/Code_Analysis__Configuring_Warnings.html#change_severity</a>&gt;<br>
<a href="/user_uploads/4715/F3ptnBjTgV_ZQuXDvsoC__FE/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/F3ptnBjTgV_ZQuXDvsoC__FE/image.png" title="image.png"><img src="/user_uploads/4715/F3ptnBjTgV_ZQuXDvsoC__FE/image.png"></a></div><p>And only warnings and errors give the <span aria-label="x" class="emoji emoji-274e" role="img" title="x">:x:</span> on the file.  There can still be hints and suggestions, but with those the <em>file</em> shows as <span aria-label="check" class="emoji emoji-2705" role="img" title="check">:check:</span>.  That level configuration being so easily accessible also encourages tuning things to what you want, with a configuration you can check in without needing to <code>#![</code> anything.</p>
<p>For an example, it has a nice "you could write this <code>foreach</code> loop as an iterator" transform.  But I leave that at "hint" -- that way it's there as a very subtle … under the keywords, and I can click to apply it if I'd like.  Which I do occasionally, but usually I then Ctrl-Z that because the chain ends up being more complicated than I'm happy with.</p>
<p>I really like that example because it's the kind of thing I'd <em>never</em> want to see from <code>cargo clippy</code>, even though it's a great feature in the IDE.</p>
<p>So I guess one answer to this could be "we should move everything from clippy to r-a, and then remove clippy entirely".  (And maybe add a console way to do a similar thing with r-a, if it doesn't already have one.)</p>



<a name="277235502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277235502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jules Bertholet <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277235502">(Mar 31 2022 at 05:43)</a>:</h4>
<p>VS Code has an "info" lint level, JetBrains has "weak warning".  We could add a corresponding lint level to Rust, that wouldn't print anything to the console by default but would output for <code>--json-output</code> so tooling could read it</p>



<a name="277340546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277340546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Dahlström <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277340546">(Mar 31 2022 at 21:08)</a>:</h4>
<p>Would be great if rustc's unused item/variable lints could then be downgraded to weak warnings.  At least to me they're nothing but frustrating noise while I'm actively writing code or debugging. Almost always I only want to care about them when it's the time to clean up code for commit/push.</p>



<a name="277340955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277340955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277340955">(Mar 31 2022 at 21:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="277826">Johannes Dahlström</span> <a href="#narrow/stream/213817-t-lang/topic/lint.20brainstorming/near/277340546">said</a>:</p>
<blockquote>
<p>Would be great if rustc's unused item/variable lints could then be downgraded to weak warnings.  At least to me they're nothing but frustrating noise while I'm actively writing code or debugging. Almost always I only want to care about them when it's the time to clean up code for commit/push.</p>
</blockquote>
<p>You can set <code>deny-warnings = false</code> in config.toml for rustc.</p>



<a name="277343643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277343643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Dahlström <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277343643">(Mar 31 2022 at 21:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="248906">cjgillot</span> <a href="#narrow/stream/213817-t-lang/topic/lint.20brainstorming/near/277340955">said</a>:</p>
<blockquote>
<p>You can set <code>deny-warnings = false</code> in config.toml for rustc.</p>
</blockquote>
<p>Hmm what's that? I don't find any documentation for that. But anyway what I can do is <code>RUSTFLAGS='-A warnings' cargo xyz</code> for iterating and <code>RUSTFLAGS='-D warnings'</code> in a push hook/CI, but that's awkward. What I'd actually like to have is <code>[profile.dev]  rustflags=["-A warnings"]</code> in Cargo but for whatever reason rustflags is not something that can be set per profile :(</p>



<a name="277343968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277343968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277343968">(Mar 31 2022 at 21:43)</a>:</h4>
<p>Sorry, I mean for working on rustc.  I probably misunderstood you and wrote too fast.</p>



<a name="277344012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277344012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Dahlström <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277344012">(Mar 31 2022 at 21:43)</a>:</h4>
<p>Ah, no problem. I figured that might be the case (to be clear, I'm talking about run-of-the mill <em>using</em> rustc/Cargo rather than developing it)</p>



<a name="277344101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277344101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Dahlström <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277344101">(Mar 31 2022 at 21:44)</a>:</h4>
<p>What I can also do, I guess, is <code>export RUSTFLAGS=</code> in the shell and/or tweak the run config of my IDE</p>



<a name="277872009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277872009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277872009">(Apr 05 2022 at 12:46)</a>:</h4>
<p>+1 for "info" lints. I think it would be a nice addition to clippy for example linting for code pushing into an Vec in a for loop where it could be rewritten as map and collect</p>



<a name="277911963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277911963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277911963">(Apr 05 2022 at 17:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/213817-t-lang/topic/lint.20brainstorming/near/277234215">said</a>:</p>
<blockquote>
<p>I think the core problem is that for any lint that's not "hey, you should just update this right now", spitting a bunch of things onto the console is the wrong way to do it.  (Overstatement for emphasis: and thus clippy shouldn't exist.)</p>
</blockquote>
<p>this seems like an important insight that i've somehow managed to miss for years. (Although maybe it conflicts with Josh's point that forcing people to change their code is important for establishing communal norms....?</p>



<a name="277914025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277914025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277914025">(Apr 05 2022 at 17:22)</a>:</h4>
<p>I don't really think it conflicts. There always is the option not to use clippy. If you want people to use it it should not be as obnoxious as the original.</p>



<a name="277914162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277914162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277914162">(Apr 05 2022 at 17:23)</a>:</h4>
<p>There already is the pedantic category after all.</p>



<a name="277914215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277914215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277914215">(Apr 05 2022 at 17:23)</a>:</h4>
<p>So having something between ignoring it and making it a warning makes sense.</p>



<a name="277925119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277925119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277925119">(Apr 05 2022 at 18:37)</a>:</h4>
<p>Most people I know don't use clippy, except perhaps as an afterthought. That's kinda an RA issue I guess though.</p>



<a name="277986289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277986289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277986289">(Apr 06 2022 at 07:46)</a>:</h4>
<p>clippy is checked in CI in a mostly-default configuration in almost all the projects (open source and proprietary) I contribute to</p>



<a name="277986352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277986352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277986352">(Apr 06 2022 at 07:47)</a>:</h4>
<p>I don't use it in VS Code checking by default because I feel it's too slow for that</p>



<a name="277986496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/lint%20brainstorming/near/277986496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/lint.20brainstorming.html#277986496">(Apr 06 2022 at 07:49)</a>:</h4>
<p>I do agree with the feeling that warnings are a bit of a pain in active development, I guess I would like a <code>cargo check</code> option to enable all the warning spew and info lints and clippy, something that I could run before pushing</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
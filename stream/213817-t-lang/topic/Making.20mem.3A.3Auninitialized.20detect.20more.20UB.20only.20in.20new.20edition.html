<html>
<head><meta charset="utf-8"><title>Making mem::uninitialized detect more UB only in new edition · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html">Making mem::uninitialized detect more UB only in new edition</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="276799993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276799993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276799993">(Mar 27 2022 at 18:04)</a>:</h4>
<p>I have something I'd like to hear t-lang opinion on before someone starts to actually implement this. :)<br>
For quite a while now, we make mem::uninitialized (and mem::zeroed) panic at runtime when they are used on types like <code>&amp;T</code> (see <a href="https://github.com/rust-lang/rust/issues/66151">#66151</a>). However, we currently do <em>not</em> panic when they are used on <em>arrays</em> of such types, because crater always came back with too many regressions when we tried this (most recently in <a href="https://github.com/rust-lang/rust/issues/87041">#87041</a>). The last crater run had around 80% of its regressions caused by crates that use old versions of hyper or ancient versions of crossbeam. I am not sure if those crates will ever go sufficiently out of use that we can just break them.</p>
<p>So <span class="user-mention" data-user-id="125294">@Aaron Hill</span> made the proposal of also taking into account the edition of the crate that calls the intrinsic, and only panicking if it is a 2021 (or higher) edition crate. What do y'all think of that? This would help ensure that at least new code doesn't use these functions the wrong way.</p>



<a name="276800098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276800098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276800098">(Mar 27 2022 at 18:06)</a>:</h4>
<p>Caveat: the intrinsic is called fron libcore functional which would need to be inclined for this to work</p>



<a name="276800300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276800300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276800300">(Mar 27 2022 at 18:11)</a>:</h4>
<p>If <a href="https://github.com/rust-lang/rust/pull/86699">https://github.com/rust-lang/rust/pull/86699</a> were to be merged libcore could directly re-export the intrinsic without using a wrapper.</p>



<a name="276800922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276800922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276800922">(Mar 27 2022 at 18:26)</a>:</h4>
<p>If we're using an edition boundary can't we just remove it completely (for that edition)? Or are there cases where mem::uninitialized is still better than MaybeUninit?</p>



<a name="276803610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276803610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jak{e,ob} Degen <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276803610">(Mar 27 2022 at 19:28)</a>:</h4>
<p>I mean, the behavior of <code>mem::uninitialized()</code> can - afaik - be completely recovered via <code>MaybeUninit::uninit().assume_init()</code>. That looks a lot scarier, which is why I prefer it even in cases when it's correct</p>



<a name="276804658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276804658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276804658">(Mar 27 2022 at 19:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition/near/276800922">said</a>:</p>
<blockquote>
<p>If we're using an edition boundary can't we just remove it completely (for that edition)? Or are there cases where mem::uninitialized is still better than MaybeUninit?</p>
</blockquote>
<p><code>mem::uninitialized</code> indeed can hopefully be removed entirely in some future edition, but it seems too late to do that for 2021. (and we don't have infrastructure for things like this currently.)</p>



<a name="276804665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276804665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276804665">(Mar 27 2022 at 19:55)</a>:</h4>
<p><code>mem::zeroed</code> in the other hand still has some legitimate uses so we might still want to work on the panics for that</p>



<a name="276909362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276909362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276909362">(Mar 28 2022 at 17:52)</a>:</h4>
<p>I think it's quite reasonable to remove it from 2024.</p>



<a name="276910883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276910883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276910883">(Mar 28 2022 at 18:06)</a>:</h4>
<p>+1 to doing <em>something</em> in Rust 2024</p>



<a name="276910894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276910894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276910894">(Mar 28 2022 at 18:06)</a>:</h4>
<p>and I think something aggressive :)</p>



<a name="276913203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276913203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276913203">(Mar 28 2022 at 18:25)</a>:</h4>
<p>If we never remove deprecated stuff in a future edition it's basically not even deprecated. Out with the <code>uninitialized</code></p>



<a name="276913929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276913929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276913929">(Mar 28 2022 at 18:31)</a>:</h4>
<p>maybe a default-deny <code>edition_deprecated</code> lint?</p>



<a name="276914224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276914224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276914224">(Mar 28 2022 at 18:34)</a>:</h4>
<p>I was thinking something along the lines of a <code>#[rustc_removed_in_edition]</code> that is very much <em>not</em> a lint.</p>



<a name="276914261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276914261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276914261">(Mar 28 2022 at 18:34)</a>:</h4>
<p>IE. the thing just doesn't exist to edition 2024 code.</p>



<a name="276950703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276950703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276950703">(Mar 29 2022 at 02:04)</a>:</h4>
<p>yeah that sounds good</p>



<a name="276952292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276952292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276952292">(Mar 29 2022 at 02:44)</a>:</h4>
<p>I was meaning to file a T-compiler MCP for such an attribute. If I remember I'll do it in the morning, though I likely won't be able to work on implementing it.</p>



<a name="276974073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276974073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276974073">(Mar 29 2022 at 08:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257758">Connor Horman</span> <a href="#narrow/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition/near/276914224">said</a>:</p>
<blockquote>
<p>I was thinking something along the lines of a <code>#[rustc_removed_in_edition]</code> that is very much <em>not</em> a lint.</p>
</blockquote>
<p>I think a better option would be to make a lint but leverage the "edition-dependent" options so that it is <em>forbidden</em> in Rust 2024 but deny-by-default earlier.</p>



<a name="276974082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276974082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276974082">(Mar 29 2022 at 08:41)</a>:</h4>
<p>that would still not impact code using outdated dependencies</p>



<a name="276974098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276974098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276974098">(Mar 29 2022 at 08:41)</a>:</h4>
<p>I forget if we have done that in the past, I think maybe :)</p>



<a name="276974166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276974166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276974166">(Mar 29 2022 at 08:42)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> would remember-- I believe they took point on making some previously linted things into hard errors for Rust 2021?</p>



<a name="276975660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276975660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276975660">(Mar 29 2022 at 08:57)</a>:</h4>
<p>Yea, we've made things that are lints in previous editions hard errors in newer editions. See <a href="https://github.com/rust-lang/rust/pull/83213">here</a></p>



<a name="276984095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/276984095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#276984095">(Mar 29 2022 at 10:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition/near/276974073">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="257758">Connor Horman</span> <a href="#narrow/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition/near/276914224">said</a>:</p>
<blockquote>
<p>I was thinking something along the lines of a <code>#[rustc_removed_in_edition]</code> that is very much <em>not</em> a lint.</p>
</blockquote>
<p>I think a better option would be to make a lint but leverage the "edition-dependent" options so that it is <em>forbidden</em> in Rust 2024 but deny-by-default earlier.</p>
</blockquote>
<p>Forbidden as in forbid-by-default? Or forbidden as in actual hard error.</p>



<a name="277007571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/277007571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jules Bertholet <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#277007571">(Mar 29 2022 at 13:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257758">Connor Horman</span> <a href="#narrow/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition/near/276984095">said</a>:</p>
<blockquote>
<p>Forbidden as in forbid-by-default? Or forbidden as in actual hard error.</p>
</blockquote>
<p><code>#![forbid(lint)]</code>, unlike <code>#![deny(lint)]</code>, doesn't allow you to subsequently use <code>#![allow(lint)]</code>.</p>



<a name="277008844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/277008844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#277008844">(Mar 29 2022 at 14:01)</a>:</h4>
<p>Yes, but forbid lints are affected by <code>--cap-lints</code>.</p>



<a name="277026257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/277026257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#277026257">(Mar 29 2022 at 15:54)</a>:</h4>
<p>also for things I looked into that became hard errors, the future-warning lint and the hard error are actually completely independent implementations (e.g. for requiring <code>dyn</code>)</p>



<a name="277040015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/277040015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#277040015">(Mar 29 2022 at 17:32)</a>:</h4>
<p>just so y'all know, I literally proposed and implemented a denied-in-edition lint here: <a href="https://github.com/rust-lang/rfcs/pull/3088">https://github.com/rust-lang/rfcs/pull/3088</a> :P</p>



<a name="277114048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/277114048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#277114048">(Mar 30 2022 at 09:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257758">Connor Horman</span> <a href="#narrow/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition/near/277008844">said</a>:</p>
<blockquote>
<p>Yes, but forbid lints are affected by <code>--cap-lints</code>.</p>
</blockquote>
<p>I forgot about that :) I meant a hard error. No strong opinion, I suppose, about whether it's always a lint or what.</p>



<a name="277114104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Making%20mem%3A%3Auninitialized%20detect%20more%20UB%20only%20in%20new%20edition/near/277114104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Making.20mem.3A.3Auninitialized.20detect.20more.20UB.20only.20in.20new.20edition.html#277114104">(Mar 30 2022 at 09:04)</a>:</h4>
<p>But I do think it'd be ok to make it deny-by-default in older editions</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
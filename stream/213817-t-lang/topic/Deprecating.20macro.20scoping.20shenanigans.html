<html>
<head><meta charset="utf-8"><title>Deprecating macro scoping shenanigans · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html">Deprecating macro scoping shenanigans</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272857859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272857859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272857859">(Feb 22 2022 at 19:54)</a>:</h4>
<p>Compiler is having an interesting conversation about stuff that makes their life difficult.</p>
<p>I thought I'd raise this one as something that we could plausibly start doing something about:<br>
<a href="#narrow/stream/131828-t-compiler/topic/future.20of.20incremental.20compilation/near/272856809">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/future.20of.20incremental.20compilation/near/272856809</a></p>
<p>Namely, that this works today, even in 2021 edition:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cp">#[macro_export]</span><span class="w"></span>
<span class="w">    </span><span class="fm">macro_rules!</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">()</span><span class="o">=&gt;</span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">bar</span><span class="o">!</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>How would people feel about linting for <code>#[macro_export]</code>s not at "normal" module scope?  With the intent to just disallow that in EditionNext.</p>
<p>(Thankfully this at least doesn't work without the <code>#[macro_export]</code>.)</p>



<a name="272860175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272860175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272860175">(Feb 22 2022 at 20:12)</a>:</h4>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> I'm kinda sad that <code>pub macro_rules!</code> seems to have fallen by the wayside; I'd love to get to the point that we don't need <code>#[macro_export]</code> at all.</p>



<a name="272860214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272860214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272860214">(Feb 22 2022 at 20:12)</a>:</h4>
<p>But yeah, future-compatibility-warning that with an eye towards disallowing it in 2024 sounds good to me.</p>



<a name="272860652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272860652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272860652">(Feb 22 2022 at 20:16)</a>:</h4>
<p>This is the kind of thing that I think creating a 2024 edition at some point makes sense. As in, having an unstable edition for the next couple years. May as well do the work whenever instead of pushing it all into one year.</p>



<a name="272861779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272861779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272861779">(Feb 22 2022 at 20:26)</a>:</h4>
<p>I agree that it'd be nice for there to <em>always</em> be an unstable edition, <span class="user-mention silent" data-user-id="245610">Jacob Pratt</span>.</p>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272860175">said</a>:</p>
<blockquote>
<p>I'd love to get to the point that we don't need <code>#[macro_export]</code> at all.</p>
</blockquote>
<p>I'd be curious what, if any, scenarios still require that for back-compat with 2015 crates consuming the macro.  I'm worried there might be some.</p>
<p>Though that gives another potential avenue: say that <code>#[macro_export]</code> in 2024 has no effect <em>inside</em> the crate at all, and is only about what's exported for consumption by ..=2021 crates.</p>



<a name="272861932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272861932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272861932">(Feb 22 2022 at 20:27)</a>:</h4>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> <code>#[allow(ugh)] #[macro_export_2015_compat] pub macro_rules! ...</code> ;)</p>



<a name="272862460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272862460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272862460">(Feb 22 2022 at 20:32)</a>:</h4>
<blockquote>
<p>I agree that it'd be nice for there to always be an unstable edition,</p>
</blockquote>
<p>yes please, I've mentioned this in the past but I really feel like we should create the new edition flag as part of stabilizing the previous one and just land edition dependent changes into it as they're finished throughout that next 3 year period</p>



<a name="272862505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272862505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272862505">(Feb 22 2022 at 20:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby [she/her]</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272862460">said</a>:</p>
<blockquote>
<blockquote>
<p>I agree that it'd be nice for there to always be an unstable edition,</p>
</blockquote>
<p>yes please, I've mentioned this in the past but I really feel like we should create the new edition flag as part of stabilizing the previous one and just land edition dependent changes into it as they're finished throughout that next 3 year period</p>
</blockquote>
<p>Yes please!</p>



<a name="272862567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272862567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272862567">(Feb 22 2022 at 20:33)</a>:</h4>
<p>How hard is it to create a new edition? I wouldn't think it's that hard.</p>



<a name="272862576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272862576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272862576">(Feb 22 2022 at 20:33)</a>:</h4>
<p>(now that the 3 year pace is formalized)</p>



<a name="272862696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272862696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272862696">(Feb 22 2022 at 20:34)</a>:</h4>
<p>That is sort of what C++ does.<br>
C++ compilers get a head start on implementing C++n+3 features as they start getting proposed and added to the working draft after C++n ships.</p>



<a name="272863460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272863460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272863460">(Feb 22 2022 at 20:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="245610">Jacob Pratt</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272862567">said</a>:</p>
<blockquote>
<p>How hard is it to create a new edition? I wouldn't think it's that hard.</p>
</blockquote>
<p>I think if it's just an empty edition it's easy.  The hard part is collecting all the various things that are supposed to stabilize in it all at once.  But if those are done bit-by-bit over years, that would also be no big deal.</p>



<a name="272863497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272863497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272863497">(Feb 22 2022 at 20:41)</a>:</h4>
<p>Yeah I'm referring to creating 2024, which would of course have nothing initially.</p>



<a name="272863593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272863593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272863593">(Feb 22 2022 at 20:42)</a>:</h4>
<p>Working on an unrelated PR right now, but I can look into doing that later.</p>



<a name="272863905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272863905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272863905">(Feb 22 2022 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272863460">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="245610">Jacob Pratt</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272862567">said</a>:</p>
<blockquote>
<p>How hard is it to create a new edition? I wouldn't think it's that hard.</p>
</blockquote>
<p>I think if it's just an empty edition it's easy.  The hard part is collecting all the various things that are supposed to stabilize in it all at once.  But if those are done bit-by-bit over years, that would also be no big deal.</p>
</blockquote>
<p>So long as we're careful to make sure nothing gets merged into the unstable edition channel until it's completely ready to be released including migration lints, etc</p>



<a name="272865582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272865582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272865582">(Feb 22 2022 at 20:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272860175">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> I'm kinda sad that <code>pub macro_rules!</code> seems to have fallen by the wayside; I'd love to get to the point that we don't need <code>#[macro_export]</code> at all.</p>
</blockquote>
<p>The only problem with <code>pub macro_rules</code> was that the implementation was slightly buggy around metadata encoding/decoding, and no one had time to fix it.<br>
All the motivation for it still holds, and I would still like to see it as a replacement of <code>#[macro_export]</code>.</p>



<a name="272866244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272866244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272866244">(Feb 22 2022 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby [she/her]</span> Is there any reason we can't merge things into the edition channel that are still <em>unstable</em>?</p>



<a name="272866345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272866345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272866345">(Feb 22 2022 at 21:01)</a>:</h4>
<p>I would think it'd be fine to add something to the edition, and work on it there, as long as it isn't stable.</p>



<a name="272866431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272866431" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272866431">(Feb 22 2022 at 21:02)</a>:</h4>
<p>Ah, and the second issue was that the migration lints required by the edition policy add several times more technical debt than any language cleanup removes, that kills all the motivation to work on such changes for me personally.</p>



<a name="272866941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272866941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272866941">(Feb 22 2022 at 21:06)</a>:</h4>
<p>For my part, I feel like cases where 90% of the time it'll Just Work are cases where it's sufficient to just lint on the old thing and suggest the new thing. I don't actually feel like we <em>have</em> to have a perfect rustfix for every edition migration, though I know others disagree with that.</p>



<a name="272871543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272871543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272871543">(Feb 22 2022 at 21:52)</a>:</h4>
<p>decl_macros are much better for handling actual scoping, tbh.</p>



<a name="272875053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272875053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272875053">(Feb 22 2022 at 22:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272866345">said</a>:</p>
<blockquote>
<p>I would think it'd be fine to add something to the edition, and work on it there, as long as it isn't stable.</p>
</blockquote>
<p>it splits the universe a second time: you have edition current/unstable and also toolchain stable/nightly. This might be worth the slightly mental overhead.</p>



<a name="272875357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272875357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272875357">(Feb 22 2022 at 22:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272875053">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272866345">said</a>:</p>
<blockquote>
<p>I would think it'd be fine to add something to the edition, and work on it there, as long as it isn't stable.</p>
</blockquote>
<p>it splits the universe a second time: you have edition current/unstable and also toolchain stable/nightly. This might be worth the slightly mental overhead.</p>
</blockquote>
<p>I think that's sufficiently orthogonal.</p>



<a name="272877311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272877311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272877311">(Feb 22 2022 at 22:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans/near/272866244">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby [she/her]</span> Is there any reason we can't merge things into the edition channel that are still <em>unstable</em>?</p>
</blockquote>
<p>I think the main issue is that strict due diligence has to be done at some point in the process. Either we require the authors of new edition changes to satisfy a checklist or something to make sure that they've done everything necessary to prepare their feature for an edition (e.g., rustfix migrations, lints, docs, etc), we have the edition team do so for all authors at the end of each edition cycle and move any work that isn't fully ready to the next edition, or we use some other approach</p>



<a name="272877420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272877420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272877420">(Feb 22 2022 at 22:45)</a>:</h4>
<p>My worry is that the second approach is going to be more burdensome for maintainers and more error prone</p>



<a name="272877554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272877554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272877554">(Feb 22 2022 at 22:46)</a>:</h4>
<p>but it could easily be that the amount of extra work and the risk of missing some of said work is less significant than I anticipate</p>



<a name="272976363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272976363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272976363">(Feb 23 2022 at 16:53)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="281468">@Arthur Cohen</span> as you are currently working on implementing macro_rules! in gccrs.</p>



<a name="272979252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272979252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arthur Cohen <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272979252">(Feb 23 2022 at 17:11)</a>:</h4>
<p>Thanks :) We haven't run into macro scoping shenanigans in gccrs yet, as visibility modifiers and imports are not completely implemented. The <code>[macro_export]</code> attribute is for now ignored in gccrs. I know that I personally wouldn't mind its removal</p>



<a name="272979675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272979675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272979675">(Feb 23 2022 at 17:14)</a>:</h4>
<p>I can't wait to handle macro scoping schenanigans myself  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> (I'm implementing macros rn in lccc).</p>



<a name="272979730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Deprecating%20macro%20scoping%20shenanigans/near/272979730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Deprecating.20macro.20scoping.20shenanigans.html#272979730">(Feb 23 2022 at 17:14)</a>:</h4>
<p>I can agree, though, that macro_export will be annoying.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
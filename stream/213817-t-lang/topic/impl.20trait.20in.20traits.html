<html>
<head><meta charset="utf-8"><title>impl trait in traits · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/impl.20trait.20in.20traits.html">impl trait in traits</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="257619342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/impl%20trait%20in%20traits/near/257619342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/impl.20trait.20in.20traits.html#257619342">(Oct 14 2021 at 22:59)</a>:</h4>
<p>Draft RFC for return position impl trait in traits:</p>
<p><a href="https://rust-lang.github.io/impl-trait-initiative/RFCs/rpit-in-traits.html">https://rust-lang.github.io/impl-trait-initiative/RFCs/rpit-in-traits.html</a></p>
<p>Feedback eagerly desired.</p>
<p>(cc <span class="user-mention" data-user-id="124288">@oli</span>, <span class="user-mention" data-user-id="116883">@tmandry</span>)</p>



<a name="257622598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/impl%20trait%20in%20traits/near/257622598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/impl.20trait.20in.20traits.html#257622598">(Oct 14 2021 at 23:30)</a>:</h4>
<blockquote>
<p>To start, traits that use <code>-&gt; impl Trait</code> will not be considered dyn safe, <em>even if the method has a <code>where Self: Sized</code> bound</em>. This is because dyn types currently require that all associated types are named, and the <code>$</code> type cannot be named.</p>
</blockquote>
<p>Sorry, if I'm missing some context, but can't we add a <code>where Self: Sized</code> to the hidden associated type too, if the method has it? This way we could potentially disable both the method and the associated type from appearing in the trait object.</p>
<p>It seems like currently <code>type A where Self: Sized</code> does <strong>not</strong> remove the type from the trait object, but it could, right?</p>



<a name="257660224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/impl%20trait%20in%20traits/near/257660224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/impl.20trait.20in.20traits.html#257660224">(Oct 15 2021 at 08:01)</a>:</h4>
<p>I want to note that the assoc type desugaring is slightly different from what impl trait on inherent and free functions currently does. I once attempted to create such a desugaring, but it was not trivial at all. It may be easier with today's type alias impl trait, but on the implementation side it's likely a lot of work to untangle the current scheme</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
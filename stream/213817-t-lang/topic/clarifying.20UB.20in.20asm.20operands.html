<html>
<head><meta charset="utf-8"><title>clarifying UB in asm operands · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/clarifying.20UB.20in.20asm.20operands.html">clarifying UB in asm operands</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270102598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/clarifying%20UB%20in%20asm%20operands/near/270102598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bstrie <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/clarifying.20UB.20in.20asm.20operands.html#270102598">(Jan 31 2022 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> , I'm curious whether I should tweak the wording at <a href="https://doc.rust-lang.org/nightly/reference/inline-assembly.html#rules-for-inline-assembly">https://doc.rust-lang.org/nightly/reference/inline-assembly.html#rules-for-inline-assembly</a> in light of naked functions, since they deliberately don't specify any registers. Alternatively on the page about naked functions (which I'm writing right now) we could just say that naked functions are an exception to these rules, and that it isn't UB to refer to unspecified registers in that context. Thoughts?</p>



<a name="270102709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/clarifying%20UB%20in%20asm%20operands/near/270102709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/clarifying.20UB.20in.20asm.20operands.html#270102709">(Jan 31 2022 at 20:52)</a>:</h4>
<p>I would prefer keeping that on a page specifically about naked functions. The current list of rules is already very long.</p>



<a name="270102830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/clarifying%20UB%20in%20asm%20operands/near/270102830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/clarifying.20UB.20in.20asm.20operands.html#270102830">(Jan 31 2022 at 20:53)</a>:</h4>
<p>Basically none of the rules apply to naked function since they are closer to <code>global_asm!</code>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
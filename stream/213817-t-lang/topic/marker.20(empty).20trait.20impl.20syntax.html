<html>
<head><meta charset="utf-8"><title>marker (empty) trait impl syntax · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html">marker (empty) trait impl syntax</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261077930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261077930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261077930">(Nov 11 2021 at 00:45)</a>:</h4>
<p>My fingers <em>keep</em> wanting to implement marker traits like this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">unsafe</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Thingy</span><span class="p">;</span><span class="w"></span>
</code></pre></div>



<a name="261077982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261077982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261077982">(Nov 11 2021 at 00:45)</a>:</h4>
<p>I'm wondering if it might be worth considering support for that syntax, rather than requiring empty braces.</p>



<a name="261081319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261081319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261081319">(Nov 11 2021 at 01:28)</a>:</h4>
<p>(This idea brought to you by <a href="https://github.com/rust-lang/git2-rs/pull/763">https://github.com/rust-lang/git2-rs/pull/763</a> .)</p>



<a name="261082507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261082507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Pratt <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261082507">(Nov 11 2021 at 01:44)</a>:</h4>
<p>Yes please. I've done this countless times and always wanted it to work.</p>



<a name="261082798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261082798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261082798">(Nov 11 2021 at 01:49)</a>:</h4>
<p>It feels like an odd special case for <em>marker</em> traits. Wouldn't you want it, if at all, for all traits with no methods (which are a superset of <a href="https://doc.rust-lang.org/nightly/unstable-book/language-features/marker-trait-attr.html"><code>#[marker]</code></a> traits)?</p>
<p>But I'm not convinced of the value -- we don't allow almost any <code>{}</code> -&gt; <code>;</code> -- only on structs, really, right?</p>



<a name="261082822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261082822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261082822">(Nov 11 2021 at 01:49)</a>:</h4>
<p>also on structs it has an actual effect, it is not interchangeable</p>



<a name="261083011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261083011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261083011">(Nov 11 2021 at 01:52)</a>:</h4>
<p>also trait methods, again not interchangeable, and item-like macros (here it is interchangeable but parens or braces are required)</p>



<a name="261083166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261083166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261083166">(Nov 11 2021 at 01:55)</a>:</h4>
<p>so while I wouldn't mind seeing this in the language, I think <span class="user-mention silent" data-user-id="116122">simulacrum</span> is right that there isn't any precedent for this</p>



<a name="261083494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261083494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261083494">(Nov 11 2021 at 02:00)</a>:</h4>
<p><code>unsafe trait Send; unsafe impl Send for Thingy;</code> to be consistent?</p>



<a name="261083745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261083745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261083745">(Nov 11 2021 at 02:03)</a>:</h4>
<p>I'm not sure that makes things more consistent, it only moves the inconsistency to people using <code>unsafe impl Send for Thingy {}</code></p>



<a name="261085074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261085074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261085074">(Nov 11 2021 at 02:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/213817-t-lang/topic/marker.20.28empty.29.20trait.20impl.20syntax/near/261082798">said</a>:</p>
<blockquote>
<p>It feels like an odd special case for <em>marker</em> traits. Wouldn't you want it, if at all, for all traits with no methods (which are a superset of <a href="https://doc.rust-lang.org/nightly/unstable-book/language-features/marker-trait-attr.html"><code>#[marker]</code></a> traits)?</p>
</blockquote>
<p>To be clear, I think this should work for any trait, and it's just only useful for traits where you don't have to implement any methods.</p>



<a name="261092793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261092793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261092793">(Nov 11 2021 at 04:42)</a>:</h4>
<p>If we allow <code>;</code> instead of <code>{}</code> for empty trait impl, then for consistency one could claim that we should also allow empty functions to be written like <code>fn foo();</code> (which we definitely don't want)</p>



<a name="261102429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261102429" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261102429">(Nov 11 2021 at 07:42)</a>:</h4>
<p>Yeah, I worry that there is a subtle distinction between {} and ; and that conflating the two in some cases would lead to more confusion</p>



<a name="261102630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261102630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261102630">(Nov 11 2021 at 07:46)</a>:</h4>
<p>My fingers <em>also</em> want to type that, but I'm not convinced that means we should allow it.  Personally I file that in the same bucket as "oops, I wrote <code>struct Foo { x: i32 };</code> again" -- something for which there should be (and is) a nice structured suggestion, but not a grammar change.  (And maybe r-a should just auto-convert a typed <code>;</code> to a <code>{}</code> there, since it's clear there that you're dealing with an <code>impl</code>.)</p>



<a name="261102758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261102758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261102758">(Nov 11 2021 at 07:49)</a>:</h4>
<p>With a time machine I'd definitely like "marker traits and auto traits are always with <code>;</code> instead of braces", but I'm not convinced an migration would be worth it here.  (And I'm not a fan of allowing both when it's not substantially better.)</p>



<a name="261107670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/marker%20%28empty%29%20trait%20impl%20syntax/near/261107670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/marker.20(empty).20trait.20impl.20syntax.html#261107670">(Nov 11 2021 at 08:56)</a>:</h4>
<p>The win might be smaller than you think in many cases because rustfmt insists on breaking where bounds onto new lines anyway.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
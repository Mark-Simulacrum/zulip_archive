<html>
<head><meta charset="utf-8"><title>Stabilization of `explicit_generic_args_with_impl_trait` · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html">Stabilization of `explicit_generic_args_with_impl_trait`</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="270916184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270916184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270916184">(Feb 06 2022 at 22:45)</a>:</h4>
<p>Hi! I want to propose stabilization of <a href="https://github.com/rust-lang/rust/issues/83701"><code>#![feature(explicit_generic_args_with_impl_trait)]</code></a>. As a reminder it allows the <a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=74a2888789d5b71cae31889b2147e7de">following</a>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">collect</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span>: <span class="nc">impl</span><span class="w"> </span><span class="nb">IntoIterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">into_iter</span><span class="p">().</span><span class="n">collect</span><span class="p">()</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="c1">// Currently, on stable turbofish is not allowed even for normal generic</span>
<span class="c1">// parameters if there is at least one APIT in the signature.</span>
<span class="n">collect</span>::<span class="o">&lt;</span><span class="kt">u16</span><span class="o">&gt;</span><span class="p">([</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
</code></pre></div>
<p>It removes an old problem with APIT, which probably made it so rare to see anywhere. Previously it was said to be too new for stabilization, but since then almost a year has passed, so I don't think it's a problem anymore.</p>
<p>What would be the path towards stabilization? :)</p>



<a name="270916350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270916350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270916350">(Feb 06 2022 at 22:48)</a>:</h4>
<p>I think the big question for it is whether there should be a path for switching things from explicit generics to APIT and vice versa.  I know some people have wanted that.</p>
<p>I do like the idea of not allowing specifying the types that realistically you don't ever turbofish anyway (I like <code>impl Fn</code> alot, for example), but then I want to do that for <code>core</code> stuff too where I can't because the generics are frozen as they are forever.</p>



<a name="270916431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270916431" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270916431">(Feb 06 2022 at 22:50)</a>:</h4>
<p>Regardless, we'd need to settle the ordering question (how to interleave them) presumably, right? My guess is that a good next step is for someone to summarize the various places and make choices that seem good to them (which could then get discussed).</p>



<a name="270916746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270916746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270916746">(Feb 06 2022 at 22:58)</a>:</h4>
<p>One point why there shouldn't be an option to set APIT types via turbofish is as follows: when APIT is a type that you don't usually want to name (<code>Fn</code>, <code>Iterator</code>, etc) but the generic is a type that you may want to set explicitly, then not having to write an additional <code>_</code> is a good thing:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">run_with_default</span><span class="o">&lt;</span><span class="n">T</span>: <span class="nb">Default</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>: <span class="nc">impl</span><span class="w"> </span><span class="nb">Fn</span><span class="p">(</span><span class="n">T</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">f</span><span class="p">(</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span>::<span class="n">default</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// when you can't set `impl Trait` with turbofish, but can set the normal generics</span>
<span class="n">run_with_default</span>::<span class="o">&lt;</span><span class="kt">u16</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">);</span><span class="w"></span>

<span class="c1">// when you can set `impl Trait`&amp; normal generics</span>
<span class="n">run_with_default</span>::<span class="o">&lt;</span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">);</span><span class="w"></span>
</code></pre></div>



<a name="270916748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270916748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270916748">(Feb 06 2022 at 22:58)</a>:</h4>
<p>I think defining a fixed order (apit after declared) makes sense.</p>



<a name="270916913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270916913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270916913">(Feb 06 2022 at 23:01)</a>:</h4>
<p>I actually <em>like</em> that it's impossible to mention the APIT generics in turbofish, BTW.  It's really nice for semver.</p>



<a name="270916969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270916969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270916969">(Feb 06 2022 at 23:03)</a>:</h4>
<p>Especially since it's impossible to add "local variables" in bounds without adding them to the generics list, which is really really unfortunate -- see changes like <a href="https://github.com/rust-lang/rust/pull/91286/files#r757758209">https://github.com/rust-lang/rust/pull/91286/files#r757758209</a> that I could only do because it was unstable</p>



<a name="270917053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270917053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270917053">(Feb 06 2022 at 23:04)</a>:</h4>
<p>Order of APITs is not really clear though. For example: what version should compile here (if we decide to also allow setting APITs)?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">Tuple</span><span class="o">&lt;</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">);</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">f</span><span class="p">(</span><span class="n">_</span>: <span class="nc">Tuple</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="nb">Send</span><span class="p">,</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="nb">Send</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="c1">// as reads in the impl</span>
<span class="n">f</span>::<span class="o">&lt;</span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="kt">str</span><span class="o">&gt;</span><span class="p">((</span><span class="s">"s"</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="k">u8</span><span class="p">));</span><span class="w"></span>

<span class="c1">// order in the type?</span>
<span class="n">f</span>::<span class="o">&lt;&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="kt">u8</span><span class="o">&gt;</span><span class="p">((</span><span class="mi">0</span><span class="k">u8</span><span class="p">,</span><span class="w"> </span><span class="s">"s"</span><span class="p">));</span><span class="w"></span>
</code></pre></div>
<p>Personally I think that allowing to set the types of APITs via turbofish would be just confusing and not really helpful.</p>



<a name="270917077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270917077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270917077">(Feb 06 2022 at 23:05)</a>:</h4>
<p>One way forward-compatible with Josh's possibility of specifying them all would be to allow <code>::&lt;u16, ..&gt;</code> for "and there are zero or more additional generic arguments"</p>



<a name="270917141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270917141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270917141">(Feb 06 2022 at 23:06)</a>:</h4>
<p>That might be nice to have for normal generics too, though would certainly encourage putting important generics first, which I don't know that things are currently following.</p>



<a name="270917164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270917164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270917164">(Feb 06 2022 at 23:07)</a>:</h4>
<p>Another option for going forward with the APIT turbo fish would be a way to have "private" generic parameters that aren't turbofish-able, and say that APIT desugars to those.</p>



<a name="270917177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270917177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270917177">(Feb 06 2022 at 23:07)</a>:</h4>
<p>Which would be nice for the "I want a local variable in my bounds" use case too.</p>



<a name="270917689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270917689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270917689">(Feb 06 2022 at 23:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60/near/270916748">said</a>:</p>
<blockquote>
<p>I think defining a fixed order (apit after declared) makes sense.</p>
</blockquote>
<p>What about default type params? You presumably need to go before, but that seems a little awkward. Can't add defaults after the fact?</p>



<a name="270918194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270918194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270918194">(Feb 06 2022 at 23:35)</a>:</h4>
<p>there arent any default type/const params on fn generics (atm, maybe one day who knows)</p>



<a name="270918271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270918271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270918271">(Feb 06 2022 at 23:37)</a>:</h4>
<p>I think they're unstable? Even so, we should consider the impact of eventually adding them.</p>



<a name="270918435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270918435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270918435">(Feb 06 2022 at 23:41)</a>:</h4>
<p>const defaults are a hard error, type defaults are a deny by default lint (because they dont do anything, <a href="https://github.com/rust-lang/rust/issues/36887">#36887</a>) and im not aware of any feature for making them do stuff <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span><br>
regardless I think you're right about considering impact of eventually adding them ^^ I half-seriously suggest a "double turbofish"</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span>: <span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="n">_</span>: <span class="nc">impl</span><span class="w"> </span><span class="nb">Into</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">foo</span>::<span class="o">&lt;</span><span class="kt">u32</span><span class="o">&gt;</span>::<span class="o">&lt;&amp;'</span><span class="nb">static</span><span class="w"> </span><span class="kt">str</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">"bar"</span><span class="p">);</span><span class="w"></span>
</code></pre></div>



<a name="270964112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270964112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270964112">(Feb 07 2022 at 11:25)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="273349">@Waffle Lapkin</span>: </p>
<ul>
<li>most usages of apit are not intended to be turbofishable, and even having the option to do it could be confusing;</li>
<li>while trailing <code>, ..</code> would be a way to tackle that, we'd effectively be hindering most of these use cases just to allow the rare case of somebody wanting to turbofish that parameter,</li>
</ul>
<p>And I'd add:</p>
<ul>
<li>if that parameter is expected to be turbofished a lot, then it shouldn't have been written with apit to begin with,</li>
<li>And for the rare cases of people wanting to turbofish it, a helper function is always around as a fallback alternative.</li>
</ul>
<p>Note that the last point is <em>already the current situation</em>, but affecting the actual generic params.</p>
<p>So, if ppl are that concerned about future-proofing, we could start with <code>, ..</code>, but I'd still expect it to be unnecessary in the mid term.</p>



<a name="270966569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270966569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270966569">(Feb 07 2022 at 11:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60/near/270917164">said</a>:</p>
<blockquote>
<p>Another option for going forward with the APIT turbo fish would be a way to have "private" generic parameters that aren't turbofish-able, and say that APIT desugars to those.</p>
</blockquote>
<p>We used to have rustc_synthetic, but that's removed in <a href="https://github.com/rust-lang/rust/issues/91002">#91002</a>.</p>



<a name="270967403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270967403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270967403">(Feb 07 2022 at 11:59)</a>:</h4>
<p>For @scottmcm's use case it seems that <code>#[rustc_synthetic]</code> would actually be a good fit (with a better name of course)? Maybe we should just reintroduce it.</p>



<a name="270967444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270967444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270967444">(Feb 07 2022 at 12:00)</a>:</h4>
<p>It would be easier if turbofish worked with namable parameters. <code>::&lt;T=u16, 0=&amp;'static str&gt;</code></p>



<a name="270967596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270967596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270967596">(Feb 07 2022 at 12:01)</a>:</h4>
<p>You still need to assign a canonical order for APIT with namable params though.</p>



<a name="270967673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270967673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270967673">(Feb 07 2022 at 12:02)</a>:</h4>
<p>Maybe. Or the argument name could be abused for that purpose?</p>



<a name="270967758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270967758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270967758">(Feb 07 2022 at 12:02)</a>:</h4>
<p>Downside is that it would make them part of the API.</p>



<a name="270967808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270967808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270967808">(Feb 07 2022 at 12:03)</a>:</h4>
<p>I personally think any order assigned to APIT would be confusing, given that APIT can be nested, e.g. <code>impl Deref&lt;Target = impl AsRef&lt;str&gt;&gt;</code></p>



<a name="270968087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270968087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270968087">(Feb 07 2022 at 12:06)</a>:</h4>
<p>We can add <del>epicycles</del> nesting <code>::&lt;T=u16, 0=(Foo, Bar)&gt;</code></p>



<a name="270968293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270968293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270968293">(Feb 07 2022 at 12:08)</a>:</h4>
<p>Which one is which though? If the order follows source code order than it's <code>&lt;U: Deref&lt;Target = T&gt;, T: AsRef&lt;str&gt;&gt;</code>, but I suspect most people would write <code>&lt;T: AsRef&lt;str&gt;, U: Deref&lt;Target = T&gt;&gt;</code> without APIT.</p>



<a name="270968386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270968386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gary Guo <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270968386">(Feb 07 2022 at 12:09)</a>:</h4>
<p>So it isn't really clear whether it shall be <code>(Foo, Bar)</code> or <code>(Bar, Foo)</code></p>



<a name="270968618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270968618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270968618">(Feb 07 2022 at 12:11)</a>:</h4>
<p>I wouldn't reason about how it desugars unless something forced me to</p>



<a name="270968643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270968643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270968643">(Feb 07 2022 at 12:12)</a>:</h4>
<p>So, source order</p>



<a name="270969127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270969127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270969127">(Feb 07 2022 at 12:16)</a>:</h4>
<p><code>::&lt;T=u16, 0=(Foo, &lt;Foo as Deref&gt;::Target=Bar)&gt;</code> but at that point it gets complicated enough that some way to split it out would be nice...</p>



<a name="270969338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270969338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270969338">(Feb 07 2022 at 12:18)</a>:</h4>
<p>Wait, doesn't a concrete type already constrain the associated type?</p>



<a name="270969828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270969828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270969828">(Feb 07 2022 at 12:23)</a>:</h4>
<p><code>::&lt;T=u16, 0=Foo&lt;_&gt;&gt;</code> should be sufficient, no nesting concerns within a parameter other than the type's own generics.</p>



<a name="270972125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270972125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Waffle Lapkin <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270972125">(Feb 07 2022 at 12:44)</a>:</h4>
<p>This naming scheme seems like an unnecessary complication</p>



<a name="270979669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/270979669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#270979669">(Feb 07 2022 at 13:45)</a>:</h4>
<p>It helps with naming only some (of potentially many) generics. It also helps a little with forward compatibility. E.g. adding a new named generic wouldn't affect the APIT indexing.</p>



<a name="278172284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/278172284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#278172284">(Apr 07 2022 at 14:30)</a>:</h4>
<p>I'm resurrecting this thread because I want to stabilise the feature flag here. I would like to propose we do this without worrying too much about whether we will be able to turbofish APIT in the future, lets assume that if we do permit that (and there doesn't seem to be any urgency to do it) then we can do it backwards compatibly (i.e., the <code>, ..</code> proposal, but its implicit). Then we can stop bikeshedding the hypothetical and stabilise this useful feature which gets around a real papercut.</p>



<a name="278191275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/278191275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#278191275">(Apr 07 2022 at 16:32)</a>:</h4>
<p>I would be in favor of that as a first step.</p>



<a name="278198975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/Stabilization%20of%20%60explicit_generic_args_with_impl_trait%60/near/278198975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60.html#278198975">(Apr 07 2022 at 17:29)</a>:</h4>
<p>I think it's nice for library flexibility to be able to use APIT for "look, you don't want to turbofish this one (often an <code>F</code>), but the others are reasonable".</p>
<p>So <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> to moving forward, but I'd still also like the "APIT desugars to a 'private' parameter" (or something) like I mentioned above in <a href="#narrow/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60/near/270917164">https://rust-lang.zulipchat.com/#narrow/stream/213817-t-lang/topic/Stabilization.20of.20.60explicit_generic_args_with_impl_trait.60/near/270917164</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>&quot;Why use `const` over `let`?&quot; · t-lang · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/index.html">t-lang</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html">&quot;Why use `const` over `let`?&quot;</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="195784915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195784915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195784915">(Apr 29 2020 at 23:55)</a>:</h4>
<p>A <code>const</code> is <em>absolutely required</em> to have been evaluated at compile time. A <code>let</code> might or might not be.</p>
<p>I once asked on github "can we get some way to have an assurance that <code>let</code> with a const fn and const args will be compile time evaluated?" and the answer (i forget who from) was "No, just use a const if you want that".</p>
<p>So if you want to ensure compile time evaluation, you need to use <code>const</code></p>



<a name="195837528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195837528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Malton <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195837528">(Apr 30 2020 at 13:23)</a>:</h4>
<p>Why not use both in tandem?</p>
<div class="codehilite"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">X</span>: <span class="nc">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">X</span><span class="p">;</span><span class="w"></span>
</code></pre></div>



<a name="195840866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195840866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195840866">(Apr 30 2020 at 13:48)</a>:</h4>
<p>I think const generics will eventually provide something here. For example:</p>
<div class="codehilite"><pre><span></span><code><span class="k">struct</span> <span class="nc">ConstVal</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">V</span>: <span class="nc">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">PhantomData</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">V</span>:<span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ConstVal</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">V</span><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="k">const</span><span class="w"> </span><span class="n">VALUE</span>: <span class="nc">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">V</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>


<p>Then you can just <code>ConstVal&lt;i32, {E}&gt;::VALUE</code> to get a const value of E.</p>



<a name="195848628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195848628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hanna Kruppe <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195848628">(Apr 30 2020 at 14:40)</a>:</h4>
<p>There's occasional talk of a <code>const { &lt;expr&gt; }</code> syntax, e.g. as an alternative to expanding the scope of promotion. If introduced, that would be both more convenient to use and easier to fully implement and stabilize than using const generics.</p>



<a name="195874279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195874279" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195874279">(Apr 30 2020 at 17:33)</a>:</h4>
<p>(Note that the topic was written in the context of the edition meeting earlier this week that was posted on youtube where this was pondered by several of the lang team.)</p>
<p>Sebastian, if you have a const you often don't need to also bind as a let. You can just pass the const to a function, or whatever it was you were going to do.</p>
<p>Personally, I don't think it's a big deal, i've come to terms with just writing consts into function bodies all the time when i need to ensure that they're consts. It's like 1% annoying to learn about and then you get over it.</p>



<a name="195874558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195874558" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195874558">(Apr 30 2020 at 17:36)</a>:</h4>
<p>I have (very-occasionally) wanted to be able to make an arm that's <code>0..const{N-1}</code> where having to make a new <code>const</code> item is a pain, especially if <code>N</code> is based on a generic argument somehow</p>



<a name="195875137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195875137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195875137">(Apr 30 2020 at 17:40)</a>:</h4>
<p>Hmm, I think you can do a horrible hack to force a let to be compile-time, or error if not:</p>
<div class="codehilite"><pre><span></span><code><span class="n">macro_rules</span><span class="o">!</span><span class="w"> </span><span class="n">must_be_const</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="cp">$e</span>:<span class="nc">expr</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span>: <span class="kp">&amp;</span><span class="nb">&#39;static</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="cp">$e</span><span class="p">;</span><span class="w"> </span><span class="o">*</span><span class="n">x</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">must_be_const</span><span class="o">!</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// must_be_const!(4_i32.leading_zeros()); // FAILS</span>
<span class="w">    </span><span class="n">must_be_const</span><span class="o">!</span><span class="p">(</span><span class="n">std</span>::<span class="n">mem</span>::<span class="n">size_of</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>


<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=99083194dcf153af535d359ce823f47a" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=99083194dcf153af535d359ce823f47a">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=99083194dcf153af535d359ce823f47a</a></p>



<a name="195875230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195875230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195875230">(Apr 30 2020 at 17:41)</a>:</h4>
<p>That's absolutely an abuse of RSP, though, and I'm kinda sad that it works...</p>



<a name="195875326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195875326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hanna Kruppe <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195875326">(Apr 30 2020 at 17:41)</a>:</h4>
<p>This forces the expression to be promotable, which is a small subset of const. In particular it excludes all const fn calls except a few magic ones that were white listed for backwards compatibility</p>



<a name="195875494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195875494" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195875494">(Apr 30 2020 at 17:42)</a>:</h4>
<p>(what's a promotable const? i hear it a lot and i don't know what it means)</p>



<a name="195876525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195876525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hanna Kruppe <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195876525">(Apr 30 2020 at 17:51)</a>:</h4>
<p>The only decent write up I know of is <a href="https://github.com/rust-lang/const-eval/blob/master/promotion.md" title="https://github.com/rust-lang/const-eval/blob/master/promotion.md">https://github.com/rust-lang/const-eval/blob/master/promotion.md</a></p>



<a name="195876973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195876973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195876973">(Apr 30 2020 at 17:54)</a>:</h4>
<p>Oh, okay.</p>
<p>Also i'd say that the only pain point to having to write <code>const x = expr</code> compared to <code>let x = expr</code> is that you have to give a type to all consts. I don't know how crazy it would be to just not require an explicit type on private consts.</p>



<a name="195884719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195884719" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Malton <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195884719">(Apr 30 2020 at 18:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195874279" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195874279">said</a>:</p>
<blockquote>
<p>Sebastian, if you have a const you often don't need to also bind as a let. You can just pass the const to a function, or whatever it was you were going to do.</p>
</blockquote>
<p>Ah I didn't know it came from the lang meeting. I thought you wanted a global let, that was guaranteed to be evaluated at compile time.</p>



<a name="195887304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195887304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195887304">(Apr 30 2020 at 19:10)</a>:</h4>
<p>I think that there's certainly a possibility of removing explicit type annotations on some set of private/inner/etc items.  I've wanted it for random things like local _functions_ sometimes too.  So my not-thoroughly-considered inclination here is that it shouldn't just be for consts, but should be a tweak to the general item rule or some opt-in to make things more structural or macro-like or something.</p>
<p>Like we could have <code>☃ const N = 100;</code> or <code>☃ fn foo(a, b) { (a + b).sqrt() }</code> that works more like a macro than generics or type inference.</p>
<p>(Using <code>☃</code> for obvious strawman syntax -- a real one could be something like <code>macro</code>, but I'll avoid that for now)</p>



<a name="195893805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195893805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195893805">(Apr 30 2020 at 20:02)</a>:</h4>
<p>I favor <code>const { expr }</code> fwiw</p>



<a name="195893842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195893842" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195893842">(Apr 30 2020 at 20:03)</a>:</h4>
<p><code>let x = const { 100 };</code> seems ok?</p>



<a name="195893979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195893979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195893979">(Apr 30 2020 at 20:04)</a>:</h4>
<p>anyway I didn't really read through this thread in full so I'll be quiet now :)</p>



<a name="195898894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195898894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195898894">(Apr 30 2020 at 20:45)</a>:</h4>
<p>That seems like a nice way to simplify the promotable rules as well, if we wanted to in future -- <code>&amp;const { ... }</code> would always be promotable.</p>



<a name="195904250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195904250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195904250">(Apr 30 2020 at 21:29)</a>:</h4>
<p>so about once a month <code>const { ... }</code> comes up, and more and more people say they like the idea</p>



<a name="195904304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195904304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195904304">(Apr 30 2020 at 21:30)</a>:</h4>
<p>anyone volunteering for writing an RFC? :D</p>



<a name="195904325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195904325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195904325">(Apr 30 2020 at 21:30)</a>:</h4>
<p>(IIRC <span class="user-mention" data-user-id="124288">@oli</span> once said they had that planned, not sure how far that got)</p>



<a name="195905330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195905330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195905330">(Apr 30 2020 at 21:39)</a>:</h4>
<p>I would be happy to do it if <span class="user-mention" data-user-id="124288">@oli</span> is too busy.</p>



<a name="195913203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195913203" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195913203">(Apr 30 2020 at 23:04)</a>:</h4>
<p>I was thinking the same, <span class="user-mention" data-user-id="120791">@RalfJ</span> :D</p>
<p>I'd be happy to participate, <span class="user-mention" data-user-id="118594">@ecstatic-morse</span>.  Apparently we're nearing 2 years since <a href="https://internals.rust-lang.org/t/quick-thought-const-blocks/7803?u=scottmcm" title="https://internals.rust-lang.org/t/quick-thought-const-blocks/7803?u=scottmcm">my post about it</a>.  (Not to say that was the first mention.  I'm sure others thought of it earlier.)</p>



<a name="195913743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195913743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195913743">(Apr 30 2020 at 23:11)</a>:</h4>
<p>Ah! I was wondering who first proposed this. Though like you say, this has probably been invented independently several times</p>



<a name="195914144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195914144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195914144">(Apr 30 2020 at 23:15)</a>:</h4>
<p>I envision <code>const { ... }</code> as an expression is equivalent to <code>{ const PRIVATE: InferredType = { ... }; PRIVATE }</code>. I think it is worthwhile to extend the grammar to make it valid in patterns as you mention. I would need to look at the pattern grammar again to say more.</p>



<a name="195914357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195914357" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195914357">(Apr 30 2020 at 23:18)</a>:</h4>
<p>I would also allow <code>const {}</code> in all const contexts out of the box since we <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=b9ffa0d8552768190eff06ac80b6ad1d" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=b9ffa0d8552768190eff06ac80b6ad1d">currently allow</a> <code>const</code> declarations in them.</p>



<a name="195914379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195914379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195914379">(Apr 30 2020 at 23:18)</a>:</h4>
<p>(this is centril's question number 2)</p>



<a name="195914705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195914705" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195914705">(Apr 30 2020 at 23:23)</a>:</h4>
<p>Otherwise this is pretty much what I had in mind.</p>



<a name="195914875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195914875" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195914875">(Apr 30 2020 at 23:25)</a>:</h4>
<p>Oh, and I would call these anonymous consts or anonymous const expressions to emphasize that they have the same semantics as <code>{ const X = expr; X }</code></p>



<a name="195914951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195914951" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195914951">(Apr 30 2020 at 23:26)</a>:</h4>
<p>Though I think "constant expression" might already be in use?</p>



<a name="195914960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195914960" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195914960">(Apr 30 2020 at 23:26)</a>:</h4>
<p><del>Or, equivalently, <code>const fn private() -&gt; Inferredtype { ... } private()</code>, yeah.</del>  EDIT: Not quite; see 3 posts down.</p>
<p>Might be good enough just to say that the inside of said blocks is a "const context" following the same rules as other such places (like array lengths).  Since I don't think we'd want to actually implement this as a desugar to an item.</p>
<p>While I <em>want</em> it in patterns, I might actually leave that for a different PR, since the expression form is a completely separable concern for the pattern form.  And now that we have both <code>const fn</code> and <code>async fn</code>, but only <code>async{}</code> and not <code>const{}</code>, it feels like the <code>const{}</code> is a much more obviously-correct extension.</p>



<a name="195915134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915134">(Apr 30 2020 at 23:28)</a>:</h4>
<p>In any case, we will need it in <code>const fn</code>, since those don't always run at compile time.</p>



<a name="195915145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915145" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915145">(Apr 30 2020 at 23:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">ecstatic-morse</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195914357" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195914357">said</a>:</p>
<blockquote>
<p>I would also allow <code>const {}</code> in all const contexts out of the box since we <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=b9ffa0d8552768190eff06ac80b6ad1d" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=b9ffa0d8552768190eff06ac80b6ad1d">currently allow</a> <code>const</code> declarations in them.</p>
</blockquote>
<p>Probably allowed syntactically, but warn-by-default-linted, so <code>const { const { foo() } }</code> is linted, same as <code>unsafe { unsafe { foo() } }</code>.</p>



<a name="195915282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915282">(Apr 30 2020 at 23:30)</a>:</h4>
<p>The <code>const fn</code> desugaring isn't quite equivalent though, since it would make an anonymous const ineligible for promotion.</p>



<a name="195915439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915439">(Apr 30 2020 at 23:32)</a>:</h4>
<p>That actually might be worth discussing. Do we want people to write <code>&amp;const { u32::max_value() }</code> or <code>const { &amp;u32::max_value() }</code> to get a <code>&amp;'static u32</code>? I suspect we want the latter?</p>



<a name="195915442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915442">(Apr 30 2020 at 23:32)</a>:</h4>
<p>Oh, thank you past-self for putting a nice example use for the const pattern in <a href="https://internals.rust-lang.org/t/quick-thought-const-blocks/7803/10?u=scottmcm" title="https://internals.rust-lang.org/t/quick-thought-const-blocks/7803/10?u=scottmcm">that thread</a>: <code>match x { const{'z' as i32} =&gt; ...</code></p>



<a name="195915605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915605">(Apr 30 2020 at 23:34)</a>:</h4>
<p>But it seems like part of the motivation for <code>const {}</code> is to make things eligible for promotion in contexts besides rvalue static promotion (e.g. array initalizers), so I think <code>const {}</code> should be eligible for promotion.</p>



<a name="195915621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915621" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915621">(Apr 30 2020 at 23:35)</a>:</h4>
<p>The latter would error under current rules, right?</p>



<a name="195915686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915686" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915686">(Apr 30 2020 at 23:36)</a>:</h4>
<p>I think I'd just say that const blocks (themselves) are always eligible for promotion, yeah, not that their bodies get any special rules different from the current ones in a const context</p>



<a name="195915697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915697">(Apr 30 2020 at 23:36)</a>:</h4>
<p>No. <code>const X: &amp;u32 = &amp;u32::max_value();</code> is legal today.</p>



<a name="195915985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195915985" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195915985">(Apr 30 2020 at 23:40)</a>:</h4>
<p>Is that because it's in the white-list, or is everything in const context always promotable?</p>



<a name="195916022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916022">(Apr 30 2020 at 23:41)</a>:</h4>
<p>Because aesthetically I don't like <code>&amp;const { }</code> at all, since it looks way too much like <code>&amp;mut</code></p>



<a name="195916027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916027" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916027">(Apr 30 2020 at 23:41)</a>:</h4>
<p>That actually doesn't rely on promotion at all. Everything at the "top-level" of a const initializer has the static lifetime.</p>



<a name="195916113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916113" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916113">(Apr 30 2020 at 23:42)</a>:</h4>
<p>Oh, of course.  That makes sense, same as how all elided lifetimes in <code>const</code>s are <code>'static</code> because of course they are</p>



<a name="195916222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916222" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916222">(Apr 30 2020 at 23:43)</a>:</h4>
<p><del>So great, sounds like <code>const{}</code> doesn't need to ever be promotable, since they can just "move the <code>&amp;</code> inside".</del></p>
<p>Well, actually, what does <code>&amp;(1 + const{ i32::min_value() })</code> do?  Is it promotable?</p>



<a name="195916304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916304">(Apr 30 2020 at 23:44)</a>:</h4>
<p>It does. One of the motivations is to allow <code>[const { Vec::new() }; 42]</code>.</p>



<a name="195916418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916418" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916418">(Apr 30 2020 at 23:46)</a>:</h4>
<p>So I guess the RFC _would_ add the "<code>const{...}</code> is always promotable" rule, but there'd be a non-normative note that clippy might want to lint against <code>&amp;const{...}</code>?</p>



<a name="195916442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916442">(Apr 30 2020 at 23:46)</a>:</h4>
<p>I think that's exactly right.</p>



<a name="195916479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916479" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916479">(Apr 30 2020 at 23:47)</a>:</h4>
<p>Promotion appears to work for <code>&amp;(1+1)</code>, which is somewhat unexpected?</p>



<a name="195916536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916536">(Apr 30 2020 at 23:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">ecstatic-morse</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195916304" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195916304">said</a>:</p>
<blockquote>
<p><code>[const { Vec::new() }; 42]</code></p>
</blockquote>
<p>Talk me through what you're thinking between <code>[const { Vec::new() }; 42]</code> and <code>const { [Vec::new(); 42] }</code>, please.  I'm not sure what rule you're invisioning in that post.</p>



<a name="195916565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916565">(Apr 30 2020 at 23:48)</a>:</h4>
<p>I don't have a clue what the rules for promotion are <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="195916616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916616" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916616">(Apr 30 2020 at 23:49)</a>:</h4>
<p>As an aside, the original rvalue static promotion RFC/implementation was overbroad IMO, we ended up promoting a lot of stuff that was not explicitly mentioned. <code>wg-const-eval</code> (especially <span class="user-mention silent" data-user-id="120791">RalfJ</span>) has been trying to limit the use of promotion for this reason.</p>



<a name="195916696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916696" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916696">(Apr 30 2020 at 23:50)</a>:</h4>
<p>Lemme find some links</p>



<a name="195916699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916699">(Apr 30 2020 at 23:50)</a>:</h4>
<p>I do think this would let us move towards a potentially simpler rvalue-static-promotion rule over an edition boundary.  Like saying that only literals and <code>const{}</code>s are promoted.</p>



<a name="195916703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916703" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916703">(Apr 30 2020 at 23:50)</a>:</h4>
<p><a href="https://github.com/rust-lang/const-eval/blob/master/promotion.md" title="https://github.com/rust-lang/const-eval/blob/master/promotion.md">Promotability rules</a></p>



<a name="195916818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916818" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916818">(Apr 30 2020 at 23:52)</a>:</h4>
<p>And that the future-change lint could have a cargo-fix that changes complicated promotion situations to <code>const{}</code> blocks so the migration is easy</p>



<a name="195916853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916853">(Apr 30 2020 at 23:53)</a>:</h4>
<blockquote>
<p>Talk me through what you're thinking between <code>[const { Vec::new() }; 42]</code> and <code>const { [Vec::new(); 42] }</code>, please.  I'm not sure what rule you're invisioning in that post.</p>
</blockquote>
<p>Ah, I hadn't thought of putting the braces outside. Because the part to the right of the semicolon is already a const context, I believe these two are functionally equivalent? It's just a matter of style.</p>



<a name="195916955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916955">(Apr 30 2020 at 23:54)</a>:</h4>
<p>That's because we promote function calls inside a constant. This is <a href="https://github.com/rust-lang/const-eval/blob/master/promotion.md#promotion-contexts-inside-const-and-static" title="https://github.com/rust-lang/const-eval/blob/master/promotion.md#promotion-contexts-inside-const-and-static">the relevant section</a>.</p>



<a name="195916982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916982">(Apr 30 2020 at 23:55)</a>:</h4>
<p>Ah, the extra 2203 rules mentioned in your earlier link clear that up</p>



<a name="195916990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195916990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195916990">(Apr 30 2020 at 23:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195916699" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195916699">said</a>:</p>
<blockquote>
<p>I do think this would let us move towards a potentially simpler rvalue-static-promotion rule over an edition boundary.  Like saying that only literals and <code>const{}</code>s are promoted.</p>
</blockquote>
<p>Very much in agreement with this BTW.</p>



<a name="195917094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195917094" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195917094">(Apr 30 2020 at 23:57)</a>:</h4>
<p>That's a great document.  I thought I wanted to simplify things before, but having skimmed through it now I <em>know</em> i do <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="195917204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195917204" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195917204">(Apr 30 2020 at 23:58)</a>:</h4>
<p>Yeah, promotion is really hard to reason about. <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=3d4b2a0825edc53ade0e2f0a91c56144" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=3d4b2a0825edc53ade0e2f0a91c56144">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=3d4b2a0825edc53ade0e2f0a91c56144</a></p>



<a name="195917362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195917362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195917362">(May 01 2020 at 00:00)</a>:</h4>
<p>That's actually called out specifically as okay by the promotion rules, although I think they were partly trying to document behavior that had accidentally been stabilized. As long as it doesn't happen in release mode it's fine.</p>



<a name="195917397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195917397" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195917397">(May 01 2020 at 00:01)</a>:</h4>
<p>You can see I am rediscovering the edge cases as I go, and I wrote a not-insignificant portion of that document XD</p>



<a name="195917681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195917681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195917681">(May 01 2020 at 00:05)</a>:</h4>
<p>Probably too scope-creepy to include in the RFC, but it came to mind so I figured I'd say it:</p>
<p>What about <code>static</code> blocks?  That'd let it produce a <em>place</em> instead of a <em>value</em>.</p>



<a name="195917788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195917788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195917788">(May 01 2020 at 00:06)</a>:</h4>
<p>Hmm, probably the linking monomorphization questions about that would be too scary to want to consider.</p>



<a name="195917961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195917961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195917961">(May 01 2020 at 00:09)</a>:</h4>
<p>I've never needed an anonymous compile-time value that is also guaranteed to reside at a fixed address in memory.</p>



<a name="195918019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918019" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918019">(May 01 2020 at 00:10)</a>:</h4>
<p>Although it's technically possible I think? I'm just not terribly interested in speccing it out.</p>



<a name="195918083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918083" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918083">(May 01 2020 at 00:11)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="k">fn</span> <span class="nf">per_type_counter</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span>-&gt;<span class="kt">usize</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">static</span><span class="p">{</span><span class="n">AtomicUsize</span>::<span class="n">new</span><span class="p">()}.</span><span class="n">increment</span><span class="p">(</span><span class="k">enum</span>::<span class="n">SeqCst</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="195918162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918162">(May 01 2020 at 00:12)</a>:</h4>
<p>But yeah, let's not bother.</p>



<a name="195918206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918206" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918206">(May 01 2020 at 00:12)</a>:</h4>
<p>Way too many scary corners for its minimal-at-best value</p>



<a name="195918560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918560">(May 01 2020 at 00:18)</a>:</h4>
<p>Okay, so to summarize, what are things you feel are settled? These are mine:</p>
<ul>
<li><code>const {}</code> is a new "const context" for purposes of <a href="https://doc.rust-lang.org/reference/const_eval.html#const-context" title="https://doc.rust-lang.org/reference/const_eval.html#const-context">the reference</a></li>
<li><code>const {}</code> is valid wherever an expression would be. However, if we use it inside a <code>const</code>, <code>static</code>, enum discriminant initializer, or array/repeat expression length we will lint (level TBD) since an extra level of constness should never matter.</li>
<li><code>const {}</code> behaves the same as <code>{ const X: _ = ...; X };</code>for the purposes of const-checking and promotion. (Explaining the consequences of that last choice will be important, since it also affects const qualification)</li>
</ul>



<a name="195918759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918759">(May 01 2020 at 00:21)</a>:</h4>
<ul>
<li><code>const { &amp;func() }</code> is preferred to <code>&amp;const { func() }</code>, although that's probably a clippy lint, not a builtin</li>
</ul>



<a name="195918858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918858">(May 01 2020 at 00:22)</a>:</h4>
<p>Unsettled for me are:</p>
<ul>
<li>name (I vote for anonymous consts)</li>
<li><code>const { [ func(); 42 ] }</code> vs <code>[const { func() }; 42]</code>. Are these equivalent? which is preferable?</li>
<li>Do we also handle patterns in the same RFC or defer (I vote same RFC, they're useful and there's not really any additional concerns)</li>
</ul>



<a name="195918984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918984" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918984">(May 01 2020 at 00:24)</a>:</h4>
<p>I think the second form has to be the form.</p>



<a name="195918995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195918995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195918995">(May 01 2020 at 00:25)</a>:</h4>
<p>You force func() in a const context and get a value, then duplicate that 42 times.</p>



<a name="195919076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919076">(May 01 2020 at 00:26)</a>:</h4>
<p>wait isn't an array init already a const context you said?</p>



<a name="195919089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919089" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919089">(May 01 2020 at 00:26)</a>:</h4>
<p>array length is. Array initializers are a "promotion context"</p>



<a name="195919110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919110">(May 01 2020 at 00:26)</a>:</h4>
<p>(on nightly with the feature flag that is)</p>



<a name="195919200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919200" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919200">(May 01 2020 at 00:28)</a>:</h4>
<p>ah, then it should be the inner form, yeah. Expressions should always make sense when evaluated innermost to outer (as much as possible), so you need to make it a const context to init the array</p>



<a name="195919230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919230">(May 01 2020 at 00:28)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=144dcc98d6467d99e647dfe3810f9298" title="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=144dcc98d6467d99e647dfe3810f9298">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2018&amp;gist=144dcc98d6467d99e647dfe3810f9298</a></p>



<a name="195919343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919343" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919343">(May 01 2020 at 00:30)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span> both forms would be valid with the current promotion rules.</p>



<a name="195919373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919373" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919373">(May 01 2020 at 00:30)</a>:</h4>
<p>oh, hmm.</p>



<a name="195919974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195919974" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195919974">(May 01 2020 at 00:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195919200" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195919200">said</a>:</p>
<blockquote>
<p>ah, then it should be the inner form, yeah. Expressions should always make sense when evaluated innermost to outer (as much as possible), so you need to make it a const context to init the array</p>
</blockquote>
<p>I don't think that's necessarily true for effect contexts.  If you replace <code>const</code> with <code>unsafe</code> they're both fine, and it's a style-not-language-definition question which to use</p>



<a name="195920281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195920281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195920281">(May 01 2020 at 00:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">ecstatic-morse</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195918858" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195918858">said</a>:</p>
<blockquote>
<ul>
<li>name (I vote for anonymous consts)</li>
</ul>
</blockquote>
<p><code>async{}</code> was called "async blocks" (<a href="https://github.com/rust-lang/rfcs/blob/master/text/2394-async_await.md#async-blocks" title="https://github.com/rust-lang/rfcs/blob/master/text/2394-async_await.md#async-blocks">https://github.com/rust-lang/rfcs/blob/master/text/2394-async_await.md#async-blocks</a>), so maybe just "const blocks".</p>
<p>"anonymous consts" makes me think of that <code>const _: usize = ...;</code> feature.</p>



<a name="195920407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195920407" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195920407">(May 01 2020 at 00:45)</a>:</h4>
<p>Those are called "unnamed" constants in the reference, but point taken.</p>



<a name="195920633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195920633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195920633">(May 01 2020 at 00:49)</a>:</h4>
<p>I'll just refer to it as <code>const {}</code> for now and we can have a final bikeshedding vote (either org members or just lang-team members is fine) at some point in the future.</p>



<a name="195942288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195942288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195942288">(May 01 2020 at 08:55)</a>:</h4>
<p>I don't remember if I said I was working on an RFC, but I was working on a prototype PR, which showed many many impl problems with it, which I've started to solve because the problems exist for array lengths, too</p>



<a name="195942299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195942299" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195942299">(May 01 2020 at 08:55)</a>:</h4>
<p>but that shouldn't block an RFC</p>



<a name="195945736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195945736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195945736">(May 01 2020 at 09:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="118594">ecstatic-morse</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195916616" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/195916616">said</a>:</p>
<blockquote>
<p>As an aside, the original rvalue static promotion RFC/implementation was overbroad IMO, we ended up promoting a lot of stuff that was not explicitly mentioned. <code>wg-const-eval</code> (especially <span class="user-mention silent" data-user-id="120791">RalfJ</span>) has been trying to limit the use of promotion for this reason.</p>
</blockquote>
<p>another link: <a href="https://github.com/rust-lang/const-eval/issues/19" title="https://github.com/rust-lang/const-eval/issues/19">https://github.com/rust-lang/const-eval/issues/19</a></p>



<a name="195945966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195945966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195945966">(May 01 2020 at 09:52)</a>:</h4>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> also see <a href="https://github.com/rust-lang/const-eval/blob/master/promotion.md#implicit-and-explicit-contexts" title="https://github.com/rust-lang/const-eval/blob/master/promotion.md#implicit-and-explicit-contexts">https://github.com/rust-lang/const-eval/blob/master/promotion.md#implicit-and-explicit-contexts</a> for the difference in promotion rules (anonymous) consts and normal run-time code.</p>



<a name="195946007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195946007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195946007">(May 01 2020 at 09:53)</a>:</h4>
<p>another open question for the RFC:<br>
should we work towards not promoting <em>any</em> <code>fn</code> calls outside explicit promotion contexts? i.e., currently this works:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">x</span>: <span class="kp">&amp;</span><span class="nb">&#39;static</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="kt">i32</span>::<span class="n">max_value</span><span class="p">();</span><span class="w"></span>
</code></pre></div>


<p>should we require <code>const { &amp;i32::max_value() }</code> instead?<br>
(well in this specific case, <code>&amp;i32::MAX</code> will also work without explicit <code>const</code>, but you get the idea)</p>



<a name="195946118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195946118" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195946118">(May 01 2020 at 09:54)</a>:</h4>
<p>that would basically amount to try to remove <code>rustc_promotable</code> from as many functions as we can get away with, and maybe deprecating the ability for functions where just removing it causes too much breakage</p>



<a name="195987218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195987218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195987218">(May 01 2020 at 17:37)</a>:</h4>
<p>I do like the idea of eliminating the "these functions are special" list.  I don't know if it'd be worth trying to roll them back or just saying that we'll never add any more because you can get it by a user-opt-in instead of the library-opt-in</p>



<a name="195987325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195987325" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195987325">(May 01 2020 at 17:37)</a>:</h4>
<p>Ah, I didn't know <code>max_value</code> was <code>#[rustc_promotable]</code></p>



<a name="195988480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195988480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195988480">(May 01 2020 at 17:47)</a>:</h4>
<p>re: removing <code>#[rustc_promotable]</code> when possible, I'm not super eager to break back compat, even with a crater run since coverage is not 100%. The following functions are  currently marked<br>
<code>#[rustc_promotable]</code>.</p>
<ul>
<li><code>i32::min_value</code>, <code>i32::max_value</code></li>
<li><code>std::mem::size_of</code>, <code>std::mem::align_of</code></li>
<li><code>RangeInclusive::new</code>/ <code>3..=5</code></li>
<li><code>std::ptr::null</code>, <code>std::ptr::null_mut</code></li>
<li><code>RawWaker::new</code>, <code>RawWakerVTable::new</code> ???</li>
<li><code>Duration::from_secs</code></li>
</ul>



<a name="195988905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195988905" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195988905">(May 01 2020 at 17:51)</a>:</h4>
<p>Except for the <code>RawWaker</code> ones, I don't think any of these could plausibly have observable side-effects (lemme know if you disagree). Perhaps making <code>#[rustc_promotable]</code> no longer work would be a good candidate for the next edition?</p>



<a name="195989007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195989007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195989007">(May 01 2020 at 17:52)</a>:</h4>
<p>With <code>const {}</code> as the suggested replacement.</p>



<a name="195989835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195989835" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195989835">(May 01 2020 at 17:59)</a>:</h4>
<p>While that list doesn't make me happy (<code>..=</code> but not <code>..</code> seems weird, for example), it looks small enough to not be a pervasive problem.  And a few of those I wish were just real consts anyway (like <code>size_of</code>), so behaving like them doesn't seem crazy.</p>
<p>Maybe instead we could just warn about non-literals being promoted and suggest adding a <code>const{}</code> to be clear about what's going on.  That's a prerequisite to a potential edition change anyway, and we can defer any decision about actually blocking it over an edition boundary.</p>



<a name="195991365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195991365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195991365">(May 01 2020 at 18:12)</a>:</h4>
<p>Warning about all non-literals seems good to me (although I don't think it will be trivial to implement).</p>



<a name="195991491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/195991491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#195991491">(May 01 2020 at 18:13)</a>:</h4>
<p>Also, I believe <code>..</code> is desugared to a struct literal (<code>Range { .. }</code>), so it will also get promoted. Presumably we added <code>#[rustc_promotable]</code> to <code>RangeInclusive</code> to make it behave the same.</p>



<a name="196042301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/196042301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#196042301">(May 02 2020 at 09:14)</a>:</h4>
<p>of these, I'd say <code>Duration::from_secs</code> stands out.<br>
also I assume it's <code>min/max_value</code> for all int types, not just <code>i32</code>?</p>



<a name="196042315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/196042315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#196042315">(May 02 2020 at 09:15)</a>:</h4>
<p>I got away with de-promoting some <code>Duration</code> methods in <a href="https://github.com/rust-lang/rust/pull/67531" title="https://github.com/rust-lang/rust/pull/67531">https://github.com/rust-lang/rust/pull/67531</a>. might be worth doing that for <code>from_secs</code> as well?</p>



<a name="196042334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/196042334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#196042334">(May 02 2020 at 09:15)</a>:</h4>
<p>the <code>RawWaker</code> ones are actually fairly recent, but AFAIK they are also just constructor wrapper, which was a requirement for making them promotable</p>



<a name="196044953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/196044953" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#196044953">(May 02 2020 at 10:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120791">RalfJ</span> <a href="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/196042315" title="#narrow/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22/near/196042315">said</a>:</p>
<blockquote>
<p>I got away with de-promoting some <code>Duration</code> methods in <a href="https://github.com/rust-lang/rust/pull/67531" title="https://github.com/rust-lang/rust/pull/67531">https://github.com/rust-lang/rust/pull/67531</a>. might be worth doing that for <code>from_secs</code> as well?</p>
</blockquote>
<p>I am proposing that in <a href="https://github.com/rust-lang/rust/pull/71796" title="https://github.com/rust-lang/rust/pull/71796">https://github.com/rust-lang/rust/pull/71796</a></p>



<a name="196224308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/213817-t-lang/topic/%22Why%20use%20%60const%60%20over%20%60let%60%3F%22/near/196224308" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/213817-t-lang/topic/.22Why.20use.20.60const.60.20over.20.60let.60.3F.22.html#196224308">(May 04 2020 at 18:53)</a>:</h4>
<p>Opened <a href="https://github.com/rust-lang/rfcs/pull/2920" title="https://github.com/rust-lang/rfcs/pull/2920">https://github.com/rust-lang/rfcs/pull/2920</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
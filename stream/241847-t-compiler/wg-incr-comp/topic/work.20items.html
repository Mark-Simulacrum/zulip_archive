<html>
<head><meta charset="utf-8"><title>work items · t-compiler/wg-incr-comp · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/index.html">t-compiler/wg-incr-comp</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html">work items</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="209997796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/209997796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#209997796">(Sep 14 2020 at 12:37)</a>:</h4>
<p>Hey eveyone, I've opened an issue in our repo to track ongoing work as well as work we'd like to do. I've also started surveying the rust-lang/rust issue tracker for ideas. </p>
<p>There's already quite a few items in this list so if you're looking for something to do, please check it out! </p>
<p><a href="https://github.com/rust-lang/wg-incr-comp/issues/1">https://github.com/rust-lang/wg-incr-comp/issues/1</a></p>



<a name="209997934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/209997934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#209997934">(Sep 14 2020 at 12:38)</a>:</h4>
<p>I would be happy to answer questions as much as I can so please don't hesitate to ask <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="209998082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/209998082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#209998082">(Sep 14 2020 at 12:40)</a>:</h4>
<p>I'll take a look at these, thanks for this <span class="user-mention" data-user-id="125250">@Wesley Wiser</span>!</p>



<a name="210028033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210028033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210028033">(Sep 14 2020 at 16:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/work.20items/near/209997796">said</a>:</p>
<blockquote>
<p>Hey eveyone, I've opened an issue in our repo to track ongoing work as well as work we'd like to do. I've also started surveying the rust-lang/rust issue tracker for ideas. </p>
<p>There's already quite a few items in this list so if you're looking for something to do, please check it out! </p>
<p><a href="https://github.com/rust-lang/wg-incr-comp/issues/1">https://github.com/rust-lang/wg-incr-comp/issues/1</a></p>
</blockquote>
<p>I wonder if it's not better to use github projects to track all this :)</p>



<a name="210032757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210032757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210032757">(Sep 14 2020 at 16:53)</a>:</h4>
<p>Is there a possiblity of getting mentoring notes on <a href="https://github.com/rust-lang/rust/issues/45408">https://github.com/rust-lang/rust/issues/45408</a>? </p>
<p>If so I might be able to help out here :)</p>



<a name="210036505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210036505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210036505">(Sep 14 2020 at 17:22)</a>:</h4>
<p>Yes, I will record some notes tonight</p>



<a name="210125186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210125186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210125186">(Sep 15 2020 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="281950">@Aman Arora</span> I left some notes with what I know off hand here <a href="https://github.com/rust-lang/rust/issues/45408#issuecomment-692697561">https://github.com/rust-lang/rust/issues/45408#issuecomment-692697561</a></p>



<a name="210138468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210138468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210138468">(Sep 15 2020 at 14:40)</a>:</h4>
<p>I'll take a look tonight, thanks</p>



<a name="210646159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210646159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210646159">(Sep 20 2020 at 02:52)</a>:</h4>
<p>So I started looking at some of this,  if we don't allocate a DepNode what DepNodeIndex do we return? I tried it with virtual_index based on some similar code, but it fails when <code>dep_node_index_of</code> is called.</p>
<p>Here is what I did: <a href="https://github.com/arora-aman/rust/commit/e602ec0d6527051e888e8b000d6514ed0fe572e5">https://github.com/arora-aman/rust/commit/e602ec0d6527051e888e8b000d6514ed0fe572e5</a></p>



<a name="210649944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210649944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210649944">(Sep 20 2020 at 05:08)</a>:</h4>
<p>Actually running without <code> || edges.is_empty()</code> , makes all stage1 tests pass</p>



<a name="210649994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210649994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210649994">(Sep 20 2020 at 05:10)</a>:</h4>
<p>I tried using rust-perf to benchmark locally but looks like I'd need root perms (which I don't have on the server I use) for editing  /proc/sys/kernel/perf_event_paranoid</p>



<a name="210650144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210650144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210650144">(Sep 20 2020 at 05:16)</a>:</h4>
<p>Is there an non root alternative?</p>



<a name="210937974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/210937974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman Arora <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#210937974">(Sep 22 2020 at 22:12)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> <a href="https://github.com/rust-lang/rust/pull/77070">https://github.com/rust-lang/rust/pull/77070</a> had very minimal effect, -4% best case.  +0.4% worst case</p>
<p>I'm assuming it still reduces the memory/storage footprint because we intern less things. That said I don't understand the query system enough to say how many anon DepNodes we have have and how large and impact not interning them would have on storage</p>



<a name="211367867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/work%20items/near/211367867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/work.20items.html#211367867">(Sep 26 2020 at 16:24)</a>:</h4>
<p>hey <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> i can start working on <a href="https://github.com/rust-lang/rust/issues/35902">https://github.com/rust-lang/rust/issues/35902</a>. I'll start looking into it later today but if you have any pointers, it would be helpful <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>prep for compiler-team#490 · t-compiler/wg-incr-comp · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/index.html">t-compiler/wg-incr-comp</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html">prep for compiler-team#490</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274999458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/274999458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#274999458">(Mar 11 2022 at 16:43)</a>:</h4>
<p>making a topic here to discuss the doc that will drive rustc steering meeting <a href="https://github.com/rust-lang/compiler-team/issues/490">compiler-team#490</a>, scheduled for <time datetime="2022-04-01T16:00:00Z">2022-04-01T12:00:00-04:00</time></p>



<a name="275373643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275373643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275373643">(Mar 15 2022 at 13:38)</a>:</h4>
<p>So, IIRC, the topic for meeting is going to be "What are the concrete problems with the current incr. comp. system?", right? I'd say this includes at least (1) robustness, (2) ease of understanding what's going on, and (3) the need to implement algorithms in a non-traditional way.</p>



<a name="275373761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275373761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275373761">(Mar 15 2022 at 13:39)</a>:</h4>
<p>I'm wondering how we should best go about this, <span class="user-mention" data-user-id="125294">@Aaron Hill</span>. Maybe start by collecting concrete complaints people have voiced?</p>



<a name="275374322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275374322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275374322">(Mar 15 2022 at 13:44)</a>:</h4>
<p>What structure do we want the hackmd doc to have? What could a productive discussion look like?</p>



<a name="275482772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275482772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275482772">(Mar 16 2022 at 09:06)</a>:</h4>
<p>I think one reason why the current system appears so invasive is that it turns some minor issues into potential correctness problems:</p>
<ul>
<li>Everything that shows up in a query key or query result must implement HashStable, but getting that implementation wrong can cause actual miscompilations. The stakes to get this right seem way too high.</li>
<li>Query implementations must be deterministic, or we can end up with miscompilations too (such as the vtable-related one last year). Making the compiler's results as deterministic as possible is always a goal, regardless of incr. comp., but normally the error case is much less severe.</li>
</ul>



<a name="275495692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275495692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275495692">(Mar 16 2022 at 11:12)</a>:</h4>
<p>A problem that the current setup shares with any fine-grained on-demand evaluation system is:</p>
<ul>
<li>Many algorithms have to be re-formulated in a way that fits that on-demand structure, adding additional complexity. E.g. an on-demand parser might look quite different from what one finds described in text books or elsewhere. This is less of a problem for things that work in a more local scope (e.g. like doing type checking for a single item) -- but for things that are, for example, based on data flowing through the tree structure of the entire crate, it is a lot of work to figure out how that can be done, and once it's done, there's a more complicated setup that has to be maintained.</li>
</ul>



<a name="275496091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275496091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275496091">(Mar 16 2022 at 11:17)</a>:</h4>
<ul>
<li>There are also rules/invariants around what data a query provider is allowed to access, like "don't access untracked global state", "don't cache things in thread-local or global caches", that are surprising and might seem limiting, and -- most importantly -- that are hard to teach and enforce automatically.</li>
</ul>



<a name="275496442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275496442" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275496442">(Mar 16 2022 at 11:20)</a>:</h4>
<p>Another problem with incr. comp (as opposed to simple on-demand evaluation) is:</p>
<ul>
<li>There is this notion of "stability" where we don't want local changes to have global effects (e.g. we don't want the addition of one item to shift the names/IDs of all other items in the crate). This is very hard to explain, and even for people who have worked with the system for a long time, it continues to be a kind of vague concept. It's one more unfamiliar thing that every newcomer has to learn and keep in mind.</li>
</ul>



<a name="275496513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275496513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275496513">(Mar 16 2022 at 11:21)</a>:</h4>
<blockquote>
<p>"don't access untracked global state"</p>
</blockquote>
<p>I think we should get rid of as much of the global state as possible. That would fix this specific issue by definition.</p>



<a name="275496876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275496876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275496876">(Mar 16 2022 at 11:24)</a>:</h4>
<p>I completely agree. There are some cases where this can creep in that are not entirely obvious, like having a static inside of a query provider that is used for caching things. I guess that's not exactly "global" state but it definitely is untracked mutable state.</p>



<a name="275497921"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275497921" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275497921">(Mar 16 2022 at 11:36)</a>:</h4>
<p>Another problem of fine-grained incr. comp.:</p>
<ul>
<li>One has to be very careful about data dependencies, and as a consequence of separating data that is accessed separately. E.g. it might be natural and otherwise beneficial to keep the span information of an item inside of that item - but then all queries accessing this item will depend on its span, even if they don't access it unless they need to do error reporting. But splitting according to access patterns can be very cumbersome and invasive.</li>
</ul>



<a name="275498436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275498436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275498436">(Mar 16 2022 at 11:42)</a>:</h4>
<p>Another problem with the current system:</p>
<ul>
<li>On-demand evaluation and automated dependency tracking incur quite a bit of overhead, for checking if something is already in the cache, for building the dependency graph, for fingerprinting query results, and even synchronization in the case of the parallel compiler. This makes calling a query more costly than e.g. a simple hash table lookup, and as a consequence algorithms have to be written differently in order to minimize the number of query calls -- something that usually doesn't exactly improve the readability of the code.</li>
</ul>



<a name="275498600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275498600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275498600">(Mar 16 2022 at 11:44)</a>:</h4>
<p>Splitting data can be beneficial for cache usage even without incr comp. Zig for example does this really heavily if I understand it correctly. <a href="https://mitchellh.com/zig/astgen#anatomy-of-astgen">https://mitchellh.com/zig/astgen#anatomy-of-astgen</a></p>



<a name="275499015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275499015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275499015">(Mar 16 2022 at 11:49)</a>:</h4>
<p>Yes, I think one of the things we want to do when evaluating alternatives to the current system, is to check if a given alternative doesn't have the same problem, or if there are other reasons (like performance) for doing something that currently makes things harder. Structuring data in a cache friendly way is one of them (and incr. comp. as it is now is quite limiting there, I'd guess).</p>



<a name="275739236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275739236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275739236">(Mar 17 2022 at 22:57)</a>:</h4>
<p>Is there a hackmd?</p>



<a name="275761090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275761090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275761090">(Mar 18 2022 at 05:10)</a>:</h4>
<p>One other problem - certain 'global' types need special handling for incremental compilation (<code>DefId</code>, <code>CrateNum</code>, <code>Span</code>, and more recently <code>ExpnId</code>)</p>



<a name="275799536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275799536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275799536">(Mar 18 2022 at 13:08)</a>:</h4>
<p>There is no hackmd yet, no.</p>



<a name="275823131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275823131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275823131">(Mar 18 2022 at 16:02)</a>:</h4>
<p>What channel is the meeting in?</p>



<a name="275823680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/275823680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#275823680">(Mar 18 2022 at 16:05)</a>:</h4>
<p>nvm, I though it was today for some reason</p>



<a name="276475392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276475392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276475392">(Mar 24 2022 at 13:30)</a>:</h4>
<p>I'd like to try and clarify what the topic of this meeting should be. Is it one of:</p>
<ol>
<li>Let's chat about what the shortcomings of the current system are and try to make that list as concrete as possible.</li>
<li>Let's discuss specific things we can do to improve maintainability in the next few months and how to prioritize them.</li>
<li>Let's discuss if an on-demand evaluation model is just "too weird" from an architectural point of view and people find it to be a burden to work with such an architecture in general.</li>
</ol>
<p>Or is it none of the above.</p>
<p>cc <span class="user-group-mention" data-user-group-id="3282">@wg-incr-comp</span></p>



<a name="276475652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276475652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276475652">(Mar 24 2022 at 13:33)</a>:</h4>
<p>I looks like <span class="user-group-mention silent" data-user-group-id="3282">wg-incr-comp</span> does not include some key people, so also cc <span class="user-group-mention" data-user-group-id="492">@T-compiler</span>, <span class="user-mention" data-user-id="248906">@cjgillot</span>, <span class="user-mention" data-user-id="120989">@nnethercote</span>, <span class="user-mention" data-user-id="116113">@lqd</span></p>



<a name="276479312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276479312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276479312">(Mar 24 2022 at 14:01)</a>:</h4>
<p>I think there is an unstated assumption in the above that trying to cover all of {1,2,3} is too much for one steering meeting. I agree with that assumption, but I just wanted to make it explicit.</p>



<a name="276479726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276479726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276479726">(Mar 24 2022 at 14:04)</a>:</h4>
<p>I suspect the most productive meeting would be one that covers 1+2</p>



<a name="276479830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276479830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276479830">(Mar 24 2022 at 14:05)</a>:</h4>
<p>but its possible that I'm ignoring the need to talk about 3. Or at least, if we're going to talk about throwing away the current evaluation model, we need to have one or more concrete alternative propsals to discuss, and I don't think we're going to see that within a week.</p>



<a name="276481688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276481688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276481688">(Mar 24 2022 at 14:19)</a>:</h4>
<p>I would also add that, in the context of Salsa, I've been pushing on a new form of on-demand project that (imo) is FAR more natural</p>



<a name="276481744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276481744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276481744">(Mar 24 2022 at 14:19)</a>:</h4>
<p>I think it might also help address some of the reproducability problems we've been encountering in practice, if not in theory</p>



<a name="276481761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276481761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276481761">(Mar 24 2022 at 14:19)</a>:</h4>
<p>though I'm not super close to that</p>



<a name="276481828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276481828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276481828">(Mar 24 2022 at 14:19)</a>:</h4>
<p>I have been contemplating trying to do a meeting with incr-comp folks to extoll its virtues and talk about whether it could be added to the compiler</p>



<a name="276481923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276481923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276481923">(Mar 24 2022 at 14:20)</a>:</h4>
<p>I have to say that I am nervous that even just focusing on <a href="https://github.com/rust-lang/rust/issues/1">#1</a> and <a href="https://github.com/rust-lang/rust/issues/2">#2</a> for a <em>design meeting</em> will not work -- i.e., the meeting ought to be more <em>coming with recommendations</em> ? not sure.</p>



<a name="276481963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276481963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276481963">(Mar 24 2022 at 14:20)</a>:</h4>
<p>I've not been attending design meetings for a while but my recollection is that it is hard to do detailed design with a bunch of people around :)</p>



<a name="276482749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276482749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276482749">(Mar 24 2022 at 14:25)</a>:</h4>
<p>Yes, IIUC, Niko's new model has two helpful additions that would solve some problems (and could be backported to the current system): </p>
<ol>
<li>query results can correspond to more than one dep-node. I.e. you can depend on part of a results without depending on the rest.</li>
<li>numeric IDs (think CrateNum, DefIndex) are never re-used, so they can be compared verbatim.</li>
</ol>



<a name="276483278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276483278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276483278">(Mar 24 2022 at 14:29)</a>:</h4>
<p>wrt to the meeting topic: yeah, "design meeting" is kind of a misnomer here :) It's more about dedicating time to discussing incr. comp. But I'm also a bit worried that that's going to be too free from to be useful.</p>



<a name="276519268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276519268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276519268">(Mar 24 2022 at 18:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/prep.20for.20compiler-team.23490/near/276481828">said</a>:</p>
<blockquote>
<p>I have been contemplating trying to do a meeting with incr-comp folks to extoll its virtues and talk about whether it could be added to the compiler</p>
</blockquote>
<p>Do you have a summary description of the differences between the rustc model and this salsa model?</p>



<a name="276522749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276522749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276522749">(Mar 24 2022 at 18:44)</a>:</h4>
<blockquote>
<p>numeric IDs (think CrateNum, DefIndex) are never re-used, so they can be compared verbatim.</p>
</blockquote>
<p>Won't that run out of 32bit identifiers rather quick? Especially when using inside an editor?</p>



<a name="276522920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276522920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276522920">(Mar 24 2022 at 18:45)</a>:</h4>
<p>Also CrateNum and DefId are interned identifiers like Symbol is. They are only meant to be unique for as long as the interner is still alive which happens to be a single compilation session.</p>



<a name="276525902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276525902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276525902">(Mar 24 2022 at 19:08)</a>:</h4>
<p>Instead of ids, could these all be some interned datastructure that contains their info in a unique way? So <code>type DefId&lt;'arena&gt; = &amp;'arena (CrateId&lt;'arena&gt;, DefPath)</code> or sth like that. Since they are interned, we can just compare addresses. For hashing we'll hash the contents (possibly caching the stable hash in the interned data)</p>



<a name="276525950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276525950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276525950">(Mar 24 2022 at 19:08)</a>:</h4>
<p>Crate id gets bigger, but DefId stays the same size</p>



<a name="276527142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276527142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276527142">(Mar 24 2022 at 19:19)</a>:</h4>
<p>That would be <code>type DefId&lt;'arena&gt; = &amp;'arena DefPathHash</code> I think. It could work. For <code>CrateId</code> I think it is better to simply directly use <code>StableCrateId</code> instead. Both it and a pointer are 64bit.</p>



<a name="276527250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276527250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276527250">(Mar 24 2022 at 19:20)</a>:</h4>
<p>For <code>CrateId</code> and <code>DefIndex</code> we do use them as index into a vec though which means the current code expects them to be dense.</p>



<a name="276527382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276527382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276527382">(Mar 24 2022 at 19:21)</a>:</h4>
<p>Are these lookups on perf critical paths? If not, we can just use a different datastructure</p>



<a name="276527463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276527463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276527463">(Mar 24 2022 at 19:22)</a>:</h4>
<p>Yes, every crate metadata lookup and every HIR lookup does this.</p>



<a name="276527587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276527587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276527587">(Mar 24 2022 at 19:23)</a>:</h4>
<p>HIR lookups are moving to hash tables in various cases, maybe that'll not be an issue after querification of hir lowering</p>



<a name="276527780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276527780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276527780">(Mar 24 2022 at 19:25)</a>:</h4>
<p>That leaves crate metadata lookups. We do a CrateNum lookup and then a DefIndex lookup on pretty much every crate metadata lookup.</p>



<a name="276530914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276530914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276530914">(Mar 24 2022 at 19:54)</a>:</h4>
<p>I guess we could keep cratenums and convert during deserialization and serialization?</p>



<a name="276534284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276534284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276534284">(Mar 24 2022 at 20:21)</a>:</h4>
<p>That is what we do. We remap crate nums during decoding based on the list of dependencies and their StableCrateId's.</p>



<a name="276537967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276537967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276537967">(Mar 24 2022 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="248906">@cjgillot</span> there is a somewhat outdated doc, though it's on my list to try and bring it up to date</p>



<a name="276537981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276537981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276537981">(Mar 24 2022 at 20:53)</a>:</h4>
<p>the biggest part for me is that writing code in this model feels very much like writing "normal rust code"</p>



<a name="276538098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276538098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276538098">(Mar 24 2022 at 20:54)</a>:</h4>
<p>it's true that we don't re-use identifiers, but that's not the whole story; we re-use them but not in adjacent revisions (and we also have a pretty good answer for when we can free up memory that no longer requires a "mark-and-sweep"-like approach, which is cool)</p>



<a name="276538125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276538125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276538125">(Mar 24 2022 at 20:54)</a>:</h4>
<p>I'll see if I can refresh the doc, but I think the next best thing might be to schedule a time to chat</p>



<a name="276591277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276591277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276591277">(Mar 25 2022 at 09:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/prep.20for.20compiler-team.23490/near/276537981">said</a>:</p>
<blockquote>
<p>the biggest part for me is that writing code in this model feels very much like writing "normal rust code"</p>
</blockquote>
<p>Yes, that's probably the most important aspect of it. From what I've seen, it does require much less restructuring of how algorithms are implemented. But I've only talked to Niko about it once a couple of months ago and I'm still unclear about many of the details -- so I think it would be great to have a chat/technical discussion about it in the compiler team.</p>
<p>My current estimation is that, if we adopt a new evaluation model, it would be best to re-write things starting from the inputs (i.e. source files, upstream crates, commandline args), so we make sure to get the fundamental data structures right. Otherwise there's a high risk that we run into many of the exact same issues that we have now, I think.</p>



<a name="276718912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276718912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276718912">(Mar 26 2022 at 10:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/prep.20for.20compiler-team.23490/near/276537967">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="248906">cjgillot</span> there is a somewhat outdated doc, though it's on my list to try and bring it up to date</p>
</blockquote>
<p>Is this the "salsa entity RFC" document?</p>
<p>I'm totally open to restructuring the way incr-comp works right now.  I will first have to understand your document, and to translate to the current concepts we have in rustc.</p>



<a name="276876880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276876880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276876880">(Mar 28 2022 at 13:59)</a>:</h4>
<p>I'd like to try to focus the discussion on the planning for this Friday's meeting. There were a set of potential topics for the meeting posed <a href="#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/prep.20for.20compiler-team.23490/near/276475392">up above</a>. It might be good to try to reframe the question as: What are the ideal set of <em>goals</em> (as in decisions+action items) that we would like to establish by the end of this Friday's meeting. (I'll also note that, in my experience, an <em>opinionated document</em> (and I'd argue: even one with the <em>wrong opinions</em>) tends to drive these hour-long discussions a little more effectively than an open-ended survey with no opinions at all.</p>



<a name="276877131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/276877131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#276877131">(Mar 28 2022 at 14:00)</a>:</h4>
<p>(An example goal would be "We <em>will</em> going to adopt a new evaluation model for incr-comp; and in this case, I'd like to at least have the list of the desired elements for the new model, and pro's and con's of switching to it.)</p>



<a name="277092351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277092351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277092351">(Mar 30 2022 at 04:06)</a>:</h4>
<p>I think an important aspect is avoiding the 'registration' that occurs with a call. We should be able to add caching that's entirely contained in one small area of the compiler (e.g. <code>thread_local</code> caches in <code>HashStable</code>, or the trait selection cache) without needing to think about how it interacts with incremental compilation</p>



<a name="277093217"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277093217" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277093217">(Mar 30 2022 at 04:23)</a>:</h4>
<p>how would that be possible? when you say "registration", you mean "record that a query depends on a previous query", right?</p>



<a name="277118910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277118910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277118910">(Mar 30 2022 at 09:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/prep.20for.20compiler-team.23490/near/276876880">said</a>:</p>
<blockquote>
<p>(I'll also note that, in my experience, an <em>opinionated document</em> (and I'd argue: even one with the <em>wrong opinions</em>)</p>
</blockquote>
<p>I think that's very insightful, <span class="user-mention" data-user-id="116083">@pnkfelix</span>! I could put together such an opinionated document that argues that we should fix/cleanup/extend the current system instead of switching to a new one. That would surely solicit some strong reactions <code>;)</code></p>



<a name="277155146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277155146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277155146">(Mar 30 2022 at 14:41)</a>:</h4>
<p>I mean anything that dynamically 'records' the fact that a specific function call / query was called</p>



<a name="277218143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277218143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277218143">(Mar 31 2022 at 00:07)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> I think a document that presented the tradeoffs and reached the conclusion to fix/cleanup/extend the current system could be useful indeed, as long as it doesn't include the step <a href="https://www.researchgate.net/figure/Then-a-Miracle-Occurs-Copyrighted-artwork-by-Sydney-Harris-Inc-All-materials-used-with_fig2_302632920">"And Then A Miracle Occurs."</a></p>



<a name="277278647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277278647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277278647">(Mar 31 2022 at 13:17)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> <span class="user-mention" data-user-id="125294">@Aaron Hill</span> who is owning developing the document for tomorrows meeting? if you don't mind, I'd like to take a look at it sometime today, if it exists. (If it doesn't exists, that's okay too, though it might be a sign that we should delay having the meeting.)</p>



<a name="277279648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277279648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277279648">(Mar 31 2022 at 13:24)</a>:</h4>
<p>The document does not exist yet. I planned to create an adapted version of <a href="https://hackmd.io/@michaelwoerister/SJf9VU1-5">https://hackmd.io/@michaelwoerister/SJf9VU1-5</a> tomorrow.</p>



<a name="277281508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277281508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277281508">(Mar 31 2022 at 13:38)</a>:</h4>
<p>Tomorrow as in "for tomorrow", right?</p>



<a name="277281565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277281565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277281565">(Mar 31 2022 at 13:38)</a>:</h4>
<p>or I guess you have plenty of time before the steering meeting due to time zone difference between us</p>



<a name="277281576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277281576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277281576">(Mar 31 2022 at 13:38)</a>:</h4>
<p>right?</p>



<a name="277282158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277282158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277282158">(Mar 31 2022 at 13:43)</a>:</h4>
<p>Yes, the meeting is at 4pm for me and I blocked off all morning for creating the doc.</p>



<a name="277282165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277282165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277282165">(Mar 31 2022 at 13:43)</a>:</h4>
<p>anyway, it sounds like the best way I can help <em>today</em> would be to review the text of <a href="https://hackmd.io/@michaelwoerister/SJf9VU1-5">https://hackmd.io/@michaelwoerister/SJf9VU1-5</a> and add whatever feedback I can there, in terms of items that I think need more explanation</p>



<a name="277282532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277282532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277282532">(Mar 31 2022 at 13:45)</a>:</h4>
<p>Yes, I'll leave some comments there for things that I consider outdated</p>



<a name="277282574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277282574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277282574">(Mar 31 2022 at 13:45)</a>:</h4>
<p>I also just saw that <span class="user-mention" data-user-id="248906">@cjgillot</span> left a few comments that I haven't seen yet.</p>



<a name="277282632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/241847-t-compiler/wg-incr-comp/topic/prep%20for%20compiler-team%23490/near/277282632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/241847-t-compiler/wg-incr-comp/topic/prep.20for.20compiler-team.23490.html#277282632">(Mar 31 2022 at 13:46)</a>:</h4>
<p>that would be helpful, thank you. also, if there's anything that you ntoice that you think will be outright <em>omitted</em> from the doc you make (as in, "felix should not waste time advising on improvements to this part"), maybe note that too.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>